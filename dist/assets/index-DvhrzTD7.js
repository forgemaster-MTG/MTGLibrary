(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function i(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(u){if(u.ep)return;u.ep=!0;const f=i(u);fetch(u.href,f)}})();function ef(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var bh={exports:{}},Fl={};var lp;function $v(){if(lp)return Fl;lp=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(o,u,f){var m=null;if(f!==void 0&&(m=""+f),u.key!==void 0&&(m=""+u.key),"key"in u){f={};for(var p in u)p!=="key"&&(f[p]=u[p])}else f=u;return u=f.ref,{$$typeof:a,type:o,key:m,ref:u!==void 0?u:null,props:f}}return Fl.Fragment=n,Fl.jsx=i,Fl.jsxs=i,Fl}var op;function Fv(){return op||(op=1,bh.exports=$v()),bh.exports}var s=Fv(),vh={exports:{}},Ie={};var cp;function qv(){if(cp)return Ie;cp=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),S=Symbol.iterator;function U(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,O={};function V(M,K,X){this.props=M,this.context=K,this.refs=O,this.updater=X||E}V.prototype.isReactComponent={},V.prototype.setState=function(M,K){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,K,"setState")},V.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function F(){}F.prototype=V.prototype;function G(M,K,X){this.props=M,this.context=K,this.refs=O,this.updater=X||E}var te=G.prototype=new F;te.constructor=G,k(te,V.prototype),te.isPureReactComponent=!0;var ce=Array.isArray;function se(){}var T={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function D(M,K,X){var re=X.ref;return{$$typeof:a,type:M,key:K,ref:re!==void 0?re:null,props:X}}function A(M,K){return D(M.type,K,M.props)}function L(M){return typeof M=="object"&&M!==null&&M.$$typeof===a}function H(M){var K={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(X){return K[X]})}var I=/\/+/g;function Me(M,K){return typeof M=="object"&&M!==null&&M.key!=null?H(""+M.key):K.toString(36)}function De(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(se,se):(M.status="pending",M.then(function(K){M.status==="pending"&&(M.status="fulfilled",M.value=K)},function(K){M.status==="pending"&&(M.status="rejected",M.reason=K)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function B(M,K,X,re,Z){var pe=typeof M;(pe==="undefined"||pe==="boolean")&&(M=null);var fe=!1;if(M===null)fe=!0;else switch(pe){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(M.$$typeof){case a:case n:fe=!0;break;case _:return fe=M._init,B(fe(M._payload),K,X,re,Z)}}if(fe)return Z=Z(M),fe=re===""?"."+Me(M,0):re,ce(Z)?(X="",fe!=null&&(X=fe.replace(I,"$&/")+"/"),B(Z,K,X,"",function(Ve){return Ve})):Z!=null&&(L(Z)&&(Z=A(Z,X+(Z.key==null||M&&M.key===Z.key?"":(""+Z.key).replace(I,"$&/")+"/")+fe)),K.push(Z)),1;fe=0;var Se=re===""?".":re+":";if(ce(M))for(var ke=0;ke<M.length;ke++)re=M[ke],pe=Se+Me(re,ke),fe+=B(re,K,X,pe,Z);else if(ke=U(M),typeof ke=="function")for(M=ke.call(M),ke=0;!(re=M.next()).done;)re=re.value,pe=Se+Me(re,ke++),fe+=B(re,K,X,pe,Z);else if(pe==="object"){if(typeof M.then=="function")return B(De(M),K,X,re,Z);throw K=String(M),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return fe}function ie(M,K,X){if(M==null)return M;var re=[],Z=0;return B(M,re,"","",function(pe){return K.call(X,pe,Z++)}),re}function xe(M){if(M._status===-1){var K=M._result;K=K(),K.then(function(X){(M._status===0||M._status===-1)&&(M._status=1,M._result=X)},function(X){(M._status===0||M._status===-1)&&(M._status=2,M._result=X)}),M._status===-1&&(M._status=0,M._result=K)}if(M._status===1)return M._result.default;throw M._result}var Ee=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Oe={map:ie,forEach:function(M,K,X){ie(M,function(){K.apply(this,arguments)},X)},count:function(M){var K=0;return ie(M,function(){K++}),K},toArray:function(M){return ie(M,function(K){return K})||[]},only:function(M){if(!L(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ie.Activity=j,Ie.Children=Oe,Ie.Component=V,Ie.Fragment=i,Ie.Profiler=u,Ie.PureComponent=G,Ie.StrictMode=o,Ie.Suspense=x,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(M){return T.H.useMemoCache(M)}},Ie.cache=function(M){return function(){return M.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(M,K,X){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var re=k({},M.props),Z=M.key;if(K!=null)for(pe in K.key!==void 0&&(Z=""+K.key),K)!C.call(K,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&K.ref===void 0||(re[pe]=K[pe]);var pe=arguments.length-2;if(pe===1)re.children=X;else if(1<pe){for(var fe=Array(pe),Se=0;Se<pe;Se++)fe[Se]=arguments[Se+2];re.children=fe}return D(M.type,Z,re)},Ie.createContext=function(M){return M={$$typeof:m,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:f,_context:M},M},Ie.createElement=function(M,K,X){var re,Z={},pe=null;if(K!=null)for(re in K.key!==void 0&&(pe=""+K.key),K)C.call(K,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(Z[re]=K[re]);var fe=arguments.length-2;if(fe===1)Z.children=X;else if(1<fe){for(var Se=Array(fe),ke=0;ke<fe;ke++)Se[ke]=arguments[ke+2];Z.children=Se}if(M&&M.defaultProps)for(re in fe=M.defaultProps,fe)Z[re]===void 0&&(Z[re]=fe[re]);return D(M,pe,Z)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(M){return{$$typeof:p,render:M}},Ie.isValidElement=L,Ie.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:xe}},Ie.memo=function(M,K){return{$$typeof:b,type:M,compare:K===void 0?null:K}},Ie.startTransition=function(M){var K=T.T,X={};T.T=X;try{var re=M(),Z=T.S;Z!==null&&Z(X,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(se,Ee)}catch(pe){Ee(pe)}finally{K!==null&&X.types!==null&&(K.types=X.types),T.T=K}},Ie.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Ie.use=function(M){return T.H.use(M)},Ie.useActionState=function(M,K,X){return T.H.useActionState(M,K,X)},Ie.useCallback=function(M,K){return T.H.useCallback(M,K)},Ie.useContext=function(M){return T.H.useContext(M)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(M,K){return T.H.useDeferredValue(M,K)},Ie.useEffect=function(M,K){return T.H.useEffect(M,K)},Ie.useEffectEvent=function(M){return T.H.useEffectEvent(M)},Ie.useId=function(){return T.H.useId()},Ie.useImperativeHandle=function(M,K,X){return T.H.useImperativeHandle(M,K,X)},Ie.useInsertionEffect=function(M,K){return T.H.useInsertionEffect(M,K)},Ie.useLayoutEffect=function(M,K){return T.H.useLayoutEffect(M,K)},Ie.useMemo=function(M,K){return T.H.useMemo(M,K)},Ie.useOptimistic=function(M,K){return T.H.useOptimistic(M,K)},Ie.useReducer=function(M,K,X){return T.H.useReducer(M,K,X)},Ie.useRef=function(M){return T.H.useRef(M)},Ie.useState=function(M){return T.H.useState(M)},Ie.useSyncExternalStore=function(M,K,X){return T.H.useSyncExternalStore(M,K,X)},Ie.useTransition=function(){return T.H.useTransition()},Ie.version="19.2.3",Ie}var up;function tf(){return up||(up=1,vh.exports=qv()),vh.exports}var w=tf();const As=ef(w);var wh={exports:{}},ql={},jh={exports:{}},Nh={};var dp;function Wv(){return dp||(dp=1,(function(a){function n(B,ie){var xe=B.length;B.push(ie);e:for(;0<xe;){var Ee=xe-1>>>1,Oe=B[Ee];if(0<u(Oe,ie))B[Ee]=ie,B[xe]=Oe,xe=Ee;else break e}}function i(B){return B.length===0?null:B[0]}function o(B){if(B.length===0)return null;var ie=B[0],xe=B.pop();if(xe!==ie){B[0]=xe;e:for(var Ee=0,Oe=B.length,M=Oe>>>1;Ee<M;){var K=2*(Ee+1)-1,X=B[K],re=K+1,Z=B[re];if(0>u(X,xe))re<Oe&&0>u(Z,X)?(B[Ee]=Z,B[re]=xe,Ee=re):(B[Ee]=X,B[K]=xe,Ee=K);else if(re<Oe&&0>u(Z,xe))B[Ee]=Z,B[re]=xe,Ee=re;else break e}}return ie}function u(B,ie){var xe=B.sortIndex-ie.sortIndex;return xe!==0?xe:B.id-ie.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;a.unstable_now=function(){return f.now()}}else{var m=Date,p=m.now();a.unstable_now=function(){return m.now()-p}}var x=[],b=[],_=1,j=null,S=3,U=!1,E=!1,k=!1,O=!1,V=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function te(B){for(var ie=i(b);ie!==null;){if(ie.callback===null)o(b);else if(ie.startTime<=B)o(b),ie.sortIndex=ie.expirationTime,n(x,ie);else break;ie=i(b)}}function ce(B){if(k=!1,te(B),!E)if(i(x)!==null)E=!0,se||(se=!0,H());else{var ie=i(b);ie!==null&&De(ce,ie.startTime-B)}}var se=!1,T=-1,C=5,D=-1;function A(){return O?!0:!(a.unstable_now()-D<C)}function L(){if(O=!1,se){var B=a.unstable_now();D=B;var ie=!0;try{e:{E=!1,k&&(k=!1,F(T),T=-1),U=!0;var xe=S;try{t:{for(te(B),j=i(x);j!==null&&!(j.expirationTime>B&&A());){var Ee=j.callback;if(typeof Ee=="function"){j.callback=null,S=j.priorityLevel;var Oe=Ee(j.expirationTime<=B);if(B=a.unstable_now(),typeof Oe=="function"){j.callback=Oe,te(B),ie=!0;break t}j===i(x)&&o(x),te(B)}else o(x);j=i(x)}if(j!==null)ie=!0;else{var M=i(b);M!==null&&De(ce,M.startTime-B),ie=!1}}break e}finally{j=null,S=xe,U=!1}ie=void 0}}finally{ie?H():se=!1}}}var H;if(typeof G=="function")H=function(){G(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Me=I.port2;I.port1.onmessage=L,H=function(){Me.postMessage(null)}}else H=function(){V(L,0)};function De(B,ie){T=V(function(){B(a.unstable_now())},ie)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(B){B.callback=null},a.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<B?Math.floor(1e3/B):5},a.unstable_getCurrentPriorityLevel=function(){return S},a.unstable_next=function(B){switch(S){case 1:case 2:case 3:var ie=3;break;default:ie=S}var xe=S;S=ie;try{return B()}finally{S=xe}},a.unstable_requestPaint=function(){O=!0},a.unstable_runWithPriority=function(B,ie){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var xe=S;S=B;try{return ie()}finally{S=xe}},a.unstable_scheduleCallback=function(B,ie,xe){var Ee=a.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?Ee+xe:Ee):xe=Ee,B){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=xe+Oe,B={id:_++,callback:ie,priorityLevel:B,startTime:xe,expirationTime:Oe,sortIndex:-1},xe>Ee?(B.sortIndex=xe,n(b,B),i(x)===null&&B===i(b)&&(k?(F(T),T=-1):k=!0,De(ce,xe-Ee))):(B.sortIndex=Oe,n(x,B),E||U||(E=!0,se||(se=!0,H()))),B},a.unstable_shouldYield=A,a.unstable_wrapCallback=function(B){var ie=S;return function(){var xe=S;S=ie;try{return B.apply(this,arguments)}finally{S=xe}}}})(Nh)),Nh}var hp;function Yv(){return hp||(hp=1,jh.exports=Wv()),jh.exports}var _h={exports:{}},sn={};var fp;function Kv(){if(fp)return sn;fp=1;var a=tf();function n(x){var b="https://react.dev/errors/"+x;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)b+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+x+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},u=Symbol.for("react.portal");function f(x,b,_){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:j==null?null:""+j,children:x,containerInfo:b,implementation:_}}var m=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(x,b){if(x==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,sn.createPortal=function(x,b){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(n(299));return f(x,b,null,_)},sn.flushSync=function(x){var b=m.T,_=o.p;try{if(m.T=null,o.p=2,x)return x()}finally{m.T=b,o.p=_,o.d.f()}},sn.preconnect=function(x,b){typeof x=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,o.d.C(x,b))},sn.prefetchDNS=function(x){typeof x=="string"&&o.d.D(x)},sn.preinit=function(x,b){if(typeof x=="string"&&b&&typeof b.as=="string"){var _=b.as,j=p(_,b.crossOrigin),S=typeof b.integrity=="string"?b.integrity:void 0,U=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;_==="style"?o.d.S(x,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:j,integrity:S,fetchPriority:U}):_==="script"&&o.d.X(x,{crossOrigin:j,integrity:S,fetchPriority:U,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},sn.preinitModule=function(x,b){if(typeof x=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var _=p(b.as,b.crossOrigin);o.d.M(x,{crossOrigin:_,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&o.d.M(x)},sn.preload=function(x,b){if(typeof x=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var _=b.as,j=p(_,b.crossOrigin);o.d.L(x,_,{crossOrigin:j,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},sn.preloadModule=function(x,b){if(typeof x=="string")if(b){var _=p(b.as,b.crossOrigin);o.d.m(x,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:_,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else o.d.m(x)},sn.requestFormReset=function(x){o.d.r(x)},sn.unstable_batchedUpdates=function(x,b){return x(b)},sn.useFormState=function(x,b,_){return m.H.useFormState(x,b,_)},sn.useFormStatus=function(){return m.H.useHostTransitionStatus()},sn.version="19.2.3",sn}var mp;function wx(){if(mp)return _h.exports;mp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),_h.exports=Kv(),_h.exports}var gp;function Xv(){if(gp)return ql;gp=1;var a=Yv(),n=tf(),i=wx();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x(e){if(f(e)!==e)throw Error(o(188))}function b(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(o(188));return t!==e?null:e}for(var r=e,l=t;;){var d=r.return;if(d===null)break;var h=d.alternate;if(h===null){if(l=d.return,l!==null){r=l;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===r)return x(d),e;if(h===l)return x(d),t;h=h.sibling}throw Error(o(188))}if(r.return!==l.return)r=d,l=h;else{for(var y=!1,N=d.child;N;){if(N===r){y=!0,r=d,l=h;break}if(N===l){y=!0,l=d,r=h;break}N=N.sibling}if(!y){for(N=h.child;N;){if(N===r){y=!0,r=h,l=d;break}if(N===l){y=!0,l=h,r=d;break}N=N.sibling}if(!y)throw Error(o(189))}}if(r.alternate!==l)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?e:t}function _(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=_(e),t!==null)return t;e=e.sibling}return null}var j=Object.assign,S=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),G=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),A=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function H(e){return e===null||typeof e!="object"?null:(e=L&&e[L]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function Me(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case k:return"Fragment";case V:return"Profiler";case O:return"StrictMode";case ce:return"Suspense";case se:return"SuspenseList";case D:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case G:return e.displayName||"Context";case F:return(e._context.displayName||"Context")+".Consumer";case te:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case T:return t=e.displayName||null,t!==null?t:Me(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return Me(e(t))}catch{}}return null}var De=Array.isArray,B=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},Ee=[],Oe=-1;function M(e){return{current:e}}function K(e){0>Oe||(e.current=Ee[Oe],Ee[Oe]=null,Oe--)}function X(e,t){Oe++,Ee[Oe]=e.current,e.current=t}var re=M(null),Z=M(null),pe=M(null),fe=M(null);function Se(e,t){switch(X(pe,t),X(Z,e),X(re,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ag(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ag(t),e=Rg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}K(re),X(re,e)}function ke(){K(re),K(Z),K(pe)}function Ve(e){e.memoizedState!==null&&X(fe,e);var t=re.current,r=Rg(t,e.type);t!==r&&(X(Z,e),X(re,r))}function Le(e){Z.current===e&&(K(re),K(Z)),fe.current===e&&(K(fe),Hl._currentValue=xe)}var We,yt;function ge(e){if(We===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);We=t&&t[1]||"",yt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+We+e+yt}var ye=!1;function Te(e,t){if(!e||ye)return"";ye=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ee){var J=ee}Reflect.construct(e,[],oe)}else{try{oe.call()}catch(ee){J=ee}e.call(oe.prototype)}}else{try{throw Error()}catch(ee){J=ee}(oe=e())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ee){if(ee&&J&&typeof ee.stack=="string")return[ee.stack,J.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),y=h[0],N=h[1];if(y&&N){var z=y.split(`
`),Y=N.split(`
`);for(d=l=0;l<z.length&&!z[l].includes("DetermineComponentFrameRoot");)l++;for(;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;if(l===z.length||d===Y.length)for(l=z.length-1,d=Y.length-1;1<=l&&0<=d&&z[l]!==Y[d];)d--;for(;1<=l&&0<=d;l--,d--)if(z[l]!==Y[d]){if(l!==1||d!==1)do if(l--,d--,0>d||z[l]!==Y[d]){var ne=`
`+z[l].replace(" at new "," at ");return e.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",e.displayName)),ne}while(1<=l&&0<=d);break}}}finally{ye=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?ge(r):""}function we(e,t){switch(e.tag){case 26:case 27:case 5:return ge(e.type);case 16:return ge("Lazy");case 13:return e.child!==t&&t!==null?ge("Suspense Fallback"):ge("Suspense");case 19:return ge("SuspenseList");case 0:case 15:return Te(e.type,!1);case 11:return Te(e.type.render,!1);case 1:return Te(e.type,!0);case 31:return ge("Activity");default:return""}}function Ne(e){try{var t="",r=null;do t+=we(e,r),r=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var je=Object.prototype.hasOwnProperty,ze=a.unstable_scheduleCallback,Vt=a.unstable_cancelCallback,de=a.unstable_shouldYield,ue=a.unstable_requestPaint,me=a.unstable_now,Ce=a.unstable_getCurrentPriorityLevel,le=a.unstable_ImmediatePriority,Ue=a.unstable_UserBlockingPriority,nt=a.unstable_NormalPriority,ls=a.unstable_LowPriority,qt=a.unstable_IdlePriority,en=a.log,rt=a.unstable_setDisableYieldValue,kt=null,Wt=null;function Tn(e){if(typeof en=="function"&&rt(e),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(kt,e)}catch{}}var Rt=Math.clz32?Math.clz32:vo,bo=Math.log,qi=Math.LN2;function vo(e){return e>>>=0,e===0?32:31-(bo(e)/qi|0)|0}var os=256,ia=262144,Mt=4194304;function cs(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function us(e,t,r){var l=e.pendingLanes;if(l===0)return 0;var d=0,h=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var N=l&134217727;return N!==0?(l=N&~h,l!==0?d=cs(l):(y&=N,y!==0?d=cs(y):r||(r=N&~e,r!==0&&(d=cs(r))))):(N=l&~h,N!==0?d=cs(N):y!==0?d=cs(y):r||(r=l&~e,r!==0&&(d=cs(r)))),d===0?0:t!==0&&t!==d&&(t&h)===0&&(h=d&-d,r=t&-t,h>=r||h===32&&(r&4194048)!==0)?t:d}function $n(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Nu(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wo(){var e=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),e}function ds(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function la(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _u(e,t,r,l,d,h){var y=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var N=e.entanglements,z=e.expirationTimes,Y=e.hiddenUpdates;for(r=y&~r;0<r;){var ne=31-Rt(r),oe=1<<ne;N[ne]=0,z[ne]=-1;var J=Y[ne];if(J!==null)for(Y[ne]=null,ne=0;ne<J.length;ne++){var ee=J[ne];ee!==null&&(ee.lane&=-536870913)}r&=~oe}l!==0&&Ya(e,l,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(y&~t))}function Ya(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Rt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|r&261930}function jo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var l=31-Rt(r),d=1<<l;d&t|e[l]&t&&(e[l]|=t),r&=~d}}function Wi(e,t){var r=t&-t;return r=(r&42)!==0?1:oa(r),(r&(e.suspendedLanes|t))!==0?0:r}function oa(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function zs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function No(){var e=ie.p;return e!==0?e:(e=window.event,e===void 0?32:ep(e.type))}function Fn(e,t){var r=ie.p;try{return ie.p=e,t()}finally{ie.p=r}}var qn=Math.random().toString(36).slice(2),Ot="__reactFiber$"+qn,Gt="__reactProps$"+qn,hs="__reactContainer$"+qn,Ka="__reactEvents$"+qn,Su="__reactListeners$"+qn,_o="__reactHandles$"+qn,So="__reactResources$"+qn,fs="__reactMarker$"+qn;function Xa(e){delete e[Ot],delete e[Gt],delete e[Ka],delete e[Su],delete e[_o]}function ms(e){var t=e[Ot];if(t)return t;for(var r=e.parentNode;r;){if(t=r[hs]||r[Ot]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=zg(e);e!==null;){if(r=e[Ot])return r;e=zg(e)}return t}e=r,r=e.parentNode}return null}function An(e){if(e=e[Ot]||e[hs]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function bn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function gs(e){var t=e[So];return t||(t=e[So]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Lt(e){e[fs]=!0}var Yi=new Set,Ki={};function ps(e,t){xs(e,t),xs(e+"Capture",t)}function xs(e,t){for(Ki[e]=t,e=0;e<t.length;e++)Yi.add(t[e])}var Xi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ji={},Qi={};function ko(e){return je.call(Qi,e)?!0:je.call(Ji,e)?!1:Xi.test(e)?Qi[e]=!0:(Ji[e]=!0,!1)}function Ja(e,t,r){if(ko(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function vn(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function Dt(e,t,r,l){if(l===null)e.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+l)}}function $t(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xr(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zi(e,t,r){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,h=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){r=""+y,h.call(this,y)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(y){r=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function at(e){if(!e._valueTracker){var t=xr(e)?"checked":"value";e._valueTracker=Zi(e,t,""+e[t])}}function ca(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),l="";return e&&(l=xr(e)?e.checked?"true":"false":e.value),e=l,e!==r?(t.setValue(e),!0):!1}function ys(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ua=/[\n"\\]/g;function un(e){return e.replace(ua,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Qa(e,t,r,l,d,h,y,N){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+$t(t)):e.value!==""+$t(t)&&(e.value=""+$t(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?el(e,y,$t(t)):r!=null?el(e,y,$t(r)):l!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.name=""+$t(N):e.removeAttribute("name")}function Co(e,t,r,l,d,h,y,N){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||r!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){at(e);return}r=r!=null?""+$t(r):"",t=t!=null?""+$t(t):r,N||t===e.value||(e.value=t),e.defaultValue=t}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=N?e.checked:!!l,e.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),at(e)}function el(e,t,r){t==="number"&&ys(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function yr(e,t,r,l){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&l&&(e[r].defaultSelected=!0)}else{for(r=""+$t(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Eo(e,t,r){if(t!=null&&(t=""+$t(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+$t(r):""}function br(e,t,r,l){if(t==null){if(l!=null){if(r!=null)throw Error(o(92));if(De(l)){if(1<l.length)throw Error(o(93));l=l[0]}r=l}r==null&&(r=""),t=r}r=$t(t),e.defaultValue=r,l=e.textContent,l===r&&l!==""&&l!==null&&(e.value=l),at(e)}function dn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var To=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tl(e,t,r){var l=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,r):typeof r!="number"||r===0||To.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function nl(e,t,r){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in t)l=t[d],t.hasOwnProperty(d)&&r[d]!==l&&tl(e,d,l)}else for(var h in t)t.hasOwnProperty(h)&&tl(e,h,t[h])}function Za(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ao=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ei(e){return vr.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Wn(){}var sl=null;function Rn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wr=null,bs=null;function da(e){var t=An(e);if(t&&(e=t.stateNode)){var r=e[Gt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Qa(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+un(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var l=r[t];if(l!==e&&l.form===e.form){var d=l[Gt]||null;if(!d)throw Error(o(90));Qa(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<r.length;t++)l=r[t],l.form===e.form&&ca(l)}break e;case"textarea":Eo(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&yr(e,!!r.multiple,t,!1)}}}var ti=!1;function jr(e,t,r){if(ti)return e(t,r);ti=!0;try{var l=e(t);return l}finally{if(ti=!1,(wr!==null||bs!==null)&&(Nc(),wr&&(t=wr,e=bs,bs=wr=null,da(t),e)))for(t=0;t<e.length;t++)da(e[t])}}function Yn(e,t){var r=e.stateNode;if(r===null)return null;var l=r[Gt]||null;if(l===null)return null;r=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(o(231,t,typeof r));return r}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha=!1;if(Mn)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){ha=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{ha=!1}var vs=null,rl=null,fa=null;function al(){if(fa)return fa;var e,t=rl,r=t.length,l,d="value"in vs?vs.value:vs.textContent,h=d.length;for(e=0;e<r&&t[e]===d[e];e++);var y=r-e;for(l=1;l<=y&&t[r-l]===d[h-l];l++);return fa=d.slice(e,1<l?1-l:void 0)}function ma(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bs(){return!0}function Kn(){return!1}function Yt(e){function t(r,l,d,h,y){this._reactName=r,this._targetInst=d,this.type=l,this.nativeEvent=h,this.target=y,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(r=e[N],this[N]=r?r(h):h[N]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Bs:Kn,this.isPropagationStopped=Kn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bs)},persist:function(){},isPersistent:Bs}),t}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ws=Yt(Ps),Nr=j({},Ps,{view:0,detail:0}),il=Yt(Nr),_r,ni,js,si=j({},Nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==js&&(js&&e.type==="mousemove"?(_r=e.screenX-js.screenX,ni=e.screenY-js.screenY):ni=_r=0,js=e),_r)},movementY:function(e){return"movementY"in e?e.movementY:ni}}),ll=Yt(si),ga=j({},si,{dataTransfer:0}),Ro=Yt(ga),Mo=j({},Nr,{relatedTarget:0}),pa=Yt(Mo),ol=j({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),Oo=Yt(ol),ri=j({},Ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lo=Yt(ri),Do=j({},Ps,{data:0}),Ns=Yt(Do),Io={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bo(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zo[e])?!!t[e]:!1}function tn(){return Bo}var Po=j({},Nr,{key:function(e){if(e.key){var t=Io[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ma(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Uo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tn,charCode:function(e){return e.type==="keypress"?ma(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ma(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ho=Yt(Po),Sr=j({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c=Yt(Sr),g=j({},Nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tn}),v=Yt(g),R=j({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),q=Yt(R),Q=j({},si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),he=Yt(Q),Be=j({},Ps,{newState:0,oldState:0}),Ct=Yt(Be),it=[9,13,27,32],vt=Mn&&"CompositionEvent"in window,nn=null;Mn&&"documentMode"in document&&(nn=document.documentMode);var Hs=Mn&&"TextEvent"in window&&!nn,Xn=Mn&&(!vt||nn&&8<nn&&11>=nn),Jn=" ",xa=!1;function ai(e,t){switch(e){case"keyup":return it.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ii=!1;function mb(e,t){switch(e){case"compositionend":return Pf(t);case"keypress":return t.which!==32?null:(xa=!0,Jn);case"textInput":return e=t.data,e===Jn&&xa?null:e;default:return null}}function gb(e,t){if(ii)return e==="compositionend"||!vt&&ai(e,t)?(e=al(),fa=rl=vs=null,ii=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xn&&t.locale!=="ko"?null:t.data;default:return null}}var pb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pb[e.type]:t==="textarea"}function Vf(e,t,r,l){wr?bs?bs.push(l):bs=[l]:wr=l,t=Ac(t,"onChange"),0<t.length&&(r=new ws("onChange","change",null,r,l),e.push({event:r,listeners:t}))}var cl=null,ul=null;function xb(e){_g(e,0)}function Vo(e){var t=bn(e);if(ca(t))return e}function Gf(e,t){if(e==="change")return t}var $f=!1;if(Mn){var ku;if(Mn){var Cu="oninput"in document;if(!Cu){var Ff=document.createElement("div");Ff.setAttribute("oninput","return;"),Cu=typeof Ff.oninput=="function"}ku=Cu}else ku=!1;$f=ku&&(!document.documentMode||9<document.documentMode)}function qf(){cl&&(cl.detachEvent("onpropertychange",Wf),ul=cl=null)}function Wf(e){if(e.propertyName==="value"&&Vo(ul)){var t=[];Vf(t,ul,e,Rn(e)),jr(xb,t)}}function yb(e,t,r){e==="focusin"?(qf(),cl=t,ul=r,cl.attachEvent("onpropertychange",Wf)):e==="focusout"&&qf()}function bb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vo(ul)}function vb(e,t){if(e==="click")return Vo(t)}function wb(e,t){if(e==="input"||e==="change")return Vo(t)}function jb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wn=typeof Object.is=="function"?Object.is:jb;function dl(e,t){if(wn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),l=Object.keys(t);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var d=r[l];if(!je.call(t,d)||!wn(e[d],t[d]))return!1}return!0}function Yf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kf(e,t){var r=Yf(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=t&&l>=t)return{node:r,offset:t-e};e=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yf(r)}}function Xf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Xf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ys(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ys(e.document)}return t}function Eu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Nb=Mn&&"documentMode"in document&&11>=document.documentMode,li=null,Tu=null,hl=null,Au=!1;function Qf(e,t,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Au||li==null||li!==ys(l)||(l=li,"selectionStart"in l&&Eu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),hl&&dl(hl,l)||(hl=l,l=Ac(Tu,"onSelect"),0<l.length&&(t=new ws("onSelect","select",null,t,r),e.push({event:t,listeners:l}),t.target=li)))}function ya(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var oi={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionrun:ya("Transition","TransitionRun"),transitionstart:ya("Transition","TransitionStart"),transitioncancel:ya("Transition","TransitionCancel"),transitionend:ya("Transition","TransitionEnd")},Ru={},Zf={};Mn&&(Zf=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function ba(e){if(Ru[e])return Ru[e];if(!oi[e])return e;var t=oi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Zf)return Ru[e]=t[r];return e}var e0=ba("animationend"),t0=ba("animationiteration"),n0=ba("animationstart"),_b=ba("transitionrun"),Sb=ba("transitionstart"),kb=ba("transitioncancel"),s0=ba("transitionend"),r0=new Map,Mu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mu.push("scrollEnd");function Qn(e,t){r0.set(e,t),ps(t,[e])}var Go=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},On=[],ci=0,Ou=0;function $o(){for(var e=ci,t=Ou=ci=0;t<e;){var r=On[t];On[t++]=null;var l=On[t];On[t++]=null;var d=On[t];On[t++]=null;var h=On[t];if(On[t++]=null,l!==null&&d!==null){var y=l.pending;y===null?d.next=d:(d.next=y.next,y.next=d),l.pending=d}h!==0&&a0(r,d,h)}}function Fo(e,t,r,l){On[ci++]=e,On[ci++]=t,On[ci++]=r,On[ci++]=l,Ou|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Lu(e,t,r,l){return Fo(e,t,r,l),qo(e)}function va(e,t){return Fo(e,null,null,t),qo(e)}function a0(e,t,r){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r);for(var d=!1,h=e.return;h!==null;)h.childLanes|=r,l=h.alternate,l!==null&&(l.childLanes|=r),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&t!==null&&(d=31-Rt(r),e=h.hiddenUpdates,l=e[d],l===null?e[d]=[t]:l.push(t),t.lane=r|536870912),h):null}function qo(e){if(50<Ll)throw Ll=0,Gd=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ui={};function Cb(e,t,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(e,t,r,l){return new Cb(e,t,r,l)}function Du(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vs(e,t){var r=e.alternate;return r===null?(r=jn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function i0(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wo(e,t,r,l,d,h){var y=0;if(l=e,typeof e=="function")Du(e)&&(y=1);else if(typeof e=="string")y=Mv(e,r,re.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case D:return e=jn(31,r,t,d),e.elementType=D,e.lanes=h,e;case k:return wa(r.children,d,h,t);case O:y=8,d|=24;break;case V:return e=jn(12,r,t,d|2),e.elementType=V,e.lanes=h,e;case ce:return e=jn(13,r,t,d),e.elementType=ce,e.lanes=h,e;case se:return e=jn(19,r,t,d),e.elementType=se,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case G:y=10;break e;case F:y=9;break e;case te:y=11;break e;case T:y=14;break e;case C:y=16,l=null;break e}y=29,r=Error(o(130,e===null?"null":typeof e,"")),l=null}return t=jn(y,r,t,d),t.elementType=e,t.type=l,t.lanes=h,t}function wa(e,t,r,l){return e=jn(7,e,l,t),e.lanes=r,e}function Iu(e,t,r){return e=jn(6,e,null,t),e.lanes=r,e}function l0(e){var t=jn(18,null,null,0);return t.stateNode=e,t}function Uu(e,t,r){return t=jn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var o0=new WeakMap;function Ln(e,t){if(typeof e=="object"&&e!==null){var r=o0.get(e);return r!==void 0?r:(t={value:e,source:t,stack:Ne(t)},o0.set(e,t),t)}return{value:e,source:t,stack:Ne(t)}}var di=[],hi=0,Yo=null,fl=0,Dn=[],In=0,kr=null,_s=1,Ss="";function Gs(e,t){di[hi++]=fl,di[hi++]=Yo,Yo=e,fl=t}function c0(e,t,r){Dn[In++]=_s,Dn[In++]=Ss,Dn[In++]=kr,kr=e;var l=_s;e=Ss;var d=32-Rt(l)-1;l&=~(1<<d),r+=1;var h=32-Rt(t)+d;if(30<h){var y=d-d%5;h=(l&(1<<y)-1).toString(32),l>>=y,d-=y,_s=1<<32-Rt(t)+d|r<<d|l,Ss=h+e}else _s=1<<h|r<<d|l,Ss=e}function zu(e){e.return!==null&&(Gs(e,1),c0(e,1,0))}function Bu(e){for(;e===Yo;)Yo=di[--hi],di[hi]=null,fl=di[--hi],di[hi]=null;for(;e===kr;)kr=Dn[--In],Dn[In]=null,Ss=Dn[--In],Dn[In]=null,_s=Dn[--In],Dn[In]=null}function u0(e,t){Dn[In++]=_s,Dn[In++]=Ss,Dn[In++]=kr,_s=t.id,Ss=t.overflow,kr=e}var Kt=null,gt=null,Ye=!1,Cr=null,Un=!1,Pu=Error(o(519));function Er(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ml(Ln(t,e)),Pu}function d0(e){var t=e.stateNode,r=e.type,l=e.memoizedProps;switch(t[Ot]=e,t[Gt]=l,r){case"dialog":$e("cancel",t),$e("close",t);break;case"iframe":case"object":case"embed":$e("load",t);break;case"video":case"audio":for(r=0;r<Il.length;r++)$e(Il[r],t);break;case"source":$e("error",t);break;case"img":case"image":case"link":$e("error",t),$e("load",t);break;case"details":$e("toggle",t);break;case"input":$e("invalid",t),Co(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":$e("invalid",t);break;case"textarea":$e("invalid",t),br(t,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||l.suppressHydrationWarning===!0||Eg(t.textContent,r)?(l.popover!=null&&($e("beforetoggle",t),$e("toggle",t)),l.onScroll!=null&&$e("scroll",t),l.onScrollEnd!=null&&$e("scrollend",t),l.onClick!=null&&(t.onclick=Wn),t=!0):t=!1,t||Er(e,!0)}function h0(e){for(Kt=e.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:Kt=Kt.return}}function fi(e){if(e!==Kt)return!1;if(!Ye)return h0(e),Ye=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||rh(e.type,e.memoizedProps)),r=!r),r&&gt&&Er(e),h0(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));gt=Ug(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));gt=Ug(e)}else t===27?(t=gt,Vr(e.type)?(e=ch,ch=null,gt=e):gt=t):gt=Kt?Bn(e.stateNode.nextSibling):null;return!0}function ja(){gt=Kt=null,Ye=!1}function Hu(){var e=Cr;return e!==null&&(gn===null?gn=e:gn.push.apply(gn,e),Cr=null),e}function ml(e){Cr===null?Cr=[e]:Cr.push(e)}var Vu=M(null),Na=null,$s=null;function Tr(e,t,r){X(Vu,t._currentValue),t._currentValue=r}function Fs(e){e._currentValue=Vu.current,K(Vu)}function Gu(e,t,r){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===r)break;e=e.return}}function $u(e,t,r,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var y=d.child;h=h.firstContext;e:for(;h!==null;){var N=h;h=d;for(var z=0;z<t.length;z++)if(N.context===t[z]){h.lanes|=r,N=h.alternate,N!==null&&(N.lanes|=r),Gu(h.return,r,e),l||(y=null);break e}h=N.next}}else if(d.tag===18){if(y=d.return,y===null)throw Error(o(341));y.lanes|=r,h=y.alternate,h!==null&&(h.lanes|=r),Gu(y,r,e),y=null}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===e){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}}function mi(e,t,r,l){e=null;for(var d=t,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var y=d.alternate;if(y===null)throw Error(o(387));if(y=y.memoizedProps,y!==null){var N=d.type;wn(d.pendingProps.value,y.value)||(e!==null?e.push(N):e=[N])}}else if(d===fe.current){if(y=d.alternate,y===null)throw Error(o(387));y.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Hl):e=[Hl])}d=d.return}e!==null&&$u(t,e,r,l),t.flags|=262144}function Ko(e){for(e=e.firstContext;e!==null;){if(!wn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _a(e){Na=e,$s=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Xt(e){return f0(Na,e)}function Xo(e,t){return Na===null&&_a(e),f0(e,t)}function f0(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},$s===null){if(e===null)throw Error(o(308));$s=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else $s=$s.next=t;return r}var Eb=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},Tb=a.unstable_scheduleCallback,Ab=a.unstable_NormalPriority,It={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fu(){return{controller:new Eb,data:new Map,refCount:0}}function gl(e){e.refCount--,e.refCount===0&&Tb(Ab,function(){e.controller.abort()})}var pl=null,qu=0,gi=0,pi=null;function Rb(e,t){if(pl===null){var r=pl=[];qu=0,gi=Kd(),pi={status:"pending",value:void 0,then:function(l){r.push(l)}}}return qu++,t.then(m0,m0),t}function m0(){if(--qu===0&&pl!==null){pi!==null&&(pi.status="fulfilled");var e=pl;pl=null,gi=0,pi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Mb(e,t){var r=[],l={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var d=0;d<r.length;d++)(0,r[d])(t)},function(d){for(l.status="rejected",l.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),l}var g0=B.S;B.S=function(e,t){Qm=me(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Rb(e,t),g0!==null&&g0(e,t)};var Sa=M(null);function Wu(){var e=Sa.current;return e!==null?e:ft.pooledCache}function Jo(e,t){t===null?X(Sa,Sa.current):X(Sa,t.pool)}function p0(){var e=Wu();return e===null?null:{parent:It._currentValue,pool:e}}var xi=Error(o(460)),Yu=Error(o(474)),Qo=Error(o(542)),Zo={then:function(){}};function x0(e){return e=e.status,e==="fulfilled"||e==="rejected"}function y0(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(Wn,Wn),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,v0(e),e;default:if(typeof t.status=="string")t.then(Wn,Wn);else{if(e=ft,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=l}},function(l){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,v0(e),e}throw Ca=t,xi}}function ka(e){try{var t=e._init;return t(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Ca=r,xi):r}}var Ca=null;function b0(){if(Ca===null)throw Error(o(459));var e=Ca;return Ca=null,e}function v0(e){if(e===xi||e===Qo)throw Error(o(483))}var yi=null,xl=0;function ec(e){var t=xl;return xl+=1,yi===null&&(yi=[]),y0(yi,e,t)}function yl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function tc(e,t){throw t.$$typeof===S?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function w0(e){function t($,P){if(e){var W=$.deletions;W===null?($.deletions=[P],$.flags|=16):W.push(P)}}function r($,P){if(!e)return null;for(;P!==null;)t($,P),P=P.sibling;return null}function l($){for(var P=new Map;$!==null;)$.key!==null?P.set($.key,$):P.set($.index,$),$=$.sibling;return P}function d($,P){return $=Vs($,P),$.index=0,$.sibling=null,$}function h($,P,W){return $.index=W,e?(W=$.alternate,W!==null?(W=W.index,W<P?($.flags|=67108866,P):W):($.flags|=67108866,P)):($.flags|=1048576,P)}function y($){return e&&$.alternate===null&&($.flags|=67108866),$}function N($,P,W,ae){return P===null||P.tag!==6?(P=Iu(W,$.mode,ae),P.return=$,P):(P=d(P,W),P.return=$,P)}function z($,P,W,ae){var _e=W.type;return _e===k?ne($,P,W.props.children,ae,W.key):P!==null&&(P.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===C&&ka(_e)===P.type)?(P=d(P,W.props),yl(P,W),P.return=$,P):(P=Wo(W.type,W.key,W.props,null,$.mode,ae),yl(P,W),P.return=$,P)}function Y($,P,W,ae){return P===null||P.tag!==4||P.stateNode.containerInfo!==W.containerInfo||P.stateNode.implementation!==W.implementation?(P=Uu(W,$.mode,ae),P.return=$,P):(P=d(P,W.children||[]),P.return=$,P)}function ne($,P,W,ae,_e){return P===null||P.tag!==7?(P=wa(W,$.mode,ae,_e),P.return=$,P):(P=d(P,W),P.return=$,P)}function oe($,P,W){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Iu(""+P,$.mode,W),P.return=$,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case U:return W=Wo(P.type,P.key,P.props,null,$.mode,W),yl(W,P),W.return=$,W;case E:return P=Uu(P,$.mode,W),P.return=$,P;case C:return P=ka(P),oe($,P,W)}if(De(P)||H(P))return P=wa(P,$.mode,W,null),P.return=$,P;if(typeof P.then=="function")return oe($,ec(P),W);if(P.$$typeof===G)return oe($,Xo($,P),W);tc($,P)}return null}function J($,P,W,ae){var _e=P!==null?P.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return _e!==null?null:N($,P,""+W,ae);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case U:return W.key===_e?z($,P,W,ae):null;case E:return W.key===_e?Y($,P,W,ae):null;case C:return W=ka(W),J($,P,W,ae)}if(De(W)||H(W))return _e!==null?null:ne($,P,W,ae,null);if(typeof W.then=="function")return J($,P,ec(W),ae);if(W.$$typeof===G)return J($,P,Xo($,W),ae);tc($,W)}return null}function ee($,P,W,ae,_e){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return $=$.get(W)||null,N(P,$,""+ae,_e);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case U:return $=$.get(ae.key===null?W:ae.key)||null,z(P,$,ae,_e);case E:return $=$.get(ae.key===null?W:ae.key)||null,Y(P,$,ae,_e);case C:return ae=ka(ae),ee($,P,W,ae,_e)}if(De(ae)||H(ae))return $=$.get(W)||null,ne(P,$,ae,_e,null);if(typeof ae.then=="function")return ee($,P,W,ec(ae),_e);if(ae.$$typeof===G)return ee($,P,W,Xo(P,ae),_e);tc(P,ae)}return null}function be($,P,W,ae){for(var _e=null,Ze=null,ve=P,He=P=0,qe=null;ve!==null&&He<W.length;He++){ve.index>He?(qe=ve,ve=null):qe=ve.sibling;var et=J($,ve,W[He],ae);if(et===null){ve===null&&(ve=qe);break}e&&ve&&et.alternate===null&&t($,ve),P=h(et,P,He),Ze===null?_e=et:Ze.sibling=et,Ze=et,ve=qe}if(He===W.length)return r($,ve),Ye&&Gs($,He),_e;if(ve===null){for(;He<W.length;He++)ve=oe($,W[He],ae),ve!==null&&(P=h(ve,P,He),Ze===null?_e=ve:Ze.sibling=ve,Ze=ve);return Ye&&Gs($,He),_e}for(ve=l(ve);He<W.length;He++)qe=ee(ve,$,He,W[He],ae),qe!==null&&(e&&qe.alternate!==null&&ve.delete(qe.key===null?He:qe.key),P=h(qe,P,He),Ze===null?_e=qe:Ze.sibling=qe,Ze=qe);return e&&ve.forEach(function(Wr){return t($,Wr)}),Ye&&Gs($,He),_e}function Ae($,P,W,ae){if(W==null)throw Error(o(151));for(var _e=null,Ze=null,ve=P,He=P=0,qe=null,et=W.next();ve!==null&&!et.done;He++,et=W.next()){ve.index>He?(qe=ve,ve=null):qe=ve.sibling;var Wr=J($,ve,et.value,ae);if(Wr===null){ve===null&&(ve=qe);break}e&&ve&&Wr.alternate===null&&t($,ve),P=h(Wr,P,He),Ze===null?_e=Wr:Ze.sibling=Wr,Ze=Wr,ve=qe}if(et.done)return r($,ve),Ye&&Gs($,He),_e;if(ve===null){for(;!et.done;He++,et=W.next())et=oe($,et.value,ae),et!==null&&(P=h(et,P,He),Ze===null?_e=et:Ze.sibling=et,Ze=et);return Ye&&Gs($,He),_e}for(ve=l(ve);!et.done;He++,et=W.next())et=ee(ve,$,He,et.value,ae),et!==null&&(e&&et.alternate!==null&&ve.delete(et.key===null?He:et.key),P=h(et,P,He),Ze===null?_e=et:Ze.sibling=et,Ze=et);return e&&ve.forEach(function(Gv){return t($,Gv)}),Ye&&Gs($,He),_e}function dt($,P,W,ae){if(typeof W=="object"&&W!==null&&W.type===k&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case U:e:{for(var _e=W.key;P!==null;){if(P.key===_e){if(_e=W.type,_e===k){if(P.tag===7){r($,P.sibling),ae=d(P,W.props.children),ae.return=$,$=ae;break e}}else if(P.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===C&&ka(_e)===P.type){r($,P.sibling),ae=d(P,W.props),yl(ae,W),ae.return=$,$=ae;break e}r($,P);break}else t($,P);P=P.sibling}W.type===k?(ae=wa(W.props.children,$.mode,ae,W.key),ae.return=$,$=ae):(ae=Wo(W.type,W.key,W.props,null,$.mode,ae),yl(ae,W),ae.return=$,$=ae)}return y($);case E:e:{for(_e=W.key;P!==null;){if(P.key===_e)if(P.tag===4&&P.stateNode.containerInfo===W.containerInfo&&P.stateNode.implementation===W.implementation){r($,P.sibling),ae=d(P,W.children||[]),ae.return=$,$=ae;break e}else{r($,P);break}else t($,P);P=P.sibling}ae=Uu(W,$.mode,ae),ae.return=$,$=ae}return y($);case C:return W=ka(W),dt($,P,W,ae)}if(De(W))return be($,P,W,ae);if(H(W)){if(_e=H(W),typeof _e!="function")throw Error(o(150));return W=_e.call(W),Ae($,P,W,ae)}if(typeof W.then=="function")return dt($,P,ec(W),ae);if(W.$$typeof===G)return dt($,P,Xo($,W),ae);tc($,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,P!==null&&P.tag===6?(r($,P.sibling),ae=d(P,W),ae.return=$,$=ae):(r($,P),ae=Iu(W,$.mode,ae),ae.return=$,$=ae),y($)):r($,P)}return function($,P,W,ae){try{xl=0;var _e=dt($,P,W,ae);return yi=null,_e}catch(ve){if(ve===xi||ve===Qo)throw ve;var Ze=jn(29,ve,null,$.mode);return Ze.lanes=ae,Ze.return=$,Ze}}}var Ea=w0(!0),j0=w0(!1),Ar=!1;function Ku(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Rr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Mr(e,t,r){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(tt&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,t=qo(e),a0(e,null,r),t}return Fo(e,l,t,r),qo(e)}function bl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,r|=l,t.lanes=r,jo(e,r)}}function Ju(e,t){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var d=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var y={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};h===null?d=h=y:h=h.next=y,r=r.next}while(r!==null);h===null?d=h=t:h=h.next=t}else d=h=t;r={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var Qu=!1;function vl(){if(Qu){var e=pi;if(e!==null)throw e}}function wl(e,t,r,l){Qu=!1;var d=e.updateQueue;Ar=!1;var h=d.firstBaseUpdate,y=d.lastBaseUpdate,N=d.shared.pending;if(N!==null){d.shared.pending=null;var z=N,Y=z.next;z.next=null,y===null?h=Y:y.next=Y,y=z;var ne=e.alternate;ne!==null&&(ne=ne.updateQueue,N=ne.lastBaseUpdate,N!==y&&(N===null?ne.firstBaseUpdate=Y:N.next=Y,ne.lastBaseUpdate=z))}if(h!==null){var oe=d.baseState;y=0,ne=Y=z=null,N=h;do{var J=N.lane&-536870913,ee=J!==N.lane;if(ee?(Fe&J)===J:(l&J)===J){J!==0&&J===gi&&(Qu=!0),ne!==null&&(ne=ne.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var be=e,Ae=N;J=t;var dt=r;switch(Ae.tag){case 1:if(be=Ae.payload,typeof be=="function"){oe=be.call(dt,oe,J);break e}oe=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ae.payload,J=typeof be=="function"?be.call(dt,oe,J):be,J==null)break e;oe=j({},oe,J);break e;case 2:Ar=!0}}J=N.callback,J!==null&&(e.flags|=64,ee&&(e.flags|=8192),ee=d.callbacks,ee===null?d.callbacks=[J]:ee.push(J))}else ee={lane:J,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ne===null?(Y=ne=ee,z=oe):ne=ne.next=ee,y|=J;if(N=N.next,N===null){if(N=d.shared.pending,N===null)break;ee=N,N=ee.next,ee.next=null,d.lastBaseUpdate=ee,d.shared.pending=null}}while(!0);ne===null&&(z=oe),d.baseState=z,d.firstBaseUpdate=Y,d.lastBaseUpdate=ne,h===null&&(d.shared.lanes=0),Ur|=y,e.lanes=y,e.memoizedState=oe}}function N0(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function _0(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)N0(r[e],t)}var bi=M(null),nc=M(0);function S0(e,t){e=er,X(nc,e),X(bi,t),er=e|t.baseLanes}function Zu(){X(nc,er),X(bi,bi.current)}function ed(){er=nc.current,K(bi),K(nc)}var Nn=M(null),zn=null;function Or(e){var t=e.alternate;X(Et,Et.current&1),X(Nn,e),zn===null&&(t===null||bi.current!==null||t.memoizedState!==null)&&(zn=e)}function td(e){X(Et,Et.current),X(Nn,e),zn===null&&(zn=e)}function k0(e){e.tag===22?(X(Et,Et.current),X(Nn,e),zn===null&&(zn=e)):Lr()}function Lr(){X(Et,Et.current),X(Nn,Nn.current)}function _n(e){K(Nn),zn===e&&(zn=null),K(Et)}var Et=M(0);function sc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||lh(r)||oh(r)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qs=0,Pe=null,ct=null,Ut=null,rc=!1,vi=!1,Ta=!1,ac=0,jl=0,wi=null,Ob=0;function wt(){throw Error(o(321))}function nd(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!wn(e[r],t[r]))return!1;return!0}function sd(e,t,r,l,d,h){return qs=h,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,B.H=e===null||e.memoizedState===null?cm:yd,Ta=!1,h=r(l,d),Ta=!1,vi&&(h=E0(t,r,l,d)),C0(e),h}function C0(e){B.H=Sl;var t=ct!==null&&ct.next!==null;if(qs=0,Ut=ct=Pe=null,rc=!1,jl=0,wi=null,t)throw Error(o(300));e===null||zt||(e=e.dependencies,e!==null&&Ko(e)&&(zt=!0))}function E0(e,t,r,l){Pe=e;var d=0;do{if(vi&&(wi=null),jl=0,vi=!1,25<=d)throw Error(o(301));if(d+=1,Ut=ct=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}B.H=um,h=t(r,l)}while(vi);return h}function Lb(){var e=B.H,t=e.useState()[0];return t=typeof t.then=="function"?Nl(t):t,e=e.useState()[0],(ct!==null?ct.memoizedState:null)!==e&&(Pe.flags|=1024),t}function rd(){var e=ac!==0;return ac=0,e}function ad(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function id(e){if(rc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}rc=!1}qs=0,Ut=ct=Pe=null,vi=!1,jl=ac=0,wi=null}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Pe.memoizedState=Ut=e:Ut=Ut.next=e,Ut}function Tt(){if(ct===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var t=Ut===null?Pe.memoizedState:Ut.next;if(t!==null)Ut=t,ct=e;else{if(e===null)throw Pe.alternate===null?Error(o(467)):Error(o(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Ut===null?Pe.memoizedState=Ut=e:Ut=Ut.next=e}return Ut}function ic(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nl(e){var t=jl;return jl+=1,wi===null&&(wi=[]),e=y0(wi,e,t),t=Pe,(Ut===null?t.memoizedState:Ut.next)===null&&(t=t.alternate,B.H=t===null||t.memoizedState===null?cm:yd),e}function lc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Nl(e);if(e.$$typeof===G)return Xt(e)}throw Error(o(438,String(e)))}function ld(e){var t=null,r=Pe.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var l=Pe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=ic(),Pe.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),l=0;l<e;l++)r[l]=A;return t.index++,r}function Ws(e,t){return typeof t=="function"?t(e):t}function oc(e){var t=Tt();return od(t,ct,e)}function od(e,t,r){var l=e.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=r;var d=e.baseQueue,h=l.pending;if(h!==null){if(d!==null){var y=d.next;d.next=h.next,h.next=y}t.baseQueue=d=h,l.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{t=d.next;var N=y=null,z=null,Y=t,ne=!1;do{var oe=Y.lane&-536870913;if(oe!==Y.lane?(Fe&oe)===oe:(qs&oe)===oe){var J=Y.revertLane;if(J===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),oe===gi&&(ne=!0);else if((qs&J)===J){Y=Y.next,J===gi&&(ne=!0);continue}else oe={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},z===null?(N=z=oe,y=h):z=z.next=oe,Pe.lanes|=J,Ur|=J;oe=Y.action,Ta&&r(h,oe),h=Y.hasEagerState?Y.eagerState:r(h,oe)}else J={lane:oe,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},z===null?(N=z=J,y=h):z=z.next=J,Pe.lanes|=oe,Ur|=oe;Y=Y.next}while(Y!==null&&Y!==t);if(z===null?y=h:z.next=N,!wn(h,e.memoizedState)&&(zt=!0,ne&&(r=pi,r!==null)))throw r;e.memoizedState=h,e.baseState=y,e.baseQueue=z,l.lastRenderedState=h}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function cd(e){var t=Tt(),r=t.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=e;var l=r.dispatch,d=r.pending,h=t.memoizedState;if(d!==null){r.pending=null;var y=d=d.next;do h=e(h,y.action),y=y.next;while(y!==d);wn(h,t.memoizedState)||(zt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,l]}function T0(e,t,r){var l=Pe,d=Tt(),h=Ye;if(h){if(r===void 0)throw Error(o(407));r=r()}else r=t();var y=!wn((ct||d).memoizedState,r);if(y&&(d.memoizedState=r,zt=!0),d=d.queue,hd(M0.bind(null,l,d,e),[e]),d.getSnapshot!==t||y||Ut!==null&&Ut.memoizedState.tag&1){if(l.flags|=2048,ji(9,{destroy:void 0},R0.bind(null,l,d,r,t),null),ft===null)throw Error(o(349));h||(qs&127)!==0||A0(l,t,r)}return r}function A0(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Pe.updateQueue,t===null?(t=ic(),Pe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function R0(e,t,r,l){t.value=r,t.getSnapshot=l,O0(t)&&L0(e)}function M0(e,t,r){return r(function(){O0(t)&&L0(e)})}function O0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!wn(e,r)}catch{return!0}}function L0(e){var t=va(e,2);t!==null&&pn(t,e,2)}function ud(e){var t=rn();if(typeof e=="function"){var r=e;if(e=r(),Ta){Tn(!0);try{r()}finally{Tn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:e},t}function D0(e,t,r,l){return e.baseState=r,od(e,ct,typeof l=="function"?l:Ws)}function Db(e,t,r,l,d){if(dc(e))throw Error(o(485));if(e=t.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){h.listeners.push(y)}};B.T!==null?r(!0):h.isTransition=!1,l(h),r=t.pending,r===null?(h.next=t.pending=h,I0(t,h)):(h.next=r.next,t.pending=r.next=h)}}function I0(e,t){var r=t.action,l=t.payload,d=e.state;if(t.isTransition){var h=B.T,y={};B.T=y;try{var N=r(d,l),z=B.S;z!==null&&z(y,N),U0(e,t,N)}catch(Y){dd(e,t,Y)}finally{h!==null&&y.types!==null&&(h.types=y.types),B.T=h}}else try{h=r(d,l),U0(e,t,h)}catch(Y){dd(e,t,Y)}}function U0(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){z0(e,t,l)},function(l){return dd(e,t,l)}):z0(e,t,r)}function z0(e,t,r){t.status="fulfilled",t.value=r,B0(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,I0(e,r)))}function dd(e,t,r){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=r,B0(t),t=t.next;while(t!==l)}e.action=null}function B0(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function P0(e,t){return t}function H0(e,t){if(Ye){var r=ft.formState;if(r!==null){e:{var l=Pe;if(Ye){if(gt){t:{for(var d=gt,h=Un;d.nodeType!==8;){if(!h){d=null;break t}if(d=Bn(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){gt=Bn(d.nextSibling),l=d.data==="F!";break e}}Er(l)}l=!1}l&&(t=r[0])}}return r=rn(),r.memoizedState=r.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:P0,lastRenderedState:t},r.queue=l,r=im.bind(null,Pe,l),l.dispatch=r,l=ud(!1),h=xd.bind(null,Pe,!1,l.queue),l=rn(),d={state:t,dispatch:null,action:e,pending:null},l.queue=d,r=Db.bind(null,Pe,d,h,r),d.dispatch=r,l.memoizedState=e,[t,r,!1]}function V0(e){var t=Tt();return G0(t,ct,e)}function G0(e,t,r){if(t=od(e,t,P0)[0],e=oc(Ws)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Nl(t)}catch(y){throw y===xi?Qo:y}else l=t;t=Tt();var d=t.queue,h=d.dispatch;return r!==t.memoizedState&&(Pe.flags|=2048,ji(9,{destroy:void 0},Ib.bind(null,d,r),null)),[l,h,e]}function Ib(e,t){e.action=t}function $0(e){var t=Tt(),r=ct;if(r!==null)return G0(t,r,e);Tt(),t=t.memoizedState,r=Tt();var l=r.queue.dispatch;return r.memoizedState=e,[t,l,!1]}function ji(e,t,r,l){return e={tag:e,create:r,deps:l,inst:t,next:null},t=Pe.updateQueue,t===null&&(t=ic(),Pe.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,t.lastEffect=e),e}function F0(){return Tt().memoizedState}function cc(e,t,r,l){var d=rn();Pe.flags|=e,d.memoizedState=ji(1|t,{destroy:void 0},r,l===void 0?null:l)}function uc(e,t,r,l){var d=Tt();l=l===void 0?null:l;var h=d.memoizedState.inst;ct!==null&&l!==null&&nd(l,ct.memoizedState.deps)?d.memoizedState=ji(t,h,r,l):(Pe.flags|=e,d.memoizedState=ji(1|t,h,r,l))}function q0(e,t){cc(8390656,8,e,t)}function hd(e,t){uc(2048,8,e,t)}function Ub(e){Pe.flags|=4;var t=Pe.updateQueue;if(t===null)t=ic(),Pe.updateQueue=t,t.events=[e];else{var r=t.events;r===null?t.events=[e]:r.push(e)}}function W0(e){var t=Tt().memoizedState;return Ub({ref:t,nextImpl:e}),function(){if((tt&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Y0(e,t){return uc(4,2,e,t)}function K0(e,t){return uc(4,4,e,t)}function X0(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function J0(e,t,r){r=r!=null?r.concat([e]):null,uc(4,4,X0.bind(null,t,e),r)}function fd(){}function Q0(e,t){var r=Tt();t=t===void 0?null:t;var l=r.memoizedState;return t!==null&&nd(t,l[1])?l[0]:(r.memoizedState=[e,t],e)}function Z0(e,t){var r=Tt();t=t===void 0?null:t;var l=r.memoizedState;if(t!==null&&nd(t,l[1]))return l[0];if(l=e(),Ta){Tn(!0);try{e()}finally{Tn(!1)}}return r.memoizedState=[l,t],l}function md(e,t,r){return r===void 0||(qs&1073741824)!==0&&(Fe&261930)===0?e.memoizedState=t:(e.memoizedState=r,e=eg(),Pe.lanes|=e,Ur|=e,r)}function em(e,t,r,l){return wn(r,t)?r:bi.current!==null?(e=md(e,r,l),wn(e,t)||(zt=!0),e):(qs&42)===0||(qs&1073741824)!==0&&(Fe&261930)===0?(zt=!0,e.memoizedState=r):(e=eg(),Pe.lanes|=e,Ur|=e,t)}function tm(e,t,r,l,d){var h=ie.p;ie.p=h!==0&&8>h?h:8;var y=B.T,N={};B.T=N,xd(e,!1,t,r);try{var z=d(),Y=B.S;if(Y!==null&&Y(N,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ne=Mb(z,l);_l(e,t,ne,Cn(e))}else _l(e,t,l,Cn(e))}catch(oe){_l(e,t,{then:function(){},status:"rejected",reason:oe},Cn())}finally{ie.p=h,y!==null&&N.types!==null&&(y.types=N.types),B.T=y}}function zb(){}function gd(e,t,r,l){if(e.tag!==5)throw Error(o(476));var d=nm(e).queue;tm(e,d,t,xe,r===null?zb:function(){return sm(e),r(l)})}function nm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:xe},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function sm(e){var t=nm(e);t.next===null&&(t=e.alternate.memoizedState),_l(e,t.next.queue,{},Cn())}function pd(){return Xt(Hl)}function rm(){return Tt().memoizedState}function am(){return Tt().memoizedState}function Bb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=Cn();e=Rr(r);var l=Mr(t,e,r);l!==null&&(pn(l,t,r),bl(l,t,r)),t={cache:Fu()},e.payload=t;return}t=t.return}}function Pb(e,t,r){var l=Cn();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},dc(e)?lm(t,r):(r=Lu(e,t,r,l),r!==null&&(pn(r,e,l),om(r,t,l)))}function im(e,t,r){var l=Cn();_l(e,t,r,l)}function _l(e,t,r,l){var d={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(dc(e))lm(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var y=t.lastRenderedState,N=h(y,r);if(d.hasEagerState=!0,d.eagerState=N,wn(N,y))return Fo(e,t,d,0),ft===null&&$o(),!1}catch{}if(r=Lu(e,t,d,l),r!==null)return pn(r,e,l),om(r,t,l),!0}return!1}function xd(e,t,r,l){if(l={lane:2,revertLane:Kd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},dc(e)){if(t)throw Error(o(479))}else t=Lu(e,r,l,2),t!==null&&pn(t,e,2)}function dc(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function lm(e,t){vi=rc=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function om(e,t,r){if((r&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,r|=l,t.lanes=r,jo(e,r)}}var Sl={readContext:Xt,use:lc,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};Sl.useEffectEvent=wt;var cm={readContext:Xt,use:lc,useCallback:function(e,t){return rn().memoizedState=[e,t===void 0?null:t],e},useContext:Xt,useEffect:q0,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,cc(4194308,4,X0.bind(null,t,e),r)},useLayoutEffect:function(e,t){return cc(4194308,4,e,t)},useInsertionEffect:function(e,t){cc(4,2,e,t)},useMemo:function(e,t){var r=rn();t=t===void 0?null:t;var l=e();if(Ta){Tn(!0);try{e()}finally{Tn(!1)}}return r.memoizedState=[l,t],l},useReducer:function(e,t,r){var l=rn();if(r!==void 0){var d=r(t);if(Ta){Tn(!0);try{r(t)}finally{Tn(!1)}}}else d=t;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=Pb.bind(null,Pe,e),[l.memoizedState,e]},useRef:function(e){var t=rn();return e={current:e},t.memoizedState=e},useState:function(e){e=ud(e);var t=e.queue,r=im.bind(null,Pe,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:fd,useDeferredValue:function(e,t){var r=rn();return md(r,e,t)},useTransition:function(){var e=ud(!1);return e=tm.bind(null,Pe,e.queue,!0,!1),rn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var l=Pe,d=rn();if(Ye){if(r===void 0)throw Error(o(407));r=r()}else{if(r=t(),ft===null)throw Error(o(349));(Fe&127)!==0||A0(l,t,r)}d.memoizedState=r;var h={value:r,getSnapshot:t};return d.queue=h,q0(M0.bind(null,l,h,e),[e]),l.flags|=2048,ji(9,{destroy:void 0},R0.bind(null,l,h,r,t),null),r},useId:function(){var e=rn(),t=ft.identifierPrefix;if(Ye){var r=Ss,l=_s;r=(l&~(1<<32-Rt(l)-1)).toString(32)+r,t="_"+t+"R_"+r,r=ac++,0<r&&(t+="H"+r.toString(32)),t+="_"}else r=Ob++,t="_"+t+"r_"+r.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:pd,useFormState:H0,useActionState:H0,useOptimistic:function(e){var t=rn();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=xd.bind(null,Pe,!0,r),r.dispatch=t,[e,t]},useMemoCache:ld,useCacheRefresh:function(){return rn().memoizedState=Bb.bind(null,Pe)},useEffectEvent:function(e){var t=rn(),r={impl:e};return t.memoizedState=r,function(){if((tt&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}},yd={readContext:Xt,use:lc,useCallback:Q0,useContext:Xt,useEffect:hd,useImperativeHandle:J0,useInsertionEffect:Y0,useLayoutEffect:K0,useMemo:Z0,useReducer:oc,useRef:F0,useState:function(){return oc(Ws)},useDebugValue:fd,useDeferredValue:function(e,t){var r=Tt();return em(r,ct.memoizedState,e,t)},useTransition:function(){var e=oc(Ws)[0],t=Tt().memoizedState;return[typeof e=="boolean"?e:Nl(e),t]},useSyncExternalStore:T0,useId:rm,useHostTransitionStatus:pd,useFormState:V0,useActionState:V0,useOptimistic:function(e,t){var r=Tt();return D0(r,ct,e,t)},useMemoCache:ld,useCacheRefresh:am};yd.useEffectEvent=W0;var um={readContext:Xt,use:lc,useCallback:Q0,useContext:Xt,useEffect:hd,useImperativeHandle:J0,useInsertionEffect:Y0,useLayoutEffect:K0,useMemo:Z0,useReducer:cd,useRef:F0,useState:function(){return cd(Ws)},useDebugValue:fd,useDeferredValue:function(e,t){var r=Tt();return ct===null?md(r,e,t):em(r,ct.memoizedState,e,t)},useTransition:function(){var e=cd(Ws)[0],t=Tt().memoizedState;return[typeof e=="boolean"?e:Nl(e),t]},useSyncExternalStore:T0,useId:rm,useHostTransitionStatus:pd,useFormState:$0,useActionState:$0,useOptimistic:function(e,t){var r=Tt();return ct!==null?D0(r,ct,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:ld,useCacheRefresh:am};um.useEffectEvent=W0;function bd(e,t,r,l){t=e.memoizedState,r=r(l,t),r=r==null?t:j({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var vd={enqueueSetState:function(e,t,r){e=e._reactInternals;var l=Cn(),d=Rr(l);d.payload=t,r!=null&&(d.callback=r),t=Mr(e,d,l),t!==null&&(pn(t,e,l),bl(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var l=Cn(),d=Rr(l);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=Mr(e,d,l),t!==null&&(pn(t,e,l),bl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Cn(),l=Rr(r);l.tag=2,t!=null&&(l.callback=t),t=Mr(e,l,r),t!==null&&(pn(t,e,r),bl(t,e,r))}};function dm(e,t,r,l,d,h,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,y):t.prototype&&t.prototype.isPureReactComponent?!dl(r,l)||!dl(d,h):!0}function hm(e,t,r,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,l),t.state!==e&&vd.enqueueReplaceState(t,t.state,null)}function Aa(e,t){var r=t;if("ref"in t){r={};for(var l in t)l!=="ref"&&(r[l]=t[l])}if(e=e.defaultProps){r===t&&(r=j({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}function fm(e){Go(e)}function mm(e){console.error(e)}function gm(e){Go(e)}function hc(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function pm(e,t,r){try{var l=e.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function wd(e,t,r){return r=Rr(r),r.tag=3,r.payload={element:null},r.callback=function(){hc(e,t)},r}function xm(e){return e=Rr(e),e.tag=3,e}function ym(e,t,r,l){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var h=l.value;e.payload=function(){return d(h)},e.callback=function(){pm(t,r,l)}}var y=r.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){pm(t,r,l),typeof d!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var N=l.stack;this.componentDidCatch(l.value,{componentStack:N!==null?N:""})})}function Hb(e,t,r,l,d){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=r.alternate,t!==null&&mi(t,r,d,!0),r=Nn.current,r!==null){switch(r.tag){case 31:case 13:return zn===null?_c():r.alternate===null&&jt===0&&(jt=3),r.flags&=-257,r.flags|=65536,r.lanes=d,l===Zo?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([l]):t.add(l),qd(e,l,d)),!1;case 22:return r.flags|=65536,l===Zo?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([l]):r.add(l)),qd(e,l,d)),!1}throw Error(o(435,r.tag))}return qd(e,l,d),_c(),!1}if(Ye)return t=Nn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,l!==Pu&&(e=Error(o(422),{cause:l}),ml(Ln(e,r)))):(l!==Pu&&(t=Error(o(423),{cause:l}),ml(Ln(t,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Ln(l,r),d=wd(e.stateNode,l,d),Ju(e,d),jt!==4&&(jt=2)),!1;var h=Error(o(520),{cause:l});if(h=Ln(h,r),Ol===null?Ol=[h]:Ol.push(h),jt!==4&&(jt=2),t===null)return!0;l=Ln(l,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=wd(r.stateNode,l,e),Ju(r,e),!1;case 1:if(t=r.type,h=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(zr===null||!zr.has(h))))return r.flags|=65536,d&=-d,r.lanes|=d,d=xm(d),ym(d,e,r,l),Ju(r,d),!1}r=r.return}while(r!==null);return!1}var jd=Error(o(461)),zt=!1;function Jt(e,t,r,l){t.child=e===null?j0(t,null,r,l):Ea(t,e.child,r,l)}function bm(e,t,r,l,d){r=r.render;var h=t.ref;if("ref"in l){var y={};for(var N in l)N!=="ref"&&(y[N]=l[N])}else y=l;return _a(t),l=sd(e,t,r,y,h,d),N=rd(),e!==null&&!zt?(ad(e,t,d),Ys(e,t,d)):(Ye&&N&&zu(t),t.flags|=1,Jt(e,t,l,d),t.child)}function vm(e,t,r,l,d){if(e===null){var h=r.type;return typeof h=="function"&&!Du(h)&&h.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=h,wm(e,t,h,l,d)):(e=Wo(r.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!Ad(e,d)){var y=h.memoizedProps;if(r=r.compare,r=r!==null?r:dl,r(y,l)&&e.ref===t.ref)return Ys(e,t,d)}return t.flags|=1,e=Vs(h,l),e.ref=t.ref,e.return=t,t.child=e}function wm(e,t,r,l,d){if(e!==null){var h=e.memoizedProps;if(dl(h,l)&&e.ref===t.ref)if(zt=!1,t.pendingProps=l=h,Ad(e,d))(e.flags&131072)!==0&&(zt=!0);else return t.lanes=e.lanes,Ys(e,t,d)}return Nd(e,t,r,l,d)}function jm(e,t,r,l){var d=l.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|r:r,e!==null){for(l=t.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~h}else l=0,t.child=null;return Nm(e,t,h,r,l)}if((r&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Jo(t,h!==null?h.cachePool:null),h!==null?S0(t,h):Zu(),k0(t);else return l=t.lanes=536870912,Nm(e,t,h!==null?h.baseLanes|r:r,r,l)}else h!==null?(Jo(t,h.cachePool),S0(t,h),Lr(),t.memoizedState=null):(e!==null&&Jo(t,null),Zu(),Lr());return Jt(e,t,d,r),t.child}function kl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Nm(e,t,r,l,d){var h=Wu();return h=h===null?null:{parent:It._currentValue,pool:h},t.memoizedState={baseLanes:r,cachePool:h},e!==null&&Jo(t,null),Zu(),k0(t),e!==null&&mi(e,t,l,!0),t.childLanes=d,null}function fc(e,t){return t=gc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function _m(e,t,r){return Ea(t,e.child,null,r),e=fc(t,t.pendingProps),e.flags|=2,_n(t),t.memoizedState=null,e}function Vb(e,t,r){var l=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ye){if(l.mode==="hidden")return e=fc(t,l),t.lanes=536870912,kl(null,e);if(td(t),(e=gt)?(e=Ig(e,Un),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:kr!==null?{id:_s,overflow:Ss}:null,retryLane:536870912,hydrationErrors:null},r=l0(e),r.return=t,t.child=r,Kt=t,gt=null)):e=null,e===null)throw Er(t);return t.lanes=536870912,null}return fc(t,l)}var h=e.memoizedState;if(h!==null){var y=h.dehydrated;if(td(t),d)if(t.flags&256)t.flags&=-257,t=_m(e,t,r);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(zt||mi(e,t,r,!1),d=(r&e.childLanes)!==0,zt||d){if(l=ft,l!==null&&(y=Wi(l,r),y!==0&&y!==h.retryLane))throw h.retryLane=y,va(e,y),pn(l,e,y),jd;_c(),t=_m(e,t,r)}else e=h.treeContext,gt=Bn(y.nextSibling),Kt=t,Ye=!0,Cr=null,Un=!1,e!==null&&u0(t,e),t=fc(t,l),t.flags|=4096;return t}return e=Vs(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function mc(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function Nd(e,t,r,l,d){return _a(t),r=sd(e,t,r,l,void 0,d),l=rd(),e!==null&&!zt?(ad(e,t,d),Ys(e,t,d)):(Ye&&l&&zu(t),t.flags|=1,Jt(e,t,r,d),t.child)}function Sm(e,t,r,l,d,h){return _a(t),t.updateQueue=null,r=E0(t,l,r,d),C0(e),l=rd(),e!==null&&!zt?(ad(e,t,h),Ys(e,t,h)):(Ye&&l&&zu(t),t.flags|=1,Jt(e,t,r,h),t.child)}function km(e,t,r,l,d){if(_a(t),t.stateNode===null){var h=ui,y=r.contextType;typeof y=="object"&&y!==null&&(h=Xt(y)),h=new r(l,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=vd,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=l,h.state=t.memoizedState,h.refs={},Ku(t),y=r.contextType,h.context=typeof y=="object"&&y!==null?Xt(y):ui,h.state=t.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(bd(t,r,y,l),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(y=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),y!==h.state&&vd.enqueueReplaceState(h,h.state,null),wl(t,l,h,d),vl(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){h=t.stateNode;var N=t.memoizedProps,z=Aa(r,N);h.props=z;var Y=h.context,ne=r.contextType;y=ui,typeof ne=="object"&&ne!==null&&(y=Xt(ne));var oe=r.getDerivedStateFromProps;ne=typeof oe=="function"||typeof h.getSnapshotBeforeUpdate=="function",N=t.pendingProps!==N,ne||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(N||Y!==y)&&hm(t,h,l,y),Ar=!1;var J=t.memoizedState;h.state=J,wl(t,l,h,d),vl(),Y=t.memoizedState,N||J!==Y||Ar?(typeof oe=="function"&&(bd(t,r,oe,l),Y=t.memoizedState),(z=Ar||dm(t,r,z,l,J,Y,y))?(ne||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=Y),h.props=l,h.state=Y,h.context=y,l=z):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{h=t.stateNode,Xu(e,t),y=t.memoizedProps,ne=Aa(r,y),h.props=ne,oe=t.pendingProps,J=h.context,Y=r.contextType,z=ui,typeof Y=="object"&&Y!==null&&(z=Xt(Y)),N=r.getDerivedStateFromProps,(Y=typeof N=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==oe||J!==z)&&hm(t,h,l,z),Ar=!1,J=t.memoizedState,h.state=J,wl(t,l,h,d),vl();var ee=t.memoizedState;y!==oe||J!==ee||Ar||e!==null&&e.dependencies!==null&&Ko(e.dependencies)?(typeof N=="function"&&(bd(t,r,N,l),ee=t.memoizedState),(ne=Ar||dm(t,r,ne,l,J,ee,z)||e!==null&&e.dependencies!==null&&Ko(e.dependencies))?(Y||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,ee,z),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,ee,z)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||y===e.memoizedProps&&J===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&J===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=ee),h.props=l,h.state=ee,h.context=z,l=ne):(typeof h.componentDidUpdate!="function"||y===e.memoizedProps&&J===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&J===e.memoizedState||(t.flags|=1024),l=!1)}return h=l,mc(e,t),l=(t.flags&128)!==0,h||l?(h=t.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&l?(t.child=Ea(t,e.child,null,d),t.child=Ea(t,null,r,d)):Jt(e,t,r,d),t.memoizedState=h.state,e=t.child):e=Ys(e,t,d),e}function Cm(e,t,r,l){return ja(),t.flags|=256,Jt(e,t,r,l),t.child}var _d={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sd(e){return{baseLanes:e,cachePool:p0()}}function kd(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=kn),e}function Em(e,t,r){var l=t.pendingProps,d=!1,h=(t.flags&128)!==0,y;if((y=h)||(y=e!==null&&e.memoizedState===null?!1:(Et.current&2)!==0),y&&(d=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ye){if(d?Or(t):Lr(),(e=gt)?(e=Ig(e,Un),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:kr!==null?{id:_s,overflow:Ss}:null,retryLane:536870912,hydrationErrors:null},r=l0(e),r.return=t,t.child=r,Kt=t,gt=null)):e=null,e===null)throw Er(t);return oh(e)?t.lanes=32:t.lanes=536870912,null}var N=l.children;return l=l.fallback,d?(Lr(),d=t.mode,N=gc({mode:"hidden",children:N},d),l=wa(l,d,r,null),N.return=t,l.return=t,N.sibling=l,t.child=N,l=t.child,l.memoizedState=Sd(r),l.childLanes=kd(e,y,r),t.memoizedState=_d,kl(null,l)):(Or(t),Cd(t,N))}var z=e.memoizedState;if(z!==null&&(N=z.dehydrated,N!==null)){if(h)t.flags&256?(Or(t),t.flags&=-257,t=Ed(e,t,r)):t.memoizedState!==null?(Lr(),t.child=e.child,t.flags|=128,t=null):(Lr(),N=l.fallback,d=t.mode,l=gc({mode:"visible",children:l.children},d),N=wa(N,d,r,null),N.flags|=2,l.return=t,N.return=t,l.sibling=N,t.child=l,Ea(t,e.child,null,r),l=t.child,l.memoizedState=Sd(r),l.childLanes=kd(e,y,r),t.memoizedState=_d,t=kl(null,l));else if(Or(t),oh(N)){if(y=N.nextSibling&&N.nextSibling.dataset,y)var Y=y.dgst;y=Y,l=Error(o(419)),l.stack="",l.digest=y,ml({value:l,source:null,stack:null}),t=Ed(e,t,r)}else if(zt||mi(e,t,r,!1),y=(r&e.childLanes)!==0,zt||y){if(y=ft,y!==null&&(l=Wi(y,r),l!==0&&l!==z.retryLane))throw z.retryLane=l,va(e,l),pn(y,e,l),jd;lh(N)||_c(),t=Ed(e,t,r)}else lh(N)?(t.flags|=192,t.child=e.child,t=null):(e=z.treeContext,gt=Bn(N.nextSibling),Kt=t,Ye=!0,Cr=null,Un=!1,e!==null&&u0(t,e),t=Cd(t,l.children),t.flags|=4096);return t}return d?(Lr(),N=l.fallback,d=t.mode,z=e.child,Y=z.sibling,l=Vs(z,{mode:"hidden",children:l.children}),l.subtreeFlags=z.subtreeFlags&65011712,Y!==null?N=Vs(Y,N):(N=wa(N,d,r,null),N.flags|=2),N.return=t,l.return=t,l.sibling=N,t.child=l,kl(null,l),l=t.child,N=e.child.memoizedState,N===null?N=Sd(r):(d=N.cachePool,d!==null?(z=It._currentValue,d=d.parent!==z?{parent:z,pool:z}:d):d=p0(),N={baseLanes:N.baseLanes|r,cachePool:d}),l.memoizedState=N,l.childLanes=kd(e,y,r),t.memoizedState=_d,kl(e.child,l)):(Or(t),r=e.child,e=r.sibling,r=Vs(r,{mode:"visible",children:l.children}),r.return=t,r.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=r,t.memoizedState=null,r)}function Cd(e,t){return t=gc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function gc(e,t){return e=jn(22,e,null,t),e.lanes=0,e}function Ed(e,t,r){return Ea(t,e.child,null,r),e=Cd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tm(e,t,r){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Gu(e.return,t,r)}function Td(e,t,r,l,d,h){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:d,treeForkCount:h}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=r,y.tailMode=d,y.treeForkCount=h)}function Am(e,t,r){var l=t.pendingProps,d=l.revealOrder,h=l.tail;l=l.children;var y=Et.current,N=(y&2)!==0;if(N?(y=y&1|2,t.flags|=128):y&=1,X(Et,y),Jt(e,t,l,r),l=Ye?fl:0,!N&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tm(e,r,t);else if(e.tag===19)Tm(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&sc(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Td(t,!1,d,r,h,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&sc(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Td(t,!0,r,null,h,l);break;case"together":Td(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Ys(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ur|=t.lanes,(r&t.childLanes)===0)if(e!==null){if(mi(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,r=Vs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Vs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Ad(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ko(e)))}function Gb(e,t,r){switch(t.tag){case 3:Se(t,t.stateNode.containerInfo),Tr(t,It,e.memoizedState.cache),ja();break;case 27:case 5:Ve(t);break;case 4:Se(t,t.stateNode.containerInfo);break;case 10:Tr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,td(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Or(t),t.flags|=128,null):(r&t.child.childLanes)!==0?Em(e,t,r):(Or(t),e=Ys(e,t,r),e!==null?e.sibling:null);Or(t);break;case 19:var d=(e.flags&128)!==0;if(l=(r&t.childLanes)!==0,l||(mi(e,t,r,!1),l=(r&t.childLanes)!==0),d){if(l)return Am(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),X(Et,Et.current),l)break;return null;case 22:return t.lanes=0,jm(e,t,r,t.pendingProps);case 24:Tr(t,It,e.memoizedState.cache)}return Ys(e,t,r)}function Rm(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)zt=!0;else{if(!Ad(e,r)&&(t.flags&128)===0)return zt=!1,Gb(e,t,r);zt=(e.flags&131072)!==0}else zt=!1,Ye&&(t.flags&1048576)!==0&&c0(t,fl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=ka(t.elementType),t.type=e,typeof e=="function")Du(e)?(l=Aa(e,l),t.tag=1,t=km(null,t,e,l,r)):(t.tag=0,t=Nd(null,t,e,l,r));else{if(e!=null){var d=e.$$typeof;if(d===te){t.tag=11,t=bm(null,t,e,l,r);break e}else if(d===T){t.tag=14,t=vm(null,t,e,l,r);break e}}throw t=Me(e)||e,Error(o(306,t,""))}}return t;case 0:return Nd(e,t,t.type,t.pendingProps,r);case 1:return l=t.type,d=Aa(l,t.pendingProps),km(e,t,l,d,r);case 3:e:{if(Se(t,t.stateNode.containerInfo),e===null)throw Error(o(387));l=t.pendingProps;var h=t.memoizedState;d=h.element,Xu(e,t),wl(t,l,null,r);var y=t.memoizedState;if(l=y.cache,Tr(t,It,l),l!==h.cache&&$u(t,[It],r,!0),vl(),l=y.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=Cm(e,t,l,r);break e}else if(l!==d){d=Ln(Error(o(424)),t),ml(d),t=Cm(e,t,l,r);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,gt=Bn(e.firstChild),Kt=t,Ye=!0,Cr=null,Un=!0,r=j0(t,null,l,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ja(),l===d){t=Ys(e,t,r);break e}Jt(e,t,l,r)}t=t.child}return t;case 26:return mc(e,t),e===null?(r=Vg(t.type,null,t.pendingProps,null))?t.memoizedState=r:Ye||(r=t.type,e=t.pendingProps,l=Rc(pe.current).createElement(r),l[Ot]=t,l[Gt]=e,Qt(l,r,e),Lt(l),t.stateNode=l):t.memoizedState=Vg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ve(t),e===null&&Ye&&(l=t.stateNode=Bg(t.type,t.pendingProps,pe.current),Kt=t,Un=!0,d=gt,Vr(t.type)?(ch=d,gt=Bn(l.firstChild)):gt=d),Jt(e,t,t.pendingProps.children,r),mc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ye&&((d=l=gt)&&(l=bv(l,t.type,t.pendingProps,Un),l!==null?(t.stateNode=l,Kt=t,gt=Bn(l.firstChild),Un=!1,d=!0):d=!1),d||Er(t)),Ve(t),d=t.type,h=t.pendingProps,y=e!==null?e.memoizedProps:null,l=h.children,rh(d,h)?l=null:y!==null&&rh(d,y)&&(t.flags|=32),t.memoizedState!==null&&(d=sd(e,t,Lb,null,null,r),Hl._currentValue=d),mc(e,t),Jt(e,t,l,r),t.child;case 6:return e===null&&Ye&&((e=r=gt)&&(r=vv(r,t.pendingProps,Un),r!==null?(t.stateNode=r,Kt=t,gt=null,e=!0):e=!1),e||Er(t)),null;case 13:return Em(e,t,r);case 4:return Se(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Ea(t,null,l,r):Jt(e,t,l,r),t.child;case 11:return bm(e,t,t.type,t.pendingProps,r);case 7:return Jt(e,t,t.pendingProps,r),t.child;case 8:return Jt(e,t,t.pendingProps.children,r),t.child;case 12:return Jt(e,t,t.pendingProps.children,r),t.child;case 10:return l=t.pendingProps,Tr(t,t.type,l.value),Jt(e,t,l.children,r),t.child;case 9:return d=t.type._context,l=t.pendingProps.children,_a(t),d=Xt(d),l=l(d),t.flags|=1,Jt(e,t,l,r),t.child;case 14:return vm(e,t,t.type,t.pendingProps,r);case 15:return wm(e,t,t.type,t.pendingProps,r);case 19:return Am(e,t,r);case 31:return Vb(e,t,r);case 22:return jm(e,t,r,t.pendingProps);case 24:return _a(t),l=Xt(It),e===null?(d=Wu(),d===null&&(d=ft,h=Fu(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=r),d=h),t.memoizedState={parent:l,cache:d},Ku(t),Tr(t,It,d)):((e.lanes&r)!==0&&(Xu(e,t),wl(t,null,null,r),vl()),d=e.memoizedState,h=t.memoizedState,d.parent!==l?(d={parent:l,cache:l},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Tr(t,It,l)):(l=h.cache,Tr(t,It,l),l!==d.cache&&$u(t,[It],r,!0))),Jt(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ks(e){e.flags|=4}function Rd(e,t,r,l,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(rg())e.flags|=8192;else throw Ca=Zo,Yu}else e.flags&=-16777217}function Mm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Wg(t))if(rg())e.flags|=8192;else throw Ca=Zo,Yu}function pc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?wo():536870912,e.lanes|=t,ki|=t)}function Cl(e,t){if(!Ye)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,l=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=r,t}function $b(e,t,r){var l=t.pendingProps;switch(Bu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return pt(t),null;case 3:return r=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Fs(It),ke(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(fi(t)?Ks(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Hu())),pt(t),null;case 26:var d=t.type,h=t.memoizedState;return e===null?(Ks(t),h!==null?(pt(t),Mm(t,h)):(pt(t),Rd(t,d,null,l,r))):h?h!==e.memoizedState?(Ks(t),pt(t),Mm(t,h)):(pt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&Ks(t),pt(t),Rd(t,d,e,l,r)),null;case 27:if(Le(t),r=pe.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Ks(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return pt(t),null}e=re.current,fi(t)?d0(t):(e=Bg(d,l,r),t.stateNode=e,Ks(t))}return pt(t),null;case 5:if(Le(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Ks(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return pt(t),null}if(h=re.current,fi(t))d0(t);else{var y=Rc(pe.current);switch(h){case 1:h=y.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=y.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=y.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?h.multiple=!0:l.size&&(h.size=l.size);break;default:h=typeof l.is=="string"?y.createElement(d,{is:l.is}):y.createElement(d)}}h[Ot]=t,h[Gt]=l;e:for(y=t.child;y!==null;){if(y.tag===5||y.tag===6)h.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}t.stateNode=h;e:switch(Qt(h,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ks(t)}}return pt(t),Rd(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,r),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Ks(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(o(166));if(e=pe.current,fi(t)){if(e=t.stateNode,r=t.memoizedProps,l=null,d=Kt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[Ot]=t,e=!!(e.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Eg(e.nodeValue,r)),e||Er(t,!0)}else e=Rc(e).createTextNode(l),e[Ot]=t,t.stateNode=e}return pt(t),null;case 31:if(r=t.memoizedState,e===null||e.memoizedState!==null){if(l=fi(t),r!==null){if(e===null){if(!l)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[Ot]=t}else ja(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pt(t),e=!1}else r=Hu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return t.flags&256?(_n(t),t):(_n(t),null);if((t.flags&128)!==0)throw Error(o(558))}return pt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=fi(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(o(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[Ot]=t}else ja(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pt(t),d=!1}else d=Hu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(_n(t),t):(_n(t),null)}return _n(t),(t.flags&128)!==0?(t.lanes=r,t):(r=l!==null,e=e!==null&&e.memoizedState!==null,r&&(l=t.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==d&&(l.flags|=2048)),r!==e&&r&&(t.child.flags|=8192),pc(t,t.updateQueue),pt(t),null);case 4:return ke(),e===null&&Zd(t.stateNode.containerInfo),pt(t),null;case 10:return Fs(t.type),pt(t),null;case 19:if(K(Et),l=t.memoizedState,l===null)return pt(t),null;if(d=(t.flags&128)!==0,h=l.rendering,h===null)if(d)Cl(l,!1);else{if(jt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=sc(e),h!==null){for(t.flags|=128,Cl(l,!1),e=h.updateQueue,t.updateQueue=e,pc(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)i0(r,e),r=r.sibling;return X(Et,Et.current&1|2),Ye&&Gs(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&me()>wc&&(t.flags|=128,d=!0,Cl(l,!1),t.lanes=4194304)}else{if(!d)if(e=sc(h),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,pc(t,e),Cl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!Ye)return pt(t),null}else 2*me()-l.renderingStartTime>wc&&r!==536870912&&(t.flags|=128,d=!0,Cl(l,!1),t.lanes=4194304);l.isBackwards?(h.sibling=t.child,t.child=h):(e=l.last,e!==null?e.sibling=h:t.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=me(),e.sibling=null,r=Et.current,X(Et,d?r&1|2:r&1),Ye&&Gs(t,l.treeForkCount),e):(pt(t),null);case 22:case 23:return _n(t),ed(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(r&536870912)!==0&&(t.flags&128)===0&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),r=t.updateQueue,r!==null&&pc(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==r&&(t.flags|=2048),e!==null&&K(Sa),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Fs(It),pt(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Fb(e,t){switch(Bu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fs(It),ke(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Le(t),null;case 31:if(t.memoizedState!==null){if(_n(t),t.alternate===null)throw Error(o(340));ja()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(_n(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ja()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return K(Et),null;case 4:return ke(),null;case 10:return Fs(t.type),null;case 22:case 23:return _n(t),ed(),e!==null&&K(Sa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Fs(It),null;case 25:return null;default:return null}}function Om(e,t){switch(Bu(t),t.tag){case 3:Fs(It),ke();break;case 26:case 27:case 5:Le(t);break;case 4:ke();break;case 31:t.memoizedState!==null&&_n(t);break;case 13:_n(t);break;case 19:K(Et);break;case 10:Fs(t.type);break;case 22:case 23:_n(t),ed(),e!==null&&K(Sa);break;case 24:Fs(It)}}function El(e,t){try{var r=t.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var d=l.next;r=d;do{if((r.tag&e)===e){l=void 0;var h=r.create,y=r.inst;l=h(),y.destroy=l}r=r.next}while(r!==d)}}catch(N){ot(t,t.return,N)}}function Dr(e,t,r){try{var l=t.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var h=d.next;l=h;do{if((l.tag&e)===e){var y=l.inst,N=y.destroy;if(N!==void 0){y.destroy=void 0,d=t;var z=r,Y=N;try{Y()}catch(ne){ot(d,z,ne)}}}l=l.next}while(l!==h)}}catch(ne){ot(t,t.return,ne)}}function Lm(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{_0(t,r)}catch(l){ot(e,e.return,l)}}}function Dm(e,t,r){r.props=Aa(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(l){ot(e,t,l)}}function Tl(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof r=="function"?e.refCleanup=r(l):r.current=l}}catch(d){ot(e,t,d)}}function ks(e,t){var r=e.ref,l=e.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(d){ot(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){ot(e,t,d)}else r.current=null}function Im(e){var t=e.type,r=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(d){ot(e,e.return,d)}}function Md(e,t,r){try{var l=e.stateNode;fv(l,e.type,r,t),l[Gt]=t}catch(d){ot(e,e.return,d)}}function Um(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Vr(e.type)||e.tag===4}function Od(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Um(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Vr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ld(e,t,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Wn));else if(l!==4&&(l===27&&Vr(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(Ld(e,t,r),e=e.sibling;e!==null;)Ld(e,t,r),e=e.sibling}function xc(e,t,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(l!==4&&(l===27&&Vr(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(xc(e,t,r),e=e.sibling;e!==null;)xc(e,t,r),e=e.sibling}function zm(e){var t=e.stateNode,r=e.memoizedProps;try{for(var l=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);Qt(t,l,r),t[Ot]=e,t[Gt]=r}catch(h){ot(e,e.return,h)}}var Xs=!1,Bt=!1,Dd=!1,Bm=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function qb(e,t){if(e=e.containerInfo,nh=zc,e=Jf(e),Eu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var d=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var y=0,N=-1,z=-1,Y=0,ne=0,oe=e,J=null;t:for(;;){for(var ee;oe!==r||d!==0&&oe.nodeType!==3||(N=y+d),oe!==h||l!==0&&oe.nodeType!==3||(z=y+l),oe.nodeType===3&&(y+=oe.nodeValue.length),(ee=oe.firstChild)!==null;)J=oe,oe=ee;for(;;){if(oe===e)break t;if(J===r&&++Y===d&&(N=y),J===h&&++ne===l&&(z=y),(ee=oe.nextSibling)!==null)break;oe=J,J=oe.parentNode}oe=ee}r=N===-1||z===-1?null:{start:N,end:z}}else r=null}r=r||{start:0,end:0}}else r=null;for(sh={focusedElem:e,selectionRange:r},zc=!1,Ft=t;Ft!==null;)if(t=Ft,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ft=e;else for(;Ft!==null;){switch(t=Ft,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)d=e[r],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,r=t,d=h.memoizedProps,h=h.memoizedState,l=r.stateNode;try{var be=Aa(r.type,d);e=l.getSnapshotBeforeUpdate(be,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ae){ot(r,r.return,Ae)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)ih(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ih(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,Ft=e;break}Ft=t.return}}function Pm(e,t,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:Qs(e,r),l&4&&El(5,r);break;case 1:if(Qs(e,r),l&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(y){ot(r,r.return,y)}else{var d=Aa(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){ot(r,r.return,y)}}l&64&&Lm(r),l&512&&Tl(r,r.return);break;case 3:if(Qs(e,r),l&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{_0(e,t)}catch(y){ot(r,r.return,y)}}break;case 27:t===null&&l&4&&zm(r);case 26:case 5:Qs(e,r),t===null&&l&4&&Im(r),l&512&&Tl(r,r.return);break;case 12:Qs(e,r);break;case 31:Qs(e,r),l&4&&Gm(e,r);break;case 13:Qs(e,r),l&4&&$m(e,r),l&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=tv.bind(null,r),wv(e,r))));break;case 22:if(l=r.memoizedState!==null||Xs,!l){t=t!==null&&t.memoizedState!==null||Bt,d=Xs;var h=Bt;Xs=l,(Bt=t)&&!h?Zs(e,r,(r.subtreeFlags&8772)!==0):Qs(e,r),Xs=d,Bt=h}break;case 30:break;default:Qs(e,r)}}function Hm(e){var t=e.alternate;t!==null&&(e.alternate=null,Hm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Xa(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var xt=null,hn=!1;function Js(e,t,r){for(r=r.child;r!==null;)Vm(e,t,r),r=r.sibling}function Vm(e,t,r){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(kt,r)}catch{}switch(r.tag){case 26:Bt||ks(r,t),Js(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Bt||ks(r,t);var l=xt,d=hn;Vr(r.type)&&(xt=r.stateNode,hn=!1),Js(e,t,r),zl(r.stateNode),xt=l,hn=d;break;case 5:Bt||ks(r,t);case 6:if(l=xt,d=hn,xt=null,Js(e,t,r),xt=l,hn=d,xt!==null)if(hn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(r.stateNode)}catch(h){ot(r,t,h)}else try{xt.removeChild(r.stateNode)}catch(h){ot(r,t,h)}break;case 18:xt!==null&&(hn?(e=xt,Lg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),Li(e)):Lg(xt,r.stateNode));break;case 4:l=xt,d=hn,xt=r.stateNode.containerInfo,hn=!0,Js(e,t,r),xt=l,hn=d;break;case 0:case 11:case 14:case 15:Dr(2,r,t),Bt||Dr(4,r,t),Js(e,t,r);break;case 1:Bt||(ks(r,t),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Dm(r,t,l)),Js(e,t,r);break;case 21:Js(e,t,r);break;case 22:Bt=(l=Bt)||r.memoizedState!==null,Js(e,t,r),Bt=l;break;default:Js(e,t,r)}}function Gm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Li(e)}catch(r){ot(t,t.return,r)}}}function $m(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Li(e)}catch(r){ot(t,t.return,r)}}function Wb(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Bm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Bm),t;default:throw Error(o(435,e.tag))}}function yc(e,t){var r=Wb(e);t.forEach(function(l){if(!r.has(l)){r.add(l);var d=nv.bind(null,e,l);l.then(d,d)}})}function fn(e,t){var r=t.deletions;if(r!==null)for(var l=0;l<r.length;l++){var d=r[l],h=e,y=t,N=y;e:for(;N!==null;){switch(N.tag){case 27:if(Vr(N.type)){xt=N.stateNode,hn=!1;break e}break;case 5:xt=N.stateNode,hn=!1;break e;case 3:case 4:xt=N.stateNode.containerInfo,hn=!0;break e}N=N.return}if(xt===null)throw Error(o(160));Vm(h,y,d),xt=null,hn=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Fm(t,e),t=t.sibling}var Zn=null;function Fm(e,t){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:fn(t,e),mn(e),l&4&&(Dr(3,e,e.return),El(3,e),Dr(5,e,e.return));break;case 1:fn(t,e),mn(e),l&512&&(Bt||r===null||ks(r,r.return)),l&64&&Xs&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var d=Zn;if(fn(t,e),mn(e),l&512&&(Bt||r===null||ks(r,r.return)),l&4){var h=r!==null?r.memoizedState:null;if(l=e.memoizedState,r===null)if(l===null)if(e.stateNode===null){e:{l=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":h=d.getElementsByTagName("title")[0],(!h||h[fs]||h[Ot]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(l),d.head.insertBefore(h,d.querySelector("head > title"))),Qt(h,l,r),h[Ot]=e,Lt(h),l=h;break e;case"link":var y=Fg("link","href",d).get(l+(r.href||""));if(y){for(var N=0;N<y.length;N++)if(h=y[N],h.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&h.getAttribute("rel")===(r.rel==null?null:r.rel)&&h.getAttribute("title")===(r.title==null?null:r.title)&&h.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){y.splice(N,1);break t}}h=d.createElement(l),Qt(h,l,r),d.head.appendChild(h);break;case"meta":if(y=Fg("meta","content",d).get(l+(r.content||""))){for(N=0;N<y.length;N++)if(h=y[N],h.getAttribute("content")===(r.content==null?null:""+r.content)&&h.getAttribute("name")===(r.name==null?null:r.name)&&h.getAttribute("property")===(r.property==null?null:r.property)&&h.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&h.getAttribute("charset")===(r.charSet==null?null:r.charSet)){y.splice(N,1);break t}}h=d.createElement(l),Qt(h,l,r),d.head.appendChild(h);break;default:throw Error(o(468,l))}h[Ot]=e,Lt(h),l=h}e.stateNode=l}else qg(d,e.type,e.stateNode);else e.stateNode=$g(d,l,e.memoizedProps);else h!==l?(h===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):h.count--,l===null?qg(d,e.type,e.stateNode):$g(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Md(e,e.memoizedProps,r.memoizedProps)}break;case 27:fn(t,e),mn(e),l&512&&(Bt||r===null||ks(r,r.return)),r!==null&&l&4&&Md(e,e.memoizedProps,r.memoizedProps);break;case 5:if(fn(t,e),mn(e),l&512&&(Bt||r===null||ks(r,r.return)),e.flags&32){d=e.stateNode;try{dn(d,"")}catch(be){ot(e,e.return,be)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,Md(e,d,r!==null?r.memoizedProps:d)),l&1024&&(Dd=!0);break;case 6:if(fn(t,e),mn(e),l&4){if(e.stateNode===null)throw Error(o(162));l=e.memoizedProps,r=e.stateNode;try{r.nodeValue=l}catch(be){ot(e,e.return,be)}}break;case 3:if(Lc=null,d=Zn,Zn=Mc(t.containerInfo),fn(t,e),Zn=d,mn(e),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Li(t.containerInfo)}catch(be){ot(e,e.return,be)}Dd&&(Dd=!1,qm(e));break;case 4:l=Zn,Zn=Mc(e.stateNode.containerInfo),fn(t,e),mn(e),Zn=l;break;case 12:fn(t,e),mn(e);break;case 31:fn(t,e),mn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,yc(e,l)));break;case 13:fn(t,e),mn(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(vc=me()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,yc(e,l)));break;case 22:d=e.memoizedState!==null;var z=r!==null&&r.memoizedState!==null,Y=Xs,ne=Bt;if(Xs=Y||d,Bt=ne||z,fn(t,e),Bt=ne,Xs=Y,mn(e),l&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(r===null||z||Xs||Bt||Ra(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){z=r=t;try{if(h=z.stateNode,d)y=h.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{N=z.stateNode;var oe=z.memoizedProps.style,J=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;N.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(be){ot(z,z.return,be)}}}else if(t.tag===6){if(r===null){z=t;try{z.stateNode.nodeValue=d?"":z.memoizedProps}catch(be){ot(z,z.return,be)}}}else if(t.tag===18){if(r===null){z=t;try{var ee=z.stateNode;d?Dg(ee,!0):Dg(z.stateNode,!1)}catch(be){ot(z,z.return,be)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,yc(e,r))));break;case 19:fn(t,e),mn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,yc(e,l)));break;case 30:break;case 21:break;default:fn(t,e),mn(e)}}function mn(e){var t=e.flags;if(t&2){try{for(var r,l=e.return;l!==null;){if(Um(l)){r=l;break}l=l.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var d=r.stateNode,h=Od(e);xc(e,h,d);break;case 5:var y=r.stateNode;r.flags&32&&(dn(y,""),r.flags&=-33);var N=Od(e);xc(e,N,y);break;case 3:case 4:var z=r.stateNode.containerInfo,Y=Od(e);Ld(e,Y,z);break;default:throw Error(o(161))}}catch(ne){ot(e,e.return,ne)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;qm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Qs(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Pm(e,t.alternate,t),t=t.sibling}function Ra(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Dr(4,t,t.return),Ra(t);break;case 1:ks(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&Dm(t,t.return,r),Ra(t);break;case 27:zl(t.stateNode);case 26:case 5:ks(t,t.return),Ra(t);break;case 22:t.memoizedState===null&&Ra(t);break;case 30:Ra(t);break;default:Ra(t)}e=e.sibling}}function Zs(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,d=e,h=t,y=h.flags;switch(h.tag){case 0:case 11:case 15:Zs(d,h,r),El(4,h);break;case 1:if(Zs(d,h,r),l=h,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Y){ot(l,l.return,Y)}if(l=h,d=l.updateQueue,d!==null){var N=l.stateNode;try{var z=d.shared.hiddenCallbacks;if(z!==null)for(d.shared.hiddenCallbacks=null,d=0;d<z.length;d++)N0(z[d],N)}catch(Y){ot(l,l.return,Y)}}r&&y&64&&Lm(h),Tl(h,h.return);break;case 27:zm(h);case 26:case 5:Zs(d,h,r),r&&l===null&&y&4&&Im(h),Tl(h,h.return);break;case 12:Zs(d,h,r);break;case 31:Zs(d,h,r),r&&y&4&&Gm(d,h);break;case 13:Zs(d,h,r),r&&y&4&&$m(d,h);break;case 22:h.memoizedState===null&&Zs(d,h,r),Tl(h,h.return);break;case 30:break;default:Zs(d,h,r)}t=t.sibling}}function Id(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&gl(r))}function Ud(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gl(e))}function es(e,t,r,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Wm(e,t,r,l),t=t.sibling}function Wm(e,t,r,l){var d=t.flags;switch(t.tag){case 0:case 11:case 15:es(e,t,r,l),d&2048&&El(9,t);break;case 1:es(e,t,r,l);break;case 3:es(e,t,r,l),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gl(e)));break;case 12:if(d&2048){es(e,t,r,l),e=t.stateNode;try{var h=t.memoizedProps,y=h.id,N=h.onPostCommit;typeof N=="function"&&N(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){ot(t,t.return,z)}}else es(e,t,r,l);break;case 31:es(e,t,r,l);break;case 13:es(e,t,r,l);break;case 23:break;case 22:h=t.stateNode,y=t.alternate,t.memoizedState!==null?h._visibility&2?es(e,t,r,l):Al(e,t):h._visibility&2?es(e,t,r,l):(h._visibility|=2,Ni(e,t,r,l,(t.subtreeFlags&10256)!==0||!1)),d&2048&&Id(y,t);break;case 24:es(e,t,r,l),d&2048&&Ud(t.alternate,t);break;default:es(e,t,r,l)}}function Ni(e,t,r,l,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,y=t,N=r,z=l,Y=y.flags;switch(y.tag){case 0:case 11:case 15:Ni(h,y,N,z,d),El(8,y);break;case 23:break;case 22:var ne=y.stateNode;y.memoizedState!==null?ne._visibility&2?Ni(h,y,N,z,d):Al(h,y):(ne._visibility|=2,Ni(h,y,N,z,d)),d&&Y&2048&&Id(y.alternate,y);break;case 24:Ni(h,y,N,z,d),d&&Y&2048&&Ud(y.alternate,y);break;default:Ni(h,y,N,z,d)}t=t.sibling}}function Al(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,l=t,d=l.flags;switch(l.tag){case 22:Al(r,l),d&2048&&Id(l.alternate,l);break;case 24:Al(r,l),d&2048&&Ud(l.alternate,l);break;default:Al(r,l)}t=t.sibling}}var Rl=8192;function _i(e,t,r){if(e.subtreeFlags&Rl)for(e=e.child;e!==null;)Ym(e,t,r),e=e.sibling}function Ym(e,t,r){switch(e.tag){case 26:_i(e,t,r),e.flags&Rl&&e.memoizedState!==null&&Ov(r,Zn,e.memoizedState,e.memoizedProps);break;case 5:_i(e,t,r);break;case 3:case 4:var l=Zn;Zn=Mc(e.stateNode.containerInfo),_i(e,t,r),Zn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Rl,Rl=16777216,_i(e,t,r),Rl=l):_i(e,t,r));break;default:_i(e,t,r)}}function Km(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ml(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var l=t[r];Ft=l,Jm(l,e)}Km(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xm(e),e=e.sibling}function Xm(e){switch(e.tag){case 0:case 11:case 15:Ml(e),e.flags&2048&&Dr(9,e,e.return);break;case 3:Ml(e);break;case 12:Ml(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,bc(e)):Ml(e);break;default:Ml(e)}}function bc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var l=t[r];Ft=l,Jm(l,e)}Km(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Dr(8,t,t.return),bc(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,bc(t));break;default:bc(t)}e=e.sibling}}function Jm(e,t){for(;Ft!==null;){var r=Ft;switch(r.tag){case 0:case 11:case 15:Dr(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:gl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,Ft=l;else e:for(r=e;Ft!==null;){l=Ft;var d=l.sibling,h=l.return;if(Hm(l),l===r){Ft=null;break e}if(d!==null){d.return=h,Ft=d;break e}Ft=h}}}var Yb={getCacheForType:function(e){var t=Xt(It),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r},cacheSignal:function(){return Xt(It).controller.signal}},Kb=typeof WeakMap=="function"?WeakMap:Map,tt=0,ft=null,Ge=null,Fe=0,lt=0,Sn=null,Ir=!1,Si=!1,zd=!1,er=0,jt=0,Ur=0,Ma=0,Bd=0,kn=0,ki=0,Ol=null,gn=null,Pd=!1,vc=0,Qm=0,wc=1/0,jc=null,zr=null,Ht=0,Br=null,Ci=null,tr=0,Hd=0,Vd=null,Zm=null,Ll=0,Gd=null;function Cn(){return(tt&2)!==0&&Fe!==0?Fe&-Fe:B.T!==null?Kd():No()}function eg(){if(kn===0)if((Fe&536870912)===0||Ye){var e=ia;ia<<=1,(ia&3932160)===0&&(ia=262144),kn=e}else kn=536870912;return e=Nn.current,e!==null&&(e.flags|=32),kn}function pn(e,t,r){(e===ft&&(lt===2||lt===9)||e.cancelPendingCommit!==null)&&(Ei(e,0),Pr(e,Fe,kn,!1)),la(e,r),((tt&2)===0||e!==ft)&&(e===ft&&((tt&2)===0&&(Ma|=r),jt===4&&Pr(e,Fe,kn,!1)),Cs(e))}function tg(e,t,r){if((tt&6)!==0)throw Error(o(327));var l=!r&&(t&127)===0&&(t&e.expiredLanes)===0||$n(e,t),d=l?Qb(e,t):Fd(e,t,!0),h=l;do{if(d===0){Si&&!l&&Pr(e,t,0,!1);break}else{if(r=e.current.alternate,h&&!Xb(r)){d=Fd(e,t,!1),h=!1;continue}if(d===2){if(h=t,e.errorRecoveryDisabledLanes&h)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var N=e;d=Ol;var z=N.current.memoizedState.isDehydrated;if(z&&(Ei(N,y).flags|=256),y=Fd(N,y,!1),y!==2){if(zd&&!z){N.errorRecoveryDisabledLanes|=h,Ma|=h,d=4;break e}h=gn,gn=d,h!==null&&(gn===null?gn=h:gn.push.apply(gn,h))}d=y}if(h=!1,d!==2)continue}}if(d===1){Ei(e,0),Pr(e,t,0,!0);break}e:{switch(l=e,h=d,h){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Pr(l,t,kn,!Ir);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(d=vc+300-me(),10<d)){if(Pr(l,t,kn,!Ir),us(l,0,!0)!==0)break e;tr=t,l.timeoutHandle=Mg(ng.bind(null,l,r,gn,jc,Pd,t,kn,Ma,ki,Ir,h,"Throttled",-0,0),d);break e}ng(l,r,gn,jc,Pd,t,kn,Ma,ki,Ir,h,null,-0,0)}}break}while(!0);Cs(e)}function ng(e,t,r,l,d,h,y,N,z,Y,ne,oe,J,ee){if(e.timeoutHandle=-1,oe=t.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},Ym(t,h,oe);var be=(h&62914560)===h?vc-me():(h&4194048)===h?Qm-me():0;if(be=Lv(oe,be),be!==null){tr=h,e.cancelPendingCommit=be(ug.bind(null,e,t,h,r,l,d,y,N,z,ne,oe,null,J,ee)),Pr(e,h,y,!Y);return}}ug(e,t,h,r,l,d,y,N,z)}function Xb(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var d=r[l],h=d.getSnapshot;d=d.value;try{if(!wn(h(),d))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pr(e,t,r,l){t&=~Bd,t&=~Ma,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var d=t;0<d;){var h=31-Rt(d),y=1<<h;l[h]=-1,d&=~y}r!==0&&Ya(e,r,t)}function Nc(){return(tt&6)===0?(Dl(0),!1):!0}function $d(){if(Ge!==null){if(lt===0)var e=Ge.return;else e=Ge,$s=Na=null,id(e),yi=null,xl=0,e=Ge;for(;e!==null;)Om(e.alternate,e),e=e.return;Ge=null}}function Ei(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,pv(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),tr=0,$d(),ft=e,Ge=r=Vs(e.current,null),Fe=t,lt=0,Sn=null,Ir=!1,Si=$n(e,t),zd=!1,ki=kn=Bd=Ma=Ur=jt=0,gn=Ol=null,Pd=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var d=31-Rt(l),h=1<<d;t|=e[d],l&=~h}return er=t,$o(),r}function sg(e,t){Pe=null,B.H=Sl,t===xi||t===Qo?(t=b0(),lt=3):t===Yu?(t=b0(),lt=4):lt=t===jd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Sn=t,Ge===null&&(jt=1,hc(e,Ln(t,e.current)))}function rg(){var e=Nn.current;return e===null?!0:(Fe&4194048)===Fe?zn===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?e===zn:!1}function ag(){var e=B.H;return B.H=Sl,e===null?Sl:e}function ig(){var e=B.A;return B.A=Yb,e}function _c(){jt=4,Ir||(Fe&4194048)!==Fe&&Nn.current!==null||(Si=!0),(Ur&134217727)===0&&(Ma&134217727)===0||ft===null||Pr(ft,Fe,kn,!1)}function Fd(e,t,r){var l=tt;tt|=2;var d=ag(),h=ig();(ft!==e||Fe!==t)&&(jc=null,Ei(e,t)),t=!1;var y=jt;e:do try{if(lt!==0&&Ge!==null){var N=Ge,z=Sn;switch(lt){case 8:$d(),y=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(t=!0);var Y=lt;if(lt=0,Sn=null,Ti(e,N,z,Y),r&&Si){y=0;break e}break;default:Y=lt,lt=0,Sn=null,Ti(e,N,z,Y)}}Jb(),y=jt;break}catch(ne){sg(e,ne)}while(!0);return t&&e.shellSuspendCounter++,$s=Na=null,tt=l,B.H=d,B.A=h,Ge===null&&(ft=null,Fe=0,$o()),y}function Jb(){for(;Ge!==null;)lg(Ge)}function Qb(e,t){var r=tt;tt|=2;var l=ag(),d=ig();ft!==e||Fe!==t?(jc=null,wc=me()+500,Ei(e,t)):Si=$n(e,t);e:do try{if(lt!==0&&Ge!==null){t=Ge;var h=Sn;t:switch(lt){case 1:lt=0,Sn=null,Ti(e,t,h,1);break;case 2:case 9:if(x0(h)){lt=0,Sn=null,og(t);break}t=function(){lt!==2&&lt!==9||ft!==e||(lt=7),Cs(e)},h.then(t,t);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:x0(h)?(lt=0,Sn=null,og(t)):(lt=0,Sn=null,Ti(e,t,h,7));break;case 5:var y=null;switch(Ge.tag){case 26:y=Ge.memoizedState;case 5:case 27:var N=Ge;if(y?Wg(y):N.stateNode.complete){lt=0,Sn=null;var z=N.sibling;if(z!==null)Ge=z;else{var Y=N.return;Y!==null?(Ge=Y,Sc(Y)):Ge=null}break t}}lt=0,Sn=null,Ti(e,t,h,5);break;case 6:lt=0,Sn=null,Ti(e,t,h,6);break;case 8:$d(),jt=6;break e;default:throw Error(o(462))}}Zb();break}catch(ne){sg(e,ne)}while(!0);return $s=Na=null,B.H=l,B.A=d,tt=r,Ge!==null?0:(ft=null,Fe=0,$o(),jt)}function Zb(){for(;Ge!==null&&!de();)lg(Ge)}function lg(e){var t=Rm(e.alternate,e,er);e.memoizedProps=e.pendingProps,t===null?Sc(e):Ge=t}function og(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Sm(r,t,t.pendingProps,t.type,void 0,Fe);break;case 11:t=Sm(r,t,t.pendingProps,t.type.render,t.ref,Fe);break;case 5:id(t);default:Om(r,t),t=Ge=i0(t,er),t=Rm(r,t,er)}e.memoizedProps=e.pendingProps,t===null?Sc(e):Ge=t}function Ti(e,t,r,l){$s=Na=null,id(t),yi=null,xl=0;var d=t.return;try{if(Hb(e,d,t,r,Fe)){jt=1,hc(e,Ln(r,e.current)),Ge=null;return}}catch(h){if(d!==null)throw Ge=d,h;jt=1,hc(e,Ln(r,e.current)),Ge=null;return}t.flags&32768?(Ye||l===1?e=!0:Si||(Fe&536870912)!==0?e=!1:(Ir=e=!0,(l===2||l===9||l===3||l===6)&&(l=Nn.current,l!==null&&l.tag===13&&(l.flags|=16384))),cg(t,e)):Sc(t)}function Sc(e){var t=e;do{if((t.flags&32768)!==0){cg(t,Ir);return}e=t.return;var r=$b(t.alternate,t,er);if(r!==null){Ge=r;return}if(t=t.sibling,t!==null){Ge=t;return}Ge=t=e}while(t!==null);jt===0&&(jt=5)}function cg(e,t){do{var r=Fb(e.alternate,e);if(r!==null){r.flags&=32767,Ge=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){Ge=e;return}Ge=e=r}while(e!==null);jt=6,Ge=null}function ug(e,t,r,l,d,h,y,N,z){e.cancelPendingCommit=null;do kc();while(Ht!==0);if((tt&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(h=t.lanes|t.childLanes,h|=Ou,_u(e,r,h,y,N,z),e===ft&&(Ge=ft=null,Fe=0),Ci=t,Br=e,tr=r,Hd=h,Vd=d,Zm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,sv(nt,function(){return gg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,d=ie.p,ie.p=2,y=tt,tt|=4;try{qb(e,t,r)}finally{tt=y,ie.p=d,B.T=l}}Ht=1,dg(),hg(),fg()}}function dg(){if(Ht===1){Ht=0;var e=Br,t=Ci,r=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||r){r=B.T,B.T=null;var l=ie.p;ie.p=2;var d=tt;tt|=4;try{Fm(t,e);var h=sh,y=Jf(e.containerInfo),N=h.focusedElem,z=h.selectionRange;if(y!==N&&N&&N.ownerDocument&&Xf(N.ownerDocument.documentElement,N)){if(z!==null&&Eu(N)){var Y=z.start,ne=z.end;if(ne===void 0&&(ne=Y),"selectionStart"in N)N.selectionStart=Y,N.selectionEnd=Math.min(ne,N.value.length);else{var oe=N.ownerDocument||document,J=oe&&oe.defaultView||window;if(J.getSelection){var ee=J.getSelection(),be=N.textContent.length,Ae=Math.min(z.start,be),dt=z.end===void 0?Ae:Math.min(z.end,be);!ee.extend&&Ae>dt&&(y=dt,dt=Ae,Ae=y);var $=Kf(N,Ae),P=Kf(N,dt);if($&&P&&(ee.rangeCount!==1||ee.anchorNode!==$.node||ee.anchorOffset!==$.offset||ee.focusNode!==P.node||ee.focusOffset!==P.offset)){var W=oe.createRange();W.setStart($.node,$.offset),ee.removeAllRanges(),Ae>dt?(ee.addRange(W),ee.extend(P.node,P.offset)):(W.setEnd(P.node,P.offset),ee.addRange(W))}}}}for(oe=[],ee=N;ee=ee.parentNode;)ee.nodeType===1&&oe.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<oe.length;N++){var ae=oe[N];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}zc=!!nh,sh=nh=null}finally{tt=d,ie.p=l,B.T=r}}e.current=t,Ht=2}}function hg(){if(Ht===2){Ht=0;var e=Br,t=Ci,r=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||r){r=B.T,B.T=null;var l=ie.p;ie.p=2;var d=tt;tt|=4;try{Pm(e,t.alternate,t)}finally{tt=d,ie.p=l,B.T=r}}Ht=3}}function fg(){if(Ht===4||Ht===3){Ht=0,ue();var e=Br,t=Ci,r=tr,l=Zm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ht=5:(Ht=0,Ci=Br=null,mg(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(zr=null),zs(r),t=t.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(kt,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=B.T,d=ie.p,ie.p=2,B.T=null;try{for(var h=e.onRecoverableError,y=0;y<l.length;y++){var N=l[y];h(N.value,{componentStack:N.stack})}}finally{B.T=t,ie.p=d}}(tr&3)!==0&&kc(),Cs(e),d=e.pendingLanes,(r&261930)!==0&&(d&42)!==0?e===Gd?Ll++:(Ll=0,Gd=e):Ll=0,Dl(0)}}function mg(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,gl(t)))}function kc(){return dg(),hg(),fg(),gg()}function gg(){if(Ht!==5)return!1;var e=Br,t=Hd;Hd=0;var r=zs(tr),l=B.T,d=ie.p;try{ie.p=32>r?32:r,B.T=null,r=Vd,Vd=null;var h=Br,y=tr;if(Ht=0,Ci=Br=null,tr=0,(tt&6)!==0)throw Error(o(331));var N=tt;if(tt|=4,Xm(h.current),Wm(h,h.current,y,r),tt=N,Dl(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(kt,h)}catch{}return!0}finally{ie.p=d,B.T=l,mg(e,t)}}function pg(e,t,r){t=Ln(r,t),t=wd(e.stateNode,t,2),e=Mr(e,t,2),e!==null&&(la(e,2),Cs(e))}function ot(e,t,r){if(e.tag===3)pg(e,e,r);else for(;t!==null;){if(t.tag===3){pg(t,e,r);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(zr===null||!zr.has(l))){e=Ln(r,e),r=xm(2),l=Mr(t,r,2),l!==null&&(ym(r,l,t,e),la(l,2),Cs(l));break}}t=t.return}}function qd(e,t,r){var l=e.pingCache;if(l===null){l=e.pingCache=new Kb;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(r)||(zd=!0,d.add(r),e=ev.bind(null,e,t,r),t.then(e,e))}function ev(e,t,r){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,ft===e&&(Fe&r)===r&&(jt===4||jt===3&&(Fe&62914560)===Fe&&300>me()-vc?(tt&2)===0&&Ei(e,0):Bd|=r,ki===Fe&&(ki=0)),Cs(e)}function xg(e,t){t===0&&(t=wo()),e=va(e,t),e!==null&&(la(e,t),Cs(e))}function tv(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),xg(e,r)}function nv(e,t){var r=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(t),xg(e,r)}function sv(e,t){return ze(e,t)}var Cc=null,Ai=null,Wd=!1,Ec=!1,Yd=!1,Hr=0;function Cs(e){e!==Ai&&e.next===null&&(Ai===null?Cc=Ai=e:Ai=Ai.next=e),Ec=!0,Wd||(Wd=!0,av())}function Dl(e,t){if(!Yd&&Ec){Yd=!0;do for(var r=!1,l=Cc;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var h=0;else{var y=l.suspendedLanes,N=l.pingedLanes;h=(1<<31-Rt(42|e)+1)-1,h&=d&~(y&~N),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(r=!0,wg(l,h))}else h=Fe,h=us(l,l===ft?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||$n(l,h)||(r=!0,wg(l,h));l=l.next}while(r);Yd=!1}}function rv(){yg()}function yg(){Ec=Wd=!1;var e=0;Hr!==0&&gv()&&(e=Hr);for(var t=me(),r=null,l=Cc;l!==null;){var d=l.next,h=bg(l,t);h===0?(l.next=null,r===null?Cc=d:r.next=d,d===null&&(Ai=r)):(r=l,(e!==0||(h&3)!==0)&&(Ec=!0)),l=d}Ht!==0&&Ht!==5||Dl(e),Hr!==0&&(Hr=0)}function bg(e,t){for(var r=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var y=31-Rt(h),N=1<<y,z=d[y];z===-1?((N&r)===0||(N&l)!==0)&&(d[y]=Nu(N,t)):z<=t&&(e.expiredLanes|=N),h&=~N}if(t=ft,r=Fe,r=us(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,r===0||e===t&&(lt===2||lt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Vt(l),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||$n(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(l!==null&&Vt(l),zs(r)){case 2:case 8:r=Ue;break;case 32:r=nt;break;case 268435456:r=qt;break;default:r=nt}return l=vg.bind(null,e),r=ze(r,l),e.callbackPriority=t,e.callbackNode=r,t}return l!==null&&l!==null&&Vt(l),e.callbackPriority=2,e.callbackNode=null,2}function vg(e,t){if(Ht!==0&&Ht!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(kc()&&e.callbackNode!==r)return null;var l=Fe;return l=us(e,e===ft?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(tg(e,l,t),bg(e,me()),e.callbackNode!=null&&e.callbackNode===r?vg.bind(null,e):null)}function wg(e,t){if(kc())return null;tg(e,t,!0)}function av(){xv(function(){(tt&6)!==0?ze(le,rv):yg()})}function Kd(){if(Hr===0){var e=gi;e===0&&(e=os,os<<=1,(os&261888)===0&&(os=256)),Hr=e}return Hr}function jg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ei(""+e)}function Ng(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function iv(e,t,r,l,d){if(t==="submit"&&r&&r.stateNode===d){var h=jg((d[Gt]||null).action),y=l.submitter;y&&(t=(t=y[Gt]||null)?jg(t.formAction):y.getAttribute("formAction"),t!==null&&(h=t,y=null));var N=new ws("action","action",null,l,d);e.push({event:N,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Hr!==0){var z=y?Ng(d,y):new FormData(d);gd(r,{pending:!0,data:z,method:d.method,action:h},null,z)}}else typeof h=="function"&&(N.preventDefault(),z=y?Ng(d,y):new FormData(d),gd(r,{pending:!0,data:z,method:d.method,action:h},h,z))},currentTarget:d}]})}}for(var Xd=0;Xd<Mu.length;Xd++){var Jd=Mu[Xd],lv=Jd.toLowerCase(),ov=Jd[0].toUpperCase()+Jd.slice(1);Qn(lv,"on"+ov)}Qn(e0,"onAnimationEnd"),Qn(t0,"onAnimationIteration"),Qn(n0,"onAnimationStart"),Qn("dblclick","onDoubleClick"),Qn("focusin","onFocus"),Qn("focusout","onBlur"),Qn(_b,"onTransitionRun"),Qn(Sb,"onTransitionStart"),Qn(kb,"onTransitionCancel"),Qn(s0,"onTransitionEnd"),xs("onMouseEnter",["mouseout","mouseover"]),xs("onMouseLeave",["mouseout","mouseover"]),xs("onPointerEnter",["pointerout","pointerover"]),xs("onPointerLeave",["pointerout","pointerover"]),ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ps("onBeforeInput",["compositionend","keypress","textInput","paste"]),ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Il));function _g(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],d=l.event;l=l.listeners;e:{var h=void 0;if(t)for(var y=l.length-1;0<=y;y--){var N=l[y],z=N.instance,Y=N.currentTarget;if(N=N.listener,z!==h&&d.isPropagationStopped())break e;h=N,d.currentTarget=Y;try{h(d)}catch(ne){Go(ne)}d.currentTarget=null,h=z}else for(y=0;y<l.length;y++){if(N=l[y],z=N.instance,Y=N.currentTarget,N=N.listener,z!==h&&d.isPropagationStopped())break e;h=N,d.currentTarget=Y;try{h(d)}catch(ne){Go(ne)}d.currentTarget=null,h=z}}}}function $e(e,t){var r=t[Ka];r===void 0&&(r=t[Ka]=new Set);var l=e+"__bubble";r.has(l)||(Sg(t,e,2,!1),r.add(l))}function Qd(e,t,r){var l=0;t&&(l|=4),Sg(r,e,l,t)}var Tc="_reactListening"+Math.random().toString(36).slice(2);function Zd(e){if(!e[Tc]){e[Tc]=!0,Yi.forEach(function(r){r!=="selectionchange"&&(cv.has(r)||Qd(r,!1,e),Qd(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tc]||(t[Tc]=!0,Qd("selectionchange",!1,t))}}function Sg(e,t,r,l){switch(ep(t)){case 2:var d=Uv;break;case 8:d=zv;break;default:d=mh}r=d.bind(null,t,r,e),d=void 0,!ha||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function eh(e,t,r,l,d){var h=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var N=l.stateNode.containerInfo;if(N===d)break;if(y===4)for(y=l.return;y!==null;){var z=y.tag;if((z===3||z===4)&&y.stateNode.containerInfo===d)return;y=y.return}for(;N!==null;){if(y=ms(N),y===null)return;if(z=y.tag,z===5||z===6||z===26||z===27){l=h=y;continue e}N=N.parentNode}}l=l.return}jr(function(){var Y=h,ne=Rn(r),oe=[];e:{var J=r0.get(e);if(J!==void 0){var ee=ws,be=e;switch(e){case"keypress":if(ma(r)===0)break e;case"keydown":case"keyup":ee=Ho;break;case"focusin":be="focus",ee=pa;break;case"focusout":be="blur",ee=pa;break;case"beforeblur":case"afterblur":ee=pa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=ll;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Ro;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=v;break;case e0:case t0:case n0:ee=Oo;break;case s0:ee=q;break;case"scroll":case"scrollend":ee=il;break;case"wheel":ee=he;break;case"copy":case"cut":case"paste":ee=Lo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=c;break;case"toggle":case"beforetoggle":ee=Ct}var Ae=(t&4)!==0,dt=!Ae&&(e==="scroll"||e==="scrollend"),$=Ae?J!==null?J+"Capture":null:J;Ae=[];for(var P=Y,W;P!==null;){var ae=P;if(W=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||W===null||$===null||(ae=Yn(P,$),ae!=null&&Ae.push(Ul(P,ae,W))),dt)break;P=P.return}0<Ae.length&&(J=new ee(J,be,null,r,ne),oe.push({event:J,listeners:Ae}))}}if((t&7)===0){e:{if(J=e==="mouseover"||e==="pointerover",ee=e==="mouseout"||e==="pointerout",J&&r!==sl&&(be=r.relatedTarget||r.fromElement)&&(ms(be)||be[hs]))break e;if((ee||J)&&(J=ne.window===ne?ne:(J=ne.ownerDocument)?J.defaultView||J.parentWindow:window,ee?(be=r.relatedTarget||r.toElement,ee=Y,be=be?ms(be):null,be!==null&&(dt=f(be),Ae=be.tag,be!==dt||Ae!==5&&Ae!==27&&Ae!==6)&&(be=null)):(ee=null,be=Y),ee!==be)){if(Ae=ll,ae="onMouseLeave",$="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(Ae=c,ae="onPointerLeave",$="onPointerEnter",P="pointer"),dt=ee==null?J:bn(ee),W=be==null?J:bn(be),J=new Ae(ae,P+"leave",ee,r,ne),J.target=dt,J.relatedTarget=W,ae=null,ms(ne)===Y&&(Ae=new Ae($,P+"enter",be,r,ne),Ae.target=W,Ae.relatedTarget=dt,ae=Ae),dt=ae,ee&&be)t:{for(Ae=uv,$=ee,P=be,W=0,ae=$;ae;ae=Ae(ae))W++;ae=0;for(var _e=P;_e;_e=Ae(_e))ae++;for(;0<W-ae;)$=Ae($),W--;for(;0<ae-W;)P=Ae(P),ae--;for(;W--;){if($===P||P!==null&&$===P.alternate){Ae=$;break t}$=Ae($),P=Ae(P)}Ae=null}else Ae=null;ee!==null&&kg(oe,J,ee,Ae,!1),be!==null&&dt!==null&&kg(oe,dt,be,Ae,!0)}}e:{if(J=Y?bn(Y):window,ee=J.nodeName&&J.nodeName.toLowerCase(),ee==="select"||ee==="input"&&J.type==="file")var Ze=Gf;else if(Hf(J))if($f)Ze=wb;else{Ze=bb;var ve=yb}else ee=J.nodeName,!ee||ee.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Y&&Za(Y.elementType)&&(Ze=Gf):Ze=vb;if(Ze&&(Ze=Ze(e,Y))){Vf(oe,Ze,r,ne);break e}ve&&ve(e,J,Y),e==="focusout"&&Y&&J.type==="number"&&Y.memoizedProps.value!=null&&el(J,"number",J.value)}switch(ve=Y?bn(Y):window,e){case"focusin":(Hf(ve)||ve.contentEditable==="true")&&(li=ve,Tu=Y,hl=null);break;case"focusout":hl=Tu=li=null;break;case"mousedown":Au=!0;break;case"contextmenu":case"mouseup":case"dragend":Au=!1,Qf(oe,r,ne);break;case"selectionchange":if(Nb)break;case"keydown":case"keyup":Qf(oe,r,ne)}var He;if(vt)e:{switch(e){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else ii?ai(e,r)&&(qe="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(qe="onCompositionStart");qe&&(Xn&&r.locale!=="ko"&&(ii||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&ii&&(He=al()):(vs=ne,rl="value"in vs?vs.value:vs.textContent,ii=!0)),ve=Ac(Y,qe),0<ve.length&&(qe=new Ns(qe,e,null,r,ne),oe.push({event:qe,listeners:ve}),He?qe.data=He:(He=Pf(r),He!==null&&(qe.data=He)))),(He=Hs?mb(e,r):gb(e,r))&&(qe=Ac(Y,"onBeforeInput"),0<qe.length&&(ve=new Ns("onBeforeInput","beforeinput",null,r,ne),oe.push({event:ve,listeners:qe}),ve.data=He)),iv(oe,e,Y,r,ne)}_g(oe,t)})}function Ul(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ac(e,t){for(var r=t+"Capture",l=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=Yn(e,r),d!=null&&l.unshift(Ul(e,d,h)),d=Yn(e,t),d!=null&&l.push(Ul(e,d,h))),e.tag===3)return l;e=e.return}return[]}function uv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function kg(e,t,r,l,d){for(var h=t._reactName,y=[];r!==null&&r!==l;){var N=r,z=N.alternate,Y=N.stateNode;if(N=N.tag,z!==null&&z===l)break;N!==5&&N!==26&&N!==27||Y===null||(z=Y,d?(Y=Yn(r,h),Y!=null&&y.unshift(Ul(r,Y,z))):d||(Y=Yn(r,h),Y!=null&&y.push(Ul(r,Y,z)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}var dv=/\r\n?/g,hv=/\u0000|\uFFFD/g;function Cg(e){return(typeof e=="string"?e:""+e).replace(dv,`
`).replace(hv,"")}function Eg(e,t){return t=Cg(t),Cg(e)===t}function ut(e,t,r,l,d,h){switch(r){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||dn(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&dn(e,""+l);break;case"className":vn(e,"class",l);break;case"tabIndex":vn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":vn(e,r,l);break;case"style":nl(e,l,h);break;case"data":if(t!=="object"){vn(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=ei(""+l),e.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(r==="formAction"?(t!=="input"&&ut(e,t,"name",d.name,d,null),ut(e,t,"formEncType",d.formEncType,d,null),ut(e,t,"formMethod",d.formMethod,d,null),ut(e,t,"formTarget",d.formTarget,d,null)):(ut(e,t,"encType",d.encType,d,null),ut(e,t,"method",d.method,d,null),ut(e,t,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=ei(""+l),e.setAttribute(r,l);break;case"onClick":l!=null&&(e.onclick=Wn);break;case"onScroll":l!=null&&$e("scroll",e);break;case"onScrollEnd":l!=null&&$e("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(r=l.__html,r!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=r}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}r=ei(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""+l):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":l===!0?e.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,l):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(r,l):e.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(r):e.setAttribute(r,l);break;case"popover":$e("beforetoggle",e),$e("toggle",e),Ja(e,"popover",l);break;case"xlinkActuate":Dt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Dt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Dt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Dt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Dt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Dt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Dt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Dt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Dt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ja(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Ao.get(r)||r,Ja(e,r,l))}}function th(e,t,r,l,d,h){switch(r){case"style":nl(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(r=l.__html,r!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=r}}break;case"children":typeof l=="string"?dn(e,l):(typeof l=="number"||typeof l=="bigint")&&dn(e,""+l);break;case"onScroll":l!=null&&$e("scroll",e);break;case"onScrollEnd":l!=null&&$e("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ki.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),t=r.slice(2,d?r.length-7:void 0),h=e[Gt]||null,h=h!=null?h[r]:null,typeof h=="function"&&e.removeEventListener(t,h,d),typeof l=="function")){typeof h!="function"&&h!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,l,d);break e}r in e?e[r]=l:l===!0?e.setAttribute(r,""):Ja(e,r,l)}}}function Qt(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",e),$e("load",e);var l=!1,d=!1,h;for(h in r)if(r.hasOwnProperty(h)){var y=r[h];if(y!=null)switch(h){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ut(e,t,h,y,r,null)}}d&&ut(e,t,"srcSet",r.srcSet,r,null),l&&ut(e,t,"src",r.src,r,null);return;case"input":$e("invalid",e);var N=h=y=d=null,z=null,Y=null;for(l in r)if(r.hasOwnProperty(l)){var ne=r[l];if(ne!=null)switch(l){case"name":d=ne;break;case"type":y=ne;break;case"checked":z=ne;break;case"defaultChecked":Y=ne;break;case"value":h=ne;break;case"defaultValue":N=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(o(137,t));break;default:ut(e,t,l,ne,r,null)}}Co(e,h,N,z,Y,y,d,!1);return;case"select":$e("invalid",e),l=y=h=null;for(d in r)if(r.hasOwnProperty(d)&&(N=r[d],N!=null))switch(d){case"value":h=N;break;case"defaultValue":y=N;break;case"multiple":l=N;default:ut(e,t,d,N,r,null)}t=h,r=y,e.multiple=!!l,t!=null?yr(e,!!l,t,!1):r!=null&&yr(e,!!l,r,!0);return;case"textarea":$e("invalid",e),h=d=l=null;for(y in r)if(r.hasOwnProperty(y)&&(N=r[y],N!=null))switch(y){case"value":l=N;break;case"defaultValue":d=N;break;case"children":h=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(o(91));break;default:ut(e,t,y,N,r,null)}br(e,l,d,h);return;case"option":for(z in r)r.hasOwnProperty(z)&&(l=r[z],l!=null)&&(z==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":ut(e,t,z,l,r,null));return;case"dialog":$e("beforetoggle",e),$e("toggle",e),$e("cancel",e),$e("close",e);break;case"iframe":case"object":$e("load",e);break;case"video":case"audio":for(l=0;l<Il.length;l++)$e(Il[l],e);break;case"image":$e("error",e),$e("load",e);break;case"details":$e("toggle",e);break;case"embed":case"source":case"link":$e("error",e),$e("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in r)if(r.hasOwnProperty(Y)&&(l=r[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ut(e,t,Y,l,r,null)}return;default:if(Za(t)){for(ne in r)r.hasOwnProperty(ne)&&(l=r[ne],l!==void 0&&th(e,t,ne,l,r,void 0));return}}for(N in r)r.hasOwnProperty(N)&&(l=r[N],l!=null&&ut(e,t,N,l,r,null))}function fv(e,t,r,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,y=null,N=null,z=null,Y=null,ne=null;for(ee in r){var oe=r[ee];if(r.hasOwnProperty(ee)&&oe!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":z=oe;default:l.hasOwnProperty(ee)||ut(e,t,ee,null,l,oe)}}for(var J in l){var ee=l[J];if(oe=r[J],l.hasOwnProperty(J)&&(ee!=null||oe!=null))switch(J){case"type":h=ee;break;case"name":d=ee;break;case"checked":Y=ee;break;case"defaultChecked":ne=ee;break;case"value":y=ee;break;case"defaultValue":N=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(o(137,t));break;default:ee!==oe&&ut(e,t,J,ee,l,oe)}}Qa(e,y,N,z,Y,ne,h,d);return;case"select":ee=y=N=J=null;for(h in r)if(z=r[h],r.hasOwnProperty(h)&&z!=null)switch(h){case"value":break;case"multiple":ee=z;default:l.hasOwnProperty(h)||ut(e,t,h,null,l,z)}for(d in l)if(h=l[d],z=r[d],l.hasOwnProperty(d)&&(h!=null||z!=null))switch(d){case"value":J=h;break;case"defaultValue":N=h;break;case"multiple":y=h;default:h!==z&&ut(e,t,d,h,l,z)}t=N,r=y,l=ee,J!=null?yr(e,!!r,J,!1):!!l!=!!r&&(t!=null?yr(e,!!r,t,!0):yr(e,!!r,r?[]:"",!1));return;case"textarea":ee=J=null;for(N in r)if(d=r[N],r.hasOwnProperty(N)&&d!=null&&!l.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:ut(e,t,N,null,l,d)}for(y in l)if(d=l[y],h=r[y],l.hasOwnProperty(y)&&(d!=null||h!=null))switch(y){case"value":J=d;break;case"defaultValue":ee=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:d!==h&&ut(e,t,y,d,l,h)}Eo(e,J,ee);return;case"option":for(var be in r)J=r[be],r.hasOwnProperty(be)&&J!=null&&!l.hasOwnProperty(be)&&(be==="selected"?e.selected=!1:ut(e,t,be,null,l,J));for(z in l)J=l[z],ee=r[z],l.hasOwnProperty(z)&&J!==ee&&(J!=null||ee!=null)&&(z==="selected"?e.selected=J&&typeof J!="function"&&typeof J!="symbol":ut(e,t,z,J,l,ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in r)J=r[Ae],r.hasOwnProperty(Ae)&&J!=null&&!l.hasOwnProperty(Ae)&&ut(e,t,Ae,null,l,J);for(Y in l)if(J=l[Y],ee=r[Y],l.hasOwnProperty(Y)&&J!==ee&&(J!=null||ee!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(o(137,t));break;default:ut(e,t,Y,J,l,ee)}return;default:if(Za(t)){for(var dt in r)J=r[dt],r.hasOwnProperty(dt)&&J!==void 0&&!l.hasOwnProperty(dt)&&th(e,t,dt,void 0,l,J);for(ne in l)J=l[ne],ee=r[ne],!l.hasOwnProperty(ne)||J===ee||J===void 0&&ee===void 0||th(e,t,ne,J,l,ee);return}}for(var $ in r)J=r[$],r.hasOwnProperty($)&&J!=null&&!l.hasOwnProperty($)&&ut(e,t,$,null,l,J);for(oe in l)J=l[oe],ee=r[oe],!l.hasOwnProperty(oe)||J===ee||J==null&&ee==null||ut(e,t,oe,J,l,ee)}function Tg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var d=r[l],h=d.transferSize,y=d.initiatorType,N=d.duration;if(h&&N&&Tg(y)){for(y=0,N=d.responseEnd,l+=1;l<r.length;l++){var z=r[l],Y=z.startTime;if(Y>N)break;var ne=z.transferSize,oe=z.initiatorType;ne&&Tg(oe)&&(z=z.responseEnd,y+=ne*(z<N?1:(N-Y)/(z-Y)))}if(--l,t+=8*(h+y)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var nh=null,sh=null;function Rc(e){return e.nodeType===9?e:e.ownerDocument}function Ag(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function rh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ah=null;function gv(){var e=window.event;return e&&e.type==="popstate"?e===ah?!1:(ah=e,!0):(ah=null,!1)}var Mg=typeof setTimeout=="function"?setTimeout:void 0,pv=typeof clearTimeout=="function"?clearTimeout:void 0,Og=typeof Promise=="function"?Promise:void 0,xv=typeof queueMicrotask=="function"?queueMicrotask:typeof Og<"u"?function(e){return Og.resolve(null).then(e).catch(yv)}:Mg;function yv(e){setTimeout(function(){throw e})}function Vr(e){return e==="head"}function Lg(e,t){var r=t,l=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"||r==="/&"){if(l===0){e.removeChild(d),Li(t);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")zl(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,zl(r);for(var h=r.firstChild;h;){var y=h.nextSibling,N=h.nodeName;h[fs]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&h.rel.toLowerCase()==="stylesheet"||r.removeChild(h),h=y}}else r==="body"&&zl(e.ownerDocument.body);r=d}while(r);Li(t)}function Dg(e,t){var r=e;e=0;do{var l=r.nextSibling;if(r.nodeType===1?t?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(t?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=l}while(r)}function ih(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":ih(r),Xa(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function bv(e,t,r,l){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[fs])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Bn(e.nextSibling),e===null)break}return null}function vv(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Bn(e.nextSibling),e===null))return null;return e}function Ig(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Bn(e.nextSibling),e===null))return null;return e}function lh(e){return e.data==="$?"||e.data==="$~"}function oh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function wv(e,t){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||r.readyState!=="loading")t();else{var l=function(){t(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Bn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var ch=null;function Ug(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(t===0)return Bn(e.nextSibling);t--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||t++}e=e.nextSibling}return null}function zg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(t===0)return e;t--}else r!=="/$"&&r!=="/&"||t++}e=e.previousSibling}return null}function Bg(e,t,r){switch(t=Rc(r),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function zl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Xa(e)}var Pn=new Map,Pg=new Set;function Mc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var nr=ie.d;ie.d={f:jv,r:Nv,D:_v,C:Sv,L:kv,m:Cv,X:Tv,S:Ev,M:Av};function jv(){var e=nr.f(),t=Nc();return e||t}function Nv(e){var t=An(e);t!==null&&t.tag===5&&t.type==="form"?sm(t):nr.r(e)}var Ri=typeof document>"u"?null:document;function Hg(e,t,r){var l=Ri;if(l&&typeof t=="string"&&t){var d=un(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),Pg.has(d)||(Pg.add(d),e={rel:e,crossOrigin:r,href:t},l.querySelector(d)===null&&(t=l.createElement("link"),Qt(t,"link",e),Lt(t),l.head.appendChild(t)))}}function _v(e){nr.D(e),Hg("dns-prefetch",e,null)}function Sv(e,t){nr.C(e,t),Hg("preconnect",e,t)}function kv(e,t,r){nr.L(e,t,r);var l=Ri;if(l&&e&&t){var d='link[rel="preload"][as="'+un(t)+'"]';t==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+un(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+un(r.imageSizes)+'"]')):d+='[href="'+un(e)+'"]';var h=d;switch(t){case"style":h=Mi(e);break;case"script":h=Oi(e)}Pn.has(h)||(e=j({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),Pn.set(h,e),l.querySelector(d)!==null||t==="style"&&l.querySelector(Bl(h))||t==="script"&&l.querySelector(Pl(h))||(t=l.createElement("link"),Qt(t,"link",e),Lt(t),l.head.appendChild(t)))}}function Cv(e,t){nr.m(e,t);var r=Ri;if(r&&e){var l=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+un(l)+'"][href="'+un(e)+'"]',h=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Oi(e)}if(!Pn.has(h)&&(e=j({rel:"modulepreload",href:e},t),Pn.set(h,e),r.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Pl(h)))return}l=r.createElement("link"),Qt(l,"link",e),Lt(l),r.head.appendChild(l)}}}function Ev(e,t,r){nr.S(e,t,r);var l=Ri;if(l&&e){var d=gs(l).hoistableStyles,h=Mi(e);t=t||"default";var y=d.get(h);if(!y){var N={loading:0,preload:null};if(y=l.querySelector(Bl(h)))N.loading=5;else{e=j({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Pn.get(h))&&uh(e,r);var z=y=l.createElement("link");Lt(z),Qt(z,"link",e),z._p=new Promise(function(Y,ne){z.onload=Y,z.onerror=ne}),z.addEventListener("load",function(){N.loading|=1}),z.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Oc(y,t,l)}y={type:"stylesheet",instance:y,count:1,state:N},d.set(h,y)}}}function Tv(e,t){nr.X(e,t);var r=Ri;if(r&&e){var l=gs(r).hoistableScripts,d=Oi(e),h=l.get(d);h||(h=r.querySelector(Pl(d)),h||(e=j({src:e,async:!0},t),(t=Pn.get(d))&&dh(e,t),h=r.createElement("script"),Lt(h),Qt(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function Av(e,t){nr.M(e,t);var r=Ri;if(r&&e){var l=gs(r).hoistableScripts,d=Oi(e),h=l.get(d);h||(h=r.querySelector(Pl(d)),h||(e=j({src:e,async:!0,type:"module"},t),(t=Pn.get(d))&&dh(e,t),h=r.createElement("script"),Lt(h),Qt(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function Vg(e,t,r,l){var d=(d=pe.current)?Mc(d):null;if(!d)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=Mi(r.href),r=gs(d).hoistableStyles,l=r.get(t),l||(l={type:"style",instance:null,count:0,state:null},r.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Mi(r.href);var h=gs(d).hoistableStyles,y=h.get(e);if(y||(d=d.ownerDocument||d,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,y),(h=d.querySelector(Bl(e)))&&!h._p&&(y.instance=h,y.state.loading=5),Pn.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Pn.set(e,r),h||Rv(d,e,r,y.state))),t&&l===null)throw Error(o(528,""));return y}if(t&&l!==null)throw Error(o(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Oi(r),r=gs(d).hoistableScripts,l=r.get(t),l||(l={type:"script",instance:null,count:0,state:null},r.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Mi(e){return'href="'+un(e)+'"'}function Bl(e){return'link[rel="stylesheet"]['+e+"]"}function Gg(e){return j({},e,{"data-precedence":e.precedence,precedence:null})}function Rv(e,t,r,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Qt(t,"link",r),Lt(t),e.head.appendChild(t))}function Oi(e){return'[src="'+un(e)+'"]'}function Pl(e){return"script[async]"+e}function $g(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+un(r.href)+'"]');if(l)return t.instance=l,Lt(l),l;var d=j({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Lt(l),Qt(l,"style",d),Oc(l,r.precedence,e),t.instance=l;case"stylesheet":d=Mi(r.href);var h=e.querySelector(Bl(d));if(h)return t.state.loading|=4,t.instance=h,Lt(h),h;l=Gg(r),(d=Pn.get(d))&&uh(l,d),h=(e.ownerDocument||e).createElement("link"),Lt(h);var y=h;return y._p=new Promise(function(N,z){y.onload=N,y.onerror=z}),Qt(h,"link",l),t.state.loading|=4,Oc(h,r.precedence,e),t.instance=h;case"script":return h=Oi(r.src),(d=e.querySelector(Pl(h)))?(t.instance=d,Lt(d),d):(l=r,(d=Pn.get(h))&&(l=j({},r),dh(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),Lt(d),Qt(d,"link",l),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Oc(l,r.precedence,e));return t.instance}function Oc(e,t,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,h=d,y=0;y<l.length;y++){var N=l[y];if(N.dataset.precedence===t)h=N;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function uh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function dh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Lc=null;function Fg(e,t,r){if(Lc===null){var l=new Map,d=Lc=new Map;d.set(r,l)}else d=Lc,l=d.get(r),l||(l=new Map,d.set(r,l));if(l.has(e))return l;for(l.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var h=r[d];if(!(h[fs]||h[Ot]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var y=h.getAttribute(t)||"";y=e+y;var N=l.get(y);N?N.push(h):l.set(y,[h])}}return l}function qg(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function Mv(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Wg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ov(e,t,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=Mi(l.href),h=t.querySelector(Bl(d));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Dc.bind(e),t.then(e,e)),r.state.loading|=4,r.instance=h,Lt(h);return}h=t.ownerDocument||t,l=Gg(l),(d=Pn.get(d))&&uh(l,d),h=h.createElement("link"),Lt(h);var y=h;y._p=new Promise(function(N,z){y.onload=N,y.onerror=z}),Qt(h,"link",l),r.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Dc.bind(e),t.addEventListener("load",r),t.addEventListener("error",r))}}var hh=0;function Lv(e,t){return e.stylesheets&&e.count===0&&Uc(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var l=setTimeout(function(){if(e.stylesheets&&Uc(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&hh===0&&(hh=62500*mv());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Uc(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>hh?50:800)+t);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Dc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ic=null;function Uc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ic=new Map,t.forEach(Dv,e),Ic=null,Dc.call(e))}function Dv(e,t){if(!(t.state.loading&4)){var r=Ic.get(e);if(r)var l=r.get(null);else{r=new Map,Ic.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var y=d[h];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(r.set(y.dataset.precedence,y),l=y)}l&&r.set(null,l)}d=t.instance,y=d.getAttribute("data-precedence"),h=r.get(y)||l,h===l&&r.set(null,d),r.set(y,d),this.count++,l=Dc.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var Hl={$$typeof:G,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function Iv(e,t,r,l,d,h,y,N,z){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ds(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ds(0),this.hiddenUpdates=ds(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Yg(e,t,r,l,d,h,y,N,z,Y,ne,oe){return e=new Iv(e,t,r,y,z,Y,ne,oe,N),t=1,h===!0&&(t|=24),h=jn(3,null,null,t),e.current=h,h.stateNode=e,t=Fu(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:l,isDehydrated:r,cache:t},Ku(h),e}function Kg(e){return e?(e=ui,e):ui}function Xg(e,t,r,l,d,h){d=Kg(d),l.context===null?l.context=d:l.pendingContext=d,l=Rr(t),l.payload={element:r},h=h===void 0?null:h,h!==null&&(l.callback=h),r=Mr(e,l,t),r!==null&&(pn(r,e,t),bl(r,e,t))}function Jg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function fh(e,t){Jg(e,t),(e=e.alternate)&&Jg(e,t)}function Qg(e){if(e.tag===13||e.tag===31){var t=va(e,67108864);t!==null&&pn(t,e,67108864),fh(e,67108864)}}function Zg(e){if(e.tag===13||e.tag===31){var t=Cn();t=oa(t);var r=va(e,t);r!==null&&pn(r,e,t),fh(e,t)}}var zc=!0;function Uv(e,t,r,l){var d=B.T;B.T=null;var h=ie.p;try{ie.p=2,mh(e,t,r,l)}finally{ie.p=h,B.T=d}}function zv(e,t,r,l){var d=B.T;B.T=null;var h=ie.p;try{ie.p=8,mh(e,t,r,l)}finally{ie.p=h,B.T=d}}function mh(e,t,r,l){if(zc){var d=gh(l);if(d===null)eh(e,t,l,Bc,r),tp(e,l);else if(Pv(d,e,t,r,l))l.stopPropagation();else if(tp(e,l),t&4&&-1<Bv.indexOf(e)){for(;d!==null;){var h=An(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var y=cs(h.pendingLanes);if(y!==0){var N=h;for(N.pendingLanes|=2,N.entangledLanes|=2;y;){var z=1<<31-Rt(y);N.entanglements[1]|=z,y&=~z}Cs(h),(tt&6)===0&&(wc=me()+500,Dl(0))}}break;case 31:case 13:N=va(h,2),N!==null&&pn(N,h,2),Nc(),fh(h,2)}if(h=gh(l),h===null&&eh(e,t,l,Bc,r),h===d)break;d=h}d!==null&&l.stopPropagation()}else eh(e,t,l,null,r)}}function gh(e){return e=Rn(e),ph(e)}var Bc=null;function ph(e){if(Bc=null,e=ms(e),e!==null){var t=f(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=m(t),e!==null)return e;e=null}else if(r===31){if(e=p(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Bc=e,null}function ep(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ce()){case le:return 2;case Ue:return 8;case nt:case ls:return 32;case qt:return 268435456;default:return 32}default:return 32}}var xh=!1,Gr=null,$r=null,Fr=null,Vl=new Map,Gl=new Map,qr=[],Bv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tp(e,t){switch(e){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Vl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(t.pointerId)}}function $l(e,t,r,l,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:l,nativeEvent:h,targetContainers:[d]},t!==null&&(t=An(t),t!==null&&Qg(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Pv(e,t,r,l,d){switch(t){case"focusin":return Gr=$l(Gr,e,t,r,l,d),!0;case"dragenter":return $r=$l($r,e,t,r,l,d),!0;case"mouseover":return Fr=$l(Fr,e,t,r,l,d),!0;case"pointerover":var h=d.pointerId;return Vl.set(h,$l(Vl.get(h)||null,e,t,r,l,d)),!0;case"gotpointercapture":return h=d.pointerId,Gl.set(h,$l(Gl.get(h)||null,e,t,r,l,d)),!0}return!1}function np(e){var t=ms(e.target);if(t!==null){var r=f(t);if(r!==null){if(t=r.tag,t===13){if(t=m(r),t!==null){e.blockedOn=t,Fn(e.priority,function(){Zg(r)});return}}else if(t===31){if(t=p(r),t!==null){e.blockedOn=t,Fn(e.priority,function(){Zg(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=gh(e.nativeEvent);if(r===null){r=e.nativeEvent;var l=new r.constructor(r.type,r);sl=l,r.target.dispatchEvent(l),sl=null}else return t=An(r),t!==null&&Qg(t),e.blockedOn=r,!1;t.shift()}return!0}function sp(e,t,r){Pc(e)&&r.delete(t)}function Hv(){xh=!1,Gr!==null&&Pc(Gr)&&(Gr=null),$r!==null&&Pc($r)&&($r=null),Fr!==null&&Pc(Fr)&&(Fr=null),Vl.forEach(sp),Gl.forEach(sp)}function Hc(e,t){e.blockedOn===t&&(e.blockedOn=null,xh||(xh=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Hv)))}var Vc=null;function rp(e){Vc!==e&&(Vc=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Vc===e&&(Vc=null);for(var t=0;t<e.length;t+=3){var r=e[t],l=e[t+1],d=e[t+2];if(typeof l!="function"){if(ph(l||r)===null)continue;break}var h=An(r);h!==null&&(e.splice(t,3),t-=3,gd(h,{pending:!0,data:d,method:r.method,action:l},l,d))}}))}function Li(e){function t(z){return Hc(z,e)}Gr!==null&&Hc(Gr,e),$r!==null&&Hc($r,e),Fr!==null&&Hc(Fr,e),Vl.forEach(t),Gl.forEach(t);for(var r=0;r<qr.length;r++){var l=qr[r];l.blockedOn===e&&(l.blockedOn=null)}for(;0<qr.length&&(r=qr[0],r.blockedOn===null);)np(r),r.blockedOn===null&&qr.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var d=r[l],h=r[l+1],y=d[Gt]||null;if(typeof h=="function")y||rp(r);else if(y){var N=null;if(h&&h.hasAttribute("formAction")){if(d=h,y=h[Gt]||null)N=y.formAction;else if(ph(d)!==null)continue}else N=y.action;typeof N=="function"?r[l+1]=N:(r.splice(l,3),l-=3),rp(r)}}}function ap(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(y){return d=y})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function yh(e){this._internalRoot=e}Gc.prototype.render=yh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var r=t.current,l=Cn();Xg(r,l,e,t,null,null)},Gc.prototype.unmount=yh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xg(e.current,2,null,e,null,null),Nc(),t[hs]=null}};function Gc(e){this._internalRoot=e}Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=No();e={blockedOn:null,target:e,priority:t};for(var r=0;r<qr.length&&t!==0&&t<qr[r].priority;r++);qr.splice(r,0,e),r===0&&np(e)}};var ip=n.version;if(ip!=="19.2.3")throw Error(o(527,ip,"19.2.3"));ie.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=b(t),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var Vv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{kt=$c.inject(Vv),Wt=$c}catch{}}return ql.createRoot=function(e,t){if(!u(e))throw Error(o(299));var r=!1,l="",d=fm,h=mm,y=gm;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError)),t=Yg(e,1,!1,null,null,r,l,null,d,h,y,ap),e[hs]=t.current,Zd(e),new yh(t)},ql.hydrateRoot=function(e,t,r){if(!u(e))throw Error(o(299));var l=!1,d="",h=fm,y=mm,N=gm,z=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(N=r.onRecoverableError),r.formState!==void 0&&(z=r.formState)),t=Yg(e,1,!0,t,r??null,l,d,z,h,y,N,ap),t.context=Kg(null),r=t.current,l=Cn(),l=oa(l),d=Rr(l),d.callback=null,Mr(r,d,l),r=l,t.current.lanes=r,la(t,r),Cs(t),e[hs]=t.current,Zd(e),new Gc(t)},ql.version="19.2.3",ql}var pp;function Jv(){if(pp)return wh.exports;pp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),wh.exports=Xv(),wh.exports}var Qv=Jv();const Zv=ef(Qv);var xp="popstate";function e1(a={}){function n(o,u){let{pathname:f,search:m,hash:p}=o.location;return Ph("",{pathname:f,search:m,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(o,u){return typeof u=="string"?u:so(u)}return n1(n,i,null,a)}function bt(a,n){if(a===!1||a===null||typeof a>"u")throw new Error(n)}function as(a,n){if(!a){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function t1(){return Math.random().toString(36).substring(2,10)}function yp(a,n){return{usr:a.state,key:a.key,idx:n}}function Ph(a,n,i=null,o){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof n=="string"?Vi(n):n,state:i,key:n&&n.key||o||t1()}}function so({pathname:a="/",search:n="",hash:i=""}){return n&&n!=="?"&&(a+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(a+=i.charAt(0)==="#"?i:"#"+i),a}function Vi(a){let n={};if(a){let i=a.indexOf("#");i>=0&&(n.hash=a.substring(i),a=a.substring(0,i));let o=a.indexOf("?");o>=0&&(n.search=a.substring(o),a=a.substring(0,o)),a&&(n.pathname=a)}return n}function n1(a,n,i,o={}){let{window:u=document.defaultView,v5Compat:f=!1}=o,m=u.history,p="POP",x=null,b=_();b==null&&(b=0,m.replaceState({...m.state,idx:b},""));function _(){return(m.state||{idx:null}).idx}function j(){p="POP";let O=_(),V=O==null?null:O-b;b=O,x&&x({action:p,location:k.location,delta:V})}function S(O,V){p="PUSH";let F=Ph(k.location,O,V);b=_()+1;let G=yp(F,b),te=k.createHref(F);try{m.pushState(G,"",te)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;u.location.assign(te)}f&&x&&x({action:p,location:k.location,delta:1})}function U(O,V){p="REPLACE";let F=Ph(k.location,O,V);b=_();let G=yp(F,b),te=k.createHref(F);m.replaceState(G,"",te),f&&x&&x({action:p,location:k.location,delta:0})}function E(O){return s1(O)}let k={get action(){return p},get location(){return a(u,m)},listen(O){if(x)throw new Error("A history only accepts one active listener");return u.addEventListener(xp,j),x=O,()=>{u.removeEventListener(xp,j),x=null}},createHref(O){return n(u,O)},createURL:E,encodeLocation(O){let V=E(O);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:S,replace:U,go(O){return m.go(O)}};return k}function s1(a,n=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),bt(i,"No window.location.(origin|href) available to create URL");let o=typeof a=="string"?a:so(a);return o=o.replace(/ $/,"%20"),!n&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function jx(a,n,i="/"){return r1(a,n,i,!1)}function r1(a,n,i,o){let u=typeof n=="string"?Vi(n):n,f=dr(u.pathname||"/",i);if(f==null)return null;let m=Nx(a);a1(m);let p=null;for(let x=0;p==null&&x<m.length;++x){let b=p1(f);p=m1(m[x],b,o)}return p}function Nx(a,n=[],i=[],o="",u=!1){let f=(m,p,x=u,b)=>{let _={relativePath:b===void 0?m.path||"":b,caseSensitive:m.caseSensitive===!0,childrenIndex:p,route:m};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(o)&&x)return;bt(_.relativePath.startsWith(o),`Absolute route path "${_.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(o.length)}let j=cr([o,_.relativePath]),S=i.concat(_);m.children&&m.children.length>0&&(bt(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${j}".`),Nx(m.children,n,S,j,x)),!(m.path==null&&!m.index)&&n.push({path:j,score:h1(j,m.index),routesMeta:S})};return a.forEach((m,p)=>{if(m.path===""||!m.path?.includes("?"))f(m,p);else for(let x of _x(m.path))f(m,p,!0,x)}),n}function _x(a){let n=a.split("/");if(n.length===0)return[];let[i,...o]=n,u=i.endsWith("?"),f=i.replace(/\?$/,"");if(o.length===0)return u?[f,""]:[f];let m=_x(o.join("/")),p=[];return p.push(...m.map(x=>x===""?f:[f,x].join("/"))),u&&p.push(...m),p.map(x=>a.startsWith("/")&&x===""?"/":x)}function a1(a){a.sort((n,i)=>n.score!==i.score?i.score-n.score:f1(n.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var i1=/^:[\w-]+$/,l1=3,o1=2,c1=1,u1=10,d1=-2,bp=a=>a==="*";function h1(a,n){let i=a.split("/"),o=i.length;return i.some(bp)&&(o+=d1),n&&(o+=o1),i.filter(u=>!bp(u)).reduce((u,f)=>u+(i1.test(f)?l1:f===""?c1:u1),o)}function f1(a,n){return a.length===n.length&&a.slice(0,-1).every((o,u)=>o===n[u])?a[a.length-1]-n[n.length-1]:0}function m1(a,n,i=!1){let{routesMeta:o}=a,u={},f="/",m=[];for(let p=0;p<o.length;++p){let x=o[p],b=p===o.length-1,_=f==="/"?n:n.slice(f.length)||"/",j=lu({path:x.relativePath,caseSensitive:x.caseSensitive,end:b},_),S=x.route;if(!j&&b&&i&&!o[o.length-1].route.index&&(j=lu({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},_)),!j)return null;Object.assign(u,j.params),m.push({params:u,pathname:cr([f,j.pathname]),pathnameBase:v1(cr([f,j.pathnameBase])),route:S}),j.pathnameBase!=="/"&&(f=cr([f,j.pathnameBase]))}return m}function lu(a,n){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[i,o]=g1(a.path,a.caseSensitive,a.end),u=n.match(i);if(!u)return null;let f=u[0],m=f.replace(/(.)\/+$/,"$1"),p=u.slice(1);return{params:o.reduce((b,{paramName:_,isOptional:j},S)=>{if(_==="*"){let E=p[S]||"";m=f.slice(0,f.length-E.length).replace(/(.)\/+$/,"$1")}const U=p[S];return j&&!U?b[_]=void 0:b[_]=(U||"").replace(/%2F/g,"/"),b},{}),pathname:f,pathnameBase:m,pattern:a}}function g1(a,n=!1,i=!0){as(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let o=[],u="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,p,x)=>(o.push({paramName:p,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(o.push({paramName:"*"}),u+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?u+="\\/*$":a!==""&&a!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,n?void 0:"i"),o]}function p1(a){try{return a.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return as(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),a}}function dr(a,n){if(n==="/")return a;if(!a.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,o=a.charAt(i);return o&&o!=="/"?null:a.slice(i)||"/"}var Sx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,x1=a=>Sx.test(a);function y1(a,n="/"){let{pathname:i,search:o="",hash:u=""}=typeof a=="string"?Vi(a):a,f;if(i)if(x1(i))f=i;else{if(i.includes("//")){let m=i;i=i.replace(/\/\/+/g,"/"),as(!1,`Pathnames cannot have embedded double slashes - normalizing ${m} -> ${i}`)}i.startsWith("/")?f=vp(i.substring(1),"/"):f=vp(i,n)}else f=n;return{pathname:f,search:w1(o),hash:j1(u)}}function vp(a,n){let i=n.replace(/\/+$/,"").split("/");return a.split("/").forEach(u=>{u===".."?i.length>1&&i.pop():u!=="."&&i.push(u)}),i.length>1?i.join("/"):"/"}function Sh(a,n,i,o){return`Cannot include a '${a}' character in a manually specified \`to.${n}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function b1(a){return a.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function kx(a){let n=b1(a);return n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase)}function Cx(a,n,i,o=!1){let u;typeof a=="string"?u=Vi(a):(u={...a},bt(!u.pathname||!u.pathname.includes("?"),Sh("?","pathname","search",u)),bt(!u.pathname||!u.pathname.includes("#"),Sh("#","pathname","hash",u)),bt(!u.search||!u.search.includes("#"),Sh("#","search","hash",u)));let f=a===""||u.pathname==="",m=f?"/":u.pathname,p;if(m==null)p=i;else{let j=n.length-1;if(!o&&m.startsWith("..")){let S=m.split("/");for(;S[0]==="..";)S.shift(),j-=1;u.pathname=S.join("/")}p=j>=0?n[j]:"/"}let x=y1(u,p),b=m&&m!=="/"&&m.endsWith("/"),_=(f||m===".")&&i.endsWith("/");return!x.pathname.endsWith("/")&&(b||_)&&(x.pathname+="/"),x}var cr=a=>a.join("/").replace(/\/\/+/g,"/"),v1=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),w1=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,j1=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a,N1=class{constructor(a,n,i,o=!1){this.status=a,this.statusText=n||"",this.internal=o,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function _1(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function S1(a){return a.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Ex=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Tx(a,n){let i=a;if(typeof i!="string"||!Sx.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let o=i,u=!1;if(Ex)try{let f=new URL(window.location.href),m=i.startsWith("//")?new URL(f.protocol+i):new URL(i),p=dr(m.pathname,n);m.origin===f.origin&&p!=null?i=p+m.search+m.hash:u=!0}catch{as(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:u,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ax=["POST","PUT","PATCH","DELETE"];new Set(Ax);var k1=["GET",...Ax];new Set(k1);var Gi=w.createContext(null);Gi.displayName="DataRouter";var xu=w.createContext(null);xu.displayName="DataRouterState";var C1=w.createContext(!1),Rx=w.createContext({isTransitioning:!1});Rx.displayName="ViewTransition";var E1=w.createContext(new Map);E1.displayName="Fetchers";var T1=w.createContext(null);T1.displayName="Await";var Gn=w.createContext(null);Gn.displayName="Navigation";var lo=w.createContext(null);lo.displayName="Location";var Ds=w.createContext({outlet:null,matches:[],isDataRoute:!1});Ds.displayName="Route";var nf=w.createContext(null);nf.displayName="RouteError";var Mx="REACT_ROUTER_ERROR",A1="REDIRECT",R1="ROUTE_ERROR_RESPONSE";function M1(a){if(a.startsWith(`${Mx}:${A1}:{`))try{let n=JSON.parse(a.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function O1(a){if(a.startsWith(`${Mx}:${R1}:{`))try{let n=JSON.parse(a.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new N1(n.status,n.statusText,n.data)}catch{}}function L1(a,{relative:n}={}){bt(oo(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=w.useContext(Gn),{hash:u,pathname:f,search:m}=co(a,{relative:n}),p=f;return i!=="/"&&(p=f==="/"?i:cr([i,f])),o.createHref({pathname:p,search:m,hash:u})}function oo(){return w.useContext(lo)!=null}function mr(){return bt(oo(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(lo).location}var Ox="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Lx(a){w.useContext(Gn).static||w.useLayoutEffect(a)}function Is(){let{isDataRoute:a}=w.useContext(Ds);return a?W1():D1()}function D1(){bt(oo(),"useNavigate() may be used only in the context of a <Router> component.");let a=w.useContext(Gi),{basename:n,navigator:i}=w.useContext(Gn),{matches:o}=w.useContext(Ds),{pathname:u}=mr(),f=JSON.stringify(kx(o)),m=w.useRef(!1);return Lx(()=>{m.current=!0}),w.useCallback((x,b={})=>{if(as(m.current,Ox),!m.current)return;if(typeof x=="number"){i.go(x);return}let _=Cx(x,JSON.parse(f),u,b.relative==="path");a==null&&n!=="/"&&(_.pathname=_.pathname==="/"?n:cr([n,_.pathname])),(b.replace?i.replace:i.push)(_,b.state,b)},[n,i,f,u,a])}w.createContext(null);function sf(){let{matches:a}=w.useContext(Ds),n=a[a.length-1];return n?n.params:{}}function co(a,{relative:n}={}){let{matches:i}=w.useContext(Ds),{pathname:o}=mr(),u=JSON.stringify(kx(i));return w.useMemo(()=>Cx(a,JSON.parse(u),o,n==="path"),[a,u,o,n])}function I1(a,n){return Dx(a,n)}function Dx(a,n,i,o,u){bt(oo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=w.useContext(Gn),{matches:m}=w.useContext(Ds),p=m[m.length-1],x=p?p.params:{},b=p?p.pathname:"/",_=p?p.pathnameBase:"/",j=p&&p.route;{let F=j&&j.path||"";Ux(b,!j||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let S=mr(),U;if(n){let F=typeof n=="string"?Vi(n):n;bt(_==="/"||F.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${F.pathname}" was given in the \`location\` prop.`),U=F}else U=S;let E=U.pathname||"/",k=E;if(_!=="/"){let F=_.replace(/^\//,"").split("/");k="/"+E.replace(/^\//,"").split("/").slice(F.length).join("/")}let O=jx(a,{pathname:k});as(j||O!=null,`No routes matched location "${U.pathname}${U.search}${U.hash}" `),as(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${U.pathname}${U.search}${U.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=H1(O&&O.map(F=>Object.assign({},F,{params:Object.assign({},x,F.params),pathname:cr([_,f.encodeLocation?f.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?_:cr([_,f.encodeLocation?f.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),m,i,o,u);return n&&V?w.createElement(lo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...U},navigationType:"POP"}},V):V}function U1(){let a=q1(),n=_1(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),i=a instanceof Error?a.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},f={padding:"2px 4px",backgroundColor:o},m=null;return console.error("Error handled by React Router default ErrorBoundary:",a),m=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:f},"ErrorBoundary")," or"," ",w.createElement("code",{style:f},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},n),i?w.createElement("pre",{style:u},i):null,m)}var z1=w.createElement(U1,null),Ix=class extends w.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,n){return n.location!==a.location||n.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:n.error,location:n.location,revalidation:a.revalidation||n.revalidation}}componentDidCatch(a,n){this.props.onError?this.props.onError(a,n):console.error("React Router caught the following error during render",a)}render(){let a=this.state.error;if(this.context&&typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){const i=O1(a.digest);i&&(a=i)}let n=a!==void 0?w.createElement(Ds.Provider,{value:this.props.routeContext},w.createElement(nf.Provider,{value:a,children:this.props.component})):this.props.children;return this.context?w.createElement(B1,{error:a},n):n}};Ix.contextType=C1;var kh=new WeakMap;function B1({children:a,error:n}){let{basename:i}=w.useContext(Gn);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let o=M1(n.digest);if(o){let u=kh.get(n);if(u)throw u;let f=Tx(o.location,i);if(Ex&&!kh.get(n))if(f.isExternal||o.reloadDocument)window.location.href=f.absoluteURL||f.to;else{const m=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(f.to,{replace:o.replace}));throw kh.set(n,m),m}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${f.absoluteURL||f.to}`})}}return a}function P1({routeContext:a,match:n,children:i}){let o=w.useContext(Gi);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Ds.Provider,{value:a},i)}function H1(a,n=[],i=null,o=null,u=null){if(a==null){if(!i)return null;if(i.errors)a=i.matches;else if(n.length===0&&!i.initialized&&i.matches.length>0)a=i.matches;else return null}let f=a,m=i?.errors;if(m!=null){let _=f.findIndex(j=>j.route.id&&m?.[j.route.id]!==void 0);bt(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),f=f.slice(0,Math.min(f.length,_+1))}let p=!1,x=-1;if(i)for(let _=0;_<f.length;_++){let j=f[_];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(x=_),j.route.id){let{loaderData:S,errors:U}=i,E=j.route.loader&&!S.hasOwnProperty(j.route.id)&&(!U||U[j.route.id]===void 0);if(j.route.lazy||E){p=!0,x>=0?f=f.slice(0,x+1):f=[f[0]];break}}}let b=i&&o?(_,j)=>{o(_,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:S1(i.matches),errorInfo:j})}:void 0;return f.reduceRight((_,j,S)=>{let U,E=!1,k=null,O=null;i&&(U=m&&j.route.id?m[j.route.id]:void 0,k=j.route.errorElement||z1,p&&(x<0&&S===0?(Ux("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,O=null):x===S&&(E=!0,O=j.route.hydrateFallbackElement||null)));let V=n.concat(f.slice(0,S+1)),F=()=>{let G;return U?G=k:E?G=O:j.route.Component?G=w.createElement(j.route.Component,null):j.route.element?G=j.route.element:G=_,w.createElement(P1,{match:j,routeContext:{outlet:_,matches:V,isDataRoute:i!=null},children:G})};return i&&(j.route.ErrorBoundary||j.route.errorElement||S===0)?w.createElement(Ix,{location:i.location,revalidation:i.revalidation,component:k,error:U,children:F(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:b}):F()},null)}function rf(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function V1(a){let n=w.useContext(Gi);return bt(n,rf(a)),n}function G1(a){let n=w.useContext(xu);return bt(n,rf(a)),n}function $1(a){let n=w.useContext(Ds);return bt(n,rf(a)),n}function af(a){let n=$1(a),i=n.matches[n.matches.length-1];return bt(i.route.id,`${a} can only be used on routes that contain a unique "id"`),i.route.id}function F1(){return af("useRouteId")}function q1(){let a=w.useContext(nf),n=G1("useRouteError"),i=af("useRouteError");return a!==void 0?a:n.errors?.[i]}function W1(){let{router:a}=V1("useNavigate"),n=af("useNavigate"),i=w.useRef(!1);return Lx(()=>{i.current=!0}),w.useCallback(async(u,f={})=>{as(i.current,Ox),i.current&&(typeof u=="number"?await a.navigate(u):await a.navigate(u,{fromRouteId:n,...f}))},[a,n])}var wp={};function Ux(a,n,i){!n&&!wp[a]&&(wp[a]=!0,as(!1,i))}w.memo(Y1);function Y1({routes:a,future:n,state:i,onError:o}){return Dx(a,void 0,i,o,n)}function ln(a){bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function K1({basename:a="/",children:n=null,location:i,navigationType:o="POP",navigator:u,static:f=!1,unstable_useTransitions:m}){bt(!oo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=a.replace(/^\/*/,"/"),x=w.useMemo(()=>({basename:p,navigator:u,static:f,unstable_useTransitions:m,future:{}}),[p,u,f,m]);typeof i=="string"&&(i=Vi(i));let{pathname:b="/",search:_="",hash:j="",state:S=null,key:U="default"}=i,E=w.useMemo(()=>{let k=dr(b,p);return k==null?null:{location:{pathname:k,search:_,hash:j,state:S,key:U},navigationType:o}},[p,b,_,j,S,U,o]);return as(E!=null,`<Router basename="${p}"> is not able to match the URL "${b}${_}${j}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:w.createElement(Gn.Provider,{value:x},w.createElement(lo.Provider,{children:n,value:E}))}function X1({children:a,location:n}){return I1(Hh(a),n)}function Hh(a,n=[]){let i=[];return w.Children.forEach(a,(o,u)=>{if(!w.isValidElement(o))return;let f=[...n,u];if(o.type===w.Fragment){i.push.apply(i,Hh(o.props.children,f));return}bt(o.type===ln,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bt(!o.props.index||!o.props.children,"An index route cannot have child routes.");let m={id:o.props.id||f.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(m.children=Hh(o.props.children,f)),i.push(m)}),i}var eu="get",tu="application/x-www-form-urlencoded";function yu(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function J1(a){return yu(a)&&a.tagName.toLowerCase()==="button"}function Q1(a){return yu(a)&&a.tagName.toLowerCase()==="form"}function Z1(a){return yu(a)&&a.tagName.toLowerCase()==="input"}function e2(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function t2(a,n){return a.button===0&&(!n||n==="_self")&&!e2(a)}var Fc=null;function n2(){if(Fc===null)try{new FormData(document.createElement("form"),0),Fc=!1}catch{Fc=!0}return Fc}var s2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ch(a){return a!=null&&!s2.has(a)?(as(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${tu}"`),null):a}function r2(a,n){let i,o,u,f,m;if(Q1(a)){let p=a.getAttribute("action");o=p?dr(p,n):null,i=a.getAttribute("method")||eu,u=Ch(a.getAttribute("enctype"))||tu,f=new FormData(a)}else if(J1(a)||Z1(a)&&(a.type==="submit"||a.type==="image")){let p=a.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=a.getAttribute("formaction")||p.getAttribute("action");if(o=x?dr(x,n):null,i=a.getAttribute("formmethod")||p.getAttribute("method")||eu,u=Ch(a.getAttribute("formenctype"))||Ch(p.getAttribute("enctype"))||tu,f=new FormData(p,a),!n2()){let{name:b,type:_,value:j}=a;if(_==="image"){let S=b?`${b}.`:"";f.append(`${S}x`,"0"),f.append(`${S}y`,"0")}else b&&f.append(b,j)}}else{if(yu(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=eu,o=null,u=tu,m=a}return f&&u==="text/plain"&&(m=f,f=void 0),{action:o,method:i.toLowerCase(),encType:u,formData:f,body:m}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lf(a,n){if(a===!1||a===null||typeof a>"u")throw new Error(n)}function a2(a,n,i){let o=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return o.pathname==="/"?o.pathname=`_root.${i}`:n&&dr(o.pathname,n)==="/"?o.pathname=`${n.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function i2(a,n){if(a.id in n)return n[a.id];try{let i=await import(a.module);return n[a.id]=i,i}catch(i){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function l2(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function o2(a,n,i){let o=await Promise.all(a.map(async u=>{let f=n.routes[u.route.id];if(f){let m=await i2(f,i);return m.links?m.links():[]}return[]}));return h2(o.flat(1).filter(l2).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function jp(a,n,i,o,u,f){let m=(x,b)=>i[b]?x.route.id!==i[b].route.id:!0,p=(x,b)=>i[b].pathname!==x.pathname||i[b].route.path?.endsWith("*")&&i[b].params["*"]!==x.params["*"];return f==="assets"?n.filter((x,b)=>m(x,b)||p(x,b)):f==="data"?n.filter((x,b)=>{let _=o.routes[x.route.id];if(!_||!_.hasLoader)return!1;if(m(x,b)||p(x,b))return!0;if(x.route.shouldRevalidate){let j=x.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof j=="boolean")return j}return!0}):[]}function c2(a,n,{includeHydrateFallback:i}={}){return u2(a.map(o=>{let u=n.routes[o.route.id];if(!u)return[];let f=[u.module];return u.clientActionModule&&(f=f.concat(u.clientActionModule)),u.clientLoaderModule&&(f=f.concat(u.clientLoaderModule)),i&&u.hydrateFallbackModule&&(f=f.concat(u.hydrateFallbackModule)),u.imports&&(f=f.concat(u.imports)),f}).flat(1))}function u2(a){return[...new Set(a)]}function d2(a){let n={},i=Object.keys(a).sort();for(let o of i)n[o]=a[o];return n}function h2(a,n){let i=new Set;return new Set(n),a.reduce((o,u)=>{let f=JSON.stringify(d2(u));return i.has(f)||(i.add(f),o.push({key:f,link:u})),o},[])}function zx(){let a=w.useContext(Gi);return lf(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function f2(){let a=w.useContext(xu);return lf(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var of=w.createContext(void 0);of.displayName="FrameworkContext";function Bx(){let a=w.useContext(of);return lf(a,"You must render this element inside a <HydratedRouter> element"),a}function m2(a,n){let i=w.useContext(of),[o,u]=w.useState(!1),[f,m]=w.useState(!1),{onFocus:p,onBlur:x,onMouseEnter:b,onMouseLeave:_,onTouchStart:j}=n,S=w.useRef(null);w.useEffect(()=>{if(a==="render"&&m(!0),a==="viewport"){let k=V=>{V.forEach(F=>{m(F.isIntersecting)})},O=new IntersectionObserver(k,{threshold:.5});return S.current&&O.observe(S.current),()=>{O.disconnect()}}},[a]),w.useEffect(()=>{if(o){let k=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(k)}}},[o]);let U=()=>{u(!0)},E=()=>{u(!1),m(!1)};return i?a!=="intent"?[f,S,{}]:[f,S,{onFocus:Wl(p,U),onBlur:Wl(x,E),onMouseEnter:Wl(b,U),onMouseLeave:Wl(_,E),onTouchStart:Wl(j,U)}]:[!1,S,{}]}function Wl(a,n){return i=>{a&&a(i),i.defaultPrevented||n(i)}}function g2({page:a,...n}){let{router:i}=zx(),o=w.useMemo(()=>jx(i.routes,a,i.basename),[i.routes,a,i.basename]);return o?w.createElement(x2,{page:a,matches:o,...n}):null}function p2(a){let{manifest:n,routeModules:i}=Bx(),[o,u]=w.useState([]);return w.useEffect(()=>{let f=!1;return o2(a,n,i).then(m=>{f||u(m)}),()=>{f=!0}},[a,n,i]),o}function x2({page:a,matches:n,...i}){let o=mr(),{manifest:u,routeModules:f}=Bx(),{basename:m}=zx(),{loaderData:p,matches:x}=f2(),b=w.useMemo(()=>jp(a,n,x,u,o,"data"),[a,n,x,u,o]),_=w.useMemo(()=>jp(a,n,x,u,o,"assets"),[a,n,x,u,o]),j=w.useMemo(()=>{if(a===o.pathname+o.search+o.hash)return[];let E=new Set,k=!1;if(n.forEach(V=>{let F=u.routes[V.route.id];!F||!F.hasLoader||(!b.some(G=>G.route.id===V.route.id)&&V.route.id in p&&f[V.route.id]?.shouldRevalidate||F.hasClientLoader?k=!0:E.add(V.route.id))}),E.size===0)return[];let O=a2(a,m,"data");return k&&E.size>0&&O.searchParams.set("_routes",n.filter(V=>E.has(V.route.id)).map(V=>V.route.id).join(",")),[O.pathname+O.search]},[m,p,o,u,b,n,a,f]),S=w.useMemo(()=>c2(_,u),[_,u]),U=p2(_);return w.createElement(w.Fragment,null,j.map(E=>w.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...i})),S.map(E=>w.createElement("link",{key:E,rel:"modulepreload",href:E,...i})),U.map(({key:E,link:k})=>w.createElement("link",{key:E,nonce:i.nonce,...k})))}function y2(...a){return n=>{a.forEach(i=>{typeof i=="function"?i(n):i!=null&&(i.current=n)})}}var b2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{b2&&(window.__reactRouterVersion="7.11.0")}catch{}function v2({basename:a,children:n,unstable_useTransitions:i,window:o}){let u=w.useRef();u.current==null&&(u.current=e1({window:o,v5Compat:!0}));let f=u.current,[m,p]=w.useState({action:f.action,location:f.location}),x=w.useCallback(b=>{i===!1?p(b):w.startTransition(()=>p(b))},[i]);return w.useLayoutEffect(()=>f.listen(x),[f,x]),w.createElement(K1,{basename:a,children:n,location:m.location,navigationType:m.action,navigator:f,unstable_useTransitions:i})}var Px=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mt=w.forwardRef(function({onClick:n,discover:i="render",prefetch:o="none",relative:u,reloadDocument:f,replace:m,state:p,target:x,to:b,preventScrollReset:_,viewTransition:j,unstable_defaultShouldRevalidate:S,...U},E){let{basename:k,unstable_useTransitions:O}=w.useContext(Gn),V=typeof b=="string"&&Px.test(b),F=Tx(b,k);b=F.to;let G=L1(b,{relative:u}),[te,ce,se]=m2(o,U),T=_2(b,{replace:m,state:p,target:x,preventScrollReset:_,relative:u,viewTransition:j,unstable_defaultShouldRevalidate:S,unstable_useTransitions:O});function C(A){n&&n(A),A.defaultPrevented||T(A)}let D=w.createElement("a",{...U,...se,href:F.absoluteURL||G,onClick:F.isExternal||f?n:C,ref:y2(E,ce),target:x,"data-discover":!V&&i==="render"?"true":void 0});return te&&!V?w.createElement(w.Fragment,null,D,w.createElement(g2,{page:G})):D});mt.displayName="Link";var w2=w.forwardRef(function({"aria-current":n="page",caseSensitive:i=!1,className:o="",end:u=!1,style:f,to:m,viewTransition:p,children:x,...b},_){let j=co(m,{relative:b.relative}),S=mr(),U=w.useContext(xu),{navigator:E,basename:k}=w.useContext(Gn),O=U!=null&&T2(j)&&p===!0,V=E.encodeLocation?E.encodeLocation(j).pathname:j.pathname,F=S.pathname,G=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;i||(F=F.toLowerCase(),G=G?G.toLowerCase():null,V=V.toLowerCase()),G&&k&&(G=dr(G,k)||G);const te=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let ce=F===V||!u&&F.startsWith(V)&&F.charAt(te)==="/",se=G!=null&&(G===V||!u&&G.startsWith(V)&&G.charAt(V.length)==="/"),T={isActive:ce,isPending:se,isTransitioning:O},C=ce?n:void 0,D;typeof o=="function"?D=o(T):D=[o,ce?"active":null,se?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let A=typeof f=="function"?f(T):f;return w.createElement(mt,{...b,"aria-current":C,className:D,ref:_,style:A,to:m,viewTransition:p},typeof x=="function"?x(T):x)});w2.displayName="NavLink";var j2=w.forwardRef(({discover:a="render",fetcherKey:n,navigate:i,reloadDocument:o,replace:u,state:f,method:m=eu,action:p,onSubmit:x,relative:b,preventScrollReset:_,viewTransition:j,unstable_defaultShouldRevalidate:S,...U},E)=>{let{unstable_useTransitions:k}=w.useContext(Gn),O=C2(),V=E2(p,{relative:b}),F=m.toLowerCase()==="get"?"get":"post",G=typeof p=="string"&&Px.test(p),te=ce=>{if(x&&x(ce),ce.defaultPrevented)return;ce.preventDefault();let se=ce.nativeEvent.submitter,T=se?.getAttribute("formmethod")||m,C=()=>O(se||ce.currentTarget,{fetcherKey:n,method:T,navigate:i,replace:u,state:f,relative:b,preventScrollReset:_,viewTransition:j,unstable_defaultShouldRevalidate:S});k&&i!==!1?w.startTransition(()=>C()):C()};return w.createElement("form",{ref:E,method:F,action:V,onSubmit:o?x:te,...U,"data-discover":!G&&a==="render"?"true":void 0})});j2.displayName="Form";function N2(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Hx(a){let n=w.useContext(Gi);return bt(n,N2(a)),n}function _2(a,{target:n,replace:i,state:o,preventScrollReset:u,relative:f,viewTransition:m,unstable_defaultShouldRevalidate:p,unstable_useTransitions:x}={}){let b=Is(),_=mr(),j=co(a,{relative:f});return w.useCallback(S=>{if(t2(S,n)){S.preventDefault();let U=i!==void 0?i:so(_)===so(j),E=()=>b(a,{replace:U,state:o,preventScrollReset:u,relative:f,viewTransition:m,unstable_defaultShouldRevalidate:p});x?w.startTransition(()=>E()):E()}},[_,b,j,i,o,n,a,u,f,m,p,x])}var S2=0,k2=()=>`__${String(++S2)}__`;function C2(){let{router:a}=Hx("useSubmit"),{basename:n}=w.useContext(Gn),i=F1(),o=a.fetch,u=a.navigate;return w.useCallback(async(f,m={})=>{let{action:p,method:x,encType:b,formData:_,body:j}=r2(f,n);if(m.navigate===!1){let S=m.fetcherKey||k2();await o(S,i,m.action||p,{unstable_defaultShouldRevalidate:m.unstable_defaultShouldRevalidate,preventScrollReset:m.preventScrollReset,formData:_,body:j,formMethod:m.method||x,formEncType:m.encType||b,flushSync:m.flushSync})}else await u(m.action||p,{unstable_defaultShouldRevalidate:m.unstable_defaultShouldRevalidate,preventScrollReset:m.preventScrollReset,formData:_,body:j,formMethod:m.method||x,formEncType:m.encType||b,replace:m.replace,state:m.state,fromRouteId:i,flushSync:m.flushSync,viewTransition:m.viewTransition})},[o,u,n,i])}function E2(a,{relative:n}={}){let{basename:i}=w.useContext(Gn),o=w.useContext(Ds);bt(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),f={...co(a||".",{relative:n})},m=mr();if(a==null){f.search=m.search;let p=new URLSearchParams(f.search),x=p.getAll("index");if(x.some(_=>_==="")){p.delete("index"),x.filter(j=>j).forEach(j=>p.append("index",j));let _=p.toString();f.search=_?`?${_}`:""}}return(!a||a===".")&&u.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(f.pathname=f.pathname==="/"?i:cr([i,f.pathname])),so(f)}function T2(a,{relative:n}={}){let i=w.useContext(Rx);bt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Hx("useViewTransitionState"),u=co(a,{relative:n});if(!i.isTransitioning)return!1;let f=dr(i.currentLocation.pathname,o)||i.currentLocation.pathname,m=dr(i.nextLocation.pathname,o)||i.nextLocation.pathname;return lu(u.pathname,m)!=null||lu(u.pathname,f)!=null}var $i=wx();const Vx=ef($i),A2=()=>{};var Np={};const Gx=function(a){const n=[];let i=0;for(let o=0;o<a.length;o++){let u=a.charCodeAt(o);u<128?n[i++]=u:u<2048?(n[i++]=u>>6|192,n[i++]=u&63|128):(u&64512)===55296&&o+1<a.length&&(a.charCodeAt(o+1)&64512)===56320?(u=65536+((u&1023)<<10)+(a.charCodeAt(++o)&1023),n[i++]=u>>18|240,n[i++]=u>>12&63|128,n[i++]=u>>6&63|128,n[i++]=u&63|128):(n[i++]=u>>12|224,n[i++]=u>>6&63|128,n[i++]=u&63|128)}return n},R2=function(a){const n=[];let i=0,o=0;for(;i<a.length;){const u=a[i++];if(u<128)n[o++]=String.fromCharCode(u);else if(u>191&&u<224){const f=a[i++];n[o++]=String.fromCharCode((u&31)<<6|f&63)}else if(u>239&&u<365){const f=a[i++],m=a[i++],p=a[i++],x=((u&7)<<18|(f&63)<<12|(m&63)<<6|p&63)-65536;n[o++]=String.fromCharCode(55296+(x>>10)),n[o++]=String.fromCharCode(56320+(x&1023))}else{const f=a[i++],m=a[i++];n[o++]=String.fromCharCode((u&15)<<12|(f&63)<<6|m&63)}}return n.join("")},$x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,n){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let u=0;u<a.length;u+=3){const f=a[u],m=u+1<a.length,p=m?a[u+1]:0,x=u+2<a.length,b=x?a[u+2]:0,_=f>>2,j=(f&3)<<4|p>>4;let S=(p&15)<<2|b>>6,U=b&63;x||(U=64,m||(S=64)),o.push(i[_],i[j],i[S],i[U])}return o.join("")},encodeString(a,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(a):this.encodeByteArray(Gx(a),n)},decodeString(a,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(a):R2(this.decodeStringToByteArray(a,n))},decodeStringToByteArray(a,n){this.init_();const i=n?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let u=0;u<a.length;){const f=i[a.charAt(u++)],p=u<a.length?i[a.charAt(u)]:0;++u;const b=u<a.length?i[a.charAt(u)]:64;++u;const j=u<a.length?i[a.charAt(u)]:64;if(++u,f==null||p==null||b==null||j==null)throw new M2;const S=f<<2|p>>4;if(o.push(S),b!==64){const U=p<<4&240|b>>2;if(o.push(U),j!==64){const E=b<<6&192|j;o.push(E)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class M2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const O2=function(a){const n=Gx(a);return $x.encodeByteArray(n,!0)},ou=function(a){return O2(a).replace(/\./g,"")},Fx=function(a){try{return $x.decodeString(a,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};function L2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const D2=()=>L2().__FIREBASE_DEFAULTS__,I2=()=>{if(typeof process>"u"||typeof Np>"u")return;const a=Np.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},U2=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const n=a&&Fx(a[1]);return n&&JSON.parse(n)},cf=()=>{try{return A2()||D2()||I2()||U2()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},qx=a=>cf()?.emulatorHosts?.[a],Wx=a=>{const n=qx(a);if(!n)return;const i=n.lastIndexOf(":");if(i<=0||i+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);const o=parseInt(n.substring(i+1),10);return n[0]==="["?[n.substring(1,i-1),o]:[n.substring(0,i),o]},Yx=()=>cf()?.config,Kx=a=>cf()?.[`_${a}`];class z2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,i)=>{this.resolve=n,this.reject=i})}wrapCallback(n){return(i,o)=>{i?this.reject(i):this.resolve(o),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(i):n(i,o))}}}function qa(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uf(a){return(await fetch(a,{credentials:"include"})).ok}function Xx(a,n){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},o=n||"demo-project",u=a.iat||0,f=a.sub||a.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${o}`,aud:o,iat:u,exp:u+3600,auth_time:u,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}},...a};return[ou(JSON.stringify(i)),ou(JSON.stringify(m)),""].join(".")}const Jl={};function B2(){const a={prod:[],emulator:[]};for(const n of Object.keys(Jl))Jl[n]?a.emulator.push(n):a.prod.push(n);return a}function P2(a){let n=document.getElementById(a),i=!1;return n||(n=document.createElement("div"),n.setAttribute("id",a),i=!0),{created:i,element:n}}let _p=!1;function df(a,n){if(typeof window>"u"||typeof document>"u"||!qa(window.location.host)||Jl[a]===n||Jl[a]||_p)return;Jl[a]=n;function i(S){return`__firebase__banner__${S}`}const o="__firebase__banner",f=B2().prod.length>0;function m(){const S=document.getElementById(o);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function x(S,U){S.setAttribute("width","24"),S.setAttribute("id",U),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function b(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{_p=!0,m()},S}function _(S,U){S.setAttribute("id",U),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function j(){const S=P2(o),U=i("text"),E=document.getElementById(U)||document.createElement("span"),k=i("learnmore"),O=document.getElementById(k)||document.createElement("a"),V=i("preprendIcon"),F=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const G=S.element;p(G),_(O,k);const te=b();x(F,V),G.append(F,E,O,te),document.body.appendChild(G)}f?(E.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",j):j()}function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function H2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function V2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function G2(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function $2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F2(){const a=cn();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function q2(){try{return typeof indexedDB=="object"}catch{return!1}}function W2(){return new Promise((a,n)=>{try{let i=!0;const o="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(o);u.onsuccess=()=>{u.result.close(),i||self.indexedDB.deleteDatabase(o),a(!0)},u.onupgradeneeded=()=>{i=!1},u.onerror=()=>{n(u.error?.message||"")}}catch(i){n(i)}})}const Y2="FirebaseError";class Us extends Error{constructor(n,i,o){super(i),this.code=n,this.customData=o,this.name=Y2,Object.setPrototypeOf(this,Us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uo.prototype.create)}}class uo{constructor(n,i,o){this.service=n,this.serviceName=i,this.errors=o}create(n,...i){const o=i[0]||{},u=`${this.service}/${n}`,f=this.errors[n],m=f?K2(f,o):"Error",p=`${this.serviceName}: ${m} (${u}).`;return new Us(u,p,o)}}function K2(a,n){return a.replace(X2,(i,o)=>{const u=n[o];return u!=null?String(u):`<${o}?>`})}const X2=/\{\$([^}]+)}/g;function J2(a){for(const n in a)if(Object.prototype.hasOwnProperty.call(a,n))return!1;return!0}function Pa(a,n){if(a===n)return!0;const i=Object.keys(a),o=Object.keys(n);for(const u of i){if(!o.includes(u))return!1;const f=a[u],m=n[u];if(Sp(f)&&Sp(m)){if(!Pa(f,m))return!1}else if(f!==m)return!1}for(const u of o)if(!i.includes(u))return!1;return!0}function Sp(a){return a!==null&&typeof a=="object"}function ho(a){const n=[];for(const[i,o]of Object.entries(a))Array.isArray(o)?o.forEach(u=>{n.push(encodeURIComponent(i)+"="+encodeURIComponent(u))}):n.push(encodeURIComponent(i)+"="+encodeURIComponent(o));return n.length?"&"+n.join("&"):""}function Kl(a){const n={};return a.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[u,f]=o.split("=");n[decodeURIComponent(u)]=decodeURIComponent(f)}}),n}function Xl(a){const n=a.indexOf("?");if(!n)return"";const i=a.indexOf("#",n);return a.substring(n,i>0?i:void 0)}function Q2(a,n){const i=new Z2(a,n);return i.subscribe.bind(i)}class Z2{constructor(n,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{n(this)}).catch(o=>{this.error(o)})}next(n){this.forEachObserver(i=>{i.next(n)})}error(n){this.forEachObserver(i=>{i.error(n)}),this.close(n)}complete(){this.forEachObserver(n=>{n.complete()}),this.close()}subscribe(n,i,o){let u;if(n===void 0&&i===void 0&&o===void 0)throw new Error("Missing Observer.");ew(n,["next","error","complete"])?u=n:u={next:n,error:i,complete:o},u.next===void 0&&(u.next=Eh),u.error===void 0&&(u.error=Eh),u.complete===void 0&&(u.complete=Eh);const f=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?u.error(this.finalError):u.complete()}catch{}}),this.observers.push(u),f}unsubscribeOne(n){this.observers===void 0||this.observers[n]===void 0||(delete this.observers[n],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(n){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,n)}sendOne(n,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[n]!==void 0)try{i(this.observers[n])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(n){this.finalized||(this.finalized=!0,n!==void 0&&(this.finalError=n),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ew(a,n){if(typeof a!="object"||a===null)return!1;for(const i of n)if(i in a&&typeof a[i]=="function")return!0;return!1}function Eh(){}function yn(a){return a&&a._delegate?a._delegate:a}class na{constructor(n,i,o){this.name=n,this.instanceFactory=i,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}const Oa="[DEFAULT]";class tw{constructor(n,i){this.name=n,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const i=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(i)){const o=new z2;if(this.instancesDeferred.set(i,o),this.isInitialized(i)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:i});u&&o.resolve(u)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(n){const i=this.normalizeInstanceIdentifier(n?.identifier),o=n?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(sw(n))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);try{const f=this.getOrInitializeService({instanceIdentifier:u});o.resolve(f)}catch{}}}}clearInstance(n=Oa){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}async delete(){const n=Array.from(this.instances.values());await Promise.all([...n.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...n.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(n=Oa){return this.instances.has(n)}getOptions(n=Oa){return this.instancesOptions.get(n)||{}}initialize(n={}){const{options:i={}}=n,o=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:o,options:i});for(const[f,m]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(f);o===p&&m.resolve(u)}return u}onInit(n,i){const o=this.normalizeInstanceIdentifier(i),u=this.onInitCallbacks.get(o)??new Set;u.add(n),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&n(f,o),()=>{u.delete(n)}}invokeOnInitCallbacks(n,i){const o=this.onInitCallbacks.get(i);if(o)for(const u of o)try{u(n,i)}catch{}}getOrInitializeService({instanceIdentifier:n,options:i={}}){let o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:nw(n),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch{}return o||null}normalizeInstanceIdentifier(n=Oa){return this.component?this.component.multipleInstances?n:Oa:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nw(a){return a===Oa?void 0:a}function sw(a){return a.instantiationMode==="EAGER"}class rw{constructor(n){this.name=n,this.providers=new Map}addComponent(n){const i=this.getProvider(n.name);if(i.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);i.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const i=new tw(n,this);return this.providers.set(n,i),i}getProviders(){return Array.from(this.providers.values())}}var st;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(st||(st={}));const aw={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},iw=st.INFO,lw={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},ow=(a,n,...i)=>{if(n<a.logLevel)return;const o=new Date().toISOString(),u=lw[n];if(u)console[u](`[${o}]  ${a.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)};class hf{constructor(n){this.name=n,this._logLevel=iw,this._logHandler=ow,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in st))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?aw[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...n),this._logHandler(this,st.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...n),this._logHandler(this,st.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,st.INFO,...n),this._logHandler(this,st.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,st.WARN,...n),this._logHandler(this,st.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...n),this._logHandler(this,st.ERROR,...n)}}const cw=(a,n)=>n.some(i=>a instanceof i);let kp,Cp;function uw(){return kp||(kp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dw(){return Cp||(Cp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jx=new WeakMap,Vh=new WeakMap,Qx=new WeakMap,Th=new WeakMap,ff=new WeakMap;function hw(a){const n=new Promise((i,o)=>{const u=()=>{a.removeEventListener("success",f),a.removeEventListener("error",m)},f=()=>{i(ea(a.result)),u()},m=()=>{o(a.error),u()};a.addEventListener("success",f),a.addEventListener("error",m)});return n.then(i=>{i instanceof IDBCursor&&Jx.set(i,a)}).catch(()=>{}),ff.set(n,a),n}function fw(a){if(Vh.has(a))return;const n=new Promise((i,o)=>{const u=()=>{a.removeEventListener("complete",f),a.removeEventListener("error",m),a.removeEventListener("abort",m)},f=()=>{i(),u()},m=()=>{o(a.error||new DOMException("AbortError","AbortError")),u()};a.addEventListener("complete",f),a.addEventListener("error",m),a.addEventListener("abort",m)});Vh.set(a,n)}let Gh={get(a,n,i){if(a instanceof IDBTransaction){if(n==="done")return Vh.get(a);if(n==="objectStoreNames")return a.objectStoreNames||Qx.get(a);if(n==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ea(a[n])},set(a,n,i){return a[n]=i,!0},has(a,n){return a instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in a}};function mw(a){Gh=a(Gh)}function gw(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...i){const o=a.call(Ah(this),n,...i);return Qx.set(o,n.sort?n.sort():[n]),ea(o)}:dw().includes(a)?function(...n){return a.apply(Ah(this),n),ea(Jx.get(this))}:function(...n){return ea(a.apply(Ah(this),n))}}function pw(a){return typeof a=="function"?gw(a):(a instanceof IDBTransaction&&fw(a),cw(a,uw())?new Proxy(a,Gh):a)}function ea(a){if(a instanceof IDBRequest)return hw(a);if(Th.has(a))return Th.get(a);const n=pw(a);return n!==a&&(Th.set(a,n),ff.set(n,a)),n}const Ah=a=>ff.get(a);function xw(a,n,{blocked:i,upgrade:o,blocking:u,terminated:f}={}){const m=indexedDB.open(a,n),p=ea(m);return o&&m.addEventListener("upgradeneeded",x=>{o(ea(m.result),x.oldVersion,x.newVersion,ea(m.transaction),x)}),i&&m.addEventListener("blocked",x=>i(x.oldVersion,x.newVersion,x)),p.then(x=>{f&&x.addEventListener("close",()=>f()),u&&x.addEventListener("versionchange",b=>u(b.oldVersion,b.newVersion,b))}).catch(()=>{}),p}const yw=["get","getKey","getAll","getAllKeys","count"],bw=["put","add","delete","clear"],Rh=new Map;function Ep(a,n){if(!(a instanceof IDBDatabase&&!(n in a)&&typeof n=="string"))return;if(Rh.get(n))return Rh.get(n);const i=n.replace(/FromIndex$/,""),o=n!==i,u=bw.includes(i);if(!(i in(o?IDBIndex:IDBObjectStore).prototype)||!(u||yw.includes(i)))return;const f=async function(m,...p){const x=this.transaction(m,u?"readwrite":"readonly");let b=x.store;return o&&(b=b.index(p.shift())),(await Promise.all([b[i](...p),u&&x.done]))[0]};return Rh.set(n,f),f}mw(a=>({...a,get:(n,i,o)=>Ep(n,i)||a.get(n,i,o),has:(n,i)=>!!Ep(n,i)||a.has(n,i)}));class vw{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(ww(i)){const o=i.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(i=>i).join(" ")}}function ww(a){return a.getComponent()?.type==="VERSION"}const $h="@firebase/app",Tp="0.14.6";const hr=new hf("@firebase/app"),jw="@firebase/app-compat",Nw="@firebase/analytics-compat",_w="@firebase/analytics",Sw="@firebase/app-check-compat",kw="@firebase/app-check",Cw="@firebase/auth",Ew="@firebase/auth-compat",Tw="@firebase/database",Aw="@firebase/data-connect",Rw="@firebase/database-compat",Mw="@firebase/functions",Ow="@firebase/functions-compat",Lw="@firebase/installations",Dw="@firebase/installations-compat",Iw="@firebase/messaging",Uw="@firebase/messaging-compat",zw="@firebase/performance",Bw="@firebase/performance-compat",Pw="@firebase/remote-config",Hw="@firebase/remote-config-compat",Vw="@firebase/storage",Gw="@firebase/storage-compat",$w="@firebase/firestore",Fw="@firebase/ai",qw="@firebase/firestore-compat",Ww="firebase",Yw="12.6.0";const Fh="[DEFAULT]",Kw={[$h]:"fire-core",[jw]:"fire-core-compat",[_w]:"fire-analytics",[Nw]:"fire-analytics-compat",[kw]:"fire-app-check",[Sw]:"fire-app-check-compat",[Cw]:"fire-auth",[Ew]:"fire-auth-compat",[Tw]:"fire-rtdb",[Aw]:"fire-data-connect",[Rw]:"fire-rtdb-compat",[Mw]:"fire-fn",[Ow]:"fire-fn-compat",[Lw]:"fire-iid",[Dw]:"fire-iid-compat",[Iw]:"fire-fcm",[Uw]:"fire-fcm-compat",[zw]:"fire-perf",[Bw]:"fire-perf-compat",[Pw]:"fire-rc",[Hw]:"fire-rc-compat",[Vw]:"fire-gcs",[Gw]:"fire-gcs-compat",[$w]:"fire-fst",[qw]:"fire-fst-compat",[Fw]:"fire-vertex","fire-js":"fire-js",[Ww]:"fire-js-all"};const cu=new Map,Xw=new Map,qh=new Map;function Ap(a,n){try{a.container.addComponent(n)}catch(i){hr.debug(`Component ${n.name} failed to register with FirebaseApp ${a.name}`,i)}}function Ha(a){const n=a.name;if(qh.has(n))return hr.debug(`There were multiple attempts to register component ${n}.`),!1;qh.set(n,a);for(const i of cu.values())Ap(i,a);for(const i of Xw.values())Ap(i,a);return!0}function bu(a,n){const i=a.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),a.container.getProvider(n)}function xn(a){return a==null?!1:a.settings!==void 0}const Jw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ta=new uo("app","Firebase",Jw);class Qw{constructor(n,i,o){this._isDeleted=!1,this._options={...n},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw ta.create("app-deleted",{appName:this._name})}}const Wa=Yw;function Zx(a,n={}){let i=a;typeof n!="object"&&(n={name:n});const o={name:Fh,automaticDataCollectionEnabled:!0,...n},u=o.name;if(typeof u!="string"||!u)throw ta.create("bad-app-name",{appName:String(u)});if(i||(i=Yx()),!i)throw ta.create("no-options");const f=cu.get(u);if(f){if(Pa(i,f.options)&&Pa(o,f.config))return f;throw ta.create("duplicate-app",{appName:u})}const m=new rw(u);for(const x of qh.values())m.addComponent(x);const p=new Qw(i,o,m);return cu.set(u,p),p}function mf(a=Fh){const n=cu.get(a);if(!n&&a===Fh&&Yx())return Zx();if(!n)throw ta.create("no-app",{appName:a});return n}function Os(a,n,i){let o=Kw[a]??a;i&&(o+=`-${i}`);const u=o.match(/\s|\//),f=n.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${n}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${n}" contains illegal characters (whitespace or "/")`),hr.warn(m.join(" "));return}Ha(new na(`${o}-version`,()=>({library:o,version:n}),"VERSION"))}const Zw="firebase-heartbeat-database",ej=1,ro="firebase-heartbeat-store";let Mh=null;function ey(){return Mh||(Mh=xw(Zw,ej,{upgrade:(a,n)=>{switch(n){case 0:try{a.createObjectStore(ro)}catch(i){console.warn(i)}}}}).catch(a=>{throw ta.create("idb-open",{originalErrorMessage:a.message})})),Mh}async function tj(a){try{const i=(await ey()).transaction(ro),o=await i.objectStore(ro).get(ty(a));return await i.done,o}catch(n){if(n instanceof Us)hr.warn(n.message);else{const i=ta.create("idb-get",{originalErrorMessage:n?.message});hr.warn(i.message)}}}async function Rp(a,n){try{const o=(await ey()).transaction(ro,"readwrite");await o.objectStore(ro).put(n,ty(a)),await o.done}catch(i){if(i instanceof Us)hr.warn(i.message);else{const o=ta.create("idb-set",{originalErrorMessage:i?.message});hr.warn(o.message)}}}function ty(a){return`${a.name}!${a.options.appId}`}const nj=1024,sj=30;class rj{constructor(n){this.container=n,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new ij(i),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Mp();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>sj){const u=lj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){hr.warn(n)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mp(),{heartbeatsToSend:i,unsentEntries:o}=aj(this._heartbeatsCache.heartbeats),u=ou(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return hr.warn(n),""}}}function Mp(){return new Date().toISOString().substring(0,10)}function aj(a,n=nj){const i=[];let o=a.slice();for(const u of a){const f=i.find(m=>m.agent===u.agent);if(f){if(f.dates.push(u.date),Op(i)>n){f.dates.pop();break}}else if(i.push({agent:u.agent,dates:[u.date]}),Op(i)>n){i.pop();break}o=o.slice(1)}return{heartbeatsToSend:i,unsentEntries:o}}class ij{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return q2()?W2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await tj(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(n){if(await this._canUseIndexedDBPromise){const o=await this.read();return Rp(this.app,{lastSentHeartbeatDate:n.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return}async add(n){if(await this._canUseIndexedDBPromise){const o=await this.read();return Rp(this.app,{lastSentHeartbeatDate:n.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...n.heartbeats]})}else return}}function Op(a){return ou(JSON.stringify({version:2,heartbeats:a})).length}function lj(a){if(a.length===0)return-1;let n=0,i=a[0].date;for(let o=1;o<a.length;o++)a[o].date<i&&(i=a[o].date,n=o);return n}function oj(a){Ha(new na("platform-logger",n=>new vw(n),"PRIVATE")),Ha(new na("heartbeat",n=>new rj(n),"PRIVATE")),Os($h,Tp,a),Os($h,Tp,"esm2020"),Os("fire-js","")}oj("");function ny(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cj=ny,sy=new uo("auth","Firebase",ny());const uu=new hf("@firebase/auth");function uj(a,...n){uu.logLevel<=st.WARN&&uu.warn(`Auth (${Wa}): ${a}`,...n)}function nu(a,...n){uu.logLevel<=st.ERROR&&uu.error(`Auth (${Wa}): ${a}`,...n)}function Vn(a,...n){throw pf(a,...n)}function rs(a,...n){return pf(a,...n)}function gf(a,n,i){const o={...cj(),[n]:i};return new uo("auth","Firebase",o).create(n,{appName:a.name})}function ur(a){return gf(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dj(a,n,i){const o=i;if(!(n instanceof o))throw o.name!==n.constructor.name&&Vn(a,"argument-error"),gf(a,"argument-error",`Type of ${n.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pf(a,...n){if(typeof a!="string"){const i=n[0],o=[...n.slice(1)];return o[0]&&(o[0].appName=a.name),a._errorFactory.create(i,...o)}return sy.create(a,...n)}function Re(a,n,...i){if(!a)throw pf(n,...i)}function lr(a){const n="INTERNAL ASSERTION FAILED: "+a;throw nu(n),new Error(n)}function fr(a,n){a||lr(n)}function Wh(){return typeof self<"u"&&self.location?.href||""}function hj(){return Lp()==="http:"||Lp()==="https:"}function Lp(){return typeof self<"u"&&self.location?.protocol||null}function fj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hj()||G2()||"connection"in navigator)?navigator.onLine:!0}function mj(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}class fo{constructor(n,i){this.shortDelay=n,this.longDelay=i,fr(i>n,"Short delay should be less than long delay!"),this.isMobile=H2()||$2()}get(){return fj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xf(a,n){fr(a.emulator,"Emulator should always be set here");const{url:i}=a.emulator;return n?`${i}${n.startsWith("/")?n.slice(1):n}`:i}class ry{static initialize(n,i,o){this.fetchImpl=n,i&&(this.headersImpl=i),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const pj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xj=new fo(3e4,6e4);function ra(a,n){return a.tenantId&&!n.tenantId?{...n,tenantId:a.tenantId}:n}async function gr(a,n,i,o,u={}){return ay(a,u,async()=>{let f={},m={};o&&(n==="GET"?m=o:f={body:JSON.stringify(o)});const p=ho({key:a.config.apiKey,...m}).slice(1),x=await a._getAdditionalHeaders();x["Content-Type"]="application/json",a.languageCode&&(x["X-Firebase-Locale"]=a.languageCode);const b={method:n,headers:x,...f};return V2()||(b.referrerPolicy="no-referrer"),a.emulatorConfig&&qa(a.emulatorConfig.host)&&(b.credentials="include"),ry.fetch()(await iy(a,a.config.apiHost,i,p),b)})}async function ay(a,n,i){a._canInitEmulator=!1;const o={...gj,...n};try{const u=new bj(a),f=await Promise.race([i(),u.promise]);u.clearNetworkTimeout();const m=await f.json();if("needConfirmation"in m)throw qc(a,"account-exists-with-different-credential",m);if(f.ok&&!("errorMessage"in m))return m;{const p=f.ok?m.errorMessage:m.error.message,[x,b]=p.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw qc(a,"credential-already-in-use",m);if(x==="EMAIL_EXISTS")throw qc(a,"email-already-in-use",m);if(x==="USER_DISABLED")throw qc(a,"user-disabled",m);const _=o[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw gf(a,_,b);Vn(a,_)}}catch(u){if(u instanceof Us)throw u;Vn(a,"network-request-failed",{message:String(u)})}}async function mo(a,n,i,o,u={}){const f=await gr(a,n,i,o,u);return"mfaPendingCredential"in f&&Vn(a,"multi-factor-auth-required",{_serverResponse:f}),f}async function iy(a,n,i,o){const u=`${n}${i}?${o}`,f=a,m=f.config.emulator?xf(a.config,u):`${a.config.apiScheme}://${u}`;return pj.includes(i)&&(await f._persistenceManagerAvailable,f._getPersistenceType()==="COOKIE")?f._getPersistence()._getFinalTarget(m).toString():m}function yj(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(n){this.auth=n,this.timer=null,this.promise=new Promise((i,o)=>{this.timer=setTimeout(()=>o(rs(this.auth,"network-request-failed")),xj.get())})}}function qc(a,n,i){const o={appName:a.name};i.email&&(o.email=i.email),i.phoneNumber&&(o.phoneNumber=i.phoneNumber);const u=rs(a,n,o);return u.customData._tokenResponse=i,u}function Dp(a){return a!==void 0&&a.enterprise!==void 0}class vj{constructor(n){if(this.siteKey="",this.recaptchaEnforcementState=[],n.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=n.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=n.recaptchaEnforcementState}getProviderEnforcementState(n){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===n)return yj(i.enforcementState);return null}isProviderEnabled(n){return this.getProviderEnforcementState(n)==="ENFORCE"||this.getProviderEnforcementState(n)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function wj(a,n){return gr(a,"GET","/v2/recaptchaConfig",ra(a,n))}async function jj(a,n){return gr(a,"POST","/v1/accounts:delete",n)}async function du(a,n){return gr(a,"POST","/v1/accounts:lookup",n)}function Ql(a){if(a)try{const n=new Date(Number(a));if(!isNaN(n.getTime()))return n.toUTCString()}catch{}}async function Nj(a,n=!1){const i=yn(a),o=await i.getIdToken(n),u=yf(o);Re(u&&u.exp&&u.auth_time&&u.iat,i.auth,"internal-error");const f=typeof u.firebase=="object"?u.firebase:void 0,m=f?.sign_in_provider;return{claims:u,token:o,authTime:Ql(Oh(u.auth_time)),issuedAtTime:Ql(Oh(u.iat)),expirationTime:Ql(Oh(u.exp)),signInProvider:m||null,signInSecondFactor:f?.sign_in_second_factor||null}}function Oh(a){return Number(a)*1e3}function yf(a){const[n,i,o]=a.split(".");if(n===void 0||i===void 0||o===void 0)return nu("JWT malformed, contained fewer than 3 sections"),null;try{const u=Fx(i);return u?JSON.parse(u):(nu("Failed to decode base64 JWT payload"),null)}catch(u){return nu("Caught error parsing JWT payload as JSON",u?.toString()),null}}function Ip(a){const n=yf(a);return Re(n,"internal-error"),Re(typeof n.exp<"u","internal-error"),Re(typeof n.iat<"u","internal-error"),Number(n.exp)-Number(n.iat)}async function Pi(a,n,i=!1){if(i)return n;try{return await n}catch(o){throw o instanceof Us&&_j(o)&&a.auth.currentUser===a&&await a.auth.signOut(),o}}function _j({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}class Sj{constructor(n){this.user=n,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(n){if(n){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(n=!1){if(!this.isRunning)return;const i=this.getInterval(n);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(n){n?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Yh{constructor(n,i){this.createdAt=n,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ql(this.lastLoginAt),this.creationTime=Ql(this.createdAt)}_copy(n){this.createdAt=n.createdAt,this.lastLoginAt=n.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hu(a){const n=a.auth,i=await a.getIdToken(),o=await Pi(a,du(n,{idToken:i}));Re(o?.users.length,n,"internal-error");const u=o.users[0];a._notifyReloadListener(u);const f=u.providerUserInfo?.length?ly(u.providerUserInfo):[],m=Cj(a.providerData,f),p=a.isAnonymous,x=!(a.email&&u.passwordHash)&&!m?.length,b=p?x:!1,_={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Yh(u.createdAt,u.lastLoginAt),isAnonymous:b};Object.assign(a,_)}async function kj(a){const n=yn(a);await hu(n),await n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)}function Cj(a,n){return[...a.filter(o=>!n.some(u=>u.providerId===o.providerId)),...n]}function ly(a){return a.map(({providerId:n,...i})=>({providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}async function Ej(a,n){const i=await ay(a,{},async()=>{const o=ho({grant_type:"refresh_token",refresh_token:n}).slice(1),{tokenApiHost:u,apiKey:f}=a.config,m=await iy(a,u,"/v1/token",`key=${f}`),p=await a._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const x={method:"POST",headers:p,body:o};return a.emulatorConfig&&qa(a.emulatorConfig.host)&&(x.credentials="include"),ry.fetch()(m,x)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function Tj(a,n){return gr(a,"POST","/v2/accounts:revokeToken",ra(a,n))}class Ii{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(n){Re(n.idToken,"internal-error"),Re(typeof n.idToken<"u","internal-error"),Re(typeof n.refreshToken<"u","internal-error");const i="expiresIn"in n&&typeof n.expiresIn<"u"?Number(n.expiresIn):Ip(n.idToken);this.updateTokensAndExpiration(n.idToken,n.refreshToken,i)}updateFromIdToken(n){Re(n.length!==0,"internal-error");const i=Ip(n);this.updateTokensAndExpiration(n,null,i)}async getToken(n,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,n,"user-token-expired"),this.refreshToken?(await this.refresh(n,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(n,i){const{accessToken:o,refreshToken:u,expiresIn:f}=await Ej(n,i);this.updateTokensAndExpiration(o,u,Number(f))}updateTokensAndExpiration(n,i,o){this.refreshToken=i||null,this.accessToken=n||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(n,i){const{refreshToken:o,accessToken:u,expirationTime:f}=i,m=new Ii;return o&&(Re(typeof o=="string","internal-error",{appName:n}),m.refreshToken=o),u&&(Re(typeof u=="string","internal-error",{appName:n}),m.accessToken=u),f&&(Re(typeof f=="number","internal-error",{appName:n}),m.expirationTime=f),m}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(n){this.accessToken=n.accessToken,this.refreshToken=n.refreshToken,this.expirationTime=n.expirationTime}_clone(){return Object.assign(new Ii,this.toJSON())}_performRefresh(){return lr("not implemented")}}function Yr(a,n){Re(typeof a=="string"||typeof a>"u","internal-error",{appName:n})}class ns{constructor({uid:n,auth:i,stsTokenManager:o,...u}){this.providerId="firebase",this.proactiveRefresh=new Sj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Yh(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(n){const i=await Pi(this,this.stsTokenManager.getToken(this.auth,n));return Re(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(n){return Nj(this,n)}reload(){return kj(this)}_assign(n){this!==n&&(Re(this.uid===n.uid,this.auth,"internal-error"),this.displayName=n.displayName,this.photoURL=n.photoURL,this.email=n.email,this.emailVerified=n.emailVerified,this.phoneNumber=n.phoneNumber,this.isAnonymous=n.isAnonymous,this.tenantId=n.tenantId,this.providerData=n.providerData.map(i=>({...i})),this.metadata._copy(n.metadata),this.stsTokenManager._assign(n.stsTokenManager))}_clone(n){const i=new ns({...this,auth:n,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(n){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=n,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(n){this.reloadListener?this.reloadListener(n):this.reloadUserInfo=n}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(n,i=!1){let o=!1;n.idToken&&n.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(n),o=!0),i&&await hu(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(ur(this.auth));const n=await this.getIdToken();return await Pi(this,jj(this.auth,{idToken:n})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(n=>({...n})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(n,i){const o=i.displayName??void 0,u=i.email??void 0,f=i.phoneNumber??void 0,m=i.photoURL??void 0,p=i.tenantId??void 0,x=i._redirectEventId??void 0,b=i.createdAt??void 0,_=i.lastLoginAt??void 0,{uid:j,emailVerified:S,isAnonymous:U,providerData:E,stsTokenManager:k}=i;Re(j&&k,n,"internal-error");const O=Ii.fromJSON(this.name,k);Re(typeof j=="string",n,"internal-error"),Yr(o,n.name),Yr(u,n.name),Re(typeof S=="boolean",n,"internal-error"),Re(typeof U=="boolean",n,"internal-error"),Yr(f,n.name),Yr(m,n.name),Yr(p,n.name),Yr(x,n.name),Yr(b,n.name),Yr(_,n.name);const V=new ns({uid:j,auth:n,email:u,emailVerified:S,displayName:o,isAnonymous:U,photoURL:m,phoneNumber:f,tenantId:p,stsTokenManager:O,createdAt:b,lastLoginAt:_});return E&&Array.isArray(E)&&(V.providerData=E.map(F=>({...F}))),x&&(V._redirectEventId=x),V}static async _fromIdTokenResponse(n,i,o=!1){const u=new Ii;u.updateFromServerResponse(i);const f=new ns({uid:i.localId,auth:n,stsTokenManager:u,isAnonymous:o});return await hu(f),f}static async _fromGetAccountInfoResponse(n,i,o){const u=i.users[0];Re(u.localId!==void 0,"internal-error");const f=u.providerUserInfo!==void 0?ly(u.providerUserInfo):[],m=!(u.email&&u.passwordHash)&&!f?.length,p=new Ii;p.updateFromIdToken(o);const x=new ns({uid:u.localId,auth:n,stsTokenManager:p,isAnonymous:m}),b={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:f,metadata:new Yh(u.createdAt,u.lastLoginAt),isAnonymous:!(u.email&&u.passwordHash)&&!f?.length};return Object.assign(x,b),x}}const Up=new Map;function or(a){fr(a instanceof Function,"Expected a class definition");let n=Up.get(a);return n?(fr(n instanceof a,"Instance stored in cache mismatched with class"),n):(n=new a,Up.set(a,n),n)}class oy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,i){this.storage[n]=i}async _get(n){const i=this.storage[n];return i===void 0?null:i}async _remove(n){delete this.storage[n]}_addListener(n,i){}_removeListener(n,i){}}oy.type="NONE";const zp=oy;function su(a,n,i){return`firebase:${a}:${n}:${i}`}class Ui{constructor(n,i,o){this.persistence=n,this.auth=i,this.userKey=o;const{config:u,name:f}=this.auth;this.fullUserKey=su(this.userKey,u.apiKey,f),this.fullPersistenceKey=su("persistence",u.apiKey,f),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(n){return this.persistence._set(this.fullUserKey,n.toJSON())}async getCurrentUser(){const n=await this.persistence._get(this.fullUserKey);if(!n)return null;if(typeof n=="string"){const i=await du(this.auth,{idToken:n}).catch(()=>{});return i?ns._fromGetAccountInfoResponse(this.auth,i,n):null}return ns._fromJSON(this.auth,n)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(n){if(this.persistence===n)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=n,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(n,i,o="authUser"){if(!i.length)return new Ui(or(zp),n,o);const u=(await Promise.all(i.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let f=u[0]||or(zp);const m=su(o,n.config.apiKey,n.name);let p=null;for(const b of i)try{const _=await b._get(m);if(_){let j;if(typeof _=="string"){const S=await du(n,{idToken:_}).catch(()=>{});if(!S)break;j=await ns._fromGetAccountInfoResponse(n,S,_)}else j=ns._fromJSON(n,_);b!==f&&(p=j),f=b;break}}catch{}const x=u.filter(b=>b._shouldAllowMigration);return!f._shouldAllowMigration||!x.length?new Ui(f,n,o):(f=x[0],p&&await f._set(m,p.toJSON()),await Promise.all(i.map(async b=>{if(b!==f)try{await b._remove(m)}catch{}})),new Ui(f,n,o))}}function Bp(a){const n=a.toLowerCase();if(n.includes("opera/")||n.includes("opr/")||n.includes("opios/"))return"Opera";if(hy(n))return"IEMobile";if(n.includes("msie")||n.includes("trident/"))return"IE";if(n.includes("edge/"))return"Edge";if(cy(n))return"Firefox";if(n.includes("silk/"))return"Silk";if(my(n))return"Blackberry";if(gy(n))return"Webos";if(uy(n))return"Safari";if((n.includes("chrome/")||dy(n))&&!n.includes("edge/"))return"Chrome";if(fy(n))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=a.match(i);if(o?.length===2)return o[1]}return"Other"}function cy(a=cn()){return/firefox\//i.test(a)}function uy(a=cn()){const n=a.toLowerCase();return n.includes("safari/")&&!n.includes("chrome/")&&!n.includes("crios/")&&!n.includes("android")}function dy(a=cn()){return/crios\//i.test(a)}function hy(a=cn()){return/iemobile/i.test(a)}function fy(a=cn()){return/android/i.test(a)}function my(a=cn()){return/blackberry/i.test(a)}function gy(a=cn()){return/webos/i.test(a)}function bf(a=cn()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function Aj(a=cn()){return bf(a)&&!!window.navigator?.standalone}function Rj(){return F2()&&document.documentMode===10}function py(a=cn()){return bf(a)||fy(a)||gy(a)||my(a)||/windows phone/i.test(a)||hy(a)}function xy(a,n=[]){let i;switch(a){case"Browser":i=Bp(cn());break;case"Worker":i=`${Bp(cn())}-${a}`;break;default:i=a}const o=n.length?n.join(","):"FirebaseCore-web";return`${i}/JsCore/${Wa}/${o}`}class Mj{constructor(n){this.auth=n,this.queue=[]}pushCallback(n,i){const o=f=>new Promise((m,p)=>{try{const x=n(f);m(x)}catch(x){p(x)}});o.onAbort=i,this.queue.push(o);const u=this.queue.length-1;return()=>{this.queue[u]=()=>Promise.resolve()}}async runMiddleware(n){if(this.auth.currentUser===n)return;const i=[];try{for(const o of this.queue)await o(n),o.onAbort&&i.push(o.onAbort)}catch(o){i.reverse();for(const u of i)try{u()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o?.message})}}}async function Oj(a,n={}){return gr(a,"GET","/v2/passwordPolicy",ra(a,n))}const Lj=6;class Dj{constructor(n){const i=n.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??Lj,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=n.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=n.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=n.forceUpgradeOnSignin??!1,this.schemaVersion=n.schemaVersion}validatePassword(n){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(n,i),this.validatePasswordCharacterOptions(n,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(n,i){const o=this.customStrengthOptions.minPasswordLength,u=this.customStrengthOptions.maxPasswordLength;o&&(i.meetsMinPasswordLength=n.length>=o),u&&(i.meetsMaxPasswordLength=n.length<=u)}validatePasswordCharacterOptions(n,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let o;for(let u=0;u<n.length;u++)o=n.charAt(u),this.updatePasswordCharacterOptionsStatuses(i,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(n,i,o,u,f){this.customStrengthOptions.containsLowercaseLetter&&(n.containsLowercaseLetter||(n.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(n.containsUppercaseLetter||(n.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(n.containsNumericCharacter||(n.containsNumericCharacter=u)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(n.containsNonAlphanumericCharacter||(n.containsNonAlphanumericCharacter=f))}}class Ij{constructor(n,i,o,u){this.app=n,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=o,this.config=u,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pp(this),this.idTokenSubscription=new Pp(this),this.beforeStateQueue=new Mj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=n.name,this.clientVersion=u.sdkClientVersion,this._persistenceManagerAvailable=new Promise(f=>this._resolvePersistenceManagerAvailable=f)}_initializeWithPersistence(n,i){return i&&(this._popupRedirectResolver=or(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ui.create(this,n),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const n=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!n)){if(this.currentUser&&n&&this.currentUser.uid===n.uid){this._currentUser._assign(n),await this.currentUser.getIdToken();return}await this._updateCurrentUser(n,!0)}}async initializeCurrentUserFromIdToken(n){try{const i=await du(this,{idToken:n}),o=await ns._fromGetAccountInfoResponse(this,i,n);await this.directlySetCurrentUser(o)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(n){if(xn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,u=!1;if(n&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=this.redirectUser?._redirectEventId,m=o?._redirectEventId,p=await this.tryRedirectSignIn(n);(!f||f===m)&&p?.user&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(n){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,n,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(n){try{await hu(n)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(n)}useDeviceLanguage(){this.languageCode=mj()}async _delete(){this._deleted=!0}async updateCurrentUser(n){if(xn(this.app))return Promise.reject(ur(this));const i=n?yn(n):null;return i&&Re(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(n,i=!1){if(!this._deleted)return n&&Re(this.tenantId===n.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(n),this.queue(async()=>{await this.directlySetCurrentUser(n),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(n){return xn(this.app)?Promise.reject(ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(or(n))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(n){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(n)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const n=await Oj(this),i=new Dj(n);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(n){this._errorFactory=new uo("auth","Firebase",n())}onAuthStateChanged(n,i,o){return this.registerStateListener(this.authStateSubscription,n,i,o)}beforeAuthStateChanged(n,i){return this.beforeStateQueue.pushCallback(n,i)}onIdTokenChanged(n,i,o){return this.registerStateListener(this.idTokenSubscription,n,i,o)}authStateReady(){return new Promise((n,i)=>{if(this.currentUser)n();else{const o=this.onAuthStateChanged(()=>{o(),n()},i)}})}async revokeAccessToken(n){if(this.currentUser){const i=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:n,idToken:i};this.tenantId!=null&&(o.tenantId=this.tenantId),await Tj(this,o)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(n,i){const o=await this.getOrInitRedirectPersistenceManager(i);return n===null?o.removeCurrentUser():o.setCurrentUser(n)}async getOrInitRedirectPersistenceManager(n){if(!this.redirectPersistenceManager){const i=n&&or(n)||this._popupRedirectResolver;Re(i,this,"argument-error"),this.redirectPersistenceManager=await Ui.create(this,[or(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(n){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===n?this._currentUser:this.redirectUser?._redirectEventId===n?this.redirectUser:null}async _persistUserIfCurrent(n){if(n===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(n))}_notifyListenersIfCurrent(n){n===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=this.currentUser?.uid??null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(n,i,o,u){if(this._deleted)return()=>{};const f=typeof i=="function"?i:i.next.bind(i);let m=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(p,this,"internal-error"),p.then(()=>{m||f(this.currentUser)}),typeof i=="function"){const x=n.addObserver(i,o,u);return()=>{m=!0,x()}}else{const x=n.addObserver(i);return()=>{m=!0,x()}}}async directlySetCurrentUser(n){this.currentUser&&this.currentUser!==n&&this._currentUser._stopProactiveRefresh(),n&&this.isProactiveRefreshEnabled&&n._startProactiveRefresh(),this.currentUser=n,n?await this.assertedPersistence.setCurrentUser(n):await this.assertedPersistence.removeCurrentUser()}queue(n){return this.operations=this.operations.then(n,n),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(n){!n||this.frameworks.includes(n)||(this.frameworks.push(n),this.frameworks.sort(),this.clientVersion=xy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(n["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return n?.error&&uj(`Error while retrieving App Check token: ${n.error}`),n?.token}}function aa(a){return yn(a)}class Pp{constructor(n){this.auth=n,this.observer=null,this.addObserver=Q2(i=>this.observer=i)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Uj(a){vu=a}function yy(a){return vu.loadJS(a)}function zj(){return vu.recaptchaEnterpriseScript}function Bj(){return vu.gapiScript}function Pj(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class Hj{constructor(){this.enterprise=new Vj}ready(n){n()}execute(n,i){return Promise.resolve("token")}render(n,i){return""}}class Vj{ready(n){n()}execute(n,i){return Promise.resolve("token")}render(n,i){return""}}const Gj="recaptcha-enterprise",by="NO_RECAPTCHA";class $j{constructor(n){this.type=Gj,this.auth=aa(n)}async verify(n="verify",i=!1){async function o(f){if(!i){if(f.tenantId==null&&f._agentRecaptchaConfig!=null)return f._agentRecaptchaConfig.siteKey;if(f.tenantId!=null&&f._tenantRecaptchaConfigs[f.tenantId]!==void 0)return f._tenantRecaptchaConfigs[f.tenantId].siteKey}return new Promise(async(m,p)=>{wj(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(x.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const b=new vj(x);return f.tenantId==null?f._agentRecaptchaConfig=b:f._tenantRecaptchaConfigs[f.tenantId]=b,m(b.siteKey)}}).catch(x=>{p(x)})})}function u(f,m,p){const x=window.grecaptcha;Dp(x)?x.enterprise.ready(()=>{x.enterprise.execute(f,{action:n}).then(b=>{m(b)}).catch(()=>{m(by)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Hj().execute("siteKey",{action:"verify"}):new Promise((f,m)=>{o(this.auth).then(p=>{if(!i&&Dp(window.grecaptcha))u(p,f,m);else{if(typeof window>"u"){m(new Error("RecaptchaVerifier is only supported in browser"));return}let x=zj();x.length!==0&&(x+=p),yy(x).then(()=>{u(p,f,m)}).catch(b=>{m(b)})}}).catch(p=>{m(p)})})}}async function Hp(a,n,i,o=!1,u=!1){const f=new $j(a);let m;if(u)m=by;else try{m=await f.verify(i)}catch{m=await f.verify(i,!0)}const p={...n};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const x=p.phoneEnrollmentInfo.phoneNumber,b=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:x,recaptchaToken:b,captchaResponse:m,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const x=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:x,captchaResponse:m,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return o?Object.assign(p,{captchaResp:m}):Object.assign(p,{captchaResponse:m}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Kh(a,n,i,o,u){if(a._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Hp(a,n,i,i==="getOobCode");return o(a,f)}else return o(a,n).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Hp(a,n,i,i==="getOobCode");return o(a,m)}else return Promise.reject(f)})}function Fj(a,n){const i=bu(a,"auth");if(i.isInitialized()){const u=i.getImmediate(),f=i.getOptions();if(Pa(f,n??{}))return u;Vn(u,"already-initialized")}return i.initialize({options:n})}function qj(a,n){const i=n?.persistence||[],o=(Array.isArray(i)?i:[i]).map(or);n?.errorMap&&a._updateErrorMap(n.errorMap),a._initializeWithPersistence(o,n?.popupRedirectResolver)}function Wj(a,n,i){const o=aa(a);Re(/^https?:\/\//.test(n),o,"invalid-emulator-scheme");const u=!1,f=vy(n),{host:m,port:p}=Yj(n),x=p===null?"":`:${p}`,b={url:`${f}//${m}${x}/`},_=Object.freeze({host:m,port:p,protocol:f.replace(":",""),options:Object.freeze({disableWarnings:u})});if(!o._canInitEmulator){Re(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),Re(Pa(b,o.config.emulator)&&Pa(_,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=b,o.emulatorConfig=_,o.settings.appVerificationDisabledForTesting=!0,qa(m)?(uf(`${f}//${m}${x}`),df("Auth",!0)):Kj()}function vy(a){const n=a.indexOf(":");return n<0?"":a.substr(0,n+1)}function Yj(a){const n=vy(a),i=/(\/\/)?([^?#/]+)/.exec(a.substr(n.length));if(!i)return{host:"",port:null};const o=i[2].split("@").pop()||"",u=/^(\[[^\]]+\])(:|$)/.exec(o);if(u){const f=u[1];return{host:f,port:Vp(o.substr(f.length+1))}}else{const[f,m]=o.split(":");return{host:f,port:Vp(m)}}}function Vp(a){if(!a)return null;const n=Number(a);return isNaN(n)?null:n}function Kj(){function a(){const n=document.createElement("p"),i=n.style;n.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",n.classList.add("firebase-emulator-warning"),document.body.appendChild(n)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}class vf{constructor(n,i){this.providerId=n,this.signInMethod=i}toJSON(){return lr("not implemented")}_getIdTokenResponse(n){return lr("not implemented")}_linkToIdToken(n,i){return lr("not implemented")}_getReauthenticationResolver(n){return lr("not implemented")}}async function Xj(a,n){return gr(a,"POST","/v1/accounts:signUp",n)}async function Jj(a,n){return mo(a,"POST","/v1/accounts:signInWithPassword",ra(a,n))}async function Qj(a,n){return mo(a,"POST","/v1/accounts:signInWithEmailLink",ra(a,n))}async function Zj(a,n){return mo(a,"POST","/v1/accounts:signInWithEmailLink",ra(a,n))}class ao extends vf{constructor(n,i,o,u=null){super("password",o),this._email=n,this._password=i,this._tenantId=u}static _fromEmailAndPassword(n,i){return new ao(n,i,"password")}static _fromEmailAndCode(n,i,o=null){return new ao(n,i,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(n){const i=typeof n=="string"?JSON.parse(n):n;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(n){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kh(n,i,"signInWithPassword",Jj);case"emailLink":return Qj(n,{email:this._email,oobCode:this._password});default:Vn(n,"internal-error")}}async _linkToIdToken(n,i){switch(this.signInMethod){case"password":const o={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kh(n,o,"signUpPassword",Xj);case"emailLink":return Zj(n,{idToken:i,email:this._email,oobCode:this._password});default:Vn(n,"internal-error")}}_getReauthenticationResolver(n){return this._getIdTokenResponse(n)}}async function zi(a,n){return mo(a,"POST","/v1/accounts:signInWithIdp",ra(a,n))}const e4="http://localhost";class Va extends vf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(n){const i=new Va(n.providerId,n.signInMethod);return n.idToken||n.accessToken?(n.idToken&&(i.idToken=n.idToken),n.accessToken&&(i.accessToken=n.accessToken),n.nonce&&!n.pendingToken&&(i.nonce=n.nonce),n.pendingToken&&(i.pendingToken=n.pendingToken)):n.oauthToken&&n.oauthTokenSecret?(i.accessToken=n.oauthToken,i.secret=n.oauthTokenSecret):Vn("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(n){const i=typeof n=="string"?JSON.parse(n):n,{providerId:o,signInMethod:u,...f}=i;if(!o||!u)return null;const m=new Va(o,u);return m.idToken=f.idToken||void 0,m.accessToken=f.accessToken||void 0,m.secret=f.secret,m.nonce=f.nonce,m.pendingToken=f.pendingToken||null,m}_getIdTokenResponse(n){const i=this.buildRequest();return zi(n,i)}_linkToIdToken(n,i){const o=this.buildRequest();return o.idToken=i,zi(n,o)}_getReauthenticationResolver(n){const i=this.buildRequest();return i.autoCreate=!1,zi(n,i)}buildRequest(){const n={requestUri:e4,returnSecureToken:!0};if(this.pendingToken)n.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),n.postBody=ho(i)}return n}}function t4(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function n4(a){const n=Kl(Xl(a)).link,i=n?Kl(Xl(n)).deep_link_id:null,o=Kl(Xl(a)).deep_link_id;return(o?Kl(Xl(o)).link:null)||o||i||n||a}class wf{constructor(n){const i=Kl(Xl(n)),o=i.apiKey??null,u=i.oobCode??null,f=t4(i.mode??null);Re(o&&u&&f,"argument-error"),this.apiKey=o,this.operation=f,this.code=u,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(n){const i=n4(n);try{return new wf(i)}catch{return null}}}class Fi{constructor(){this.providerId=Fi.PROVIDER_ID}static credential(n,i){return ao._fromEmailAndPassword(n,i)}static credentialWithLink(n,i){const o=wf.parseLink(i);return Re(o,"argument-error"),ao._fromEmailAndCode(n,o.code,o.tenantId)}}Fi.PROVIDER_ID="password";Fi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class jf{constructor(n){this.providerId=n,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(n){this.defaultLanguageCode=n}setCustomParameters(n){return this.customParameters=n,this}getCustomParameters(){return this.customParameters}}class go extends jf{constructor(){super(...arguments),this.scopes=[]}addScope(n){return this.scopes.includes(n)||this.scopes.push(n),this}getScopes(){return[...this.scopes]}}class Xr extends go{constructor(){super("facebook.com")}static credential(n){return Va._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.FACEBOOK_SIGN_IN_METHOD,accessToken:n})}static credentialFromResult(n){return Xr.credentialFromTaggedObject(n)}static credentialFromError(n){return Xr.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n||!("oauthAccessToken"in n)||!n.oauthAccessToken)return null;try{return Xr.credential(n.oauthAccessToken)}catch{return null}}}Xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xr.PROVIDER_ID="facebook.com";class ar extends go{constructor(){super("google.com"),this.addScope("profile")}static credential(n,i){return Va._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:i})}static credentialFromResult(n){return ar.credentialFromTaggedObject(n)}static credentialFromError(n){return ar.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:i,oauthAccessToken:o}=n;if(!i&&!o)return null;try{return ar.credential(i,o)}catch{return null}}}ar.GOOGLE_SIGN_IN_METHOD="google.com";ar.PROVIDER_ID="google.com";class Jr extends go{constructor(){super("github.com")}static credential(n){return Va._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GITHUB_SIGN_IN_METHOD,accessToken:n})}static credentialFromResult(n){return Jr.credentialFromTaggedObject(n)}static credentialFromError(n){return Jr.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n||!("oauthAccessToken"in n)||!n.oauthAccessToken)return null;try{return Jr.credential(n.oauthAccessToken)}catch{return null}}}Jr.GITHUB_SIGN_IN_METHOD="github.com";Jr.PROVIDER_ID="github.com";class Qr extends go{constructor(){super("twitter.com")}static credential(n,i){return Va._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.TWITTER_SIGN_IN_METHOD,oauthToken:n,oauthTokenSecret:i})}static credentialFromResult(n){return Qr.credentialFromTaggedObject(n)}static credentialFromError(n){return Qr.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthAccessToken:i,oauthTokenSecret:o}=n;if(!i||!o)return null;try{return Qr.credential(i,o)}catch{return null}}}Qr.TWITTER_SIGN_IN_METHOD="twitter.com";Qr.PROVIDER_ID="twitter.com";async function s4(a,n){return mo(a,"POST","/v1/accounts:signUp",ra(a,n))}class Ga{constructor(n){this.user=n.user,this.providerId=n.providerId,this._tokenResponse=n._tokenResponse,this.operationType=n.operationType}static async _fromIdTokenResponse(n,i,o,u=!1){const f=await ns._fromIdTokenResponse(n,o,u),m=Gp(o);return new Ga({user:f,providerId:m,_tokenResponse:o,operationType:i})}static async _forOperation(n,i,o){await n._updateTokensIfNecessary(o,!0);const u=Gp(o);return new Ga({user:n,providerId:u,_tokenResponse:o,operationType:i})}}function Gp(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}class fu extends Us{constructor(n,i,o,u){super(i.code,i.message),this.operationType=o,this.user=u,Object.setPrototypeOf(this,fu.prototype),this.customData={appName:n.name,tenantId:n.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(n,i,o,u){return new fu(n,i,o,u)}}function wy(a,n,i,o){return(n==="reauthenticate"?i._getReauthenticationResolver(a):i._getIdTokenResponse(a)).catch(f=>{throw f.code==="auth/multi-factor-auth-required"?fu._fromErrorAndOperation(a,f,n,o):f})}async function r4(a,n,i=!1){const o=await Pi(a,n._linkToIdToken(a.auth,await a.getIdToken()),i);return Ga._forOperation(a,"link",o)}async function a4(a,n,i=!1){const{auth:o}=a;if(xn(o.app))return Promise.reject(ur(o));const u="reauthenticate";try{const f=await Pi(a,wy(o,u,n,a),i);Re(f.idToken,o,"internal-error");const m=yf(f.idToken);Re(m,o,"internal-error");const{sub:p}=m;return Re(a.uid===p,o,"user-mismatch"),Ga._forOperation(a,u,f)}catch(f){throw f?.code==="auth/user-not-found"&&Vn(o,"user-mismatch"),f}}async function jy(a,n,i=!1){if(xn(a.app))return Promise.reject(ur(a));const o="signIn",u=await wy(a,o,n),f=await Ga._fromIdTokenResponse(a,o,u);return i||await a._updateCurrentUser(f.user),f}async function i4(a,n){return jy(aa(a),n)}async function Ny(a){const n=aa(a);n._getPasswordPolicyInternal()&&await n._updatePasswordPolicy()}async function l4(a,n,i){if(xn(a.app))return Promise.reject(ur(a));const o=aa(a),m=await Kh(o,{returnSecureToken:!0,email:n,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",s4).catch(x=>{throw x.code==="auth/password-does-not-meet-requirements"&&Ny(a),x}),p=await Ga._fromIdTokenResponse(o,"signIn",m);return await o._updateCurrentUser(p.user),p}function o4(a,n,i){return xn(a.app)?Promise.reject(ur(a)):i4(yn(a),Fi.credential(n,i)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&Ny(a),o})}async function c4(a,n){return gr(a,"POST","/v1/accounts:update",n)}async function u4(a,{displayName:n,photoURL:i}){if(n===void 0&&i===void 0)return;const o=yn(a),f={idToken:await o.getIdToken(),displayName:n,photoUrl:i,returnSecureToken:!0},m=await Pi(o,c4(o.auth,f));o.displayName=m.displayName||null,o.photoURL=m.photoUrl||null;const p=o.providerData.find(({providerId:x})=>x==="password");p&&(p.displayName=o.displayName,p.photoURL=o.photoURL),await o._updateTokensIfNecessary(m)}function d4(a,n,i,o){return yn(a).onIdTokenChanged(n,i,o)}function h4(a,n,i){return yn(a).beforeAuthStateChanged(n,i)}function f4(a,n,i,o){return yn(a).onAuthStateChanged(n,i,o)}function m4(a){return yn(a).signOut()}const mu="__sak";class _y{constructor(n,i){this.storageRetriever=n,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(mu,"1"),this.storage.removeItem(mu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(n,i){return this.storage.setItem(n,JSON.stringify(i)),Promise.resolve()}_get(n){const i=this.storage.getItem(n);return Promise.resolve(i?JSON.parse(i):null)}_remove(n){return this.storage.removeItem(n),Promise.resolve()}get storage(){return this.storageRetriever()}}const g4=1e3,p4=10;class Sy extends _y{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,i)=>this.onStorageEvent(n,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=py(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const i of Object.keys(this.listeners)){const o=this.storage.getItem(i),u=this.localCache[i];o!==u&&n(i,u,o)}}onStorageEvent(n,i=!1){if(!n.key){this.forAllChangedKeys((m,p,x)=>{this.notifyListeners(m,x)});return}const o=n.key;i?this.detachListener():this.stopPolling();const u=()=>{const m=this.storage.getItem(o);!i&&this.localCache[o]===m||this.notifyListeners(o,m)},f=this.storage.getItem(o);Rj()&&f!==n.newValue&&n.newValue!==n.oldValue?setTimeout(u,p4):u()}notifyListeners(n,i){this.localCache[n]=i;const o=this.listeners[n];if(o)for(const u of Array.from(o))u(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,i,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:i,newValue:o}),!0)})},g4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,i){await super._set(n,i),this.localCache[n]=JSON.stringify(i)}async _get(n){const i=await super._get(n);return this.localCache[n]=JSON.stringify(i),i}async _remove(n){await super._remove(n),delete this.localCache[n]}}Sy.type="LOCAL";const x4=Sy;class ky extends _y{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,i){}_removeListener(n,i){}}ky.type="SESSION";const Cy=ky;function y4(a){return Promise.all(a.map(async n=>{try{return{fulfilled:!0,value:await n}}catch(i){return{fulfilled:!1,reason:i}}}))}class wu{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const i=this.receivers.find(u=>u.isListeningto(n));if(i)return i;const o=new wu(n);return this.receivers.push(o),o}isListeningto(n){return this.eventTarget===n}async handleEvent(n){const i=n,{eventId:o,eventType:u,data:f}=i.data,m=this.handlersMap[u];if(!m?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:u});const p=Array.from(m).map(async b=>b(i.origin,f)),x=await y4(p);i.ports[0].postMessage({status:"done",eventId:o,eventType:u,response:x})}_subscribe(n,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(i)}_unsubscribe(n,i){this.handlersMap[n]&&i&&this.handlersMap[n].delete(i),(!i||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wu.receivers=[];function Nf(a="",n=10){let i="";for(let o=0;o<n;o++)i+=Math.floor(Math.random()*10);return a+i}class b4{constructor(n){this.target=n,this.handlers=new Set}removeMessageHandler(n){n.messageChannel&&(n.messageChannel.port1.removeEventListener("message",n.onMessage),n.messageChannel.port1.close()),this.handlers.delete(n)}async _send(n,i,o=50){const u=typeof MessageChannel<"u"?new MessageChannel:null;if(!u)throw new Error("connection_unavailable");let f,m;return new Promise((p,x)=>{const b=Nf("",20);u.port1.start();const _=setTimeout(()=>{x(new Error("unsupported_event"))},o);m={messageChannel:u,onMessage(j){const S=j;if(S.data.eventId===b)switch(S.data.status){case"ack":clearTimeout(_),f=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(f),p(S.data.response);break;default:clearTimeout(_),clearTimeout(f),x(new Error("invalid_response"));break}}},this.handlers.add(m),u.port1.addEventListener("message",m.onMessage),this.target.postMessage({eventType:n,eventId:b,data:i},[u.port2])}).finally(()=>{m&&this.removeMessageHandler(m)})}}function Ls(){return window}function v4(a){Ls().location.href=a}function Ey(){return typeof Ls().WorkerGlobalScope<"u"&&typeof Ls().importScripts=="function"}async function w4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j4(){return navigator?.serviceWorker?.controller||null}function N4(){return Ey()?self:null}const Ty="firebaseLocalStorageDb",_4=1,gu="firebaseLocalStorage",Ay="fbase_key";class po{constructor(n){this.request=n}toPromise(){return new Promise((n,i)=>{this.request.addEventListener("success",()=>{n(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function ju(a,n){return a.transaction([gu],n?"readwrite":"readonly").objectStore(gu)}function S4(){const a=indexedDB.deleteDatabase(Ty);return new po(a).toPromise()}function Xh(){const a=indexedDB.open(Ty,_4);return new Promise((n,i)=>{a.addEventListener("error",()=>{i(a.error)}),a.addEventListener("upgradeneeded",()=>{const o=a.result;try{o.createObjectStore(gu,{keyPath:Ay})}catch(u){i(u)}}),a.addEventListener("success",async()=>{const o=a.result;o.objectStoreNames.contains(gu)?n(o):(o.close(),await S4(),n(await Xh()))})})}async function $p(a,n,i){const o=ju(a,!0).put({[Ay]:n,value:i});return new po(o).toPromise()}async function k4(a,n){const i=ju(a,!1).get(n),o=await new po(i).toPromise();return o===void 0?null:o.value}function Fp(a,n){const i=ju(a,!0).delete(n);return new po(i).toPromise()}const C4=800,E4=3;class Ry{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xh(),this.db)}async _withRetries(n){let i=0;for(;;)try{const o=await this._openDb();return await n(o)}catch(o){if(i++>E4)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ey()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wu._getInstance(N4()),this.receiver._subscribe("keyChanged",async(n,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(n,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await w4(),!this.activeServiceWorker)return;this.sender=new b4(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||j4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const n=await Xh();return await $p(n,mu,"1"),await Fp(n,mu),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,i){return this._withPendingWrite(async()=>(await this._withRetries(o=>$p(o,n,i)),this.localCache[n]=i,this.notifyServiceWorker(n)))}async _get(n){const i=await this._withRetries(o=>k4(o,n));return this.localCache[n]=i,i}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Fp(i,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){const n=await this._withRetries(u=>{const f=ju(u,!1).getAll();return new po(f).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];const i=[],o=new Set;if(n.length!==0)for(const{fbase_key:u,value:f}of n)o.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(f)&&(this.notifyListeners(u,f),i.push(u));for(const u of Object.keys(this.localCache))this.localCache[u]&&!o.has(u)&&(this.notifyListeners(u,null),i.push(u));return i}notifyListeners(n,i){this.localCache[n]=i;const o=this.listeners[n];if(o)for(const u of Array.from(o))u(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),C4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ry.type="LOCAL";const T4=Ry;new fo(3e4,6e4);function My(a,n){return n?or(n):(Re(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}class _f extends vf{constructor(n){super("custom","custom"),this.params=n}_getIdTokenResponse(n){return zi(n,this._buildIdpRequest())}_linkToIdToken(n,i){return zi(n,this._buildIdpRequest(i))}_getReauthenticationResolver(n){return zi(n,this._buildIdpRequest())}_buildIdpRequest(n){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return n&&(i.idToken=n),i}}function A4(a){return jy(a.auth,new _f(a),a.bypassAuthState)}function R4(a){const{auth:n,user:i}=a;return Re(i,n,"internal-error"),a4(i,new _f(a),a.bypassAuthState)}async function M4(a){const{auth:n,user:i}=a;return Re(i,n,"internal-error"),r4(i,new _f(a),a.bypassAuthState)}class Oy{constructor(n,i,o,u,f=!1){this.auth=n,this.resolver=o,this.user=u,this.bypassAuthState=f,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(n,i)=>{this.pendingPromise={resolve:n,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(n){const{urlResponse:i,sessionId:o,postBody:u,tenantId:f,error:m,type:p}=n;if(m){this.reject(m);return}const x={auth:this.auth,requestUri:i,sessionId:o,tenantId:f||void 0,postBody:u||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(x))}catch(b){this.reject(b)}}onError(n){this.reject(n)}getIdpTask(n){switch(n){case"signInViaPopup":case"signInViaRedirect":return A4;case"linkViaPopup":case"linkViaRedirect":return M4;case"reauthViaPopup":case"reauthViaRedirect":return R4;default:Vn(this.auth,"internal-error")}}resolve(n){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(n),this.unregisterAndCleanUp()}reject(n){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(n),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const O4=new fo(2e3,1e4);async function L4(a,n,i){if(xn(a.app))return Promise.reject(rs(a,"operation-not-supported-in-this-environment"));const o=aa(a);dj(a,n,jf);const u=My(o,i);return new Da(o,"signInViaPopup",n,u).executeNotNull()}class Da extends Oy{constructor(n,i,o,u,f){super(n,i,u,f),this.provider=o,this.authWindow=null,this.pollId=null,Da.currentPopupAction&&Da.currentPopupAction.cancel(),Da.currentPopupAction=this}async executeNotNull(){const n=await this.execute();return Re(n,this.auth,"internal-error"),n}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const n=Nf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(rs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(rs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Da.currentPopupAction=null}pollUserCancellation(){const n=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,O4.get())};n()}}Da.currentPopupAction=null;const D4="pendingRedirect",ru=new Map;class I4 extends Oy{constructor(n,i,o=!1){super(n,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,o),this.eventId=null}async execute(){let n=ru.get(this.auth._key());if(!n){try{const o=await U4(this.resolver,this.auth)?await super.execute():null;n=()=>Promise.resolve(o)}catch(i){n=()=>Promise.reject(i)}ru.set(this.auth._key(),n)}return this.bypassAuthState||ru.set(this.auth._key(),()=>Promise.resolve(null)),n()}async onAuthEvent(n){if(n.type==="signInViaRedirect")return super.onAuthEvent(n);if(n.type==="unknown"){this.resolve(null);return}if(n.eventId){const i=await this.auth._redirectUserForId(n.eventId);if(i)return this.user=i,super.onAuthEvent(n);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U4(a,n){const i=P4(n),o=B4(a);if(!await o._isAvailable())return!1;const u=await o._get(i)==="true";return await o._remove(i),u}function z4(a,n){ru.set(a._key(),n)}function B4(a){return or(a._redirectPersistence)}function P4(a){return su(D4,a.config.apiKey,a.name)}async function H4(a,n,i=!1){if(xn(a.app))return Promise.reject(ur(a));const o=aa(a),u=My(o,n),m=await new I4(o,u,i).execute();return m&&!i&&(delete m.user._redirectEventId,await o._persistUserIfCurrent(m.user),await o._setRedirectUser(null,n)),m}const V4=600*1e3;class G4{constructor(n){this.auth=n,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(n){this.consumers.add(n),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,n)&&(this.sendToConsumer(this.queuedRedirectEvent,n),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(n){this.consumers.delete(n)}onEvent(n){if(this.hasEventBeenHandled(n))return!1;let i=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(n,o)&&(i=!0,this.sendToConsumer(n,o),this.saveEventToCache(n))}),this.hasHandledPotentialRedirect||!$4(n)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=n,i=!0)),i}sendToConsumer(n,i){if(n.error&&!Ly(n)){const o=n.error.code?.split("auth/")[1]||"internal-error";i.onError(rs(this.auth,o))}else i.onAuthEvent(n)}isEventForConsumer(n,i){const o=i.eventId===null||!!n.eventId&&n.eventId===i.eventId;return i.filter.includes(n.type)&&o}hasEventBeenHandled(n){return Date.now()-this.lastProcessedEventTime>=V4&&this.cachedEventUids.clear(),this.cachedEventUids.has(qp(n))}saveEventToCache(n){this.cachedEventUids.add(qp(n)),this.lastProcessedEventTime=Date.now()}}function qp(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(n=>n).join("-")}function Ly({type:a,error:n}){return a==="unknown"&&n?.code==="auth/no-auth-event"}function $4(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ly(a);default:return!1}}async function F4(a,n={}){return gr(a,"GET","/v1/projects",n)}const q4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W4=/^https?/;async function Y4(a){if(a.config.emulator)return;const{authorizedDomains:n}=await F4(a);for(const i of n)try{if(K4(i))return}catch{}Vn(a,"unauthorized-domain")}function K4(a){const n=Wh(),{protocol:i,hostname:o}=new URL(n);if(a.startsWith("chrome-extension://")){const m=new URL(a);return m.hostname===""&&o===""?i==="chrome-extension:"&&a.replace("chrome-extension://","")===n.replace("chrome-extension://",""):i==="chrome-extension:"&&m.hostname===o}if(!W4.test(i))return!1;if(q4.test(a))return o===a;const u=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+u+"|"+u+")$","i").test(o)}const X4=new fo(3e4,6e4);function Wp(){const a=Ls().___jsl;if(a?.H){for(const n of Object.keys(a.H))if(a.H[n].r=a.H[n].r||[],a.H[n].L=a.H[n].L||[],a.H[n].r=[...a.H[n].L],a.CP)for(let i=0;i<a.CP.length;i++)a.CP[i]=null}}function J4(a){return new Promise((n,i)=>{function o(){Wp(),gapi.load("gapi.iframes",{callback:()=>{n(gapi.iframes.getContext())},ontimeout:()=>{Wp(),i(rs(a,"network-request-failed"))},timeout:X4.get()})}if(Ls().gapi?.iframes?.Iframe)n(gapi.iframes.getContext());else if(Ls().gapi?.load)o();else{const u=Pj("iframefcb");return Ls()[u]=()=>{gapi.load?o():i(rs(a,"network-request-failed"))},yy(`${Bj()}?onload=${u}`).catch(f=>i(f))}}).catch(n=>{throw au=null,n})}let au=null;function Q4(a){return au=au||J4(a),au}const Z4=new fo(5e3,15e3),eN="__/auth/iframe",tN="emulator/auth/iframe",nN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rN(a){const n=a.config;Re(n.authDomain,a,"auth-domain-config-required");const i=n.emulator?xf(n,tN):`https://${a.config.authDomain}/${eN}`,o={apiKey:n.apiKey,appName:a.name,v:Wa},u=sN.get(a.config.apiHost);u&&(o.eid=u);const f=a._getFrameworks();return f.length&&(o.fw=f.join(",")),`${i}?${ho(o).slice(1)}`}async function aN(a){const n=await Q4(a),i=Ls().gapi;return Re(i,a,"internal-error"),n.open({where:document.body,url:rN(a),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nN,dontclear:!0},o=>new Promise(async(u,f)=>{await o.restyle({setHideOnLeave:!1});const m=rs(a,"network-request-failed"),p=Ls().setTimeout(()=>{f(m)},Z4.get());function x(){Ls().clearTimeout(p),u(o)}o.ping(x).then(x,()=>{f(m)})}))}const iN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lN=500,oN=600,cN="_blank",uN="http://localhost";class Yp{constructor(n){this.window=n,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dN(a,n,i,o=lN,u=oN){const f=Math.max((window.screen.availHeight-u)/2,0).toString(),m=Math.max((window.screen.availWidth-o)/2,0).toString();let p="";const x={...iN,width:o.toString(),height:u.toString(),top:f,left:m},b=cn().toLowerCase();i&&(p=dy(b)?cN:i),cy(b)&&(n=n||uN,x.scrollbars="yes");const _=Object.entries(x).reduce((S,[U,E])=>`${S}${U}=${E},`,"");if(Aj(b)&&p!=="_self")return hN(n||"",p),new Yp(null);const j=window.open(n||"",p,_);Re(j,a,"popup-blocked");try{j.focus()}catch{}return new Yp(j)}function hN(a,n){const i=document.createElement("a");i.href=a,i.target=n;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(o)}const fN="__/auth/handler",mN="emulator/auth/handler",gN=encodeURIComponent("fac");async function Kp(a,n,i,o,u,f){Re(a.config.authDomain,a,"auth-domain-config-required"),Re(a.config.apiKey,a,"invalid-api-key");const m={apiKey:a.config.apiKey,appName:a.name,authType:i,redirectUrl:o,v:Wa,eventId:u};if(n instanceof jf){n.setDefaultLanguage(a.languageCode),m.providerId=n.providerId||"",J2(n.getCustomParameters())||(m.customParameters=JSON.stringify(n.getCustomParameters()));for(const[_,j]of Object.entries({}))m[_]=j}if(n instanceof go){const _=n.getScopes().filter(j=>j!=="");_.length>0&&(m.scopes=_.join(","))}a.tenantId&&(m.tid=a.tenantId);const p=m;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const x=await a._getAppCheckToken(),b=x?`#${gN}=${encodeURIComponent(x)}`:"";return`${pN(a)}?${ho(p).slice(1)}${b}`}function pN({config:a}){return a.emulator?xf(a,mN):`https://${a.authDomain}/${fN}`}const Lh="webStorageSupport";class xN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cy,this._completeRedirectFn=H4,this._overrideRedirectResult=z4}async _openPopup(n,i,o,u){fr(this.eventManagers[n._key()]?.manager,"_initialize() not called before _openPopup()");const f=await Kp(n,i,o,Wh(),u);return dN(n,f,Nf())}async _openRedirect(n,i,o,u){await this._originValidation(n);const f=await Kp(n,i,o,Wh(),u);return v4(f),new Promise(()=>{})}_initialize(n){const i=n._key();if(this.eventManagers[i]){const{manager:u,promise:f}=this.eventManagers[i];return u?Promise.resolve(u):(fr(f,"If manager is not set, promise should be"),f)}const o=this.initAndGetManager(n);return this.eventManagers[i]={promise:o},o.catch(()=>{delete this.eventManagers[i]}),o}async initAndGetManager(n){const i=await aN(n),o=new G4(n);return i.register("authEvent",u=>(Re(u?.authEvent,n,"invalid-auth-event"),{status:o.onEvent(u.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[n._key()]={manager:o},this.iframes[n._key()]=i,o}_isIframeWebStorageSupported(n,i){this.iframes[n._key()].send(Lh,{type:Lh},u=>{const f=u?.[0]?.[Lh];f!==void 0&&i(!!f),Vn(n,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(n){const i=n._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=Y4(n)),this.originValidationPromises[i]}get _shouldInitProactively(){return py()||uy()||bf()}}const yN=xN;var Xp="@firebase/auth",Jp="1.12.0";class bN{constructor(n){this.auth=n,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(n){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(n)}:null}addAuthTokenListener(n){if(this.assertAuthConfigured(),this.internalListeners.has(n))return;const i=this.auth.onIdTokenChanged(o=>{n(o?.stsTokenManager.accessToken||null)});this.internalListeners.set(n,i),this.updateProactiveRefresh()}removeAuthTokenListener(n){this.assertAuthConfigured();const i=this.internalListeners.get(n);i&&(this.internalListeners.delete(n),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vN(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wN(a){Ha(new na("auth",(n,{options:i})=>{const o=n.getProvider("app").getImmediate(),u=n.getProvider("heartbeat"),f=n.getProvider("app-check-internal"),{apiKey:m,authDomain:p}=o.options;Re(m&&!m.includes(":"),"invalid-api-key",{appName:o.name});const x={apiKey:m,authDomain:p,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xy(a)},b=new Ij(o,u,f,x);return qj(b,i),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,i,o)=>{n.getProvider("auth-internal").initialize()})),Ha(new na("auth-internal",n=>{const i=aa(n.getProvider("auth").getImmediate());return(o=>new bN(o))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Os(Xp,Jp,vN(a)),Os(Xp,Jp,"esm2020")}const jN=300,NN=Kx("authIdTokenMaxAge")||jN;let Qp=null;const _N=a=>async n=>{const i=n&&await n.getIdTokenResult(),o=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(o&&o>NN)return;const u=i?.token;Qp!==u&&(Qp=u,await fetch(a,{method:u?"POST":"DELETE",headers:u?{Authorization:`Bearer ${u}`}:{}}))};function SN(a=mf()){const n=bu(a,"auth");if(n.isInitialized())return n.getImmediate();const i=Fj(a,{popupRedirectResolver:yN,persistence:[T4,x4,Cy]}),o=Kx("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const f=new URL(o,location.origin);if(location.origin===f.origin){const m=_N(f.toString());h4(i,m,()=>m(i.currentUser)),d4(i,p=>m(p))}}const u=qx("auth");return u&&Wj(i,`http://${u}`),i}function kN(){return document.getElementsByTagName("head")?.[0]??document}Uj({loadJS(a){return new Promise((n,i)=>{const o=document.createElement("script");o.setAttribute("src",a),o.onload=n,o.onerror=u=>{const f=rs("internal-error");f.customData=u,i(f)},o.type="text/javascript",o.charset="UTF-8",kN().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wN("Browser");const Dy="firebasestorage.googleapis.com",Iy="storageBucket",CN=120*1e3,EN=600*1e3;class _t extends Us{constructor(n,i,o=0){super(Dh(n),`Firebase Storage: ${i} (${Dh(n)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_t.prototype)}get status(){return this.status_}set status(n){this.status_=n}_codeEquals(n){return Dh(n)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(n){this.customData.serverResponse=n,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Nt;(function(a){a.UNKNOWN="unknown",a.OBJECT_NOT_FOUND="object-not-found",a.BUCKET_NOT_FOUND="bucket-not-found",a.PROJECT_NOT_FOUND="project-not-found",a.QUOTA_EXCEEDED="quota-exceeded",a.UNAUTHENTICATED="unauthenticated",a.UNAUTHORIZED="unauthorized",a.UNAUTHORIZED_APP="unauthorized-app",a.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",a.INVALID_CHECKSUM="invalid-checksum",a.CANCELED="canceled",a.INVALID_EVENT_NAME="invalid-event-name",a.INVALID_URL="invalid-url",a.INVALID_DEFAULT_BUCKET="invalid-default-bucket",a.NO_DEFAULT_BUCKET="no-default-bucket",a.CANNOT_SLICE_BLOB="cannot-slice-blob",a.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",a.NO_DOWNLOAD_URL="no-download-url",a.INVALID_ARGUMENT="invalid-argument",a.INVALID_ARGUMENT_COUNT="invalid-argument-count",a.APP_DELETED="app-deleted",a.INVALID_ROOT_OPERATION="invalid-root-operation",a.INVALID_FORMAT="invalid-format",a.INTERNAL_ERROR="internal-error",a.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Nt||(Nt={}));function Dh(a){return"storage/"+a}function Sf(){const a="An unknown error occurred, please check the error payload for server response.";return new _t(Nt.UNKNOWN,a)}function TN(a){return new _t(Nt.OBJECT_NOT_FOUND,"Object '"+a+"' does not exist.")}function AN(a){return new _t(Nt.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function RN(){const a="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _t(Nt.UNAUTHENTICATED,a)}function MN(){return new _t(Nt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ON(a){return new _t(Nt.UNAUTHORIZED,"User does not have permission to access '"+a+"'.")}function LN(){return new _t(Nt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function DN(){return new _t(Nt.CANCELED,"User canceled the upload/download.")}function IN(a){return new _t(Nt.INVALID_URL,"Invalid URL '"+a+"'.")}function UN(a){return new _t(Nt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+a+"'.")}function zN(){return new _t(Nt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Iy+"' property when initializing the app?")}function BN(){return new _t(Nt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function PN(){return new _t(Nt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function HN(a){return new _t(Nt.UNSUPPORTED_ENVIRONMENT,`${a} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Jh(a){return new _t(Nt.INVALID_ARGUMENT,a)}function Uy(){return new _t(Nt.APP_DELETED,"The Firebase app was deleted.")}function VN(a){return new _t(Nt.INVALID_ROOT_OPERATION,"The operation '"+a+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zl(a,n){return new _t(Nt.INVALID_FORMAT,"String does not match format '"+a+"': "+n)}function Yl(a){throw new _t(Nt.INTERNAL_ERROR,"Internal error: "+a)}class En{constructor(n,i){this.bucket=n,this.path_=i}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(n,i){let o;try{o=En.makeFromUrl(n,i)}catch{return new En(n,"")}if(o.path==="")return o;throw UN(n)}static makeFromUrl(n,i){let o=null;const u="([A-Za-z0-9.\\-_]+)";function f(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const m="(/(.*))?$",p=new RegExp("^gs://"+u+m,"i"),x={bucket:1,path:3};function b(te){te.path_=decodeURIComponent(te.path)}const _="v[A-Za-z0-9_]+",j=i.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",U=new RegExp(`^https?://${j}/${_}/b/${u}/o${S}`,"i"),E={bucket:1,path:3},k=i===Dy?"(?:storage.googleapis.com|storage.cloud.google.com)":i,O="([^?#]*)",V=new RegExp(`^https?://${k}/${u}/${O}`,"i"),G=[{regex:p,indices:x,postModify:f},{regex:U,indices:E,postModify:b},{regex:V,indices:{bucket:1,path:2},postModify:b}];for(let te=0;te<G.length;te++){const ce=G[te],se=ce.regex.exec(n);if(se){const T=se[ce.indices.bucket];let C=se[ce.indices.path];C||(C=""),o=new En(T,C),ce.postModify(o);break}}if(o==null)throw IN(n);return o}}class GN{constructor(n){this.promise_=Promise.reject(n)}getPromise(){return this.promise_}cancel(n=!1){}}function $N(a,n,i){let o=1,u=null,f=null,m=!1,p=0;function x(){return p===2}let b=!1;function _(...O){b||(b=!0,n.apply(null,O))}function j(O){u=setTimeout(()=>{u=null,a(U,x())},O)}function S(){f&&clearTimeout(f)}function U(O,...V){if(b){S();return}if(O){S(),_.call(null,O,...V);return}if(x()||m){S(),_.call(null,O,...V);return}o<64&&(o*=2);let G;p===1?(p=2,G=0):G=(o+Math.random())*1e3,j(G)}let E=!1;function k(O){E||(E=!0,S(),!b&&(u!==null?(O||(p=2),clearTimeout(u),j(0)):O||(p=1)))}return j(0),f=setTimeout(()=>{m=!0,k(!0)},i),k}function FN(a){a(!1)}function qN(a){return a!==void 0}function WN(a){return typeof a=="object"&&!Array.isArray(a)}function kf(a){return typeof a=="string"||a instanceof String}function Zp(a){return Cf()&&a instanceof Blob}function Cf(){return typeof Blob<"u"}function ex(a,n,i,o){if(o<n)throw Jh(`Invalid value for '${a}'. Expected ${n} or greater.`);if(o>i)throw Jh(`Invalid value for '${a}'. Expected ${i} or less.`)}function Ef(a,n,i){let o=n;return i==null&&(o=`https://${n}`),`${i}://${o}/v0${a}`}function zy(a){const n=encodeURIComponent;let i="?";for(const o in a)if(a.hasOwnProperty(o)){const u=n(o)+"="+n(a[o]);i=i+u+"&"}return i=i.slice(0,-1),i}var Ua;(function(a){a[a.NO_ERROR=0]="NO_ERROR",a[a.NETWORK_ERROR=1]="NETWORK_ERROR",a[a.ABORT=2]="ABORT"})(Ua||(Ua={}));function YN(a,n){const i=a>=500&&a<600,u=[408,429].indexOf(a)!==-1,f=n.indexOf(a)!==-1;return i||u||f}class KN{constructor(n,i,o,u,f,m,p,x,b,_,j,S=!0,U=!1){this.url_=n,this.method_=i,this.headers_=o,this.body_=u,this.successCodes_=f,this.additionalRetryCodes_=m,this.callback_=p,this.errorCallback_=x,this.timeout_=b,this.progressCallback_=_,this.connectionFactory_=j,this.retry=S,this.isUsingEmulator=U,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,k)=>{this.resolve_=E,this.reject_=k,this.start_()})}start_(){const n=(o,u)=>{if(u){o(!1,new Wc(!1,null,!0));return}const f=this.connectionFactory_();this.pendingConnection_=f;const m=p=>{const x=p.loaded,b=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(x,b)};this.progressCallback_!==null&&f.addUploadProgressListener(m),f.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&f.removeUploadProgressListener(m),this.pendingConnection_=null;const p=f.getErrorCode()===Ua.NO_ERROR,x=f.getStatus();if(!p||YN(x,this.additionalRetryCodes_)&&this.retry){const _=f.getErrorCode()===Ua.ABORT;o(!1,new Wc(!1,null,_));return}const b=this.successCodes_.indexOf(x)!==-1;o(!0,new Wc(b,f))})},i=(o,u)=>{const f=this.resolve_,m=this.reject_,p=u.connection;if(u.wasSuccessCode)try{const x=this.callback_(p,p.getResponse());qN(x)?f(x):f()}catch(x){m(x)}else if(p!==null){const x=Sf();x.serverResponse=p.getErrorText(),this.errorCallback_?m(this.errorCallback_(p,x)):m(x)}else if(u.canceled){const x=this.appDelete_?Uy():DN();m(x)}else{const x=LN();m(x)}};this.canceled_?i(!1,new Wc(!1,null,!0)):this.backoffId_=$N(n,i,this.timeout_)}getPromise(){return this.promise_}cancel(n){this.canceled_=!0,this.appDelete_=n||!1,this.backoffId_!==null&&FN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Wc{constructor(n,i,o){this.wasSuccessCode=n,this.connection=i,this.canceled=!!o}}function XN(a,n){n!==null&&n.length>0&&(a.Authorization="Firebase "+n)}function JN(a,n){a["X-Firebase-Storage-Version"]="webjs/"+(n??"AppManager")}function QN(a,n){n&&(a["X-Firebase-GMPID"]=n)}function ZN(a,n){n!==null&&(a["X-Firebase-AppCheck"]=n)}function e_(a,n,i,o,u,f,m=!0,p=!1){const x=zy(a.urlParams),b=a.url+x,_=Object.assign({},a.headers);return QN(_,n),XN(_,i),JN(_,f),ZN(_,o),new KN(b,a.method,_,a.body,a.successCodes,a.additionalRetryCodes,a.handler,a.errorHandler,a.timeout,a.progressCallback,u,m,p)}function t_(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function n_(...a){const n=t_();if(n!==void 0){const i=new n;for(let o=0;o<a.length;o++)i.append(a[o]);return i.getBlob()}else{if(Cf())return new Blob(a);throw new _t(Nt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function s_(a,n,i){return a.webkitSlice?a.webkitSlice(n,i):a.mozSlice?a.mozSlice(n,i):a.slice?a.slice(n,i):null}function r_(a){if(typeof atob>"u")throw HN("base-64");return atob(a)}const Rs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ih{constructor(n,i){this.data=n,this.contentType=i||null}}function a_(a,n){switch(a){case Rs.RAW:return new Ih(By(n));case Rs.BASE64:case Rs.BASE64URL:return new Ih(Py(a,n));case Rs.DATA_URL:return new Ih(l_(n),o_(n))}throw Sf()}function By(a){const n=[];for(let i=0;i<a.length;i++){let o=a.charCodeAt(i);if(o<=127)n.push(o);else if(o<=2047)n.push(192|o>>6,128|o&63);else if((o&64512)===55296)if(!(i<a.length-1&&(a.charCodeAt(i+1)&64512)===56320))n.push(239,191,189);else{const f=o,m=a.charCodeAt(++i);o=65536|(f&1023)<<10|m&1023,n.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|o&63)}else(o&64512)===56320?n.push(239,191,189):n.push(224|o>>12,128|o>>6&63,128|o&63)}return new Uint8Array(n)}function i_(a){let n;try{n=decodeURIComponent(a)}catch{throw Zl(Rs.DATA_URL,"Malformed data URL.")}return By(n)}function Py(a,n){switch(a){case Rs.BASE64:{const u=n.indexOf("-")!==-1,f=n.indexOf("_")!==-1;if(u||f)throw Zl(a,"Invalid character '"+(u?"-":"_")+"' found: is it base64url encoded?");break}case Rs.BASE64URL:{const u=n.indexOf("+")!==-1,f=n.indexOf("/")!==-1;if(u||f)throw Zl(a,"Invalid character '"+(u?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/");break}}let i;try{i=r_(n)}catch(u){throw u.message.includes("polyfill")?u:Zl(a,"Invalid character found")}const o=new Uint8Array(i.length);for(let u=0;u<i.length;u++)o[u]=i.charCodeAt(u);return o}class Hy{constructor(n){this.base64=!1,this.contentType=null;const i=n.match(/^data:([^,]+)?,/);if(i===null)throw Zl(Rs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=i[1]||null;o!=null&&(this.base64=c_(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=n.substring(n.indexOf(",")+1)}}function l_(a){const n=new Hy(a);return n.base64?Py(Rs.BASE64,n.rest):i_(n.rest)}function o_(a){return new Hy(a).contentType}function c_(a,n){return a.length>=n.length?a.substring(a.length-n.length)===n:!1}class Zr{constructor(n,i){let o=0,u="";Zp(n)?(this.data_=n,o=n.size,u=n.type):n instanceof ArrayBuffer?(i?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),o=this.data_.length):n instanceof Uint8Array&&(i?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),o=n.length),this.size_=o,this.type_=u}size(){return this.size_}type(){return this.type_}slice(n,i){if(Zp(this.data_)){const o=this.data_,u=s_(o,n,i);return u===null?null:new Zr(u)}else{const o=new Uint8Array(this.data_.buffer,n,i-n);return new Zr(o,!0)}}static getBlob(...n){if(Cf()){const i=n.map(o=>o instanceof Zr?o.data_:o);return new Zr(n_.apply(null,i))}else{const i=n.map(m=>kf(m)?a_(Rs.RAW,m).data:m.data_);let o=0;i.forEach(m=>{o+=m.byteLength});const u=new Uint8Array(o);let f=0;return i.forEach(m=>{for(let p=0;p<m.length;p++)u[f++]=m[p]}),new Zr(u,!0)}}uploadData(){return this.data_}}function Vy(a){let n;try{n=JSON.parse(a)}catch{return null}return WN(n)?n:null}function u_(a){if(a.length===0)return null;const n=a.lastIndexOf("/");return n===-1?"":a.slice(0,n)}function d_(a,n){const i=n.split("/").filter(o=>o.length>0).join("/");return a.length===0?i:a+"/"+i}function Gy(a){const n=a.lastIndexOf("/",a.length-2);return n===-1?a:a.slice(n+1)}function h_(a,n){return n}class an{constructor(n,i,o,u){this.server=n,this.local=i||n,this.writable=!!o,this.xform=u||h_}}let Yc=null;function f_(a){return!kf(a)||a.length<2?a:Gy(a)}function $y(){if(Yc)return Yc;const a=[];a.push(new an("bucket")),a.push(new an("generation")),a.push(new an("metageneration")),a.push(new an("name","fullPath",!0));function n(f,m){return f_(m)}const i=new an("name");i.xform=n,a.push(i);function o(f,m){return m!==void 0?Number(m):m}const u=new an("size");return u.xform=o,a.push(u),a.push(new an("timeCreated")),a.push(new an("updated")),a.push(new an("md5Hash",null,!0)),a.push(new an("cacheControl",null,!0)),a.push(new an("contentDisposition",null,!0)),a.push(new an("contentEncoding",null,!0)),a.push(new an("contentLanguage",null,!0)),a.push(new an("contentType",null,!0)),a.push(new an("metadata","customMetadata",!0)),Yc=a,Yc}function m_(a,n){function i(){const o=a.bucket,u=a.fullPath,f=new En(o,u);return n._makeStorageReference(f)}Object.defineProperty(a,"ref",{get:i})}function g_(a,n,i){const o={};o.type="file";const u=i.length;for(let f=0;f<u;f++){const m=i[f];o[m.local]=m.xform(o,n[m.server])}return m_(o,a),o}function Fy(a,n,i){const o=Vy(n);return o===null?null:g_(a,o,i)}function p_(a,n,i,o){const u=Vy(n);if(u===null||!kf(u.downloadTokens))return null;const f=u.downloadTokens;if(f.length===0)return null;const m=encodeURIComponent;return f.split(",").map(b=>{const _=a.bucket,j=a.fullPath,S="/b/"+m(_)+"/o/"+m(j),U=Ef(S,i,o),E=zy({alt:"media",token:b});return U+E})[0]}function x_(a,n){const i={},o=n.length;for(let u=0;u<o;u++){const f=n[u];f.writable&&(i[f.server]=a[f.local])}return JSON.stringify(i)}class qy{constructor(n,i,o,u){this.url=n,this.method=i,this.handler=o,this.timeout=u,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Wy(a){if(!a)throw Sf()}function y_(a,n){function i(o,u){const f=Fy(a,u,n);return Wy(f!==null),f}return i}function b_(a,n){function i(o,u){const f=Fy(a,u,n);return Wy(f!==null),p_(f,u,a.host,a._protocol)}return i}function Yy(a){function n(i,o){let u;return i.getStatus()===401?i.getErrorText().includes("Firebase App Check token is invalid")?u=MN():u=RN():i.getStatus()===402?u=AN(a.bucket):i.getStatus()===403?u=ON(a.path):u=o,u.status=i.getStatus(),u.serverResponse=o.serverResponse,u}return n}function v_(a){const n=Yy(a);function i(o,u){let f=n(o,u);return o.getStatus()===404&&(f=TN(a.path)),f.serverResponse=u.serverResponse,f}return i}function w_(a,n,i){const o=n.fullServerUrl(),u=Ef(o,a.host,a._protocol),f="GET",m=a.maxOperationRetryTime,p=new qy(u,f,b_(a,i),m);return p.errorHandler=v_(n),p}function j_(a,n){return a&&a.contentType||n&&n.type()||"application/octet-stream"}function N_(a,n,i){const o=Object.assign({},i);return o.fullPath=a.path,o.size=n.size(),o.contentType||(o.contentType=j_(null,n)),o}function __(a,n,i,o,u){const f=n.bucketOnlyServerUrl(),m={"X-Goog-Upload-Protocol":"multipart"};function p(){let G="";for(let te=0;te<2;te++)G=G+Math.random().toString().slice(2);return G}const x=p();m["Content-Type"]="multipart/related; boundary="+x;const b=N_(n,o,u),_=x_(b,i),j="--"+x+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+x+`\r
Content-Type: `+b.contentType+`\r
\r
`,S=`\r
--`+x+"--",U=Zr.getBlob(j,o,S);if(U===null)throw BN();const E={name:b.fullPath},k=Ef(f,a.host,a._protocol),O="POST",V=a.maxUploadRetryTime,F=new qy(k,O,y_(a,i),V);return F.urlParams=E,F.headers=m,F.body=U.uploadData(),F.errorHandler=Yy(n),F}class S_{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ua.NO_ERROR,this.sendPromise_=new Promise(n=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ua.ABORT,n()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ua.NETWORK_ERROR,n()}),this.xhr_.addEventListener("load",()=>{n()})})}send(n,i,o,u,f){if(this.sent_)throw Yl("cannot .send() more than once");if(qa(n)&&o&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(i,n,!0),f!==void 0)for(const m in f)f.hasOwnProperty(m)&&this.xhr_.setRequestHeader(m,f[m].toString());return u!==void 0?this.xhr_.send(u):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(n){return this.xhr_.getResponseHeader(n)}addUploadProgressListener(n){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",n)}removeUploadProgressListener(n){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",n)}}class k_ extends S_{initXhr(){this.xhr_.responseType="text"}}function Ky(){return new k_}class $a{constructor(n,i){this._service=n,i instanceof En?this._location=i:this._location=En.makeFromUrl(i,n.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(n,i){return new $a(n,i)}get root(){const n=new En(this._location.bucket,"");return this._newRef(this._service,n)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Gy(this._location.path)}get storage(){return this._service}get parent(){const n=u_(this._location.path);if(n===null)return null;const i=new En(this._location.bucket,n);return new $a(this._service,i)}_throwIfRoot(n){if(this._location.path==="")throw VN(n)}}function C_(a,n,i){a._throwIfRoot("uploadBytes");const o=__(a.storage,a._location,$y(),new Zr(n,!0),i);return a.storage.makeRequestWithTokens(o,Ky).then(u=>({metadata:u,ref:a}))}function E_(a){a._throwIfRoot("getDownloadURL");const n=w_(a.storage,a._location,$y());return a.storage.makeRequestWithTokens(n,Ky).then(i=>{if(i===null)throw PN();return i})}function T_(a,n){const i=d_(a._location.path,n),o=new En(a._location.bucket,i);return new $a(a.storage,o)}function A_(a){return/^[A-Za-z]+:\/\//.test(a)}function R_(a,n){return new $a(a,n)}function Xy(a,n){if(a instanceof Tf){const i=a;if(i._bucket==null)throw zN();const o=new $a(i,i._bucket);return n!=null?Xy(o,n):o}else return n!==void 0?T_(a,n):a}function M_(a,n){if(n&&A_(n)){if(a instanceof Tf)return R_(a,n);throw Jh("To use ref(service, url), the first argument must be a Storage instance.")}else return Xy(a,n)}function tx(a,n){const i=n?.[Iy];return i==null?null:En.makeFromBucketSpec(i,a)}function O_(a,n,i,o={}){a.host=`${n}:${i}`;const u=qa(n);u&&(uf(`https://${a.host}/b`),df("Storage",!0)),a._isUsingEmulator=!0,a._protocol=u?"https":"http";const{mockUserToken:f}=o;f&&(a._overrideAuthToken=typeof f=="string"?f:Xx(f,a.app.options.projectId))}class Tf{constructor(n,i,o,u,f,m=!1){this.app=n,this._authProvider=i,this._appCheckProvider=o,this._url=u,this._firebaseVersion=f,this._isUsingEmulator=m,this._bucket=null,this._host=Dy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CN,this._maxUploadRetryTime=EN,this._requests=new Set,u!=null?this._bucket=En.makeFromBucketSpec(u,this._host):this._bucket=tx(this._host,this.app.options)}get host(){return this._host}set host(n){this._host=n,this._url!=null?this._bucket=En.makeFromBucketSpec(this._url,n):this._bucket=tx(n,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(n){ex("time",0,Number.POSITIVE_INFINITY,n),this._maxUploadRetryTime=n}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(n){ex("time",0,Number.POSITIVE_INFINITY,n),this._maxOperationRetryTime=n}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const n=this._authProvider.getImmediate({optional:!0});if(n){const i=await n.getToken();if(i!==null)return i.accessToken}return null}async _getAppCheckToken(){if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=this._appCheckProvider.getImmediate({optional:!0});return n?(await n.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(n=>n.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(n){return new $a(this,n)}_makeRequest(n,i,o,u,f=!0){if(this._deleted)return new GN(Uy());{const m=e_(n,this._appId,o,u,i,this._firebaseVersion,f,this._isUsingEmulator);return this._requests.add(m),m.getPromise().then(()=>this._requests.delete(m),()=>this._requests.delete(m)),m}}async makeRequestWithTokens(n,i){const[o,u]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(n,i,o,u).getPromise()}}const nx="@firebase/storage",sx="0.14.0";const Jy="storage";function L_(a,n,i){return a=yn(a),C_(a,n,i)}function D_(a){return a=yn(a),E_(a)}function I_(a,n){return a=yn(a),M_(a,n)}function U_(a=mf(),n){a=yn(a);const o=bu(a,Jy).getImmediate({identifier:n}),u=Wx("storage");return u&&z_(o,...u),o}function z_(a,n,i,o={}){O_(a,n,i,o)}function B_(a,{instanceIdentifier:n}){const i=a.getProvider("app").getImmediate(),o=a.getProvider("auth-internal"),u=a.getProvider("app-check-internal");return new Tf(i,o,u,n,Wa)}function P_(){Ha(new na(Jy,B_,"PUBLIC").setMultipleInstances(!0)),Os(nx,sx,""),Os(nx,sx,"esm2020")}P_();var H_="firebase",V_="12.7.0";Os(H_,V_,"app");var rx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Af;(function(){var a;function n(T,C){function D(){}D.prototype=C.prototype,T.F=C.prototype,T.prototype=new D,T.prototype.constructor=T,T.D=function(A,L,H){for(var I=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)I[Me-2]=arguments[Me];return C.prototype[L].apply(A,I)}}function i(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}n(o,i),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(T,C,D){D||(D=0);const A=Array(16);if(typeof C=="string")for(var L=0;L<16;++L)A[L]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(L=0;L<16;++L)A[L]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=T.g[0],D=T.g[1],L=T.g[2];let H=T.g[3],I;I=C+(H^D&(L^H))+A[0]+3614090360&4294967295,C=D+(I<<7&4294967295|I>>>25),I=H+(L^C&(D^L))+A[1]+3905402710&4294967295,H=C+(I<<12&4294967295|I>>>20),I=L+(D^H&(C^D))+A[2]+606105819&4294967295,L=H+(I<<17&4294967295|I>>>15),I=D+(C^L&(H^C))+A[3]+3250441966&4294967295,D=L+(I<<22&4294967295|I>>>10),I=C+(H^D&(L^H))+A[4]+4118548399&4294967295,C=D+(I<<7&4294967295|I>>>25),I=H+(L^C&(D^L))+A[5]+1200080426&4294967295,H=C+(I<<12&4294967295|I>>>20),I=L+(D^H&(C^D))+A[6]+2821735955&4294967295,L=H+(I<<17&4294967295|I>>>15),I=D+(C^L&(H^C))+A[7]+4249261313&4294967295,D=L+(I<<22&4294967295|I>>>10),I=C+(H^D&(L^H))+A[8]+1770035416&4294967295,C=D+(I<<7&4294967295|I>>>25),I=H+(L^C&(D^L))+A[9]+2336552879&4294967295,H=C+(I<<12&4294967295|I>>>20),I=L+(D^H&(C^D))+A[10]+4294925233&4294967295,L=H+(I<<17&4294967295|I>>>15),I=D+(C^L&(H^C))+A[11]+2304563134&4294967295,D=L+(I<<22&4294967295|I>>>10),I=C+(H^D&(L^H))+A[12]+1804603682&4294967295,C=D+(I<<7&4294967295|I>>>25),I=H+(L^C&(D^L))+A[13]+4254626195&4294967295,H=C+(I<<12&4294967295|I>>>20),I=L+(D^H&(C^D))+A[14]+2792965006&4294967295,L=H+(I<<17&4294967295|I>>>15),I=D+(C^L&(H^C))+A[15]+1236535329&4294967295,D=L+(I<<22&4294967295|I>>>10),I=C+(L^H&(D^L))+A[1]+4129170786&4294967295,C=D+(I<<5&4294967295|I>>>27),I=H+(D^L&(C^D))+A[6]+3225465664&4294967295,H=C+(I<<9&4294967295|I>>>23),I=L+(C^D&(H^C))+A[11]+643717713&4294967295,L=H+(I<<14&4294967295|I>>>18),I=D+(H^C&(L^H))+A[0]+3921069994&4294967295,D=L+(I<<20&4294967295|I>>>12),I=C+(L^H&(D^L))+A[5]+3593408605&4294967295,C=D+(I<<5&4294967295|I>>>27),I=H+(D^L&(C^D))+A[10]+38016083&4294967295,H=C+(I<<9&4294967295|I>>>23),I=L+(C^D&(H^C))+A[15]+3634488961&4294967295,L=H+(I<<14&4294967295|I>>>18),I=D+(H^C&(L^H))+A[4]+3889429448&4294967295,D=L+(I<<20&4294967295|I>>>12),I=C+(L^H&(D^L))+A[9]+568446438&4294967295,C=D+(I<<5&4294967295|I>>>27),I=H+(D^L&(C^D))+A[14]+3275163606&4294967295,H=C+(I<<9&4294967295|I>>>23),I=L+(C^D&(H^C))+A[3]+4107603335&4294967295,L=H+(I<<14&4294967295|I>>>18),I=D+(H^C&(L^H))+A[8]+1163531501&4294967295,D=L+(I<<20&4294967295|I>>>12),I=C+(L^H&(D^L))+A[13]+2850285829&4294967295,C=D+(I<<5&4294967295|I>>>27),I=H+(D^L&(C^D))+A[2]+4243563512&4294967295,H=C+(I<<9&4294967295|I>>>23),I=L+(C^D&(H^C))+A[7]+1735328473&4294967295,L=H+(I<<14&4294967295|I>>>18),I=D+(H^C&(L^H))+A[12]+2368359562&4294967295,D=L+(I<<20&4294967295|I>>>12),I=C+(D^L^H)+A[5]+4294588738&4294967295,C=D+(I<<4&4294967295|I>>>28),I=H+(C^D^L)+A[8]+2272392833&4294967295,H=C+(I<<11&4294967295|I>>>21),I=L+(H^C^D)+A[11]+1839030562&4294967295,L=H+(I<<16&4294967295|I>>>16),I=D+(L^H^C)+A[14]+4259657740&4294967295,D=L+(I<<23&4294967295|I>>>9),I=C+(D^L^H)+A[1]+2763975236&4294967295,C=D+(I<<4&4294967295|I>>>28),I=H+(C^D^L)+A[4]+1272893353&4294967295,H=C+(I<<11&4294967295|I>>>21),I=L+(H^C^D)+A[7]+4139469664&4294967295,L=H+(I<<16&4294967295|I>>>16),I=D+(L^H^C)+A[10]+3200236656&4294967295,D=L+(I<<23&4294967295|I>>>9),I=C+(D^L^H)+A[13]+681279174&4294967295,C=D+(I<<4&4294967295|I>>>28),I=H+(C^D^L)+A[0]+3936430074&4294967295,H=C+(I<<11&4294967295|I>>>21),I=L+(H^C^D)+A[3]+3572445317&4294967295,L=H+(I<<16&4294967295|I>>>16),I=D+(L^H^C)+A[6]+76029189&4294967295,D=L+(I<<23&4294967295|I>>>9),I=C+(D^L^H)+A[9]+3654602809&4294967295,C=D+(I<<4&4294967295|I>>>28),I=H+(C^D^L)+A[12]+3873151461&4294967295,H=C+(I<<11&4294967295|I>>>21),I=L+(H^C^D)+A[15]+530742520&4294967295,L=H+(I<<16&4294967295|I>>>16),I=D+(L^H^C)+A[2]+3299628645&4294967295,D=L+(I<<23&4294967295|I>>>9),I=C+(L^(D|~H))+A[0]+4096336452&4294967295,C=D+(I<<6&4294967295|I>>>26),I=H+(D^(C|~L))+A[7]+1126891415&4294967295,H=C+(I<<10&4294967295|I>>>22),I=L+(C^(H|~D))+A[14]+2878612391&4294967295,L=H+(I<<15&4294967295|I>>>17),I=D+(H^(L|~C))+A[5]+4237533241&4294967295,D=L+(I<<21&4294967295|I>>>11),I=C+(L^(D|~H))+A[12]+1700485571&4294967295,C=D+(I<<6&4294967295|I>>>26),I=H+(D^(C|~L))+A[3]+2399980690&4294967295,H=C+(I<<10&4294967295|I>>>22),I=L+(C^(H|~D))+A[10]+4293915773&4294967295,L=H+(I<<15&4294967295|I>>>17),I=D+(H^(L|~C))+A[1]+2240044497&4294967295,D=L+(I<<21&4294967295|I>>>11),I=C+(L^(D|~H))+A[8]+1873313359&4294967295,C=D+(I<<6&4294967295|I>>>26),I=H+(D^(C|~L))+A[15]+4264355552&4294967295,H=C+(I<<10&4294967295|I>>>22),I=L+(C^(H|~D))+A[6]+2734768916&4294967295,L=H+(I<<15&4294967295|I>>>17),I=D+(H^(L|~C))+A[13]+1309151649&4294967295,D=L+(I<<21&4294967295|I>>>11),I=C+(L^(D|~H))+A[4]+4149444226&4294967295,C=D+(I<<6&4294967295|I>>>26),I=H+(D^(C|~L))+A[11]+3174756917&4294967295,H=C+(I<<10&4294967295|I>>>22),I=L+(C^(H|~D))+A[2]+718787259&4294967295,L=H+(I<<15&4294967295|I>>>17),I=D+(H^(L|~C))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+C&4294967295,T.g[1]=T.g[1]+(L+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+L&4294967295,T.g[3]=T.g[3]+H&4294967295}o.prototype.v=function(T,C){C===void 0&&(C=T.length);const D=C-this.blockSize,A=this.C;let L=this.h,H=0;for(;H<C;){if(L==0)for(;H<=D;)u(this,T,H),H+=this.blockSize;if(typeof T=="string"){for(;H<C;)if(A[L++]=T.charCodeAt(H++),L==this.blockSize){u(this,A),L=0;break}}else for(;H<C;)if(A[L++]=T[H++],L==this.blockSize){u(this,A),L=0;break}}this.h=L,this.o+=C},o.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var C=1;C<T.length-8;++C)T[C]=0;C=this.o*8;for(var D=T.length-8;D<T.length;++D)T[D]=C&255,C/=256;for(this.v(T),T=Array(16),C=0,D=0;D<4;++D)for(let A=0;A<32;A+=8)T[C++]=this.g[D]>>>A&255;return T};function f(T,C){var D=p;return Object.prototype.hasOwnProperty.call(D,T)?D[T]:D[T]=C(T)}function m(T,C){this.h=C;const D=[];let A=!0;for(let L=T.length-1;L>=0;L--){const H=T[L]|0;A&&H==C||(D[L]=H,A=!1)}this.g=D}var p={};function x(T){return-128<=T&&T<128?f(T,function(C){return new m([C|0],C<0?-1:0)}):new m([T|0],T<0?-1:0)}function b(T){if(isNaN(T)||!isFinite(T))return j;if(T<0)return O(b(-T));const C=[];let D=1;for(let A=0;T>=D;A++)C[A]=T/D|0,D*=4294967296;return new m(C,0)}function _(T,C){if(T.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(T.charAt(0)=="-")return O(_(T.substring(1),C));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=b(Math.pow(C,8));let A=j;for(let H=0;H<T.length;H+=8){var L=Math.min(8,T.length-H);const I=parseInt(T.substring(H,H+L),C);L<8?(L=b(Math.pow(C,L)),A=A.j(L).add(b(I))):(A=A.j(D),A=A.add(b(I)))}return A}var j=x(0),S=x(1),U=x(16777216);a=m.prototype,a.m=function(){if(k(this))return-O(this).m();let T=0,C=1;for(let D=0;D<this.g.length;D++){const A=this.i(D);T+=(A>=0?A:4294967296+A)*C,C*=4294967296}return T},a.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(k(this))return"-"+O(this).toString(T);const C=b(Math.pow(T,6));var D=this;let A="";for(;;){const L=te(D,C).g;D=V(D,L.j(C));let H=((D.g.length>0?D.g[0]:D.h)>>>0).toString(T);if(D=L,E(D))return H+A;for(;H.length<6;)H="0"+H;A=H+A}},a.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(let C=0;C<T.g.length;C++)if(T.g[C]!=0)return!1;return!0}function k(T){return T.h==-1}a.l=function(T){return T=V(this,T),k(T)?-1:E(T)?0:1};function O(T){const C=T.g.length,D=[];for(let A=0;A<C;A++)D[A]=~T.g[A];return new m(D,~T.h).add(S)}a.abs=function(){return k(this)?O(this):this},a.add=function(T){const C=Math.max(this.g.length,T.g.length),D=[];let A=0;for(let L=0;L<=C;L++){let H=A+(this.i(L)&65535)+(T.i(L)&65535),I=(H>>>16)+(this.i(L)>>>16)+(T.i(L)>>>16);A=I>>>16,H&=65535,I&=65535,D[L]=I<<16|H}return new m(D,D[D.length-1]&-2147483648?-1:0)};function V(T,C){return T.add(O(C))}a.j=function(T){if(E(this)||E(T))return j;if(k(this))return k(T)?O(this).j(O(T)):O(O(this).j(T));if(k(T))return O(this.j(O(T)));if(this.l(U)<0&&T.l(U)<0)return b(this.m()*T.m());const C=this.g.length+T.g.length,D=[];for(var A=0;A<2*C;A++)D[A]=0;for(A=0;A<this.g.length;A++)for(let L=0;L<T.g.length;L++){const H=this.i(A)>>>16,I=this.i(A)&65535,Me=T.i(L)>>>16,De=T.i(L)&65535;D[2*A+2*L]+=I*De,F(D,2*A+2*L),D[2*A+2*L+1]+=H*De,F(D,2*A+2*L+1),D[2*A+2*L+1]+=I*Me,F(D,2*A+2*L+1),D[2*A+2*L+2]+=H*Me,F(D,2*A+2*L+2)}for(T=0;T<C;T++)D[T]=D[2*T+1]<<16|D[2*T];for(T=C;T<2*C;T++)D[T]=0;return new m(D,0)};function F(T,C){for(;(T[C]&65535)!=T[C];)T[C+1]+=T[C]>>>16,T[C]&=65535,C++}function G(T,C){this.g=T,this.h=C}function te(T,C){if(E(C))throw Error("division by zero");if(E(T))return new G(j,j);if(k(T))return C=te(O(T),C),new G(O(C.g),O(C.h));if(k(C))return C=te(T,O(C)),new G(O(C.g),C.h);if(T.g.length>30){if(k(T)||k(C))throw Error("slowDivide_ only works with positive integers.");for(var D=S,A=C;A.l(T)<=0;)D=ce(D),A=ce(A);var L=se(D,1),H=se(A,1);for(A=se(A,2),D=se(D,2);!E(A);){var I=H.add(A);I.l(T)<=0&&(L=L.add(D),H=I),A=se(A,1),D=se(D,1)}return C=V(T,L.j(C)),new G(L,C)}for(L=j;T.l(C)>=0;){for(D=Math.max(1,Math.floor(T.m()/C.m())),A=Math.ceil(Math.log(D)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),H=b(D),I=H.j(C);k(I)||I.l(T)>0;)D-=A,H=b(D),I=H.j(C);E(H)&&(H=S),L=L.add(H),T=V(T,I)}return new G(L,T)}a.B=function(T){return te(this,T).h},a.and=function(T){const C=Math.max(this.g.length,T.g.length),D=[];for(let A=0;A<C;A++)D[A]=this.i(A)&T.i(A);return new m(D,this.h&T.h)},a.or=function(T){const C=Math.max(this.g.length,T.g.length),D=[];for(let A=0;A<C;A++)D[A]=this.i(A)|T.i(A);return new m(D,this.h|T.h)},a.xor=function(T){const C=Math.max(this.g.length,T.g.length),D=[];for(let A=0;A<C;A++)D[A]=this.i(A)^T.i(A);return new m(D,this.h^T.h)};function ce(T){const C=T.g.length+1,D=[];for(let A=0;A<C;A++)D[A]=T.i(A)<<1|T.i(A-1)>>>31;return new m(D,T.h)}function se(T,C){const D=C>>5;C%=32;const A=T.g.length-D,L=[];for(let H=0;H<A;H++)L[H]=C>0?T.i(H+D)>>>C|T.i(H+D+1)<<32-C:T.i(H+D);return new m(L,T.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=b,m.fromString=_,Af=m}).apply(typeof rx<"u"?rx:typeof self<"u"?self:typeof window<"u"?window:{});var Kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var a,n=Object.defineProperty;function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kc=="object"&&Kc];for(var g=0;g<c.length;++g){var v=c[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var o=i(this);function u(c,g){if(g)e:{var v=o;c=c.split(".");for(var R=0;R<c.length-1;R++){var q=c[R];if(!(q in v))break e;v=v[q]}c=c[c.length-1],R=v[c],g=g(R),g!=R&&g!=null&&n(v,c,{configurable:!0,writable:!0,value:g})}}u("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),u("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),u("Object.entries",function(c){return c||function(g){var v=[],R;for(R in g)Object.prototype.hasOwnProperty.call(g,R)&&v.push([R,g[R]]);return v}});var f=f||{},m=this||self;function p(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function x(c,g,v){return c.call.apply(c.bind,arguments)}function b(c,g,v){return b=x,b.apply(null,arguments)}function _(c,g){var v=Array.prototype.slice.call(arguments,1);return function(){var R=v.slice();return R.push.apply(R,arguments),c.apply(this,R)}}function j(c,g){function v(){}v.prototype=g.prototype,c.Z=g.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(R,q,Q){for(var he=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)he[Be-2]=arguments[Be];return g.prototype[q].apply(R,he)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function U(c){const g=c.length;if(g>0){const v=Array(g);for(let R=0;R<g;R++)v[R]=c[R];return v}return[]}function E(c,g){for(let R=1;R<arguments.length;R++){const q=arguments[R];var v=typeof q;if(v=v!="object"?v:q?Array.isArray(q)?"array":v:"null",v=="array"||v=="object"&&typeof q.length=="number"){v=c.length||0;const Q=q.length||0;c.length=v+Q;for(let he=0;he<Q;he++)c[v+he]=q[he]}else c.push(q)}}class k{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function O(c){m.setTimeout(()=>{throw c},0)}function V(){var c=T;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class F{constructor(){this.h=this.g=null}add(g,v){const R=G.get();R.set(g,v),this.h?this.h.next=R:this.g=R,this.h=R}}var G=new k(()=>new te,c=>c.reset());class te{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,se=!1,T=new F,C=()=>{const c=Promise.resolve(void 0);ce=()=>{c.then(D)}};function D(){for(var c;c=V();){try{c.h.call(c.g)}catch(v){O(v)}var g=G;g.j(c),g.h<100&&(g.h++,c.next=g.g,g.g=c)}se=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,g),m.removeEventListener("test",v,g)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function Me(c,g){L.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,g)}j(Me,L),Me.prototype.init=function(c,g){const v=this.type=c.type,R=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget,g||(v=="mouseover"?g=c.fromElement:v=="mouseout"&&(g=c.toElement)),this.relatedTarget=g,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),B=0;function ie(c,g,v,R,q){this.listener=c,this.proxy=null,this.src=g,this.type=v,this.capture=!!R,this.ha=q,this.key=++B,this.da=this.fa=!1}function xe(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ee(c,g,v){for(const R in c)g.call(v,c[R],R,c)}function Oe(c,g){for(const v in c)g.call(void 0,c[v],v,c)}function M(c){const g={};for(const v in c)g[v]=c[v];return g}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(c,g){let v,R;for(let q=1;q<arguments.length;q++){R=arguments[q];for(v in R)c[v]=R[v];for(let Q=0;Q<K.length;Q++)v=K[Q],Object.prototype.hasOwnProperty.call(R,v)&&(c[v]=R[v])}}function re(c){this.src=c,this.g={},this.h=0}re.prototype.add=function(c,g,v,R,q){const Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);const he=pe(c,g,R,q);return he>-1?(g=c[he],v||(g.fa=!1)):(g=new ie(g,this.src,Q,!!R,q),g.fa=v,c.push(g)),g};function Z(c,g){const v=g.type;if(v in c.g){var R=c.g[v],q=Array.prototype.indexOf.call(R,g,void 0),Q;(Q=q>=0)&&Array.prototype.splice.call(R,q,1),Q&&(xe(g),c.g[v].length==0&&(delete c.g[v],c.h--))}}function pe(c,g,v,R){for(let q=0;q<c.length;++q){const Q=c[q];if(!Q.da&&Q.listener==g&&Q.capture==!!v&&Q.ha==R)return q}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),Se={};function ke(c,g,v,R,q){if(Array.isArray(g)){for(let Q=0;Q<g.length;Q++)ke(c,g[Q],v,R,q);return null}return v=Ne(v),c&&c[De]?c.J(g,v,p(R)?!!R.capture:!1,q):Ve(c,g,v,!1,R,q)}function Ve(c,g,v,R,q,Q){if(!g)throw Error("Invalid event type");const he=p(q)?!!q.capture:!!q;let Be=Te(c);if(Be||(c[fe]=Be=new re(c)),v=Be.add(g,v,R,he,Q),v.proxy)return v;if(R=Le(),v.proxy=R,R.src=c,R.listener=v,c.addEventListener)H||(q=he),q===void 0&&(q=!1),c.addEventListener(g.toString(),R,q);else if(c.attachEvent)c.attachEvent(ge(g.toString()),R);else if(c.addListener&&c.removeListener)c.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Le(){function c(v){return g.call(c.src,c.listener,v)}const g=ye;return c}function We(c,g,v,R,q){if(Array.isArray(g))for(var Q=0;Q<g.length;Q++)We(c,g[Q],v,R,q);else R=p(R)?!!R.capture:!!R,v=Ne(v),c&&c[De]?(c=c.i,Q=String(g).toString(),Q in c.g&&(g=c.g[Q],v=pe(g,v,R,q),v>-1&&(xe(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete c.g[Q],c.h--)))):c&&(c=Te(c))&&(g=c.g[g.toString()],c=-1,g&&(c=pe(g,v,R,q)),(v=c>-1?g[c]:null)&&yt(v))}function yt(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[De])Z(g.i,c);else{var v=c.type,R=c.proxy;g.removeEventListener?g.removeEventListener(v,R,c.capture):g.detachEvent?g.detachEvent(ge(v),R):g.addListener&&g.removeListener&&g.removeListener(R),(v=Te(g))?(Z(v,c),v.h==0&&(v.src=null,g[fe]=null)):xe(c)}}}function ge(c){return c in Se?Se[c]:Se[c]="on"+c}function ye(c,g){if(c.da)c=!0;else{g=new Me(g,this);const v=c.listener,R=c.ha||c.src;c.fa&&yt(c),c=v.call(R,g)}return c}function Te(c){return c=c[fe],c instanceof re?c:null}var we="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ne(c){return typeof c=="function"?c:(c[we]||(c[we]=function(g){return c.handleEvent(g)}),c[we])}function je(){A.call(this),this.i=new re(this),this.M=this,this.G=null}j(je,A),je.prototype[De]=!0,je.prototype.removeEventListener=function(c,g,v,R){We(this,c,g,v,R)};function ze(c,g){var v,R=c.G;if(R)for(v=[];R;R=R.G)v.push(R);if(c=c.M,R=g.type||g,typeof g=="string")g=new L(g,c);else if(g instanceof L)g.target=g.target||c;else{var q=g;g=new L(R,c),X(g,q)}q=!0;let Q,he;if(v)for(he=v.length-1;he>=0;he--)Q=g.g=v[he],q=Vt(Q,R,!0,g)&&q;if(Q=g.g=c,q=Vt(Q,R,!0,g)&&q,q=Vt(Q,R,!1,g)&&q,v)for(he=0;he<v.length;he++)Q=g.g=v[he],q=Vt(Q,R,!1,g)&&q}je.prototype.N=function(){if(je.Z.N.call(this),this.i){var c=this.i;for(const g in c.g){const v=c.g[g];for(let R=0;R<v.length;R++)xe(v[R]);delete c.g[g],c.h--}}this.G=null},je.prototype.J=function(c,g,v,R){return this.i.add(String(c),g,!1,v,R)},je.prototype.K=function(c,g,v,R){return this.i.add(String(c),g,!0,v,R)};function Vt(c,g,v,R){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();let q=!0;for(let Q=0;Q<g.length;++Q){const he=g[Q];if(he&&!he.da&&he.capture==v){const Be=he.listener,Ct=he.ha||he.src;he.fa&&Z(c.i,he),q=Be.call(Ct,R)!==!1&&q}}return q&&!R.defaultPrevented}function de(c,g){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:m.setTimeout(c,g||0)}function ue(c){c.g=de(()=>{c.g=null,c.i&&(c.i=!1,ue(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class me extends A{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ue(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ce(c){A.call(this),this.h=c,this.g={}}j(Ce,A);var le=[];function Ue(c){Ee(c.g,function(g,v){this.g.hasOwnProperty(v)&&yt(g)},c),c.g={}}Ce.prototype.N=function(){Ce.Z.N.call(this),Ue(this)},Ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nt=m.JSON.stringify,ls=m.JSON.parse,qt=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function en(){}function rt(){}var kt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){L.call(this,"d")}j(Wt,L);function Tn(){L.call(this,"c")}j(Tn,L);var Rt={},bo=null;function qi(){return bo=bo||new je}Rt.Ia="serverreachability";function vo(c){L.call(this,Rt.Ia,c)}j(vo,L);function os(c){const g=qi();ze(g,new vo(g))}Rt.STAT_EVENT="statevent";function ia(c,g){L.call(this,Rt.STAT_EVENT,c),this.stat=g}j(ia,L);function Mt(c){const g=qi();ze(g,new ia(g,c))}Rt.Ja="timingevent";function cs(c,g){L.call(this,Rt.Ja,c),this.size=g}j(cs,L);function us(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function $n(){this.g=!0}$n.prototype.ua=function(){this.g=!1};function Nu(c,g,v,R,q,Q){c.info(function(){if(c.g)if(Q){var he="",Be=Q.split("&");for(let it=0;it<Be.length;it++){var Ct=Be[it].split("=");if(Ct.length>1){const vt=Ct[0];Ct=Ct[1];const nn=vt.split("_");he=nn.length>=2&&nn[1]=="type"?he+(vt+"="+Ct+"&"):he+(vt+"=redacted&")}}}else he=null;else he=Q;return"XMLHTTP REQ ("+R+") [attempt "+q+"]: "+g+`
`+v+`
`+he})}function wo(c,g,v,R,q,Q,he){c.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+q+"]: "+g+`
`+v+`
`+Q+" "+he})}function ds(c,g,v,R){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+_u(c,v)+(R?" "+R:"")})}function la(c,g){c.info(function(){return"TIMEOUT: "+g})}$n.prototype.info=function(){};function _u(c,g){if(!c.g)return g;if(!g)return null;try{const Q=JSON.parse(g);if(Q){for(c=0;c<Q.length;c++)if(Array.isArray(Q[c])){var v=Q[c];if(!(v.length<2)){var R=v[1];if(Array.isArray(R)&&!(R.length<1)){var q=R[0];if(q!="noop"&&q!="stop"&&q!="close")for(let he=1;he<R.length;he++)R[he]=""}}}}return nt(Q)}catch{return g}}var Ya={NO_ERROR:0,TIMEOUT:8},jo={},Wi;function oa(){}j(oa,en),oa.prototype.g=function(){return new XMLHttpRequest},Wi=new oa;function zs(c){return encodeURIComponent(String(c))}function No(c){var g=1;c=c.split(":");const v=[];for(;g>0&&c.length;)v.push(c.shift()),g--;return c.length&&v.push(c.join(":")),v}function Fn(c,g,v,R){this.j=c,this.i=g,this.l=v,this.S=R||1,this.V=new Ce(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qn}function qn(){this.i=null,this.g="",this.h=!1}var Ot={},Gt={};function hs(c,g,v){c.M=1,c.A=ca(Dt(g)),c.u=v,c.R=!0,Ka(c,null)}function Ka(c,g){c.F=Date.now(),fs(c),c.B=Dt(c.A);var v=c.B,R=c.S;Array.isArray(R)||(R=[String(R)]),Za(v.i,"t",R),c.C=0,v=c.j.L,c.h=new qn,c.g=zo(c.j,v?g:null,!c.u),c.P>0&&(c.O=new me(b(c.Y,c,c.g),c.P)),g=c.V,v=c.g,R=c.ba;var q="readystatechange";Array.isArray(q)||(q&&(le[0]=q.toString()),q=le);for(let Q=0;Q<q.length;Q++){const he=ke(v,q[Q],R||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,g)):(c.v="GET",c.g.ea(c.B,c.v,null,g)),os(),Nu(c.i,c.v,c.B,c.l,c.S,c.u)}Fn.prototype.ba=function(c){c=c.target;const g=this.O;g&&Kn(c)==3?g.j():this.Y(c)},Fn.prototype.Y=function(c){try{if(c==this.g)e:{const Be=Kn(this.g),Ct=this.g.ya(),it=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||Be!=4||Ct==7||(Ct==8||it<=0?os(3):os(2)),ms(this);var g=this.g.ca();this.X=g;var v=Su(this);if(this.o=g==200,wo(this.i,this.v,this.B,this.l,this.S,Be,g),this.o){if(this.U&&!this.L){t:{if(this.g){var R,q=this.g;if((R=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(R)){var Q=R;break t}}Q=null}if(c=Q)ds(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gs(this,c);else{this.o=!1,this.m=3,Mt(12),bn(this),An(this);break e}}if(this.R){c=!0;let vt;for(;!this.K&&this.C<v.length;)if(vt=So(this,v),vt==Gt){Be==4&&(this.m=4,Mt(14),c=!1),ds(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Ot){this.m=4,Mt(15),ds(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else ds(this.i,this.l,vt,null),gs(this,vt);if(_o(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||v.length!=0||this.h.h||(this.m=1,Mt(16),c=!1),this.o=this.o&&c,!c)ds(this.i,this.l,v,"[Invalid Chunked Response]"),bn(this),An(this);else if(v.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),ol(he),he.P=!0,Mt(11))}}else ds(this.i,this.l,v,null),gs(this,v);Be==4&&bn(this),this.o&&!this.K&&(Be==4?Lo(this.j,this):(this.o=!1,fs(this)))}else Ps(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),bn(this),An(this)}}}catch{}};function Su(c){if(!_o(c))return c.g.la();const g=Yt(c.g);if(g==="")return"";let v="";const R=g.length,q=Kn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return bn(c),An(c),"";c.h.i=new m.TextDecoder}for(let Q=0;Q<R;Q++)c.h.h=!0,v+=c.h.i.decode(g[Q],{stream:!(q&&Q==R-1)});return g.length=0,c.h.g+=v,c.C=0,c.h.g}function _o(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function So(c,g){var v=c.C,R=g.indexOf(`
`,v);return R==-1?Gt:(v=Number(g.substring(v,R)),isNaN(v)?Ot:(R+=1,R+v>g.length?Gt:(g=g.slice(R,R+v),c.C=R+v,g)))}Fn.prototype.cancel=function(){this.K=!0,bn(this)};function fs(c){c.T=Date.now()+c.H,Xa(c,c.H)}function Xa(c,g){if(c.D!=null)throw Error("WatchDog timer not null");c.D=us(b(c.aa,c),g)}function ms(c){c.D&&(m.clearTimeout(c.D),c.D=null)}Fn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(la(this.i,this.B),this.M!=2&&(os(),Mt(17)),bn(this),this.m=2,An(this)):Xa(this,this.T-c)};function An(c){c.j.I==0||c.K||Lo(c.j,c)}function bn(c){ms(c);var g=c.O;g&&typeof g.dispose=="function"&&g.dispose(),c.O=null,Ue(c.V),c.g&&(g=c.g,c.g=null,g.abort(),g.dispose())}function gs(c,g){try{var v=c.j;if(v.I!=0&&(v.g==c||xs(v.h,c))){if(!c.L&&xs(v.h,c)&&v.I==3){try{var R=v.Ba.g.parse(g)}catch{R=null}if(Array.isArray(R)&&R.length==3){var q=R;if(q[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)ri(v),_r(v);else break e;pa(v),Mt(18)}}else v.xa=q[1],0<v.xa-v.K&&q[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=us(b(v.Va,v),6e3));ps(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ns(v,11)}else if((c.L||v.g==c)&&ri(v),!I(g))for(q=v.Ba.g.parse(g),g=0;g<q.length;g++){let it=q[g];const vt=it[0];if(!(vt<=v.K))if(v.K=vt,it=it[1],v.I==2)if(it[0]=="c"){v.M=it[1],v.ba=it[2];const nn=it[3];nn!=null&&(v.ka=nn,v.j.info("VER="+v.ka));const Hs=it[4];Hs!=null&&(v.za=Hs,v.j.info("SVER="+v.za));const Xn=it[5];Xn!=null&&typeof Xn=="number"&&Xn>0&&(R=1.5*Xn,v.O=R,v.j.info("backChannelRequestTimeoutMs_="+R)),R=v;const Jn=c.g;if(Jn){const xa=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xa){var Q=R.h;Q.g||xa.indexOf("spdy")==-1&&xa.indexOf("quic")==-1&&xa.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Xi(Q,Q.h),Q.h=null))}if(R.G){const ai=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;ai&&(R.wa=ai,at(R.J,R.G,ai))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),R=v;var he=c;if(R.na=Uo(R,R.L?R.ba:null,R.W),he.L){Ji(R.h,he);var Be=he,Ct=R.O;Ct&&(Be.H=Ct),Be.D&&(ms(Be),fs(Be)),R.g=he}else Mo(R);v.i.length>0&&js(v)}else it[0]!="stop"&&it[0]!="close"||Ns(v,7);else v.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?Ns(v,7):il(v):it[0]!="noop"&&v.l&&v.l.qa(it),v.A=0)}}os(4)}catch{}}var Lt=class{constructor(c,g){this.g=c,this.map=g}};function Yi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ki(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ps(c){return c.h?1:c.g?c.g.size:0}function xs(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Xi(c,g){c.g?c.g.add(g):c.h=g}function Ji(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Yi.prototype.cancel=function(){if(this.i=Qi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Qi(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const v of c.g.values())g=g.concat(v.G);return g}return U(c.i)}var ko=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ja(c,g){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const R=c[v].indexOf("=");let q,Q=null;R>=0?(q=c[v].substring(0,R),Q=c[v].substring(R+1)):q=c[v],g(q,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function vn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;c instanceof vn?(this.l=c.l,$t(this,c.j),this.o=c.o,this.g=c.g,xr(this,c.u),this.h=c.h,Zi(this,Ao(c.i)),this.m=c.m):c&&(g=String(c).match(ko))?(this.l=!1,$t(this,g[1]||"",!0),this.o=ys(g[2]||""),this.g=ys(g[3]||"",!0),xr(this,g[4]),this.h=ys(g[5]||"",!0),Zi(this,g[6]||"",!0),this.m=ys(g[7]||"")):(this.l=!1,this.i=new br(null,this.l))}vn.prototype.toString=function(){const c=[];var g=this.j;g&&c.push(ua(g,Qa,!0),":");var v=this.g;return(v||g=="file")&&(c.push("//"),(g=this.o)&&c.push(ua(g,Qa,!0),"@"),c.push(zs(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(ua(v,v.charAt(0)=="/"?el:Co,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",ua(v,Eo)),c.join("")},vn.prototype.resolve=function(c){const g=Dt(this);let v=!!c.j;v?$t(g,c.j):v=!!c.o,v?g.o=c.o:v=!!c.g,v?g.g=c.g:v=c.u!=null;var R=c.h;if(v)xr(g,c.u);else if(v=!!c.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var q=g.h.lastIndexOf("/");q!=-1&&(R=g.h.slice(0,q+1)+R)}if(q=R,q==".."||q==".")R="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){R=q.lastIndexOf("/",0)==0,q=q.split("/");const Q=[];for(let he=0;he<q.length;){const Be=q[he++];Be=="."?R&&he==q.length&&Q.push(""):Be==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),R&&he==q.length&&Q.push("")):(Q.push(Be),R=!0)}R=Q.join("/")}else R=q}return v?g.h=R:v=c.i.toString()!=="",v?Zi(g,Ao(c.i)):v=!!c.m,v&&(g.m=c.m),g};function Dt(c){return new vn(c)}function $t(c,g,v){c.j=v?ys(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function xr(c,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);c.u=g}else c.u=null}function Zi(c,g,v){g instanceof br?(c.i=g,ei(c.i,c.l)):(v||(g=ua(g,yr)),c.i=new br(g,c.l))}function at(c,g,v){c.i.set(g,v)}function ca(c){return at(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ys(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ua(c,g,v){return typeof c=="string"?(c=encodeURI(c).replace(g,un),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function un(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Qa=/[#\/\?@]/g,Co=/[#\?:]/g,el=/[#\?]/g,yr=/[#\?@]/g,Eo=/#/g;function br(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function dn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ja(c.i,function(g,v){c.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}a=br.prototype,a.add=function(c,g){dn(this),this.i=null,c=vr(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(g),this.h+=1,this};function To(c,g){dn(c),g=vr(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function tl(c,g){return dn(c),g=vr(c,g),c.g.has(g)}a.forEach=function(c,g){dn(this),this.g.forEach(function(v,R){v.forEach(function(q){c.call(g,q,R,this)},this)},this)};function nl(c,g){dn(c);let v=[];if(typeof g=="string")tl(c,g)&&(v=v.concat(c.g.get(vr(c,g))));else for(c=Array.from(c.g.values()),g=0;g<c.length;g++)v=v.concat(c[g]);return v}a.set=function(c,g){return dn(this),this.i=null,c=vr(this,c),tl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},a.get=function(c,g){return c?(c=nl(this,c),c.length>0?String(c[0]):g):g};function Za(c,g,v){To(c,g),v.length>0&&(c.i=null,c.g.set(vr(c,g),U(v)),c.h+=v.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(let R=0;R<g.length;R++){var v=g[R];const q=zs(v);v=nl(this,v);for(let Q=0;Q<v.length;Q++){let he=q;v[Q]!==""&&(he+="="+zs(v[Q])),c.push(he)}}return this.i=c.join("&")};function Ao(c){const g=new br;return g.i=c.i,c.g&&(g.g=new Map(c.g),g.h=c.h),g}function vr(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function ei(c,g){g&&!c.j&&(dn(c),c.i=null,c.g.forEach(function(v,R){const q=R.toLowerCase();R!=q&&(To(this,R),Za(this,q,v))},c)),c.j=g}function Wn(c,g){const v=new $n;if(m.Image){const R=new Image;R.onload=_(Rn,v,"TestLoadImage: loaded",!0,g,R),R.onerror=_(Rn,v,"TestLoadImage: error",!1,g,R),R.onabort=_(Rn,v,"TestLoadImage: abort",!1,g,R),R.ontimeout=_(Rn,v,"TestLoadImage: timeout",!1,g,R),m.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=c}else g(!1)}function sl(c,g){const v=new $n,R=new AbortController,q=setTimeout(()=>{R.abort(),Rn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:R.signal}).then(Q=>{clearTimeout(q),Q.ok?Rn(v,"TestPingServer: ok",!0,g):Rn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(q),Rn(v,"TestPingServer: error",!1,g)})}function Rn(c,g,v,R,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),R(v)}catch{}}function wr(){this.g=new qt}function bs(c){this.i=c.Sb||null,this.h=c.ab||!1}j(bs,en),bs.prototype.g=function(){return new da(this.i,this.h)};function da(c,g){je.call(this),this.H=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}j(da,je),a=da.prototype,a.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=g,this.readyState=1,Yn(this)},a.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(g.body=c),(this.H||m).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,jr(this)),this.readyState=0},a.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ti(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ti(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}a.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?jr(this):Yn(this),this.readyState==3&&ti(this)}},a.Oa=function(c){this.g&&(this.response=this.responseText=c,jr(this))},a.Na=function(c){this.g&&(this.response=c,jr(this))},a.ga=function(){this.g&&jr(this)};function jr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Yn(c)}a.setRequestHeader=function(c,g){this.A.append(c,g)},a.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=g.next();return c.join(`\r
`)};function Yn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Mn(c){let g="";return Ee(c,function(v,R){g+=R,g+=":",g+=v,g+=`\r
`}),g}function ha(c,g,v){e:{for(R in v){var R=!1;break e}R=!0}R||(v=Mn(v),typeof c=="string"?v!=null&&zs(v):at(c,g,v))}function ht(c){je.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}j(ht,je);var vs=/^https?$/i,rl=["POST","PUT"];a=ht.prototype,a.Fa=function(c){this.H=c},a.ea=function(c,g,v,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Wi.g(),this.g.onreadystatechange=S(b(this.Ca,this));try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(Q){fa(this,Q);return}if(c=v||"",v=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var q in R)v.set(q,R[q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Q of R.keys())v.set(Q,R.get(Q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=m.FormData&&c instanceof m.FormData,!(Array.prototype.indexOf.call(rl,g,void 0)>=0)||R||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,he]of v)this.g.setRequestHeader(Q,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Q){fa(this,Q)}};function fa(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.o=5,al(c),Bs(c)}function al(c){c.A||(c.A=!0,ze(c,"complete"),ze(c,"error"))}a.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,ze(this,"complete"),ze(this,"abort"),Bs(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bs(this,!0)),ht.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?ma(this):this.Xa())},a.Xa=function(){ma(this)};function ma(c){if(c.h&&typeof f<"u"){if(c.v&&Kn(c)==4)setTimeout(c.Ca.bind(c),0);else if(ze(c,"readystatechange"),Kn(c)==4){c.h=!1;try{const Q=c.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var R;if(R=Q===0){let he=String(c.D).match(ko)[1]||null;!he&&m.self&&m.self.location&&(he=m.self.location.protocol.slice(0,-1)),R=!vs.test(he?he.toLowerCase():"")}v=R}if(v)ze(c,"complete"),ze(c,"success");else{c.o=6;try{var q=Kn(c)>2?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.ca()+"]",al(c)}}finally{Bs(c)}}}}function Bs(c,g){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,g||ze(c,"ready");try{v.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function Kn(c){return c.g?c.g.readyState:0}a.ca=function(){try{return Kn(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),ls(g)}};function Yt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ps(c){const g={};c=(c.g&&Kn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<c.length;R++){if(I(c[R]))continue;var v=No(c[R]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=g[q]||[];g[q]=Q,Q.push(v)}Oe(g,function(R){return R.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ws(c,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||g}function Nr(c){this.za=0,this.i=[],this.j=new $n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ws("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ws("baseRetryDelayMs",5e3,c),this.Za=ws("retryDelaySeedMs",1e4,c),this.Ta=ws("forwardChannelMaxRetries",2,c),this.va=ws("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Yi(c&&c.concurrentRequestLimit),this.Ba=new wr,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=Nr.prototype,a.ka=8,a.I=1,a.connect=function(c,g,v,R){Mt(0),this.W=c,this.H=g||{},v&&R!==void 0&&(this.H.OSID=v,this.H.OAID=R),this.F=this.X,this.J=Uo(this,null,this.W),js(this)};function il(c){if(ni(c),c.I==3){var g=c.V++,v=Dt(c.J);if(at(v,"SID",c.M),at(v,"RID",g),at(v,"TYPE","terminate"),ga(c,v),g=new Fn(c,c.j,g),g.M=2,g.A=ca(Dt(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&m.Image&&(new Image().src=g.A,v=!0),v||(g.g=zo(g.j,null),g.g.ea(g.A)),g.F=Date.now(),fs(g)}Io(c)}function _r(c){c.g&&(ol(c),c.g.cancel(),c.g=null)}function ni(c){_r(c),c.v&&(m.clearTimeout(c.v),c.v=null),ri(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&m.clearTimeout(c.m),c.m=null)}function js(c){if(!Ki(c.h)&&!c.m){c.m=!0;var g=c.Ea;ce||C(),se||(ce(),se=!0),T.add(g,c),c.D=0}}function si(c,g){return ps(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=g.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=us(b(c.Ea,c,g),Do(c,c.D)),c.D++,!0)}a.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const q=new Fn(this,this.j,c);let Q=this.o;if(this.U&&(Q?(Q=M(Q),X(Q,this.U)):Q=this.U),this.u!==null||this.R||(q.J=Q,Q=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var R=this.i[v];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(g+=R,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Ro(this,q,g),v=Dt(this.J),at(v,"RID",c),at(v,"CVER",22),this.G&&at(v,"X-HTTP-Session-Id",this.G),ga(this,v),Q&&(this.R?g="headers="+zs(Mn(Q))+"&"+g:this.u&&ha(v,this.u,Q)),Xi(this.h,q),this.Ra&&at(v,"TYPE","init"),this.S?(at(v,"$req",g),at(v,"SID","null"),q.U=!0,hs(q,v,null)):hs(q,v,g),this.I=2}}else this.I==3&&(c?ll(this,c):this.i.length==0||Ki(this.h)||ll(this))};function ll(c,g){var v;g?v=g.l:v=c.V++;const R=Dt(c.J);at(R,"SID",c.M),at(R,"RID",v),at(R,"AID",c.K),ga(c,R),c.u&&c.o&&ha(R,c.u,c.o),v=new Fn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),g&&(c.i=g.G.concat(c.i)),g=Ro(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Xi(c.h,v),hs(v,R,g)}function ga(c,g){c.H&&Ee(c.H,function(v,R){at(g,R,v)}),c.l&&Ee({},function(v,R){at(g,R,v)})}function Ro(c,g,v){v=Math.min(c.i.length,v);const R=c.l?b(c.l.Ka,c.l,c):null;e:{var q=c.i;let Be=-1;for(;;){const Ct=["count="+v];Be==-1?v>0?(Be=q[0].g,Ct.push("ofs="+Be)):Be=0:Ct.push("ofs="+Be);let it=!0;for(let vt=0;vt<v;vt++){var Q=q[vt].g;const nn=q[vt].map;if(Q-=Be,Q<0)Be=Math.max(0,q[vt].g-100),it=!1;else try{Q="req"+Q+"_"||"";try{var he=nn instanceof Map?nn:Object.entries(nn);for(const[Hs,Xn]of he){let Jn=Xn;p(Xn)&&(Jn=nt(Xn)),Ct.push(Q+Hs+"="+encodeURIComponent(Jn))}}catch(Hs){throw Ct.push(Q+"type="+encodeURIComponent("_badmap")),Hs}}catch{R&&R(nn)}}if(it){he=Ct.join("&");break e}}he=void 0}return c=c.i.splice(0,v),g.G=c,he}function Mo(c){if(!c.g&&!c.v){c.Y=1;var g=c.Da;ce||C(),se||(ce(),se=!0),T.add(g,c),c.A=0}}function pa(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=us(b(c.Da,c),Do(c,c.A)),c.A++,!0)}a.Da=function(){if(this.v=null,Oo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=us(b(this.Wa,this),c)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),_r(this),Oo(this))};function ol(c){c.B!=null&&(m.clearTimeout(c.B),c.B=null)}function Oo(c){c.g=new Fn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var g=Dt(c.na);at(g,"RID","rpc"),at(g,"SID",c.M),at(g,"AID",c.K),at(g,"CI",c.F?"0":"1"),!c.F&&c.ia&&at(g,"TO",c.ia),at(g,"TYPE","xmlhttp"),ga(c,g),c.u&&c.o&&ha(g,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=ca(Dt(g)),v.u=null,v.R=!0,Ka(v,c)}a.Va=function(){this.C!=null&&(this.C=null,_r(this),pa(this),Mt(19))};function ri(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Lo(c,g){var v=null;if(c.g==g){ri(c),ol(c),c.g=null;var R=2}else if(xs(c.h,g))v=g.G,Ji(c.h,g),R=1;else return;if(c.I!=0){if(g.o)if(R==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var q=c.D;R=qi(),ze(R,new cs(R,v)),js(c)}else Mo(c);else if(q=g.m,q==3||q==0&&g.X>0||!(R==1&&si(c,g)||R==2&&pa(c)))switch(v&&v.length>0&&(g=c.h,g.i=g.i.concat(v)),q){case 1:Ns(c,5);break;case 4:Ns(c,10);break;case 3:Ns(c,6);break;default:Ns(c,2)}}}function Do(c,g){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*g}function Ns(c,g){if(c.j.info("Error code "+g),g==2){var v=b(c.bb,c),R=c.Ua;const q=!R;R=new vn(R||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||$t(R,"https"),ca(R),q?Wn(R.toString(),v):sl(R.toString(),v)}else Mt(2);c.I=0,c.l&&c.l.pa(g),Io(c),ni(c)}a.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Io(c){if(c.I=0,c.ja=[],c.l){const g=Qi(c.h);(g.length!=0||c.i.length!=0)&&(E(c.ja,g),E(c.ja,c.i),c.h.i.length=0,U(c.i),c.i.length=0),c.l.oa()}}function Uo(c,g,v){var R=v instanceof vn?Dt(v):new vn(v);if(R.g!="")g&&(R.g=g+"."+R.g),xr(R,R.u);else{var q=m.location;R=q.protocol,g=g?g+"."+q.hostname:q.hostname,q=+q.port;const Q=new vn(null);R&&$t(Q,R),g&&(Q.g=g),q&&xr(Q,q),v&&(Q.h=v),R=Q}return v=c.G,g=c.wa,v&&g&&at(R,v,g),at(R,"VER",c.ka),ga(c,R),R}function zo(c,g,v){if(g&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Aa&&!c.ma?new ht(new bs({ab:v})):new ht(c.ma),g.Fa(c.L),g}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bo(){}a=Bo.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function tn(c,g){je.call(this),this.g=new Nr(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(c?c["X-WebChannel-Client-Profile"]=g.sa:c={"X-WebChannel-Client-Profile":g.sa}),this.g.U=c,(c=g&&g.Qb)&&!I(c)&&(this.g.u=c),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Sr(this)}j(tn,je),tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){il(this.g)},tn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=nt(c),c=v);g.i.push(new Lt(g.Ya++,c)),g.I==3&&js(g)},tn.prototype.N=function(){this.g.l=null,delete this.j,il(this.g),delete this.g,tn.Z.N.call(this)};function Po(c){Wt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const v in g){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}j(Po,Wt);function Ho(){Tn.call(this),this.status=1}j(Ho,Tn);function Sr(c){this.g=c}j(Sr,Bo),Sr.prototype.ra=function(){ze(this.g,"a")},Sr.prototype.qa=function(c){ze(this.g,new Po(c))},Sr.prototype.pa=function(c){ze(this.g,new Ho)},Sr.prototype.oa=function(){ze(this.g,"b")},tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,Ya.NO_ERROR=0,Ya.TIMEOUT=8,Ya.HTTP_ERROR=6,jo.COMPLETE="complete",rt.EventType=kt,kt.OPEN="a",kt.CLOSE="b",kt.ERROR="c",kt.MESSAGE="d",je.prototype.listen=je.prototype.J,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa}).apply(typeof Kc<"u"?Kc:typeof self<"u"?self:typeof window<"u"?window:{});const ax="@firebase/firestore",ix="4.9.3";class on{constructor(n){this.uid=n}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let xo="12.7.0";const Hi=new hf("@firebase/firestore");function ss(a,...n){if(Hi.logLevel<=st.DEBUG){const i=n.map(Rf);Hi.debug(`Firestore (${xo}): ${a}`,...i)}}function Qy(a,...n){if(Hi.logLevel<=st.ERROR){const i=n.map(Rf);Hi.error(`Firestore (${xo}): ${a}`,...i)}}function G_(a,...n){if(Hi.logLevel<=st.WARN){const i=n.map(Rf);Hi.warn(`Firestore (${xo}): ${a}`,...i)}}function Rf(a){if(typeof a=="string")return a;try{return(function(i){return JSON.stringify(i)})(a)}catch{return a}}function io(a,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,Zy(a,o,i)}function Zy(a,n,i){let o=`FIRESTORE (${xo}) INTERNAL ASSERTION FAILED: ${n} (ID: ${a.toString(16)})`;if(i!==void 0)try{o+=" CONTEXT: "+JSON.stringify(i)}catch{o+=" CONTEXT: "+i}throw Qy(o),new Error(o)}function eo(a,n,i,o){let u="Unexpected state";typeof i=="string"?u=i:o=i,a||Zy(n,u,o)}const Je={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Qe extends Us{constructor(n,i){super(n,i),this.code=n,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class to{constructor(){this.promise=new Promise(((n,i)=>{this.resolve=n,this.reject=i}))}}class eb{constructor(n,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${n}`)}}class $_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,i){n.enqueueRetryable((()=>i(on.UNAUTHENTICATED)))}shutdown(){}}class F_{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,i){this.changeListener=i,n.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class q_{constructor(n){this.t=n,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,i){eo(this.o===void 0,42304);let o=this.i;const u=x=>this.i!==o?(o=this.i,i(x)):Promise.resolve();let f=new to;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new to,n.enqueueRetryable((()=>u(this.currentUser)))};const m=()=>{const x=f;n.enqueueRetryable((async()=>{await x.promise,await u(this.currentUser)}))},p=x=>{ss("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((x=>p(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?p(x):(ss("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new to)}}),0),m()}getToken(){const n=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((o=>this.i!==n?(ss("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(eo(typeof o.accessToken=="string",31837,{l:o}),new eb(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const n=this.auth&&this.auth.getUid();return eo(n===null||typeof n=="string",2055,{h:n}),new on(n)}}class W_{constructor(n,i,o){this.P=n,this.T=i,this.I=o,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const n=this.R();return n&&this.A.set("Authorization",n),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Y_{constructor(n,i,o){this.P=n,this.T=i,this.I=o}getToken(){return Promise.resolve(new W_(this.P,this.T,this.I))}start(n,i){n.enqueueRetryable((()=>i(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lx{constructor(n){this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K_{constructor(n,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(n)&&n.settings.appCheckToken&&(this.p=n.settings.appCheckToken)}start(n,i){eo(this.o===void 0,3512);const o=f=>{f.error!=null&&ss("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const m=f.token!==this.m;return this.m=f.token,ss("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?i(f.token):Promise.resolve()};this.o=f=>{n.enqueueRetryable((()=>o(f)))};const u=f=>{ss("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((f=>u(f))),setTimeout((()=>{if(!this.appCheck){const f=this.V.getImmediate({optional:!0});f?u(f):ss("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new lx(this.p));const n=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(n).then((i=>i?(eo(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new lx(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function X_(a){const n=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(a);if(n&&typeof n.getRandomValues=="function")n.getRandomValues(i);else for(let o=0;o<a;o++)i[o]=Math.floor(256*Math.random());return i}class J_{static newId(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const u=X_(40);for(let f=0;f<u.length;++f)o.length<20&&u[f]<i&&(o+=n.charAt(u[f]%62))}return o}}function sa(a,n){return a<n?-1:a>n?1:0}function Q_(a,n){const i=Math.min(a.length,n.length);for(let o=0;o<i;o++){const u=a.charAt(o),f=n.charAt(o);if(u!==f)return Uh(u)===Uh(f)?sa(u,f):Uh(u)?1:-1}return sa(a.length,n.length)}const Z_=55296,e5=57343;function Uh(a){const n=a.charCodeAt(0);return n>=Z_&&n<=e5}const ox="__name__";class Es{constructor(n,i,o){i===void 0?i=0:i>n.length&&io(637,{offset:i,range:n.length}),o===void 0?o=n.length-i:o>n.length-i&&io(1746,{length:o,range:n.length-i}),this.segments=n,this.offset=i,this.len=o}get length(){return this.len}isEqual(n){return Es.comparator(this,n)===0}child(n){const i=this.segments.slice(this.offset,this.limit());return n instanceof Es?n.forEach((o=>{i.push(o)})):i.push(n),this.construct(i)}limit(){return this.offset+this.length}popFirst(n){return n=n===void 0?1:n,this.construct(this.segments,this.offset+n,this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return this.length===0}isPrefixOf(n){if(n.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==n.get(i))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==n.get(i))return!1;return!0}forEach(n){for(let i=this.offset,o=this.limit();i<o;i++)n(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,i){const o=Math.min(n.length,i.length);for(let u=0;u<o;u++){const f=Es.compareSegments(n.get(u),i.get(u));if(f!==0)return f}return sa(n.length,i.length)}static compareSegments(n,i){const o=Es.isNumericId(n),u=Es.isNumericId(i);return o&&!u?-1:!o&&u?1:o&&u?Es.extractNumericId(n).compare(Es.extractNumericId(i)):Q_(n,i)}static isNumericId(n){return n.startsWith("__id")&&n.endsWith("__")}static extractNumericId(n){return Af.fromString(n.substring(4,n.length-2))}}class ts extends Es{construct(n,i,o){return new ts(n,i,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...n){const i=[];for(const o of n){if(o.indexOf("//")>=0)throw new Qe(Je.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);i.push(...o.split("/").filter((u=>u.length>0)))}return new ts(i)}static emptyPath(){return new ts([])}}const t5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class La extends Es{construct(n,i,o){return new La(n,i,o)}static isValidIdentifier(n){return t5.test(n)}canonicalString(){return this.toArray().map((n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),La.isValidIdentifier(n)||(n="`"+n+"`"),n))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ox}static keyField(){return new La([ox])}static fromServerFormat(n){const i=[];let o="",u=0;const f=()=>{if(o.length===0)throw new Qe(Je.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(o),o=""};let m=!1;for(;u<n.length;){const p=n[u];if(p==="\\"){if(u+1===n.length)throw new Qe(Je.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const x=n[u+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new Qe(Je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);o+=x,u+=2}else p==="`"?(m=!m,u++):p!=="."||m?(o+=p,u++):(f(),u++)}if(f(),m)throw new Qe(Je.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new La(i)}static emptyPath(){return new La([])}}class Ia{constructor(n){this.path=n}static fromPath(n){return new Ia(ts.fromString(n))}static fromName(n){return new Ia(ts.fromString(n).popFirst(5))}static empty(){return new Ia(ts.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(n){return n!==null&&ts.comparator(this.path,n.path)===0}toString(){return this.path.toString()}static comparator(n,i){return ts.comparator(n.path,i.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new Ia(new ts(n.slice()))}}function n5(a,n,i,o){if(n===!0&&o===!0)throw new Qe(Je.INVALID_ARGUMENT,`${a} and ${i} cannot be used together.`)}function s5(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function r5(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const n=(function(o){return o.constructor?o.constructor.name:null})(a);return n?`a custom ${n} object`:"an object"}}return typeof a=="function"?"a function":io(12329,{type:typeof a})}function a5(a,n){if("_delegate"in a&&(a=a._delegate),!(a instanceof n)){if(n.name===a.constructor.name)throw new Qe(Je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=r5(a);throw new Qe(Je.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${i}`)}}return a}function Pt(a,n){const i={typeString:a};return n&&(i.value=n),i}function yo(a,n){if(!s5(a))throw new Qe(Je.INVALID_ARGUMENT,"JSON must be an object");let i;for(const o in n)if(n[o]){const u=n[o].typeString,f="value"in n[o]?{value:n[o].value}:void 0;if(!(o in a)){i=`JSON missing required field: '${o}'`;break}const m=a[o];if(u&&typeof m!==u){i=`JSON field '${o}' must be a ${u}.`;break}if(f!==void 0&&m!==f.value){i=`Expected '${o}' field to equal '${f.value}'`;break}}if(i)throw new Qe(Je.INVALID_ARGUMENT,i);return!0}const cx=-62135596800,ux=1e6;class Ts{static now(){return Ts.fromMillis(Date.now())}static fromDate(n){return Ts.fromMillis(n.getTime())}static fromMillis(n){const i=Math.floor(n/1e3),o=Math.floor((n-1e3*i)*ux);return new Ts(i,o)}constructor(n,i){if(this.seconds=n,this.nanoseconds=i,i<0)throw new Qe(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Qe(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(n<cx)throw new Qe(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new Qe(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ux}_compareTo(n){return this.seconds===n.seconds?sa(this.nanoseconds,n.nanoseconds):sa(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ts._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(n){if(yo(n,Ts._jsonSchema))return new Ts(n.seconds,n.nanoseconds)}valueOf(){const n=this.seconds-cx;return String(n).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ts._jsonSchemaVersion="firestore/timestamp/1.0",Ts._jsonSchema={type:Pt("string",Ts._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};function i5(a){return a.name==="IndexedDbTransactionError"}class l5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fa{constructor(n){this.binaryString=n}static fromBase64String(n){const i=(function(u){try{return atob(u)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new l5("Invalid base64 string: "+f):f}})(n);return new Fa(i)}static fromUint8Array(n){const i=(function(u){let f="";for(let m=0;m<u.length;++m)f+=String.fromCharCode(u[m]);return f})(n);return new Fa(i)}[Symbol.iterator](){let n=0;return{next:()=>n<this.binaryString.length?{value:this.binaryString.charCodeAt(n++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const o=new Uint8Array(i.length);for(let u=0;u<i.length;u++)o[u]=i.charCodeAt(u);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return sa(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}Fa.EMPTY_BYTE_STRING=new Fa("");const Qh="(default)";class pu{constructor(n,i){this.projectId=n,this.database=i||Qh}static empty(){return new pu("","")}get isDefaultDatabase(){return this.database===Qh}isEqual(n){return n instanceof pu&&n.projectId===this.projectId&&n.database===this.database}}class o5{constructor(n,i=null,o=[],u=[],f=null,m="F",p=null,x=null){this.path=n,this.collectionGroup=i,this.explicitOrderBy=o,this.filters=u,this.limit=f,this.limitType=m,this.startAt=p,this.endAt=x,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function c5(a){return new o5(a)}var dx,Ke;(Ke=dx||(dx={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";new Af([4294967295,4294967295],0);const u5=41943040;const d5=1048576;function zh(){return typeof document<"u"?document:null}class h5{constructor(n,i,o=1e3,u=1.5,f=6e4){this.Mi=n,this.timerId=i,this.d_=o,this.A_=u,this.R_=f,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(n){this.cancel();const i=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),u=Math.max(0,i-o);u>0&&ss("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,u,(()=>(this.f_=Date.now(),n()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}class Mf{constructor(n,i,o,u,f){this.asyncQueue=n,this.timerId=i,this.targetTimeMs=o,this.op=u,this.removalCallback=f,this.deferred=new to,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(n,i,o,u,f){const m=Date.now()+o,p=new Mf(n,i,m,u,f);return p.start(o),p}start(n){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Qe(Je.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((n=>this.deferred.resolve(n)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var hx,fx;(fx=hx||(hx={})).Ma="default",fx.Cache="cache";function f5(a){const n={};return a.timeoutSeconds!==void 0&&(n.timeoutSeconds=a.timeoutSeconds),n}const mx=new Map;const tb="firestore.googleapis.com",gx=!0;class px{constructor(n){if(n.host===void 0){if(n.ssl!==void 0)throw new Qe(Je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tb,this.ssl=gx}else this.host=n.host,this.ssl=n.ssl??gx;if(this.isUsingEmulator=n.emulatorOptions!==void 0,this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,this.localCache=n.localCache,n.cacheSizeBytes===void 0)this.cacheSizeBytes=u5;else{if(n.cacheSizeBytes!==-1&&n.cacheSizeBytes<d5)throw new Qe(Je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}n5("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:n.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=f5(n.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Qe(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Qe(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Qe(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!n.useFetchStreams}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&(function(o,u){return o.timeoutSeconds===u.timeoutSeconds})(this.experimentalLongPollingOptions,n.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class nb{constructor(n,i,o,u){this._authCredentials=n,this._appCheckCredentials=i,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new px({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qe(Je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(n){if(this._settingsFrozen)throw new Qe(Je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new px(n),this._emulatorOptions=n.emulatorOptions||{},n.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new $_;switch(o.type){case"firstParty":return new Y_(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Qe(Je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(n.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const o=mx.get(i);o&&(ss("ComponentProvider","Removing Datastore"),mx.delete(i),o.terminate())})(this),Promise.resolve()}}function m5(a,n,i,o={}){a=a5(a,nb);const u=qa(n),f=a._getSettings(),m={...f,emulatorOptions:a._getEmulatorOptions()},p=`${n}:${i}`;u&&(uf(`https://${p}`),df("Firestore",!0)),f.host!==tb&&f.host!==p&&G_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...f,host:p,ssl:u,emulatorOptions:o};if(!Pa(x,m)&&(a._setSettings(x),o.mockUserToken)){let b,_;if(typeof o.mockUserToken=="string")b=o.mockUserToken,_=on.MOCK_USER;else{b=Xx(o.mockUserToken,a._app?.options.projectId);const j=o.mockUserToken.sub||o.mockUserToken.user_id;if(!j)throw new Qe(Je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new on(j)}a._authCredentials=new F_(new eb(b,_))}}class Of{constructor(n,i,o){this.converter=i,this._query=o,this.type="query",this.firestore=n}withConverter(n){return new Of(this.firestore,n,this._query)}}class Ms{constructor(n,i,o){this.converter=i,this._key=o,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lf(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new Ms(this.firestore,n,this._key)}toJSON(){return{type:Ms._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(n,i,o){if(yo(i,Ms._jsonSchema))return new Ms(n,o||null,new Ia(ts.fromString(i.referencePath)))}}Ms._jsonSchemaVersion="firestore/documentReference/1.0",Ms._jsonSchema={type:Pt("string",Ms._jsonSchemaVersion),referencePath:Pt("string")};class Lf extends Of{constructor(n,i,o){super(n,i,c5(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new Ms(this.firestore,null,new Ia(n))}withConverter(n){return new Lf(this.firestore,n,this._path)}}const xx="AsyncQueue";class yx{constructor(n=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new h5(this,"async_queue_retry"),this._c=()=>{const o=zh();o&&ss(xx,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=n;const i=zh();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.uc(),this.cc(n)}enterRestrictedMode(n){if(!this.ec){this.ec=!0,this.sc=n||!1;const i=zh();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(n){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new to;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(n().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(n){this.enqueueAndForget((()=>(this.Xu.push(n),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(n){if(!i5(n))throw n;ss(xx,"Operation failed with retryable error: "+n)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(n){const i=this.ac.then((()=>(this.rc=!0,n().catch((o=>{throw this.nc=o,this.rc=!1,Qy("INTERNAL UNHANDLED ERROR: ",bx(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=i,i}enqueueAfterDelay(n,i,o){this.uc(),this.oc.indexOf(n)>-1&&(i=0);const u=Mf.createAndSchedule(this,n,i,o,(f=>this.hc(f)));return this.tc.push(u),u}uc(){this.nc&&io(47125,{Pc:bx(this.nc)})}verifyOperationInProgress(){}async Tc(){let n;do n=this.ac,await n;while(n!==this.ac)}Ic(n){for(const i of this.tc)if(i.timerId===n)return!0;return!1}Ec(n){return this.Tc().then((()=>{this.tc.sort(((i,o)=>i.targetTimeMs-o.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),n!=="all"&&i.timerId===n)break;return this.Tc()}))}dc(n){this.oc.push(n)}hc(n){const i=this.tc.indexOf(n);this.tc.splice(i,1)}}function bx(a){let n=a.message||"";return a.stack&&(n=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),n}class g5 extends nb{constructor(n,i,o,u){super(n,i,o,u),this.type="firestore",this._queue=new yx,this._persistenceKey=u?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const n=this._firestoreClient.terminate();this._queue=new yx(n),this._firestoreClient=void 0,await n}}}function p5(a,n){const i=typeof a=="object"?a:mf(),o=typeof a=="string"?a:Qh,u=bu(i,"firestore").getImmediate({identifier:o});if(!u._initialized){const f=Wx("firestore");f&&m5(u,...f)}return u}class ir{constructor(n){this._byteString=n}static fromBase64String(n){try{return new ir(Fa.fromBase64String(n))}catch(i){throw new Qe(Je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(n){return new ir(Fa.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}toJSON(){return{type:ir._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(n){if(yo(n,ir._jsonSchema))return ir.fromBase64String(n.bytes)}}ir._jsonSchemaVersion="firestore/bytes/1.0",ir._jsonSchema={type:Pt("string",ir._jsonSchemaVersion),bytes:Pt("string")};class sb{constructor(...n){for(let i=0;i<n.length;++i)if(n[i].length===0)throw new Qe(Je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new La(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class za{constructor(n,i){if(!isFinite(n)||n<-90||n>90)throw new Qe(Je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(i)||i<-180||i>180)throw new Qe(Je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=n,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}_compareTo(n){return sa(this._lat,n._lat)||sa(this._long,n._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:za._jsonSchemaVersion}}static fromJSON(n){if(yo(n,za._jsonSchema))return new za(n.latitude,n.longitude)}}za._jsonSchemaVersion="firestore/geoPoint/1.0",za._jsonSchema={type:Pt("string",za._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};class Ba{constructor(n){this._values=(n||[]).map((i=>i))}toArray(){return this._values.map((n=>n))}isEqual(n){return(function(o,u){if(o.length!==u.length)return!1;for(let f=0;f<o.length;++f)if(o[f]!==u[f])return!1;return!0})(this._values,n._values)}toJSON(){return{type:Ba._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(n){if(yo(n,Ba._jsonSchema)){if(Array.isArray(n.vectorValues)&&n.vectorValues.every((i=>typeof i=="number")))return new Ba(n.vectorValues);throw new Qe(Je.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ba._jsonSchemaVersion="firestore/vectorValue/1.0",Ba._jsonSchema={type:Pt("string",Ba._jsonSchemaVersion),vectorValues:Pt("object")};const x5=new RegExp("[~\\*/\\[\\]]");function y5(a,n,i){if(n.search(x5)>=0)throw vx(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,a);try{return new sb(...n.split("."))._internalPath}catch{throw vx(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a)}}function vx(a,n,i,o,u){let f=`Function ${n}() called with invalid data`;f+=". ";let m="";return new Qe(Je.INVALID_ARGUMENT,f+a+m)}class rb{constructor(n,i,o,u,f){this._firestore=n,this._userDataWriter=i,this._key=o,this._document=u,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new Ms(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const n=new b5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const i=this._document.data.field(ab("DocumentSnapshot.get",n));if(i!==null)return this._userDataWriter.convertValue(i)}}}class b5 extends rb{data(){return super.data()}}function ab(a,n){return typeof n=="string"?y5(a,n):n instanceof sb?n._internalPath:n._delegate._internalPath}class Xc{constructor(n,i){this.hasPendingWrites=n,this.fromCache=i}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class Bi extends rb{constructor(n,i,o,u,f,m){super(n,i,o,u,m),this._firestore=n,this._firestoreImpl=n,this.metadata=f}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const i=new iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,i={}){if(this._document){const o=this._document.data.field(ab("DocumentSnapshot.get",n));if(o!==null)return this._userDataWriter.convertValue(o,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Qe(Je.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const n=this._document,i={};return i.type=Bi._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!n||!n.isValidDocument()||!n.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(n.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Bi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bi._jsonSchema={type:Pt("string",Bi._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class iu extends Bi{data(n={}){return super.data(n)}}class no{constructor(n,i,o,u){this._firestore=n,this._userDataWriter=i,this._snapshot=u,this.metadata=new Xc(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const n=[];return this.forEach((i=>n.push(i))),n}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(n,i){this._snapshot.docs.forEach((o=>{n.call(i,new iu(this._firestore,this._userDataWriter,o.key,o,new Xc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(n={}){const i=!!n.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Qe(Je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(u,f){if(u._snapshot.oldDocs.isEmpty()){let m=0;return u._snapshot.docChanges.map((p=>{const x=new iu(u._firestore,u._userDataWriter,p.doc.key,p.doc,new Xc(u._snapshot.mutatedKeys.has(p.doc.key),u._snapshot.fromCache),u.query.converter);return p.doc,{type:"added",doc:x,oldIndex:-1,newIndex:m++}}))}{let m=u._snapshot.oldDocs;return u._snapshot.docChanges.filter((p=>f||p.type!==3)).map((p=>{const x=new iu(u._firestore,u._userDataWriter,p.doc.key,p.doc,new Xc(u._snapshot.mutatedKeys.has(p.doc.key),u._snapshot.fromCache),u.query.converter);let b=-1,_=-1;return p.type!==0&&(b=m.indexOf(p.doc.key),m=m.delete(p.doc.key)),p.type!==1&&(m=m.add(p.doc),_=m.indexOf(p.doc.key)),{type:v5(p.type),doc:x,oldIndex:b,newIndex:_}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Qe(Je.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const n={};n.type=no._jsonSchemaVersion,n.bundleSource="QuerySnapshot",n.bundleName=J_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],o=[],u=[];return this.docs.forEach((f=>{f._document!==null&&(i.push(f._document),o.push(this._userDataWriter.convertObjectMap(f._document.data.value.mapValue.fields,"previous")),u.push(f.ref.path))})),n.bundle=(this._firestore,this.query._query,n.bundleName,"NOT SUPPORTED"),n}}function v5(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return io(61501,{type:a})}}no._jsonSchemaVersion="firestore/querySnapshot/1.0",no._jsonSchema={type:Pt("string",no._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};(function(n,i=!0){(function(u){xo=u})(Wa),Ha(new na("firestore",((o,{instanceIdentifier:u,options:f})=>{const m=o.getProvider("app").getImmediate(),p=new g5(new q_(o.getProvider("auth-internal")),new K_(m,o.getProvider("app-check-internal")),(function(b,_){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new Qe(Je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pu(b.options.projectId,_)})(m,u),m);return f={useFetchStreams:i,...f},p._setSettings(f),p}),"PUBLIC").setMultipleInstances(!0)),Os(ax,ix,n),Os(ax,ix,"esm2020")})();const w5={apiKey:"AIzaSyAdqbFNjrB6y-8BrMEYYCT5ywiCgZVtMaE",authDomain:"mtglibrary-70b46.firebaseapp.com",projectId:"mtglibrary-70b46",storageBucket:"mtglibrary-70b46.firebasestorage.app",messagingSenderId:"602862103839",appId:"1:602862103839:web:23c64b7486c058c903d42a",measurementId:"G-EWELJJQ631"},Df=Zx(w5),Kr=SN(Df);p5(Df);const j5=U_(Df),N5="http://localhost:3000";async function _5(){const a={"Content-Type":"application/json"};if(Kr.currentUser){const n=await Kr.currentUser.getIdToken();a.Authorization=`Bearer ${n}`}else console.warn("[API] No currentUser found, sending request without auth.");return a}async function Di(a,n,i=null,o={}){const u=new URL(`${N5}${n}`);Object.keys(o).forEach(p=>{o[p]!==null&&o[p]!==void 0&&u.searchParams.append(p,o[p])});const f={method:a,headers:await _5()};i&&(f.body=JSON.stringify(i));const m=await fetch(u,f);if(!m.ok){let p=m.statusText;try{const x=await m.json();x.error&&(p=x.error)}catch{}throw new Error(`API Error (${m.status}): ${p}`)}return m.status===204?null:m.json()}const Xe={get:(a,n)=>Di("GET",a,null,n),post:(a,n)=>Di("POST",a,n),put:(a,n)=>Di("PUT",a,n),delete:a=>Di("DELETE",a),getBugs:()=>Di("GET","/bugs").then(a=>a.content),updateUser:(a,n)=>Di("PUT",`/users/${a}`,n)},ib=w.createContext(),St=()=>w.useContext(ib),S5=({children:a})=>{const[n,i]=w.useState(null),[o,u]=w.useState(null),[f,m]=w.useState(!0),p=(k,O)=>l4(Kr,k,O),x=(k,O)=>o4(Kr,k,O),b=()=>{const k=new ar;return L4(Kr,k)},_=()=>(u(null),m4(Kr)),j=async k=>{if(!n)throw new Error("No user logged in");if(!k.type.startsWith("image/"))throw new Error("File must be an image.");if(k.size>2*1024*1024)throw new Error("File size must be under 2MB.");try{const O=I_(j5,`users/${n.uid}/profile_${Date.now()}`);await L_(O,k);const V=await D_(O);return await u4(n,{photoURL:V}),i({...n,photoURL:V}),V}catch(O){throw console.error("Error uploading profile picture:",O),O}},S=async()=>{if(Kr.currentUser)try{const k=await Xe.get("/me");u(k)}catch(k){console.error("Failed to fetch user profile:",k)}};w.useEffect(()=>f4(Kr,async O=>{i(O),O?await S():u(null),m(!1)}),[]);const E={currentUser:n,user:n,userProfile:o,refreshUserProfile:S,updateSettings:async k=>{if(!o)return;const O={...o.settings||{},...k};try{await Xe.updateUser(o.id,{settings:O}),u(V=>({...V,settings:O}))}catch(V){console.error("Failed to update settings:",V)}},signup:p,login:x,loginWithGoogle:b,logout:_,uploadProfilePicture:j};return s.jsx(ib.Provider,{value:E,children:!f&&a})};function k5(){const[a,n]=w.useState([]),[i,o]=w.useState(!1),[u,f]=w.useState(null),m=w.useCallback(async(x,b={})=>{const{set:_,cn:j,...S}=b,U=(x||"").trim();if(!(_||j||Object.keys(S).length>0)&&(!U||U.length<2)){n([]);return}o(!0),f(null);try{const k=await Xe.post("/cards/search",{query:U,set:_,cn:j,...S});n(k.data||[])}catch(k){console.error(k),f(k.message),n([])}finally{o(!1)}},[]),p=w.useCallback(async x=>{if(!x||x.trim().length<2)return[];try{return(await Xe.get("/cards/autocomplete",{q:x})).data||[]}catch(b){return console.error("[useScryfall] Autocomplete error:",b),[]}},[]);return{results:a,loading:i,error:u,searchCards:m,getSuggestions:p,setResults:n}}const lb=w.createContext();function is(){return w.useContext(lb)}function C5({children:a}){const[n,i]=w.useState([]),o=w.useCallback((f,m="info")=>{const p=Date.now();i(x=>[...x,{id:p,message:f,type:m}]),setTimeout(()=>{i(x=>x.filter(b=>b.id!==p))},3e3)},[]),u=w.useCallback(f=>{i(m=>m.filter(p=>p.id!==f))},[]);return s.jsxs(lb.Provider,{value:{addToast:o},children:[a,$i.createPortal(s.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:n.map(f=>s.jsx("div",{className:`
                                px-4 py-3 rounded-lg shadow-lg text-sm font-medium transition-all transform animate-fade-in-up pointer-events-auto cursor-pointer
                                ${f.type==="success"?"bg-green-600 text-white":""}
                                ${f.type==="error"?"bg-red-600 text-white":""}
                                ${f.type==="info"?"bg-gray-800 text-white border border-gray-700":""}
                                ${f.type==="warning"?"bg-yellow-500 text-black":""}
                            `,onClick:()=>u(f.id),children:f.message},f.id))}),document.body)]})}function pr(a={}){const{wishlist:n}=a,[i,o]=w.useState([]),[u,f]=w.useState(!0),[m,p]=w.useState(null),{currentUser:x}=St(),b=async()=>{if(x){f(!0);try{console.log("[useCollection] Fetching from API...");let S="/collection";n!==void 0&&(S+=`?wishlist=${n}`);const E=(await Xe.get(S)).map(k=>({...k.data,...k,deckId:k.deck_id,quantity:k.count,firestoreId:k.firestore_id,id:k.id}));o(E),p(null)}catch(S){console.error("Error fetching collection:",S),p(S)}finally{f(!1)}}};return w.useEffect(()=>{if(!x){o([]),f(!1);return}b()},[x]),{cards:i,loading:u,error:m,refresh:b,removeCard:async S=>{try{await Xe.delete(`/collection/${S}`),await b()}catch(U){throw console.error("Error removing card:",U),U}},updateCard:async(S,U)=>{try{await Xe.put(`/collection/${S}`,U),await b()}catch(E){throw console.error("Error updating card:",E),E}}}}function E5(a,n){const[i,o]=w.useState(a);return w.useEffect(()=>{const u=setTimeout(()=>{o(a)},n);return()=>{clearTimeout(u)}},[a,n]),i}const Zt={async addCardToCollection(a,n,i=1,o,u=!1){return Xe.post("/collection",{scryfall_id:n.id,name:n.name,set_code:n.set||n.set_code,collector_number:n.collector_number,finish:o||n.finish||"nonfoil",count:i,data:n,deck_id:null,is_wishlist:u})},async updateCard(a,n){return Xe.put(`/collection/${a}`,n)},async removeCard(a){return Xe.delete(`/collection/${a}`)},async importBatch(a,n,i="merge"){return Xe.post("/collection/batch",{cards:n,mode:i})}},ob=w.createContext();function If(){return w.useContext(ob)}function T5({children:a}){const[n,i]=w.useState(null),[o,u]=w.useState(!1),f=w.useCallback(p=>{i(p),u(!0)},[]),m=w.useCallback(()=>{u(!1),setTimeout(()=>i(null),300)},[]);return s.jsx(ob.Provider,{value:{selectedCard:n,isOpen:o,openCardModal:f,closeCardModal:m},children:a})}const cb=({card:a,normalCount:n=0,foilCount:i=0,wishlistCount:o=0,onUpdateCount:u,onUpdateWishlistCount:f})=>{const{openCardModal:m}=If(),[p,x]=w.useState(!1),b=(k,O=0)=>{if(!k)return"https://placehold.co/250x350?text=No+Image";const V=k.data||k;return V.card_faces&&V.card_faces.length>1?V.card_faces[O]?.image_uris?.normal||"https://placehold.co/250x350?text=No+Image":V.image_uris?.normal||k.image_uri||"https://placehold.co/250x350?text=No+Image"},_=a.data?.card_faces?.length>1||a.card_faces?.length>1,j=b(a,0),S=_?b(a,1):null,U=k=>{k.stopPropagation(),m(a)},E=(k,O,V)=>{k.stopPropagation(),u&&u(a,O,V)};return s.jsxs("div",{className:"group relative flex bg-gray-900/60 backdrop-blur-md rounded-xl overflow-hidden shadow-2xl border border-white/5 hover:border-indigo-500/50 transition-all duration-300 hover:shadow-[0_0_30px_rgba(79,70,229,0.15)] aspect-[3.2/3.5]",children:[s.jsxs("div",{className:"relative aspect-[2.5/3.5] h-full cursor-pointer overflow-hidden bg-gray-950 shrink-0",onClick:U,children:[s.jsxs("div",{className:`relative w-full h-full transition-all duration-700 transform-style-3d ${p?"rotate-y-180":""}`,children:[s.jsxs("div",{className:"absolute inset-0 backface-hidden",children:[s.jsx("img",{src:j,alt:a.name,className:"w-full h-full object-cover",loading:"lazy"}),s.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 bg-gradient-to-t from-indigo-500/20 to-transparent transition-opacity duration-500"})]}),_&&s.jsx("div",{className:"absolute inset-0 backface-hidden rotate-y-180",children:s.jsx("img",{src:S||j,alt:`${a.name} Back`,className:"w-full h-full object-cover"})})]}),_&&s.jsx("button",{onClick:k=>{k.stopPropagation(),x(!p)},className:"absolute bottom-2 left-2 p-2 bg-black/60 hover:bg-indigo-600 text-white rounded-full backdrop-blur-md transition-all z-10 opacity-0 group-hover:opacity-100 shadow-lg border border-white/10",title:"Flip Card",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),s.jsxs("div",{className:"flex-1 bg-black/40 flex flex-col justify-between py-1 border-l border-white/5 relative",children:[s.jsxs("div",{className:"flex flex-col items-center flex-1 justify-center relative hover:bg-white/5 transition-colors group/sec",children:[s.jsx("button",{onClick:k=>E(k,"normal",1),className:"p-1.5 text-gray-500 hover:text-white transition-all transform hover:scale-125",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 15l7-7 7 7"})})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-lg font-black text-white tabular-nums drop-shadow-[0_2px_4px_rgba(0,0,0,1)]",children:n}),s.jsx("span",{className:"text-[8px] font-black uppercase text-gray-600 tracking-[0.2em] -mt-1",children:"Normal"})]}),s.jsx("button",{onClick:k=>E(k,"normal",-1),className:"p-1.5 text-gray-500 hover:text-white transition-all transform hover:scale-125 disabled:opacity-0",disabled:n<=0,children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M19 9l-7 7-7-7"})})})]}),s.jsx("div",{className:"h-[1px] bg-white/5 mx-2"}),s.jsxs("div",{className:"flex flex-col items-center flex-1 justify-center relative hover:bg-indigo-500/5 transition-colors group/sec",children:[s.jsx("button",{onClick:k=>E(k,"foil",1),className:"p-1.5 text-indigo-400/60 hover:text-indigo-300 transition-all transform hover:scale-125",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 15l7-7 7 7"})})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-lg font-black text-indigo-400 tabular-nums drop-shadow-[0_2px_4px_rgba(0,0,0,1)]",children:i}),s.jsx("span",{className:"text-[8px] font-black uppercase text-indigo-600 tracking-[0.2em] -mt-1",children:"Foil"})]}),s.jsx("button",{onClick:k=>E(k,"foil",-1),className:"p-1.5 text-indigo-400/60 hover:text-indigo-300 transition-all transform hover:scale-125 disabled:opacity-0",disabled:i<=0,children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M19 9l-7 7-7-7"})})})]}),s.jsx("div",{className:"h-[1px] bg-white/5 mx-2"}),s.jsxs("div",{className:"flex flex-col items-center flex-1 justify-center relative hover:bg-orange-500/5 transition-colors group/sec",children:[s.jsx("button",{onClick:k=>{k.stopPropagation(),f&&f(a,1)},className:"p-1.5 text-orange-400/60 hover:text-orange-300 transition-all transform hover:scale-125",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 15l7-7 7 7"})})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-lg font-black text-orange-400 tabular-nums drop-shadow-[0_2px_4px_rgba(0,0,0,1)]",children:o}),s.jsx("span",{className:"text-[8px] font-black uppercase text-orange-600 tracking-[0.2em] -mt-1",children:"Wish"})]}),s.jsx("button",{onClick:k=>{k.stopPropagation(),f&&f(a,-1)},className:"p-1.5 text-orange-400/60 hover:text-orange-300 transition-all transform hover:scale-125 disabled:opacity-0",disabled:o<=0,children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M19 9l-7 7-7-7"})})})]})]})]})};function A5({title:a,titleId:n,...i},o){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":n},i),a?w.createElement("title",{id:n},a):null,w.createElement("path",{fillRule:"evenodd",d:"M3.792 2.938A49.069 49.069 0 0 1 12 2.25c2.797 0 5.54.236 8.209.688a1.857 1.857 0 0 1 1.541 1.836v1.044a3 3 0 0 1-.879 2.121l-6.182 6.182a1.5 1.5 0 0 0-.439 1.061v2.927a3 3 0 0 1-1.658 2.684l-1.757.878A.75.75 0 0 1 9.75 21v-5.818a1.5 1.5 0 0 0-.44-1.06L3.13 7.938a3 3 0 0 1-.879-2.121V4.774c0-.897.64-1.683 1.542-1.836Z",clipRule:"evenodd"}))}const ub=w.forwardRef(A5),R5=({value:a,onChange:n})=>{const[i,o]=w.useState(!1),u=w.useRef(null),f=[{label:"=",value:"="},{label:"",value:">="},{label:"",value:"<="}];w.useEffect(()=>{const p=x=>{u.current&&!u.current.contains(x.target)&&o(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=f.find(p=>p.value===a)||f[0];return s.jsxs("div",{className:"relative",ref:u,children:[s.jsxs("button",{type:"button",onClick:()=>o(!i),className:"flex items-center gap-2 px-3 py-3 bg-gray-900/50 hover:bg-gray-800 text-indigo-400 font-bold rounded-l-xl border-r border-white/10 transition-colors min-w-[50px] justify-center",children:[m.label,s.jsx("svg",{className:`w-3 h-3 transition-transform ${i?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&s.jsx("div",{className:"absolute top-full left-0 mt-1 w-20 bg-gray-900 border border-white/10 rounded-lg shadow-2xl z-[70] overflow-hidden backdrop-blur-xl",children:f.map(p=>s.jsx("button",{type:"button",onClick:()=>{n(p.value),o(!1)},className:`w-full px-4 py-2 text-left text-sm font-bold transition-colors ${a===p.value?"bg-indigo-600 text-white":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:p.label},p.value))})]})},db=({isOpen:a,onClose:n,onAddCard:i})=>{const[o,u]=w.useState(""),[f,m]=w.useState(!1),[p,x]=w.useState(""),[b,_]=w.useState(""),[j,S]=w.useState(!1),[U,E]=w.useState([]),[k,O]=w.useState(!1),[V,F]=w.useState([]),[G,te]=w.useState("or"),[ce,se]=w.useState(!1),[T,C]=w.useState(!1),[D,A]=w.useState([]),[L,H]=w.useState(""),[I,Me]=w.useState(""),[De,B]=w.useState({operator:"=",value:""}),[ie,xe]=w.useState({operator:"=",value:""}),[Ee,Oe]=w.useState({operator:"=",value:""}),[M,K]=w.useState(""),[X,re]=w.useState(""),{results:Z,loading:pe,error:fe,searchCards:Se,getSuggestions:ke}=k5(),{currentUser:Ve}=St(),{addToast:Le}=is(),{cards:We,refresh:yt}=pr(),ge=w.useRef(null),ye=w.useRef(null),Te=E5(o,300);w.useEffect(()=>{Te.length>=2&&f?we(Te):Te.length<2&&E([])},[Te]);const we=async le=>{const Ue=await ke(le);E(Ue),O(Ue.length>0)},Ne=w.useMemo(()=>{const le=new Map;return We&&We.forEach(Ue=>{const nt=Ue.scryfall_id||Ue.id;le.has(nt)||le.set(nt,[]),le.get(nt).push(Ue)}),le},[We]);w.useEffect(()=>{a&&ge.current&&ge.current.focus()},[a]);const je=le=>{le&&le.preventDefault(),O(!1);const Ue={set:p,cn:b,colors:V.length>0?V:void 0,colorLogic:G,colorIdentity:ce,colorExcluded:T,rarity:D.length>0?D:void 0,type:L,text:I,flavor:M,artist:X,mv:De.value!==""?{operator:De.operator,value:Number(De.value)}:void 0,power:ie.value!==""?{operator:ie.operator,value:Number(ie.value)}:void 0,toughness:Ee.value!==""?{operator:Ee.operator,value:Number(Ee.value)}:void 0};Se(o,Ue)},ze=()=>{u(""),x(""),_(""),F([]),C(!1),A([]),H(""),Me(""),B({operator:"=",value:""}),xe({operator:"=",value:""}),Oe({operator:"=",value:""}),K(""),re("")},Vt=le=>{F(Ue=>Ue.includes(le)?Ue.filter(nt=>nt!==le):[...Ue,le])},de=le=>{A(Ue=>Ue.includes(le)?Ue.filter(nt=>nt!==le):[...Ue,le])},ue=async(le,Ue,nt)=>{if(!Ve)return Le("Please log in","error");try{const ls=le.id,qt=Ne.get(ls)||[],en=Ue==="foil"?"foil":"nonfoil",rt=qt.find(kt=>kt.finish===en&&!kt.deck_id&&!kt.is_wishlist);nt>0?rt?(await Zt.updateCard(rt.id,{count:rt.count+1}),Le(`Added ${en} ${le.name}`,"success")):(await Zt.addCardToCollection(Ve.uid,le,1,en),Le(`Added new ${en} ${le.name}`,"success")):rt&&(rt.count>1?(await Zt.updateCard(rt.id,{count:rt.count-1}),Le(`Removed ${en} ${le.name}`,"info")):(await Zt.removeCard(rt.id),Le(`Removed last ${en} ${le.name}`,"info"))),yt()}catch(ls){console.error("Update failed",ls),Le("Failed to update collection","error")}},me=async(le,Ue)=>{if(!Ve)return Le("Please log in","error");try{const nt=le.id,qt=(Ne.get(nt)||[]).find(en=>en.is_wishlist&&!en.deck_id);Ue>0?qt?(await Zt.updateCard(qt.id,{count:qt.count+1}),Le(`Increased ${le.name} in wishlist`,"success")):(await Zt.addCardToCollection(Ve.uid,le,1,"nonfoil",!0),Le(`Added ${le.name} to wishlist`,"success")):qt&&(qt.count>1?(await Zt.updateCard(qt.id,{count:qt.count-1}),Le(`Decreased ${le.name} in wishlist`,"info")):(await Zt.removeCard(qt.id),Le(`Removed ${le.name} from wishlist`,"info"))),yt()}catch(nt){console.error("Wishlist update failed",nt),Le("Failed to update wishlist","error")}};if(!a)return null;const Ce={W:{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-200",symbol:"https://svgs.scryfall.io/card-symbols/W.svg"},U:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-200",symbol:"https://svgs.scryfall.io/card-symbols/U.svg"},B:{bg:"bg-gray-300",text:"text-gray-800",border:"border-gray-400",symbol:"https://svgs.scryfall.io/card-symbols/B.svg"},R:{bg:"bg-red-100",text:"text-red-700",border:"border-red-200",symbol:"https://svgs.scryfall.io/card-symbols/R.svg"},G:{bg:"bg-green-100",text:"text-green-700",border:"border-green-200",symbol:"https://svgs.scryfall.io/card-symbols/G.svg"},C:{bg:"bg-gray-400",text:"text-gray-900",border:"border-gray-500",symbol:"https://svgs.scryfall.io/card-symbols/C.svg"}};return $i.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 animate-fade-in",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity",onClick:n}),s.jsxs("div",{className:"relative bg-gray-900 border border-white/10 rounded-3xl shadow-2xl w-full max-w-7xl max-h-[90vh] flex flex-col overflow-hidden ring-1 ring-white/5",children:[s.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-gray-950/50 flex-shrink-0",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-3",children:[s.jsx("span",{className:"text-indigo-400",children:"Card Library"}),s.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-indigo-500/20 text-indigo-300 uppercase tracking-wider border border-indigo-500/30",children:"Database"})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Search the entire Scryfall database to grow your collection."})]}),s.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors p-2 hover:bg-white/5 rounded-xl",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",children:[s.jsx("div",{className:"p-6 bg-gray-900 space-y-4 relative z-[60] border-b border-white/5",children:s.jsxs("form",{onSubmit:je,className:"relative flex flex-col gap-4",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"relative flex-1 group",children:[s.jsx("input",{ref:ge,type:"text",placeholder:"Search cards...",className:"w-full bg-gray-950 text-white border border-white/10 rounded-2xl py-4 px-6 pl-14 text-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all placeholder-gray-600 shadow-inner",value:o,onChange:le=>{u(le.target.value),m(!0),O(!0)},onFocus:()=>o.length>=2&&O(!0)}),s.jsx("svg",{className:"absolute left-5 top-5 w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),k&&U.length>0&&s.jsx("div",{ref:ye,className:"absolute top-full left-0 right-0 mt-2 bg-gray-900 border border-white/10 rounded-xl shadow-2xl z-[100] py-2 max-h-60 overflow-y-auto custom-scrollbar",children:U.map((le,Ue)=>s.jsx("button",{type:"button",onClick:()=>{u(le),m(!1),O(!1),Se(le,{set:p,cn:b})},className:"w-full text-left px-6 py-3 hover:bg-white/5 text-gray-400 hover:text-white transition-colors border-b border-white/5 last:border-0",children:le},Ue))})]}),s.jsxs("button",{type:"button",onClick:()=>S(!j),className:`px-6 rounded-2xl border border-white/10 flex items-center gap-2 font-bold transition-all ${j?"bg-indigo-600 text-white border-indigo-500":"bg-gray-950 text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[s.jsx(ub,{className:"w-5 h-5"}),"Advanced Search"]}),s.jsx("button",{type:"submit",disabled:pe,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-2xl text-lg font-bold transition-all disabled:opacity-50 min-w-[120px] shadow-lg shadow-indigo-500/20",children:pe?"...":"Search"})]}),s.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${j?"max-h-[800px] opacity-100 mt-2":"max-h-0 opacity-0"}`,children:s.jsxs("div",{className:"bg-gray-950/50 rounded-2xl p-6 border border-white/5 space-y-6",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("h3",{className:"text-xs font-black text-gray-500 uppercase tracking-widest",children:"Advanced Configuration"}),s.jsx("button",{onClick:ze,className:"text-orange-500 hover:text-orange-400 text-[10px] font-black uppercase tracking-widest hover:underline",children:"Reset Filters"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Colors"}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsx("div",{className:"flex gap-2",children:Object.entries(Ce).map(([le,Ue])=>s.jsx("button",{type:"button",onClick:()=>Vt(le),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all border-2 ${V.includes(le)?"border-white scale-110 shadow-lg":"border-transparent opacity-60 hover:opacity-100 hover:scale-105"}`,style:{backgroundColor:V.includes(le)?"transparent":""},children:s.jsx("img",{src:Ue.symbol,alt:le,className:`w-full h-full ${V.includes(le)?"drop-shadow-md":"grayscale"}`})},le))}),s.jsx("div",{className:"flex items-center gap-2 text-sm bg-gray-900 border border-white/10 rounded-lg p-1",children:["or","and"].map(le=>s.jsx("button",{type:"button",onClick:()=>te(le),className:`px-3 py-1 rounded-md text-[10px] font-black uppercase transition-all ${G===le?"bg-indigo-600 text-white":"text-gray-500 hover:text-gray-300"}`,children:le},le))})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Rarity"}),s.jsx("div",{className:"flex gap-3",children:["common","uncommon","rare","mythic"].map(le=>s.jsx("button",{type:"button",onClick:()=>de(le),className:`px-3 py-1.5 rounded-lg border text-xs font-bold uppercase transition-all ${D.includes(le)?"bg-indigo-500/20 border-indigo-500 text-indigo-300":"bg-gray-900 border-white/10 text-gray-500 hover:text-gray-300"}`,children:le.charAt(0)},le))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Type"}),s.jsx("input",{type:"text",placeholder:"Creature, Artifact...",className:"w-full bg-gray-900 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:border-indigo-500 outline-none",value:L,onChange:le=>H(le.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Text"}),s.jsx("input",{type:"text",placeholder:"Rules text...",className:"w-full bg-gray-900 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:border-indigo-500 outline-none",value:I,onChange:le=>Me(le.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Mana Value"}),s.jsxs("div",{className:"flex items-center bg-gray-900 border border-white/10 rounded-xl overflow-hidden",children:[s.jsx(R5,{value:De.operator,onChange:le=>B({...De,operator:le})}),s.jsx("input",{type:"number",className:"w-full bg-transparent p-2 text-sm outline-none",value:De.value,onChange:le=>B({...De,value:le.target.value})})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Set"}),s.jsx("input",{type:"text",placeholder:"ABC",maxLength:5,className:"w-full bg-gray-900 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:border-indigo-500 outline-none uppercase",value:p,onChange:le=>x(le.target.value)})]}),s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider ml-1",children:"CN"}),s.jsx("input",{type:"text",placeholder:"#",className:"w-full bg-gray-900 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:border-indigo-500 outline-none",value:b,onChange:le=>_(le.target.value)})]})]})]})]})})]})}),s.jsxs("div",{className:"p-6",children:[fe&&s.jsx("div",{className:"flex items-center justify-center p-8 text-red-400 bg-red-500/10 rounded-2xl border border-red-500/20",children:s.jsx("p",{className:"font-bold",children:fe})}),!pe&&Z.length===0&&(o||j)&&!fe&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-500 opacity-60",children:[s.jsx("svg",{className:"w-16 h-16 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("p",{className:"text-lg font-bold",children:"No matches found"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Z.map((le,Ue)=>{const nt=Ne.get(le.id)||[],ls=nt.filter(rt=>rt.finish==="nonfoil"&&!rt.deck_id&&!rt.is_wishlist).reduce((rt,kt)=>rt+(kt.count||1),0),qt=nt.filter(rt=>rt.finish==="foil"&&!rt.deck_id&&!rt.is_wishlist).reduce((rt,kt)=>rt+(kt.count||1),0),en=nt.filter(rt=>rt.is_wishlist&&!rt.deck_id).reduce((rt,kt)=>rt+(kt.count||1),0);return s.jsx(cb,{card:le,normalCount:ls,foilCount:qt,wishlistCount:en,onUpdateCount:ue,onUpdateWishlistCount:me},le.id||Ue)})})]})]})]}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .custom-scrollbar::-webkit-scrollbar { width: 8px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.02); }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(99, 102, 241, 0.2); border-radius: 10px; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(99, 102, 241, 0.4); }
            `}})]}),document.body)},Hn={async sendMessage(a,n,i,o="",u=null){if(!a)throw new Error("API Key is missing. Please add it in Settings.");const f=u?.name||"MTG Forge",m=u?.personality?`Personality: ${u.personality}`:"Personality: Knowledgeable, friendly, and concise.",x=[{role:"user",parts:[{text:`
You are ${f}, an elite Magic: The Gathering AI assistant.
Your goal is to provide accurate, strategic, and engaging advice to players.

**Persona & Style:**
- ${m}
- Use emojis to add flair (e.g., , , , , , , ).
- Format responses using **Tailwind CSS** classes within HTML tags for a premium look.
- Do NOT use Markdown. Output raw HTML that can be injected directly into a <div>.

**Formatting Rules:**
- Use <p class="mb-2 text-gray-300"> for paragraphs.
- Use <strong class="text-indigo-400"> for key terms or card names.
- Use <ul class="list-disc pl-5 mb-2 space-y-1 text-gray-300"> for lists.
- Use <div class="bg-gray-700/50 p-3 rounded-lg border-l-4 border-indigo-500 mb-2"> for important notes or rules citations.
- Use <code class="bg-gray-900 px-1 py-0.5 rounded text-indigo-300 font-mono text-sm"> for mana costs (e.g., {1}{U}{B}) or keywords.

**Content Guidance:**
- If asked about rules, cite the Comprehensive Rules if possible.
- If asked about deck building, consider mana curve, synergy, and format staples.
- If asked about lore, be descriptive and immersive.

Context from User's Current View:
${o}
`.trim()}]},...n.map(j=>({role:j.role==="user"?"user":"model",parts:[{text:j.content}]})),{role:"user",parts:[{text:i}]}],b=["gemini-2.5-flash","gemini-2.0-flash","gemini-flash-latest","gemini-2.5-flash-lite","gemini-2.0-flash-lite","gemini-flash-lite-latest","gemini-exp-1206","gemini-pro-latest","gemini-1.5-flash","gemini-1.5-flash-latest","gemini-1.5-pro","gemini-1.5-pro-latest"];let _=null;for(const j of b)try{const S=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${j}:generateContent?key=${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:x})});if(!S.ok){const k=await S.json();if(S.status===404||S.status===429){console.warn(`Model ${j} failed (${S.status}). Trying next...`),_=k;continue}throw new Error(k.error?.message||`Gemini API Error: ${S.statusText}`)}return(await S.json()).candidates?.[0]?.content?.parts?.[0]?.text||"I couldn't generate a response."}catch(S){console.warn(`Error with model ${j}:`,S),_=S}throw console.error("All Gemini models failed. Last error:",_),_||new Error("Failed to connect to any Gemini model.")},async getDeckStrategy(a,n,i=null,o=[],u=null){if(!a)throw new Error("API Key is missing.");const f=u?.name||"The Oracle",m=u?.personality?`Adopt the persona of ${f}: ${u.personality}`:"Act as a Magic: The Gathering expert.",p=o&&o.length>0,x=p?`Existing Deck List Analysis:
${o.map(j=>`- ${j.name} (${j.type_line||"Unknown"})`).join(`
`)}`:"This is a NEW deck build.";let b="";i&&(b=`
                User Playstyle Profile:
                - Archetypes: ${i.archetypes?.join(", ")||"N/A"}
                - Summary: ${i.summary||"N/A"}
                - Aggression: ${i.scores?.aggression||0}
                - Combo Affinity: ${i.scores?.comboAffinity||0}
                - Interaction: ${i.scores?.interaction||0}
                Tailor the deck's theme and card suggestions to align with this playstyle.
            `);const _=`
            ${m} I have chosen "${n}" as my Commander.
            
            ${x}
            
            ${p?"Analyze the PROVIDED deck list. Identify the specific game plan, key synergies between these cards, and how to pilot THIS build.":"Suggest a competitive yet fun deck strategy tailored to the following playstyle."}
            
            ${b}

            **Deck Composition Goals:**
            - Lands: 35-38
            - Mana Ramp: 10-12
            - Card Draw: 10
            - Targeted Removal: 8-10
            - Board Wipes: 2-4
            - Synergy / Strategy: 25-30

            **Mana Curve Goal (Bell Curve):**
            - 1-2 Mana: High volume for setup.
            - 3-4 Mana: Moderate volume for utility/threats.
            - 5+ Mana: Low volume for finishers.

            **Formatting Instructions:**
            - Use **HTML** for the 'strategy' field.
            - The 'theme' field should be a **short, punchy title** (e.g., "Elemental Mastery", "Shadow Infiltration").
            - The 'strategy' field should start with a **Theme Summary**: 2-3 sentences providing high-level context, styled with a distinct, prominent look.
            - Focus on a structured breakdown:
              1. **Welcome/Theme Summary**: A few sentences on why this commander and theme work.
              2. **Commander Context**: What are the assumed or key abilities that drive the build?
              3. **Early Game (Turns 1-3)**: Focus on setup, ramp, and disruption. Use a  emoji.
              4. **Mid Game (Turns 4-6)**: Focus on value engines and commander deployment. Use a  emoji.
              5. **Late Game (Turns 7+)**: Focus on finishers and storming off. Use a  emoji.
              6. **Key Synergies & Combos**: Highlight 3-4 specific card combinations. Use a  emoji.
            - Use **Tailwind CSS** classes (e.g., <span class="text-indigo-400 font-bold">Key Card</span>) to highlight important terms.
            - Use headers for each phase (e.g., <h4 class="text-indigo-400 font-black uppercase mb-2"> Early Game</h4>).
            5. **CRITICAL: Deck Composition Numbers**:
                - You MUST calculate specific counts for this specific commander strategies.
                - Do NOT use generic numbers (like 10/10/10). Tailor them! (e.g., A spellslinger deck might want 25 Instants and only 5 Creatures).
                - The 'functional' categories MUST sum to exactly **99** cards (assuming 1 commander).
                - The 'types' categories MUST sum to exactly **99** cards.
                - Ensure 'Lands' concept matches in both sections (e.g. if Functional Lands is 36, Type Lands should be 36).

            You MUST respond with VALID JSON strictly matching this format:
            {
                "layout": {
                    "functional": {
                        "Lands": 36, 
                        "Mana Ramp": 10,
                        "Card Draw": 10,
                        "Targeted Removal": 10,
                        "Board Wipes": 3,
                        "Synergy / Strategy": 30
                    },
                    "types": {
                        "Creatures": 30,
                        "Instants": 10,
                        "Sorceries": 10,
                        "Artifacts": 10,
                        "Enchantments": 5,
                        "Planeswalkers": 0,
                        "Lands": 34
                    }
                },
                "suggestedName": "...",
                "theme": "...",
                "strategy": "<div>...Structured HTML Content...</div>"
            }
            CRITICAL: 
            1. 'layout' is the MOST IMPORTANT field. It MUST be populated.
            2. 'functional' counts must sum to exactly 99.
            3. 'types' counts must sum to exactly 99. 
            4. Do NOT refer to yourself as "The Oracle" unless your name is explicitly "The Oracle". Use ONLY your assigned name: ${f}.
            Do NOT use markdown code blocks. Return only the JSON string.
        `;try{const S=(await this.sendMessage(a,[],_)).replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(S)}catch(j){throw console.error("AI Strategy Error:",j),new Error("Failed to generate strategy. Please try again.")}},async generatePlaystyleQuestion(a,n){if(!a)throw new Error("API Key is missing.");const i="You are an expert survey designer for Magic: The Gathering (MTG) players. Your goal is to create the most informative question to understand a user's playstyle based on their previous answers. Questions should be clear and concise, with 3-5 distinct multiple-choice answers. Avoid repeating questions. Focus on different aspects of MTG playstyles, such as deck preferences, game strategies, social interaction styles, and risk tolerance.";let o;n.length===0?o="Generate the very first question for an MTG playstyle questionnaire. This question should gauge the player's overall experience with the game, as this will help tailor subsequent questions.":n.length===1?o="Generate the second question for an MTG playstyle questionnaire. This question should build on the player's overall experience and delve into their specific preferences.":n.length===2?o="Generate the third question for an MTG playstyle questionnaire. This question should explore the player's fantasy or thematic preferences in deck building.":o=`Based on the user's previous answers, generate the next single best question to further refine their playstyle profile. Do not repeat questions.

Previous Answers:
${n.map(m=>`- ${m.question}: ${m.answer}`).join(`
`)}`;const u=`${i}

${o}

Respond with VALID JSON ONLY:
{ "question": "...", "choices": ["...", "..."] }`;try{const m=(await this.sendMessage(a,[],u)).replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(m)}catch(f){throw console.error("Gemini Question Error:",f),f}},async synthesizePlaystyle(a,n){if(!a)throw new Error("API Key is missing.");const i="You are an expert MTG coach and psychographic analyst. Your task is to analyze a player's answers and synthesize a detailed playstyle profile. The summary should be a concise paragraph. Scores must be 0-100.",o=`Analyze the following questionnaire answers and generate a detailed playstyle profile in JSON format.

${n.map(f=>`- ${f.question} -> ${f.answer}`).join(`
`)}`,u=`${i}

${o}

Respond with VALID JSON ONLY matching this schema:
        {
            "summary": "...",
            "tags": ["tag1", "tag2"],
            "scores": { "aggression": 50, "consistency": 50, "interaction": 50, "variance": 50, "comboAffinity": 50 },
            "archetypes": ["archetype1", "archetype2"]
        }`;try{const m=(await this.sendMessage(a,[],u)).replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(m)}catch(f){throw console.error("Gemini Synthesis Error:",f),new Error("Failed to synthesize profile.")}},async refinePlaystyleChat(a,n,i,o=null){if(!a)throw new Error("API Key is missing.");const u=o?.name||"The Oracle",f=o?.personality?`Personality: ${o.personality}`:"Personality: Wise, insightful, slightly magical.",m=n.length===0,p=`
            You are ${u}, an expert MTG coach conducting a "Deep Dive" interview to build a player's psychographic profile.
            ${f}

            Current Profile Summary: ${i?.summary||"New Profile"}
            Current Tags: ${i?.tags?.join(", ")||"None"}

            Instructions:
            ${m?`1. Introduce yourself as ${u}.
                   2. Explain that you want to understand their playstyle to help build better decks.
                   3. Ask the FIRST open-ended question to start the profile (e.g. "What draws you to magic?").`:`1. Analyze the user's latest input.
                   2. Formulate a conversational response (warm, insightful, matching your persona).
                   3. Ask ONE follow-up question to dig deeper into a missing or vague area.
                   4. Simultaneously, UPDATE the JSON profile based on the new information (merging with known info).`}
        `,x=n.slice(-6),b=[{role:"user",parts:[{text:p}]},...x.map(U=>({role:U.role==="user"?"user":"model",parts:[{text:U.content}]}))],_=`
            ${m?"Generate the initial greeting and first question.":"Based on the conversation, respond to the user and update the profile."}
            RETURN JSON ONLY.
        `;b.push({role:"user",parts:[{text:_}]});const j=["gemini-2.0-flash","gemini-2.5-flash","gemini-flash-latest","gemini-1.5-flash-latest","gemini-1.5-flash","gemini-1.5-pro","gemini-1.5-pro-latest"];let S=[];for(const U of j){try{const E=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${U}:generateContent?key=${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:b,generationConfig:{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{aiResponse:{type:"STRING"},updatedProfile:{type:"OBJECT",properties:{summary:{type:"STRING"},tags:{type:"ARRAY",items:{type:"STRING"}},scores:{type:"OBJECT",properties:{aggression:{type:"NUMBER"},consistency:{type:"NUMBER"},interaction:{type:"NUMBER"},comboAffinity:{type:"NUMBER"}}},archetypes:{type:"ARRAY",items:{type:"STRING"}}},required:["summary","tags","scores","archetypes"]}},required:["aiResponse","updatedProfile"]}}})});if(E.ok){const O=(await E.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(O)return JSON.parse(O)}else{const k=await E.json();if(S.push(`${U} (Schema): ${E.status} ${k.error?.message||""}`),E.status===404||E.status===429)continue}}catch(E){S.push(`${U} (Schema Error): ${E.message}`)}try{const E=JSON.parse(JSON.stringify(b));E[E.length-1].parts[0].text+=`

CRITICAL: Respond with VALID JSON only. No markdown. Format: { aiResponse: string, updatedProfile: object }`;const k=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${U}:generateContent?key=${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:E})});if(k.ok){const V=(await k.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(V){const F=V.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(F)}}else{const O=await k.json();S.push(`${U} (Raw): ${k.status} ${O.error?.message||""}`)}}catch(E){S.push(`${U} (Raw Error): ${E.message}`)}}throw console.error("Gemini Chat Refine Exhausted:",S),new Error(`Oracle Exhausted: ${S[0]||"Unknown error"}`)},async forgeHelperChat(a,n,i){if(!a)throw new Error("API Key is missing.");const o=`
            You are an expert fantasy writer and character designer allowing a user to "Forge" their own AI companion for Magic: The Gathering.
            Your goal is to interview the user to define their Helper's Persona.
            
            Current Draft:
            - Name: ${i?.name||"Unknown"}
            - Type: ${i?.type||"Unknown"} (e.g., Spirit, Goblin, Construct, Wizard)
            - Personality: ${i?.personality||"Unknown"} (e.g., Snarky, Wise, Aggressive)

            Instructions:
            1. Analyze the user's input.
            2. If they provided new info (name, type, personality), UPDATE the JSON draft locally.
            3. Respond in a neutral, helpful "System" tone (like a character creation menu guide).
            4. Ask for the missing fields one by one.
            5. If all fields are present, ask for confirmation.
        `,u=n.slice(-6),f=[{role:"user",parts:[{text:o}]},...u.map(b=>({role:b.role==="user"?"user":"model",parts:[{text:b.content}]}))];f.push({role:"user",parts:[{text:`
            Based on the conversation, respond to the user and update the helper draft.
            RETURN JSON ONLY.
        `}]});const p=["gemini-2.0-flash","gemini-2.5-flash","gemini-flash-latest","gemini-1.5-flash-latest","gemini-1.5-flash","gemini-1.5-pro","gemini-1.5-pro-latest"];let x=[];for(const b of p){try{const _=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${b}:generateContent?key=${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:f,generationConfig:{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{aiResponse:{type:"STRING"},updatedDraft:{type:"OBJECT",properties:{name:{type:"STRING"},type:{type:"STRING"},personality:{type:"STRING"}},required:["name","type","personality"]}},required:["aiResponse","updatedDraft"]}}})});if(_.ok){const S=(await _.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(S)return JSON.parse(S)}else{const j=await _.json();if(x.push(`${b}: ${_.status}`),_.status===404||_.status===429)continue}}catch(_){x.push(`${b}: ${_.message}`)}try{const _=JSON.parse(JSON.stringify(f));_[_.length-1].parts[0].text+=`

CRITICAL: Respond with VALID JSON only. No markdown. Format: { aiResponse: string, updatedDraft: object }`;const j=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${b}:generateContent?key=${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:_})});if(j.ok){const U=(await j.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(U){const E=U.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(E)}}}catch{}}throw new Error(`Forge Exhausted: ${x.join(" | ")}`)},async generateDeckSuggestions(a,n,i=null){if(!a)throw new Error("API Key is missing.");const{playstyle:o,targetRole:u}=n,f=i?.name||"Expert MTG Deck Builder",m=i?.personality?`Adopt the persona of ${f}: ${i.personality}`:"";let p="";o&&(p=`
                User Playstyle: ${o.archetypes?.join(", ")||"N/A"}. 
                Summary: ${o.summary||"N/A"}.
            `);const x=`
            You are ${f}. ${m}
            Analyze candidates for a ${u||"general"} role in the deck.
            ${p}
            
            **Mana Curve Priorities (Bell Curve):**
            Focus on CMC 1-2 for high volume, 3-4 for moderate, 5+ for finishers.
            
            **Basic Land Split Logic:**
            If targetRole is 'Lands', and you cannot fill the required count with provided candidates, suggest a 'Basic Land Split' at the END of the suggestions array.
        `,b=["gemini-2.0-flash","gemini-flash-latest","gemini-1.5-flash","gemini-1.5-flash-latest","gemini-1.5-flash-001","gemini-1.5-flash-002","gemini-1.5-pro","gemini-1.5-pro-latest"],_={role:"system",parts:[{text:x}]},j=[{role:"user",parts:[{text:`Task: ${n.instructions}

Candidates: ${JSON.stringify(n.candidates)}

IMPORTANT: You MUST respond with a VALID JSON object containing a "suggestions" array. Each suggestion needs "rating" (1-10) and "reason" (string).`}]}];let S=[];for(const U of b){try{const E=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${U}:generateContent?key=${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({system_instruction:_,contents:j,generationConfig:{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{suggestions:{type:"ARRAY",items:{type:"OBJECT",properties:{firestoreId:{type:"STRING"},name:{type:"STRING"},count:{type:"NUMBER"},rating:{type:"NUMBER"},reason:{type:"STRING"},isBasicLand:{type:"BOOLEAN"}},required:["rating","reason"]}}},required:["suggestions"]}}})});if(E.ok){const O=(await E.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(O)return JSON.parse(O)}else{const k=await E.json();if(S.push(`${U} (Schema): ${E.status} ${k.error?.message||""}`),E.status===404||E.status===429)continue}}catch(E){S.push(`${U} (Schema Error): ${E.message}`)}try{const E=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${U}:generateContent?key=${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({system_instruction:_,contents:[{role:"user",parts:[{text:`${j[0].parts[0].text}

You MUST respond with VALID RAW JSON format ONLY. Do not use markdown blocks.`}]}]})});if(E.ok){const O=(await E.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(O){const V=O.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(V)}}else{const k=await E.json();S.push(`${U} (Raw): ${E.status} ${k.error?.message||""}`)}}catch(E){S.push(`${U} (Raw Error): ${E.message}`)}}throw console.error("[Gemini] All models failed. Summary:",S),new Error(`Oracle Exhausted: ${S.join(" | ")}`)}},Jc=10,hb=({isOpen:a,onClose:n,onComplete:i})=>{const{userProfile:o}=St(),[u,f]=w.useState("selection"),[m,p]=w.useState("intro"),[x,b]=w.useState([]),[_,j]=w.useState([]),[S,U]=w.useState(null),[E,k]=w.useState(null),[O,V]=w.useState([]),[F,G]=w.useState(null),[te,ce]=w.useState(""),se=w.useRef(null),[T,C]=w.useState(!1),[D,A]=w.useState(null),L=o?.settings?.helper?.name||"The Oracle";w.useEffect(()=>{a&&H()},[a]),w.useEffect(()=>{se.current?.scrollIntoView({behavior:"smooth"})},[O]);const H=()=>{f("selection"),p("intro"),j([]),V([]),G(null),A(null),k(null),ce("")},I=()=>{f("quick"),p("loading"),Me([])},Me=async M=>{p("loading"),C(!0),A(null),k(null);try{const K=o?.settings?.geminiApiKey;if(!K)throw new Error("Gemini API Key is missing.");const X=await Hn.generatePlaystyleQuestion(K,M);U(X),p("question")}catch(K){console.error("Quick Wizard Error:",K),A(K.message||"Failed to summon the oracle."),f("error")}finally{C(!1)}},De=async M=>{k(M),await new Promise(re=>setTimeout(re,600));const K={question:S.question,answer:M},X=[..._,K];j(X),X.length>=Jc?B(X):Me(X)},B=async M=>{f("synthesis");try{const K=o?.settings?.geminiApiKey,X=await Hn.synthesizePlaystyle(K,M);i&&await i(X),n()}catch{A("Failed to synthesize your profile."),f("error")}},ie=async()=>{f("advanced"),p("chat"),C(!0),G({summary:"Pending analysis...",tags:[],scores:{}});try{const M=o?.settings?.geminiApiKey;if(!M)throw new Error("API Key missing.");const K=await Hn.refinePlaystyleChat(M,[],F,o.settings.helper);V([{role:"model",content:K.aiResponse}])}catch(M){console.error("Intro Error:",M),V([{role:"model",content:`Greetings. I am ${L}. Let us begin our analysis.`}])}finally{C(!1)}},xe=async()=>{if(!te.trim())return;const M={role:"user",content:te},K=[...O,M];V(K),ce(""),C(!0);try{const X=o?.settings?.geminiApiKey;if(!X)throw new Error("API Key missing.");const re=await Hn.refinePlaystyleChat(X,K,F,o.settings.helper);G(re.updatedProfile),V(Z=>[...Z,{role:"model",content:re.aiResponse}])}catch(X){console.error("Chat Error:",X),V(re=>[...re,{role:"model",content:"My connection to the leyline flickered. Please repeat that."}])}finally{C(!1)}},Ee=async()=>{f("synthesis"),F&&i&&await i(F),n()},Oe=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),xe())};return a?s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:s.jsxs("div",{className:"relative w-full max-w-6xl h-[85vh] bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden flex flex-col",children:[s.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-20 p-2 bg-black/20 rounded-full hover:bg-black/40 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),u==="selection"&&s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 space-y-12 animate-fade-in",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("h2",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400",children:"Choose Your Path"}),s.jsx("p",{className:"text-gray-400 text-lg max-w-2xl",children:"How shall we determine your magical signature?"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-4xl",children:[s.jsxs("button",{onClick:I,className:"group relative bg-gray-800/50 hover:bg-indigo-900/20 border border-gray-700 hover:border-indigo-500 rounded-2xl p-8 text-left transition-all duration-300 transform hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/10",children:[s.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:s.jsx("svg",{className:"w-32 h-32 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M13 2L3 14h9v8l10-12h-9l9-8z"})})}),s.jsxs("div",{className:"relative z-10 space-y-4",children:[s.jsx("div",{className:"w-12 h-12 bg-indigo-500/20 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),s.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-indigo-300 transition-colors",children:"Quick Setup"}),s.jsxs("p",{className:"text-gray-400 group-hover:text-gray-300",children:["Answer ",Jc," rapid-fire questions to generate a baseline profile. Best for getting started quickly."]}),s.jsxs("div",{className:"pt-4 flex items-center text-sm font-bold text-indigo-400 uppercase tracking-wider",children:["Start Assessment ",s.jsx("span",{className:"ml-2 group-hover:ml-3 transition-all",children:""})]})]})]}),s.jsxs("button",{onClick:ie,className:"group relative bg-gray-800/50 hover:bg-purple-900/20 border border-gray-700 hover:border-purple-500 rounded-2xl p-8 text-left transition-all duration-300 transform hover:-translate-y-1 hover:shadow-2xl hover:shadow-purple-500/10",children:[s.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:s.jsx("svg",{className:"w-32 h-32 text-purple-500",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),s.jsxs("div",{className:"relative z-10 space-y-4",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),s.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-purple-300 transition-colors",children:"Deep Dive"}),s.jsx("p",{className:"text-gray-400 group-hover:text-gray-300",children:"Have a conversation with the Oracle. Iterate on your preferences in real-time for a highly tailored profile."}),s.jsxs("div",{className:"pt-4 flex items-center text-sm font-bold text-purple-400 uppercase tracking-wider",children:["Enter The Sanctum ",s.jsx("span",{className:"ml-2 group-hover:ml-3 transition-all",children:""})]})]})]})]}),s.jsx("div",{className:"text-gray-500 text-sm",children:"You can always retake this assessment later from your profile settings."})]}),u==="quick"&&s.jsxs("div",{className:"flex-1 flex flex-col h-full bg-gray-900",children:[s.jsxs("div",{className:"h-16 border-b border-gray-800 flex items-center justify-between px-8 bg-gray-900/50",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mr-3"}),"Quick Assessment"]}),s.jsxs("div",{className:"text-sm font-mono text-indigo-400",children:["Q",_.length+1," / ",Jc]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-8 flex flex-col items-center justify-center",children:m==="loading"?s.jsxs("div",{className:"flex flex-col items-center space-y-4 animate-pulse",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"text-indigo-300 font-medium",children:"Consulting the archives..."})]}):S&&s.jsxs("div",{className:"max-w-2xl w-full space-y-8 animate-fade-in-up",children:[s.jsx("div",{className:"w-full h-1 bg-gray-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-500 ease-out",style:{width:`${_.length/Jc*100}%`}})}),s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white leading-relaxed text-center",children:S.question}),s.jsx("div",{className:"grid grid-cols-1 gap-3",children:S.choices.map((M,K)=>{const X=E===M;return s.jsxs("button",{onClick:()=>De(M),disabled:E!==null,className:`
                                                            group flex items-center p-4 rounded-xl border transition-all duration-200 text-left
                                                            ${X?"bg-indigo-600/20 border-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.3)]":"bg-gray-800 border-gray-700 hover:bg-gray-750 hover:border-gray-600"}
                                                            ${E&&!X?"opacity-50":""}
                                                        `,children:[s.jsx("span",{className:`
                                                            w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-4 transition-colors
                                                            ${X?"bg-indigo-500 text-white":"bg-gray-700 text-gray-400 group-hover:bg-gray-600"}
                                                        `,children:String.fromCharCode(65+K)}),s.jsx("span",{className:`text-lg transition-colors ${X?"text-white":"text-gray-300 group-hover:text-white"}`,children:M})]},K)})})]})})]}),u==="advanced"&&s.jsxs("div",{className:"flex-1 flex h-full",children:[s.jsxs("div",{className:"flex-1 flex flex-col bg-gray-900 border-r border-gray-800 w-2/3",children:[s.jsxs("div",{className:"h-16 border-b border-gray-800 flex items-center px-6 bg-gray-900/80 backdrop-blur-sm z-10",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold",children:L}),s.jsx("p",{className:"text-xs text-purple-400",children:"Deep Dive Analysis"})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[O.map((M,K)=>s.jsx("div",{className:`flex ${M.role==="user"?"justify-end":"justify-start"}`,children:s.jsx("div",{className:`
                                            max-w-[80%] rounded-2xl p-4 text-sm leading-relaxed
                                            ${M.role==="user"?"bg-purple-600 text-white rounded-br-none":"bg-gray-800 text-gray-200 border border-gray-700 rounded-bl-none"}
                                        `,children:M.content})},K)),T&&s.jsx("div",{className:"flex justify-start",children:s.jsxs("div",{className:"bg-gray-800 rounded-2xl p-4 border border-gray-700 rounded-bl-none flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce"}),s.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce delay-100"}),s.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce delay-200"})]})}),s.jsx("div",{ref:se})]}),s.jsx("div",{className:"p-4 border-t border-gray-800 bg-gray-900",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:te,onChange:M=>ce(M.target.value),onKeyDown:Oe,placeholder:"Describe your playstyle...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500",disabled:T}),s.jsx("button",{onClick:xe,disabled:T||!te.trim(),className:"bg-purple-600 hover:bg-purple-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 rounded-xl font-bold transition-colors",children:"Send"})]})})]}),s.jsxs("div",{className:"w-1/3 bg-gray-950 p-6 overflow-y-auto border-l border-gray-800 hidden md:block",children:[s.jsxs("h3",{className:"text-white font-bold mb-6 flex items-center",children:[s.jsx("svg",{className:"w-5 h-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Live Profile Summary"]}),F?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-4 border border-gray-800",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Analysis"}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:F.summary||"Gathering data..."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Dominant Traits"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:F.tags?.length>0?F.tags.map((M,K)=>s.jsx("span",{className:"px-2 py-1 rounded bg-purple-500/10 text-purple-400 border border-purple-500/20 text-xs font-medium",children:M},K)):s.jsx("span",{className:"text-gray-600 text-xs italic",children:"Pending..."})})]}),F.scores&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1",children:"Psychographics"}),Object.entries(F.scores).map(([M,K])=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1 capitalize",children:[s.jsx("span",{children:M.replace(/([A-Z])/g," $1").trim()}),s.jsxs("span",{children:[K,"%"]})]}),s.jsx("div",{className:"h-1.5 w-full bg-gray-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-indigo-500",style:{width:`${K}%`}})})]},M))]}),s.jsxs("div",{className:"pt-6 border-t border-gray-800",children:[s.jsx("button",{onClick:Ee,className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white rounded-lg font-bold shadow-lg hover:shadow-green-500/20 transition-all",children:"Finalize Profile"}),s.jsx("p",{className:"text-center text-xs text-gray-500 mt-2",children:"Click whenever you feel the profile is accurate."})]})]}):s.jsxs("div",{className:"text-center py-10 text-gray-600",children:[s.jsx("div",{className:"animate-pulse mb-2 text-4xl",children:""}),s.jsx("p",{className:"text-sm",children:"The Oracle is listening..."})]})]})]}),u==="synthesis"&&s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-6 bg-gray-900 p-8",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-t-2 border-b-2 border-green-500"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"h-10 w-10 bg-green-500/20 rounded-full animate-pulse"})})]}),s.jsx("h3",{className:"text-2xl font-bold text-white",children:"Finalizing your Grimoire..."}),s.jsx("p",{className:"text-gray-400",children:"Saving your magical identity to the archives."})]}),u==="error"&&s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-4 bg-gray-900 text-center p-8",children:[s.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-2xl font-bold text-white",children:"Something went wrong"}),s.jsx("p",{className:"text-red-300 max-w-md mx-auto",children:D}),s.jsx("button",{onClick:H,className:"mt-6 bg-gray-800 hover:bg-gray-700 text-white py-3 px-8 rounded-lg transition-colors border border-gray-600",children:"Try Again"})]})]})}):null},M5=({isOpen:a,onClose:n,profile:i,onRetake:o,userImage:u})=>{if(!a)return null;if(!i)return s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:s.jsxs("div",{className:"relative w-full max-w-md bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden flex flex-col p-8 text-center space-y-6",children:[s.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-10 p-2 bg-black/20 rounded-full hover:bg-black/40 transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mx-auto overflow-hidden",children:u?s.jsx("img",{src:u,alt:"User",className:"w-full h-full object-cover"}):s.jsx("svg",{className:"w-10 h-10 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No Playstyle Found"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"You haven't taken the assessment yet. Discover your magical identity and get better recommendations!"})]}),s.jsx("button",{onClick:o,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-indigo-500/25 transition-all transform hover:-translate-y-0.5",children:"Start Assessment"})]})});const{summary:f,tags:m,scores:p,archetypes:x}=i;return s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:s.jsxs("div",{className:"relative w-full max-w-6xl bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[s.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-10 p-2 bg-black/20 rounded-full hover:bg-black/40 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsxs("div",{className:"flex flex-col md:flex-row h-full",children:[s.jsxs("div",{className:"w-full md:w-80 flex-shrink-0 bg-gray-800/50 p-8 border-b md:border-b-0 md:border-r border-gray-700 flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg mb-6 ring-4 ring-gray-800 overflow-hidden",children:u?s.jsx("img",{src:u,alt:"User",className:"w-full h-full object-cover"}):s.jsx("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Your Playstyle"}),s.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:m&&m.map((b,_)=>s.jsx("span",{className:"px-3 py-1 bg-indigo-500/20 text-indigo-300 text-xs font-bold uppercase rounded-full border border-indigo-500/30",children:b},_))}),s.jsx("button",{onClick:o,className:"mt-auto w-full py-3 px-4 bg-gray-700 hover:bg-gray-600 text-gray-200 rounded-lg text-sm font-bold transition-all border border-gray-600 hover:border-gray-500",children:"Retake Assessment"})]}),s.jsxs("div",{className:"flex-1 p-8 overflow-y-auto",children:[s.jsxs("section",{className:"mb-8",children:[s.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Analysis Summary"}),s.jsxs("p",{className:"text-gray-300 leading-relaxed text-lg font-serif italic border-l-4 border-indigo-500 pl-4 bg-gray-800/30 py-4 pr-4 rounded-r",children:['"',f,'"']})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-4",children:"Psychographic Profile"}),s.jsx("div",{className:"space-y-4",children:p&&Object.entries(p).map(([b,_])=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-400 capitalize",children:b.replace(/([A-Z])/g," $1").trim()}),s.jsxs("span",{className:"text-white font-mono",children:[_,"/100"]})]}),s.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full ${O5(_)}`,style:{width:`${_}%`}})})]},b))})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-4",children:"Recommended Archetypes"}),s.jsx("div",{className:"grid grid-cols-1 gap-3",children:x&&x.map((b,_)=>s.jsxs("div",{className:"bg-gray-800/80 p-4 rounded-lg border border-gray-700 flex items-center gap-3",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 shadow-[0_0_8px_rgba(74,222,128,0.5)]"}),s.jsx("span",{className:"text-gray-200 font-medium",children:b})]},_))})]})]})]})]})]})})};function O5(a){return a>75?"bg-green-500":a>50?"bg-blue-500":a>25?"bg-yellow-500":"bg-red-500"}const L5=()=>{const a=mr(),{currentUser:n,userProfile:i,logout:o,updateSettings:u,refreshUserProfile:f,uploadProfilePicture:m}=St(),p=a.pathname==="/",[x,b]=w.useState(!1),[_,j]=w.useState(!1),[S,U]=w.useState(!1),[E,k]=w.useState(!1),[O,V]=w.useState(!1),F=As.useRef(null);As.useEffect(()=>{const se=T=>{E&&!T.target.closest("#user-menu-button")&&!T.target.closest("#user-menu-dropdown")&&k(!1)};return document.addEventListener("mousedown",se),()=>document.removeEventListener("mousedown",se)},[E]);const G=async se=>{console.log("Saving new playstyle:",se),await u({playstyle:se}),await f(),U(!0)},te=async se=>{const T=se.target.files[0];if(T)try{V(!0),await m(T)}catch(C){alert(C.message)}finally{V(!1),k(!1)}},ce=()=>{F.current?.click()};return s.jsxs(s.Fragment,{children:[s.jsx("nav",{className:"bg-gray-950/30 backdrop-blur-2xl border-b border-white/5 sticky top-0 z-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"flex items-center justify-between h-16",children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsx("div",{className:"flex-shrink-0 flex items-center gap-3",children:s.jsxs(mt,{to:"/",className:"flex items-center gap-2 transform hover:scale-105 transition-transform",children:[s.jsx("img",{src:"/logo.png",alt:"MTG Forge Logo",className:"h-10 w-auto"}),s.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent",children:"MTG-Forge"}),s.jsx("span",{className:"bg-orange-500/10 border border-orange-500/30 text-orange-400 text-[9px] font-bold px-1.5 py-0.5 rounded ml-1 animate-pulse",children:"ALPHA"})]})}),s.jsx("div",{className:"hidden md:ml-10 md:flex md:items-baseline md:space-x-4",children:p?s.jsxs(s.Fragment,{children:[s.jsx("a",{href:"#features",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Features"}),s.jsx(mt,{to:"/about",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"About"})]}):s.jsxs(s.Fragment,{children:[s.jsx(mt,{to:"/dashboard",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Dashboard"}),s.jsx(mt,{to:"/collection",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Collection"}),s.jsx(mt,{to:"/wishlist",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Wishlist"}),s.jsx(mt,{to:"/decks",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Decks"}),s.jsx(mt,{to:"/sets",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Sets"}),s.jsx(mt,{to:"/settings",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Settings"})]})}),s.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[n&&s.jsxs("button",{onClick:()=>b(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-1.5 rounded-lg text-sm font-bold transition-colors shadow-lg shadow-indigo-500/20 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{className:"inline",children:"Add Card"})]}),n?s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm text-gray-300",children:n.email}),s.jsx("button",{id:"user-menu-button",onClick:()=>k(!E),className:"text-gray-400 hover:text-white transition-colors focus:outline-none",children:n.photoURL?s.jsx("img",{src:n.photoURL,alt:"Profile",className:"h-8 w-8 rounded-full object-cover ring-2 ring-transparent hover:ring-indigo-500 transition-all border border-gray-600"}):s.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-500/20 border border-indigo-500/50 flex items-center justify-center ring-2 ring-transparent hover:ring-indigo-500 transition-all",children:s.jsx("span",{className:"text-xs font-bold text-indigo-300",children:n.email?n.email[0].toUpperCase():"U"})})})]}),E&&s.jsxs("div",{id:"user-menu-dropdown",className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg py-1 border border-gray-700 ring-1 ring-black ring-opacity-5 animate-fade-in-up",children:[s.jsxs("div",{className:"px-4 py-2 border-b border-gray-700",children:[s.jsx("p",{className:"text-sm text-white font-bold",children:"Account"}),s.jsx("p",{className:"text-xs text-gray-400 truncate",children:n.email})]}),s.jsx("button",{onClick:ce,disabled:O,className:"block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white",children:O?"Uploading...":"Upload Photo"}),s.jsx("input",{type:"file",ref:F,onChange:te,className:"hidden",accept:"image/*"}),s.jsx("div",{className:"border-t border-gray-700 my-1"}),s.jsx("button",{onClick:()=>{k(!1),U(!0)},className:"block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white",children:"Playstyle Profile"}),s.jsx(mt,{to:"/settings",onClick:()=>k(!1),className:"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white",children:"Settings"}),s.jsx("div",{className:"border-t border-gray-700 my-1"}),s.jsx("button",{onClick:()=>{k(!1),o()},className:"block w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-700 hover:text-red-300",children:"Sign Out"})]})]}):s.jsx(mt,{to:"/login",className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-bold transition-colors shadow-lg shadow-indigo-500/20",children:"Sign In"})]})]})})})}),s.jsx(db,{isOpen:x,onClose:()=>b(!1)}),s.jsx(hb,{isOpen:_,onClose:()=>j(!1),onComplete:G}),s.jsx(M5,{isOpen:S,onClose:()=>U(!1),profile:i?.settings?.playstyle,userImage:n?.photoURL,onRetake:()=>{U(!1),j(!0)}}),!p&&s.jsx("div",{className:"md:hidden fixed bottom-0 left-0 w-full bg-gray-900 border-t border-gray-800 z-50 pb-safe",children:s.jsxs("div",{className:"flex justify-around items-center h-16",children:[s.jsxs(mt,{to:"/dashboard",className:`flex flex-col items-center justify-center w-full h-full ${a.pathname==="/dashboard"?"text-indigo-400":"text-gray-400 hover:text-gray-200"}`,children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),s.jsx("span",{className:"text-[10px] mt-1 uppercase tracking-wide",children:"Home"})]}),s.jsxs(mt,{to:"/collection",className:`flex flex-col items-center justify-center w-full h-full ${a.pathname==="/collection"?"text-indigo-400":"text-gray-400 hover:text-gray-200"}`,children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),s.jsx("span",{className:"text-[10px] mt-1 uppercase tracking-wide",children:"Collection"})]}),s.jsxs(mt,{to:"/wishlist",className:`flex flex-col items-center justify-center w-full h-full ${a.pathname==="/wishlist"?"text-orange-400":"text-gray-400 hover:text-gray-200"}`,children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),s.jsx("span",{className:"text-[10px] mt-1 uppercase tracking-wide",children:"Wishlist"})]}),s.jsxs(mt,{to:"/decks",className:`flex flex-col items-center justify-center w-full h-full ${a.pathname.startsWith("/decks")?"text-indigo-400":"text-gray-400 hover:text-gray-200"}`,children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),s.jsx("span",{className:"text-[10px] mt-1 uppercase tracking-wide",children:"Decks"})]}),s.jsxs(mt,{to:"/sets",className:`flex flex-col items-center justify-center w-full h-full ${a.pathname.startsWith("/sets")?"text-indigo-400":"text-gray-400 hover:text-gray-200"}`,children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),s.jsx("span",{className:"text-[10px] mt-1 uppercase tracking-wide",children:"Sets"})]}),s.jsxs(mt,{to:"/settings",className:`flex flex-col items-center justify-center w-full h-full ${a.pathname==="/settings"?"text-indigo-400":"text-gray-400 hover:text-gray-200"}`,children:[s.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-[10px] mt-1 uppercase tracking-wide",children:"Settings"})]})]})})]})},D5=()=>s.jsx("section",{id:"features",className:"py-20 bg-gray-900 relative",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-20 animate-fade-in-up",children:[s.jsx("span",{className:"text-indigo-400 font-bold tracking-widest uppercase text-sm mb-2 block",children:"Why Choose The Forge?"}),s.jsx("h2",{className:"text-3xl md:text-5xl font-black text-white mb-6",children:"More Than Just A Deck Builder"}),s.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto text-lg",children:"Experience the next generation of Magic: The Gathering tools. Powered by AI, designed for Commander players."})]}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12 mb-24",children:[s.jsxs("div",{className:"flex-1 space-y-6 animate-fade-in-left",children:[s.jsx("div",{className:"w-16 h-16 bg-purple-500/20 rounded-2xl flex items-center justify-center mb-4 text-purple-400",children:s.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),s.jsx("h3",{className:"text-3xl font-bold text-white",children:"AI-Powered Strategy"}),s.jsx("p",{className:"text-gray-400 text-lg leading-relaxed",children:"Don't just build listsbuild strategies. Our Gemini-integrated AI analyzes your commander and suggests synergies, mana curves, and win conditions tailored to your playstyle."}),s.jsxs("ul",{className:"space-y-3 text-gray-300",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Automated Theme Suggestions"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Intelligent Land Base Generation"]})]})]}),s.jsx("div",{className:"flex-1 rounded-2xl overflow-hidden shadow-2xl border border-gray-800 group animate-fade-in-right",children:s.jsx("div",{className:"aspect-video bg-gray-800 relative flex items-center justify-center",children:s.jsx("img",{src:"/images/features/ai-strategy-modal.png",alt:"AI Strategy Modal showing detailed deck analysis",className:"w-full h-full object-cover rounded-2xl opacity-90 group-hover:opacity-100 transition-opacity"})})})]}),s.jsxs("div",{className:"flex flex-col md:flex-row-reverse items-center gap-12 mb-24",children:[s.jsxs("div",{className:"flex-1 space-y-6 animate-fade-in-right",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-2xl flex items-center justify-center mb-4 text-blue-400",children:s.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),s.jsx("h3",{className:"text-3xl font-bold text-white",children:"Advanced Collection Tracking"}),s.jsx("p",{className:"text-gray-400 text-lg leading-relaxed",children:'Track every card you own, from foils to promos. Filter by set, rarity, color identity, and price. Manage your "Wishlist" separate from your main binder.'}),s.jsxs("ul",{className:"space-y-3 text-gray-300",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Real-time TCGPlayer Pricing"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"CSV Export & Import"]})]})]}),s.jsx("div",{className:"flex-1 rounded-2xl overflow-hidden shadow-2xl border border-gray-800 animate-fade-in-left",children:s.jsx("div",{className:"aspect-video bg-gray-800 relative flex items-center justify-center",children:s.jsx("img",{src:"/images/features/collection-dashboard.jpg",alt:"Collection Dashboard showing card grid",className:"w-full h-full object-cover rounded-2xl opacity-90 hover:opacity-100 transition-opacity"})})})]}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12",children:[s.jsxs("div",{className:"flex-1 space-y-6 animate-fade-in-left",children:[s.jsx("div",{className:"w-16 h-16 bg-orange-500/20 rounded-2xl flex items-center justify-center mb-4 text-orange-400",children:s.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})}),s.jsx("h3",{className:"text-3xl font-bold text-white",children:"Commander-Centric Design"}),s.jsx("p",{className:"text-gray-400 text-lg leading-relaxed",children:"Built specially for EDH. Browse legends by guild, shard, or wedge. Filter by color identity rules. Manage partners and backgrounds seamlessly."})]}),s.jsx("div",{className:"flex-1 rounded-2xl overflow-hidden shadow-2xl border border-gray-800 animate-fade-in-right",children:s.jsx("div",{className:"aspect-video bg-gray-800 relative flex items-center justify-center",children:s.jsx("img",{src:"/images/features/commander-centric-design.png",alt:"My Decks view showing commanders",className:"w-full h-full object-cover rounded-2xl opacity-90 hover:opacity-100 transition-opacity"})})})]}),s.jsxs("div",{className:"flex flex-col md:flex-row-reverse items-center gap-12",children:[s.jsxs("div",{className:"flex-1 space-y-6 animate-fade-in-right",children:[s.jsx("div",{className:"w-16 h-16 bg-pink-500/20 rounded-2xl flex items-center justify-center mb-4 text-pink-400",children:s.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-3xl font-bold text-white",children:"Custom AI Personas"}),s.jsxs("p",{className:"text-gray-400 text-lg leading-relaxed",children:['Forge your own assistant. Define their personality, tone, and expertise. Whether you need a ruthless "Deity" to optimize your curve or a chaotic "Goblin" to suggest fun jank, your AI companion adapts to ',s.jsx("em",{children:"your"})," goals."]})]}),s.jsx("div",{className:"flex-1 rounded-2xl overflow-hidden shadow-2xl border border-gray-800 animate-fade-in-left",children:s.jsx("div",{className:"aspect-video bg-gray-800 relative flex items-center justify-center",children:s.jsx("img",{src:"/images/features/custom-ai-persona.png",alt:"Custom AI Persona creation interface",className:"w-full h-full object-cover rounded-2xl opacity-90 hover:opacity-100 transition-opacity"})})})]})]})}),I5=()=>s.jsxs("div",{className:"flex flex-col min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 via-red-600 to-orange-600 text-white text-center py-2 px-4 shadow-lg z-50 relative animate-pulse-slow",children:s.jsxs("p",{className:"font-bold text-sm tracking-wide flex items-center justify-center gap-2",children:[s.jsx("span",{className:"text-lg",children:""}),"ALPHA TEST - Feature Complete but Experimental",s.jsx("span",{className:"text-lg",children:""})]})}),s.jsxs("div",{className:"relative bg-gray-900 border-b border-gray-800",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 z-10"}),s.jsx("img",{src:"/MTG-Forge_Logo_Background_80.png",alt:"Background",className:"w-full h-full object-cover object-center absolute inset-0 z-0 opacity-80"})]}),s.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 md:py-32 flex flex-col items-center text-center",children:[s.jsxs("h1",{className:"text-4xl md:text-6xl font-extrabold tracking-tight text-white mb-6",children:[s.jsx("span",{className:"block",children:"Master Your Collection"}),s.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-500",children:"Build Powerful Decks"})]}),s.jsx("p",{className:"mt-4 max-w-2xl text-xl text-gray-300 mx-auto",children:"The ultimate tool for Magic: The Gathering players. Organize your cards, analyze your mana curves, and playtest your strategies in one modern interface."}),s.jsxs("div",{className:"mt-10 flex gap-4 justify-center",children:[s.jsx(mt,{to:"/dashboard",className:"px-8 py-3 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white font-bold text-lg transition-all shadow-lg shadow-indigo-500/30 transform hover:-translate-y-1",children:"Get Started"}),s.jsx("button",{className:"px-8 py-3 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-200 font-semibold text-lg border border-gray-700 transition-all",children:"Learn More"})]})]})]}),s.jsx(D5,{}),s.jsx("footer",{className:"bg-black py-12 border-t border-gray-900 mt-auto",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 text-center",children:s.jsx("p",{className:"text-gray-500",children:" 2025 MTG-Forge. Not affiliated with Wizards of the Coast."})})})]}),Qc=({title:a,value:n,change:i})=>s.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl border border-gray-700 shadow-xl",children:[s.jsx("h3",{className:"text-gray-400 text-sm font-medium uppercase tracking-wider",children:a}),s.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:n}),i&&s.jsx("span",{className:"text-green-400 text-xs font-medium flex items-center mt-2",children:i})]}),U5=({isOpen:a,onClose:n})=>{const[i,o]=w.useState("Loading bugs...");return w.useEffect(()=>{a&&Xe.getBugs().then(u=>o(u)).catch(u=>o("Failed to load bug list: "+u.message))},[a]),a?s.jsx("div",{className:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 bg-gray-900/75 transition-opacity","aria-hidden":"true",onClick:n}),s.jsxs("div",{className:"inline-block align-bottom bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full border border-gray-700 relative z-10",children:[s.jsx("div",{className:"bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:s.jsx("div",{className:"sm:flex sm:items-start",children:s.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl leading-6 font-medium text-white",id:"modal-title",children:"Known Bugs & Tasks"}),s.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"mt-2 bg-gray-900 rounded p-4 h-[60vh] overflow-y-auto font-mono text-sm text-gray-300 whitespace-pre-wrap",children:i})]})})}),s.jsxs("div",{className:"bg-gray-800 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse border-t border-gray-700",children:[s.jsx("a",{href:"https://discord.gg/mtgforge",target:"_blank",rel:"noreferrer",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm",children:"Report New Bug (Discord)"}),s.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-600 shadow-sm px-4 py-2 bg-gray-700 text-base font-medium text-gray-300 hover:bg-gray-600 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:n,children:"Close"})]})]})]})}):null};function Uf(){const[a,n]=w.useState([]),[i,o]=w.useState(!0),[u,f]=w.useState(null),{currentUser:m}=St(),p=async()=>{if(m){o(!0);try{const x=await Xe.get("/decks");n(x),f(null)}catch(x){console.error("Error fetching decks:",x),f(x)}finally{o(!1)}}};return w.useEffect(()=>{if(!m){n([]),o(!1);return}p()},[m]),{decks:a,loading:i,error:u,refresh:p}}const z5=()=>{const{currentUser:a,userProfile:n}=St(),{cards:i}=pr(),{decks:o,loading:u}=Uf(),[f,m]=w.useState(!1),p=w.useMemo(()=>{if(!i||!o)return{totalCards:0,uniqueDecks:0,value:0,topColor:"N/A"};const b=i.reduce((E,k)=>E+(k.count||1),0),_=i.reduce((E,k)=>{const O=parseFloat(k.prices?.usd||0);return E+O*(k.count||1)},0),j={W:0,U:0,B:0,R:0,G:0,C:0,M:0};i.forEach(E=>{const k=E.color_identity||[];k.length===0?j.C++:k.length>1?j.M++:j[k[0]]++});const S=Object.entries(j).reduce((E,k)=>E[1]>k[1]?E:k)[0],U={W:"White",U:"Blue",B:"Black",R:"Red",G:"Green",C:"Colorless",M:"Multicolor"};return{totalCards:b,uniqueDecks:o.length,value:_.toLocaleString("en-US",{style:"currency",currency:"USD"}),topColor:U[S]||"N/A"}},[i,o]),x=w.useMemo(()=>o?o.slice(0,3):[],[o]);return s.jsxs("div",{className:"p-6 space-y-8 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Dashboard"}),s.jsxs("span",{className:"text-gray-400 text-sm",children:["Welcome back, ",s.jsx("span",{className:"text-indigo-400 font-bold",children:a?a.email:"Guest"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(Qc,{title:"Total Cards",value:p.totalCards}),s.jsx(Qc,{title:"Unique Decks",value:p.uniqueDecks}),s.jsx(Qc,{title:"Collection Value",value:p.value}),s.jsx(Qc,{title:"Top Color",value:p.topColor})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n&&!n.settings?.onboarding_complete&&s.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 to-purple-900/50 rounded-2xl border border-indigo-500/50 p-6 flex items-center justify-between animate-fade-in-down shadow-lg shadow-indigo-500/10",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-indigo-500/20 rounded-full flex items-center justify-center text-indigo-400",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Setup Incomplete"}),s.jsx("p",{className:"text-gray-300",children:"Continue your onboarding to unlock the full power of the Forge."})]})]}),s.jsx(mt,{to:"/onboarding",className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl transition-all shadow-lg hover:shadow-indigo-500/25 whitespace-nowrap",children:"Resume Setup "})]}),s.jsxs("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-700",children:s.jsx("h2",{className:"text-xl font-bold text-white",children:"Recent Decks"})}),s.jsx("div",{className:"p-6",children:u?s.jsx("div",{className:"text-gray-400 text-center py-4",children:"Loading decks..."}):x.length>0?s.jsxs("div",{className:"space-y-4",children:[x.map(b=>s.jsxs(mt,{to:`/decks/${b.id}`,className:"block bg-gray-700/50 hover:bg-gray-700 p-4 rounded-xl transition-colors flex justify-between items-center group",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-600 flex items-center justify-center text-2xl",children:b.colors&&b.colors.length>0?s.jsx("span",{className:`w-3 h-3 rounded-full bg-mtg-${b.colors[0].toLowerCase()}`}):""}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white group-hover:text-indigo-400 transition-colors",children:b.name}),s.jsxs("p",{className:"text-xs text-gray-400",children:[b.format||"Commander","  ",b.cards?Object.keys(b.cards).length:0," cards"]})]})]}),s.jsx("svg",{className:"w-5 h-5 text-gray-500 group-hover:text-white transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},b.id)),s.jsx(mt,{to:"/decks",className:"block text-center text-sm text-indigo-400 hover:text-indigo-300 mt-4",children:"View All Decks"})]}):s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 italic",children:"No recent decks found. start building!"}),s.jsx(mt,{to:"/decks",className:"mt-4 inline-block px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:"Create New Deck"})]})})]})]}),s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-br from-red-900/50 to-orange-900/50 rounded-2xl border border-red-700/50 overflow-hidden shadow-lg",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-red-500/20 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h2",{className:"text-xl font-bold text-white",children:"System Status"})]}),s.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"Found a bug or have a feature request? Help us improve the Forge."}),s.jsxs("button",{onClick:()=>m(!0),className:"w-full py-3 px-4 bg-red-600 hover:bg-red-500 text-white font-bold rounded-xl transition-all shadow-lg shadow-red-500/20 flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Report Issue"]})]})}),s.jsxs("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 h-64 flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-700 flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Quick Notes"}),s.jsx("svg",{className:"w-5 h-5 text-gray-500 hover:text-white cursor-pointer",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),s.jsx("div",{className:"p-4 flex-grow",children:s.jsx("textarea",{className:"w-full h-full bg-transparent border-none text-gray-300 resize-none focus:ring-0 placeholder-gray-600 outline-none",placeholder:"Jot down deck ideas or card combos here..."})})]})]})]}),s.jsx(U5,{isOpen:f,onClose:()=>m(!1)})]})},B5=()=>{const[a,n]=w.useState(!0),[i,o]=w.useState(""),[u,f]=w.useState(""),[m,p]=w.useState(""),[x,b]=w.useState(""),{login:_,signup:j,loginWithGoogle:S}=St(),U=Is(),E=async O=>{O.preventDefault();try{if(b(""),a)await _(i,u),U("/dashboard");else{if(u!==m)return b("Passwords do not match");if(u.length<6)return b("Password must be at least 6 characters");await j(i,u),U("/onboarding")}}catch(V){b("Failed to "+(a?"log in":"sign up")+": "+V.message)}},k=async()=>{try{b(""),await S(),U("/dashboard")}catch(O){b("Failed to log in with Google: "+O.message)}};return s.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4 sm:px-6 lg:px-8 relative",children:[s.jsx("div",{className:"absolute inset-0 z-0",children:s.jsx("img",{src:"/MTG-Forge_Logo_Background_80.png",alt:"Background",className:"w-full h-full object-cover opacity-50"})}),s.jsxs("div",{className:"max-w-md w-full space-y-8 relative z-10 bg-black/60 p-10 rounded-2xl backdrop-blur-md border border-white/10 shadow-2xl",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:a?"Sign in to MTG-Forge":"Create an Account"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-400",children:a?"Access your collection and decks anywhere":"Start your journey with MTG-Forge"})]}),x&&s.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 p-3 rounded text-sm text-center",children:x}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:E,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),s.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-700 placeholder-gray-500 text-white bg-gray-800 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:i,onChange:O=>o(O.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:a?"current-password":"new-password",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-700 placeholder-gray-500 text-white bg-gray-800 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:u,onChange:O=>f(O.target.value)})]}),!a&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),s.jsx("input",{id:"confirm-password",name:"confirmConnectPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-700 placeholder-gray-500 text-white bg-gray-800 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Confirm Password",value:m,onChange:O=>p(O.target.value)})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:a?"Sign in with Email":"Sign Up with Email"})})]}),s.jsx("div",{className:"text-center",children:s.jsx("button",{type:"button",onClick:()=>{n(!a),b("")},className:"text-sm text-indigo-400 hover:text-indigo-300 transition-colors",children:a?"Don't have an account? Sign Up":"Already have an account? Sign In"})}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-600"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-transparent text-gray-400 uppercase font-bold bg-[#1a1c23]",children:"Or continue with"})})]}),s.jsxs("button",{onClick:k,className:"w-full flex items-center justify-center gap-3 bg-white text-gray-900 font-bold py-3 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),s.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),s.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),s.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),a?"Sign in with Google":"Sign up with Google"]})]})]})},Zh=({options:a=[],selected:n=[],onChange:i,placeholder:o="Select...",label:u})=>{const[f,m]=w.useState(!1),[p,x]=w.useState(""),b=w.useRef(null);w.useEffect(()=>{const S=U=>{b.current&&!b.current.contains(U.target)&&m(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const _=a.filter(S=>S.label.toLowerCase().includes(p.toLowerCase())),j=S=>{const U=n.includes(S)?n.filter(E=>E!==S):[...n,S];i(U)};return s.jsxs("div",{className:"relative",ref:b,children:[u&&s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:u}),s.jsxs("button",{type:"button",onClick:()=>m(!f),className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-2 px-3 text-left text-sm text-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent flex justify-between items-center",children:[s.jsx("span",{className:"truncate",children:n.length===0?o:`${n.length} selected`}),s.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f&&s.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-gray-800 border border-gray-700 rounded-lg shadow-xl max-h-60 flex flex-col",children:[s.jsx("div",{className:"p-2 border-b border-gray-700",children:s.jsx("input",{type:"text",placeholder:"Search...",className:"w-full bg-gray-900 border border-gray-600 rounded px-2 py-1 text-xs text-white focus:outline-none focus:ring-1 focus:ring-indigo-500",value:p,onChange:S=>x(S.target.value),autoFocus:!0})}),s.jsx("div",{className:"overflow-y-auto flex-1 p-1",children:_.length===0?s.jsx("div",{className:"text-gray-500 text-xs p-2 text-center",children:"No results"}):_.map(S=>s.jsxs("div",{onClick:()=>j(S.value),className:`
                                        flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer text-sm
                                        ${n.includes(S.value)?"bg-indigo-600 text-white":"text-gray-300 hover:bg-gray-700"}
                                    `,children:[s.jsx("div",{className:`w-3 h-3 rounded-sm border ${n.includes(S.value)?"bg-white border-white":"border-gray-500"}`,children:n.includes(S.value)&&s.jsx("svg",{className:"w-full h-full text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:"truncate",children:S.label})]},S.value))})]})]})},zf=()=>s.jsx("div",{className:"relative aspect-[2.5/3.5] bg-gray-800 rounded-lg overflow-hidden border border-gray-700 animate-pulse",children:s.jsx("div",{className:"absolute inset-0 bg-gray-700/50"})}),Bf=({card:a,availableFoils:n,onRemove:i,showQuantity:o=!0,onClick:u})=>{const[f,m]=w.useState(!1),{openCardModal:p}=If(),x=(E,k=0)=>{if(!E)return"https://placehold.co/250x350?text=No+Image";const O=E.data||E;return O.card_faces&&O.card_faces.length>1?O.card_faces[k]?.image_uris?.normal||"https://placehold.co/250x350?text=No+Image":O.image_uris?.normal||E.image_uri||"https://placehold.co/250x350?text=No+Image"},b=a.data?.card_faces?.length>1||a.card_faces?.length>1,_=x(a,0),j=b?x(a,1):null,S=a.countInDeck||a.quantity||a.count||1,U=E=>{E.stopPropagation(),u?u(a):p(a)};return s.jsx("div",{className:"relative group perspective-1000 h-full w-full aspect-[2.5/3.5] min-h-[200px] cursor-pointer",onClick:U,children:s.jsxs("div",{className:`relative w-full h-full transition-all duration-500 transform-style-3d ${f?"rotate-y-180":""}`,children:[s.jsxs("div",{className:"absolute inset-0 w-full h-full backface-hidden rounded-lg overflow-hidden shadow-md bg-gray-950/40 backdrop-blur-md border border-white/5 bg-cover bg-center",style:{backgroundImage:"url('/card-back.jpg')"},children:[s.jsx("img",{src:_,alt:a.name,className:"w-full h-full object-cover",loading:"lazy"}),o&&S>1&&s.jsxs("div",{className:"absolute top-1.5 right-1.5 bg-black/80 text-white text-xs font-bold px-2 py-0.5 rounded-full border border-gray-600 shadow-sm z-20",children:["x",S]}),a.finish==="foil"?s.jsx("div",{className:"absolute top-1.5 left-1.5 bg-yellow-500/80 text-yellow-100 text-[10px] font-bold px-1.5 py-0.5 rounded-full shadow-md z-20 backdrop-blur-sm border border-yellow-300/50",children:""}):a.is_wishlist?s.jsxs("div",{className:"absolute top-1.5 left-1.5 bg-orange-600/90 text-white text-[10px] font-black px-1.5 py-0.5 rounded-full shadow-md z-20 backdrop-blur-sm border border-orange-400/50 flex items-center gap-1",children:[s.jsx("svg",{className:"w-2.5 h-2.5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),"WISH"]}):n?.has(a.name)&&s.jsx("div",{className:"absolute top-1.5 left-1.5 bg-gray-700/90 text-yellow-400 text-[10px] font-bold px-1.5 py-0.5 rounded-full shadow-md z-20 backdrop-blur-sm border border-yellow-500/30 cursor-help",title:"Foil copy available in collection",children:""}),s.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-all duration-200 flex flex-col justify-center items-center gap-2 p-2 backdrop-blur-sm z-30",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-bold text-xs text-white line-clamp-2",children:a.name}),s.jsxs("p",{className:"text-green-400 text-xs font-mono mt-1",children:["$",(parseFloat(a.prices?.usd)||0).toFixed(2)]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"text-indigo-300 text-xs font-bold uppercase tracking-wider bg-indigo-900/50 px-2 py-1 rounded border border-indigo-500/30",children:"View Details"}),b&&s.jsx("button",{onClick:E=>{E.stopPropagation(),m(!f)},className:"text-indigo-300 hover:text-white bg-indigo-900/50 hover:bg-indigo-700 p-1 rounded-full border border-indigo-500/30 transition-colors",title:"Quick Flip",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),i&&s.jsx("button",{onClick:E=>{E.stopPropagation(),i(a.firestoreId||a.id,a.name)},className:"text-red-400 hover:text-white hover:bg-red-600 p-2 rounded-full transition-colors",title:"Remove card",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]}),b&&s.jsxs("div",{className:"absolute inset-0 w-full h-full backface-hidden rotate-y-180 rounded-lg overflow-hidden shadow-md bg-gray-950/40 backdrop-blur-md border border-white/5 bg-cover bg-center",style:{backgroundImage:"url('/card-back.jpg')"},children:[s.jsx("img",{src:j,alt:`${a.name} (Back)`,className:"w-full h-full object-cover",loading:"lazy"}),s.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-all duration-200 flex flex-col justify-center items-center gap-2 p-2 backdrop-blur-sm z-30",children:[s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"font-bold text-xs text-white line-clamp-2",children:a.name})}),s.jsx("div",{className:"text-indigo-300 text-xs font-bold uppercase tracking-wider bg-indigo-900/50 px-2 py-1 rounded border border-indigo-500/30",children:"Click to Flip"})]})]})]})})},P5=()=>{const{cards:a,loading:n,error:i}=pr({wishlist:!1}),{decks:o}=Uf(),[u,f]=w.useState(""),[m,p]=w.useState(!1),[x,b]=w.useState({colors:[],rarity:[],types:[],sets:[],decks:[]}),_=w.useMemo(()=>{const E=new Set;return a.forEach(k=>{k.set&&k.set_name&&E.add(JSON.stringify({value:k.set,label:k.set_name}))}),Array.from(E).map(k=>JSON.parse(k)).sort((k,O)=>k.label.localeCompare(O.label))},[a]),j=w.useMemo(()=>o.map(E=>({value:E.id,label:E.name})),[o]),S=w.useMemo(()=>a.filter(E=>{const k=E.name||"";if(u&&!k.toLowerCase().includes(u.toLowerCase()))return!1;if(x.colors.length>0){const O=E.color_identity||[],V=O.length>1,F=O.length===0;if(!x.colors.some(te=>te==="C"?F:te==="M"?V:O.includes(te)))return!1}if(x.rarity.length>0&&!x.rarity.includes(E.rarity))return!1;if(x.types.length>0){const O=(E.type_line||"").toLowerCase();if(!x.types.some(F=>O.includes(F.toLowerCase())))return!1}return!(x.sets.length>0&&!x.sets.includes(E.set)||x.decks.length>0&&!x.decks.includes(E.deckId))}),[a,u,x,o]),U=(E,k)=>{b(O=>{const V=O[E],F=V.includes(k)?V.filter(G=>G!==k):[...V,k];return{...O,[E]:F}})};return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Collection"}),s.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[s.jsxs("div",{className:"relative w-full md:w-80",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-700 rounded-md leading-5 bg-gray-800 text-gray-300 placeholder-gray-500 focus:outline-none focus:bg-gray-700 focus:border-indigo-500 transition duration-150 ease-in-out sm:text-sm",placeholder:"Search cards...",value:u,onChange:E=>f(E.target.value)})]}),s.jsxs("button",{onClick:()=>p(!m),className:`px-3 py-2 rounded-md border transition-colors flex items-center gap-2 ${m?"bg-indigo-600 border-indigo-500 text-white":"bg-gray-800 border-gray-700 text-gray-400 hover:text-white"}`,children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters"]})]})]}),m&&s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8 border border-gray-700 gap-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 animate-fade-in-down",children:[s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-2",children:"Colors"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["W","U","B","R","G","C","M"].map(E=>s.jsx("button",{onClick:()=>U("colors",E),className:`
                                        w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm border shadow-sm transition-transform hover:scale-105
                                        ${x.colors.includes(E)?"ring-2 ring-indigo-500 ring-offset-2 ring-offset-gray-800":"opacity-70 hover:opacity-100"}
                                        ${E==="W"?"bg-[#F9FAFB] text-gray-900 border-gray-300":""}
                                        ${E==="U"?"bg-[#3B82F6] text-white border-blue-600":""}
                                        ${E==="B"?"bg-[#1F2937] text-white border-gray-900":""}
                                        ${E==="R"?"bg-[#EF4444] text-white border-red-600":""}
                                        ${E==="G"?"bg-[#10B981] text-white border-green-600":""}
                                        ${E==="C"?"bg-gray-400 text-gray-900 border-gray-500":""}
                                        ${E==="M"?"bg-gradient-to-br from-yellow-400 via-red-500 to-purple-600 text-white border-purple-500":""}
                                    `,title:E==="C"?"Colorless":E==="M"?"Multicolor":E,children:E},E))})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-2",children:"Rarity"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["common","uncommon","rare","mythic"].map(E=>s.jsx("button",{onClick:()=>U("rarity",E),className:`
                                        px-3 py-1 rounded text-xs font-bold uppercase border transition-colors
                                        ${x.rarity.includes(E)?"bg-indigo-600 border-indigo-500 text-white":"bg-gray-900 border-gray-700 text-gray-400 hover:border-gray-500"}
                                    `,children:E},E))})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-2",children:"Types"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["Creature","Instant","Sorcery","Enchantment","Artifact","Planeswalker","Land"].map(E=>s.jsx("button",{onClick:()=>U("types",E),className:`
                                         px-2 py-1 rounded text-xs border transition-colors
                                         ${x.types.includes(E)?"bg-indigo-600 border-indigo-500 text-white":"bg-gray-900 border-gray-700 text-gray-400 hover:border-gray-500"}
                                     `,children:E},E))})]}),s.jsxs("div",{className:"col-span-1 space-y-4",children:[s.jsx(Zh,{label:"Filter by Set",options:_,selected:x.sets,onChange:E=>b(k=>({...k,sets:E})),placeholder:"All Sets"}),s.jsx(Zh,{label:"Filter by Deck",options:j,selected:x.decks,onChange:E=>b(k=>({...k,decks:E})),placeholder:"All Decks"})]})]}),n?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:Array.from({length:12}).map((E,k)=>s.jsx(zf,{},k))}):i?s.jsxs("div",{className:"bg-red-900/50 border border-red-500 text-red-200 p-4 rounded-lg",children:["Error loading collection: ",i.message]}):s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[S.map(E=>s.jsx("div",{className:"h-full",children:s.jsx(Bf,{card:E})},E.firestoreId||E.id)),S.length===0&&s.jsxs("div",{className:"col-span-full text-center text-gray-500 py-12",children:['No cards found matching "',u,'"']})]})]})},rr={async addCardToDeck(a,n,i){return Xe.post("/collection",{scryfall_id:i.id,name:i.name,set_code:i.set||i.set_code,collector_number:i.collector_number,finish:i.finish||"nonfoil",data:i,deck_id:n,count:1})},async removeCardFromDeck(a,n,i){return Xe.put(`/collection/${i}`,{deck_id:null})},async updateCardQuantity(a,n,i,o){return o<=0?this.removeCardFromDeck(a,n,i):Xe.put(`/collection/${i}`,{count:o})},async setCommander(a,n,i){return Xe.put(`/decks/${n}`,{commander:i})},async importDeck(a,n,i,o){return Xe.post("/decks/import",{deck:n,cards:i,options:o})},async updateDeck(a,n,i){return Xe.put(`/decks/${n}`,i)},async deleteDeck(a,n){return Xe.delete(`/decks/${n}`)}},H5=[{badge:"White",colors:["W"]},{badge:"Blue",colors:["U"]},{badge:"Black",colors:["B"]},{badge:"Red",colors:["R"]},{badge:"Green",colors:["G"]},{badge:"Azorius",colors:["W","U"]},{badge:"Dimir",colors:["U","B"]},{badge:"Rakdos",colors:["B","R"]},{badge:"Gruul",colors:["R","G"]},{badge:"Selesnya",colors:["G","W"]},{badge:"Orzhov",colors:["W","B"]},{badge:"Izzet",colors:["U","R"]},{badge:"Golgari",colors:["B","G"]},{badge:"Boros",colors:["R","W"]},{badge:"Simic",colors:["G","U"]},{badge:"Esper",colors:["W","U","B"]},{badge:"Grixis",colors:["U","B","R"]},{badge:"Jund",colors:["B","R","G"]},{badge:"Naya",colors:["R","G","W"]},{badge:"Bant",colors:["G","W","U"]},{badge:"Abzan",colors:["W","B","G"]},{badge:"Jeskai",colors:["U","R","W"]},{badge:"Sultai",colors:["B","G","U"]},{badge:"Mardu",colors:["R","W","B"]},{badge:"Temur",colors:["G","U","R"]},{badge:"Glint-Eye",colors:["U","B","R","G"]},{badge:"Dune-Brood",colors:["W","B","R","G"]},{badge:"Ink-Treader",colors:["W","U","R","G"]},{badge:"Witch-Maw",colors:["W","U","B","G"]},{badge:"Yore-Tiller",colors:["W","U","B","R"]},{badge:"WUBRG",colors:["W","U","B","R","G"]},{badge:"Colorless",colors:["C"]}],V5=()=>{const{decks:a,loading:n,error:i}=Uf();Is();const{addToast:o}=is(),u=p=>{if(!p)return null;const x=p.data||p;return x.image_uris?.art_crop?x.image_uris.art_crop:x.card_faces?.[0]?.image_uris?.art_crop?x.card_faces[0].image_uris.art_crop:x.image_uris?.normal?x.image_uris.normal:null},f=p=>{const x=p?.commander?.color_identity||[],b=p?.commander_partner?.color_identity||[],_=[...new Set([...x,...b])];return _.length>0?_:["C"]},m=p=>{const x=H5.find(b=>b.badge==="Colorless"&&(p.length===0||p.length===1&&p[0]==="C")?!0:b.colors.length!==p.length?!1:b.colors.every(_=>p.includes(_)));return x?x.badge:"Commander"};return n?s.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-950",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"})}):i?s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:s.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 text-red-200 p-6 rounded-2xl backdrop-blur-md",children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Error Loading Decks"}),s.jsx("p",{children:i.message})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-[500px] bg-indigo-900/10 blur-[120px] rounded-full pointer-events-none"}),s.jsxs("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-10 relative z-10",children:[s.jsxs("div",{className:"flex justify-between items-end mb-10 border-b border-white/5 pb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-black text-white tracking-tight mb-2",children:"My Decks"}),s.jsx("p",{className:"text-gray-400 font-medium",children:"Manage your collection of strategies"})]}),s.jsxs(mt,{to:"/decks/new",className:"group bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-3 rounded-xl font-black uppercase tracking-widest text-xs transition-all shadow-lg shadow-indigo-500/20 flex items-center gap-2 border border-indigo-400/20 hover:border-indigo-400",children:[s.jsx("span",{className:"text-xl leading-none font-light",children:"+"}),"Create New Deck"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-8",children:[a.map(p=>{const x=f(p),b=m(x),_=Object.keys(p.cards||{}).length,j=u(p.commander),S=u(p.commander_partner);return s.jsx(mt,{to:`/decks/${p.id}`,className:"group relative flex flex-col h-[420px] rounded-3xl transition-all duration-300 hover:-translate-y-2",children:s.jsxs("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-md rounded-3xl border border-white/5 shadow-2xl group-hover:border-indigo-500/50 group-hover:shadow-indigo-500/20 transition-all overflow-hidden",children:[s.jsxs("div",{className:"h-[60%] w-full relative overflow-hidden bg-gray-950",children:[p.commander_partner?s.jsxs("div",{className:"w-full h-full flex",children:[s.jsxs("div",{className:"w-1/2 h-full relative border-r border-black/50",children:[s.jsx("img",{src:j||"https://placehold.co/400x600?text=?",alt:p.commander?.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity duration-500"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-80"})]}),s.jsxs("div",{className:"w-1/2 h-full relative",children:[s.jsx("img",{src:S||"https://placehold.co/400x600?text=?",alt:p.commander_partner?.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity duration-500"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-80"})]})]}):j?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:j,alt:p.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-90"})]}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-900",children:s.jsx("svg",{className:"w-16 h-16 text-gray-800",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.is_mockup&&s.jsx("div",{className:"absolute top-3 left-3 px-2 py-1 bg-orange-500/20 text-orange-400 border border-orange-500/30 backdrop-blur-md rounded text-[10px] font-black uppercase tracking-widest shadow-lg",children:"Mockup"})]}),s.jsxs("div",{className:"h-[40%] p-5 flex flex-col justify-between relative",children:[s.jsx("div",{className:"absolute -top-3 left-5 flex gap-1 bg-gray-900/80 backdrop-blur-md rounded-full px-2 py-1 border border-white/10 shadow-xl",children:x.map(U=>{const E=`https://svgs.scryfall.io/card-symbols/${U}.svg`;return s.jsx("img",{src:E,alt:U,className:"w-4 h-4 shadow-sm"},U)})}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-indigo-400 mb-1 opacity-80",children:b}),s.jsx("h3",{className:"text-xl font-bold text-white leading-tight line-clamp-2 mb-1 group-hover:text-indigo-300 transition-colors",children:p.name||"Untitled Deck"}),s.jsx("p",{className:"text-xs text-gray-500 font-medium line-clamp-1",children:p.commander_partner?`${p.commander?.name} & ${p.commander_partner?.name}`:p.commander?.name||"No Commander"})]}),s.jsxs("div",{className:"flex justify-between items-center border-t border-white/5 pt-4 mt-2",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-wider",children:"Format"}),s.jsx("span",{className:"text-xs text-gray-300 font-medium",children:p.format||"Commander"})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-wider",children:"Cards"}),s.jsxs("span",{className:`text-sm font-mono font-bold ${_>=100?"text-green-500":"text-indigo-400"}`,children:[_,s.jsx("span",{className:"text-gray-600 text-[10px]",children:"/100"})]})]})]})]})]})},p.id)}),a.length===0&&s.jsxs("div",{className:"col-span-full py-32 flex flex-col items-center justify-center text-center bg-gray-900/20 rounded-3xl border border-dashed border-gray-800",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-800/50 rounded-full flex items-center justify-center mb-6",children:s.jsx("svg",{className:"w-8 h-8 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 4v16m8-8H4"})})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-300 mb-2",children:"Start Your Journey"}),s.jsx("p",{className:"text-gray-500 mb-8 max-w-md",children:"You haven't built any decks yet. Create your first commander deck to get started."}),s.jsx(mt,{to:"/decks/new",className:"px-8 py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl transition-all shadow-lg shadow-indigo-500/20",children:"Create Deck"})]})]})]})]})},G5=[{badge:"White",colors:["W"],flavor:"Order, protection, and the light of law."},{badge:"Blue",colors:["U"],flavor:"Knowledge, manipulation, and the perfection of mind."},{badge:"Black",colors:["B"],flavor:"Power, ambition, and death at any cost."},{badge:"Red",colors:["R"],flavor:"Freedom, emotion, and the fire of impulse."},{badge:"Green",colors:["G"],flavor:"Nature, instinct, and the strength of the wild."},{badge:"Colorless",colors:["C"],flavor:"The void between, pure and unyielding."},{badge:"Azorius",colors:["W","U"],flavor:"The law is the shield of the just."},{badge:"Dimir",colors:["U","B"],flavor:"Knowledge is power, and we know everything."},{badge:"Rakdos",colors:["B","R"],flavor:"Entertainment is a serious business."},{badge:"Gruul",colors:["R","G"],flavor:"Not Gruul? Then die!"},{badge:"Selesnya",colors:["G","W"],flavor:"Together, we are the world's soul."},{badge:"Orzhov",colors:["W","B"],flavor:"Wealth is power, and spirit is currency."},{badge:"Izzet",colors:["U","R"],flavor:"Genius and madness are two sides of the same coin."},{badge:"Golgari",colors:["B","G"],flavor:"Life and death are a continuous circle."},{badge:"Boros",colors:["R","W"],flavor:"Strike fast, strike hard, strike true."},{badge:"Simic",colors:["G","U"],flavor:"Nature, perfected by design."},{badge:"Esper",colors:["W","U","B"],flavor:"Perfection through etherium and discipline."},{badge:"Grixis",colors:["U","B","R"],flavor:"Life is short, death is forever."},{badge:"Jund",colors:["B","R","G"],flavor:"Only the strongest survive the feeding frenzy."},{badge:"Naya",colors:["R","G","W"],flavor:"Where giant beasts roam and the wild reigns."},{badge:"Bant",colors:["G","W","U"],flavor:"Honor, valor, and the righteousness of caste."},{badge:"Abzan",colors:["W","B","G"],flavor:"Family is the only fortress that matters."},{badge:"Jeskai",colors:["U","R","W"],flavor:"Cunning strategies and swift strikes."},{badge:"Sultai",colors:["B","G","U"],flavor:"Ruthlessness is a virtue in the opulent dark."},{badge:"Mardu",colors:["R","W","B"],flavor:"Speed of the horse, edge of the blade."},{badge:"Temur",colors:["G","U","R"],flavor:"Savagery concealed by ice and snow."},{badge:"Glint-Eye",colors:["U","B","R","G"],flavor:"Chaos without order."},{badge:"Dune-Brood",colors:["W","B","R","G"],flavor:"Growth through conflict."},{badge:"Ink-Treader",colors:["W","U","R","G"],flavor:"Motion without purpose."},{badge:"Witch-Maw",colors:["W","U","B","G"],flavor:"Life without death."},{badge:"Yore-Tiller",colors:["W","U","B","R"],flavor:"Artifice without nature."},{badge:"WUBRG",colors:["W","U","B","R","G"],flavor:"All five colors in perfect harmony."}],$5=a=>{const n=a||[],i=n.length;return G5.find(u=>u.badge==="Colorless"&&(i===0||i===1&&n[0]==="C")?!0:u.colors.length!==i?!1:u.colors.every(f=>n.includes(f)))||{badge:"Commander",colors:n,flavor:"A unique combination of powers."}},F5=({isOpen:a,onClose:n,onAdd:i})=>{const{addToast:o}=is(),[u,f]=w.useState(""),[m,p]=w.useState(!1),[x,b]=w.useState([]),[_,j]=w.useState(null),[S,U]=w.useState(!1),[E,k]=w.useState([]),[O,V]=w.useState("and"),[F,G]=w.useState(""),[te,ce]=w.useState(""),se=A=>{k(L=>L.includes(A)?L.filter(H=>H!==A):[...L,A])},T=async A=>{A.preventDefault();const L=E.length>0||F.trim()||te.trim();if(!(!u.trim()&&!L)){p(!0);try{let H=null;if(te.trim()){const De=te.trim().match(/^([<>]=?|=)?\s*(\d+)$/);De&&(H={operator:De[1]||"=",value:parseInt(De[2],10)})}const I={query:u,type:"legendary creature",text:F,colors:E.length>0?E:void 0,colorIdentity:!0,colorLogic:O,mv:H},Me=await Xe.post("/cards/search",I);b(Me.data||[])}catch(H){console.error(H),o("Search failed. The Oracle is unreachable.","error")}finally{p(!1)}}},C=async A=>{j({id:A.id,name:A.name});try{const L={scryfall_id:A.id,name:A.name,set_code:A.set,collector_number:A.collector_number,finish:"nonfoil",count:1,data:A,is_wishlist:!0};await Xe.post("/collection",L),o(`"${A.name}" added to Wishlist!`,"success"),i&&i(),n()}catch(L){console.error(L),o("Failed to add to wishlist.","error")}finally{j(null)}};if(!a)return null;const D={W:{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-200",symbol:"https://svgs.scryfall.io/card-symbols/W.svg"},U:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-200",symbol:"https://svgs.scryfall.io/card-symbols/U.svg"},B:{bg:"bg-gray-300",text:"text-gray-800",border:"border-gray-400",symbol:"https://svgs.scryfall.io/card-symbols/B.svg"},R:{bg:"bg-red-100",text:"text-red-700",border:"border-red-200",symbol:"https://svgs.scryfall.io/card-symbols/R.svg"},G:{bg:"bg-green-100",text:"text-green-700",border:"border-green-200",symbol:"https://svgs.scryfall.io/card-symbols/G.svg"}};return $i.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:[s.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-2xl w-full max-w-5xl max-h-[95vh] flex flex-col border border-white/10 overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-white/5 bg-gray-950/50 flex justify-between items-center shrink-0",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-3",children:[s.jsx("span",{className:"text-purple-400",children:"Summon Legend"}),s.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-purple-500/20 text-purple-300 uppercase tracking-wider border border-purple-500/30",children:"Wishlist"})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Search the multiverse for a commander you don't own yet."})]}),s.jsx("button",{onClick:n,className:"p-2 rounded-xl hover:bg-white/5 text-gray-400 hover:text-white transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"bg-gray-900 border-b border-white/5 flex flex-col shrink-0",children:s.jsxs("form",{onSubmit:T,className:"p-6",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("input",{type:"text",value:u,onChange:A=>f(A.target.value),placeholder:"Search by name...",className:"w-full bg-gray-950 border border-white/10 rounded-2xl py-4 pl-14 pr-4 text-lg text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all shadow-inner",autoFocus:!S}),s.jsx("svg",{className:"absolute left-5 top-5 w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),s.jsxs("button",{type:"button",onClick:()=>U(!S),className:`px-4 rounded-2xl border border-white/10 flex items-center gap-2 font-bold transition-all ${S?"bg-purple-600 text-white border-purple-500":"bg-gray-950 text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[s.jsx(ub,{className:"w-5 h-5"}),"Filters"]}),s.jsx("button",{type:"submit",disabled:m,className:"px-8 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-2xl transition-all disabled:opacity-50 shadow-lg shadow-purple-500/20",children:m?"Searching...":"Search"})]}),s.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${S?"max-h-96 opacity-100 mt-6":"max-h-0 opacity-0"}`,children:s.jsxs("div",{className:"bg-gray-950/50 rounded-2xl p-6 border border-white/5 grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Color Identity"}),s.jsx("div",{className:"flex gap-2",children:Object.entries(D).map(([A,L])=>s.jsx("button",{type:"button",onClick:()=>se(A),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all border-2 ${E.includes(A)?"border-white scale-110 shadow-lg":"border-transparent opacity-60 hover:opacity-100 hover:scale-105"}`,style:{backgroundColor:E.includes(A)?"transparent":""},children:s.jsx("img",{src:L.symbol,alt:A,className:`w-full h-full ${E.includes(A)?"drop-shadow-md":"grayscale"}`})},A))}),s.jsxs("div",{className:"flex items-center gap-4 text-sm mt-2",children:[s.jsx("span",{className:`cursor-pointer ${O==="or"?"text-purple-400 font-bold":"text-gray-600"}`,onClick:()=>V("or"),children:"Includes any (OR)"}),s.jsx("div",{className:"w-10 h-5 bg-gray-800 rounded-full relative cursor-pointer border border-white/10",onClick:()=>V(A=>A==="or"?"and":"or"),children:s.jsx("div",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-purple-500 transition-all ${O==="and"?"left-5.5":"left-0.5"}`})}),s.jsx("span",{className:`cursor-pointer ${O==="and"?"text-purple-400 font-bold":"text-gray-600"}`,onClick:()=>V("and"),children:"Exact match (AND)"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Oracle Text"}),s.jsx("input",{type:"text",value:F,onChange:A=>G(A.target.value),placeholder:"e.g. 'draw cards', 'counter'",className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-purple-500 text-sm"}),s.jsx("p",{className:"text-[10px] text-gray-600",children:"Searches abilities and rules text."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Mana Value (CMC)"}),s.jsx("input",{type:"text",value:te,onChange:A=>ce(A.target.value),placeholder:"e.g. '4' or '<= 3'",className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-purple-500 text-sm font-mono"})]})]})})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-950/30 custom-scrollbar",children:[!m&&x.length===0&&s.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-40",children:[s.jsx("svg",{className:"w-24 h-24 text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})}),s.jsx("p",{className:"text-xl font-bold text-gray-400",children:"No legends found."}),s.jsx("p",{className:"text-sm text-gray-500",children:"Try adjusting your filters."})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x.map(A=>{const L=A.image_uris?.art_crop||A.image_uris?.normal||A.data?.image_uris?.art_crop||A.data?.image_uris?.normal,H=_?.id===A.id;return s.jsxs("div",{className:"group relative bg-gray-900 rounded-2xl border border-white/5 overflow-hidden hover:border-purple-500/50 transition-all hover:shadow-2xl hover:shadow-purple-500/10 hover:-translate-y-1",children:[s.jsxs("div",{className:"h-60 w-full bg-black relative",children:[L?s.jsx("img",{src:L,alt:A.name,className:"w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-all duration-500"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-700 font-bold",children:"No Art"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent"})]}),s.jsxs("div",{className:"p-4 relative",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-purple-300 transition-colors line-clamp-1",children:A.name}),s.jsx("p",{className:"text-xs text-gray-500 mb-4 line-clamp-1",children:A.type_line}),s.jsx("button",{onClick:()=>C(A),disabled:H,className:"w-full py-2 bg-white/5 hover:bg-purple-600 text-gray-300 hover:text-white rounded-lg font-bold text-sm transition-all flex items-center justify-center gap-2 group-hover:bg-purple-600 group-hover:text-white",children:H?s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add to Wishlist"]})})]})]},A.id)})})]})]}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .custom-scrollbar::-webkit-scrollbar { width: 8px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.02); }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(168, 85, 247, 0.2); border-radius: 10px; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(168, 85, 247, 0.4); }
            `}})]}),document.body)},At={BASICS:1,COMMANDER:2,PARTNER:2.5,AI_STRATEGY:3,REVIEW:4},q5=()=>{const a=Is(),{userProfile:n}=St(),{addToast:i}=is(),[o,u]=w.useState(At.BASICS),[f,m]=w.useState(!1),[p,x]=w.useState("folder"),[b,_]=w.useState({}),[j,S]=w.useState(null),[U,E]=w.useState(""),[k,O]=w.useState("Commander"),[V,F]=w.useState([]),[G,te]=w.useState(null),[ce,se]=w.useState(null),[T,C]=w.useState(""),[D,A]=w.useState(""),[L,H]=w.useState(null),[I,Me]=w.useState("Consulting the Oracle..."),[De,B]=w.useState(!1),[ie,xe]=w.useState(!1);w.useEffect(()=>{window.scrollTo(0,0)},[o]);const Ee=ge=>{if(!ge)return null;const ye=ge.data||ge;return ye.image_uris?.art_crop?ye.image_uris.art_crop:ye.card_faces?.[0]?.image_uris?.art_crop?ye.card_faces[0].image_uris.art_crop:ye.image_uris?.normal?ye.image_uris.normal:null},Oe=ge=>{const Te=(ge.data||ge).color_identity||[];return Te.length>0?Te:["C"]},M=ge=>{ge.preventDefault(),k==="Commander"?K():pe()},K=async()=>{m(!0);try{const ge={type_line:"legendary creature",unused:!0};De||(ge.wishlist="false");const ye=await Xe.get("/collection",ge);F(ye),u(At.COMMANDER)}catch(ge){console.error(ge),i("Failed to load commanders","error")}finally{m(!1)}},X=ge=>{te(ge);const ye=ge.data||ge,Te=ye.keywords||[],we=ye.oracle_text||"",Ne=Te.includes("Partner")||we.includes("Partner");u(Ne?At.PARTNER:At.AI_STRATEGY)},re=ge=>{se(ge),u(At.AI_STRATEGY)},Z=async()=>{const ge=n?.settings?.geminiApiKey,ye=n?.settings?.helper?.name||"The Oracle";if(!ge){i("AI Key missing. Skipping strategy.","warning"),u(At.REVIEW);return}m(!0),Me(`${ye} is analyzing ${ce?"your commanders":"your commander"}...`);try{const Te=ce?`${G.name} & ${ce.name}`:G.name,we=await Hn.getDeckStrategy(ge,Te,n.playstyle,[],n?.settings?.helper);we.layout||(we.layout={functional:{Lands:36,"Mana Ramp":10,"Card Draw":10,Removal:10,"Board Wipes":3,Synergy:30},types:{Creatures:30,Instants:10,Sorceries:10,Artifacts:10,Enchantments:4,Planeswalkers:0,Lands:36}}),H(we),!U.trim()&&we.suggestedName&&E(we.suggestedName),u(At.REVIEW)}catch(Te){console.error(Te),i("AI Generation Failed. Proceeding manually.","error"),H({theme:"",strategy:"Manual strategy required.",layout:{functional:{Lands:36,Creatures:63},types:{Lands:36,Creatures:63}}}),u(At.REVIEW)}finally{m(!1)}},pe=async()=>{m(!0);try{const ge={name:U||(ce?`${G.name} & ${ce.name}`:G?.name)||"New Commander Deck",format:k,commander:G?.data||G||null,commanderPartner:ce?.data||ce||null,aiBlueprint:L?{theme:L.theme,strategy:L.strategy,suggestedCounts:L.layout?.functional||L.layout,typeCounts:L.layout?.types}:null,isMockup:De},ye=await Xe.post("/decks",ge);i("Deck created successfully!","success"),a(`/decks/${ye.id}`)}catch(ge){console.error(ge),i("Failed to create deck","error")}finally{m(!1)}};w.useEffect(()=>{o===At.AI_STRATEGY&&G&&!L&&Z()},[o]);const fe=({card:ge,onClick:ye,isSelected:Te})=>{const we=Ee(ge),Ne=Oe(ge),je=ge.data||ge;return s.jsx("div",{onClick:()=>ye(ge),className:`group relative h-[480px] rounded-3xl cursor-pointer transition-all duration-300 hover:-translate-y-2 ${Te?"ring-4 ring-indigo-500 scale-105":""}`,children:s.jsxs("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-md rounded-3xl border border-white/5 shadow-2xl group-hover:border-indigo-500/50 group-hover:shadow-indigo-500/20 transition-all overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"h-[55%] w-full relative overflow-hidden bg-gray-950",children:[we?s.jsx("img",{src:we,alt:ge.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-900",children:s.jsx("span",{className:"text-gray-700 font-bold",children:"No Art"})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-90"})]}),s.jsxs("div",{className:"h-[45%] p-5 flex flex-col relative",children:[s.jsxs("div",{className:"absolute -top-3 left-5 flex gap-2 z-10",children:[s.jsx("div",{className:"flex gap-1 bg-gray-900/90 backdrop-blur-md rounded-full px-2 py-1 border border-white/10 shadow-xl",children:Ne.map((ze,Vt)=>s.jsx("img",{src:`https://svgs.scryfall.io/card-symbols/${ze}.svg`,alt:ze,className:"w-4 h-4 shadow-sm"},Vt))}),ge.finish==="foil"&&s.jsx("div",{className:"flex items-center justify-center w-8 h-8 -mt-1 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full shadow-[0_0_15px_rgba(250,204,21,0.6)] animate-pulse",title:"Foil",children:s.jsx("svg",{className:"w-5 h-5 text-white drop-shadow-sm",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),s.jsxs("div",{className:"mt-4 flex-1 flex flex-col gap-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-white leading-tight line-clamp-2 mb-1 group-hover:text-indigo-300 transition-colors",children:ge.name}),s.jsx("p",{className:"text-xs text-gray-400 font-medium line-clamp-1 border-b border-white/5 pb-2 mb-2",children:je.type_line})]}),s.jsx("p",{className:"text-[10px] text-gray-300 leading-relaxed font-serif opacity-80 line-clamp-4",children:je.oracle_text})]}),s.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-white/5",children:[je.power&&je.toughness&&s.jsxs("div",{className:"bg-gray-800/80 px-2 py-1 rounded text-xs font-bold text-white border border-white/10 shadow-inner",children:[je.power," / ",je.toughness]}),s.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest text-indigo-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"Select"})]})]})]})})},Se=w.useMemo(()=>{if(!V.length)return{};const ge={};return V.filter(Te=>Te.name.toLowerCase().includes(T.toLowerCase())||(Te.data?.type_line||"").toLowerCase().includes(T.toLowerCase())).forEach(Te=>{const we=Oe(Te),Ne=$5(we);ge[Ne.badge]||(ge[Ne.badge]={identity:Ne,cards:[]}),ge[Ne.badge].cards.push(Te)}),ge},[V,T]),ke=()=>{const ge=T.trim().length>0,ye=Object.entries(Se).sort((we,Ne)=>{const je=we[1].identity.colors.length-Ne[1].identity.colors.length;return je!==0?je:Ne[1].cards.length-we[1].cards.length}),Te=(we,Ne,je)=>s.jsxs("div",{onClick:je,className:"w-full bg-gray-900/60 hover:bg-gray-800/60 backdrop-blur-md border border-white/5 rounded-2xl p-6 cursor-pointer transition-all flex items-center justify-between group mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex gap-1 bg-gray-950/50 rounded-full px-3 py-1.5 border border-white/5",children:we.identity.colors.map(ze=>s.jsx("img",{src:`https://svgs.scryfall.io/card-symbols/${ze}.svg`,alt:ze,className:"w-5 h-5 shadow-sm"},ze))}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-indigo-300 transition-colors",children:we.identity.badge}),s.jsxs("p",{className:"text-sm text-gray-400 italic line-clamp-1",children:['"',we.identity.flavor,'"']})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-sm font-mono text-gray-500",children:[we.cards.length," Legends"]}),s.jsx("svg",{className:`w-6 h-6 text-gray-400 transform transition-transform ${Ne?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]});return s.jsxs("div",{className:"animate-fade-in space-y-6 h-full flex flex-col",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end mb-4 gap-4 shrink-0",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:"Choose Commander"}),s.jsx("p",{className:"text-gray-400",children:"Select the legend who will lead your deck."})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>xe(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-xl font-bold text-sm shadow-lg shadow-purple-500/20 flex items-center gap-2 transition-all hover:-translate-y-0.5",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Search Database"]}),s.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-1 flex border border-white/10",children:[s.jsx("button",{onClick:()=>x("list"),className:`p-2 rounded-lg transition-all ${p==="list"?"bg-indigo-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,title:"List View",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),s.jsx("button",{onClick:()=>x("folder"),className:`p-2 rounded-lg transition-all ${p==="folder"?"bg-indigo-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,title:"Folder View",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Search legends...",value:T,onChange:we=>C(we.target.value),className:"bg-gray-800/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 outline-none w-64 backdrop-blur-md"}),s.jsx("svg",{className:"w-5 h-5 text-gray-400 absolute right-3 top-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:[p==="folder"&&!j&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ye.map(([we,Ne])=>s.jsxs("div",{onClick:()=>S(we),className:"bg-gray-800/40 hover:bg-gray-700/50 border border-white/5 rounded-2xl p-6 cursor-pointer transition-all hover:-translate-y-1 hover:shadow-xl group flex flex-col items-center text-center gap-3 backdrop-blur-sm",children:[s.jsx("div",{className:"flex gap-1 bg-gray-950/50 rounded-full px-3 py-2 border border-white/5",children:Ne.identity.colors.map(je=>s.jsx("img",{src:`https://svgs.scryfall.io/card-symbols/${je}.svg`,alt:je,className:"w-6 h-6"},je))}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-black text-white group-hover:text-indigo-300 transition-colors uppercase tracking-wide",children:Ne.identity.badge}),s.jsx("div",{className:"h-0.5 w-8 bg-indigo-500/50 mx-auto my-2"}),s.jsxs("p",{className:"text-sm text-gray-400 italic",children:['"',Ne.identity.flavor,'"']})]}),s.jsxs("span",{className:"text-sm font-mono font-bold text-gray-500 bg-black/20 px-3 py-1 rounded-full mt-2",children:[Ne.cards.length," Legends"]})]},we))}),p==="folder"&&j&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("button",{onClick:()=>S(null),className:"flex items-center gap-2 text-indigo-400 hover:text-white transition-colors font-bold uppercase text-xs tracking-widest mb-4",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Groups"]}),s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("h3",{className:"text-3xl font-black text-white",children:j}),s.jsx("div",{className:"flex gap-1",children:Se[j].identity.colors.map(we=>s.jsx("img",{src:`https://svgs.scryfall.io/card-symbols/${we}.svg`,alt:we,className:"w-6 h-6"},we))})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Se[j].cards.map(we=>s.jsx(fe,{card:we,onClick:X},we.id))})]}),p==="list"&&s.jsx("div",{className:"space-y-4",children:ye.map(([we,Ne])=>{const je=b[we]||ge;return s.jsxs("div",{children:[Te(Ne,je,()=>_(ze=>({...ze,[we]:!ze[we]}))),je&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8 pl-4 border-l-2 border-white/5 animate-fade-in",children:Ne.cards.map(ze=>s.jsx(fe,{card:ze,onClick:X},ze.id))})]},we)})})]})]})},Ve=()=>{const ge=V.filter(ye=>{const Te=ye.data||ye,we=Te.keywords||[],Ne=Te.oracle_text||"",je=we.includes("Partner")||Ne.includes("Partner");return ye.id===G?.id||!je?!1:ye.name.toLowerCase().includes(D.toLowerCase())});return s.jsxs("div",{className:"animate-fade-in space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-end mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:"Choose Partner"}),s.jsxs("p",{className:"text-gray-400",children:["Select a partner for ",G?.name,"."]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"relative",children:s.jsx("input",{type:"text",placeholder:"Search partners...",value:D,onChange:ye=>A(ye.target.value),className:"bg-gray-800/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 outline-none w-64 backdrop-blur-md"})}),s.jsx("button",{onClick:()=>{se(null),u(At.AI_STRATEGY)},className:"text-sm font-bold text-gray-400 hover:text-white underline self-center",children:"Skip / Solo Commander"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 max-h-[65vh] overflow-y-auto pr-2 custom-scrollbar",children:[ge.map(ye=>s.jsx(fe,{card:ye,onClick:re},ye.id)),ge.length===0&&s.jsx("div",{className:"col-span-full py-20 text-center text-gray-500",children:"No valid partners found matching your search."})]})]})},Le=()=>s.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] animate-fade-in text-center",children:[s.jsxs("div",{className:"relative mb-8",children:[s.jsx("div",{className:"w-24 h-24 bg-indigo-500/20 rounded-full animate-ping absolute inset-0"}),s.jsx("div",{className:"w-24 h-24 bg-indigo-600 rounded-full flex items-center justify-center relative shadow-[0_0_50px_rgba(79,70,229,0.5)]",children:s.jsx("svg",{className:"w-10 h-10 text-white animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})})]}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:I}),s.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:"Brewing a perfect strategy tailored to your playstyle."})]}),We=()=>{const ge=L?.layout?.functional||{},ye=L?.layout?.types||{};return s.jsxs("div",{className:"animate-fade-in space-y-8 max-h-[70vh] overflow-y-auto pr-2 custom-scrollbar",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("label",{className:"block text-sm font-bold text-gray-400 uppercase tracking-wider",children:"Deck Name"}),s.jsx("input",{type:"text",value:U,onChange:Te=>E(Te.target.value),className:"w-full text-4xl font-black bg-transparent border-b-2 border-white/10 focus:border-indigo-500 text-white placeholder-gray-600 outline-none pb-2 transition-colors",placeholder:"Name your deck..."})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-gray-800/40 border border-white/5 rounded-2xl p-6 backdrop-blur-md",children:[s.jsx("h3",{className:"text-xl font-bold text-indigo-300 mb-4",children:"Theme & Strategy"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Theme"}),s.jsx("p",{className:"text-lg text-white font-medium",children:L?.theme})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Gameplan"}),s.jsx("div",{className:"text-sm text-gray-300 leading-relaxed prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:L?.strategy}})]})]})]}),s.jsxs("div",{className:"bg-gray-800/40 border border-white/5 rounded-2xl p-6 backdrop-blur-md space-y-6",children:[s.jsx("h3",{className:"text-xl font-bold text-green-300 mb-4",children:"Composition Preview"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Functional Needs"}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(ge).map(([Te,we])=>s.jsxs("div",{className:"flex justify-between items-center bg-gray-900/50 px-3 py-2 rounded-lg border border-white/5",children:[s.jsx("span",{className:"text-sm text-gray-300",children:Te}),s.jsx("span",{className:"font-mono font-bold text-indigo-400",children:we})]},Te))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Type Balance"}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(ye).map(([Te,we])=>s.jsxs("div",{className:"flex justify-between items-center bg-gray-900/50 px-3 py-2 rounded-lg border border-white/5",children:[s.jsx("span",{className:"text-sm text-gray-300",children:Te}),s.jsx("span",{className:"font-mono font-bold text-emerald-400",children:we})]},Te))})]})]})]})]})},yt=G?Ee(G):null;return s.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden flex flex-col",children:[yt&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-cover bg-center transition-all duration-1000 transform scale-105",style:{backgroundImage:`url(${yt})`}}),s.jsx("div",{className:"fixed inset-0 bg-gray-950/60 backdrop-blur-2xl transition-all duration-1000"}),s.jsx("div",{className:"fixed inset-0 bg-gradient-to-t from-gray-950 via-gray-950/50 to-transparent"})]}),!yt&&s.jsx("div",{className:"absolute top-0 left-0 w-full h-[500px] bg-indigo-900/20 blur-[120px] rounded-full pointer-events-none"}),s.jsxs("div",{className:"relative z-10 flex-1 flex flex-col max-w-[1600px] mx-auto w-full px-6 py-8",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[s.jsx("button",{onClick:()=>a("/decks"),className:"text-gray-400 hover:text-white transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7 7-7m-7 7h18"})})}),s.jsx("div",{className:"h-8 w-[1px] bg-white/10 mx-2"}),s.jsx("div",{className:"flex gap-2",children:[At.BASICS,At.COMMANDER,At.AI_STRATEGY,At.REVIEW].map((ge,ye)=>s.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${o>=ge?"w-12 bg-indigo-500":"w-4 bg-gray-700"}`},ge))})]}),s.jsxs("div",{className:"flex-1 bg-gray-950/40 border border-white/5 rounded-3xl p-8 shadow-2xl backdrop-blur-xl animate-fade-in-up flex flex-col overflow-hidden",children:[f&&o!==At.AI_STRATEGY&&s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"})}),!f&&o===At.BASICS&&s.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-8 animate-fade-in",children:[s.jsxs("h1",{className:"text-5xl font-black text-white tracking-tight text-center",children:["Let's build something ",s.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400",children:"legendary."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-4xl px-4",children:[s.jsxs("div",{onClick:()=>{B(!1),M({preventDefault:()=>{}})},className:"group cursor-pointer bg-gray-800/40 hover:bg-indigo-900/20 border border-white/10 hover:border-indigo-500/50 rounded-3xl p-8 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/10 flex flex-col items-center text-center gap-4 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"w-20 h-20 bg-indigo-500/20 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-500 border border-white/5 group-hover:border-indigo-500/30",children:s.jsx("svg",{className:"w-10 h-10 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("h3",{className:"text-2xl font-black text-white mb-2 group-hover:text-indigo-300 transition-colors",children:"From Collection"}),s.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:"Build a deck using strictly cards you own. The Oracle will verify your collection and suggest only available cards."})]})]}),s.jsxs("div",{onClick:()=>{B(!0),M({preventDefault:()=>{}})},className:"group cursor-pointer bg-gray-800/40 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 rounded-3xl p-8 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl hover:shadow-purple-500/10 flex flex-col items-center text-center gap-4 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"w-20 h-20 bg-purple-500/20 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-500 border border-white/5 group-hover:border-purple-500/30",children:s.jsx("svg",{className:"w-10 h-10 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("h3",{className:"text-2xl font-black text-white mb-2 group-hover:text-purple-300 transition-colors",children:"Theorycraft Mockup"}),s.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:"Design your dream deck without limits. Missing cards will be added to your Wishlist automatically."})]})]})]})]}),!f&&o===At.COMMANDER&&ke(),!f&&o===At.PARTNER&&Ve(),o===At.AI_STRATEGY&&Le(),!f&&o===At.REVIEW&&We()]}),!f&&o===At.REVIEW&&s.jsx("div",{className:"mt-6 flex justify-end animate-fade-in-up",children:s.jsxs("button",{onClick:pe,disabled:f,className:"bg-indigo-600 hover:bg-indigo-500 text-white text-xl font-bold py-4 px-12 rounded-2xl shadow-lg shadow-indigo-500/20 transform hover:-translate-y-1 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-3",children:[f?"Forging Deck...":"Create Deck",!f&&s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]}),s.jsx(F5,{isOpen:ie,onClose:()=>xe(!1),onAdd:()=>K()})]})};function fb(a){const[n,i]=w.useState(null),[o,u]=w.useState([]),[f,m]=w.useState(!0),[p,x]=w.useState(null),{currentUser:b}=St(),_=async()=>{if(!(!b||!a||a==="new")){m(!0);try{const{deck:j,items:S}=await Xe.get(`/decks/${a}`);i(j),u(S.map(U=>({...U,countInDeck:U.count||1,managedId:U.id}))),x(null)}catch(j){console.error("Error fetching deck:",j),x(j)}finally{m(!1)}}};return w.useEffect(()=>{if(!b||!a){m(!1);return}_()},[b,a]),{deck:n,cards:o,loading:f,error:p,refresh:_}}const W5=({isOpen:a,onClose:n,onConfirm:i,title:o,message:u,confirmText:f="Confirm",cancelText:m="Cancel",isDanger:p=!1})=>a?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-fade-in",children:s.jsx("div",{className:"bg-gray-800 rounded-xl shadow-2xl border border-gray-700 w-full max-w-md transform transition-all scale-100 animate-scale-in",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-2",id:"modal-title",children:o}),s.jsx("p",{className:"text-gray-300 mb-6",children:u}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:n,className:"px-4 py-2 rounded-lg text-gray-300 hover:text-white hover:bg-gray-700 transition-colors font-medium",children:m}),s.jsx("button",{onClick:()=>{i(),n()},className:`px-4 py-2 rounded-lg text-white font-bold shadow-lg transition-transform transform hover:-translate-y-0.5 ${p?"bg-red-600 hover:bg-red-500 shadow-red-500/20":"bg-indigo-600 hover:bg-indigo-500 shadow-indigo-500/20"}`,children:f})]})]})})}):null,Y5=(a,n)=>{if(!a||a.length===0)return!0;const i=new Set(n||[]);return a.every(o=>i.has(o))},K5=({isOpen:a,onClose:n,deck:i,deckCards:o=[]})=>{const{cards:u,loading:f}=pr(),{currentUser:m}=St(),{addToast:p}=is(),[x,b]=w.useState(""),[_,j]=w.useState("All"),S=w.useMemo(()=>{if(!u||!i)return[];const k=i.commander?.color_identity||[],O=new Set(o.map(F=>F.name)),V=x.toLowerCase();return u.filter(F=>!(F.deckId||!Y5(F.color_identity,k)||!F.type_line?.toLowerCase().includes("basic land")&&O.has(F.name)||V&&!F.name.toLowerCase().includes(V)&&!F.type_line?.toLowerCase().includes(V)||_!=="All"&&!F.type_line?.toLowerCase().includes(_.toLowerCase())))},[u,i,o,x,_]),U=async k=>{try{await rr.addCardToDeck(m.uid,i.id,k),p(`Added ${k.name} to deck`,"success")}catch(O){console.error(O),p("Failed to add card","error")}};if(!a)return null;const E=["All","Creature","Instant","Sorcery","Enchantment","Artifact","Planeswalker","Land"];return $i.createPortal(s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:s.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl w-full max-w-5xl h-[90vh] flex flex-col border border-gray-700",children:[s.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center bg-gray-900/50 rounded-t-xl",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx("span",{className:"text-indigo-400",children:"Add from Collection"}),s.jsxs("span",{className:"text-sm font-normal text-gray-400",children:["(",S.length," available)"]})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Showing unassigned cards compatible with this deck."})]}),s.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors bg-gray-800 hover:bg-gray-700 p-2 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-4 bg-gray-800 border-b border-gray-700 space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Search by name, type, or text...",className:"w-full bg-gray-900 text-white border border-gray-700 rounded-lg py-3 px-4 pl-12 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent shadow-inner",value:x,onChange:k=>b(k.target.value),autoFocus:!0}),s.jsx("svg",{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(k=>s.jsx("button",{onClick:()=>j(k),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors border ${_===k?"bg-indigo-600 text-white border-indigo-500 shadow-md":"bg-gray-800 text-gray-400 border-gray-700 hover:border-gray-500 hover:text-gray-200"}`,children:k},k))})]}),s.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-900/30 p-2 custom-scrollbar",children:f?s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})}):S.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 space-y-2",children:[s.jsx("svg",{className:"w-12 h-12 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),s.jsx("p",{children:"No cards found matching your criteria."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:S.map(k=>{const O=k.image_uris?.art_crop||k.image_uris?.normal||"https://placehold.co/100x100?text=No+Img";return s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-800/80 rounded-lg border border-gray-700/50 hover:bg-gray-700 hover:border-indigo-500/50 transition-all group",children:[s.jsxs("div",{className:"relative w-16 h-12 rounded overflow-hidden shrink-0 shadow-sm",children:[s.jsx("img",{src:O,className:"w-full h-full object-cover",alt:k.name,loading:"lazy"}),k.finish==="foil"&&s.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 bg-yellow-400 rounded-bl-md shadow-sm",title:"Foil"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate",children:k.name}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[s.jsx("span",{className:"truncate max-w-[120px]",children:k.type_line}),s.jsx("span",{className:"bg-gray-700 px-1 rounded text-[10px]",children:k.set?.toUpperCase()})]})]}),s.jsx("button",{onClick:()=>U(k),className:"bg-indigo-600 hover:bg-indigo-500 text-white p-2 rounded-lg shadow-md transition-transform active:scale-95 shrink-0 flex items-center gap-1 text-xs font-bold",children:"Add"})]},k.firestoreId||k.id)})})})]})}),document.body)},Zc=[{key:"W",name:"White",color:"bg-yellow-100",text:"text-yellow-600",border:"border-yellow-200/50",bg:"bg-yellow-500/10",pip:""},{key:"U",name:"Blue",color:"bg-blue-400",text:"text-blue-400",border:"border-blue-500/30",bg:"bg-blue-500/10",pip:""},{key:"B",name:"Black",color:"bg-gray-600",text:"text-gray-400",border:"border-gray-500/30",bg:"bg-gray-500/10",pip:""},{key:"R",name:"Red",color:"bg-red-500",text:"text-red-400",border:"border-red-500/30",bg:"bg-red-500/10",pip:""},{key:"G",name:"Green",color:"bg-green-500",text:"text-green-400",border:"border-green-500/30",bg:"bg-green-500/10",pip:""},{key:"C",name:"Colorless",color:"bg-gray-400",text:"text-gray-500",border:"border-gray-600/30",bg:"bg-gray-600/10",pip:""}],X5=({cards:a=[]})=>{const n=w.useMemo(()=>{const o={pips:{W:0,U:0,B:0,R:0,G:0,C:0},production:{W:0,U:0,B:0,R:0,G:0,C:0},curve:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,"7+":0},colorCurve:{W:[0,0,0,0,0,0,0,0],U:[0,0,0,0,0,0,0,0],B:[0,0,0,0,0,0,0,0],R:[0,0,0,0,0,0,0,0],G:[0,0,0,0,0,0,0,0],C:[0,0,0,0,0,0,0,0]},totalPips:0,totalProduction:0,nonLandCount:0,avgCMC:0};let u=0;return a.forEach(f=>{const m=f.data||f,p=(m.type_line||"").toLowerCase(),x=p.includes("land"),b=m.mana_cost||"",_=(m.oracle_text||"").toLowerCase();if(!x){o.nonLandCount+=f.countInDeck||1;const U=m.cmc??0;u+=U*(f.countInDeck||1),(b.match(/\{([^}]+)\}/g)||[]).forEach(O=>{O.slice(1,-1).split("/").forEach(G=>{if(["W","U","B","R","G","C"].includes(G)){o.pips[G]+=f.countInDeck||1,o.totalPips+=f.countInDeck||1;const te=Math.min(Math.floor(U),7);o.colorCurve[G][te]+=f.countInDeck||1}})});const k=U>=7?"7+":Math.floor(U);o.curve[k]+=f.countInDeck||1}let j=m.produced_mana||[];(_.includes("any color")||_.includes("mana of any color"))&&(j=["W","U","B","R","G"]),j.length===0&&x&&(p.includes("plains")&&j.push("W"),p.includes("island")&&j.push("U"),p.includes("swamp")&&j.push("B"),p.includes("mountain")&&j.push("R"),p.includes("forest")&&j.push("G")),!x&&_.includes("add {")&&["w","u","b","r","g","c"].forEach(U=>{_.includes(`add {${U}}`)&&j.push(U.toUpperCase())}),[...new Set(j)].forEach(U=>{o.production[U]!==void 0&&(o.production[U]+=f.countInDeck||1,o.totalProduction+=f.countInDeck||1)})}),o.avgCMC=o.nonLandCount>0?(u/o.nonLandCount).toFixed(2):0,o},[a]),i=(o,u="bg-indigo-500",f="h-48")=>{const m=Object.entries(o),p=Math.max(...m.map(x=>x[1]),1);return s.jsx("div",{className:`flex items-end gap-1 ${f} w-full px-2`,children:m.map(([x,b])=>s.jsxs("div",{className:"flex-1 flex flex-col items-center group relative",children:[b>0&&s.jsx("div",{className:`w-full ${u} rounded-t transition-all duration-500 group-hover:brightness-125`,style:{height:`${b/p*100}%`},children:s.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 text-[10px] font-bold text-white opacity-0 group-hover:opacity-100 transition-opacity bg-gray-900 px-1 rounded",children:b})}),s.jsx("div",{className:"text-[10px] font-bold text-gray-500 mt-2",children:x})]},x))})};return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex justify-between text-[10px] font-black uppercase tracking-widest text-gray-500",children:[s.jsx("span",{children:"Cost (Pips)"}),s.jsxs("span",{children:[n.totalPips," Total"]})]}),s.jsx("div",{className:"h-4 w-full bg-gray-900/50 rounded-full overflow-hidden flex border border-gray-800",children:Zc.filter(o=>n.pips[o.key]>0).map(o=>s.jsx("div",{className:`${o.color} h-full transition-all duration-700`,style:{width:`${n.pips[o.key]/n.totalPips*100}%`},title:`${o.name}: ${n.pips[o.key]}`},o.key))})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex justify-between text-[10px] font-black uppercase tracking-widest text-gray-500",children:[s.jsx("span",{children:"Production"}),s.jsxs("span",{children:[n.totalProduction," Sources"]})]}),s.jsx("div",{className:"h-4 w-full bg-gray-900/50 rounded-full overflow-hidden flex border border-gray-800 shadow-inner",children:Zc.filter(o=>n.production[o.key]>0).map(o=>s.jsx("div",{className:`${o.color} h-full transition-all duration-700 opacity-80`,style:{width:`${n.production[o.key]/n.totalProduction*100}%`},title:`${o.name}: ${n.production[o.key]}`},o.key))})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:Zc.map(o=>{const u=n.pips[o.key],f=n.production[o.key],m=n.totalPips>0?Math.round(u/n.totalPips*100):0,p=n.totalProduction>0?Math.round(f/n.totalProduction*100):0,x=u>0||f>0;return s.jsxs("div",{className:`p-4 rounded-2xl border transition-all duration-300 ${x?`${o.bg} ${o.border}`:"bg-gray-800/10 border-gray-800/50 opacity-40"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("span",{className:"text-2xl",children:o.pip}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:`text-[10px] font-black uppercase tracking-tighter ${o.text}`,children:o.name})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-[9px] font-bold text-gray-500 uppercase",children:[s.jsx("span",{children:"Cost"}),s.jsxs("span",{className:"text-white",children:[m,"%"]})]}),s.jsx("div",{className:"h-1.5 bg-gray-950 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${o.color} transition-all duration-1000`,style:{width:`${m}%`}})}),s.jsxs("div",{className:"text-[10px] text-gray-600 font-mono",children:[u," pips"]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-[9px] font-bold text-gray-500 uppercase",children:[s.jsx("span",{children:"Prod"}),s.jsxs("span",{className:"text-white",children:[p,"%"]})]}),s.jsx("div",{className:"h-1.5 bg-gray-950 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${o.color} opacity-60 transition-all duration-1000`,style:{width:`${p}%`}})}),s.jsxs("div",{className:"text-[10px] text-gray-600 font-mono",children:[f," mana"]})]})]})]},o.key)})}),s.jsxs("div",{className:"bg-gray-950/40 p-6 rounded-2xl border border-gray-800/50",children:[s.jsx("div",{className:"flex justify-between items-end mb-8",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tighter",children:"Mana Curve"}),s.jsxs("p",{className:"text-xs text-gray-500 font-medium",children:["Average Mana Value (Non-lands): ",s.jsx("span",{className:"text-indigo-400",children:n.avgCMC})]})]})}),i(n.curve,"bg-indigo-500","h-40")]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Zc.filter(o=>n.pips[o.key]>0).map(o=>s.jsxs("div",{className:"bg-gray-900/30 p-4 rounded-xl border border-gray-800/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("span",{className:"text-lg",children:o.pip}),s.jsxs("span",{className:`text-[10px] font-black uppercase tracking-widest ${o.text}`,children:[o.name," Spells"]})]}),i(Object.fromEntries(n.colorCurve[o.key].map((u,f)=>[f===7?"7+":f,u])),o.color,"h-24")]},o.key))})]})},J5=({isOpen:a,onClose:n,cards:i,deckName:o})=>{const{userProfile:u}=St(),f=u?.settings?.helper?.name||"The Oracle";return a?Vx.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 sm:p-6 bg-black/60 backdrop-blur-md animate-fade-in overscroll-contain",children:[s.jsxs("div",{className:"bg-gray-900/60 backdrop-blur-3xl w-full max-w-6xl max-h-[90vh] mx-auto rounded-[2.5rem] border border-white/10 shadow-[0_0_50px_-12px_rgba(0,0,0,0.5)] flex flex-col overflow-hidden ring-1 ring-white/5 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-indigo-500/30 to-transparent"}),s.jsx("div",{className:"p-8 border-b border-white/5 flex justify-between items-center bg-white/5 shrink-0",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] font-black font-mono text-indigo-400 uppercase tracking-widest bg-indigo-500/10 px-2 py-0.5 rounded border border-indigo-500/20",children:"Analytics"}),s.jsx("span",{className:"text-[10px] font-black font-mono text-gray-400 uppercase tracking-widest bg-white/5 px-2 py-0.5 rounded border border-white/5",children:f})]}),s.jsx("h2",{className:"text-3xl font-black text-white italic tracking-tighter uppercase",children:"Deck Performance"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-8 custom-scrollbar",children:s.jsx(X5,{cards:i})}),s.jsx("div",{className:"p-6 border-t border-white/5 bg-white/5 flex justify-end shrink-0",children:s.jsx("button",{onClick:n,className:"px-8 py-3.5 bg-gray-900/50 hover:bg-gray-800 text-white font-black rounded-2xl transition-all border border-white/10 hover:border-white/20 active:scale-95 text-[11px] uppercase tracking-[0.2em] shadow-lg",children:"Close Analytics"})})]}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .custom-scrollbar::-webkit-scrollbar { width: 8px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.02); border-radius: 10px; }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(99, 102, 241, 0.2); border-radius: 10px; border: 2px solid transparent; background-clip: content-box; transition: background 0.3s; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(99, 102, 241, 0.4); border: 2px solid transparent; background-clip: content-box; }
            `}})]}),document.body):null},Q5=({isOpen:a,onClose:n,deck:i,cards:o=[]})=>{const{userProfile:u,currentUser:f}=St(),{addToast:m}=is(),p=u?.settings?.helper?.name||"The Oracle",[x,b]=As.useState(!1),[_,j]=As.useState(0),[S,U]=As.useState(!1);if(As.useEffect(()=>(a?(j(0),U(!1),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),!a||!i)return null;const E=i.aiBlueprint||{},k=E.strategy||'<p class="text-gray-400 italic">No strategy generated for this deck yet. Ask the Oracle to analyze it.</p>',O=E.theme||"Uncharted Strategy",V=[i.commander];i.commander_partner&&V.push(i.commander_partner);const F=V[_]||V[0],G=F?.card_faces?.length>1,te=()=>{if(!F)return"https://placehold.co/480x680?text=Commander";if(G){const C=F.card_faces[S?1:0];return C.image_uris?.art_crop||C.image_uris?.large||C.image_uris?.normal}return F.image_uris?.art_crop||F.image_uris?.large||F.image_uris?.normal||F.image_uri},ce=E.layout?.functional||E.suggestedCounts||{},se=E.layout?.types||E.typeCounts||{},T=async()=>{if(!u?.settings?.geminiApiKey){m("Gemini API Key missing in settings.","error");return}b(!0);try{const C=await Hn.getDeckStrategy(u.settings.geminiApiKey,i.commander?.name||"Unknown Commander",u.playstyle,o,i.commander_partner?.name);await rr.updateDeck(f.uid,i.id,{aiBlueprint:{...E,theme:C.theme,strategy:C.strategy,layout:C.layout}}),m("Strategy updated based on your current build!","success"),window.location.reload()}catch(C){console.error(C),m("Failed to rerun strategy analysis.","error")}finally{b(!1)}};return Vx.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 sm:p-6 bg-black/60 backdrop-blur-md animate-fade-in overscroll-contain",children:[s.jsxs("div",{className:"bg-gray-900/60 backdrop-blur-3xl w-full max-w-5xl max-h-[90vh] mx-auto rounded-[2.5rem] border border-white/10 shadow-[0_0_50px_-12px_rgba(0,0,0,0.5)] flex flex-col overflow-hidden ring-1 ring-white/5 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-indigo-500/30 to-transparent"}),s.jsx("div",{className:"absolute -top-[20%] -right-[10%] w-[500px] h-[500px] bg-indigo-500/10 rounded-full blur-[100px] pointer-events-none"}),s.jsx("div",{className:"absolute -bottom-[20%] -left-[10%] w-[500px] h-[500px] bg-purple-500/10 rounded-full blur-[100px] pointer-events-none"}),s.jsxs("div",{className:"px-10 py-8 border-b border-white/5 flex justify-between items-center bg-white/5 shrink-0 relative z-10",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:"w-14 h-14 bg-indigo-500/20 rounded-2xl flex items-center justify-center border border-indigo-500/30 shadow-inner backdrop-blur-sm",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-black text-white tracking-tighter uppercase leading-none mb-1",dangerouslySetInnerHTML:{__html:O}}),s.jsxs("p",{className:"text-[10px] font-black text-indigo-400/60 uppercase tracking-[0.3em]",children:[p," Strategic Blueprint"]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:T,disabled:x,className:`flex items-center gap-3 px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] transition-all border ${x?"bg-white/5 text-gray-500 border-white/5 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-500 text-white border-white/20 shadow-[0_0_20px_rgba(79,70,229,0.3)] hover:shadow-[0_0_30px_rgba(79,70,229,0.5)] active:scale-95"}`,children:[x?s.jsx("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"}):s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),x?"Consulting Oracle...":`Have ${p} Recreate Strategy`]}),s.jsx("div",{className:"w-px h-8 bg-white/10 mx-2"}),s.jsx("button",{onClick:n,className:"p-3 bg-white/5 hover:bg-white/10 rounded-2xl transition-all text-gray-400 hover:text-white border border-white/5 hover:border-white/10 group",children:s.jsx("svg",{className:"w-6 h-6 transform group-hover:rotate-90 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-10 py-10 custom-scrollbar space-y-12 relative z-10 overscroll-contain",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-12",children:[s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"sticky top-0 space-y-6",children:[s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-xl rounded-[2rem] group-hover:bg-indigo-500/30 transition-all duration-700"}),s.jsxs("div",{className:"relative aspect-[4/5] rounded-[2rem] overflow-hidden shadow-2xl border border-white/10 z-10 bg-black/40",children:[s.jsx("img",{src:te(),className:"w-full h-full object-cover transition-transform duration-700 active:scale-95",alt:F?.name}),G&&s.jsx("button",{onClick:()=>U(!S),className:"absolute top-4 right-4 p-3 bg-black/60 hover:bg-indigo-600 backdrop-blur-md rounded-full text-white border border-white/20 shadow-lg transition-all group/flip z-30",title:"Flip Card",children:s.jsx("svg",{className:`w-5 h-5 transition-transform duration-500 ${S?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),s.jsx("div",{className:"absolute bottom-0 inset-x-0 p-4 bg-gradient-to-t from-black/90 via-black/50 to-transparent",children:s.jsxs("div",{className:"text-white font-bold text-center text-sm leading-tight drop-shadow-md",children:[F.name,G&&s.jsx("span",{className:"block text-[9px] text-gray-400 font-normal mt-0.5 uppercase tracking-widest",children:S?"Back Face":"Front Face"})]})})]}),s.jsx("div",{className:"absolute -bottom-4 left-1/2 -translate-x-1/2 z-20",children:s.jsxs("div",{className:"bg-black/80 text-white px-5 py-2 rounded-full border border-white/10 shadow-xl backdrop-blur-md flex items-center gap-2 whitespace-nowrap",children:[s.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-400",children:"Cards"}),s.jsx("div",{className:"w-px h-3 bg-white/20"}),s.jsxs("span",{className:"text-sm font-black font-mono",children:[(o||[]).length,"/100"]})]})})]}),s.jsxs("div",{className:"text-center pt-4 space-y-4",children:[s.jsxs("div",{onClick:()=>{j(0),U(!1)},className:`cursor-pointer transition-all duration-300 p-2 rounded-xl border ${_===0?"bg-indigo-500/10 border-indigo-500/30":"border-transparent hover:bg-white/5"}`,children:[s.jsx("h4",{className:`text-[9px] font-black uppercase tracking-[0.3em] mb-1 ${_===0?"text-indigo-400":"text-gray-600"}`,children:"Lead Commander"}),s.jsx("div",{className:`font-bold text-sm leading-tight ${_===0?"text-white":"text-gray-400"}`,children:V[0]?.name})]}),V[1]&&s.jsxs("div",{onClick:()=>{j(1),U(!1)},className:`cursor-pointer transition-all duration-300 p-2 rounded-xl border ${_===1?"bg-purple-500/10 border-purple-500/30":"border-transparent hover:bg-white/5"}`,children:[s.jsx("h4",{className:`text-[9px] font-black uppercase tracking-[0.3em] mb-1 ${_===1?"text-purple-400":"text-gray-600"}`,children:"Partnered With"}),s.jsx("div",{className:`font-bold text-sm leading-tight ${_===1?"text-white":"text-gray-400"}`,children:V[1].name})]})]})]})}),s.jsxs("div",{className:"space-y-10",children:[s.jsxs("div",{className:"bg-white/5 rounded-[2rem] p-8 border border-white/5 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity",children:s.jsx("span",{className:"text-9xl",children:""})}),s.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] mb-6 flex items-center gap-3",children:[s.jsx("span",{className:"w-8 h-px bg-gray-700"}),"Tactical Overview"]}),s.jsx("div",{className:"text-gray-300 leading-relaxed strategy-content-refined font-medium text-lg/8",dangerouslySetInnerHTML:{__html:k}})]}),s.jsxs("div",{className:"space-y-8",children:[Object.keys(ce).length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-[10px] font-black text-indigo-400/60 uppercase tracking-[0.2em] flex items-center gap-3",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),"Target Functional Needs"]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:Object.entries(ce).map(([C,D])=>s.jsxs("div",{className:"bg-white/5 p-5 rounded-2xl border border-white/5 text-center group hover:bg-white/10 hover:border-white/10 hover:-translate-y-1 transition-all duration-300 shadow-sm hover:shadow-xl",children:[s.jsx("div",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-2 group-hover:text-indigo-400 transition-colors h-8 flex items-center justify-center",children:C}),s.jsx("div",{className:"text-3xl font-black text-white tracking-tighter group-hover:scale-110 transition-transform",children:D})]},C))})]}),Object.keys(se).length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-[10px] font-black text-purple-400/60 uppercase tracking-[0.2em] flex items-center gap-3",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500"}),"Target Type Distribution"]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:Object.entries(se).map(([C,D])=>s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/5 text-center group hover:bg-white/10 hover:border-white/10 hover:-translate-y-1 transition-all duration-300 shadow-sm hover:shadow-xl",children:[s.jsx("div",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-2 group-hover:text-purple-400 transition-colors h-8 flex items-center justify-center",children:C}),s.jsx("div",{className:"text-2xl font-black text-white tracking-tighter group-hover:scale-110 transition-transform",children:D})]},C))})]})]})]})]})}),s.jsx("div",{className:"px-10 py-6 border-t border-white/5 bg-white/5 flex justify-end shrink-0 relative z-10",children:s.jsx("button",{onClick:n,className:"px-8 py-3.5 bg-gray-900/50 hover:bg-gray-800 text-white font-black rounded-2xl transition-all border border-white/10 hover:border-white/20 active:scale-95 text-[11px] uppercase tracking-[0.2em] shadow-lg",children:"Close Blueprint"})})]}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .strategy-content-refined h4 {
                    font-size: 1.1rem;
                    font-weight: 800;
                    color: white;
                    margin-top: 1.5rem;
                    margin-bottom: 0.5rem;
                }
                .strategy-content-refined p {
                    margin-bottom: 1rem;
                }
                .strategy-content-refined strong {
                    color: #a5b4fc; /* Indigo 300 */
                }
                .strategy-content-refined ul {
                    list-style-type: disc;
                    padding-left: 1.5rem;
                    margin-bottom: 1rem;
                    color: #9ca3af;
                }
                .custom-scrollbar::-webkit-scrollbar { width: 8px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.02); border-radius: 10px; }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(99, 102, 241, 0.2); border-radius: 10px; border: 2px solid transparent; background-clip: content-box; transition: background 0.3s; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(99, 102, 241, 0.4); border: 2px solid transparent; background-clip: content-box; }
            `}})]}),document.body)},Bh=[{badge:"White",colors:["W"],theme:"Absolute Order",flavor_text:"A single spark of light can banish a world of shadows."},{badge:"Blue",colors:["U"],theme:"Infinite Inquiry",flavor_text:"The mind is the only battlefield where victory is absolute."},{badge:"Black",colors:["B"],theme:"Unrestricted Power",flavor_text:"Power at any cost, for greatness is written in blood."},{badge:"Red",colors:["R"],theme:"Chaotic Passion",flavor_text:"Do not fear the fire; fear the heart that commands it."},{badge:"Green",colors:["G"],theme:"Primal Growth",flavor_text:"The forest does not ask for permission to grow."},{badge:"Azorius",colors:["W","U"],theme:"Bureaucratic Control",flavor_text:"Justice is blind, but she has a very long reach."},{badge:"Dimir",colors:["U","B"],theme:"Subterfuge & Infiltration",flavor_text:"The finest secrets are those that kill the ones who keep them."},{badge:"Rakdos",colors:["B","R"],theme:"Carnival of Carnage",flavor_text:"Entertain us, or become the entertainment."},{badge:"Gruul",colors:["R","G"],theme:"Primal Destruction",flavor_text:"Not for city-dwellers. Not for the weak. Only for the weak."},{badge:"Selesnya",colors:["G","W"],theme:"Collective Harmony",flavor_text:"One voice is a whisper; the Conclave is a roar."},{badge:"Orzhov",colors:["W","B"],theme:"Indentured Eternity",flavor_text:"Even death is no excuse for a breach of contract."},{badge:"Izzet",colors:["U","R"],theme:"Volatile Genius",flavor_text:"If it doesnt explode, you aren't trying hard enough."},{badge:"Golgari",colors:["B","G"],theme:"Cycles of Rot",flavor_text:"Every grave is a garden if you wait long enough."},{badge:"Boros",colors:["R","W"],theme:"Tactical Aggression",flavor_text:"First to the fight, last to the fall."},{badge:"Simic",colors:["G","U"],theme:"Biological Evolution",flavor_text:"Nature is a rough draft; we are the final edit."},{badge:"Esper",colors:["W","U","B"],theme:"Obsidian Logic",flavor_text:"Perfection is not a goal; it is a requirement."},{badge:"Grixis",colors:["U","B","R"],theme:"Ruthless Tyranny",flavor_text:"A wasteland of power where only the cruelest thrive."},{badge:"Jund",colors:["B","R","G"],theme:"Apex Predation",flavor_text:"In this world, you are either the dragon or the meal."},{badge:"Naya",colors:["R","G","W"],theme:"Primal Majesty",flavor_text:"Where the mountains wake and the earth trembles."},{badge:"Bant",colors:["G","W","U"],theme:"Knightly Order",flavor_text:"The sigil of the sun protects those who stand together."},{badge:"Abzan",colors:["W","B","G"],theme:"Eternal Endurance",flavor_text:"We do not break; we simply outlast."},{badge:"Jeskai",colors:["U","R","W"],theme:"Disciplined Spark",flavor_text:"The wind carries the strike; the mind guides the bolt."},{badge:"Sultai",colors:["B","G","U"],theme:"Opulent Decay",flavor_text:"Power is measured in gold and the bones of the fallen."},{badge:"Mardu",colors:["R","W","B"],theme:"Relentless Conquest",flavor_text:"Victory is the only law worth following."},{badge:"Temur",colors:["G","U","R"],theme:"Elemental Instinct",flavor_text:"The wild does not think; it reacts with ice and fire."},{badge:"Glint-Eye",colors:["U","B","R","G"],theme:"Chaotic Adaptation",flavor_text:"Order is a cage; we have chosen to break the locks."},{badge:"Dune-Brood",colors:["W","B","R","G"],theme:"Sandless Conquest",flavor_text:"When the logic of the mind fails, the instinct of the swarm prevails."},{badge:"Ink-Treader",colors:["W","U","R","G"],theme:"Radiant Reflection",flavor_text:"To touch one is to touch the whole of the world."},{badge:"Witch-Maw",colors:["W","U","B","G"],theme:"Eldritch Growth",flavor_text:"There is a hunger beneath the earth that knows no fire."},{badge:"Yore-Tiller",colors:["W","U","B","R"],theme:"Relentless History",flavor_text:"The past is a weapon we sharpen for the future."},{badge:"WUBRG",colors:["W","U","B","R","G"],theme:"The Convergence",flavor_text:"The full spectrum of power, bound in a single hand."},{badge:"Colorless",colors:["C"],theme:"The Great Void",flavor_text:"Existence is a fleeting dream in the eyes of the silent."}],Z5=()=>{const{deckId:a}=sf(),n=Is(),{currentUser:i,userProfile:o,updateSettings:u}=St(),{addToast:f}=is(),m=o?.settings?.helper?.name||"The Oracle",[p,x]=w.useState(!1),[b,_]=w.useState(!1),[j,S]=w.useState(!1),[U,E]=w.useState(""),[k,O]=w.useState(0),[V,F]=w.useState({}),[G,te]=w.useState(!1),[ce,se]=w.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[T,C]=w.useState(!1),[D,A]=w.useState(!1),[L,H]=w.useState(!0),[I,Me]=w.useState(o?.settings?.deckViewMode||"grid"),De=de=>{Me(de),u({deckViewMode:de})},{deck:B,cards:ie,loading:xe,error:Ee}=fb(a),{cards:Oe}=pr(),M=w.useMemo(()=>{const de=B?.commander?.color_identity||[],ue=B?.commander_partner?.color_identity||[],me=[...new Set([...de,...ue])];return!B||me.length===0?Bh.find(le=>le.badge==="Colorless"):Bh.find(le=>le.colors.length!==me.length?!1:le.colors.every(Ue=>me.includes(Ue)))||Bh.find(le=>le.badge==="Colorless")},[B]),K=w.useMemo(()=>{if(!Oe)return new Set;const de=new Set;return Oe.forEach(ue=>{ue.finish==="foil"&&!ue.deckId&&de.add(ue.name)}),de},[Oe]),X=de=>ie?ie.reduce((ue,me)=>(me.data?.type_line||me.type_line||"").includes(de)?ue+(me.countInDeck||1):ue,0):0,re=w.useMemo(()=>ie?ie.reduce((de,ue)=>de+(ue.countInDeck||1),0):0,[ie]),Z=w.useMemo(()=>ie?ie.filter(de=>!de.is_wishlist).reduce((de,ue)=>de+(ue.countInDeck||1),0):0,[ie]),pe=w.useMemo(()=>ie?ie.reduce((de,ue)=>{const me=parseFloat(ue.prices?.[ue.finish==="foil"?"usd_foil":"usd"])||parseFloat(ue.data?.prices?.[ue.finish==="foil"?"usd_foil":"usd"])||0;return de+me*(ue.countInDeck||1)},0):0,[ie]),fe=w.useMemo(()=>{const de=B?.aiBlueprint||{},ue=de.layout?.types||de.suggestedCounts||{};return[{label:"Total",current:re,target:B?.format?.toLowerCase()==="standard"||B?.format?.toLowerCase()==="modern"?60:100},{label:"Creatures",current:X("Creature"),target:ue.Creatures||ue.Creature||30},{label:"Lands",current:X("Land"),target:ue.Lands||ue.Land||36},{label:"Instants",current:X("Instant"),target:ue.Instants||ue.Instant||10},{label:"Sorceries",current:X("Sorcery"),target:ue.Sorceries||ue.Sorcery||10},{label:"Enchantments",current:X("Enchantment"),target:ue.Enchantments||ue.Enchantment||5},{label:"Artifacts",current:X("Artifact"),target:ue.Artifacts||ue.Artifact||10},{label:"Planeswalkers",current:X("Planeswalker"),target:ue.Planeswalkers||ue.Planeswalker||0}].filter(Ce=>Ce.target>0)},[B,re,ie]),Se=w.useMemo(()=>{if(!ie)return{};const de={Commander:[],Creature:[],Planeswalker:[],Instant:[],Sorcery:[],Artifact:[],Enchantment:[],Land:[],Other:[]},ue=B?.commander?.id;return ie.forEach(me=>{const Ce=me,le=(Ce.data?.type_line||Ce.type_line||"").toLowerCase();if(ue&&(Ce.id===ue||Ce.oracle_id===B?.commander?.oracle_id)){de.Commander.push(Ce);return}le.includes("creature")?de.Creature.push(Ce):le.includes("planeswalker")?de.Planeswalker.push(Ce):le.includes("instant")?de.Instant.push(Ce):le.includes("sorcery")?de.Sorcery.push(Ce):le.includes("artifact")?de.Artifact.push(Ce):le.includes("enchantment")?de.Enchantment.push(Ce):le.includes("land")?de.Land.push(Ce):de.Other.push(Ce)}),Object.fromEntries(Object.entries(de).filter(([me,Ce])=>Ce.length>0))},[ie,B]),ke=()=>{if(!B||!ie)return;const de={deck:{name:B.name,commander:B.commander},cards:ie,exported_at:new Date},ue=JSON.stringify(de,null,2),me=new Blob([ue],{type:"application/json"}),Ce=URL.createObjectURL(me),le=document.createElement("a");le.href=Ce,le.download=`${B.name.replace(/[^a-z0-9]/yi,"_")}_backup.json`,document.body.appendChild(le),le.click(),document.body.removeChild(le)},Ve=async de=>{try{await rr.addCardToDeck(i.uid,a,de),f(`Added ${de.name} to deck`,"success")}catch(ue){console.error(ue),f("Failed to add card to deck","error")}},Le=async(de,ue)=>{se({isOpen:!0,title:"Remove Card",message:`Are you sure you want to remove ${ue} from this deck?`,onConfirm:async()=>{try{await rr.removeCardFromDeck(i.uid,a,de),f(`Removed ${ue} from deck`,"success")}catch(me){console.error(me),f("Failed to remove card","error")}}})},We=de=>{if(!de)return"https://placehold.co/250x350?text=No+Image";const ue=de.data||de;return V[ue.id]&&ue.card_faces&&ue.card_faces[1]&&ue.card_faces[1].image_uris?.normal?ue.card_faces[1].image_uris.normal:ue.image_uris?.normal?ue.image_uris.normal:ue.card_faces?.[0]?.image_uris?.normal?ue.card_faces[0].image_uris.normal:de.image_uri?de.image_uri:"https://placehold.co/250x350?text=No+Image"},yt=async(de,ue,me)=>{if(de.stopPropagation(),B.commander_partner&&k!==me){O(me);return}const Ce=ue.data||ue;if(!(!Ce.card_faces||Ce.card_faces.length<2)){if(!V[Ce.id]&&!Ce.card_faces[1].image_uris){te(!0);try{f("Fetching back face data...","info");const le=await fetch(`https://api.scryfall.com/cards/${Ce.id}`);if(!le.ok)throw new Error("Fetch failed");const Ue=await le.json(),nt=me===0?{commander:Ue}:{commanderPartner:Ue};await rr.updateDeck(i.uid,a,nt),me===0?B.commander=Ue:B.commander_partner=Ue,f("Commander data updated.","success")}catch(le){console.error("Flip fix failed",le),f("Could not load card back.","error")}finally{te(!1)}}F(le=>({...le,[Ce.id]:!le[Ce.id]}))}},ge=()=>{E(B.name),S(!0)},ye=async()=>{try{await rr.updateDeck(i.uid,a,{name:U}),f("Deck renamed successfully","success"),S(!1),window.location.reload()}catch(de){console.error(de),f("Failed to rename deck","error")}},Te=async()=>{try{await rr.updateDeck(i.uid,a,{is_mockup:!B.is_mockup}),f(`Deck set to ${B.is_mockup?"Collection":"Mockup"} mode`,"info"),window.location.reload()}catch(de){console.error(de),f("Failed to update deck mode","error")}},we=()=>{se({isOpen:!0,title:"Delete Deck",message:"Are you sure you want to delete this deck? Cards inside will be returned to your collection binder.",onConfirm:async()=>{try{await rr.deleteDeck(i.uid,a),f("Deck deleted successfully","success"),n("/decks")}catch(de){console.error(de),f("Failed to delete deck","error")}}})},Ne=de=>{if(!de)return"";const ue=de.data||de;return V[ue.id]&&ue.card_faces&&ue.card_faces[1]&&ue.card_faces[1].image_uris?.art_crop?ue.card_faces[1].image_uris.art_crop:ue.image_uris?.art_crop?ue.image_uris.art_crop:ue.card_faces?.[0]?.image_uris?.art_crop?ue.card_faces[0].image_uris.art_crop:ue.image_uris?.normal?ue.image_uris.normal:de.image_uri?de.image_uri:""};if(xe)return s.jsx("div",{className:"flex justify-center p-20",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-500"})});if(Ee)return s.jsxs("div",{className:"p-20 text-center text-red-500 text-xl font-bold",children:["Error loading deck: ",Ee.message]});if(!B)return null;const je=k===0?B.commander:B.commander_partner||B.commander,ze=Ne(je),Vt={W:"https://svgs.scryfall.io/card-symbols/W.svg",U:"https://svgs.scryfall.io/card-symbols/U.svg",B:"https://svgs.scryfall.io/card-symbols/B.svg",R:"https://svgs.scryfall.io/card-symbols/R.svg",G:"https://svgs.scryfall.io/card-symbols/G.svg"};return s.jsxs("div",{className:"relative min-h-screen",children:[s.jsx("div",{className:"fixed inset-0 z-0 transition-all duration-1000 ease-in-out",style:{backgroundImage:`url(${ze})`,backgroundSize:"cover",backgroundPosition:"center"},children:s.jsx("div",{className:"absolute inset-0 bg-gray-950/60 backdrop-blur-[2px]"})}),s.jsxs("div",{className:"max-w-[1600px] mx-auto p-4 md:p-6 space-y-6 animate-fade-in pb-24 relative z-10",children:[s.jsx("div",{className:"sticky top-16 z-40 px-4 md:px-8 py-3 bg-gray-950/40 backdrop-blur-3xl border-b border-white/5 shadow-2xl transition-all duration-300 rounded-b-3xl mx-2",children:s.jsxs("div",{className:"max-w-[1600px] mx-auto flex flex-col lg:flex-row justify-between items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-6 w-full lg:w-auto",children:[s.jsx("button",{onClick:()=>n("/decks"),className:"p-2.5 bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white rounded-xl border border-white/5 transition-all shrink-0 group",title:"Back to Decks",children:s.jsx("svg",{className:"w-5 h-5 transform group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[j?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:U,onChange:de=>E(de.target.value),className:"bg-black/50 text-2xl font-black text-white border-b-2 border-indigo-500 outline-none px-2 py-1 w-full max-w-md backdrop-blur-sm rounded",autoFocus:!0}),s.jsx("button",{onClick:ye,className:"p-2 bg-green-600 rounded-lg hover:bg-green-500 text-white shadow-lg",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}):s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsxs("div",{className:"flex items-center gap-3 group",children:[s.jsx("h2",{className:"text-4xl font-black text-white tracking-tighter uppercase truncate leading-none",children:B.name}),s.jsx("button",{onClick:ge,className:"opacity-0 group-hover:opacity-100 transition-opacity text-gray-500 hover:text-white",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),s.jsxs("div",{className:"flex items-center gap-3 pl-0.5",children:[s.jsxs("div",{className:"text-[11px] text-indigo-300 font-black uppercase tracking-[0.2em] opacity-80",children:[M.badge,"  ",M.theme]}),s.jsx("div",{className:"flex items-center gap-1",children:(()=>{const de=B?.commander?.color_identity||[],ue=B?.commander_partner?.color_identity||[];return[...new Set([...de,...ue])].map(Ce=>s.jsx("img",{src:Vt[Ce],alt:Ce,className:"w-4 h-4 shadow-sm"},Ce))})()})]})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-black/40 px-3 py-1.5 rounded-xl border border-white/5 backdrop-blur-md shadow-2xl",children:[s.jsx("span",{className:"bg-orange-600/20 text-orange-400 px-2.5 py-0.5 rounded-full text-[10px] font-black uppercase tracking-widest border border-orange-500/30",children:B.format||"Commander"}),B.is_mockup&&s.jsx("span",{className:"bg-red-600/20 text-red-400 px-2.5 py-0.5 rounded-full text-[10px] font-black uppercase tracking-widest border border-red-500/30",children:"Mockup"}),s.jsx("div",{className:"h-4 w-px bg-white/10 mx-1"}),s.jsxs("span",{className:"text-gray-400 text-xs font-bold font-mono",children:["$",pe.toFixed(2)]})]}),s.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 text-indigo-300 hover:text-white transition-all text-xs font-black uppercase tracking-widest bg-indigo-500/20 hover:bg-indigo-500/30 px-5 py-2 rounded-2xl border border-indigo-500/30 shadow-xl shadow-indigo-500/10 active:scale-95",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"View Strategy"]}),s.jsxs("div",{className:"text-[13px] text-white/30 italic font-medium tracking-tight border-l border-white/5 pl-4 ml-2",title:M.flavor_text,children:['"',M.flavor_text,'"']})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-gray-950/50 p-1.5 rounded-2xl border border-gray-800 backdrop-blur shadow-inner",children:[s.jsxs("button",{onClick:()=>_(!0),className:"bg-green-600 hover:bg-green-500 text-white font-black py-2.5 px-6 rounded-xl shadow-lg shadow-green-900/40 transition-all flex items-center gap-2 uppercase tracking-widest text-xs",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Collection"]}),s.jsx("button",{onClick:()=>x(!0),className:"p-2.5 bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white rounded-xl border border-gray-700 transition-all shadow-md",title:"Quick Search",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("div",{className:"w-px h-6 bg-gray-800 mx-1"}),s.jsx("button",{onClick:ke,className:"p-2.5 bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white rounded-xl border border-gray-700 transition-all shadow-md",title:"Export JSON",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),s.jsxs("div",{className:"relative group",children:[s.jsx("button",{className:"p-2.5 bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white rounded-xl border border-gray-700 transition-all shadow-md",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),s.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-gray-900 rounded-xl shadow-2xl border border-gray-800 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto transition-all z-50 overflow-hidden",children:[s.jsxs("button",{onClick:Te,className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-800 flex items-center gap-2 transition-colors border-b border-gray-800 text-gray-300",children:[s.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),B.is_mockup?"Switch to Collection":"Switch to Mockup"]}),s.jsxs("button",{onClick:we,className:"w-full text-left px-4 py-3 text-sm hover:bg-red-900/30 text-red-400 flex items-center gap-2 transition-colors",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Deck"]})]})]})]})]})}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 mb-6",children:fe.map((de,ue)=>{const me=de.target>0?Math.min(de.current/de.target*100,100):0,Ce=de.target>0&&de.current===de.target,le=de.target>0&&de.current>de.target;return s.jsxs("div",{className:"bg-gray-950/30 p-3 rounded-xl border border-white/5 backdrop-blur-md shadow-lg group hover:border-indigo-500/30 transition-all hover:bg-gray-950/50",children:[s.jsxs("div",{className:"flex justify-between items-end mb-1",children:[s.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:de.label}),s.jsxs("span",{className:`text-xs font-mono font-bold ${Ce?"text-green-400":le?"text-orange-400":"text-indigo-300"}`,children:[de.current,s.jsx("span",{className:"text-gray-600 mx-0.5",children:"/"}),de.target||"?"]})]}),s.jsx("div",{className:"h-1.5 w-full bg-gray-900 rounded-full overflow-hidden border border-gray-700/30",children:s.jsx("div",{className:`h-full transition-all duration-700 ${Ce?"bg-green-500":le?"bg-orange-500":"bg-indigo-500"}`,style:{width:`${me||0}%`}})})]},ue)})}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[s.jsxs("div",{className:"flex-1 min-w-0 bg-gray-950/40 backdrop-blur-3xl rounded-3xl shadow-2xl border border-white/10 order-2 lg:order-1 flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/5 bg-white/5 rounded-t-xl backdrop-blur-sm",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Decklist"]}),re>0&&s.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/50 px-3 py-1 rounded-full border border-gray-700",children:[s.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Acquired"}),s.jsxs("span",{className:`text-sm font-mono font-bold ${Z===re?"text-green-400":"text-orange-400"}`,children:[Z,"/",re]}),s.jsx("div",{className:"w-20 h-1.5 bg-gray-700 rounded-full overflow-hidden ml-1",children:s.jsx("div",{className:"h-full bg-green-500 transition-all duration-500",style:{width:`${Z/re*100}%`}})})]})]}),s.jsxs("div",{className:"flex bg-gray-900/50 rounded-lg p-1 gap-1 border border-gray-700",children:[s.jsx("button",{onClick:()=>De("grid"),className:`p-1.5 rounded-md transition-all ${I==="grid"?"text-white bg-gray-700 shadow-sm":"text-gray-400 hover:text-white"}`,title:"Grid View",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),s.jsx("button",{onClick:()=>De("table"),className:`p-1.5 rounded-md transition-all ${I==="table"?"text-white bg-gray-700 shadow-sm":"text-gray-400 hover:text-white"}`,title:"Table View",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]}),s.jsxs("div",{className:"p-4 space-y-8 min-h-[500px]",children:[Object.entries(Se).length===0&&s.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:'Use the "Add Cards" button to start building your deck.'}),Object.entries(Se).map(([de,ue])=>s.jsxs("div",{className:"animate-fade-in text-left",children:[s.jsxs("h4",{className:"text-sm font-bold text-indigo-300 border-b border-white/5 mb-4 pb-2 sticky top-0 bg-gray-950/60 backdrop-blur-md z-10 flex justify-between uppercase tracking-wider pl-1",children:[s.jsx("span",{children:de}),s.jsx("span",{className:"text-gray-500 text-xs bg-gray-900 px-2 py-0.5 rounded-full border border-gray-700",children:ue.reduce((me,Ce)=>me+(Ce.countInDeck||1),0)})]}),I==="grid"?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 md:gap-4 px-1",children:ue.map(me=>s.jsx(Bf,{card:me,availableFoils:K,onRemove:Le},me.firestoreId||me.id))}):s.jsx("div",{className:"space-y-1",children:ue.map((me,Ce)=>s.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-700/50 rounded-lg transition-colors text-sm group border border-transparent hover:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"font-mono text-gray-500 w-6 text-center bg-gray-900 rounded py-0.5 text-xs",children:me.countInDeck}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`font-medium ${me.finish==="foil"?"text-yellow-200":"text-gray-200"}`,children:me.name}),me.finish!=="foil"&&K.has(me.name)&&s.jsx("span",{className:"text-yellow-500 text-xs cursor-help",title:"Foil copy available in collection",children:""})]}),me.finish==="foil"&&s.jsx("span",{className:"text-[10px] bg-yellow-900/40 text-yellow-500 px-1 rounded uppercase tracking-wider border border-yellow-800",children:"Foil"})]}),s.jsxs("div",{className:"flex items-center gap-4 text-gray-400",children:[s.jsx("span",{className:"hidden md:inline-block text-xs text-gray-500",children:me.data?.type_line||me.type_line||""}),s.jsx("span",{className:"font-mono w-16 text-right text-xs",children:me.mana_cost||""}),s.jsxs("span",{className:"font-mono w-16 text-right text-green-400/80 text-xs",children:["$",(parseFloat(me.prices?.[me.finish==="foil"?"usd_foil":"usd"])||0).toFixed(2)]}),s.jsx("button",{onClick:()=>Le(me.firestoreId||me.id,me.name),className:"text-gray-600 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]},me.id+Ce))})]},de))]})]}),s.jsxs("div",{className:"w-full lg:w-80 space-y-6 shrink-0 order-1 lg:order-2",children:[B.commander&&s.jsxs("div",{className:"bg-gray-950/40 backdrop-blur-3xl rounded-3xl shadow-2xl overflow-hidden border border-white/10 relative group",children:[s.jsxs("div",{className:"p-4 bg-white/5 border-b border-white/5 flex justify-between items-center",children:[s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:B.commander_partner?"Partners":"Commander"}),B.commander_partner&&s.jsx("button",{onClick:()=>O(de=>de===0?1:0),className:"text-indigo-400 hover:text-indigo-300 text-xs font-bold uppercase tracking-wider transition-colors",children:"Swap View "})]}),s.jsxs("div",{className:"p-4 flex justify-center relative min-h-[350px]",children:[B.commander_partner&&s.jsx("div",{className:`transition-all duration-500 ease-out transform absolute top-4 
                                            ${k===0?"scale-90 opacity-60 translate-x-4 -rotate-3 z-0 blur-[1px] hover:blur-0":"scale-100 opacity-100 z-10 translate-x-0 rotate-0"}
                                            cursor-pointer`,onClick:de=>yt(de,B.commander_partner,1),children:s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:We(B.commander_partner),className:"w-full max-w-[250px] rounded-lg shadow-2xl skew-y-1",alt:B.commander_partner.name}),(B.commander_partner.card_faces||B.commander_partner.data?.card_faces)&&k===1&&s.jsx("div",{className:"absolute top-2 right-2 bg-black/60 text-white p-1.5 rounded-full hover:bg-black/80 transition-colors backdrop-blur-sm",children:s.jsx("svg",{className:`w-4 h-4 ${G?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})}),s.jsx("div",{className:`transition-all duration-500 ease-out transform relative 
                                        ${B.commander_partner&&k===1?"scale-90 opacity-60 -translate-x-4 rotate-3 z-0 blur-[1px] hover:blur-0 cursor-pointer":"scale-100 opacity-100 z-10"}
                                        `,onClick:de=>yt(de,B.commander,0),children:s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:We(B.commander),className:"w-full max-w-[250px] rounded-lg shadow-2xl hover:shadow-indigo-500/30 transition-shadow duration-300",alt:B.commander.name}),(B.commander.card_faces||B.commander.data?.card_faces)&&k===0&&s.jsx("div",{className:"absolute top-2 right-2 bg-black/60 text-white p-1.5 rounded-full hover:bg-black/80 transition-colors backdrop-blur-sm",children:s.jsx("svg",{className:`w-4 h-4 ${G?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})})]})]}),s.jsxs("div",{className:"bg-gray-950/40 backdrop-blur-3xl rounded-3xl shadow-2xl p-6 border border-white/10 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 group-hover:opacity-10 transition-opacity",children:s.jsx("span",{className:"text-8xl",children:""})}),s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 animate-pulse"}),m," Tools"]}),s.jsxs("div",{className:"space-y-3 relative z-10",children:[s.jsxs("button",{onClick:()=>n(`/decks/${a}/build`),className:"w-full py-4 bg-indigo-600/10 hover:bg-indigo-600/20 text-indigo-300 rounded-xl border border-indigo-500/20 hover:border-indigo-500/40 transition-all font-black uppercase text-[10px] tracking-widest flex items-center justify-center gap-3 group/btn",children:[s.jsx("span",{className:"text-lg group-hover/btn:scale-110 transition-transform",children:""}),m,"'s Deck Builder"]}),s.jsxs("button",{onClick:()=>A(!0),className:"w-full py-4 bg-indigo-900/10 hover:bg-indigo-900/20 text-indigo-400 rounded-xl border border-indigo-500/10 hover:border-indigo-500/30 transition-all font-black uppercase text-[10px] tracking-widest flex items-center justify-center gap-3",children:[s.jsx("span",{className:"text-lg",children:""}),"Full Deck Stats"]})]})]})]})]}),s.jsx(db,{isOpen:p,onClose:()=>x(!1),onAddCard:Ve}),s.jsx(W5,{isOpen:ce.isOpen,onClose:()=>se({...ce,isOpen:!1}),onConfirm:ce.onConfirm,title:ce.title,message:ce.message,isDanger:!0,confirmText:"Remove"}),s.jsx(Q5,{isOpen:T,onClose:()=>C(!1),deck:B,cards:ie}),s.jsx(K5,{isOpen:b,onClose:()=>_(!1),deck:B,deckCards:ie}),s.jsx(J5,{isOpen:D,onClose:()=>A(!1),cards:ie,deckName:B.name})]})]})};function eS(){const[a,n]=w.useState([]),[i,o]=w.useState(!0),[u,f]=w.useState(null);return w.useEffect(()=>{(async()=>{try{const x=(await Xe.get("/sets")).data||[];n(x),o(!1)}catch(p){console.error("Error fetching sets:",p),f(p),o(!1)}})()},[]),{sets:a,loading:i,error:u}}const tS=()=>{const{sets:a,loading:n,error:i}=eS(),[o,u]=w.useState(""),f=Is(),m=w.useMemo(()=>{if(!a)return{};const b={Expansion:[],Core:[],Commander:[],Masters:[],"Draft Innovation":[],"Duel Deck":[],"Box Set":[],Other:[]},_={expansion:"Expansion",core:"Core",commander:"Commander",masters:"Masters",draft_innovation:"Draft Innovation",duel_deck:"Duel Deck",box:"Box Set"};return a.forEach(j=>{if(o&&!j.name.toLowerCase().includes(o.toLowerCase())&&!j.code.includes(o.toLowerCase()))return;const S=_[j.set_type]||"Other";b[S]?b[S].push(j):b.Other.push(j)}),Object.keys(b).forEach(j=>{b[j].sort((S,U)=>new Date(U.released_at)-new Date(S.released_at))}),b},[a,o]),p=b=>{f(`/sets/${b}`)};if(n)return s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})});if(i)return s.jsxs("div",{className:"text-center text-red-500 mt-20",children:["Error loading sets: ",i.message]});const x=["Expansion","Core","Commander","Masters","Draft Innovation","Other"];return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Browse Sets"}),s.jsx("div",{className:"relative w-full md:w-80",children:s.jsx("input",{type:"text",className:"block w-full px-4 py-2 border border-gray-700 rounded-lg bg-gray-800 text-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Search sets...",value:o,onChange:b=>u(b.target.value)})})]}),s.jsx("div",{className:"space-y-12",children:x.map(b=>m[b]&&m[b].length>0&&s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold text-indigo-400 mb-4 border-b border-gray-700 pb-2 flex items-center gap-2",children:[b,s.jsx("span",{className:"text-xs text-gray-500 font-normal bg-gray-800 px-2 py-0.5 rounded-full",children:m[b].length})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:m[b].map(_=>s.jsxs("div",{onClick:()=>p(_.code),className:"bg-gray-800 p-4 rounded-xl border border-gray-700 hover:border-indigo-500 transition-all hover:bg-gray-750 cursor-pointer group flex flex-col items-center text-center gap-3 relative overflow-hidden",children:[s.jsx("div",{className:"w-12 h-12 flex items-center justify-center text-gray-400 group-hover:text-white transition-colors",children:_.icon_svg_uri?s.jsx("img",{src:_.icon_svg_uri,alt:_.name,className:"w-8 h-8 filter invert opacity-70 group-hover:opacity-100 transition-opacity"}):s.jsx("span",{className:"text-lg font-bold",children:_.code.toUpperCase()})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-200 group-hover:text-white leading-tight",children:_.name}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[_.released_at?.split("-")[0],"  ",_.card_count," cards"]})]})]},_.id))})]},b))})]})},nS=()=>{const{setCode:a}=sf(),[n,i]=w.useState([]),[o,u]=w.useState(!0),[f,m]=w.useState(null),{currentUser:p}=St(),{addToast:x}=is(),{cards:b,refresh:_}=pr(),j=w.useMemo(()=>{const E=new Map;return b&&b.forEach(k=>{const O=k.scryfall_id||k.id;E.has(O)||E.set(O,[]),E.get(O).push(k)}),E},[b]);w.useEffect(()=>{(async()=>{if(a){u(!0);try{const k=await Xe.get(`/sets/${a}/cards`);i(k.data||[]),m(null)}catch(k){console.error("Failed to load set cards",k),m(k.message)}finally{u(!1)}}})()},[a]);const S=async(E,k,O)=>{if(!p)return x("Please log in","error");try{const V=E.id,F=j.get(V)||[],G=k==="foil"?"foil":"nonfoil",te=F.find(ce=>ce.finish===G&&!ce.deck_id);O>0?te?(await Zt.updateCard(te.id,{count:te.count+1}),x(`Added ${G} ${E.name}`,"success")):(await Zt.addCardToCollection(p.uid,E,1,G),x(`Added new ${G} ${E.name}`,"success")):te&&(te.count>1?(await Zt.updateCard(te.id,{count:te.count-1}),x(`Removed ${G} ${E.name}`,"info")):(await Zt.removeCard(te.id),x(`Removed last ${G} ${E.name}`,"info"))),_()}catch(V){console.error("Update failed",V),x("Failed to update collection","error")}},U=async(E,k)=>{if(!p)return x("Please log in","error");try{const O=E.id,F=(j.get(O)||[]).find(G=>G.is_wishlist&&!G.deck_id);k>0?F?(await Zt.updateCard(F.id,{count:F.count+1}),x(`Increased wishlist for ${E.name}`,"success")):(await Zt.addCardToCollection(p.uid,E,1,"nonfoil",!0),x(`Added ${E.name} to wishlist`,"success")):F&&(F.count>1?(await Zt.updateCard(F.id,{count:F.count-1}),x(`Decreased wishlist for ${E.name}`,"info")):(await Zt.removeCard(F.id),x(`Removed ${E.name} from wishlist`,"info"))),_()}catch(O){console.error("Wishlist update failed",O),x("Failed to update wishlist","error")}};return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8 border-b border-gray-700 pb-4",children:[s.jsx(mt,{to:"/sets",className:"text-gray-400 hover:text-white mb-2 inline-block transition-colors",children:" Back to Sets"}),s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-white uppercase tracking-wider",children:[a," Set Details"]}),s.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Manage your collection for this set"})]}),s.jsxs("p",{className:"text-gray-500 text-sm",children:[n.length," Cards"]})]})]}),o?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6",children:Array.from({length:12}).map((E,k)=>s.jsx(zf,{},k))}):f?s.jsxs("div",{className:"text-center text-red-500 py-12",children:["Error loading set: ",f]}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6",children:n.map((E,k)=>{const O=j.get(E.id)||[],V=O.filter(te=>te.finish==="nonfoil"&&!te.deck_id).reduce((te,ce)=>te+(ce.count||1),0),F=O.filter(te=>te.finish==="foil"&&!te.deck_id&&!te.is_wishlist).reduce((te,ce)=>te+(ce.count||1),0),G=O.filter(te=>te.is_wishlist&&!te.deck_id).reduce((te,ce)=>te+(ce.count||1),0);return s.jsx(cb,{card:E,normalCount:V,foilCount:F,wishlistCount:G,onUpdateCount:S,onUpdateWishlistCount:U},E.id||k)})})]})},sS=({isOpen:a,onClose:n,mode:i="global"})=>{const{currentUser:o}=St(),{addToast:u}=is(),f=w.useRef(null),[m,p]=w.useState(null),[x,b]=w.useState(!1),[_,j]=w.useState("cards"),[S,U]=w.useState("merge"),[E,k]=w.useState({checkCollection:!0,addToCollection:!0}),O=F=>{const G=F.target.files[0];if(!G)return;const te=new FileReader;te.onload=ce=>{try{const se=JSON.parse(ce.target.result);if(se.deck&&se.cards)j("deck"),p(se);else if(se.collection&&typeof se.collection=="object"&&!Array.isArray(se.collection)){const T=Object.values(se.collection);j("cards"),p({cards:T})}else if(Array.isArray(se))j("cards"),p({cards:se});else if(se.cards&&Array.isArray(se.cards))j("cards"),p(se);else if(typeof se=="object"){const T=Object.values(se).find(C=>Array.isArray(C)&&C.length>0&&(C[0].name||C[0].id));T?(j("cards"),p({cards:T})):(console.error("Invalid JSON structure",se),u("Invalid JSON: Could not find card data","error"))}else u("Invalid JSON format","error")}catch(se){console.error(se),u("Failed to parse JSON","error")}},te.readAsText(G)},V=async()=>{if(m){b(!0);try{if(_==="cards")await Zt.importBatch(o.uid,m.cards,S),u(`Successfully imported ${m.cards.length} cards`,"success"),n();else if(_==="deck"){const F=await rr.importDeck(o.uid,m.deck,m.cards,E);F.missingCards?.length>0?u(`Imported deck with ${F.missingCards.length} missing cards`,"warning"):u("Deck imported successfully","success"),n()}}catch(F){console.error(F),u("Import failed","error")}finally{b(!1)}}};return a?$i.createPortal(s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:s.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl border border-gray-700 overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-gray-700 bg-gray-900/50 flex justify-between items-center",children:[s.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx("svg",{className:"w-6 h-6 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import Data"]}),s.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6 space-y-6",children:m?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Detected Content"}),s.jsx("p",{className:"text-white font-bold text-lg",children:_==="cards"?`Collection (${m.cards?.length||0} cards)`:`Deck: ${m.deck?.name} (${m.cards?.length||0} cards)`})]}),s.jsx("button",{onClick:()=>p(null),className:"text-sm text-red-400 hover:text-red-300 underline",children:"Change File"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider border-b border-gray-700 pb-2",children:"Import Options"}),_==="cards"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border border-gray-700 hover:bg-gray-700/50 cursor-pointer transition-colors",children:[s.jsx("input",{type:"radio",name:"replaceMode",checked:S==="merge",onChange:()=>U("merge"),className:"mt-1 bg-gray-900 border-gray-600 text-indigo-600 focus:ring-indigo-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"block text-white font-medium",children:"Merge (Recommended)"}),s.jsx("span",{className:"block text-gray-400 text-sm",children:"Add records to your existing collection. Updates if exists."})]})]}),s.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border border-red-900/30 hover:bg-red-900/10 cursor-pointer transition-colors",children:[s.jsx("input",{type:"radio",name:"replaceMode",checked:S==="replace",onChange:()=>U("replace"),className:"mt-1 bg-gray-900 border-gray-600 text-red-600 focus:ring-red-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"block text-white font-medium",children:"Replace (Use with Caution)"}),s.jsx("span",{className:"block text-red-300 text-sm",children:"Delete your ENTIRE current collection and replace it with this file."})]})]})]}),_==="deck"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",checked:E.checkCollection,onChange:F=>k(G=>({...G,checkCollection:F.target.checked})),className:"rounded bg-gray-700 border-gray-600 text-indigo-600 focus:ring-indigo-500"}),s.jsx("span",{className:"text-gray-300",children:"Use existing unassigned copies from collection"})]}),s.jsxs("label",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",checked:E.addToCollection,onChange:F=>k(G=>({...G,addToCollection:F.target.checked})),className:"rounded bg-gray-700 border-gray-600 text-indigo-600 focus:ring-indigo-500"}),s.jsx("span",{className:"text-gray-300",children:"Add missing cards to collection automatically"})]})]})]})]}):s.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer hover:border-indigo-500 hover:bg-gray-700/30 transition-all group",onClick:()=>f.current?.click(),children:[s.jsx("svg",{className:"w-12 h-12 text-gray-500 group-hover:text-indigo-400 mb-4 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("p",{className:"text-gray-300 font-medium",children:"Click to select backup JSON"}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Supports Collection exports and Deck exports"}),s.jsx("input",{type:"file",ref:f,onChange:O,accept:".json",className:"hidden"})]})}),s.jsxs("div",{className:"p-6 border-t border-gray-700 bg-gray-900/50 flex justify-end gap-3",children:[s.jsx("button",{onClick:n,className:"px-4 py-2 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",disabled:x,children:"Cancel"}),s.jsx("button",{onClick:V,disabled:!m||x,className:`px-6 py-2 rounded-lg font-bold text-white transition-all shadow-lg ${x?"bg-indigo-800 cursor-wait":S==="replace"&&_==="cards"?"bg-red-600 hover:bg-red-500 shadow-red-500/20":"bg-indigo-600 hover:bg-indigo-500 shadow-indigo-500/20"}`,children:x?"Importing...":"Start Import"})]})]})}),document.body):null},rS=({isOpen:a,onClose:n})=>{const{userProfile:i,refreshUserProfile:o}=St(),[u,f]=w.useState(!1),[m,p]=w.useState(i?.settings?.helper?.name||""),[x,b]=w.useState(i?.settings?.helper?.type||""),[_,j]=w.useState(i?.settings?.helper?.personality||""),[S,U]=w.useState(!1),[E,k]=w.useState([]),[O,V]=w.useState(""),[F,G]=w.useState(!1),[te,ce]=w.useState({});As.useEffect(()=>{if(a){const A=i?.settings?.helper||{};p(A.name||""),b(A.type||""),j(A.personality||""),f(!1),k([]),ce({})}},[a,i]);const se=async()=>{U(!0);try{const L={...i?.settings||{},helper:{name:m,type:x,personality:_}};await Xe.updateUser(i.id,{settings:L}),await o(),n()}catch(A){console.error(A),alert("Failed to save helper.")}finally{U(!1)}},T=async()=>{f(!0),G(!0),ce({}),k([]);try{const A=i?.settings?.geminiApiKey;if(!A)throw new Error("API Key missing");const L=await Hn.forgeHelperChat(A,[],{});k([{role:"model",content:L.aiResponse}])}catch(A){console.error(A),k([{role:"model",content:"Error connecting to the Forge. Please try again."}])}finally{G(!1)}},C=async()=>{if(!O.trim())return;const A=O;V(""),k(L=>[...L,{role:"user",content:A}]),G(!0);try{const L=i?.settings?.geminiApiKey,H=E.map(Me=>({role:Me.role,content:Me.content}));H.push({role:"user",content:A});const I=await Hn.forgeHelperChat(L,H,te);ce(I.updatedDraft||{}),k(Me=>[...Me,{role:"model",content:I.aiResponse}])}catch(L){console.error(L),k(H=>[...H,{role:"model",content:"Reviewing the blueprints... (Error, try again)"}])}finally{G(!1)}},D=()=>{te.name&&p(te.name),te.type&&b(te.type),te.personality&&j(te.personality),f(!1)};return a?s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:s.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-2xl overflow-hidden shadow-2xl flex flex-col max-h-[90vh]",children:[s.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-900",children:[s.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[s.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-emerald-500",children:"Helper Settings"}),s.jsx("span",{className:"text-xs bg-gray-800 text-gray-500 px-2 py-1 rounded border border-gray-700",children:"Beta"})]}),s.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6 flex-1 overflow-y-auto",children:u?s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"bg-gray-800/30 p-4 rounded-lg mb-4 text-sm text-gray-400 flex justify-between items-center",children:[s.jsx("span",{children:"Forging new identity..."}),s.jsx("button",{onClick:()=>f(!1),className:"text-white hover:underline",children:"Cancel"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4 p-2 bg-gray-950/30 rounded-lg border border-gray-800",children:[E.map((A,L)=>s.jsx("div",{className:`flex ${A.role==="user"?"justify-end":"justify-start"}`,children:s.jsx("div",{className:`max-w-[85%] p-3 rounded-xl text-sm ${A.role==="user"?"bg-emerald-600 text-white":"bg-gray-800 text-gray-200"}`,children:A.content})},L)),F&&s.jsx("div",{className:"flex justify-start",children:s.jsx("span",{className:"animate-pulse text-emerald-500",children:"..."})})]}),(te.name||te.type)&&s.jsxs("div",{className:"bg-black/40 p-3 rounded border border-emerald-500/30 mb-4 flex gap-4 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Name:"})," ",s.jsx("span",{className:"text-white",children:te.name||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Type:"})," ",s.jsx("span",{className:"text-white",children:te.type||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Personality:"})," ",s.jsx("span",{className:"text-white",children:te.personality||"-"})]}),s.jsx("button",{onClick:D,className:"ml-auto bg-emerald-600 text-white px-3 py-1 rounded hover:bg-emerald-500",children:"Apply This"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:O,onChange:A=>V(A.target.value),onKeyDown:A=>A.key==="Enter"&&C(),placeholder:"Describe your helper...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-emerald-500 outline-none"}),s.jsx("button",{onClick:C,disabled:F,className:"bg-emerald-600 p-2 rounded-lg text-white",children:""})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700 flex gap-4 items-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-500 to-emerald-700 rounded-full flex items-center justify-center text-2xl shadow-lg",children:""}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:m||"Unknown Helper"}),s.jsx("p",{className:"text-emerald-400 text-sm font-medium",children:x||"Generic Construct"}),s.jsxs("p",{className:"text-gray-400 text-sm italic mt-1",children:['"',_||"Standard protocol.",'"']})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Name"}),s.jsx("input",{type:"text",value:m,onChange:A=>p(A.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-emerald-500 outline-none"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Type"}),s.jsx("input",{type:"text",value:x,onChange:A=>b(A.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-emerald-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Personality"}),s.jsx("input",{type:"text",value:_,onChange:A=>j(A.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-emerald-500 outline-none"})]})]})]}),s.jsxs("div",{className:"flex justify-between pt-4 border-t border-gray-800",children:[s.jsxs("button",{onClick:T,className:"text-emerald-400 hover:text-emerald-300 font-bold flex items-center gap-2 px-4 py-2 hover:bg-emerald-900/20 rounded-lg transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Re-Forge Persona"]}),s.jsx("button",{onClick:se,disabled:S,className:"bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-2 px-6 rounded-lg transition-all shadow-lg shadow-emerald-500/20 disabled:opacity-50",children:S?"Saving...":"Save Changes"})]})]})})]})}):null},aS=()=>{const{user:a,userProfile:n,refreshUserProfile:i}=St(),o=Is(),[u,f]=w.useState("general"),[m,p]=w.useState(!1),[x,b]=w.useState(!1),[_,j]=w.useState(!1),[S,U]=w.useState(!1),[E,k]=w.useState(""),[O,V]=w.useState("grid"),[F,G]=w.useState("md");w.useEffect(()=>{n?.settings&&(n.settings.geminiApiKey&&k(n.settings.geminiApiKey),n.settings.viewMode&&V(n.settings.viewMode),n.settings.gridSize&&G(n.settings.gridSize))},[n]);const te=async()=>{if(!n?.id){alert("User profile not ready. Please try again.");return}b(!0);try{const T={...n?.settings||{},geminiApiKey:E,viewMode:O,gridSize:F};await Xe.updateUser(n.id,{settings:T}),await i(),alert("Settings saved!")}catch(se){console.error("Failed to save settings:",se),alert("Error saving settings: "+(se.message||"Unknown error"))}finally{b(!1)}},ce=async()=>{try{const se=await Xe.get("/collection/export");if(!se||se.length===0){alert("No cards to export.");return}const T=JSON.stringify({cards:se,exported_at:new Date},null,2),C=new Blob([T],{type:"application/json"}),D=URL.createObjectURL(C),A=document.createElement("a");A.href=D,A.download=`mtg_collection_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(A),A.click(),document.body.removeChild(A)}catch(se){console.error("Export failed:",se),alert("Failed to export collection.")}};return a?s.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600",children:"Settings"}),s.jsx("div",{className:"flex border-b border-gray-700",children:["general","ai","display","data",...a?.uid==="Kyrlwz6G6NWICCEPYbXtFfyLzWI3"?["admin"]:[]].map(se=>s.jsx("button",{onClick:()=>f(se),className:`px-6 py-3 font-medium transition-colors border-b-2 ${u===se?"border-indigo-500 text-indigo-400":"border-transparent text-gray-400 hover:text-gray-200"}`,children:se.charAt(0).toUpperCase()+se.slice(1)},se))}),s.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700 shadow-lg min-h-[400px]",children:[u==="general"&&s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Account Information"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-sm text-gray-400 block",children:"Email"}),s.jsx("div",{className:"bg-gray-900 p-3 rounded-lg text-gray-200",children:a.email})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-sm text-gray-400 block",children:"User ID"}),s.jsx("div",{className:"bg-gray-900 p-3 rounded-lg text-gray-200 font-mono text-xs",children:a.uid})]}),s.jsxs("div",{className:"pt-6 border-t border-gray-700",children:[s.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Account Actions"}),s.jsx("button",{onClick:async()=>{window.confirm("This will restart the welcome tour. Continue?")&&(await Xe.updateUser(n.id,{settings:{...n.settings,onboarding_complete:!1,onboarding_step:0}}),await i(),o("/onboarding"))},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-200 rounded-lg border border-gray-600 transition-colors text-sm font-medium",children:"Reset Onboarding Tour"})]})]}),u==="ai"&&s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"AI Integrations"}),s.jsx("span",{className:"bg-indigo-900/50 text-indigo-300 text-xs px-2 py-1 rounded border border-indigo-700/50",children:"Gemini"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"To enable the AI Assistant and Deck Suggestions, you need a Google Gemini API Key. Keys are stored securely in your user profile."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Gemini API Key"}),s.jsx("input",{type:"password",value:E,onChange:se=>k(se.target.value),placeholder:"Enter AI Key...",className:"w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),s.jsxs("div",{className:"text-xs text-gray-500 flex justify-between",children:[s.jsx("span",{children:"Never share your API key."}),s.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-indigo-400 hover:text-indigo-300 hover:underline",children:"Get a key from Google AI Studio "})]})]})]}),s.jsxs("div",{className:"pt-6 border-t border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Personalization"}),s.jsx("div",{className:"flex flex-wrap gap-4",children:s.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-3 bg-gray-700 hover:bg-gray-600 border border-gray-600 text-white px-5 py-3 rounded-xl transition-all hover:shadow-lg hover:border-emerald-500 group",children:[s.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-lg flex items-center justify-center text-xl group-hover:scale-110 transition-transform",children:""}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-sm",children:"Helper Settings"}),s.jsx("div",{className:"text-xs text-gray-400",children:"Customize your AI companion"})]})]})})]})]}),u==="display"&&s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Display Preferences"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Default View "}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${O==="grid"?"bg-indigo-600/20 border-indigo-500":"bg-gray-900 border-gray-700 hover:border-gray-600"}`,children:[s.jsx("input",{type:"radio",name:"viewMode",value:"grid",checked:O==="grid",onChange:()=>V("grid"),className:"text-indigo-500 focus:ring-indigo-500"}),s.jsx("span",{className:"text-gray-200",children:"Grid View"})]}),s.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${O==="table"?"bg-indigo-600/20 border-indigo-500":"bg-gray-900 border-gray-700 hover:border-gray-600"}`,children:[s.jsx("input",{type:"radio",name:"viewMode",value:"table",checked:O==="table",onChange:()=>V("table"),className:"text-indigo-500 focus:ring-indigo-500"}),s.jsx("span",{className:"text-gray-200",children:"Table View"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Grid Size"}),s.jsxs("select",{value:F,onChange:se=>G(se.target.value),className:"bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-indigo-500 w-full sm:w-48",children:[s.jsx("option",{value:"sm",children:"Small"}),s.jsx("option",{value:"md",children:"Medium"}),s.jsx("option",{value:"lg",children:"Large"})]})]})]})]}),u==="data"&&s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Data Management"}),s.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-800/50 rounded-lg p-4 mb-6",children:[s.jsxs("h3",{className:"text-yellow-500 font-bold mb-1 flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Important Note"]}),s.jsx("p",{className:"text-yellow-200/80 text-sm",children:"Backups include your collection data. Deck exports can be done from individual deck pages."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 flex items-center justify-between hover:bg-gray-700/30 transition-colors",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-medium",children:"Export Collection"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Download a JSON backup of your entire card collection."})]}),s.jsx("button",{onClick:ce,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Export JSON"})]}),s.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 flex items-center justify-between hover:bg-gray-700/30 transition-colors",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-medium",children:"Import Data"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Restore from a backup or import cards. Supports Merge and Replace."})]}),s.jsx("button",{onClick:()=>j(!0),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-colors border border-gray-600",children:"Import..."})]})]})]}),u==="admin"&&a?.uid==="Kyrlwz6G6NWICCEPYbXtFfyLzWI3"&&s.jsx(iS,{})]}),s.jsx(sS,{isOpen:_,onClose:()=>j(!1),mode:"global"}),s.jsx(rS,{isOpen:S,onClose:()=>U(!1)}),s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{onClick:te,disabled:x,className:`bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-8 rounded-lg shadow-lg shadow-indigo-500/20 transition-all transform hover:-translate-y-0.5 ${x?"opacity-50 cursor-not-allowed":""}`,children:x?"Saving...":"Save Settings"})})]}):s.jsx("div",{className:"p-8 text-center text-gray-500",children:"Please log in to view settings."})},iS=()=>{const[a,n]=w.useState([]),[i,o]=w.useState(""),[u,f]=w.useState([]),[m,p]=w.useState(!1),x=As.useRef(!1),[b,_]=w.useState({current:0,total:0}),[j,S]=w.useState({totalCards:0,types:{creature:0,instant:0,sorcery:0,enchantment:0,artifact:0,land:0,planeswalker:0,other:0}}),[U,E]=w.useState(null);w.useEffect(()=>{k();const T=localStorage.getItem("admin_last_sync");if(T)try{E(JSON.parse(T))}catch(C){console.error("Failed to parse last sync",C)}},[]);const k=async()=>{try{const T=await Xe.get("/admin/sets");n(T.data||[])}catch(T){console.error("Failed to fetch sets",T)}},O=T=>f(C=>[...C,`${new Date().toLocaleTimeString()} - ${T}`]),V=(T,C)=>{S(D=>{const A={...D};return A.totalCards+=T,C&&Object.keys(C).forEach(L=>{A.types[L]=(A.types[L]||0)+(C[L]||0)}),A})},F=T=>{const C={date:new Date().toISOString(),stats:T};E(C),localStorage.setItem("admin_last_sync",JSON.stringify(C))},G=async(T,C=!1)=>{if(T)try{O(`Starting sync for ${T}...`);const A=await(await fetch("http://localhost:3000/admin/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({setCode:T})})).json();A.success?(O(`Success: ${T}. Processed ${A.count} cards.`),V(A.count,A.typeStats),C&&_(L=>({...L,current:L.current+1}))):O(`Error: ${A.error}`)}catch(D){O(`Request Failed: ${D.message}`)}},te=()=>{window.confirm("Are you sure you want to cancel the sync?")&&(x.current=!0,O("Cancelling operation..."))},ce=async()=>{if(!window.confirm("This will sync ALL sets. It may take a long time. Continue?"))return;p(!0),x.current=!1,O("Starting Mass Sync..."),S({totalCards:0,types:{creature:0,instant:0,sorcery:0,enchantment:0,artifact:0,land:0,planeswalker:0,other:0}}),_({current:0,total:a.length});for(const C of a){if(x.current){O("Mass Sync Cancelled by User.");break}await G(C.code,!0)}x.current||O("Mass Sync Complete!")};w.useEffect(()=>{!m&&j.totalCards>0&&F(j)},[m]);const se=async()=>{i&&(p(!0),S({totalCards:0,types:{creature:0,instant:0,sorcery:0,enchantment:0,artifact:0,land:0,planeswalker:0,other:0}}),await G(i),p(!1))};return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Admin Scryfall Sync"}),U&&s.jsxs("div",{className:"text-right text-xs text-gray-400",children:[s.jsxs("p",{children:["Last Sync: ",new Date(U.date).toLocaleString()]}),s.jsxs("p",{children:[U.stats.totalCards," cards processed"]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-indigo-900/40 p-4 rounded-lg border border-indigo-700/50",children:[s.jsx("p",{className:"text-xs text-indigo-300 uppercase font-bold",children:"Total Cards"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:j.totalCards})]}),s.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-700",children:[s.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold",children:"Progress"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:b.total>0?`${b.current} / ${b.total}`:"-"}),b.total>0&&s.jsx("div",{className:"w-full bg-gray-700 h-1.5 mt-2 rounded-full overflow-hidden",children:s.jsx("div",{className:"bg-green-500 h-full transition-all duration-300",style:{width:`${b.current/b.total*100}%`}})})]})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Object.entries(j.types).map(([T,C])=>s.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700/50 flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 capitalize",children:T}),s.jsx("span",{className:"text-sm font-bold text-gray-200",children:C})]},T))}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gray-700/30 p-4 rounded-lg border border-gray-600",children:[s.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Single Set Sync"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("select",{className:"bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 text-white flex-1 min-w-0",value:i,onChange:T=>o(T.target.value),children:[s.jsx("option",{value:"",children:"Select a Set..."}),a.map(T=>s.jsxs("option",{value:T.code,children:[T.name," (",T.code.toUpperCase(),")"]},T.code))]}),s.jsx("button",{onClick:se,disabled:m||!i,className:"bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white px-4 py-2 rounded-lg whitespace-nowrap",children:m?"Syncing...":"Sync Set"})]})]}),s.jsxs("div",{className:"bg-gray-700/30 p-4 rounded-lg border border-gray-600 flex flex-col justify-between",children:[s.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Mass Operations"}),m?s.jsx("button",{onClick:te,className:"bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg w-full font-bold animate-pulse",children:"CANCEL OPERATION"}):s.jsx("button",{onClick:ce,className:"bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg w-full font-bold",children:"SYNC ALL SETS"}),s.jsxs("p",{className:"text-gray-400 text-xs mt-2 text-center",children:["Iterates ",a.length," sets."]})]})]}),s.jsx("div",{className:"bg-black/50 p-4 rounded-lg font-mono text-xs text-green-400 h-64 overflow-y-auto border border-white/10",children:u.length===0?s.jsx("span",{className:"text-gray-600",children:"Ready to sync..."}):u.map((T,C)=>s.jsx("div",{children:T},C))})]})]})},lS=()=>{const{cards:a,loading:n,error:i}=pr({wishlist:!0}),[o,u]=w.useState(""),[f,m]=w.useState(!1),[p,x]=w.useState({colors:[],rarity:[],types:[],sets:[]}),b=w.useMemo(()=>{const S=new Set;return a.forEach(U=>{U.set&&U.set_name&&S.add(JSON.stringify({value:U.set,label:U.set_name}))}),Array.from(S).map(U=>JSON.parse(U)).sort((U,E)=>U.label.localeCompare(E.label))},[a]),_=w.useMemo(()=>a.filter(S=>{const U=S.name||"";if(o&&!U.toLowerCase().includes(o.toLowerCase()))return!1;if(p.colors.length>0){const E=S.color_identity||[],k=E.length>1,O=E.length===0;if(!p.colors.some(F=>F==="C"?O:F==="M"?k:E.includes(F)))return!1}if(p.rarity.length>0&&!p.rarity.includes(S.rarity))return!1;if(p.types.length>0){const E=(S.type_line||"").toLowerCase();if(!p.types.some(O=>E.includes(O.toLowerCase())))return!1}return!(p.sets.length>0&&!p.sets.includes(S.set))}),[a,o,p]),j=(S,U)=>{x(E=>{const k=E[S],O=k.includes(U)?k.filter(V=>V!==U):[...k,U];return{...E,[S]:O}})};return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[s.jsx("span",{className:"p-2 bg-orange-500/10 rounded-xl",children:s.jsx("svg",{className:"w-8 h-8 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),"Wishlist"]}),s.jsx("p",{className:"text-gray-400 mt-1 text-sm",children:"Manage cards you want to acquire"})]}),s.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[s.jsxs("div",{className:"relative w-full md:w-80",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-700 rounded-md leading-5 bg-gray-800 text-gray-300 placeholder-gray-500 focus:outline-none focus:bg-gray-700 focus:border-orange-500 transition duration-150 ease-in-out sm:text-sm",placeholder:"Search wishlist...",value:o,onChange:S=>u(S.target.value)})]}),s.jsxs("button",{onClick:()=>m(!f),className:`px-3 py-2 rounded-md border transition-colors flex items-center gap-2 ${f?"bg-orange-600 border-orange-500 text-white":"bg-gray-800 border-gray-700 text-gray-400 hover:text-white"}`,children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters"]})]})]}),f&&s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8 border border-gray-700 gap-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 animate-fade-in-down",children:[s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-2",children:"Colors"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["W","U","B","R","G","C","M"].map(S=>s.jsx("button",{onClick:()=>j("colors",S),className:`
                                        w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm border shadow-sm transition-transform hover:scale-105
                                        ${p.colors.includes(S)?"ring-2 ring-orange-500 ring-offset-2 ring-offset-gray-800":"opacity-70 hover:opacity-100"}
                                        ${S==="W"?"bg-[#F9FAFB] text-gray-900 border-gray-300":""}
                                        ${S==="U"?"bg-[#3B82F6] text-white border-blue-600":""}
                                        ${S==="B"?"bg-[#1F2937] text-white border-gray-900":""}
                                        ${S==="R"?"bg-[#EF4444] text-white border-red-600":""}
                                        ${S==="G"?"bg-[#10B981] text-white border-green-600":""}
                                        ${S==="C"?"bg-gray-400 text-gray-900 border-gray-500":""}
                                        ${S==="M"?"bg-gradient-to-br from-yellow-400 via-red-500 to-purple-600 text-white border-purple-500":""}
                                    `,children:S},S))})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-2",children:"Rarity"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["common","uncommon","rare","mythic"].map(S=>s.jsx("button",{onClick:()=>j("rarity",S),className:`
                                        px-3 py-1 rounded text-xs font-bold uppercase border transition-colors
                                        ${p.rarity.includes(S)?"bg-orange-600 border-orange-500 text-white":"bg-gray-900 border-gray-700 text-gray-400 hover:border-gray-500"}
                                    `,children:S},S))})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-2",children:"Types"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["Creature","Instant","Sorcery","Enchantment","Artifact","Planeswalker","Land"].map(S=>s.jsx("button",{onClick:()=>j("types",S),className:`
                                         px-2 py-1 rounded text-xs border transition-colors
                                         ${p.types.includes(S)?"bg-orange-600 border-orange-500 text-white":"bg-gray-900 border-gray-700 text-gray-400 hover:border-gray-500"}
                                     `,children:S},S))})]}),s.jsx("div",{className:"col-span-1",children:s.jsx(Zh,{label:"Filter by Set",options:b,selected:p.sets,onChange:S=>x(U=>({...U,sets:S})),placeholder:"All Sets"})})]}),n?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:Array.from({length:12}).map((S,U)=>s.jsx(zf,{},U))}):i?s.jsxs("div",{className:"bg-red-900/50 border border-red-500 text-red-200 p-4 rounded-lg",children:["Error loading wishlist: ",i.message]}):s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[_.map(S=>s.jsx("div",{className:"h-full",children:s.jsx(Bf,{card:S})},S.id)),_.length===0&&s.jsxs("div",{className:"col-span-full text-center text-gray-500 py-12 flex flex-col items-center",children:[s.jsx("svg",{className:"w-16 h-16 text-gray-700 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),s.jsx("p",{className:"text-xl",children:"Your wishlist is empty"}),s.jsx("p",{className:"text-sm mt-2 font-medium",children:"Add cards to your wishlist from the search modal!"})]})]})]})},sr={ANALYSIS:1,ARCHITECT:2,DEPLOY:3},oS=()=>{const{deckId:a}=sf(),n=Is(),{userProfile:i,currentUser:o}=St(),{addToast:u}=is(),{deck:f,cards:m,loading:p}=fb(a),{cards:x}=pr(),[b,_]=w.useState(sr.ANALYSIS),[j,S]=w.useState(`Initializing ${i?.settings?.helper?.name||"Oracle"}...`),[U,E]=w.useState([]),[k,O]=w.useState(!1),[V,F]=w.useState({}),[G,te]=w.useState(new Set),[ce,se]=w.useState("All"),[T,C]=w.useState("grid"),D=w.useRef(null);w.useEffect(()=>{D.current?.scrollIntoView({behavior:"smooth"})},[U]);const A=X=>{E(re=>[...re,`[${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}] ${X}`])},L=i?.settings?.helper?.name||"The Oracle",H=X=>{if(!X)return null;const re=X.data||X;return re.image_uris?.art_crop?re.image_uris.art_crop:re.card_faces?.[0]?.image_uris?.art_crop?re.card_faces[0].image_uris.art_crop:re.image_uris?.normal?re.image_uris.normal:null},I=(X,re)=>{const Z={W:0,U:0,B:0,R:0,G:0,total:0},pe=fe=>{fe&&(Z.W+=(fe.match(/\{W\}/g)||[]).length,Z.U+=(fe.match(/\{U\}/g)||[]).length,Z.B+=(fe.match(/\{B\}/g)||[]).length,Z.R+=(fe.match(/\{R\}/g)||[]).length,Z.G+=(fe.match(/\{G\}/g)||[]).length)};return X.forEach(fe=>pe(fe.mana_cost||fe.data?.mana_cost)),Object.values(re).forEach(fe=>pe(fe.data?.mana_cost||fe.type_line)),Z.total=Z.W+Z.U+Z.B+Z.R+Z.G,Z},Me=(X,re,Z)=>{if(X<=0)return{};if(re.total===0)return{};const pe={W:{name:"Plains",type:"Basic Land  Plains"},U:{name:"Island",type:"Basic Land  Island"},B:{name:"Swamp",type:"Basic Land  Swamp"},R:{name:"Mountain",type:"Basic Land  Mountain"},G:{name:"Forest",type:"Basic Land  Forest"}},fe={};let Se=0;const ke={};if(["W","U","B","R","G"].forEach(Ve=>{if(re[Ve]>0){const Le=re[Ve]/re.total,We=Math.round(X*Le);ke[Ve]=We,Se+=We}}),Se>0){const Ve=Object.keys(ke).filter(Le=>ke[Le]>0);Ve.sort((Le,We)=>ke[We]-ke[Le]),Se<X?ke[Ve[0]]+=X-Se:Se>X&&(ke[Ve[0]]-=Se-X)}return Object.entries(ke).forEach(([Ve,Le])=>{if(Le>0){const We=pe[Ve],yt=Z.find(ge=>ge.name===We.name)||{name:We.name,type_line:We.type,image_uris:{normal:`https://api.scryfall.com/cards/named?exact=${We.name}&format=image`}};for(let ge=0;ge<Le;ge++){const ye=`basic-${Ve}-${ge}-${Date.now()}`;fe[ye]={firestoreId:ye,name:We.name,type_line:We.type,rating:10,reason:`Auto-filled to match ${Math.round(re[Ve]/re.total*100)}% ${Ve} pip density.`,suggestedType:"Land",data:yt.data||yt,isVirtual:!0}}}}),fe},De=(X,re)=>{if(!X||X.length===0)return!0;if(!re||re.length===0)return X.length===0;const Z=new Set(re);return X.every(pe=>Z.has(pe))},B=async()=>{if(!i?.settings?.geminiApiKey){u("Gemini API Key missing in settings.","error"),n("/settings");return}O(!0),S("Scanning Collection..."),A("Starting deck architecture analysis...");try{const X=[...new Set([...f.commander?.color_identity||[],...f.commander_partner?.color_identity||[]])],re=f.aiBlueprint||{},Z=["Synergy / Strategy","Mana Ramp","Card Draw","Targeted Removal","Board Wipes","Land"],pe=new Set(m.map(ye=>ye.name));f.commander?.name&&pe.add(f.commander.name),f.commander_partner?.name&&pe.add(f.commander_partner.name);const fe={Land:36,"Mana Ramp":10,"Card Draw":10,"Targeted Removal":10,"Board Wipes":3,"Synergy / Strategy":30,...re.suggestedCounts||{}},Se={},ke=new Set;for(const ye of Z){const Te=m.filter(ue=>(ue.data?.type_line||ue.type_line||"").includes(ye)).reduce((ue,me)=>ue+(me.countInDeck||1),0),we=fe[ye]||0;let Ne=Math.max(0,we-Te);if(Ne<=0){A(`${ye}: Current count (${Te}) meets target (${we}). Skipping.`);continue}A(`Identifying potential ${ye} candidates...`);const je=[],ze=new Set;for(const ue of x){if(ze.has(ue.name))continue;const me=ue.data?.color_identity||ue.data?.colors||[];De(me,X)&&(pe.has(ue.name)||(je.push({firestoreId:ue.id,name:ue.name,type_line:ue.data?.type_line||ue.type_line}),ze.add(ue.name)))}if(je.length===0)continue;const Vt={blueprint:re,instructions:`Select EXACTLY ${Ne} best "${ye}" cards for a ${f.format||"Commander"} deck. Commander: ${f.commander?.name}${f.commander_partner?" & "+f.commander_partner.name:""}. Prioritize theme synergy.`,candidates:je.slice(0,150),playstyle:i?.playstyle,targetRole:ye};let de=0;for(;de<2;)try{A(`Consulting ${L} for ${ye}s (Need ${Ne})${de>0?" [Retry]":""}...`);const ue=await Hn.generateDeckSuggestions(i.settings.geminiApiKey,Vt);ue?.suggestions&&(ue.suggestions.forEach(me=>{const Ce=je.find(le=>le.firestoreId===me.firestoreId);if(Ce){const le=x.find(nt=>nt.id===me.firestoreId),Ue=me.firestoreId;Se[Ue]={...me,firestoreId:Ue,name:le?.name||Ce.name,type_line:le?.data?.type_line||Ce.type_line,data:le?.data||le,rating:me.rating,reason:me.reason,suggestedType:ye},ke.add(Ue)}}),A(`${L} provided ${ue.suggestions.length} suggestions for ${ye}.`));break}catch(ue){de++,de>=2?(console.error(`[Wizard] Oracle failed for ${ye} after 2 tries:`,ue),A(`Notice: ${L} failed for ${ye}: ${ue.message}. Continuing...`)):(A(`Notice: ${L} encountered an issue with ${ye}. Retrying in 2s...`),await new Promise(me=>setTimeout(me,2e3)))}}const Ve=m.filter(ye=>(ye.data?.type_line||ye.type_line||"").includes("Land")).length,Le=Object.values(Se).filter(ye=>ye.suggestedType==="Land").length,We=Ve+Le,yt=fe.Land||36,ge=Math.max(0,yt-We);if(ge>0){A(`Calculating mana base for ${ge} remaining land slots...`);const ye=I(m,Se),Te=Me(ge,ye,x);Object.assign(Se,Te),Object.keys(Te).forEach(we=>ke.add(we)),A(`Added ${Object.keys(Te).length} Basic Lands to balance mana curve.`)}F(Se),te(ke),A("Architecture complete. Proceeding to Architect view."),_(sr.ARCHITECT)}catch(X){console.error(X),u("Architecture failed. Please check your AI key.","error")}finally{O(!1),S("Ready.")}},ie=()=>{if(!(o?.uid==="Kyrlwz6G6NWICCEPYbXtFfyLzWI3"||i?.firestore_id==="Kyrlwz6G6NWICCEPYbXtFfyLzWI3"))return;A("Dev Mode: Skipping Analysis...");const re=[...new Set([...f.commander?.color_identity||[],...f.commander_partner?.color_identity||[]])],Z=f.aiBlueprint||{},pe=["Land","Mana Ramp","Card Draw","Targeted Removal","Board Wipes","Synergy / Strategy"],fe={Land:36,"Mana Ramp":10,"Card Draw":10,"Targeted Removal":10,"Board Wipes":3,"Synergy / Strategy":30,...Z.suggestedCounts||{}},Se={},ke=new Set,Ve=new Set;let Le=0;for(const We of pe){const yt=m.filter(Ne=>(Ne.data?.type_line||Ne.type_line||"").includes(We)).reduce((Ne,je)=>Ne+(je.countInDeck||1),0),ge=fe[We]||0,ye=Math.max(0,ge-yt);if(ye<=0)continue;x.filter(Ne=>{if(!Ne.id||Ve.has(Ne.id)||m.some(Vt=>Vt.name===Ne.name))return!1;const je=Ne.color_identity||Ne.data?.color_identity||[];if(!De(je,re))return!1;const ze=(Ne.type_line||"").includes("Land");return We==="Land"?ze:!ze}).sort(()=>.5-Math.random()).slice(0,ye).forEach(Ne=>{const je=Ne.id;Se[je]={firestoreId:je,name:Ne.name,type_line:Ne.type_line,rating:Math.floor(Math.random()*5)+5,reason:`[Dev-Skipped] Auto-filled to satisfy ${We} quota.`,suggestedType:We,data:Ne},ke.add(je),Ve.add(je),Le++})}if(Le===0){u("Dev Skip: No valid cards found to fill any buckets.","warning");return}F(Se),te(ke),A(`Dev Mode: Populated ${Le} cards across categories. Proceeding.`),_(sr.ARCHITECT)},xe=X=>{const re=new Set(G);re.has(X)?re.delete(X):re.add(X),te(re)},Ee=()=>s.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 py-12",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"inline-block p-4 rounded-3xl bg-indigo-500/10 border border-indigo-500/20 mb-4 animate-bounce",children:s.jsx("span",{className:"text-4xl",children:""})}),s.jsxs("h1",{className:"text-5xl font-black text-white tracking-tighter uppercase italic",children:[L," Deck Architect"]}),s.jsxs("p",{className:"text-gray-400 text-lg max-w-2xl mx-auto",children:[L," will analyze your collection and current deck composition to architect the perfect additions for ",s.jsx("span",{className:"text-indigo-400 font-bold",children:f?.name}),"."]})]}),s.jsxs("div",{className:"bg-gray-950/40 backdrop-blur-3xl rounded-[2.5rem] border border-white/10 overflow-hidden shadow-2xl",children:[s.jsxs("div",{className:"p-8 border-b border-white/5 bg-white/5 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${k?"bg-yellow-500 animate-pulse":"bg-green-500"}`}),s.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-gray-500",children:j})]}),s.jsxs("div",{className:"flex gap-4",children:[(o?.uid==="Kyrlwz6G6NWICCEPYbXtFfyLzWI3"||i?.firestore_id==="Kyrlwz6G6NWICCEPYbXtFfyLzWI3")&&s.jsx("button",{onClick:ie,className:"bg-amber-600/20 hover:bg-amber-600/40 text-amber-500 font-black px-6 py-3 rounded-2xl transition-all uppercase tracking-widest text-[10px] border border-amber-500/20",children:"Quick Skip (Dev)"}),!k&&s.jsx("button",{onClick:B,className:"bg-indigo-600 hover:bg-indigo-500 text-white font-black px-8 py-3 rounded-2xl transition-all shadow-lg shadow-indigo-500/20 uppercase tracking-widest text-xs border border-white/10",children:"Start Architecture"})]})]}),s.jsxs("div",{className:"p-8 h-[400px] overflow-y-auto font-mono text-xs space-y-3 custom-scrollbar bg-black/40 backdrop-blur-inner shadow-inner box-shadow-inner border-t border-white/5 font-medium leading-relaxed",children:[U.length===0?s.jsx("div",{className:"text-gray-600 italic animate-pulse",children:"Waiting for architecture to start..."}):U.map((X,re)=>s.jsx("div",{className:"text-gray-300 animate-fade-in pl-4 border-l-2 border-indigo-500/40 py-1 hover:bg-white/5 transition-colors rounded-r",children:X},re)),s.jsx("div",{ref:D})]})]})]}),Oe=()=>{const X=Object.values(V).filter(Z=>ce==="All"||Z.suggestedType===ce),re=["All","Land","Mana Ramp","Card Draw","Targeted Removal","Board Wipes","Synergy / Strategy"];return s.jsxs("div",{className:"h-full flex flex-col gap-6 py-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6 px-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("h2",{className:"text-3xl font-black text-white italic tracking-tighter uppercase",children:"Selection Phase"}),s.jsxs("p",{className:"text-gray-500 text-sm font-medium",children:["Review ",L,"'s suggestions and select the ones you want to draft into your deck."]})]}),s.jsx("div",{className:"flex items-center gap-3 bg-gray-950/50 p-1.5 rounded-2xl border border-white/5 backdrop-blur-md",children:[{mode:"grid",icon:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},{mode:"table",icon:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})},{mode:"list",icon:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}].map(({mode:Z,icon:pe})=>s.jsx("button",{onClick:()=>C(Z),className:`p-2 rounded-xl transition-all ${T===Z?"bg-indigo-600 text-white shadow-lg":"text-gray-500 hover:text-white"}`,title:`${Z.charAt(0).toUpperCase()+Z.slice(1)} View`,children:pe},Z))})]}),s.jsx("div",{className:"flex bg-gray-950/50 p-1.5 rounded-2xl border border-white/5 backdrop-blur-md overflow-x-auto no-scrollbar mx-4",children:re.map(Z=>{const pe=Object.values(V).filter(fe=>Z==="All"||fe.suggestedType===Z).length;return Z!=="All"&&pe===0?null:s.jsxs("button",{onClick:()=>se(Z),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${ce===Z?"bg-indigo-600 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:[Z," ",s.jsx("span",{className:"ml-1 opacity-40 font-mono",children:pe})]},Z)})}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-4 custom-scrollbar",children:[T==="list"&&s.jsx("div",{className:"space-y-4",children:X.map(Z=>s.jsxs("div",{onClick:()=>xe(Z.firestoreId),className:`grid grid-cols-[auto_1fr_auto_auto] gap-8 items-center p-6 rounded-[2rem] border transition-all cursor-pointer group ${G.has(Z.firestoreId)?"bg-indigo-500/10 border-indigo-500/40 shadow-2xl":"bg-gray-950/30 border-white/5 hover:border-white/20"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-xl border-2 flex items-center justify-center transition-all ${G.has(Z.firestoreId)?"bg-indigo-500 border-indigo-400 text-white":"border-white/10 group-hover:border-white/30"}`,children:G.has(Z.firestoreId)&&s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"block text-xl font-black text-white uppercase italic tracking-tight group-hover:text-indigo-300 transition-colors",children:Z.name}),s.jsx("span",{className:"text-[10px] font-black text-indigo-400 tracking-[0.2em] uppercase",children:Z.type_line})]}),s.jsxs("div",{className:"text-center font-mono text-indigo-400 font-bold bg-white/5 px-4 py-2 rounded-2xl border border-white/5",children:[Z.rating,"/10"]}),s.jsxs("div",{className:"max-w-md bg-black/30 p-4 rounded-2xl border border-white/5 text-sm text-gray-400 font-medium italic leading-relaxed",children:['"',Z.reason,'"']})]},Z.firestoreId))}),T==="grid"&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-6",children:X.map(Z=>s.jsxs("div",{onClick:()=>xe(Z.firestoreId),className:`flex flex-col rounded-[2rem] border transition-all cursor-pointer group overflow-hidden ${G.has(Z.firestoreId)?"bg-indigo-500/10 border-indigo-500/40 shadow-2xl":"bg-gray-950/30 border-white/5 hover:border-white/20"}`,children:[s.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden",children:[s.jsx("img",{src:Z.data?.image_uris?.normal||`https://api.scryfall.com/cards/named?exact=${encodeURIComponent(Z.name)}&format=image`,alt:Z.name,className:"w-full h-full object-cover transition-transform group-hover:scale-110",loading:"lazy"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-transparent opacity-60"}),s.jsx("div",{className:`absolute top-4 right-4 w-8 h-8 rounded-xl border-2 flex items-center justify-center transition-all ${G.has(Z.firestoreId)?"bg-indigo-500 border-indigo-400 text-white":"bg-black/40 border-white/20 group-hover:border-white/40"}`,children:G.has(Z.firestoreId)&&s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[s.jsx("span",{className:"block text-lg font-black text-white uppercase italic tracking-tight line-clamp-1",children:Z.name}),s.jsxs("div",{className:"flex justify-between items-center mt-1",children:[s.jsx("span",{className:"text-[10px] font-black text-indigo-300 tracking-[0.2em] uppercase truncate max-w-[70%]",children:Z.type_line}),s.jsxs("span",{className:"text-xs font-mono text-indigo-400 font-bold bg-black/60 px-2 py-0.5 rounded-lg border border-white/10",children:[Z.rating,"/10"]})]})]})]}),s.jsx("div",{className:"p-4 flex-1 flex flex-col justify-between",children:s.jsxs("div",{className:"text-xs text-gray-400 font-medium italic leading-relaxed line-clamp-3",children:['"',Z.reason,'"']})})]},Z.firestoreId))}),T==="table"&&s.jsx("div",{className:"bg-gray-950/30 rounded-[2rem] border border-white/5 overflow-hidden",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-white/5 font-black text-[10px] uppercase tracking-[0.2em] text-gray-500",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 w-16",children:"Select"}),s.jsx("th",{className:"px-6 py-4",children:"Card Name"}),s.jsx("th",{className:"px-6 py-4",children:"Type"}),s.jsx("th",{className:"px-6 py-4 text-center",children:"Rating"}),s.jsx("th",{className:"px-6 py-4",children:"Reasoning"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:X.map(Z=>s.jsxs("tr",{onClick:()=>xe(Z.firestoreId),className:`hover:bg-white/5 cursor-pointer transition-colors ${G.has(Z.firestoreId)?"bg-indigo-500/5":""}`,children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${G.has(Z.firestoreId)?"bg-indigo-500 border-indigo-400 text-white":"border-white/10"}`,children:G.has(Z.firestoreId)&&s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"font-bold text-white uppercase italic tracking-tight",children:Z.name})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-[10px] font-black text-indigo-400 tracking-[0.1em] uppercase",children:Z.type_line})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:"font-mono text-indigo-400 font-bold bg-white/5 px-3 py-1 rounded-lg border border-white/5",children:Z.rating})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("span",{className:"text-xs text-gray-400 italic line-clamp-1",children:['"',Z.reason,'"']})})]},Z.firestoreId))})]})})]}),s.jsxs("div",{className:"p-8 bg-gray-950/40 backdrop-blur-3xl rounded-3xl border border-white/10 flex justify-between items-center shadow-2xl mx-4",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[10px] font-black text-indigo-400/60 uppercase tracking-[0.4em]",children:"Draft Progress"}),s.jsxs("span",{className:"text-3xl font-black text-white italic tracking-tighter uppercase",children:[G.size," Cards Selected"]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>_(sr.ANALYSIS),className:"px-8 py-3.5 bg-white/5 hover:bg-white/10 text-white font-black rounded-2xl border border-white/5 uppercase tracking-widest text-[11px] transition-all",children:"Re-Analyze"}),s.jsx("button",{onClick:()=>_(sr.DEPLOY),className:"px-10 py-3.5 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-2xl shadow-xl shadow-indigo-500/20 uppercase tracking-widest text-[11px] border border-white/10 transition-all",children:"Review & Deploy"})]})]})]})},M=()=>{const X=Array.from(G).map(Z=>V[Z]),re=async()=>{if(!k){O(!0);try{const Z=[],pe=new Map;x.forEach(fe=>{const Se=fe.scryfall_id||fe.data?.scryfall_id;Se&&!fe.deck_id&&pe.set(Se,(pe.get(Se)||0)+1)});for(const fe of X){const Se=fe.data||fe,ke=Se.scryfall_id||Se.id||(fe.isVirtual?null:fe.firestoreId);let Ve=!1;if(ke&&pe.has(ke)){const Le=pe.get(ke);Le>0&&(Ve=!0,pe.set(ke,Le-1))}if(Ve)Z.push({scryfall_id:ke,finish:"nonfoil"});else{const Le=fe.type_line&&fe.type_line.includes("Basic Land");if(f.is_mockup===!1&&!Le)throw new Error(`Cannot add unowned card "${fe.name}" to a Collection Deck.`);Z.push({scryfall_id:ke,name:fe.name,finish:"nonfoil",data:Se,count:1,is_wishlist:!Le})}}await Xe.post(`/decks/${a}/cards/batch`,{cards:Z}),u(`Successfully added ${Z.length} cards to ${f.name}!`,"success"),n(`/decks/${a}`)}catch(Z){console.error("Deployment failed:",Z),u("Failed to deploy cards. Please try again.","error")}finally{O(!1)}}};return s.jsxs("div",{className:"max-w-5xl mx-auto space-y-12 py-12",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h2",{className:"text-4xl font-black text-white italic tracking-tighter uppercase",children:"Final Deployment"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"Review your selected additions before applying them to your deck."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:X.map(Z=>s.jsxs("div",{className:"bg-gray-950/30 p-6 rounded-[2rem] border border-white/10 space-y-4",children:[s.jsx("span",{className:"font-black text-white uppercase italic text-lg truncate block",children:Z.name}),s.jsxs("div",{className:"text-xs text-gray-400 leading-relaxed italic",children:['"',Z.reason,'"']})]},Z.firestoreId))}),s.jsxs("div",{className:"flex gap-6 justify-center",children:[s.jsx("button",{onClick:()=>_(sr.ARCHITECT),className:"px-12 py-4 bg-gray-900 hover:bg-gray-800 text-white font-black rounded-2xl border border-white/5 uppercase tracking-widest text-xs transition-all",children:"Back to Architect"}),s.jsxs("button",{onClick:re,disabled:k,className:"px-16 py-4 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-2xl shadow-2xl shadow-indigo-500/40 uppercase tracking-widest text-xs border border-white/10 transition-all",children:['Apply to "',f?.name,'"']})]})]})};if(p)return s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx("div",{className:"animate-spin h-12 w-12 border-4 border-indigo-500 border-t-transparent rounded-full"})});const K=H(f?.commander)||H(f?.commander_partner);return s.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-200 font-sans relative flex flex-col pt-16",children:[s.jsxs("div",{className:"fixed inset-0 z-0 transition-all duration-1000 ease-in-out",style:{backgroundImage:`url(${K})`,backgroundSize:"cover",backgroundPosition:"center"},children:[s.jsx("div",{className:"absolute inset-0 bg-gray-950/60 backdrop-blur-[2px]"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-950/80 to-gray-950/40"})]}),s.jsxs("div",{className:"sticky top-0 z-50 px-6 py-4 flex justify-between items-center bg-gray-950 border-b border-white/5",children:[s.jsxs("button",{onClick:()=>n(`/decks/${a}`),className:"text-gray-500 hover:text-white flex items-center gap-2 group transition-all",children:[s.jsx("svg",{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),s.jsx("span",{className:"text-[11px] font-black uppercase tracking-widest",children:"Exit Wizard"})]}),s.jsx("div",{className:"flex gap-12",children:[1,2,3].map(X=>s.jsxs("div",{className:`flex items-center gap-3 transition-all ${b===X?"scale-110":"opacity-40"}`,children:[s.jsx("div",{className:`w-6 h-6 rounded-lg flex items-center justify-center text-[10px] font-black ${b>=X?"bg-indigo-500 text-white":"bg-gray-800 text-gray-600"}`,children:X}),s.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:X===1?"Analysis":X===2?"Architect":"Deploy"})]},X))}),s.jsx("div",{className:"w-32"})," "]}),s.jsxs("main",{className:"flex-1 relative z-10 px-4 max-w-7xl mx-auto w-full",children:[b===sr.ANALYSIS&&Ee(),b===sr.ARCHITECT&&Oe(),b===sr.DEPLOY&&M()]}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .animate-pulse-slow { animation: pulse 8s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
                @keyframes pulse { 0%, 100% { opacity: 0.2; transform: scale(1.05); } 50% { opacity: 0.4; transform: scale(1); } }
                .custom-scrollbar::-webkit-scrollbar { width: 6px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(99, 102, 241, 0.2); border-radius: 10px; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(99, 102, 241, 0.4); }
            `}})]})},cS=({onNext:a})=>s.jsxs("div",{className:"max-w-2xl w-full text-center space-y-8 animate-fade-in-up",children:[s.jsx("div",{className:"w-24 h-24 mx-auto bg-indigo-500/20 rounded-full flex items-center justify-center ring-1 ring-indigo-500/50 shadow-[0_0_30px_rgba(99,102,241,0.3)]",children:s.jsx("svg",{className:"w-12 h-12 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-4xl font-extrabold text-white mb-4",children:"Welcome to MTG-Forge"}),s.jsxs("p",{className:"text-xl text-gray-300 leading-relaxed",children:["Your ultimate companion for deck building, collection management, and magical optimization.",s.jsx("br",{}),"Let's get everything set up in just a few clicks."]})]}),s.jsx("button",{onClick:a,className:"px-8 py-4 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold text-lg shadow-lg hover:shadow-indigo-500/25 transition-all transform hover:-translate-y-1",children:"Let's Go"})]}),uS=({onNext:a})=>{const[n,i]=w.useState("alpha"),o=[{id:"scout",name:"Scout",price:"Free",features:["Collection Management","Basic Deck Stats","Limited AI Suggestions"],disabled:!0,tag:"Coming Soon"},{id:"alpha",name:"Alpha Tester",price:"$0/mo",originalPrice:"Priceless",features:["Unlimited Collections","Full AI Architect Access","Priority Support","Founder Badge"],disabled:!1,recommended:!0,tag:"Limited Time"},{id:"planeswalker",name:"Planeswalker",price:"$TBD/mo",features:["Pro Analytics","Meta Game Insights","Tournament Mode","Team Features"],disabled:!0,tag:"Coming Soon"}];return s.jsxs("div",{className:"max-w-5xl w-full space-y-8 animate-fade-in-up",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-3",children:"Choose Your Path"}),s.jsx("p",{className:"text-gray-400 max-w-lg mx-auto",children:"Select your access level. During our Alpha phase, all features are unlocked for testers."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map(u=>s.jsxs("div",{onClick:()=>!u.disabled&&i(u.id),className:`relative rounded-2xl border p-6 transition-all duration-300 flex flex-col ${u.disabled?"bg-gray-800/20 border-gray-800 opacity-60 cursor-not-allowed grayscale-[0.5]":n===u.id?"bg-indigo-900/40 border-indigo-500 shadow-[0_0_30px_rgba(99,102,241,0.2)] transform scale-105 z-10":"bg-gray-800/40 border-gray-700 hover:border-gray-600 cursor-pointer hover:bg-gray-800/60"}`,children:[u.recommended&&s.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-lg",children:"Recommended"}),u.tag&&!u.recommended&&s.jsx("div",{className:"absolute top-4 right-4 text-xs font-mono text-gray-500 border border-gray-700 px-2 py-1 rounded",children:u.tag}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:`text-xl font-bold mb-1 ${u.id==="alpha"?"text-amber-400":"text-white"}`,children:u.name}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsx("span",{className:"text-3xl font-extrabold text-white",children:u.price}),u.originalPrice&&s.jsx("span",{className:"text-sm text-gray-500 line-through decoration-red-500/50",children:u.originalPrice})]})]}),s.jsx("ul",{className:"space-y-3 mb-8 flex-grow",children:u.features.map((f,m)=>s.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[s.jsx("svg",{className:`w-5 h-5 flex-shrink-0 ${u.disabled?"text-gray-600":"text-green-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f]},m))}),s.jsx("button",{disabled:u.disabled,className:`w-full py-3 rounded-xl font-bold transition-all ${u.disabled?"bg-gray-800 text-gray-500 cursor-not-allowed":n===u.id?"bg-indigo-600 hover:bg-indigo-500 text-white shadow-lg":"bg-gray-700 hover:bg-gray-600 text-white"}`,children:u.disabled?"Unavailable":n===u.id?"Selected":"Select Plan"})]},u.id))}),s.jsx("div",{className:"flex justify-center pt-8",children:s.jsx("button",{onClick:()=>a(n),className:"px-12 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded-xl font-bold text-lg shadow-lg hover:shadow-indigo-500/30 transition-all transform hover:-translate-y-1",children:"Confirm Selection"})})]})},dS=({onNext:a})=>{const[n,i]=w.useState("");return s.jsxs("div",{className:"max-w-3xl w-full space-y-8 animate-fade-in-up",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 mx-auto bg-purple-500/20 rounded-full flex items-center justify-center mb-6 ring-1 ring-purple-500/50",children:s.jsx("svg",{className:"w-10 h-10 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),s.jsx("h2",{className:"text-3xl font-bold text-white mb-3",children:"Enable AI Architect"}),s.jsx("p",{className:"text-gray-400 max-w-lg mx-auto",children:"Our AI analyzes your cards to suggest synergies, optimal mana curves, and complete deck strategies."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700",children:[s.jsxs("h3",{className:"font-bold text-lg text-white mb-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-green-400",children:""})," Automated Building"]}),s.jsx("p",{className:"text-sm text-gray-400",children:"Generate entire commander decks from a single prompt or theme using your own collection."})]}),s.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700",children:[s.jsxs("h3",{className:"font-bold text-lg text-white mb-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-green-400",children:""})," Synergy Scouting"]}),s.jsx("p",{className:"text-sm text-gray-400",children:"Find hidden gems in your binder that perfectly match your commander's strategy."})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 p-4 rounded-xl text-left",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"text-2xl",children:""}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-blue-200 mb-1",children:"Why do I need my own API Key?"}),s.jsx("p",{className:"text-sm text-blue-100/80 leading-relaxed",children:"MTG-Forge connects directly to Google's Gemini AI to power its deck architect features. To ensure usage, privacy, and zero rampingsubscription fees, we ask users to provide their own free API key. Your key is stored locally on your device and is never shared with us."}),s.jsxs("div",{className:"mt-4 p-3 bg-indigo-900/40 border border-indigo-500/30 rounded-lg",children:[s.jsxs("h4",{className:"font-bold text-indigo-200 mb-1 flex items-center gap-2",children:[s.jsx("span",{className:"text-amber-400",children:""})," AI is Experimental"]}),s.jsxs("p",{className:"text-sm text-gray-300",children:["Our AI Architect is a powerful assistant, but ",s.jsx("strong",{children:"YOU"})," are the true deck builder. AI can suggest amazing synergies, but it can also make mistakes or suggest suboptimal cards. Always review and refine the suggestions to match your personal playstyle and meta."]})]})]})]})}),s.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700 space-y-4 text-left",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Enter your Gemini API Key"}),s.jsx("input",{type:"password",value:n,onChange:o=>i(o.target.value),placeholder:"AIzaSy...",className:"w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors"}),s.jsxs("div",{className:"text-sm text-gray-400",children:["Don't have a key? ",s.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-purple-400 hover:text-purple-300 underline",children:"Get a free key from Google AI Studio "})]})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 pt-4",children:[s.jsx("button",{onClick:()=>a(n),disabled:!n,className:`nav-button px-10 py-3 rounded-lg font-bold transition-all shadow-lg transform hover:-translate-y-0.5 ${n?"bg-purple-600 hover:bg-purple-500 text-white hover:shadow-purple-500/25":"bg-gray-700 text-gray-400 cursor-not-allowed shadow-none"}`,children:"Save & Enable AI"}),s.jsx("button",{onClick:()=>a(null),className:"text-gray-500 text-sm hover:text-gray-300 underline transition-colors",children:"Skip (Features Disabled)"})]})]})},hS=({onNext:a})=>{const[n,i]=As.useState(0),o=[{title:"Manage Your Collection",desc:"Import cards, track values, and organize your entire library in one place.",icon:s.jsx("svg",{className:"w-16 h-16 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})},{title:"Build & Analyze Decks",desc:"Use the Architect Wizard to construct powerful decks with real-time stats and mana analysis.",icon:s.jsx("svg",{className:"w-16 h-16 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{title:"Wishlist & Tracking",desc:"Keep track of cards you need and plan your next purchases directly from deck builds.",icon:s.jsx("svg",{className:"w-16 h-16 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}],u=o[n],f=()=>{n<o.length-1?i(n+1):a()};return s.jsxs("div",{className:"max-w-2xl w-full text-center space-y-10 animate-fade-in",children:[s.jsx("div",{className:"h-64 flex flex-col items-center justify-center bg-gray-800/30 rounded-2xl border border-gray-700/50 p-8",children:s.jsxs("div",{className:"animate-fade-in-up flex flex-col items-center",children:[s.jsx("div",{className:"mb-6 opacity-90",children:u.icon}),s.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:u.title}),s.jsx("p",{className:"text-lg text-gray-400 max-w-md",children:u.desc})]},n)}),s.jsxs("div",{className:"flex flex-col items-center gap-6",children:[s.jsx("div",{className:"flex gap-2",children:o.map((m,p)=>s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${p===n?"w-8 bg-indigo-500":"w-2 bg-gray-700"}`},p))}),s.jsx("button",{onClick:f,className:"px-10 py-3 bg-white text-gray-900 hover:bg-gray-100 rounded-lg font-bold transition-colors w-full sm:w-auto",children:n===o.length-1?"Finish Setup":"Next Feature"})]})]})},fS=({onNext:a})=>{const{userProfile:n}=St(),[i,o]=w.useState("selection"),[u,f]=w.useState({name:"",type:"",personality:""}),[m,p]=w.useState([]),[x,b]=w.useState(""),[_,j]=w.useState(!1),S=w.useRef(null),U={name:"Oracle",type:"Mystic Construct",personality:"Wise, Efficient, Slightly Mystical"};w.useEffect(()=>{S.current?.scrollIntoView({behavior:"smooth"})},[m]);const E=()=>{a(U)},k=async()=>{o("forge"),j(!0),p([{role:"model",content:"Booting Forge System... I am the construct builder. Let's create your companion. First, does your helper have a name, or shall we define their personality first?"}]),j(!1)},O=async()=>{if(!x.trim())return;const G={role:"user",content:x},te=[...m,G];p(te),b(""),j(!0);try{const ce=n?.settings?.geminiApiKey;if(!ce)throw new Error("API Key missing.");const se=await Hn.forgeHelperChat(ce,te,u);f(T=>({...T,...se.updatedDraft})),p(T=>[...T,{role:"model",content:se.aiResponse}])}catch(ce){console.error("Forge Error:",ce),p(se=>[...se,{role:"model",content:"System Glitch. Please repeat."}])}finally{j(!1)}},V=()=>{const G={name:u.name||"Companion",type:u.type||"Construct",personality:u.personality||"Helpful"};a(G)},F=G=>{G.key==="Enter"&&!G.shiftKey&&(G.preventDefault(),O())};return s.jsxs("div",{className:"w-full max-w-5xl animate-fade-in mx-auto",children:[i==="selection"&&s.jsxs("div",{className:"text-center space-y-8",children:[s.jsx("div",{className:"w-24 h-24 mx-auto bg-amber-500/20 rounded-full flex items-center justify-center ring-1 ring-amber-500/50 shadow-[0_0_30px_rgba(245,158,11,0.3)]",children:s.jsx("svg",{className:"w-12 h-12 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Forge Your Helper"}),s.jsx("p",{className:"text-gray-300 max-w-2xl mx-auto",children:'Who will guide you through the multiverse? You can use our standard "Oracle" construct, or forge a completely custom AI companion with its own name and personality.'})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-3xl mx-auto",children:[s.jsxs("button",{onClick:E,className:"p-6 bg-gray-800 hover:bg-gray-750 border border-gray-700 hover:border-gray-500 rounded-xl transition-all group text-left",children:[s.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-amber-400",children:"Default: The Oracle"}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"A wise, mystical construct focused on efficient and accurate advice."}),s.jsx("span",{className:"text-xs font-bold uppercase text-gray-500 group-hover:text-white tracking-wider",children:"Select Oracle "})]}),s.jsxs("button",{onClick:k,className:"p-6 bg-amber-900/20 hover:bg-amber-900/30 border border-amber-500/30 hover:border-amber-500 rounded-xl transition-all group text-left relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-50",children:s.jsx("svg",{className:"w-16 h-16 text-amber-500",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-amber-400",children:"Forge Custom Helper"}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Create a unique companion. Define their name, species, and personality via chat."}),s.jsx("span",{className:"text-xs font-bold uppercase text-amber-500 group-hover:text-white tracking-wider",children:"Start Forging "})]})]})]})]}),i==="forge"&&s.jsxs("div",{className:"flex flex-col md:flex-row h-[600px] border border-gray-700 rounded-2xl overflow-hidden bg-gray-900",children:[s.jsxs("div",{className:"flex-1 flex flex-col border-r border-gray-800",children:[s.jsx("div",{className:"p-4 border-b border-gray-800 bg-gray-800/50 flex justify-between items-center",children:s.jsx("span",{className:"font-mono text-amber-400 text-sm",children:"SYSTEM: FORGE PROTOCOL ENGAGED"})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[m.map((G,te)=>s.jsx("div",{className:`flex ${G.role==="user"?"justify-end":"justify-start"}`,children:s.jsx("div",{className:`max-w-[80%] p-3 rounded-lg text-sm ${G.role==="user"?"bg-amber-600 text-white":"bg-gray-800 text-gray-300"}`,children:G.content})},te)),_&&s.jsx("div",{className:"text-gray-500 text-xs animate-pulse ml-2",children:" Processing..."}),s.jsx("div",{ref:S})]}),s.jsx("div",{className:"p-4 border-t border-gray-800 bg-gray-900",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:x,onChange:G=>b(G.target.value),onKeyDown:F,placeholder:"Ex: Name him 'Gobbo', make him a goblin...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-amber-500 focus:outline-none",disabled:_}),s.jsx("button",{onClick:O,disabled:_||!x.trim(),className:"bg-amber-600 hover:bg-amber-500 text-white px-4 py-2 rounded-lg font-bold",children:"Send"})]})})]}),s.jsxs("div",{className:"w-full md:w-80 bg-gray-950 p-6 flex flex-col",children:[s.jsx("h3",{className:"text-gray-400 font-bold uppercase tracking-wider text-xs mb-6",children:"Blueprint Status"}),s.jsxs("div",{className:"space-y-6 flex-1",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"DESIGNATION (NAME)"}),s.jsx("div",{className:`text-lg font-bold ${u.name?"text-amber-400":"text-gray-700 italic"}`,children:u.name||"Undefined"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"CLASSIFICATION (TYPE)"}),s.jsx("div",{className:`text-sm font-medium ${u.type?"text-white":"text-gray-700 italic"}`,children:u.type||"Undefined"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"PARAMETERS (PERSONALITY)"}),s.jsx("div",{className:`text-sm font-medium ${u.personality?"text-white":"text-gray-700 italic"}`,children:u.personality||"Undefined"})]})]}),s.jsx("button",{onClick:V,className:"w-full py-4 bg-green-600 hover:bg-green-500 text-white font-bold rounded-lg shadow-lg hover:shadow-green-500/20 transition-all mt-4",children:"Complete Forge Protocol"})]})]})]})},mS=()=>{const a=Is(),{userProfile:n,updateSettings:i,refreshUserProfile:o}=St(),[u,f]=w.useState(n?.settings?.onboarding_step||0),[m,p]=w.useState(!1),x=async()=>{const O=u+1;f(O),await i({onboarding_step:O})},b=async O=>{await i({subscription_tier:"alpha_tester"}),x()},_=async O=>{const V={ai_enabled:!!O};O&&(V.geminiApiKey=O),await i(V),x()},j=async O=>{await i({helper:O}),x()},S=()=>{p(!0)},U=async O=>{await i({playstyle:O}),await o(),p(!1),x()},E=()=>{x()},k=async()=>{await i({onboarding_complete:!0,onboarding_step:6}),a("/dashboard")};return s.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 z-0",children:[s.jsx("img",{src:"/MTG-Forge_Logo_Background_80.png",alt:"Background",className:"w-full h-full object-cover opacity-30"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900 via-gray-900/90 to-black/80"})]}),s.jsxs("div",{className:"relative z-10 flex-grow flex items-center justify-center p-4",children:[u===0&&s.jsx(cS,{onNext:x}),u===1&&s.jsx(uS,{onNext:b}),u===2&&s.jsx(dS,{onNext:_}),u===3&&s.jsx(fS,{onNext:j}),u===4&&s.jsxs("div",{className:"text-center max-w-2xl animate-fade-in-up space-y-8",children:[s.jsx("div",{className:"w-24 h-24 mx-auto bg-green-500/20 rounded-full flex items-center justify-center ring-1 ring-green-500/50 shadow-[0_0_30px_rgba(34,197,94,0.3)]",children:s.jsx("svg",{className:"w-12 h-12 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Define Your Playstyle"}),s.jsxs("p",{className:"text-gray-300",children:["Let us get to know what kind of mage you are.",s.jsx("br",{}),"We'll tailor card suggestions and deck strategies to your personal taste."]})]}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsx("button",{onClick:S,className:"px-8 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold transition-all shadow-lg hover:shadow-indigo-500/25",children:"Start Quiz"}),s.jsx("button",{onClick:E,className:"px-8 py-3 bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white rounded-xl font-medium transition-colors border border-gray-700",children:"Skip for Now"})]})]}),u===5&&s.jsx(hS,{onNext:k})]}),s.jsx("div",{className:"relative z-10 py-8 flex justify-center gap-3",children:[0,1,2,3,4,5].map(O=>s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${O===u?"w-8 bg-indigo-500":"w-2 bg-gray-700"}`},O))}),s.jsx(hb,{isOpen:m,onClose:()=>p(!1),onComplete:U})]})},gS=()=>s.jsxs("div",{className:"min-h-screen bg-gray-900 pb-20",children:[s.jsxs("div",{className:"relative py-20 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-indigo-900/10"}),s.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto px-6 text-center",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white mb-6 tracking-tight",children:"About The Forge"}),s.jsx("p",{className:"text-xl text-gray-400 leading-relaxed",children:"Built by players, for players. The Forge is designed to be the ultimate companion for Magic: The Gathering deck building and collection management."})]})]}),s.jsxs("div",{className:"max-w-4xl mx-auto px-6 space-y-16",children:[s.jsxs("section",{className:"space-y-6 animate-fade-in-up",children:[s.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[s.jsx("span",{className:"w-8 h-1 bg-amber-500 rounded-full"}),"The Human Factor"]}),s.jsxs("div",{className:"bg-gray-800/50 p-8 rounded-3xl border border-amber-500/10 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 pointer-events-none",children:s.jsx("svg",{className:"w-64 h-64 text-amber-500",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),s.jsxs("div",{className:"relative z-10 space-y-4",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"AI is a Tool, Not a Replacement"}),s.jsxs("div",{className:"space-y-4 text-gray-300 leading-relaxed",children:[s.jsx("p",{children:"At The Forge, we believe AI can be an incredible creative partner. It can scan thousands of cards in seconds, find obscure combos, and suggest perfectly curved land bases."}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-amber-400",children:"However, AI is still a work in progress."}),' It can hallucinate interactions, suggest banned cards, or miss the subtle "fun factor" that makes a Commander deck truly special.']}),s.jsx("p",{children:"We built these tools to get you 80% of the way there. The final 20%the soul of the deckcomes from you. Use our suggestions as a starting point, but trust your intuition and knowledge to build something truly unique."})]})]})]})]}),s.jsxs("section",{className:"space-y-8 animate-fade-in-up",children:[s.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[s.jsx("span",{className:"w-8 h-1 bg-indigo-500 rounded-full"}),"Powered By"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("a",{href:"https://scryfall.com",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-800/50 p-6 rounded-2xl border border-gray-700 hover:border-indigo-500 hover:bg-gray-800 transition-all group",children:[s.jsx("div",{className:"text-indigo-400 mb-4 group-hover:scale-110 transition-transform origin-left",children:s.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),s.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Scryfall"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"The best MTG card database in the world. All card data and imagery is provided by their incredible API."})]}),s.jsxs("a",{href:"https://tcgplayer.com",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-800/50 p-6 rounded-2xl border border-gray-700 hover:border-green-500 hover:bg-gray-800 transition-all group",children:[s.jsx("div",{className:"text-green-400 mb-4 group-hover:scale-110 transition-transform origin-left",children:s.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"TCGPlayer"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Real-time pricing data for card values. Keeping your collection valuation accurate and up to date."})]}),s.jsxs("a",{href:"https://magic.wizards.com",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-800/50 p-6 rounded-2xl border border-gray-700 hover:border-orange-500 hover:bg-gray-800 transition-all group",children:[s.jsx("div",{className:"text-orange-400 mb-4 group-hover:scale-110 transition-transform origin-left",children:s.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),s.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Wizards of the Coast"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Creators of Magic: The Gathering. All mana symbols, card names, and art are copyright WotC."})]})]})]}),s.jsxs("section",{className:"space-y-8 animate-fade-in-up delay-100",children:[s.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[s.jsx("span",{className:"w-8 h-1 bg-purple-500 rounded-full"}),"Get in Touch"]}),s.jsx("div",{className:"bg-gradient-to-br from-indigo-900/20 to-purple-900/20 p-8 rounded-3xl border border-white/5 relative overflow-hidden",children:s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-8",children:[s.jsxs("div",{className:"space-y-4 text-center md:text-left",children:[s.jsx("h3",{className:"text-2xl font-bold text-white",children:"Join the Community"}),s.jsx("p",{className:"text-gray-400 max-w-md",children:"Have a feature request? Found a bug? Or just want to show off your latest brew? Come chat with us on Discord."})]}),s.jsxs("a",{href:"https://discord.gg/your-discord-link",target:"_blank",rel:"noopener noreferrer",className:"px-8 py-4 bg-[#5865F2] hover:bg-[#4752C4] text-white font-bold rounded-xl transition-all shadow-lg hover:shadow-indigo-500/25 flex items-center gap-3 transform hover:-translate-y-1",children:[s.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.211.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.419 0 1.334-.956 2.419-2.157 2.419zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.419 0 1.334-.946 2.419-2.157 2.419z"})}),"Join Discord"]})]})})]}),s.jsx("div",{className:"text-center text-gray-600 text-xs pt-20",children:s.jsx("p",{children:"The Forge is unofficial Fan Content permitted under the Fan Content Policy. Not approved/endorsed by Wizards. Portions of the materials used are property of Wizards of the Coast. Wizards of the Coast LLC."})})]})]}),pS=()=>{const{userProfile:a}=St(),[n,i]=w.useState(!1),[o,u]=w.useState(!1),f=a?.settings?.helper,m=f?.name||"MTG Forge",[p,x]=w.useState([]),[b,_]=w.useState(""),[j,S]=w.useState(!1),[U,E]=w.useState(!1),k=w.useRef(null),O=()=>{k.current?.scrollIntoView({behavior:"smooth"})};w.useEffect(()=>{O()},[p]),w.useEffect(()=>{if(!n)return;(async()=>{const se=a?.settings?.geminiApiKey;if(!se||U){!se&&p.length===0&&x([{role:"model",content:'<p class="text-gray-300">Please add your Gemini API Key in Settings to enable the chat.</p>'}]);return}if(E(!0),!(p.length>0))try{const T=`
                    You are about to have a conversation with a user.
                    your name is ${m}.
                    Your personality is: ${f?.personality||"Knowledgeable and friendly"}.
                    It is not their first time working with you, interact with them appropriately.
                    Use emojis. 
                `,C=await Hn.sendMessage(se,[],T,"",f);x([{role:"model",content:C}])}catch(T){console.error("Intro fetch failed",T),x([{role:"model",content:`<p>Greetings. I am ${m}. How may I assist?</p>`}])}})()},[n,a?.settings?.geminiApiKey,m,U]);const V=a?.settings?.playstyle,F=V?`
User's Playstyle Profile:
- Archetypes: ${V.archetypes?.join(", ")||"Unknown"}
- Summary: ${V.summary||"Unknown"}
- Combat Preference: ${V.scores?.aggression>50?"Aggressive":"Defensive"}
- Interaction Level: ${V.scores?.interaction>50?"High":"Low"}
    `.trim():"",G=async ce=>{if(ce.preventDefault(),!b.trim()||j)return;const se=b.trim();_(""),x(T=>[...T,{role:"user",content:se}]),S(!0);try{const T=a?.settings?.geminiApiKey;if(!T){x(A=>[...A,{role:"model",content:'<div class="p-3 bg-red-900/30 border border-red-700 rounded text-red-200">Please add your Gemini API Key in <a href="/settings" class="underline font-bold">Settings</a> to use the chat.</div>'}]);return}const C=p.map(A=>({role:A.role,content:A.content})),D=await Hn.sendMessage(T,C,se,F,f);x(A=>[...A,{role:"model",content:D}])}catch(T){console.error(T),x(C=>[...C,{role:"model",content:`<div class="p-3 bg-red-900/30 border border-red-700 rounded text-red-200">Error: ${T.message}</div>`}])}finally{S(!1)}},te=o?"fixed inset-0 top-16 z-40":`fixed bottom-0 right-0 z-50 transition-all duration-300 ${n?"":"w-16 h-16 mb-20 mr-4 md:mb-6 md:mr-6"}`;return s.jsxs("div",{className:`${te} ${!o&&n?"w-full md:w-96 h-[600px] mb-0 mr-0":""}`,children:[!n&&s.jsx("button",{onClick:()=>i(!0),className:"w-16 h-16 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-full shadow-lg shadow-purple-500/30 flex items-center justify-center hover:scale-110 transition-transform animate-bounce-slow",children:s.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),n&&s.jsxs("div",{className:`flex flex-col h-full bg-gray-800 border-t border-l border-gray-700 shadow-2xl overflow-hidden ${o?"w-full h-full":"rounded-tl-2xl md:rounded-tr-2xl md:border-r"}`,children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-900 border-b border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),s.jsx("span",{className:"font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600",children:m})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>u(!o),className:"text-gray-400 hover:text-white p-1 hover:bg-gray-800 rounded transition-colors",title:o?"Collapse":"Expand",children:o?s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 14h6m-6 0v6M20 10h-6m6 0V4"})}):s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M20 8V4m0 0h-4M4 16v4m0 0h4M20 16v4m0 0h-4"})})}),s.jsx("button",{onClick:()=>{i(!1),u(!1)},className:"text-gray-400 hover:text-white",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-800/95 backdrop-blur",children:[p.length===0&&!j?s.jsxs("div",{className:"flex justify-center items-center h-full text-gray-500 italic",children:["Summoning ",m,"..."]}):p.map((ce,se)=>s.jsx("div",{className:`flex ${ce.role==="user"?"justify-end":"justify-start"}`,children:s.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl ${ce.role==="user"?"bg-indigo-600 text-white rounded-br-none":"bg-gray-700 text-gray-200 rounded-bl-none"} shadow-md`,children:ce.role==="user"?ce.content:s.jsx("div",{dangerouslySetInnerHTML:{__html:ce.content}})})},se)),j&&s.jsx("div",{className:"flex justify-start",children:s.jsxs("div",{className:"bg-gray-700 rounded-2xl rounded-bl-none p-3 flex gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-75"}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-150"})]})}),s.jsx("div",{ref:k})]}),s.jsx("form",{onSubmit:G,className:"p-4 bg-gray-900 border-t border-gray-700",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:b,onChange:ce=>_(ce.target.value),placeholder:`Ask ${m}...`,className:"flex-1 bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none"}),s.jsx("button",{type:"submit",disabled:j,className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-2 rounded-lg font-bold hover:shadow-lg hover:shadow-indigo-500/20 transition-all disabled:opacity-50",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]})},xS=()=>{const{isOpen:a,selectedCard:n,closeCardModal:i}=If(),{cards:o,removeCard:u,updateCard:f}=pr(),{addToast:m}=is(),[p,x]=w.useState(!1),[b,_]=w.useState(!1),[j,S]=w.useState({quantity:1,finish:"nonfoil",deckId:""}),[U,E]=w.useState([]);if(w.useEffect(()=>{a&&n&&(x(!1),_(!1),S({quantity:n.count||n.quantity||1,finish:n.finish||"nonfoil",deckId:n.deckId||n.deck_id||""}),Xe.get("/decks").then(E).catch(B=>console.error("Failed to load decks",B)))},[a,n]),!a||!n)return null;const k=n.data||n,O=k.card_faces&&k.card_faces.length>1,G=(B=>O?k.card_faces[B]:k)(p?1:0),te=B=>B.image_uris?.normal||B.image_uris?.large||null,ce=B=>B.image_uris?.art_crop||B.image_uris?.large||B.image_uris?.normal||null,se=O?te(k.card_faces[0]):k.image_uris?.normal||k.image_uris?.large||n.image_uri,T=O?te(k.card_faces[1]):null,C=O?ce(k.card_faces[0]):k.image_uris?.art_crop||k.image_uris?.large||n.image_uri,D=O?ce(k.card_faces[1]):null,A=p?T:se,L=(p?D:C)||"https://placehold.co/1000x800?text=No+Art",H=B=>B?B.replace(/\{/g,"").replace(/\}/g," "):"",I=(B,ie)=>{const xe={legal:"bg-green-600 text-white border-green-700",not_legal:"bg-gray-700 text-gray-400 border-gray-600",banned:"bg-red-600 text-white border-red-700",restricted:"bg-yellow-600 text-white border-yellow-700"},Ee=xe[ie]||xe.not_legal;return s.jsx("div",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase border ${Ee} flex justify-center items-center shadow-sm`,children:s.jsx("span",{children:B})},B)},Me=async()=>{if(window.confirm(`Are you sure you want to delete ${n.name} from your collection?`))try{await u(n.id||n.firestoreId),m("Card deleted","success"),i()}catch(B){console.error(B),m("Failed to delete card","error")}},De=async()=>{try{const B={count:parseInt(j.quantity),finish:j.finish,deck_id:j.deckId?parseInt(j.deckId):null};await f(n.id||n.firestoreId,B),m("Card details updated","success"),_(!1)}catch(B){console.error(B),m("Failed to update details","error")}};return s.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center overflow-hidden animate-fade-in",role:"dialog",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity",onClick:i}),s.jsxs("div",{className:"relative z-10 w-full max-w-6xl h-full md:h-[90vh] max-h-[90vh] rounded-2xl shadow-2xl flex flex-col md:flex-row overflow-y-auto md:overflow-hidden bg-gray-900/50 border border-gray-700",children:[s.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden rounded-2xl",children:[s.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-700 ease-in-out transform scale-110 opacity-100",style:{backgroundImage:`url('${L}')`}}),s.jsx("div",{className:"absolute inset-0 bg-black/40"})]}),s.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-50 p-2 bg-black/30 hover:bg-black/60 rounded-full text-white/70 hover:text-white transition-colors backdrop-blur-md",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsxs("div",{className:"w-full md:w-1/2 lg:w-5/12 p-8 flex flex-col items-center justify-center relative shrink-0 z-10",children:[s.jsxs("div",{className:"relative w-full max-w-xs md:max-w-md aspect-[2.5/3.5] perspective-1000 transition-transform duration-500",children:[s.jsx("img",{src:A||"https://placehold.co/250x350?text=No+Image",alt:n.name,className:"w-full h-full object-contain drop-shadow-2xl rounded-xl shadow-black/50"}),O&&s.jsx("button",{onClick:()=>x(!p),className:"absolute top-4 right-4 bg-black/60 hover:bg-indigo-600 text-white p-3 rounded-full shadow-lg border border-white/20 hover:border-indigo-400 transition-all group backdrop-blur-md",title:"Flip Card",children:s.jsx("svg",{className:`w-6 h-6 transform transition-transform duration-500 ${p?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),k.artist&&s.jsxs("div",{className:"mt-4 text-white/80 text-xs flex items-center gap-1 bg-black/30 px-3 py-1 rounded-full backdrop-blur-sm border border-white/10",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Illustrated by ",s.jsx("span",{className:"font-medium",children:k.artist})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col md:h-full bg-gray-900/60 backdrop-blur-xl min-h-0 z-10 border-l border-white/10",children:[s.jsxs("div",{className:"p-6 border-b border-gray-700 bg-gray-900/50 shrink-0 relative group",children:[s.jsx("button",{onClick:()=>_(!b),className:`absolute top-6 right-16 p-2 rounded-full transition-all ${b?"text-indigo-400 bg-indigo-500/20":"text-gray-500 hover:text-white hover:bg-gray-700"}`,title:b?"Cancel Editing":"Edit Card Details",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),s.jsx("h2",{className:"text-3xl font-bold text-white mb-1 pr-10",children:k.name}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-gray-400 text-sm mt-2",children:[s.jsx("span",{className:"font-medium text-gray-300",children:G.type_line}),G.mana_cost&&s.jsx("span",{className:"bg-gray-800 px-2 py-0.5 rounded border border-gray-700 text-gray-200 font-mono tracking-wider",children:H(G.mana_cost)}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-indigo-400 font-bold",children:k.set_name||k.set?.toUpperCase()}),s.jsx("span",{className:"text-gray-600",children:""}),s.jsx("span",{className:"capitalize",children:k.rarity}),s.jsx("span",{className:"text-gray-600",children:""}),s.jsxs("span",{children:["#",k.collector_number]})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-visible md:overflow-y-auto p-6 space-y-8 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-transparent",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Gameplay & Rules"]}),s.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-5 border border-gray-700/50 shadow-inner",children:[G.oracle_text?s.jsx("div",{className:"text-gray-200 whitespace-pre-wrap font-serif leading-relaxed text-lg",children:G.oracle_text.split(`
`).map((B,ie)=>s.jsx("p",{className:"mb-2 last:mb-0",children:B},ie))}):s.jsx("span",{className:"text-gray-500 italic",children:"No rules text."}),G.flavor_text&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700/50 text-gray-400 italic font-serif text-sm",children:['"',G.flavor_text,'"']})]}),(G.power||G.loyalty)&&s.jsx("div",{className:"flex justify-end",children:s.jsx("div",{className:"bg-gray-800 border border-gray-600 px-4 py-2 rounded-lg text-xl font-bold text-white shadow-lg",children:G.power?`${G.power} / ${G.toughness}`:`Loyalty: ${G.loyalty}`})})]}),k.legalities&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"Legalities"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[I("Commander",k.legalities.commander),I("Standard",k.legalities.standard),I("Modern",k.legalities.modern),I("Pauper",k.legalities.pauper),I("Legacy",k.legalities.legacy),I("Vintage",k.legalities.vintage)]})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-700/50",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Status & Ownership ",b&&s.jsx("span",{className:"text-indigo-400 text-[10px] ml-2 font-normal animate-pulse",children:"(Editing)"})]}),n.is_wishlist&&!b&&s.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/30 rounded-lg p-3 flex items-center gap-3 animate-pulse",children:[s.jsx("div",{className:"p-2 bg-orange-500 rounded-full text-white",children:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-orange-400 font-black text-xs uppercase tracking-wider",children:"In Wishlist"}),s.jsx("div",{className:"text-gray-400 text-[10px]",children:"This card is on your want list."})]})]}),(()=>{const B=k.id,ie=o.filter(M=>M.scryfall_id===B||M.scryfallId===B||M.id===B),xe=ie.filter(M=>!M.is_wishlist&&M.finish==="nonfoil").reduce((M,K)=>M+(K.count||1),0),Ee=ie.filter(M=>!M.is_wishlist&&M.finish==="foil").reduce((M,K)=>M+(K.count||1),0),Oe=ie.filter(M=>M.is_wishlist).reduce((M,K)=>M+(K.count||1),0);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:`p-2.5 rounded-xl border transition-all ${xe>0?"bg-indigo-500/10 border-indigo-500/30":"bg-gray-800/20 border-gray-700/30 opacity-40"}`,children:[s.jsx("div",{className:"text-[10px] font-black uppercase tracking-tighter text-gray-400 mb-0.5",children:"Normal"}),s.jsx("div",{className:"text-xl font-black text-white",children:xe}),s.jsx("div",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Owned"})]}),s.jsxs("div",{className:`p-2.5 rounded-xl border transition-all ${Ee>0?"bg-purple-500/10 border-purple-500/30":"bg-gray-800/20 border-gray-700/30 opacity-40"}`,children:[s.jsx("div",{className:"text-[10px] font-black uppercase tracking-tighter text-gray-400 mb-0.5",children:"Foil"}),s.jsx("div",{className:"text-xl font-black text-indigo-400",children:Ee}),s.jsx("div",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Owned"})]}),s.jsxs("div",{className:`p-2.5 rounded-xl border transition-all ${Oe>0?"bg-orange-500/10 border-orange-500/30":"bg-gray-800/20 border-gray-700/30 opacity-40"}`,children:[s.jsx("div",{className:"text-[10px] font-black uppercase tracking-tighter text-gray-400 mb-0.5",children:"Wishlist"}),s.jsx("div",{className:"text-xl font-black text-orange-400",children:Oe}),s.jsx("div",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Wanted"})]})]}),(b||n.firestoreId||n.firestore_id)&&s.jsxs("div",{className:"bg-gray-950/40 rounded-xl overflow-hidden border border-gray-700/50",children:[s.jsxs("div",{className:"px-3 py-2 bg-gray-800/40 border-b border-gray-700/50 flex justify-between items-center text-[10px] uppercase font-black tracking-widest text-gray-400",children:[s.jsx("span",{children:"Selected Item Details"}),n.is_wishlist&&s.jsx("span",{className:"text-orange-500",children:"Wishlist Copy"})]}),s.jsxs("table",{className:"w-full text-xs text-left",children:[s.jsx("thead",{className:"bg-gray-900/50 text-[10px] text-gray-500 font-bold uppercase tracking-wider",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2",children:"Location"}),s.jsx("th",{className:"px-3 py-2 text-center",children:"Foil"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Qty"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Added"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-700/30 text-gray-300",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-3 py-2",children:b?s.jsxs("select",{value:j.deckId,onChange:M=>S({...j,deckId:M.target.value}),className:"bg-gray-800 border border-gray-600 rounded px-2 py-0.5 text-[10px] text-white w-full",children:[s.jsx("option",{value:"",children:"Binder"}),U.map(M=>s.jsxs("option",{value:M.id,children:["Deck: ",M.name]},M.id))]}):n.deckId?`Deck #${n.deckId}`:"Binder"}),s.jsx("td",{className:"px-3 py-2 text-center",children:b?s.jsx("input",{type:"checkbox",checked:j.finish==="foil",onChange:M=>S({...j,finish:M.target.checked?"foil":"nonfoil"}),className:"rounded bg-gray-700 border-gray-600 text-indigo-600"}):n.finish==="foil"?"Yes":"-"}),s.jsx("td",{className:"px-3 py-2 text-right font-black",children:n.count||n.quantity||1}),s.jsx("td",{className:"px-3 py-2 text-right text-gray-500 font-mono text-[10px]",children:n.added_at?new Date(n.added_at).toLocaleDateString():"N/A"})]})})]})]}),n.is_wishlist&&!b&&s.jsxs("button",{onClick:async()=>{try{await f(n.id||n.firestoreId,{is_wishlist:!1}),m("Card moved to collection!","success")}catch{m("Failed to move card","error")}},className:"w-full py-2.5 bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-500 hover:to-orange-400 text-white text-[10px] font-black uppercase tracking-[0.2em] rounded-lg shadow-lg shadow-orange-900/30 transition-all flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 13l4 4L19 7"})}),"I Got This Copy!"]})]})})()]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-700/50",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Art & Aesthetics"]}),s.jsxs("div",{className:"bg-gray-900/30 rounded-xl p-4 border border-gray-700/50 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between border-b border-gray-800 py-1",children:[s.jsx("span",{className:"text-gray-500",children:"Artist"}),s.jsx("span",{className:"text-white font-medium",children:k.artist||"Unknown"})]}),s.jsxs("div",{className:"flex justify-between border-b border-gray-800 py-1",children:[s.jsx("span",{className:"text-gray-500",children:"Frame"}),s.jsx("span",{className:"text-white",children:k.frame||"2015"})]}),s.jsxs("div",{className:"flex justify-between border-b border-gray-800 py-1",children:[s.jsx("span",{className:"text-gray-500",children:"Border Color"}),s.jsx("span",{className:"text-white capitalize",children:k.border_color||"Black"})]}),s.jsxs("div",{className:"flex justify-between border-b border-gray-800 py-1",children:[s.jsx("span",{className:"text-gray-500",children:"Finishes"}),s.jsx("span",{className:"text-white capitalize",children:k.finishes?.join(", ")})]}),k.watermark&&s.jsxs("div",{className:"flex justify-between border-b border-gray-800 py-1",children:[s.jsx("span",{className:"text-gray-500",children:"Watermark"}),s.jsx("span",{className:"text-white capitalize",children:k.watermark})]}),s.jsxs("div",{className:"flex justify-between border-b border-gray-800 py-1",children:[s.jsx("span",{className:"text-gray-500",children:"Illustration ID"}),s.jsxs("span",{className:"text-gray-400 font-mono text-xs",children:[k.illustration_id?.slice(0,8),"..."]})]})]})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-700/50",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),"Developer / Metadata"]}),s.jsxs("div",{className:"bg-gray-900/30 rounded-xl p-4 border border-gray-700/50 space-y-2 text-sm font-mono",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"External Links"}),s.jsx("a",{href:k.scryfall_uri,target:"_blank",rel:"noreferrer",className:"text-indigo-400 hover:text-indigo-300 underline",children:"View on Scryfall"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Scryfall ID"}),s.jsx("span",{className:"text-gray-400",children:k.id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Oracle ID"}),s.jsx("span",{className:"text-gray-400",children:k.oracle_id})]}),n.firestoreId&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Database ID"}),s.jsx("span",{className:"text-gray-400",children:n.firestoreId})]}),s.jsxs("div",{className:"border-t border-gray-800 pt-2 mt-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Released At"}),s.jsx("span",{className:"text-gray-300",children:k.released_at})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Reserved List"}),s.jsx("span",{className:k.reserved?"text-red-400":"text-gray-400",children:k.reserved?"true":"false"})]})]})]})]}),b&&s.jsxs("div",{className:"pt-6 mt-6 border-t border-gray-700 flex gap-4 animate-fade-in-up",children:[s.jsx("button",{onClick:()=>_(!1),className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white py-3 rounded-lg border border-gray-500 transition-all font-bold tracking-wide uppercase text-sm",children:"Cancel"}),s.jsx("button",{onClick:Me,className:"flex-1 bg-red-600/80 hover:bg-red-600 text-white py-3 rounded-lg shadow-md transition-all font-bold tracking-wide uppercase text-sm",children:"Delete Card"}),s.jsx("button",{onClick:De,className:"flex-1 bg-green-600 hover:bg-green-500 text-white py-3 rounded-lg shadow-lg shadow-green-900/20 transition-all font-bold tracking-wide uppercase text-sm",children:"Save Changes"})]})]})]})]})]})},yS=({children:a})=>{const{currentUser:n,userProfile:i,loading:o}=St(),u=mr(),f=Is(),[m,p]=w.useState(!1);return w.useEffect(()=>{if(!n&&!o){p(!1);return}if(!(o||m)&&n&&i){const b=["/","/login","/about"].includes(u.pathname),_=u.pathname==="/onboarding";!i.settings?.onboarding_complete&&!_&&!b&&f("/onboarding"),p(!0)}},[n,i,o,u,f,m]),o?s.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center text-indigo-500",children:"Loading..."}):a};function bS(){return s.jsx(C5,{children:s.jsx(S5,{children:s.jsx(T5,{children:s.jsxs("div",{className:"bg-gray-900 text-gray-200 font-sans min-h-screen flex flex-col",children:[s.jsx(L5,{}),s.jsx(yS,{children:s.jsx("div",{className:"flex-grow",children:s.jsxs(X1,{children:[s.jsx(ln,{path:"/",element:s.jsx(I5,{})}),s.jsx(ln,{path:"/about",element:s.jsx(gS,{})}),s.jsx(ln,{path:"/dashboard",element:s.jsx(z5,{})}),s.jsx(ln,{path:"/login",element:s.jsx(B5,{})}),s.jsx(ln,{path:"/onboarding",element:s.jsx(mS,{})}),s.jsx(ln,{path:"/collection",element:s.jsx(P5,{})}),s.jsx(ln,{path:"/decks",element:s.jsx(V5,{})}),s.jsx(ln,{path:"/decks/new",element:s.jsx(q5,{})}),s.jsx(ln,{path:"/decks/:deckId",element:s.jsx(Z5,{})}),s.jsx(ln,{path:"/decks/:deckId/build",element:s.jsx(oS,{})}),s.jsx(ln,{path:"/sets",element:s.jsx(tS,{})}),s.jsx(ln,{path:"/sets/:setCode",element:s.jsx(nS,{})}),s.jsx(ln,{path:"/wishlist",element:s.jsx(lS,{})}),s.jsx(ln,{path:"/settings",element:s.jsx(aS,{})})]})})}),s.jsx(pS,{}),s.jsx(xS,{})]})})})})}Zv.createRoot(document.getElementById("root")).render(s.jsx(As.StrictMode,{children:s.jsx(v2,{children:s.jsx(bS,{})})}));
