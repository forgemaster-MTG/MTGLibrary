function PL(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();function zn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dv={exports:{}},od={};var q5;function RL(){if(q5)return od;q5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var f in s)f!=="key"&&(o[f]=s[f])}else o=s;return s=o.ref,{$$typeof:e,type:n,key:c,ref:s!==void 0?s:null,props:o}}return od.Fragment=t,od.jsx=r,od.jsxs=r,od}var K5;function IL(){return K5||(K5=1,dv.exports=RL()),dv.exports}var a=IL(),fv={exports:{}},Qe={};var Y5;function LL(){if(Y5)return Qe;Y5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),x=Symbol.iterator;function w(H){return H===null||typeof H!="object"?null:(H=x&&H[x]||H["@@iterator"],typeof H=="function"?H:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,S={};function C(H,G,ee){this.props=H,this.context=G,this.refs=S,this.updater=ee||j}C.prototype.isReactComponent={},C.prototype.setState=function(H,G){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,G,"setState")},C.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function A(){}A.prototype=C.prototype;function E(H,G,ee){this.props=H,this.context=G,this.refs=S,this.updater=ee||j}var z=E.prototype=new A;z.constructor=E,N(z,C.prototype),z.isPureReactComponent=!0;var P=Array.isArray;function B(){}var T={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function $(H,G,ee){var Q=ee.ref;return{$$typeof:e,type:H,key:G,ref:Q!==void 0?Q:null,props:ee}}function I(H,G){return $(H.type,G,H.props)}function O(H){return typeof H=="object"&&H!==null&&H.$$typeof===e}function U(H){var G={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ee){return G[ee]})}var D=/\/+/g;function q(H,G){return typeof H=="object"&&H!==null&&H.key!=null?U(""+H.key):G.toString(36)}function Z(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(B,B):(H.status="pending",H.then(function(G){H.status==="pending"&&(H.status="fulfilled",H.value=G)},function(G){H.status==="pending"&&(H.status="rejected",H.reason=G)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function V(H,G,ee,Q,ae){var _e=typeof H;(_e==="undefined"||_e==="boolean")&&(H=null);var be=!1;if(H===null)be=!0;else switch(_e){case"bigint":case"string":case"number":be=!0;break;case"object":switch(H.$$typeof){case e:case t:be=!0;break;case m:return be=H._init,V(be(H._payload),G,ee,Q,ae)}}if(be)return ae=ae(H),be=Q===""?"."+q(H,0):Q,P(ae)?(ee="",be!=null&&(ee=be.replace(D,"$&/")+"/"),V(ae,G,ee,"",function(Ae){return Ae})):ae!=null&&(O(ae)&&(ae=I(ae,ee+(ae.key==null||H&&H.key===ae.key?"":(""+ae.key).replace(D,"$&/")+"/")+be)),G.push(ae)),1;be=0;var Pe=Q===""?".":Q+":";if(P(H))for(var se=0;se<H.length;se++)Q=H[se],_e=Pe+q(Q,se),be+=V(Q,G,ee,_e,ae);else if(se=w(H),typeof se=="function")for(H=se.call(H),se=0;!(Q=H.next()).done;)Q=Q.value,_e=Pe+q(Q,se++),be+=V(Q,G,ee,_e,ae);else if(_e==="object"){if(typeof H.then=="function")return V(Z(H),G,ee,Q,ae);throw G=String(H),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return be}function X(H,G,ee){if(H==null)return H;var Q=[],ae=0;return V(H,Q,"","",function(_e){return G.call(ee,_e,ae++)}),Q}function re(H){if(H._status===-1){var G=H._result;G=G(),G.then(function(ee){(H._status===0||H._status===-1)&&(H._status=1,H._result=ee)},function(ee){(H._status===0||H._status===-1)&&(H._status=2,H._result=ee)}),H._status===-1&&(H._status=0,H._result=G)}if(H._status===1)return H._result.default;throw H._result}var fe=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Y={map:X,forEach:function(H,G,ee){X(H,function(){G.apply(this,arguments)},ee)},count:function(H){var G=0;return X(H,function(){G++}),G},toArray:function(H){return X(H,function(G){return G})||[]},only:function(H){if(!O(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Qe.Activity=p,Qe.Children=Y,Qe.Component=C,Qe.Fragment=r,Qe.Profiler=s,Qe.PureComponent=E,Qe.StrictMode=n,Qe.Suspense=d,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(H){return T.H.useMemoCache(H)}},Qe.cache=function(H){return function(){return H.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(H,G,ee){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var Q=N({},H.props),ae=H.key;if(G!=null)for(_e in G.key!==void 0&&(ae=""+G.key),G)!R.call(G,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&G.ref===void 0||(Q[_e]=G[_e]);var _e=arguments.length-2;if(_e===1)Q.children=ee;else if(1<_e){for(var be=Array(_e),Pe=0;Pe<_e;Pe++)be[Pe]=arguments[Pe+2];Q.children=be}return $(H.type,ae,Q)},Qe.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:o,_context:H},H},Qe.createElement=function(H,G,ee){var Q,ae={},_e=null;if(G!=null)for(Q in G.key!==void 0&&(_e=""+G.key),G)R.call(G,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ae[Q]=G[Q]);var be=arguments.length-2;if(be===1)ae.children=ee;else if(1<be){for(var Pe=Array(be),se=0;se<be;se++)Pe[se]=arguments[se+2];ae.children=Pe}if(H&&H.defaultProps)for(Q in be=H.defaultProps,be)ae[Q]===void 0&&(ae[Q]=be[Q]);return $(H,_e,ae)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(H){return{$$typeof:f,render:H}},Qe.isValidElement=O,Qe.lazy=function(H){return{$$typeof:m,_payload:{_status:-1,_result:H},_init:re}},Qe.memo=function(H,G){return{$$typeof:h,type:H,compare:G===void 0?null:G}},Qe.startTransition=function(H){var G=T.T,ee={};T.T=ee;try{var Q=H(),ae=T.S;ae!==null&&ae(ee,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(B,fe)}catch(_e){fe(_e)}finally{G!==null&&ee.types!==null&&(G.types=ee.types),T.T=G}},Qe.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Qe.use=function(H){return T.H.use(H)},Qe.useActionState=function(H,G,ee){return T.H.useActionState(H,G,ee)},Qe.useCallback=function(H,G){return T.H.useCallback(H,G)},Qe.useContext=function(H){return T.H.useContext(H)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(H,G){return T.H.useDeferredValue(H,G)},Qe.useEffect=function(H,G){return T.H.useEffect(H,G)},Qe.useEffectEvent=function(H){return T.H.useEffectEvent(H)},Qe.useId=function(){return T.H.useId()},Qe.useImperativeHandle=function(H,G,ee){return T.H.useImperativeHandle(H,G,ee)},Qe.useInsertionEffect=function(H,G){return T.H.useInsertionEffect(H,G)},Qe.useLayoutEffect=function(H,G){return T.H.useLayoutEffect(H,G)},Qe.useMemo=function(H,G){return T.H.useMemo(H,G)},Qe.useOptimistic=function(H,G){return T.H.useOptimistic(H,G)},Qe.useReducer=function(H,G,ee){return T.H.useReducer(H,G,ee)},Qe.useRef=function(H){return T.H.useRef(H)},Qe.useState=function(H){return T.H.useState(H)},Qe.useSyncExternalStore=function(H,G,ee){return T.H.useSyncExternalStore(H,G,ee)},Qe.useTransition=function(){return T.H.useTransition()},Qe.version="19.2.3",Qe}var X5;function xo(){return X5||(X5=1,fv.exports=LL()),fv.exports}var y=xo();const Te=zn(y),DL=PL({__proto__:null,default:Te},[y]);var hv={exports:{}},ld={},mv={exports:{}},gv={};var J5;function BL(){return J5||(J5=1,(function(e){function t(V,X){var re=V.length;V.push(X);e:for(;0<re;){var fe=re-1>>>1,Y=V[fe];if(0<s(Y,X))V[fe]=X,V[re]=Y,re=fe;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var X=V[0],re=V.pop();if(re!==X){V[0]=re;e:for(var fe=0,Y=V.length,H=Y>>>1;fe<H;){var G=2*(fe+1)-1,ee=V[G],Q=G+1,ae=V[Q];if(0>s(ee,re))Q<Y&&0>s(ae,ee)?(V[fe]=ae,V[Q]=re,fe=Q):(V[fe]=ee,V[G]=re,fe=G);else if(Q<Y&&0>s(ae,re))V[fe]=ae,V[Q]=re,fe=Q;else break e}}return X}function s(V,X){var re=V.sortIndex-X.sortIndex;return re!==0?re:V.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();e.unstable_now=function(){return c.now()-f}}var d=[],h=[],m=1,p=null,x=3,w=!1,j=!1,N=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function z(V){for(var X=r(h);X!==null;){if(X.callback===null)n(h);else if(X.startTime<=V)n(h),X.sortIndex=X.expirationTime,t(d,X);else break;X=r(h)}}function P(V){if(N=!1,z(V),!j)if(r(d)!==null)j=!0,B||(B=!0,U());else{var X=r(h);X!==null&&Z(P,X.startTime-V)}}var B=!1,T=-1,R=5,$=-1;function I(){return S?!0:!(e.unstable_now()-$<R)}function O(){if(S=!1,B){var V=e.unstable_now();$=V;var X=!0;try{e:{j=!1,N&&(N=!1,A(T),T=-1),w=!0;var re=x;try{t:{for(z(V),p=r(d);p!==null&&!(p.expirationTime>V&&I());){var fe=p.callback;if(typeof fe=="function"){p.callback=null,x=p.priorityLevel;var Y=fe(p.expirationTime<=V);if(V=e.unstable_now(),typeof Y=="function"){p.callback=Y,z(V),X=!0;break t}p===r(d)&&n(d),z(V)}else n(d);p=r(d)}if(p!==null)X=!0;else{var H=r(h);H!==null&&Z(P,H.startTime-V),X=!1}}break e}finally{p=null,x=re,w=!1}X=void 0}}finally{X?U():B=!1}}}var U;if(typeof E=="function")U=function(){E(O)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,q=D.port2;D.port1.onmessage=O,U=function(){q.postMessage(null)}}else U=function(){C(O,0)};function Z(V,X){T=C(function(){V(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(V){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var re=x;x=X;try{return V()}finally{x=re}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(V,X){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var re=x;x=V;try{return X()}finally{x=re}},e.unstable_scheduleCallback=function(V,X,re){var fe=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?fe+re:fe):re=fe,V){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=re+Y,V={id:m++,callback:X,priorityLevel:V,startTime:re,expirationTime:Y,sortIndex:-1},re>fe?(V.sortIndex=re,t(h,V),r(d)===null&&V===r(h)&&(N?(A(T),T=-1):N=!0,Z(P,re-fe))):(V.sortIndex=Y,t(d,V),j||w||(j=!0,B||(B=!0,U()))),V},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(V){var X=x;return function(){var re=x;x=X;try{return V.apply(this,arguments)}finally{x=re}}}})(gv)),gv}var Q5;function $L(){return Q5||(Q5=1,mv.exports=BL()),mv.exports}var pv={exports:{}},Jr={};var Z5;function zL(){if(Z5)return Jr;Z5=1;var e=xo();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,h,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:d,containerInfo:h,implementation:m}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Jr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Jr.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(d,h,null,m)},Jr.flushSync=function(d){var h=c.T,m=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=h,n.p=m,n.d.f()}},Jr.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},Jr.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Jr.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,p=f(m,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:x,fetchPriority:w}):m==="script"&&n.d.X(d,{crossOrigin:p,integrity:x,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Jr.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=f(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},Jr.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,p=f(m,h.crossOrigin);n.d.L(d,m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Jr.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=f(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},Jr.requestFormReset=function(d){n.d.r(d)},Jr.unstable_batchedUpdates=function(d,h){return d(h)},Jr.useFormState=function(d,h,m){return c.H.useFormState(d,h,m)},Jr.useFormStatus=function(){return c.H.useHostTransitionStatus()},Jr.version="19.2.3",Jr}var ek;function _6(){if(ek)return pv.exports;ek=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),pv.exports=zL(),pv.exports}var tk;function UL(){if(tk)return ld;tk=1;var e=$L(),t=xo(),r=_6();function n(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var l=i,u=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(u=l.return),i=l.return;while(i)}return l.tag===3?u:null}function c(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function f(i){if(i.tag===31){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function h(i){var l=i.alternate;if(!l){if(l=o(i),l===null)throw Error(n(188));return l!==i?null:i}for(var u=i,g=l;;){var b=u.return;if(b===null)break;var k=b.alternate;if(k===null){if(g=b.return,g!==null){u=g;continue}break}if(b.child===k.child){for(k=b.child;k;){if(k===u)return d(b),i;if(k===g)return d(b),l;k=k.sibling}throw Error(n(188))}if(u.return!==g.return)u=b,g=k;else{for(var M=!1,F=b.child;F;){if(F===u){M=!0,u=b,g=k;break}if(F===g){M=!0,g=b,u=k;break}F=F.sibling}if(!M){for(F=k.child;F;){if(F===u){M=!0,u=k,g=b;break}if(F===g){M=!0,g=k,u=b;break}F=F.sibling}if(!M)throw Error(n(189))}}if(u.alternate!==g)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?i:l}function m(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=m(i),l!==null)return l;i=i.sibling}return null}var p=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),E=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=O&&i[O]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function q(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case B:return"SuspenseList";case $:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case j:return"Portal";case E:return i.displayName||"Context";case A:return(i._context.displayName||"Context")+".Consumer";case z:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case T:return l=i.displayName||null,l!==null?l:q(i.type)||"Memo";case R:l=i._payload,i=i._init;try{return q(i(l))}catch{}}return null}var Z=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},fe=[],Y=-1;function H(i){return{current:i}}function G(i){0>Y||(i.current=fe[Y],fe[Y]=null,Y--)}function ee(i,l){Y++,fe[Y]=i.current,i.current=l}var Q=H(null),ae=H(null),_e=H(null),be=H(null);function Pe(i,l){switch(ee(_e,l),ee(ae,i),ee(Q,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?p5(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=p5(l),i=x5(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}G(Q),ee(Q,i)}function se(){G(Q),G(ae),G(_e)}function Ae(i){i.memoizedState!==null&&ee(be,i);var l=Q.current,u=x5(l,i.type);l!==u&&(ee(ae,i),ee(Q,u))}function Ce(i){ae.current===i&&(G(Q),G(ae)),be.current===i&&(G(be),nd._currentValue=re)}var xe,We;function je(i){if(xe===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);xe=l&&l[1]||"",We=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xe+i+We}var ke=!1;function Oe(i,l){if(!i||ke)return"";ke=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(ge){var de=ge}Reflect.construct(i,[],Ne)}else{try{Ne.call()}catch(ge){de=ge}i.call(Ne.prototype)}}else{try{throw Error()}catch(ge){de=ge}(Ne=i())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(ge){if(ge&&de&&typeof ge.stack=="string")return[ge.stack,de.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=g.DetermineComponentFrameRoot(),M=k[0],F=k[1];if(M&&F){var K=M.split(`
`),le=F.split(`
`);for(b=g=0;g<K.length&&!K[g].includes("DetermineComponentFrameRoot");)g++;for(;b<le.length&&!le[b].includes("DetermineComponentFrameRoot");)b++;if(g===K.length||b===le.length)for(g=K.length-1,b=le.length-1;1<=g&&0<=b&&K[g]!==le[b];)b--;for(;1<=g&&0<=b;g--,b--)if(K[g]!==le[b]){if(g!==1||b!==1)do if(g--,b--,0>b||K[g]!==le[b]){var ye=`
`+K[g].replace(" at new "," at ");return i.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",i.displayName)),ye}while(1<=g&&0<=b);break}}}finally{ke=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?je(u):""}function Me(i,l){switch(i.tag){case 26:case 27:case 5:return je(i.type);case 16:return je("Lazy");case 13:return i.child!==l&&l!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return Oe(i.type,!1);case 11:return Oe(i.type.render,!1);case 1:return Oe(i.type,!0);case 31:return je("Activity");default:return""}}function $e(i){try{var l="",u=null;do l+=Me(i,u),u=i,i=i.return;while(i);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var ze=Object.prototype.hasOwnProperty,Be=e.unstable_scheduleCallback,qt=e.unstable_cancelCallback,wr=e.unstable_shouldYield,rt=e.unstable_requestPaint,lt=e.unstable_now,Ot=e.unstable_getCurrentPriorityLevel,ne=e.unstable_ImmediatePriority,Le=e.unstable_UserBlockingPriority,Ke=e.unstable_NormalPriority,Lt=e.unstable_LowPriority,pe=e.unstable_IdlePriority,Re=e.log,Xe=e.unstable_setDisableYieldValue,he=null,ce=null;function ve(i){if(typeof Re=="function"&&Xe(i),ce&&typeof ce.setStrictMode=="function")try{ce.setStrictMode(he,i)}catch{}}var Se=Math.clz32?Math.clz32:Ni,qe=Math.log,ar=Math.LN2;function Ni(i){return i>>>=0,i===0?32:31-(qe(i)/ar|0)|0}var Hn=256,wo=262144,cr=4194304;function $a(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function za(i,l,u){var g=i.pendingLanes;if(g===0)return 0;var b=0,k=i.suspendedLanes,M=i.pingedLanes;i=i.warmLanes;var F=g&134217727;return F!==0?(g=F&~k,g!==0?b=$a(g):(M&=F,M!==0?b=$a(M):u||(u=F&~i,u!==0&&(b=$a(u))))):(F=g&~k,F!==0?b=$a(F):M!==0?b=$a(M):u||(u=g&~i,u!==0&&(b=$a(u)))),b===0?0:l!==0&&l!==b&&(l&k)===0&&(k=b&-b,u=l&-l,k>=u||k===32&&(u&4194048)!==0)?l:b}function ha(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function gp(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hf(){var i=cr;return cr<<=1,(cr&62914560)===0&&(cr=4194304),i}function Ua(i){for(var l=[],u=0;31>u;u++)l.push(i);return l}function jo(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function pp(i,l,u,g,b,k){var M=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var F=i.entanglements,K=i.expirationTimes,le=i.hiddenUpdates;for(u=M&~u;0<u;){var ye=31-Se(u),Ne=1<<ye;F[ye]=0,K[ye]=-1;var de=le[ye];if(de!==null)for(le[ye]=null,ye=0;ye<de.length;ye++){var ge=de[ye];ge!==null&&(ge.lane&=-536870913)}u&=~Ne}g!==0&&Pl(i,g,0),k!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=k&~(M&~l))}function Pl(i,l,u){i.pendingLanes|=l,i.suspendedLanes&=~l;var g=31-Se(l);i.entangledLanes|=l,i.entanglements[g]=i.entanglements[g]|1073741824|u&261930}function Wf(i,l){var u=i.entangledLanes|=l;for(i=i.entanglements;u;){var g=31-Se(u),b=1<<g;b&l|i[g]&l&&(i[g]|=l),u&=~b}}function cu(i,l){var u=l&-l;return u=(u&42)!==0?1:No(u),(u&(i.suspendedLanes|l))!==0?0:u}function No(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ki(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Gf(){var i=X.p;return i!==0?i:(i=window.event,i===void 0?32:z5(i.type))}function ma(i,l){var u=X.p;try{return X.p=i,l()}finally{X.p=u}}var ga=Math.random().toString(36).slice(2),ur="__reactFiber$"+ga,Ar="__reactProps$"+ga,Fa="__reactContainer$"+ga,Rl="__reactEvents$"+ga,xp="__reactListeners$"+ga,Vf="__reactHandles$"+ga,qf="__reactResources$"+ga,Ha="__reactMarker$"+ga;function Il(i){delete i[ur],delete i[Ar],delete i[Rl],delete i[xp],delete i[Vf]}function Wa(i){var l=i[ur];if(l)return l;for(var u=i.parentNode;u;){if(l=u[Fa]||u[ur]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(i=k5(i);i!==null;){if(u=i[ur])return u;i=k5(i)}return l}i=u,u=i.parentNode}return null}function Wn(i){if(i=i[ur]||i[Fa]){var l=i.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return i}return null}function Sn(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(n(33))}function Ga(i){var l=i[qf];return l||(l=i[qf]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function dr(i){i[Ha]=!0}var uu=new Set,du={};function Va(i,l){qa(i,l),qa(i+"Capture",l)}function qa(i,l){for(du[i]=l,i=0;i<l.length;i++)uu.add(l[i])}var fu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hu={},mu={};function Kf(i){return ze.call(mu,i)?!0:ze.call(hu,i)?!1:fu.test(i)?mu[i]=!0:(hu[i]=!0,!1)}function Ll(i,l,u){if(Kf(l))if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+u)}}function _n(i,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+u)}}function fr(i,l,u,g){if(g===null)i.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(l,u,""+g)}}function Tr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ns(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function gu(i,l,u){var g=Object.getOwnPropertyDescriptor(i.constructor.prototype,l);if(!i.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,k=g.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return b.call(this)},set:function(M){u=""+M,k.call(this,M)}}),Object.defineProperty(i,l,{enumerable:g.enumerable}),{getValue:function(){return u},setValue:function(M){u=""+M},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function bt(i){if(!i._valueTracker){var l=Ns(i)?"checked":"value";i._valueTracker=gu(i,l,""+i[l])}}function ko(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var u=l.getValue(),g="";return i&&(g=Ns(i)?i.checked?"true":"false":i.value),i=g,i!==u?(l.setValue(i),!0):!1}function Ka(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var So=/[\n"\\]/g;function fn(i){return i.replace(So,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Dl(i,l,u,g,b,k,M,F){i.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?i.type=M:i.removeAttribute("type"),l!=null?M==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+Tr(l)):i.value!==""+Tr(l)&&(i.value=""+Tr(l)):M!=="submit"&&M!=="reset"||i.removeAttribute("value"),l!=null?pu(i,M,Tr(l)):u!=null?pu(i,M,Tr(u)):g!=null&&i.removeAttribute("value"),b==null&&k!=null&&(i.defaultChecked=!!k),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?i.name=""+Tr(F):i.removeAttribute("name")}function Yf(i,l,u,g,b,k,M,F){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(i.type=k),l!=null||u!=null){if(!(k!=="submit"&&k!=="reset"||l!=null)){bt(i);return}u=u!=null?""+Tr(u):"",l=l!=null?""+Tr(l):u,F||l===i.value||(i.value=l),i.defaultValue=l}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,i.checked=F?i.checked:!!g,i.defaultChecked=!!g,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(i.name=M),bt(i)}function pu(i,l,u){l==="number"&&Ka(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function ks(i,l,u,g){if(i=i.options,l){l={};for(var b=0;b<u.length;b++)l["$"+u[b]]=!0;for(u=0;u<i.length;u++)b=l.hasOwnProperty("$"+i[u].value),i[u].selected!==b&&(i[u].selected=b),b&&g&&(i[u].defaultSelected=!0)}else{for(u=""+Tr(u),l=null,b=0;b<i.length;b++){if(i[b].value===u){i[b].selected=!0,g&&(i[b].defaultSelected=!0);return}l!==null||i[b].disabled||(l=i[b])}l!==null&&(l.selected=!0)}}function Xf(i,l,u){if(l!=null&&(l=""+Tr(l),l!==i.value&&(i.value=l),u==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=u!=null?""+Tr(u):""}function Ss(i,l,u,g){if(l==null){if(g!=null){if(u!=null)throw Error(n(92));if(Z(g)){if(1<g.length)throw Error(n(93));g=g[0]}u=g}u==null&&(u=""),l=u}u=Tr(l),i.defaultValue=u,g=i.textContent,g===u&&g!==""&&g!==null&&(i.value=g),bt(i)}function hn(i,l){if(l){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=l;return}}i.textContent=l}var Jf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xu(i,l,u){var g=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":g?i.setProperty(l,u):typeof u!="number"||u===0||Jf.has(l)?l==="float"?i.cssFloat=u:i[l]=(""+u).trim():i[l]=u+"px"}function vu(i,l,u){if(l!=null&&typeof l!="object")throw Error(n(62));if(i=i.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?i.setProperty(g,""):g==="float"?i.cssFloat="":i[g]="");for(var b in l)g=l[b],l.hasOwnProperty(b)&&u[b]!==g&&xu(i,b,g)}else for(var k in l)l.hasOwnProperty(k)&&xu(i,k,l[k])}function Bl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_s=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $l(i){return _s.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function pa(){}var yu=null;function Gn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Cs=null,Ya=null;function _o(i){var l=Wn(i);if(l&&(i=l.stateNode)){var u=i[Ar]||null;e:switch(i=l.stateNode,l.type){case"input":if(Dl(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+fn(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var g=u[l];if(g!==i&&g.form===i.form){var b=g[Ar]||null;if(!b)throw Error(n(90));Dl(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<u.length;l++)g=u[l],g.form===i.form&&ko(g)}break e;case"textarea":Xf(i,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&ks(i,!!u.multiple,l,!1)}}}var zl=!1;function Es(i,l,u){if(zl)return i(l,u);zl=!0;try{var g=i(l);return g}finally{if(zl=!1,(Cs!==null||Ya!==null)&&(Gh(),Cs&&(l=Cs,i=Ya,Ya=Cs=null,_o(l),i)))for(l=0;l<i.length;l++)_o(i[l])}}function xa(i,l){var u=i.stateNode;if(u===null)return null;var g=u[Ar]||null;if(g===null)return null;u=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(n(231,l,typeof u));return u}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Co=!1;if(Vn)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){Co=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch{Co=!1}var Xa=null,bu=null,Eo=null;function wu(){if(Eo)return Eo;var i,l=bu,u=l.length,g,b="value"in Xa?Xa.value:Xa.textContent,k=b.length;for(i=0;i<u&&l[i]===b[i];i++);var M=u-i;for(g=1;g<=M&&l[u-g]===b[k-g];g++);return Eo=b.slice(i,1<g?1-g:void 0)}function Ao(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function Si(){return!0}function va(){return!1}function Dr(i){function l(u,g,b,k,M){this._reactName=u,this._targetInst=b,this.type=g,this.nativeEvent=k,this.target=M,this.currentTarget=null;for(var F in i)i.hasOwnProperty(F)&&(u=i[F],this[F]=u?u(k):k[F]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Si:va,this.isPropagationStopped=va,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Si)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Si)},persist:function(){},isPersistent:Si}),l}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ja=Dr(_i),As=p({},_i,{view:0,detail:0}),ju=Dr(As),Ts,Ul,Qa,Fl=p({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Qa&&(Qa&&i.type==="mousemove"?(Ts=i.screenX-Qa.screenX,Ul=i.screenY-Qa.screenY):Ul=Ts=0,Qa=i),Ts)},movementY:function(i){return"movementY"in i?i.movementY:Ul}}),Nu=Dr(Fl),To=p({},Fl,{dataTransfer:0}),Zf=Dr(To),eh=p({},As,{relatedTarget:0}),Oo=Dr(eh),ku=p({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),th=Dr(ku),Hl=p({},_i,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),rh=Dr(Hl),nh=p({},_i,{data:0}),Za=Dr(nh),ah={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ih={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oh(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=sh[i])?!!l[i]:!1}function Yr(){return oh}var lh=p({},As,{key:function(i){if(i.key){var l=ah[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Ao(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ih[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yr,charCode:function(i){return i.type==="keypress"?Ao(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ao(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ch=Dr(lh),Os=p({},Fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v=Dr(Os),_=p({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yr}),L=Dr(_),W=p({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),ie=Dr(W),me=p({},Fl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ee=Dr(me),Ze=p({},_i,{newState:0,oldState:0}),ir=Dr(Ze),wt=[9,13,27,32],Jt=Vn&&"CompositionEvent"in window,Xr=null;Vn&&"documentMode"in document&&(Xr=document.documentMode);var Ci=Vn&&"TextEvent"in window&&!Xr,ya=Vn&&(!Jt||Xr&&8<Xr&&11>=Xr),ba=" ",Mo=!1;function Wl(i,l){switch(i){case"keyup":return wt.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _j(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Gl=!1;function nI(i,l){switch(i){case"compositionend":return _j(l);case"keypress":return l.which!==32?null:(Mo=!0,ba);case"textInput":return i=l.data,i===ba&&Mo?null:i;default:return null}}function aI(i,l){if(Gl)return i==="compositionend"||!Jt&&Wl(i,l)?(i=wu(),Eo=bu=Xa=null,Gl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ya&&l.locale!=="ko"?null:l.data;default:return null}}var iI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cj(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!iI[i.type]:l==="textarea"}function Ej(i,l,u,g){Cs?Ya?Ya.push(g):Ya=[g]:Cs=g,l=Qh(l,"onChange"),0<l.length&&(u=new Ja("onChange","change",null,u,g),i.push({event:u,listeners:l}))}var Su=null,_u=null;function sI(i){u5(i,0)}function uh(i){var l=Sn(i);if(ko(l))return i}function Aj(i,l){if(i==="change")return l}var Tj=!1;if(Vn){var vp;if(Vn){var yp="oninput"in document;if(!yp){var Oj=document.createElement("div");Oj.setAttribute("oninput","return;"),yp=typeof Oj.oninput=="function"}vp=yp}else vp=!1;Tj=vp&&(!document.documentMode||9<document.documentMode)}function Mj(){Su&&(Su.detachEvent("onpropertychange",Pj),_u=Su=null)}function Pj(i){if(i.propertyName==="value"&&uh(_u)){var l=[];Ej(l,_u,i,Gn(i)),Es(sI,l)}}function oI(i,l,u){i==="focusin"?(Mj(),Su=l,_u=u,Su.attachEvent("onpropertychange",Pj)):i==="focusout"&&Mj()}function lI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return uh(_u)}function cI(i,l){if(i==="click")return uh(l)}function uI(i,l){if(i==="input"||i==="change")return uh(l)}function dI(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var Cn=typeof Object.is=="function"?Object.is:dI;function Cu(i,l){if(Cn(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var u=Object.keys(i),g=Object.keys(l);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var b=u[g];if(!ze.call(l,b)||!Cn(i[b],l[b]))return!1}return!0}function Rj(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ij(i,l){var u=Rj(i);i=0;for(var g;u;){if(u.nodeType===3){if(g=i+u.textContent.length,i<=l&&g>=l)return{node:u,offset:l-i};i=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Rj(u)}}function Lj(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?Lj(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function Dj(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=Ka(i.document);l instanceof i.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)i=l.contentWindow;else break;l=Ka(i.document)}return l}function bp(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var fI=Vn&&"documentMode"in document&&11>=document.documentMode,Vl=null,wp=null,Eu=null,jp=!1;function Bj(i,l,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;jp||Vl==null||Vl!==Ka(g)||(g=Vl,"selectionStart"in g&&bp(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Eu&&Cu(Eu,g)||(Eu=g,g=Qh(wp,"onSelect"),0<g.length&&(l=new Ja("onSelect","select",null,l,u),i.push({event:l,listeners:g}),l.target=Vl)))}function Po(i,l){var u={};return u[i.toLowerCase()]=l.toLowerCase(),u["Webkit"+i]="webkit"+l,u["Moz"+i]="moz"+l,u}var ql={animationend:Po("Animation","AnimationEnd"),animationiteration:Po("Animation","AnimationIteration"),animationstart:Po("Animation","AnimationStart"),transitionrun:Po("Transition","TransitionRun"),transitionstart:Po("Transition","TransitionStart"),transitioncancel:Po("Transition","TransitionCancel"),transitionend:Po("Transition","TransitionEnd")},Np={},$j={};Vn&&($j=document.createElement("div").style,"AnimationEvent"in window||(delete ql.animationend.animation,delete ql.animationiteration.animation,delete ql.animationstart.animation),"TransitionEvent"in window||delete ql.transitionend.transition);function Ro(i){if(Np[i])return Np[i];if(!ql[i])return i;var l=ql[i],u;for(u in l)if(l.hasOwnProperty(u)&&u in $j)return Np[i]=l[u];return i}var zj=Ro("animationend"),Uj=Ro("animationiteration"),Fj=Ro("animationstart"),hI=Ro("transitionrun"),mI=Ro("transitionstart"),gI=Ro("transitioncancel"),Hj=Ro("transitionend"),Wj=new Map,kp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kp.push("scrollEnd");function wa(i,l){Wj.set(i,l),Va(l,[i])}var dh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},qn=[],Kl=0,Sp=0;function fh(){for(var i=Kl,l=Sp=Kl=0;l<i;){var u=qn[l];qn[l++]=null;var g=qn[l];qn[l++]=null;var b=qn[l];qn[l++]=null;var k=qn[l];if(qn[l++]=null,g!==null&&b!==null){var M=g.pending;M===null?b.next=b:(b.next=M.next,M.next=b),g.pending=b}k!==0&&Gj(u,b,k)}}function hh(i,l,u,g){qn[Kl++]=i,qn[Kl++]=l,qn[Kl++]=u,qn[Kl++]=g,Sp|=g,i.lanes|=g,i=i.alternate,i!==null&&(i.lanes|=g)}function _p(i,l,u,g){return hh(i,l,u,g),mh(i)}function Io(i,l){return hh(i,null,null,l),mh(i)}function Gj(i,l,u){i.lanes|=u;var g=i.alternate;g!==null&&(g.lanes|=u);for(var b=!1,k=i.return;k!==null;)k.childLanes|=u,g=k.alternate,g!==null&&(g.childLanes|=u),k.tag===22&&(i=k.stateNode,i===null||i._visibility&1||(b=!0)),i=k,k=k.return;return i.tag===3?(k=i.stateNode,b&&l!==null&&(b=31-Se(u),i=k.hiddenUpdates,g=i[b],g===null?i[b]=[l]:g.push(l),l.lane=u|536870912),k):null}function mh(i){if(50<Xu)throw Xu=0,Ix=null,Error(n(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var Yl={};function pI(i,l,u,g){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(i,l,u,g){return new pI(i,l,u,g)}function Cp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ei(i,l){var u=i.alternate;return u===null?(u=En(i.tag,l,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=l,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,l=i.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function Vj(i,l){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,l=u.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function gh(i,l,u,g,b,k){var M=0;if(g=i,typeof i=="function")Cp(i)&&(M=1);else if(typeof i=="string")M=wL(i,u,Q.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case $:return i=En(31,u,l,b),i.elementType=$,i.lanes=k,i;case N:return Lo(u.children,b,k,l);case S:M=8,b|=24;break;case C:return i=En(12,u,l,b|2),i.elementType=C,i.lanes=k,i;case P:return i=En(13,u,l,b),i.elementType=P,i.lanes=k,i;case B:return i=En(19,u,l,b),i.elementType=B,i.lanes=k,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case E:M=10;break e;case A:M=9;break e;case z:M=11;break e;case T:M=14;break e;case R:M=16,g=null;break e}M=29,u=Error(n(130,i===null?"null":typeof i,"")),g=null}return l=En(M,u,l,b),l.elementType=i,l.type=g,l.lanes=k,l}function Lo(i,l,u,g){return i=En(7,i,g,l),i.lanes=u,i}function Ep(i,l,u){return i=En(6,i,null,l),i.lanes=u,i}function qj(i){var l=En(18,null,null,0);return l.stateNode=i,l}function Ap(i,l,u){return l=En(4,i.children!==null?i.children:[],i.key,l),l.lanes=u,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var Kj=new WeakMap;function Kn(i,l){if(typeof i=="object"&&i!==null){var u=Kj.get(i);return u!==void 0?u:(l={value:i,source:l,stack:$e(l)},Kj.set(i,l),l)}return{value:i,source:l,stack:$e(l)}}var Xl=[],Jl=0,ph=null,Au=0,Yn=[],Xn=0,Ms=null,ei=1,ti="";function Ai(i,l){Xl[Jl++]=Au,Xl[Jl++]=ph,ph=i,Au=l}function Yj(i,l,u){Yn[Xn++]=ei,Yn[Xn++]=ti,Yn[Xn++]=Ms,Ms=i;var g=ei;i=ti;var b=32-Se(g)-1;g&=~(1<<b),u+=1;var k=32-Se(l)+b;if(30<k){var M=b-b%5;k=(g&(1<<M)-1).toString(32),g>>=M,b-=M,ei=1<<32-Se(l)+b|u<<b|g,ti=k+i}else ei=1<<k|u<<b|g,ti=i}function Tp(i){i.return!==null&&(Ai(i,1),Yj(i,1,0))}function Op(i){for(;i===ph;)ph=Xl[--Jl],Xl[Jl]=null,Au=Xl[--Jl],Xl[Jl]=null;for(;i===Ms;)Ms=Yn[--Xn],Yn[Xn]=null,ti=Yn[--Xn],Yn[Xn]=null,ei=Yn[--Xn],Yn[Xn]=null}function Xj(i,l){Yn[Xn++]=ei,Yn[Xn++]=ti,Yn[Xn++]=Ms,ei=l.id,ti=l.overflow,Ms=i}var Br=null,$t=null,ct=!1,Ps=null,Jn=!1,Mp=Error(n(519));function Rs(i){var l=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tu(Kn(l,i)),Mp}function Jj(i){var l=i.stateNode,u=i.type,g=i.memoizedProps;switch(l[ur]=i,l[Ar]=g,u){case"dialog":at("cancel",l),at("close",l);break;case"iframe":case"object":case"embed":at("load",l);break;case"video":case"audio":for(u=0;u<Qu.length;u++)at(Qu[u],l);break;case"source":at("error",l);break;case"img":case"image":case"link":at("error",l),at("load",l);break;case"details":at("toggle",l);break;case"input":at("invalid",l),Yf(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":at("invalid",l);break;case"textarea":at("invalid",l),Ss(l,g.value,g.defaultValue,g.children)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||g.suppressHydrationWarning===!0||m5(l.textContent,u)?(g.popover!=null&&(at("beforetoggle",l),at("toggle",l)),g.onScroll!=null&&at("scroll",l),g.onScrollEnd!=null&&at("scrollend",l),g.onClick!=null&&(l.onclick=pa),l=!0):l=!1,l||Rs(i,!0)}function Qj(i){for(Br=i.return;Br;)switch(Br.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:Br=Br.return}}function Ql(i){if(i!==Br)return!1;if(!ct)return Qj(i),ct=!0,!1;var l=i.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Xx(i.type,i.memoizedProps)),u=!u),u&&$t&&Rs(i),Qj(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));$t=N5(i)}else if(l===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));$t=N5(i)}else l===27?(l=$t,Ks(i.type)?(i=tv,tv=null,$t=i):$t=l):$t=Br?Zn(i.stateNode.nextSibling):null;return!0}function Do(){$t=Br=null,ct=!1}function Pp(){var i=Ps;return i!==null&&(xn===null?xn=i:xn.push.apply(xn,i),Ps=null),i}function Tu(i){Ps===null?Ps=[i]:Ps.push(i)}var Rp=H(null),Bo=null,Ti=null;function Is(i,l,u){ee(Rp,l._currentValue),l._currentValue=u}function Oi(i){i._currentValue=Rp.current,G(Rp)}function Ip(i,l,u){for(;i!==null;){var g=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),i===u)break;i=i.return}}function Lp(i,l,u,g){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var k=b.dependencies;if(k!==null){var M=b.child;k=k.firstContext;e:for(;k!==null;){var F=k;k=b;for(var K=0;K<l.length;K++)if(F.context===l[K]){k.lanes|=u,F=k.alternate,F!==null&&(F.lanes|=u),Ip(k.return,u,i),g||(M=null);break e}k=F.next}}else if(b.tag===18){if(M=b.return,M===null)throw Error(n(341));M.lanes|=u,k=M.alternate,k!==null&&(k.lanes|=u),Ip(M,u,i),M=null}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===i){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}}function Zl(i,l,u,g){i=null;for(var b=l,k=!1;b!==null;){if(!k){if((b.flags&524288)!==0)k=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var M=b.alternate;if(M===null)throw Error(n(387));if(M=M.memoizedProps,M!==null){var F=b.type;Cn(b.pendingProps.value,M.value)||(i!==null?i.push(F):i=[F])}}else if(b===be.current){if(M=b.alternate,M===null)throw Error(n(387));M.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(nd):i=[nd])}b=b.return}i!==null&&Lp(l,i,u,g),l.flags|=262144}function xh(i){for(i=i.firstContext;i!==null;){if(!Cn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function $o(i){Bo=i,Ti=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function $r(i){return Zj(Bo,i)}function vh(i,l){return Bo===null&&$o(i),Zj(i,l)}function Zj(i,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},Ti===null){if(i===null)throw Error(n(308));Ti=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else Ti=Ti.next=l;return u}var xI=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(u,g){i.push(g)}};this.abort=function(){l.aborted=!0,i.forEach(function(u){return u()})}},vI=e.unstable_scheduleCallback,yI=e.unstable_NormalPriority,hr={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dp(){return{controller:new xI,data:new Map,refCount:0}}function Ou(i){i.refCount--,i.refCount===0&&vI(yI,function(){i.controller.abort()})}var Mu=null,Bp=0,ec=0,tc=null;function bI(i,l){if(Mu===null){var u=Mu=[];Bp=0,ec=Ux(),tc={status:"pending",value:void 0,then:function(g){u.push(g)}}}return Bp++,l.then(e4,e4),l}function e4(){if(--Bp===0&&Mu!==null){tc!==null&&(tc.status="fulfilled");var i=Mu;Mu=null,ec=0,tc=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function wI(i,l){var u=[],g={status:"pending",value:null,reason:null,then:function(b){u.push(b)}};return i.then(function(){g.status="fulfilled",g.value=l;for(var b=0;b<u.length;b++)(0,u[b])(l)},function(b){for(g.status="rejected",g.reason=b,b=0;b<u.length;b++)(0,u[b])(void 0)}),g}var t4=V.S;V.S=function(i,l){BN=lt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&bI(i,l),t4!==null&&t4(i,l)};var zo=H(null);function $p(){var i=zo.current;return i!==null?i:Pt.pooledCache}function yh(i,l){l===null?ee(zo,zo.current):ee(zo,l.pool)}function r4(){var i=$p();return i===null?null:{parent:hr._currentValue,pool:i}}var rc=Error(n(460)),zp=Error(n(474)),bh=Error(n(542)),wh={then:function(){}};function n4(i){return i=i.status,i==="fulfilled"||i==="rejected"}function a4(i,l,u){switch(u=i[u],u===void 0?i.push(l):u!==l&&(l.then(pa,pa),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,s4(i),i;default:if(typeof l.status=="string")l.then(pa,pa);else{if(i=Pt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=l,i.status="pending",i.then(function(g){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=g}},function(g){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,s4(i),i}throw Fo=l,rc}}function Uo(i){try{var l=i._init;return l(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Fo=u,rc):u}}var Fo=null;function i4(){if(Fo===null)throw Error(n(459));var i=Fo;return Fo=null,i}function s4(i){if(i===rc||i===bh)throw Error(n(483))}var nc=null,Pu=0;function jh(i){var l=Pu;return Pu+=1,nc===null&&(nc=[]),a4(nc,i,l)}function Ru(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function Nh(i,l){throw l.$$typeof===x?Error(n(525)):(i=Object.prototype.toString.call(l),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function o4(i){function l(te,J){if(i){var oe=te.deletions;oe===null?(te.deletions=[J],te.flags|=16):oe.push(J)}}function u(te,J){if(!i)return null;for(;J!==null;)l(te,J),J=J.sibling;return null}function g(te){for(var J=new Map;te!==null;)te.key!==null?J.set(te.key,te):J.set(te.index,te),te=te.sibling;return J}function b(te,J){return te=Ei(te,J),te.index=0,te.sibling=null,te}function k(te,J,oe){return te.index=oe,i?(oe=te.alternate,oe!==null?(oe=oe.index,oe<J?(te.flags|=67108866,J):oe):(te.flags|=67108866,J)):(te.flags|=1048576,J)}function M(te){return i&&te.alternate===null&&(te.flags|=67108866),te}function F(te,J,oe,we){return J===null||J.tag!==6?(J=Ep(oe,te.mode,we),J.return=te,J):(J=b(J,oe),J.return=te,J)}function K(te,J,oe,we){var Ve=oe.type;return Ve===N?ye(te,J,oe.props.children,we,oe.key):J!==null&&(J.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===R&&Uo(Ve)===J.type)?(J=b(J,oe.props),Ru(J,oe),J.return=te,J):(J=gh(oe.type,oe.key,oe.props,null,te.mode,we),Ru(J,oe),J.return=te,J)}function le(te,J,oe,we){return J===null||J.tag!==4||J.stateNode.containerInfo!==oe.containerInfo||J.stateNode.implementation!==oe.implementation?(J=Ap(oe,te.mode,we),J.return=te,J):(J=b(J,oe.children||[]),J.return=te,J)}function ye(te,J,oe,we,Ve){return J===null||J.tag!==7?(J=Lo(oe,te.mode,we,Ve),J.return=te,J):(J=b(J,oe),J.return=te,J)}function Ne(te,J,oe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Ep(""+J,te.mode,oe),J.return=te,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return oe=gh(J.type,J.key,J.props,null,te.mode,oe),Ru(oe,J),oe.return=te,oe;case j:return J=Ap(J,te.mode,oe),J.return=te,J;case R:return J=Uo(J),Ne(te,J,oe)}if(Z(J)||U(J))return J=Lo(J,te.mode,oe,null),J.return=te,J;if(typeof J.then=="function")return Ne(te,jh(J),oe);if(J.$$typeof===E)return Ne(te,vh(te,J),oe);Nh(te,J)}return null}function de(te,J,oe,we){var Ve=J!==null?J.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Ve!==null?null:F(te,J,""+oe,we);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return oe.key===Ve?K(te,J,oe,we):null;case j:return oe.key===Ve?le(te,J,oe,we):null;case R:return oe=Uo(oe),de(te,J,oe,we)}if(Z(oe)||U(oe))return Ve!==null?null:ye(te,J,oe,we,null);if(typeof oe.then=="function")return de(te,J,jh(oe),we);if(oe.$$typeof===E)return de(te,J,vh(te,oe),we);Nh(te,oe)}return null}function ge(te,J,oe,we,Ve){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return te=te.get(oe)||null,F(J,te,""+we,Ve);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case w:return te=te.get(we.key===null?oe:we.key)||null,K(J,te,we,Ve);case j:return te=te.get(we.key===null?oe:we.key)||null,le(J,te,we,Ve);case R:return we=Uo(we),ge(te,J,oe,we,Ve)}if(Z(we)||U(we))return te=te.get(oe)||null,ye(J,te,we,Ve,null);if(typeof we.then=="function")return ge(te,J,oe,jh(we),Ve);if(we.$$typeof===E)return ge(te,J,oe,vh(J,we),Ve);Nh(J,we)}return null}function De(te,J,oe,we){for(var Ve=null,ht=null,Ue=J,tt=J=0,ot=null;Ue!==null&&tt<oe.length;tt++){Ue.index>tt?(ot=Ue,Ue=null):ot=Ue.sibling;var mt=de(te,Ue,oe[tt],we);if(mt===null){Ue===null&&(Ue=ot);break}i&&Ue&&mt.alternate===null&&l(te,Ue),J=k(mt,J,tt),ht===null?Ve=mt:ht.sibling=mt,ht=mt,Ue=ot}if(tt===oe.length)return u(te,Ue),ct&&Ai(te,tt),Ve;if(Ue===null){for(;tt<oe.length;tt++)Ue=Ne(te,oe[tt],we),Ue!==null&&(J=k(Ue,J,tt),ht===null?Ve=Ue:ht.sibling=Ue,ht=Ue);return ct&&Ai(te,tt),Ve}for(Ue=g(Ue);tt<oe.length;tt++)ot=ge(Ue,te,tt,oe[tt],we),ot!==null&&(i&&ot.alternate!==null&&Ue.delete(ot.key===null?tt:ot.key),J=k(ot,J,tt),ht===null?Ve=ot:ht.sibling=ot,ht=ot);return i&&Ue.forEach(function(Zs){return l(te,Zs)}),ct&&Ai(te,tt),Ve}function Ye(te,J,oe,we){if(oe==null)throw Error(n(151));for(var Ve=null,ht=null,Ue=J,tt=J=0,ot=null,mt=oe.next();Ue!==null&&!mt.done;tt++,mt=oe.next()){Ue.index>tt?(ot=Ue,Ue=null):ot=Ue.sibling;var Zs=de(te,Ue,mt.value,we);if(Zs===null){Ue===null&&(Ue=ot);break}i&&Ue&&Zs.alternate===null&&l(te,Ue),J=k(Zs,J,tt),ht===null?Ve=Zs:ht.sibling=Zs,ht=Zs,Ue=ot}if(mt.done)return u(te,Ue),ct&&Ai(te,tt),Ve;if(Ue===null){for(;!mt.done;tt++,mt=oe.next())mt=Ne(te,mt.value,we),mt!==null&&(J=k(mt,J,tt),ht===null?Ve=mt:ht.sibling=mt,ht=mt);return ct&&Ai(te,tt),Ve}for(Ue=g(Ue);!mt.done;tt++,mt=oe.next())mt=ge(Ue,te,tt,mt.value,we),mt!==null&&(i&&mt.alternate!==null&&Ue.delete(mt.key===null?tt:mt.key),J=k(mt,J,tt),ht===null?Ve=mt:ht.sibling=mt,ht=mt);return i&&Ue.forEach(function(ML){return l(te,ML)}),ct&&Ai(te,tt),Ve}function At(te,J,oe,we){if(typeof oe=="object"&&oe!==null&&oe.type===N&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:e:{for(var Ve=oe.key;J!==null;){if(J.key===Ve){if(Ve=oe.type,Ve===N){if(J.tag===7){u(te,J.sibling),we=b(J,oe.props.children),we.return=te,te=we;break e}}else if(J.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===R&&Uo(Ve)===J.type){u(te,J.sibling),we=b(J,oe.props),Ru(we,oe),we.return=te,te=we;break e}u(te,J);break}else l(te,J);J=J.sibling}oe.type===N?(we=Lo(oe.props.children,te.mode,we,oe.key),we.return=te,te=we):(we=gh(oe.type,oe.key,oe.props,null,te.mode,we),Ru(we,oe),we.return=te,te=we)}return M(te);case j:e:{for(Ve=oe.key;J!==null;){if(J.key===Ve)if(J.tag===4&&J.stateNode.containerInfo===oe.containerInfo&&J.stateNode.implementation===oe.implementation){u(te,J.sibling),we=b(J,oe.children||[]),we.return=te,te=we;break e}else{u(te,J);break}else l(te,J);J=J.sibling}we=Ap(oe,te.mode,we),we.return=te,te=we}return M(te);case R:return oe=Uo(oe),At(te,J,oe,we)}if(Z(oe))return De(te,J,oe,we);if(U(oe)){if(Ve=U(oe),typeof Ve!="function")throw Error(n(150));return oe=Ve.call(oe),Ye(te,J,oe,we)}if(typeof oe.then=="function")return At(te,J,jh(oe),we);if(oe.$$typeof===E)return At(te,J,vh(te,oe),we);Nh(te,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,J!==null&&J.tag===6?(u(te,J.sibling),we=b(J,oe),we.return=te,te=we):(u(te,J),we=Ep(oe,te.mode,we),we.return=te,te=we),M(te)):u(te,J)}return function(te,J,oe,we){try{Pu=0;var Ve=At(te,J,oe,we);return nc=null,Ve}catch(Ue){if(Ue===rc||Ue===bh)throw Ue;var ht=En(29,Ue,null,te.mode);return ht.lanes=we,ht.return=te,ht}}}var Ho=o4(!0),l4=o4(!1),Ls=!1;function Up(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fp(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ds(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Bs(i,l,u){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(xt&2)!==0){var b=g.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),g.pending=l,l=mh(i),Gj(i,null,u),l}return hh(i,g,l,u),mh(i)}function Iu(i,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var g=l.lanes;g&=i.pendingLanes,u|=g,l.lanes=u,Wf(i,u)}}function Hp(i,l){var u=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var b=null,k=null;if(u=u.firstBaseUpdate,u!==null){do{var M={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};k===null?b=k=M:k=k.next=M,u=u.next}while(u!==null);k===null?b=k=l:k=k.next=l}else b=k=l;u={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:k,shared:g.shared,callbacks:g.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=l:i.next=l,u.lastBaseUpdate=l}var Wp=!1;function Lu(){if(Wp){var i=tc;if(i!==null)throw i}}function Du(i,l,u,g){Wp=!1;var b=i.updateQueue;Ls=!1;var k=b.firstBaseUpdate,M=b.lastBaseUpdate,F=b.shared.pending;if(F!==null){b.shared.pending=null;var K=F,le=K.next;K.next=null,M===null?k=le:M.next=le,M=K;var ye=i.alternate;ye!==null&&(ye=ye.updateQueue,F=ye.lastBaseUpdate,F!==M&&(F===null?ye.firstBaseUpdate=le:F.next=le,ye.lastBaseUpdate=K))}if(k!==null){var Ne=b.baseState;M=0,ye=le=K=null,F=k;do{var de=F.lane&-536870913,ge=de!==F.lane;if(ge?(st&de)===de:(g&de)===de){de!==0&&de===ec&&(Wp=!0),ye!==null&&(ye=ye.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var De=i,Ye=F;de=l;var At=u;switch(Ye.tag){case 1:if(De=Ye.payload,typeof De=="function"){Ne=De.call(At,Ne,de);break e}Ne=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Ye.payload,de=typeof De=="function"?De.call(At,Ne,de):De,de==null)break e;Ne=p({},Ne,de);break e;case 2:Ls=!0}}de=F.callback,de!==null&&(i.flags|=64,ge&&(i.flags|=8192),ge=b.callbacks,ge===null?b.callbacks=[de]:ge.push(de))}else ge={lane:de,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ye===null?(le=ye=ge,K=Ne):ye=ye.next=ge,M|=de;if(F=F.next,F===null){if(F=b.shared.pending,F===null)break;ge=F,F=ge.next,ge.next=null,b.lastBaseUpdate=ge,b.shared.pending=null}}while(!0);ye===null&&(K=Ne),b.baseState=K,b.firstBaseUpdate=le,b.lastBaseUpdate=ye,k===null&&(b.shared.lanes=0),Hs|=M,i.lanes=M,i.memoizedState=Ne}}function c4(i,l){if(typeof i!="function")throw Error(n(191,i));i.call(l)}function u4(i,l){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)c4(u[i],l)}var ac=H(null),kh=H(0);function d4(i,l){i=zi,ee(kh,i),ee(ac,l),zi=i|l.baseLanes}function Gp(){ee(kh,zi),ee(ac,ac.current)}function Vp(){zi=kh.current,G(ac),G(kh)}var An=H(null),Qn=null;function $s(i){var l=i.alternate;ee(sr,sr.current&1),ee(An,i),Qn===null&&(l===null||ac.current!==null||l.memoizedState!==null)&&(Qn=i)}function qp(i){ee(sr,sr.current),ee(An,i),Qn===null&&(Qn=i)}function f4(i){i.tag===22?(ee(sr,sr.current),ee(An,i),Qn===null&&(Qn=i)):zs()}function zs(){ee(sr,sr.current),ee(An,An.current)}function Tn(i){G(An),Qn===i&&(Qn=null),G(sr)}var sr=H(0);function Sh(i){for(var l=i;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Zx(u)||ev(u)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Mi=0,et=null,Ct=null,mr=null,_h=!1,ic=!1,Wo=!1,Ch=0,Bu=0,sc=null,jI=0;function Qt(){throw Error(n(321))}function Kp(i,l){if(l===null)return!1;for(var u=0;u<l.length&&u<i.length;u++)if(!Cn(i[u],l[u]))return!1;return!0}function Yp(i,l,u,g,b,k){return Mi=k,et=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,V.H=i===null||i.memoizedState===null?Y4:ux,Wo=!1,k=u(g,b),Wo=!1,ic&&(k=m4(l,u,g,b)),h4(i),k}function h4(i){V.H=Uu;var l=Ct!==null&&Ct.next!==null;if(Mi=0,mr=Ct=et=null,_h=!1,Bu=0,sc=null,l)throw Error(n(300));i===null||gr||(i=i.dependencies,i!==null&&xh(i)&&(gr=!0))}function m4(i,l,u,g){et=i;var b=0;do{if(ic&&(sc=null),Bu=0,ic=!1,25<=b)throw Error(n(301));if(b+=1,mr=Ct=null,i.updateQueue!=null){var k=i.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}V.H=X4,k=l(u,g)}while(ic);return k}function NI(){var i=V.H,l=i.useState()[0];return l=typeof l.then=="function"?$u(l):l,i=i.useState()[0],(Ct!==null?Ct.memoizedState:null)!==i&&(et.flags|=1024),l}function Xp(){var i=Ch!==0;return Ch=0,i}function Jp(i,l,u){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~u}function Qp(i){if(_h){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}_h=!1}Mi=0,mr=Ct=et=null,ic=!1,Bu=Ch=0,sc=null}function nn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?et.memoizedState=mr=i:mr=mr.next=i,mr}function or(){if(Ct===null){var i=et.alternate;i=i!==null?i.memoizedState:null}else i=Ct.next;var l=mr===null?et.memoizedState:mr.next;if(l!==null)mr=l,Ct=i;else{if(i===null)throw et.alternate===null?Error(n(467)):Error(n(310));Ct=i,i={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},mr===null?et.memoizedState=mr=i:mr=mr.next=i}return mr}function Eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $u(i){var l=Bu;return Bu+=1,sc===null&&(sc=[]),i=a4(sc,i,l),l=et,(mr===null?l.memoizedState:mr.next)===null&&(l=l.alternate,V.H=l===null||l.memoizedState===null?Y4:ux),i}function Ah(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return $u(i);if(i.$$typeof===E)return $r(i)}throw Error(n(438,String(i)))}function Zp(i){var l=null,u=et.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var g=et.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=Eh(),et.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(i),g=0;g<i;g++)u[g]=I;return l.index++,u}function Pi(i,l){return typeof l=="function"?l(i):l}function Th(i){var l=or();return ex(l,Ct,i)}function ex(i,l,u){var g=i.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=u;var b=i.baseQueue,k=g.pending;if(k!==null){if(b!==null){var M=b.next;b.next=k.next,k.next=M}l.baseQueue=b=k,g.pending=null}if(k=i.baseState,b===null)i.memoizedState=k;else{l=b.next;var F=M=null,K=null,le=l,ye=!1;do{var Ne=le.lane&-536870913;if(Ne!==le.lane?(st&Ne)===Ne:(Mi&Ne)===Ne){var de=le.revertLane;if(de===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),Ne===ec&&(ye=!0);else if((Mi&de)===de){le=le.next,de===ec&&(ye=!0);continue}else Ne={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(F=K=Ne,M=k):K=K.next=Ne,et.lanes|=de,Hs|=de;Ne=le.action,Wo&&u(k,Ne),k=le.hasEagerState?le.eagerState:u(k,Ne)}else de={lane:Ne,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(F=K=de,M=k):K=K.next=de,et.lanes|=Ne,Hs|=Ne;le=le.next}while(le!==null&&le!==l);if(K===null?M=k:K.next=F,!Cn(k,i.memoizedState)&&(gr=!0,ye&&(u=tc,u!==null)))throw u;i.memoizedState=k,i.baseState=M,i.baseQueue=K,g.lastRenderedState=k}return b===null&&(g.lanes=0),[i.memoizedState,g.dispatch]}function tx(i){var l=or(),u=l.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var g=u.dispatch,b=u.pending,k=l.memoizedState;if(b!==null){u.pending=null;var M=b=b.next;do k=i(k,M.action),M=M.next;while(M!==b);Cn(k,l.memoizedState)||(gr=!0),l.memoizedState=k,l.baseQueue===null&&(l.baseState=k),u.lastRenderedState=k}return[k,g]}function g4(i,l,u){var g=et,b=or(),k=ct;if(k){if(u===void 0)throw Error(n(407));u=u()}else u=l();var M=!Cn((Ct||b).memoizedState,u);if(M&&(b.memoizedState=u,gr=!0),b=b.queue,ax(v4.bind(null,g,b,i),[i]),b.getSnapshot!==l||M||mr!==null&&mr.memoizedState.tag&1){if(g.flags|=2048,oc(9,{destroy:void 0},x4.bind(null,g,b,u,l),null),Pt===null)throw Error(n(349));k||(Mi&127)!==0||p4(g,l,u)}return u}function p4(i,l,u){i.flags|=16384,i={getSnapshot:l,value:u},l=et.updateQueue,l===null?(l=Eh(),et.updateQueue=l,l.stores=[i]):(u=l.stores,u===null?l.stores=[i]:u.push(i))}function x4(i,l,u,g){l.value=u,l.getSnapshot=g,y4(l)&&b4(i)}function v4(i,l,u){return u(function(){y4(l)&&b4(i)})}function y4(i){var l=i.getSnapshot;i=i.value;try{var u=l();return!Cn(i,u)}catch{return!0}}function b4(i){var l=Io(i,2);l!==null&&vn(l,i,2)}function rx(i){var l=nn();if(typeof i=="function"){var u=i;if(i=u(),Wo){ve(!0);try{u()}finally{ve(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:i},l}function w4(i,l,u,g){return i.baseState=u,ex(i,Ct,typeof g=="function"?g:Pi)}function kI(i,l,u,g,b){if(Ph(i))throw Error(n(485));if(i=l.action,i!==null){var k={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){k.listeners.push(M)}};V.T!==null?u(!0):k.isTransition=!1,g(k),u=l.pending,u===null?(k.next=l.pending=k,j4(l,k)):(k.next=u.next,l.pending=u.next=k)}}function j4(i,l){var u=l.action,g=l.payload,b=i.state;if(l.isTransition){var k=V.T,M={};V.T=M;try{var F=u(b,g),K=V.S;K!==null&&K(M,F),N4(i,l,F)}catch(le){nx(i,l,le)}finally{k!==null&&M.types!==null&&(k.types=M.types),V.T=k}}else try{k=u(b,g),N4(i,l,k)}catch(le){nx(i,l,le)}}function N4(i,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){k4(i,l,g)},function(g){return nx(i,l,g)}):k4(i,l,u)}function k4(i,l,u){l.status="fulfilled",l.value=u,S4(l),i.state=u,l=i.pending,l!==null&&(u=l.next,u===l?i.pending=null:(u=u.next,l.next=u,j4(i,u)))}function nx(i,l,u){var g=i.pending;if(i.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=u,S4(l),l=l.next;while(l!==g)}i.action=null}function S4(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function _4(i,l){return l}function C4(i,l){if(ct){var u=Pt.formState;if(u!==null){e:{var g=et;if(ct){if($t){t:{for(var b=$t,k=Jn;b.nodeType!==8;){if(!k){b=null;break t}if(b=Zn(b.nextSibling),b===null){b=null;break t}}k=b.data,b=k==="F!"||k==="F"?b:null}if(b){$t=Zn(b.nextSibling),g=b.data==="F!";break e}}Rs(g)}g=!1}g&&(l=u[0])}}return u=nn(),u.memoizedState=u.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_4,lastRenderedState:l},u.queue=g,u=V4.bind(null,et,g),g.dispatch=u,g=rx(!1),k=cx.bind(null,et,!1,g.queue),g=nn(),b={state:l,dispatch:null,action:i,pending:null},g.queue=b,u=kI.bind(null,et,b,k,u),b.dispatch=u,g.memoizedState=i,[l,u,!1]}function E4(i){var l=or();return A4(l,Ct,i)}function A4(i,l,u){if(l=ex(i,l,_4)[0],i=Th(Pi)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=$u(l)}catch(M){throw M===rc?bh:M}else g=l;l=or();var b=l.queue,k=b.dispatch;return u!==l.memoizedState&&(et.flags|=2048,oc(9,{destroy:void 0},SI.bind(null,b,u),null)),[g,k,i]}function SI(i,l){i.action=l}function T4(i){var l=or(),u=Ct;if(u!==null)return A4(l,u,i);or(),l=l.memoizedState,u=or();var g=u.queue.dispatch;return u.memoizedState=i,[l,g,!1]}function oc(i,l,u,g){return i={tag:i,create:u,deps:g,inst:l,next:null},l=et.updateQueue,l===null&&(l=Eh(),et.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=i.next=i:(g=u.next,u.next=i,i.next=g,l.lastEffect=i),i}function O4(){return or().memoizedState}function Oh(i,l,u,g){var b=nn();et.flags|=i,b.memoizedState=oc(1|l,{destroy:void 0},u,g===void 0?null:g)}function Mh(i,l,u,g){var b=or();g=g===void 0?null:g;var k=b.memoizedState.inst;Ct!==null&&g!==null&&Kp(g,Ct.memoizedState.deps)?b.memoizedState=oc(l,k,u,g):(et.flags|=i,b.memoizedState=oc(1|l,k,u,g))}function M4(i,l){Oh(8390656,8,i,l)}function ax(i,l){Mh(2048,8,i,l)}function _I(i){et.flags|=4;var l=et.updateQueue;if(l===null)l=Eh(),et.updateQueue=l,l.events=[i];else{var u=l.events;u===null?l.events=[i]:u.push(i)}}function P4(i){var l=or().memoizedState;return _I({ref:l,nextImpl:i}),function(){if((xt&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}function R4(i,l){return Mh(4,2,i,l)}function I4(i,l){return Mh(4,4,i,l)}function L4(i,l){if(typeof l=="function"){i=i();var u=l(i);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function D4(i,l,u){u=u!=null?u.concat([i]):null,Mh(4,4,L4.bind(null,l,i),u)}function ix(){}function B4(i,l){var u=or();l=l===void 0?null:l;var g=u.memoizedState;return l!==null&&Kp(l,g[1])?g[0]:(u.memoizedState=[i,l],i)}function $4(i,l){var u=or();l=l===void 0?null:l;var g=u.memoizedState;if(l!==null&&Kp(l,g[1]))return g[0];if(g=i(),Wo){ve(!0);try{i()}finally{ve(!1)}}return u.memoizedState=[g,l],g}function sx(i,l,u){return u===void 0||(Mi&1073741824)!==0&&(st&261930)===0?i.memoizedState=l:(i.memoizedState=u,i=zN(),et.lanes|=i,Hs|=i,u)}function z4(i,l,u,g){return Cn(u,l)?u:ac.current!==null?(i=sx(i,u,g),Cn(i,l)||(gr=!0),i):(Mi&42)===0||(Mi&1073741824)!==0&&(st&261930)===0?(gr=!0,i.memoizedState=u):(i=zN(),et.lanes|=i,Hs|=i,l)}function U4(i,l,u,g,b){var k=X.p;X.p=k!==0&&8>k?k:8;var M=V.T,F={};V.T=F,cx(i,!1,l,u);try{var K=b(),le=V.S;if(le!==null&&le(F,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var ye=wI(K,g);zu(i,l,ye,Pn(i))}else zu(i,l,g,Pn(i))}catch(Ne){zu(i,l,{then:function(){},status:"rejected",reason:Ne},Pn())}finally{X.p=k,M!==null&&F.types!==null&&(M.types=F.types),V.T=M}}function CI(){}function ox(i,l,u,g){if(i.tag!==5)throw Error(n(476));var b=F4(i).queue;U4(i,b,l,re,u===null?CI:function(){return H4(i),u(g)})}function F4(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:re},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:u},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function H4(i){var l=F4(i);l.next===null&&(l=i.alternate.memoizedState),zu(i,l.next.queue,{},Pn())}function lx(){return $r(nd)}function W4(){return or().memoizedState}function G4(){return or().memoizedState}function EI(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var u=Pn();i=Ds(u);var g=Bs(l,i,u);g!==null&&(vn(g,l,u),Iu(g,l,u)),l={cache:Dp()},i.payload=l;return}l=l.return}}function AI(i,l,u){var g=Pn();u={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ph(i)?q4(l,u):(u=_p(i,l,u,g),u!==null&&(vn(u,i,g),K4(u,l,g)))}function V4(i,l,u){var g=Pn();zu(i,l,u,g)}function zu(i,l,u,g){var b={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Ph(i))q4(l,b);else{var k=i.alternate;if(i.lanes===0&&(k===null||k.lanes===0)&&(k=l.lastRenderedReducer,k!==null))try{var M=l.lastRenderedState,F=k(M,u);if(b.hasEagerState=!0,b.eagerState=F,Cn(F,M))return hh(i,l,b,0),Pt===null&&fh(),!1}catch{}if(u=_p(i,l,b,g),u!==null)return vn(u,i,g),K4(u,l,g),!0}return!1}function cx(i,l,u,g){if(g={lane:2,revertLane:Ux(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Ph(i)){if(l)throw Error(n(479))}else l=_p(i,u,g,2),l!==null&&vn(l,i,2)}function Ph(i){var l=i.alternate;return i===et||l!==null&&l===et}function q4(i,l){ic=_h=!0;var u=i.pending;u===null?l.next=l:(l.next=u.next,u.next=l),i.pending=l}function K4(i,l,u){if((u&4194048)!==0){var g=l.lanes;g&=i.pendingLanes,u|=g,l.lanes=u,Wf(i,u)}}var Uu={readContext:$r,use:Ah,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};Uu.useEffectEvent=Qt;var Y4={readContext:$r,use:Ah,useCallback:function(i,l){return nn().memoizedState=[i,l===void 0?null:l],i},useContext:$r,useEffect:M4,useImperativeHandle:function(i,l,u){u=u!=null?u.concat([i]):null,Oh(4194308,4,L4.bind(null,l,i),u)},useLayoutEffect:function(i,l){return Oh(4194308,4,i,l)},useInsertionEffect:function(i,l){Oh(4,2,i,l)},useMemo:function(i,l){var u=nn();l=l===void 0?null:l;var g=i();if(Wo){ve(!0);try{i()}finally{ve(!1)}}return u.memoizedState=[g,l],g},useReducer:function(i,l,u){var g=nn();if(u!==void 0){var b=u(l);if(Wo){ve(!0);try{u(l)}finally{ve(!1)}}}else b=l;return g.memoizedState=g.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},g.queue=i,i=i.dispatch=AI.bind(null,et,i),[g.memoizedState,i]},useRef:function(i){var l=nn();return i={current:i},l.memoizedState=i},useState:function(i){i=rx(i);var l=i.queue,u=V4.bind(null,et,l);return l.dispatch=u,[i.memoizedState,u]},useDebugValue:ix,useDeferredValue:function(i,l){var u=nn();return sx(u,i,l)},useTransition:function(){var i=rx(!1);return i=U4.bind(null,et,i.queue,!0,!1),nn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,u){var g=et,b=nn();if(ct){if(u===void 0)throw Error(n(407));u=u()}else{if(u=l(),Pt===null)throw Error(n(349));(st&127)!==0||p4(g,l,u)}b.memoizedState=u;var k={value:u,getSnapshot:l};return b.queue=k,M4(v4.bind(null,g,k,i),[i]),g.flags|=2048,oc(9,{destroy:void 0},x4.bind(null,g,k,u,l),null),u},useId:function(){var i=nn(),l=Pt.identifierPrefix;if(ct){var u=ti,g=ei;u=(g&~(1<<32-Se(g)-1)).toString(32)+u,l="_"+l+"R_"+u,u=Ch++,0<u&&(l+="H"+u.toString(32)),l+="_"}else u=jI++,l="_"+l+"r_"+u.toString(32)+"_";return i.memoizedState=l},useHostTransitionStatus:lx,useFormState:C4,useActionState:C4,useOptimistic:function(i){var l=nn();l.memoizedState=l.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=cx.bind(null,et,!0,u),u.dispatch=l,[i,l]},useMemoCache:Zp,useCacheRefresh:function(){return nn().memoizedState=EI.bind(null,et)},useEffectEvent:function(i){var l=nn(),u={impl:i};return l.memoizedState=u,function(){if((xt&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}},ux={readContext:$r,use:Ah,useCallback:B4,useContext:$r,useEffect:ax,useImperativeHandle:D4,useInsertionEffect:R4,useLayoutEffect:I4,useMemo:$4,useReducer:Th,useRef:O4,useState:function(){return Th(Pi)},useDebugValue:ix,useDeferredValue:function(i,l){var u=or();return z4(u,Ct.memoizedState,i,l)},useTransition:function(){var i=Th(Pi)[0],l=or().memoizedState;return[typeof i=="boolean"?i:$u(i),l]},useSyncExternalStore:g4,useId:W4,useHostTransitionStatus:lx,useFormState:E4,useActionState:E4,useOptimistic:function(i,l){var u=or();return w4(u,Ct,i,l)},useMemoCache:Zp,useCacheRefresh:G4};ux.useEffectEvent=P4;var X4={readContext:$r,use:Ah,useCallback:B4,useContext:$r,useEffect:ax,useImperativeHandle:D4,useInsertionEffect:R4,useLayoutEffect:I4,useMemo:$4,useReducer:tx,useRef:O4,useState:function(){return tx(Pi)},useDebugValue:ix,useDeferredValue:function(i,l){var u=or();return Ct===null?sx(u,i,l):z4(u,Ct.memoizedState,i,l)},useTransition:function(){var i=tx(Pi)[0],l=or().memoizedState;return[typeof i=="boolean"?i:$u(i),l]},useSyncExternalStore:g4,useId:W4,useHostTransitionStatus:lx,useFormState:T4,useActionState:T4,useOptimistic:function(i,l){var u=or();return Ct!==null?w4(u,Ct,i,l):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:Zp,useCacheRefresh:G4};X4.useEffectEvent=P4;function dx(i,l,u,g){l=i.memoizedState,u=u(g,l),u=u==null?l:p({},l,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var fx={enqueueSetState:function(i,l,u){i=i._reactInternals;var g=Pn(),b=Ds(g);b.payload=l,u!=null&&(b.callback=u),l=Bs(i,b,g),l!==null&&(vn(l,i,g),Iu(l,i,g))},enqueueReplaceState:function(i,l,u){i=i._reactInternals;var g=Pn(),b=Ds(g);b.tag=1,b.payload=l,u!=null&&(b.callback=u),l=Bs(i,b,g),l!==null&&(vn(l,i,g),Iu(l,i,g))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var u=Pn(),g=Ds(u);g.tag=2,l!=null&&(g.callback=l),l=Bs(i,g,u),l!==null&&(vn(l,i,u),Iu(l,i,u))}};function J4(i,l,u,g,b,k,M){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,k,M):l.prototype&&l.prototype.isPureReactComponent?!Cu(u,g)||!Cu(b,k):!0}function Q4(i,l,u,g){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,g),l.state!==i&&fx.enqueueReplaceState(l,l.state,null)}function Go(i,l){var u=l;if("ref"in l){u={};for(var g in l)g!=="ref"&&(u[g]=l[g])}if(i=i.defaultProps){u===l&&(u=p({},u));for(var b in i)u[b]===void 0&&(u[b]=i[b])}return u}function Z4(i){dh(i)}function eN(i){console.error(i)}function tN(i){dh(i)}function Rh(i,l){try{var u=i.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function rN(i,l,u){try{var g=i.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function hx(i,l,u){return u=Ds(u),u.tag=3,u.payload={element:null},u.callback=function(){Rh(i,l)},u}function nN(i){return i=Ds(i),i.tag=3,i}function aN(i,l,u,g){var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var k=g.value;i.payload=function(){return b(k)},i.callback=function(){rN(l,u,g)}}var M=u.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(i.callback=function(){rN(l,u,g),typeof b!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var F=g.stack;this.componentDidCatch(g.value,{componentStack:F!==null?F:""})})}function TI(i,l,u,g,b){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=u.alternate,l!==null&&Zl(l,u,b,!0),u=An.current,u!==null){switch(u.tag){case 31:case 13:return Qn===null?Vh():u.alternate===null&&Zt===0&&(Zt=3),u.flags&=-257,u.flags|=65536,u.lanes=b,g===wh?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([g]):l.add(g),Bx(i,g,b)),!1;case 22:return u.flags|=65536,g===wh?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([g]):u.add(g)),Bx(i,g,b)),!1}throw Error(n(435,u.tag))}return Bx(i,g,b),Vh(),!1}if(ct)return l=An.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,g!==Mp&&(i=Error(n(422),{cause:g}),Tu(Kn(i,u)))):(g!==Mp&&(l=Error(n(423),{cause:g}),Tu(Kn(l,u))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,g=Kn(g,u),b=hx(i.stateNode,g,b),Hp(i,b),Zt!==4&&(Zt=2)),!1;var k=Error(n(520),{cause:g});if(k=Kn(k,u),Yu===null?Yu=[k]:Yu.push(k),Zt!==4&&(Zt=2),l===null)return!0;g=Kn(g,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,i=b&-b,u.lanes|=i,i=hx(u.stateNode,g,i),Hp(u,i),!1;case 1:if(l=u.type,k=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Ws===null||!Ws.has(k))))return u.flags|=65536,b&=-b,u.lanes|=b,b=nN(b),aN(b,i,u,g),Hp(u,b),!1}u=u.return}while(u!==null);return!1}var mx=Error(n(461)),gr=!1;function zr(i,l,u,g){l.child=i===null?l4(l,null,u,g):Ho(l,i.child,u,g)}function iN(i,l,u,g,b){u=u.render;var k=l.ref;if("ref"in g){var M={};for(var F in g)F!=="ref"&&(M[F]=g[F])}else M=g;return $o(l),g=Yp(i,l,u,M,k,b),F=Xp(),i!==null&&!gr?(Jp(i,l,b),Ri(i,l,b)):(ct&&F&&Tp(l),l.flags|=1,zr(i,l,g,b),l.child)}function sN(i,l,u,g,b){if(i===null){var k=u.type;return typeof k=="function"&&!Cp(k)&&k.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=k,oN(i,l,k,g,b)):(i=gh(u.type,null,g,l,l.mode,b),i.ref=l.ref,i.return=l,l.child=i)}if(k=i.child,!jx(i,b)){var M=k.memoizedProps;if(u=u.compare,u=u!==null?u:Cu,u(M,g)&&i.ref===l.ref)return Ri(i,l,b)}return l.flags|=1,i=Ei(k,g),i.ref=l.ref,i.return=l,l.child=i}function oN(i,l,u,g,b){if(i!==null){var k=i.memoizedProps;if(Cu(k,g)&&i.ref===l.ref)if(gr=!1,l.pendingProps=g=k,jx(i,b))(i.flags&131072)!==0&&(gr=!0);else return l.lanes=i.lanes,Ri(i,l,b)}return gx(i,l,u,g,b)}function lN(i,l,u,g){var b=g.children,k=i!==null?i.memoizedState:null;if(i===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(k=k!==null?k.baseLanes|u:u,i!==null){for(g=l.child=i.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~k}else g=0,l.child=null;return cN(i,l,k,u,g)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&yh(l,k!==null?k.cachePool:null),k!==null?d4(l,k):Gp(),f4(l);else return g=l.lanes=536870912,cN(i,l,k!==null?k.baseLanes|u:u,u,g)}else k!==null?(yh(l,k.cachePool),d4(l,k),zs(),l.memoizedState=null):(i!==null&&yh(l,null),Gp(),zs());return zr(i,l,b,u),l.child}function Fu(i,l){return i!==null&&i.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function cN(i,l,u,g,b){var k=$p();return k=k===null?null:{parent:hr._currentValue,pool:k},l.memoizedState={baseLanes:u,cachePool:k},i!==null&&yh(l,null),Gp(),f4(l),i!==null&&Zl(i,l,g,!0),l.childLanes=b,null}function Ih(i,l){return l=Dh({mode:l.mode,children:l.children},i.mode),l.ref=i.ref,i.child=l,l.return=i,l}function uN(i,l,u){return Ho(l,i.child,null,u),i=Ih(l,l.pendingProps),i.flags|=2,Tn(l),l.memoizedState=null,i}function OI(i,l,u){var g=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,i===null){if(ct){if(g.mode==="hidden")return i=Ih(l,g),l.lanes=536870912,Fu(null,i);if(qp(l),(i=$t)?(i=j5(i,Jn),i=i!==null&&i.data==="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:Ms!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},u=qj(i),u.return=l,l.child=u,Br=l,$t=null)):i=null,i===null)throw Rs(l);return l.lanes=536870912,null}return Ih(l,g)}var k=i.memoizedState;if(k!==null){var M=k.dehydrated;if(qp(l),b)if(l.flags&256)l.flags&=-257,l=uN(i,l,u);else if(l.memoizedState!==null)l.child=i.child,l.flags|=128,l=null;else throw Error(n(558));else if(gr||Zl(i,l,u,!1),b=(u&i.childLanes)!==0,gr||b){if(g=Pt,g!==null&&(M=cu(g,u),M!==0&&M!==k.retryLane))throw k.retryLane=M,Io(i,M),vn(g,i,M),mx;Vh(),l=uN(i,l,u)}else i=k.treeContext,$t=Zn(M.nextSibling),Br=l,ct=!0,Ps=null,Jn=!1,i!==null&&Xj(l,i),l=Ih(l,g),l.flags|=4096;return l}return i=Ei(i.child,{mode:g.mode,children:g.children}),i.ref=l.ref,l.child=i,i.return=l,i}function Lh(i,l){var u=l.ref;if(u===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(i===null||i.ref!==u)&&(l.flags|=4194816)}}function gx(i,l,u,g,b){return $o(l),u=Yp(i,l,u,g,void 0,b),g=Xp(),i!==null&&!gr?(Jp(i,l,b),Ri(i,l,b)):(ct&&g&&Tp(l),l.flags|=1,zr(i,l,u,b),l.child)}function dN(i,l,u,g,b,k){return $o(l),l.updateQueue=null,u=m4(l,g,u,b),h4(i),g=Xp(),i!==null&&!gr?(Jp(i,l,k),Ri(i,l,k)):(ct&&g&&Tp(l),l.flags|=1,zr(i,l,u,k),l.child)}function fN(i,l,u,g,b){if($o(l),l.stateNode===null){var k=Yl,M=u.contextType;typeof M=="object"&&M!==null&&(k=$r(M)),k=new u(g,k),l.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=fx,l.stateNode=k,k._reactInternals=l,k=l.stateNode,k.props=g,k.state=l.memoizedState,k.refs={},Up(l),M=u.contextType,k.context=typeof M=="object"&&M!==null?$r(M):Yl,k.state=l.memoizedState,M=u.getDerivedStateFromProps,typeof M=="function"&&(dx(l,u,M,g),k.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(M=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),M!==k.state&&fx.enqueueReplaceState(k,k.state,null),Du(l,g,k,b),Lu(),k.state=l.memoizedState),typeof k.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(i===null){k=l.stateNode;var F=l.memoizedProps,K=Go(u,F);k.props=K;var le=k.context,ye=u.contextType;M=Yl,typeof ye=="object"&&ye!==null&&(M=$r(ye));var Ne=u.getDerivedStateFromProps;ye=typeof Ne=="function"||typeof k.getSnapshotBeforeUpdate=="function",F=l.pendingProps!==F,ye||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(F||le!==M)&&Q4(l,k,g,M),Ls=!1;var de=l.memoizedState;k.state=de,Du(l,g,k,b),Lu(),le=l.memoizedState,F||de!==le||Ls?(typeof Ne=="function"&&(dx(l,u,Ne,g),le=l.memoizedState),(K=Ls||J4(l,u,K,g,de,le,M))?(ye||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(l.flags|=4194308)):(typeof k.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=le),k.props=g,k.state=le,k.context=M,g=K):(typeof k.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{k=l.stateNode,Fp(i,l),M=l.memoizedProps,ye=Go(u,M),k.props=ye,Ne=l.pendingProps,de=k.context,le=u.contextType,K=Yl,typeof le=="object"&&le!==null&&(K=$r(le)),F=u.getDerivedStateFromProps,(le=typeof F=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(M!==Ne||de!==K)&&Q4(l,k,g,K),Ls=!1,de=l.memoizedState,k.state=de,Du(l,g,k,b),Lu();var ge=l.memoizedState;M!==Ne||de!==ge||Ls||i!==null&&i.dependencies!==null&&xh(i.dependencies)?(typeof F=="function"&&(dx(l,u,F,g),ge=l.memoizedState),(ye=Ls||J4(l,u,ye,g,de,ge,K)||i!==null&&i.dependencies!==null&&xh(i.dependencies))?(le||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(g,ge,K),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(g,ge,K)),typeof k.componentDidUpdate=="function"&&(l.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof k.componentDidUpdate!="function"||M===i.memoizedProps&&de===i.memoizedState||(l.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&de===i.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=ge),k.props=g,k.state=ge,k.context=K,g=ye):(typeof k.componentDidUpdate!="function"||M===i.memoizedProps&&de===i.memoizedState||(l.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&de===i.memoizedState||(l.flags|=1024),g=!1)}return k=g,Lh(i,l),g=(l.flags&128)!==0,k||g?(k=l.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:k.render(),l.flags|=1,i!==null&&g?(l.child=Ho(l,i.child,null,b),l.child=Ho(l,null,u,b)):zr(i,l,u,b),l.memoizedState=k.state,i=l.child):i=Ri(i,l,b),i}function hN(i,l,u,g){return Do(),l.flags|=256,zr(i,l,u,g),l.child}var px={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xx(i){return{baseLanes:i,cachePool:r4()}}function vx(i,l,u){return i=i!==null?i.childLanes&~u:0,l&&(i|=Mn),i}function mN(i,l,u){var g=l.pendingProps,b=!1,k=(l.flags&128)!==0,M;if((M=k)||(M=i!==null&&i.memoizedState===null?!1:(sr.current&2)!==0),M&&(b=!0,l.flags&=-129),M=(l.flags&32)!==0,l.flags&=-33,i===null){if(ct){if(b?$s(l):zs(),(i=$t)?(i=j5(i,Jn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:Ms!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},u=qj(i),u.return=l,l.child=u,Br=l,$t=null)):i=null,i===null)throw Rs(l);return ev(i)?l.lanes=32:l.lanes=536870912,null}var F=g.children;return g=g.fallback,b?(zs(),b=l.mode,F=Dh({mode:"hidden",children:F},b),g=Lo(g,b,u,null),F.return=l,g.return=l,F.sibling=g,l.child=F,g=l.child,g.memoizedState=xx(u),g.childLanes=vx(i,M,u),l.memoizedState=px,Fu(null,g)):($s(l),yx(l,F))}var K=i.memoizedState;if(K!==null&&(F=K.dehydrated,F!==null)){if(k)l.flags&256?($s(l),l.flags&=-257,l=bx(i,l,u)):l.memoizedState!==null?(zs(),l.child=i.child,l.flags|=128,l=null):(zs(),F=g.fallback,b=l.mode,g=Dh({mode:"visible",children:g.children},b),F=Lo(F,b,u,null),F.flags|=2,g.return=l,F.return=l,g.sibling=F,l.child=g,Ho(l,i.child,null,u),g=l.child,g.memoizedState=xx(u),g.childLanes=vx(i,M,u),l.memoizedState=px,l=Fu(null,g));else if($s(l),ev(F)){if(M=F.nextSibling&&F.nextSibling.dataset,M)var le=M.dgst;M=le,g=Error(n(419)),g.stack="",g.digest=M,Tu({value:g,source:null,stack:null}),l=bx(i,l,u)}else if(gr||Zl(i,l,u,!1),M=(u&i.childLanes)!==0,gr||M){if(M=Pt,M!==null&&(g=cu(M,u),g!==0&&g!==K.retryLane))throw K.retryLane=g,Io(i,g),vn(M,i,g),mx;Zx(F)||Vh(),l=bx(i,l,u)}else Zx(F)?(l.flags|=192,l.child=i.child,l=null):(i=K.treeContext,$t=Zn(F.nextSibling),Br=l,ct=!0,Ps=null,Jn=!1,i!==null&&Xj(l,i),l=yx(l,g.children),l.flags|=4096);return l}return b?(zs(),F=g.fallback,b=l.mode,K=i.child,le=K.sibling,g=Ei(K,{mode:"hidden",children:g.children}),g.subtreeFlags=K.subtreeFlags&65011712,le!==null?F=Ei(le,F):(F=Lo(F,b,u,null),F.flags|=2),F.return=l,g.return=l,g.sibling=F,l.child=g,Fu(null,g),g=l.child,F=i.child.memoizedState,F===null?F=xx(u):(b=F.cachePool,b!==null?(K=hr._currentValue,b=b.parent!==K?{parent:K,pool:K}:b):b=r4(),F={baseLanes:F.baseLanes|u,cachePool:b}),g.memoizedState=F,g.childLanes=vx(i,M,u),l.memoizedState=px,Fu(i.child,g)):($s(l),u=i.child,i=u.sibling,u=Ei(u,{mode:"visible",children:g.children}),u.return=l,u.sibling=null,i!==null&&(M=l.deletions,M===null?(l.deletions=[i],l.flags|=16):M.push(i)),l.child=u,l.memoizedState=null,u)}function yx(i,l){return l=Dh({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function Dh(i,l){return i=En(22,i,null,l),i.lanes=0,i}function bx(i,l,u){return Ho(l,i.child,null,u),i=yx(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function gN(i,l,u){i.lanes|=l;var g=i.alternate;g!==null&&(g.lanes|=l),Ip(i.return,l,u)}function wx(i,l,u,g,b,k){var M=i.memoizedState;M===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:b,treeForkCount:k}:(M.isBackwards=l,M.rendering=null,M.renderingStartTime=0,M.last=g,M.tail=u,M.tailMode=b,M.treeForkCount=k)}function pN(i,l,u){var g=l.pendingProps,b=g.revealOrder,k=g.tail;g=g.children;var M=sr.current,F=(M&2)!==0;if(F?(M=M&1|2,l.flags|=128):M&=1,ee(sr,M),zr(i,l,g,u),g=ct?Au:0,!F&&i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&gN(i,u,l);else if(i.tag===19)gN(i,u,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(b){case"forwards":for(u=l.child,b=null;u!==null;)i=u.alternate,i!==null&&Sh(i)===null&&(b=u),u=u.sibling;u=b,u===null?(b=l.child,l.child=null):(b=u.sibling,u.sibling=null),wx(l,!1,b,u,k,g);break;case"backwards":case"unstable_legacy-backwards":for(u=null,b=l.child,l.child=null;b!==null;){if(i=b.alternate,i!==null&&Sh(i)===null){l.child=b;break}i=b.sibling,b.sibling=u,u=b,b=i}wx(l,!0,u,null,k,g);break;case"together":wx(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function Ri(i,l,u){if(i!==null&&(l.dependencies=i.dependencies),Hs|=l.lanes,(u&l.childLanes)===0)if(i!==null){if(Zl(i,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(n(153));if(l.child!==null){for(i=l.child,u=Ei(i,i.pendingProps),l.child=u,u.return=l;i.sibling!==null;)i=i.sibling,u=u.sibling=Ei(i,i.pendingProps),u.return=l;u.sibling=null}return l.child}function jx(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&xh(i)))}function MI(i,l,u){switch(l.tag){case 3:Pe(l,l.stateNode.containerInfo),Is(l,hr,i.memoizedState.cache),Do();break;case 27:case 5:Ae(l);break;case 4:Pe(l,l.stateNode.containerInfo);break;case 10:Is(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,qp(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?($s(l),l.flags|=128,null):(u&l.child.childLanes)!==0?mN(i,l,u):($s(l),i=Ri(i,l,u),i!==null?i.sibling:null);$s(l);break;case 19:var b=(i.flags&128)!==0;if(g=(u&l.childLanes)!==0,g||(Zl(i,l,u,!1),g=(u&l.childLanes)!==0),b){if(g)return pN(i,l,u);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ee(sr,sr.current),g)break;return null;case 22:return l.lanes=0,lN(i,l,u,l.pendingProps);case 24:Is(l,hr,i.memoizedState.cache)}return Ri(i,l,u)}function xN(i,l,u){if(i!==null)if(i.memoizedProps!==l.pendingProps)gr=!0;else{if(!jx(i,u)&&(l.flags&128)===0)return gr=!1,MI(i,l,u);gr=(i.flags&131072)!==0}else gr=!1,ct&&(l.flags&1048576)!==0&&Yj(l,Au,l.index);switch(l.lanes=0,l.tag){case 16:e:{var g=l.pendingProps;if(i=Uo(l.elementType),l.type=i,typeof i=="function")Cp(i)?(g=Go(i,g),l.tag=1,l=fN(null,l,i,g,u)):(l.tag=0,l=gx(null,l,i,g,u));else{if(i!=null){var b=i.$$typeof;if(b===z){l.tag=11,l=iN(null,l,i,g,u);break e}else if(b===T){l.tag=14,l=sN(null,l,i,g,u);break e}}throw l=q(i)||i,Error(n(306,l,""))}}return l;case 0:return gx(i,l,l.type,l.pendingProps,u);case 1:return g=l.type,b=Go(g,l.pendingProps),fN(i,l,g,b,u);case 3:e:{if(Pe(l,l.stateNode.containerInfo),i===null)throw Error(n(387));g=l.pendingProps;var k=l.memoizedState;b=k.element,Fp(i,l),Du(l,g,null,u);var M=l.memoizedState;if(g=M.cache,Is(l,hr,g),g!==k.cache&&Lp(l,[hr],u,!0),Lu(),g=M.element,k.isDehydrated)if(k={element:g,isDehydrated:!1,cache:M.cache},l.updateQueue.baseState=k,l.memoizedState=k,l.flags&256){l=hN(i,l,g,u);break e}else if(g!==b){b=Kn(Error(n(424)),l),Tu(b),l=hN(i,l,g,u);break e}else for(i=l.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,$t=Zn(i.firstChild),Br=l,ct=!0,Ps=null,Jn=!0,u=l4(l,null,g,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Do(),g===b){l=Ri(i,l,u);break e}zr(i,l,g,u)}l=l.child}return l;case 26:return Lh(i,l),i===null?(u=E5(l.type,null,l.pendingProps,null))?l.memoizedState=u:ct||(u=l.type,i=l.pendingProps,g=Zh(_e.current).createElement(u),g[ur]=l,g[Ar]=i,Ur(g,u,i),dr(g),l.stateNode=g):l.memoizedState=E5(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return Ae(l),i===null&&ct&&(g=l.stateNode=S5(l.type,l.pendingProps,_e.current),Br=l,Jn=!0,b=$t,Ks(l.type)?(tv=b,$t=Zn(g.firstChild)):$t=b),zr(i,l,l.pendingProps.children,u),Lh(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&ct&&((b=g=$t)&&(g=lL(g,l.type,l.pendingProps,Jn),g!==null?(l.stateNode=g,Br=l,$t=Zn(g.firstChild),Jn=!1,b=!0):b=!1),b||Rs(l)),Ae(l),b=l.type,k=l.pendingProps,M=i!==null?i.memoizedProps:null,g=k.children,Xx(b,k)?g=null:M!==null&&Xx(b,M)&&(l.flags|=32),l.memoizedState!==null&&(b=Yp(i,l,NI,null,null,u),nd._currentValue=b),Lh(i,l),zr(i,l,g,u),l.child;case 6:return i===null&&ct&&((i=u=$t)&&(u=cL(u,l.pendingProps,Jn),u!==null?(l.stateNode=u,Br=l,$t=null,i=!0):i=!1),i||Rs(l)),null;case 13:return mN(i,l,u);case 4:return Pe(l,l.stateNode.containerInfo),g=l.pendingProps,i===null?l.child=Ho(l,null,g,u):zr(i,l,g,u),l.child;case 11:return iN(i,l,l.type,l.pendingProps,u);case 7:return zr(i,l,l.pendingProps,u),l.child;case 8:return zr(i,l,l.pendingProps.children,u),l.child;case 12:return zr(i,l,l.pendingProps.children,u),l.child;case 10:return g=l.pendingProps,Is(l,l.type,g.value),zr(i,l,g.children,u),l.child;case 9:return b=l.type._context,g=l.pendingProps.children,$o(l),b=$r(b),g=g(b),l.flags|=1,zr(i,l,g,u),l.child;case 14:return sN(i,l,l.type,l.pendingProps,u);case 15:return oN(i,l,l.type,l.pendingProps,u);case 19:return pN(i,l,u);case 31:return OI(i,l,u);case 22:return lN(i,l,u,l.pendingProps);case 24:return $o(l),g=$r(hr),i===null?(b=$p(),b===null&&(b=Pt,k=Dp(),b.pooledCache=k,k.refCount++,k!==null&&(b.pooledCacheLanes|=u),b=k),l.memoizedState={parent:g,cache:b},Up(l),Is(l,hr,b)):((i.lanes&u)!==0&&(Fp(i,l),Du(l,null,null,u),Lu()),b=i.memoizedState,k=l.memoizedState,b.parent!==g?(b={parent:g,cache:g},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),Is(l,hr,g)):(g=k.cache,Is(l,hr,g),g!==b.cache&&Lp(l,[hr],u,!0))),zr(i,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function Ii(i){i.flags|=4}function Nx(i,l,u,g,b){if((l=(i.mode&32)!==0)&&(l=!1),l){if(i.flags|=16777216,(b&335544128)===b)if(i.stateNode.complete)i.flags|=8192;else if(WN())i.flags|=8192;else throw Fo=wh,zp}else i.flags&=-16777217}function vN(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!P5(l))if(WN())i.flags|=8192;else throw Fo=wh,zp}function Bh(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?Hf():536870912,i.lanes|=l,dc|=l)}function Hu(i,l){if(!ct)switch(i.tailMode){case"hidden":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function zt(i){var l=i.alternate!==null&&i.alternate.child===i.child,u=0,g=0;if(l)for(var b=i.child;b!==null;)u|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)u|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=g,i.childLanes=u,l}function PI(i,l,u){var g=l.pendingProps;switch(Op(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(l),null;case 1:return zt(l),null;case 3:return u=l.stateNode,g=null,i!==null&&(g=i.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),Oi(hr),se(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Ql(l)?Ii(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Pp())),zt(l),null;case 26:var b=l.type,k=l.memoizedState;return i===null?(Ii(l),k!==null?(zt(l),vN(l,k)):(zt(l),Nx(l,b,null,g,u))):k?k!==i.memoizedState?(Ii(l),zt(l),vN(l,k)):(zt(l),l.flags&=-16777217):(i=i.memoizedProps,i!==g&&Ii(l),zt(l),Nx(l,b,i,g,u)),null;case 27:if(Ce(l),u=_e.current,b=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==g&&Ii(l);else{if(!g){if(l.stateNode===null)throw Error(n(166));return zt(l),null}i=Q.current,Ql(l)?Jj(l):(i=S5(b,g,u),l.stateNode=i,Ii(l))}return zt(l),null;case 5:if(Ce(l),b=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==g&&Ii(l);else{if(!g){if(l.stateNode===null)throw Error(n(166));return zt(l),null}if(k=Q.current,Ql(l))Jj(l);else{var M=Zh(_e.current);switch(k){case 1:k=M.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:k=M.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":k=M.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":k=M.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":k=M.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof g.is=="string"?M.createElement("select",{is:g.is}):M.createElement("select"),g.multiple?k.multiple=!0:g.size&&(k.size=g.size);break;default:k=typeof g.is=="string"?M.createElement(b,{is:g.is}):M.createElement(b)}}k[ur]=l,k[Ar]=g;e:for(M=l.child;M!==null;){if(M.tag===5||M.tag===6)k.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===l)break e;for(;M.sibling===null;){if(M.return===null||M.return===l)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}l.stateNode=k;e:switch(Ur(k,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Ii(l)}}return zt(l),Nx(l,l.type,i===null?null:i.memoizedProps,l.pendingProps,u),null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==g&&Ii(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(i=_e.current,Ql(l)){if(i=l.stateNode,u=l.memoizedProps,g=null,b=Br,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}i[ur]=l,i=!!(i.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||m5(i.nodeValue,u)),i||Rs(l,!0)}else i=Zh(i).createTextNode(g),i[ur]=l,l.stateNode=i}return zt(l),null;case 31:if(u=l.memoizedState,i===null||i.memoizedState!==null){if(g=Ql(l),u!==null){if(i===null){if(!g)throw Error(n(318));if(i=l.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[ur]=l}else Do(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;zt(l),i=!1}else u=Pp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return l.flags&256?(Tn(l),l):(Tn(l),null);if((l.flags&128)!==0)throw Error(n(558))}return zt(l),null;case 13:if(g=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=Ql(l),g!==null&&g.dehydrated!==null){if(i===null){if(!b)throw Error(n(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[ur]=l}else Do(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;zt(l),b=!1}else b=Pp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(Tn(l),l):(Tn(l),null)}return Tn(l),(l.flags&128)!==0?(l.lanes=u,l):(u=g!==null,i=i!==null&&i.memoizedState!==null,u&&(g=l.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),k=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(k=g.memoizedState.cachePool.pool),k!==b&&(g.flags|=2048)),u!==i&&u&&(l.child.flags|=8192),Bh(l,l.updateQueue),zt(l),null);case 4:return se(),i===null&&Gx(l.stateNode.containerInfo),zt(l),null;case 10:return Oi(l.type),zt(l),null;case 19:if(G(sr),g=l.memoizedState,g===null)return zt(l),null;if(b=(l.flags&128)!==0,k=g.rendering,k===null)if(b)Hu(g,!1);else{if(Zt!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(k=Sh(i),k!==null){for(l.flags|=128,Hu(g,!1),i=k.updateQueue,l.updateQueue=i,Bh(l,i),l.subtreeFlags=0,i=u,u=l.child;u!==null;)Vj(u,i),u=u.sibling;return ee(sr,sr.current&1|2),ct&&Ai(l,g.treeForkCount),l.child}i=i.sibling}g.tail!==null&&lt()>Hh&&(l.flags|=128,b=!0,Hu(g,!1),l.lanes=4194304)}else{if(!b)if(i=Sh(k),i!==null){if(l.flags|=128,b=!0,i=i.updateQueue,l.updateQueue=i,Bh(l,i),Hu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!k.alternate&&!ct)return zt(l),null}else 2*lt()-g.renderingStartTime>Hh&&u!==536870912&&(l.flags|=128,b=!0,Hu(g,!1),l.lanes=4194304);g.isBackwards?(k.sibling=l.child,l.child=k):(i=g.last,i!==null?i.sibling=k:l.child=k,g.last=k)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=lt(),i.sibling=null,u=sr.current,ee(sr,b?u&1|2:u&1),ct&&Ai(l,g.treeForkCount),i):(zt(l),null);case 22:case 23:return Tn(l),Vp(),g=l.memoizedState!==null,i!==null?i.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(u&536870912)!==0&&(l.flags&128)===0&&(zt(l),l.subtreeFlags&6&&(l.flags|=8192)):zt(l),u=l.updateQueue,u!==null&&Bh(l,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==u&&(l.flags|=2048),i!==null&&G(zo),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),Oi(hr),zt(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function RI(i,l){switch(Op(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return Oi(hr),se(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return Ce(l),null;case 31:if(l.memoizedState!==null){if(Tn(l),l.alternate===null)throw Error(n(340));Do()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 13:if(Tn(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Do()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return G(sr),null;case 4:return se(),null;case 10:return Oi(l.type),null;case 22:case 23:return Tn(l),Vp(),i!==null&&G(zo),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return Oi(hr),null;case 25:return null;default:return null}}function yN(i,l){switch(Op(l),l.tag){case 3:Oi(hr),se();break;case 26:case 27:case 5:Ce(l);break;case 4:se();break;case 31:l.memoizedState!==null&&Tn(l);break;case 13:Tn(l);break;case 19:G(sr);break;case 10:Oi(l.type);break;case 22:case 23:Tn(l),Vp(),i!==null&&G(zo);break;case 24:Oi(hr)}}function Wu(i,l){try{var u=l.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var b=g.next;u=b;do{if((u.tag&i)===i){g=void 0;var k=u.create,M=u.inst;g=k(),M.destroy=g}u=u.next}while(u!==b)}}catch(F){Nt(l,l.return,F)}}function Us(i,l,u){try{var g=l.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var k=b.next;g=k;do{if((g.tag&i)===i){var M=g.inst,F=M.destroy;if(F!==void 0){M.destroy=void 0,b=l;var K=u,le=F;try{le()}catch(ye){Nt(b,K,ye)}}}g=g.next}while(g!==k)}}catch(ye){Nt(l,l.return,ye)}}function bN(i){var l=i.updateQueue;if(l!==null){var u=i.stateNode;try{u4(l,u)}catch(g){Nt(i,i.return,g)}}}function wN(i,l,u){u.props=Go(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(g){Nt(i,l,g)}}function Gu(i,l){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var g=i.stateNode;break;case 30:g=i.stateNode;break;default:g=i.stateNode}typeof u=="function"?i.refCleanup=u(g):u.current=g}}catch(b){Nt(i,l,b)}}function ri(i,l){var u=i.ref,g=i.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(b){Nt(i,l,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(b){Nt(i,l,b)}else u.current=null}function jN(i){var l=i.type,u=i.memoizedProps,g=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break e;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(b){Nt(i,i.return,b)}}function kx(i,l,u){try{var g=i.stateNode;rL(g,i.type,u,l),g[Ar]=l}catch(b){Nt(i,i.return,b)}}function NN(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ks(i.type)||i.tag===4}function Sx(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||NN(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ks(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function _x(i,l,u){var g=i.tag;if(g===5||g===6)i=i.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(i),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=pa));else if(g!==4&&(g===27&&Ks(i.type)&&(u=i.stateNode,l=null),i=i.child,i!==null))for(_x(i,l,u),i=i.sibling;i!==null;)_x(i,l,u),i=i.sibling}function $h(i,l,u){var g=i.tag;if(g===5||g===6)i=i.stateNode,l?u.insertBefore(i,l):u.appendChild(i);else if(g!==4&&(g===27&&Ks(i.type)&&(u=i.stateNode),i=i.child,i!==null))for($h(i,l,u),i=i.sibling;i!==null;)$h(i,l,u),i=i.sibling}function kN(i){var l=i.stateNode,u=i.memoizedProps;try{for(var g=i.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);Ur(l,g,u),l[ur]=i,l[Ar]=u}catch(k){Nt(i,i.return,k)}}var Li=!1,pr=!1,Cx=!1,SN=typeof WeakSet=="function"?WeakSet:Set,Or=null;function II(i,l){if(i=i.containerInfo,Kx=s0,i=Dj(i),bp(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var b=g.anchorOffset,k=g.focusNode;g=g.focusOffset;try{u.nodeType,k.nodeType}catch{u=null;break e}var M=0,F=-1,K=-1,le=0,ye=0,Ne=i,de=null;t:for(;;){for(var ge;Ne!==u||b!==0&&Ne.nodeType!==3||(F=M+b),Ne!==k||g!==0&&Ne.nodeType!==3||(K=M+g),Ne.nodeType===3&&(M+=Ne.nodeValue.length),(ge=Ne.firstChild)!==null;)de=Ne,Ne=ge;for(;;){if(Ne===i)break t;if(de===u&&++le===b&&(F=M),de===k&&++ye===g&&(K=M),(ge=Ne.nextSibling)!==null)break;Ne=de,de=Ne.parentNode}Ne=ge}u=F===-1||K===-1?null:{start:F,end:K}}else u=null}u=u||{start:0,end:0}}else u=null;for(Yx={focusedElem:i,selectionRange:u},s0=!1,Or=l;Or!==null;)if(l=Or,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,Or=i;else for(;Or!==null;){switch(l=Or,k=l.alternate,i=l.flags,l.tag){case 0:if((i&4)!==0&&(i=l.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)b=i[u],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&k!==null){i=void 0,u=l,b=k.memoizedProps,k=k.memoizedState,g=u.stateNode;try{var De=Go(u.type,b);i=g.getSnapshotBeforeUpdate(De,k),g.__reactInternalSnapshotBeforeUpdate=i}catch(Ye){Nt(u,u.return,Ye)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,u=i.nodeType,u===9)Qx(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Qx(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=l.sibling,i!==null){i.return=l.return,Or=i;break}Or=l.return}}function _N(i,l,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:Bi(i,u),g&4&&Wu(5,u);break;case 1:if(Bi(i,u),g&4)if(i=u.stateNode,l===null)try{i.componentDidMount()}catch(M){Nt(u,u.return,M)}else{var b=Go(u.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(b,l,i.__reactInternalSnapshotBeforeUpdate)}catch(M){Nt(u,u.return,M)}}g&64&&bN(u),g&512&&Gu(u,u.return);break;case 3:if(Bi(i,u),g&64&&(i=u.updateQueue,i!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{u4(i,l)}catch(M){Nt(u,u.return,M)}}break;case 27:l===null&&g&4&&kN(u);case 26:case 5:Bi(i,u),l===null&&g&4&&jN(u),g&512&&Gu(u,u.return);break;case 12:Bi(i,u);break;case 31:Bi(i,u),g&4&&AN(i,u);break;case 13:Bi(i,u),g&4&&TN(i,u),g&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=WI.bind(null,u),uL(i,u))));break;case 22:if(g=u.memoizedState!==null||Li,!g){l=l!==null&&l.memoizedState!==null||pr,b=Li;var k=pr;Li=g,(pr=l)&&!k?$i(i,u,(u.subtreeFlags&8772)!==0):Bi(i,u),Li=b,pr=k}break;case 30:break;default:Bi(i,u)}}function CN(i){var l=i.alternate;l!==null&&(i.alternate=null,CN(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&Il(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ht=null,mn=!1;function Di(i,l,u){for(u=u.child;u!==null;)EN(i,l,u),u=u.sibling}function EN(i,l,u){if(ce&&typeof ce.onCommitFiberUnmount=="function")try{ce.onCommitFiberUnmount(he,u)}catch{}switch(u.tag){case 26:pr||ri(u,l),Di(i,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:pr||ri(u,l);var g=Ht,b=mn;Ks(u.type)&&(Ht=u.stateNode,mn=!1),Di(i,l,u),ed(u.stateNode),Ht=g,mn=b;break;case 5:pr||ri(u,l);case 6:if(g=Ht,b=mn,Ht=null,Di(i,l,u),Ht=g,mn=b,Ht!==null)if(mn)try{(Ht.nodeType===9?Ht.body:Ht.nodeName==="HTML"?Ht.ownerDocument.body:Ht).removeChild(u.stateNode)}catch(k){Nt(u,l,k)}else try{Ht.removeChild(u.stateNode)}catch(k){Nt(u,l,k)}break;case 18:Ht!==null&&(mn?(i=Ht,b5(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),yc(i)):b5(Ht,u.stateNode));break;case 4:g=Ht,b=mn,Ht=u.stateNode.containerInfo,mn=!0,Di(i,l,u),Ht=g,mn=b;break;case 0:case 11:case 14:case 15:Us(2,u,l),pr||Us(4,u,l),Di(i,l,u);break;case 1:pr||(ri(u,l),g=u.stateNode,typeof g.componentWillUnmount=="function"&&wN(u,l,g)),Di(i,l,u);break;case 21:Di(i,l,u);break;case 22:pr=(g=pr)||u.memoizedState!==null,Di(i,l,u),pr=g;break;default:Di(i,l,u)}}function AN(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{yc(i)}catch(u){Nt(l,l.return,u)}}}function TN(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{yc(i)}catch(u){Nt(l,l.return,u)}}function LI(i){switch(i.tag){case 31:case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new SN),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new SN),l;default:throw Error(n(435,i.tag))}}function zh(i,l){var u=LI(i);l.forEach(function(g){if(!u.has(g)){u.add(g);var b=GI.bind(null,i,g);g.then(b,b)}})}function gn(i,l){var u=l.deletions;if(u!==null)for(var g=0;g<u.length;g++){var b=u[g],k=i,M=l,F=M;e:for(;F!==null;){switch(F.tag){case 27:if(Ks(F.type)){Ht=F.stateNode,mn=!1;break e}break;case 5:Ht=F.stateNode,mn=!1;break e;case 3:case 4:Ht=F.stateNode.containerInfo,mn=!0;break e}F=F.return}if(Ht===null)throw Error(n(160));EN(k,M,b),Ht=null,mn=!1,k=b.alternate,k!==null&&(k.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)ON(l,i),l=l.sibling}var ja=null;function ON(i,l){var u=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:gn(l,i),pn(i),g&4&&(Us(3,i,i.return),Wu(3,i),Us(5,i,i.return));break;case 1:gn(l,i),pn(i),g&512&&(pr||u===null||ri(u,u.return)),g&64&&Li&&(i=i.updateQueue,i!==null&&(g=i.callbacks,g!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var b=ja;if(gn(l,i),pn(i),g&512&&(pr||u===null||ri(u,u.return)),g&4){var k=u!==null?u.memoizedState:null;if(g=i.memoizedState,u===null)if(g===null)if(i.stateNode===null){e:{g=i.type,u=i.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":k=b.getElementsByTagName("title")[0],(!k||k[Ha]||k[ur]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=b.createElement(g),b.head.insertBefore(k,b.querySelector("head > title"))),Ur(k,g,u),k[ur]=i,dr(k),g=k;break e;case"link":var M=O5("link","href",b).get(g+(u.href||""));if(M){for(var F=0;F<M.length;F++)if(k=M[F],k.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&k.getAttribute("rel")===(u.rel==null?null:u.rel)&&k.getAttribute("title")===(u.title==null?null:u.title)&&k.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){M.splice(F,1);break t}}k=b.createElement(g),Ur(k,g,u),b.head.appendChild(k);break;case"meta":if(M=O5("meta","content",b).get(g+(u.content||""))){for(F=0;F<M.length;F++)if(k=M[F],k.getAttribute("content")===(u.content==null?null:""+u.content)&&k.getAttribute("name")===(u.name==null?null:u.name)&&k.getAttribute("property")===(u.property==null?null:u.property)&&k.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&k.getAttribute("charset")===(u.charSet==null?null:u.charSet)){M.splice(F,1);break t}}k=b.createElement(g),Ur(k,g,u),b.head.appendChild(k);break;default:throw Error(n(468,g))}k[ur]=i,dr(k),g=k}i.stateNode=g}else M5(b,i.type,i.stateNode);else i.stateNode=T5(b,g,i.memoizedProps);else k!==g?(k===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):k.count--,g===null?M5(b,i.type,i.stateNode):T5(b,g,i.memoizedProps)):g===null&&i.stateNode!==null&&kx(i,i.memoizedProps,u.memoizedProps)}break;case 27:gn(l,i),pn(i),g&512&&(pr||u===null||ri(u,u.return)),u!==null&&g&4&&kx(i,i.memoizedProps,u.memoizedProps);break;case 5:if(gn(l,i),pn(i),g&512&&(pr||u===null||ri(u,u.return)),i.flags&32){b=i.stateNode;try{hn(b,"")}catch(De){Nt(i,i.return,De)}}g&4&&i.stateNode!=null&&(b=i.memoizedProps,kx(i,b,u!==null?u.memoizedProps:b)),g&1024&&(Cx=!0);break;case 6:if(gn(l,i),pn(i),g&4){if(i.stateNode===null)throw Error(n(162));g=i.memoizedProps,u=i.stateNode;try{u.nodeValue=g}catch(De){Nt(i,i.return,De)}}break;case 3:if(r0=null,b=ja,ja=e0(l.containerInfo),gn(l,i),ja=b,pn(i),g&4&&u!==null&&u.memoizedState.isDehydrated)try{yc(l.containerInfo)}catch(De){Nt(i,i.return,De)}Cx&&(Cx=!1,MN(i));break;case 4:g=ja,ja=e0(i.stateNode.containerInfo),gn(l,i),pn(i),ja=g;break;case 12:gn(l,i),pn(i);break;case 31:gn(l,i),pn(i),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,zh(i,g)));break;case 13:gn(l,i),pn(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Fh=lt()),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,zh(i,g)));break;case 22:b=i.memoizedState!==null;var K=u!==null&&u.memoizedState!==null,le=Li,ye=pr;if(Li=le||b,pr=ye||K,gn(l,i),pr=ye,Li=le,pn(i),g&8192)e:for(l=i.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(u===null||K||Li||pr||Vo(i)),u=null,l=i;;){if(l.tag===5||l.tag===26){if(u===null){K=u=l;try{if(k=K.stateNode,b)M=k.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{F=K.stateNode;var Ne=K.memoizedProps.style,de=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null;F.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(De){Nt(K,K.return,De)}}}else if(l.tag===6){if(u===null){K=l;try{K.stateNode.nodeValue=b?"":K.memoizedProps}catch(De){Nt(K,K.return,De)}}}else if(l.tag===18){if(u===null){K=l;try{var ge=K.stateNode;b?w5(ge,!0):w5(K.stateNode,!1)}catch(De){Nt(K,K.return,De)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=i.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,zh(i,u))));break;case 19:gn(l,i),pn(i),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,zh(i,g)));break;case 30:break;case 21:break;default:gn(l,i),pn(i)}}function pn(i){var l=i.flags;if(l&2){try{for(var u,g=i.return;g!==null;){if(NN(g)){u=g;break}g=g.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var b=u.stateNode,k=Sx(i);$h(i,k,b);break;case 5:var M=u.stateNode;u.flags&32&&(hn(M,""),u.flags&=-33);var F=Sx(i);$h(i,F,M);break;case 3:case 4:var K=u.stateNode.containerInfo,le=Sx(i);_x(i,le,K);break;default:throw Error(n(161))}}catch(ye){Nt(i,i.return,ye)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function MN(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;MN(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function Bi(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)_N(i,l.alternate,l),l=l.sibling}function Vo(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:Us(4,l,l.return),Vo(l);break;case 1:ri(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&wN(l,l.return,u),Vo(l);break;case 27:ed(l.stateNode);case 26:case 5:ri(l,l.return),Vo(l);break;case 22:l.memoizedState===null&&Vo(l);break;case 30:Vo(l);break;default:Vo(l)}i=i.sibling}}function $i(i,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,b=i,k=l,M=k.flags;switch(k.tag){case 0:case 11:case 15:$i(b,k,u),Wu(4,k);break;case 1:if($i(b,k,u),g=k,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(le){Nt(g,g.return,le)}if(g=k,b=g.updateQueue,b!==null){var F=g.stateNode;try{var K=b.shared.hiddenCallbacks;if(K!==null)for(b.shared.hiddenCallbacks=null,b=0;b<K.length;b++)c4(K[b],F)}catch(le){Nt(g,g.return,le)}}u&&M&64&&bN(k),Gu(k,k.return);break;case 27:kN(k);case 26:case 5:$i(b,k,u),u&&g===null&&M&4&&jN(k),Gu(k,k.return);break;case 12:$i(b,k,u);break;case 31:$i(b,k,u),u&&M&4&&AN(b,k);break;case 13:$i(b,k,u),u&&M&4&&TN(b,k);break;case 22:k.memoizedState===null&&$i(b,k,u),Gu(k,k.return);break;case 30:break;default:$i(b,k,u)}l=l.sibling}}function Ex(i,l){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&Ou(u))}function Ax(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&Ou(i))}function Na(i,l,u,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)PN(i,l,u,g),l=l.sibling}function PN(i,l,u,g){var b=l.flags;switch(l.tag){case 0:case 11:case 15:Na(i,l,u,g),b&2048&&Wu(9,l);break;case 1:Na(i,l,u,g);break;case 3:Na(i,l,u,g),b&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&Ou(i)));break;case 12:if(b&2048){Na(i,l,u,g),i=l.stateNode;try{var k=l.memoizedProps,M=k.id,F=k.onPostCommit;typeof F=="function"&&F(M,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(K){Nt(l,l.return,K)}}else Na(i,l,u,g);break;case 31:Na(i,l,u,g);break;case 13:Na(i,l,u,g);break;case 23:break;case 22:k=l.stateNode,M=l.alternate,l.memoizedState!==null?k._visibility&2?Na(i,l,u,g):Vu(i,l):k._visibility&2?Na(i,l,u,g):(k._visibility|=2,lc(i,l,u,g,(l.subtreeFlags&10256)!==0||!1)),b&2048&&Ex(M,l);break;case 24:Na(i,l,u,g),b&2048&&Ax(l.alternate,l);break;default:Na(i,l,u,g)}}function lc(i,l,u,g,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var k=i,M=l,F=u,K=g,le=M.flags;switch(M.tag){case 0:case 11:case 15:lc(k,M,F,K,b),Wu(8,M);break;case 23:break;case 22:var ye=M.stateNode;M.memoizedState!==null?ye._visibility&2?lc(k,M,F,K,b):Vu(k,M):(ye._visibility|=2,lc(k,M,F,K,b)),b&&le&2048&&Ex(M.alternate,M);break;case 24:lc(k,M,F,K,b),b&&le&2048&&Ax(M.alternate,M);break;default:lc(k,M,F,K,b)}l=l.sibling}}function Vu(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=i,g=l,b=g.flags;switch(g.tag){case 22:Vu(u,g),b&2048&&Ex(g.alternate,g);break;case 24:Vu(u,g),b&2048&&Ax(g.alternate,g);break;default:Vu(u,g)}l=l.sibling}}var qu=8192;function cc(i,l,u){if(i.subtreeFlags&qu)for(i=i.child;i!==null;)RN(i,l,u),i=i.sibling}function RN(i,l,u){switch(i.tag){case 26:cc(i,l,u),i.flags&qu&&i.memoizedState!==null&&jL(u,ja,i.memoizedState,i.memoizedProps);break;case 5:cc(i,l,u);break;case 3:case 4:var g=ja;ja=e0(i.stateNode.containerInfo),cc(i,l,u),ja=g;break;case 22:i.memoizedState===null&&(g=i.alternate,g!==null&&g.memoizedState!==null?(g=qu,qu=16777216,cc(i,l,u),qu=g):cc(i,l,u));break;default:cc(i,l,u)}}function IN(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function Ku(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var g=l[u];Or=g,DN(g,i)}IN(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)LN(i),i=i.sibling}function LN(i){switch(i.tag){case 0:case 11:case 15:Ku(i),i.flags&2048&&Us(9,i,i.return);break;case 3:Ku(i);break;case 12:Ku(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,Uh(i)):Ku(i);break;default:Ku(i)}}function Uh(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var g=l[u];Or=g,DN(g,i)}IN(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:Us(8,l,l.return),Uh(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,Uh(l));break;default:Uh(l)}i=i.sibling}}function DN(i,l){for(;Or!==null;){var u=Or;switch(u.tag){case 0:case 11:case 15:Us(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Ou(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,Or=g;else e:for(u=i;Or!==null;){g=Or;var b=g.sibling,k=g.return;if(CN(g),g===u){Or=null;break e}if(b!==null){b.return=k,Or=b;break e}Or=k}}}var DI={getCacheForType:function(i){var l=$r(hr),u=l.data.get(i);return u===void 0&&(u=i(),l.data.set(i,u)),u},cacheSignal:function(){return $r(hr).controller.signal}},BI=typeof WeakMap=="function"?WeakMap:Map,xt=0,Pt=null,nt=null,st=0,jt=0,On=null,Fs=!1,uc=!1,Tx=!1,zi=0,Zt=0,Hs=0,qo=0,Ox=0,Mn=0,dc=0,Yu=null,xn=null,Mx=!1,Fh=0,BN=0,Hh=1/0,Wh=null,Ws=null,jr=0,Gs=null,fc=null,Ui=0,Px=0,Rx=null,$N=null,Xu=0,Ix=null;function Pn(){return(xt&2)!==0&&st!==0?st&-st:V.T!==null?Ux():Gf()}function zN(){if(Mn===0)if((st&536870912)===0||ct){var i=wo;wo<<=1,(wo&3932160)===0&&(wo=262144),Mn=i}else Mn=536870912;return i=An.current,i!==null&&(i.flags|=32),Mn}function vn(i,l,u){(i===Pt&&(jt===2||jt===9)||i.cancelPendingCommit!==null)&&(hc(i,0),Vs(i,st,Mn,!1)),jo(i,u),((xt&2)===0||i!==Pt)&&(i===Pt&&((xt&2)===0&&(qo|=u),Zt===4&&Vs(i,st,Mn,!1)),ni(i))}function UN(i,l,u){if((xt&6)!==0)throw Error(n(327));var g=!u&&(l&127)===0&&(l&i.expiredLanes)===0||ha(i,l),b=g?UI(i,l):Dx(i,l,!0),k=g;do{if(b===0){uc&&!g&&Vs(i,l,0,!1);break}else{if(u=i.current.alternate,k&&!$I(u)){b=Dx(i,l,!1),k=!1;continue}if(b===2){if(k=l,i.errorRecoveryDisabledLanes&k)var M=0;else M=i.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){l=M;e:{var F=i;b=Yu;var K=F.current.memoizedState.isDehydrated;if(K&&(hc(F,M).flags|=256),M=Dx(F,M,!1),M!==2){if(Tx&&!K){F.errorRecoveryDisabledLanes|=k,qo|=k,b=4;break e}k=xn,xn=b,k!==null&&(xn===null?xn=k:xn.push.apply(xn,k))}b=M}if(k=!1,b!==2)continue}}if(b===1){hc(i,0),Vs(i,l,0,!0);break}e:{switch(g=i,k=b,k){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:Vs(g,l,Mn,!Fs);break e;case 2:xn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(b=Fh+300-lt(),10<b)){if(Vs(g,l,Mn,!Fs),za(g,0,!0)!==0)break e;Ui=l,g.timeoutHandle=v5(FN.bind(null,g,u,xn,Wh,Mx,l,Mn,qo,dc,Fs,k,"Throttled",-0,0),b);break e}FN(g,u,xn,Wh,Mx,l,Mn,qo,dc,Fs,k,null,-0,0)}}break}while(!0);ni(i)}function FN(i,l,u,g,b,k,M,F,K,le,ye,Ne,de,ge){if(i.timeoutHandle=-1,Ne=l.subtreeFlags,Ne&8192||(Ne&16785408)===16785408){Ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pa},RN(l,k,Ne);var De=(k&62914560)===k?Fh-lt():(k&4194048)===k?BN-lt():0;if(De=NL(Ne,De),De!==null){Ui=k,i.cancelPendingCommit=De(XN.bind(null,i,l,k,u,g,b,M,F,K,ye,Ne,null,de,ge)),Vs(i,k,M,!le);return}}XN(i,l,k,u,g,b,M,F,K)}function $I(i){for(var l=i;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var b=u[g],k=b.getSnapshot;b=b.value;try{if(!Cn(k(),b))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Vs(i,l,u,g){l&=~Ox,l&=~qo,i.suspendedLanes|=l,i.pingedLanes&=~l,g&&(i.warmLanes|=l),g=i.expirationTimes;for(var b=l;0<b;){var k=31-Se(b),M=1<<k;g[k]=-1,b&=~M}u!==0&&Pl(i,u,l)}function Gh(){return(xt&6)===0?(Ju(0),!1):!0}function Lx(){if(nt!==null){if(jt===0)var i=nt.return;else i=nt,Ti=Bo=null,Qp(i),nc=null,Pu=0,i=nt;for(;i!==null;)yN(i.alternate,i),i=i.return;nt=null}}function hc(i,l){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,iL(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),Ui=0,Lx(),Pt=i,nt=u=Ei(i.current,null),st=l,jt=0,On=null,Fs=!1,uc=ha(i,l),Tx=!1,dc=Mn=Ox=qo=Hs=Zt=0,xn=Yu=null,Mx=!1,(l&8)!==0&&(l|=l&32);var g=i.entangledLanes;if(g!==0)for(i=i.entanglements,g&=l;0<g;){var b=31-Se(g),k=1<<b;l|=i[b],g&=~k}return zi=l,fh(),u}function HN(i,l){et=null,V.H=Uu,l===rc||l===bh?(l=i4(),jt=3):l===zp?(l=i4(),jt=4):jt=l===mx?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,On=l,nt===null&&(Zt=1,Rh(i,Kn(l,i.current)))}function WN(){var i=An.current;return i===null?!0:(st&4194048)===st?Qn===null:(st&62914560)===st||(st&536870912)!==0?i===Qn:!1}function GN(){var i=V.H;return V.H=Uu,i===null?Uu:i}function VN(){var i=V.A;return V.A=DI,i}function Vh(){Zt=4,Fs||(st&4194048)!==st&&An.current!==null||(uc=!0),(Hs&134217727)===0&&(qo&134217727)===0||Pt===null||Vs(Pt,st,Mn,!1)}function Dx(i,l,u){var g=xt;xt|=2;var b=GN(),k=VN();(Pt!==i||st!==l)&&(Wh=null,hc(i,l)),l=!1;var M=Zt;e:do try{if(jt!==0&&nt!==null){var F=nt,K=On;switch(jt){case 8:Lx(),M=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(l=!0);var le=jt;if(jt=0,On=null,mc(i,F,K,le),u&&uc){M=0;break e}break;default:le=jt,jt=0,On=null,mc(i,F,K,le)}}zI(),M=Zt;break}catch(ye){HN(i,ye)}while(!0);return l&&i.shellSuspendCounter++,Ti=Bo=null,xt=g,V.H=b,V.A=k,nt===null&&(Pt=null,st=0,fh()),M}function zI(){for(;nt!==null;)qN(nt)}function UI(i,l){var u=xt;xt|=2;var g=GN(),b=VN();Pt!==i||st!==l?(Wh=null,Hh=lt()+500,hc(i,l)):uc=ha(i,l);e:do try{if(jt!==0&&nt!==null){l=nt;var k=On;t:switch(jt){case 1:jt=0,On=null,mc(i,l,k,1);break;case 2:case 9:if(n4(k)){jt=0,On=null,KN(l);break}l=function(){jt!==2&&jt!==9||Pt!==i||(jt=7),ni(i)},k.then(l,l);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:n4(k)?(jt=0,On=null,KN(l)):(jt=0,On=null,mc(i,l,k,7));break;case 5:var M=null;switch(nt.tag){case 26:M=nt.memoizedState;case 5:case 27:var F=nt;if(M?P5(M):F.stateNode.complete){jt=0,On=null;var K=F.sibling;if(K!==null)nt=K;else{var le=F.return;le!==null?(nt=le,qh(le)):nt=null}break t}}jt=0,On=null,mc(i,l,k,5);break;case 6:jt=0,On=null,mc(i,l,k,6);break;case 8:Lx(),Zt=6;break e;default:throw Error(n(462))}}FI();break}catch(ye){HN(i,ye)}while(!0);return Ti=Bo=null,V.H=g,V.A=b,xt=u,nt!==null?0:(Pt=null,st=0,fh(),Zt)}function FI(){for(;nt!==null&&!wr();)qN(nt)}function qN(i){var l=xN(i.alternate,i,zi);i.memoizedProps=i.pendingProps,l===null?qh(i):nt=l}function KN(i){var l=i,u=l.alternate;switch(l.tag){case 15:case 0:l=dN(u,l,l.pendingProps,l.type,void 0,st);break;case 11:l=dN(u,l,l.pendingProps,l.type.render,l.ref,st);break;case 5:Qp(l);default:yN(u,l),l=nt=Vj(l,zi),l=xN(u,l,zi)}i.memoizedProps=i.pendingProps,l===null?qh(i):nt=l}function mc(i,l,u,g){Ti=Bo=null,Qp(l),nc=null,Pu=0;var b=l.return;try{if(TI(i,b,l,u,st)){Zt=1,Rh(i,Kn(u,i.current)),nt=null;return}}catch(k){if(b!==null)throw nt=b,k;Zt=1,Rh(i,Kn(u,i.current)),nt=null;return}l.flags&32768?(ct||g===1?i=!0:uc||(st&536870912)!==0?i=!1:(Fs=i=!0,(g===2||g===9||g===3||g===6)&&(g=An.current,g!==null&&g.tag===13&&(g.flags|=16384))),YN(l,i)):qh(l)}function qh(i){var l=i;do{if((l.flags&32768)!==0){YN(l,Fs);return}i=l.return;var u=PI(l.alternate,l,zi);if(u!==null){nt=u;return}if(l=l.sibling,l!==null){nt=l;return}nt=l=i}while(l!==null);Zt===0&&(Zt=5)}function YN(i,l){do{var u=RI(i.alternate,i);if(u!==null){u.flags&=32767,nt=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(i=i.sibling,i!==null)){nt=i;return}nt=i=u}while(i!==null);Zt=6,nt=null}function XN(i,l,u,g,b,k,M,F,K){i.cancelPendingCommit=null;do Kh();while(jr!==0);if((xt&6)!==0)throw Error(n(327));if(l!==null){if(l===i.current)throw Error(n(177));if(k=l.lanes|l.childLanes,k|=Sp,pp(i,u,k,M,F,K),i===Pt&&(nt=Pt=null,st=0),fc=l,Gs=i,Ui=u,Px=k,Rx=b,$N=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,VI(Ke,function(){return t5(),null})):(i.callbackNode=null,i.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=V.T,V.T=null,b=X.p,X.p=2,M=xt,xt|=4;try{II(i,l,u)}finally{xt=M,X.p=b,V.T=g}}jr=1,JN(),QN(),ZN()}}function JN(){if(jr===1){jr=0;var i=Gs,l=fc,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=V.T,V.T=null;var g=X.p;X.p=2;var b=xt;xt|=4;try{ON(l,i);var k=Yx,M=Dj(i.containerInfo),F=k.focusedElem,K=k.selectionRange;if(M!==F&&F&&F.ownerDocument&&Lj(F.ownerDocument.documentElement,F)){if(K!==null&&bp(F)){var le=K.start,ye=K.end;if(ye===void 0&&(ye=le),"selectionStart"in F)F.selectionStart=le,F.selectionEnd=Math.min(ye,F.value.length);else{var Ne=F.ownerDocument||document,de=Ne&&Ne.defaultView||window;if(de.getSelection){var ge=de.getSelection(),De=F.textContent.length,Ye=Math.min(K.start,De),At=K.end===void 0?Ye:Math.min(K.end,De);!ge.extend&&Ye>At&&(M=At,At=Ye,Ye=M);var te=Ij(F,Ye),J=Ij(F,At);if(te&&J&&(ge.rangeCount!==1||ge.anchorNode!==te.node||ge.anchorOffset!==te.offset||ge.focusNode!==J.node||ge.focusOffset!==J.offset)){var oe=Ne.createRange();oe.setStart(te.node,te.offset),ge.removeAllRanges(),Ye>At?(ge.addRange(oe),ge.extend(J.node,J.offset)):(oe.setEnd(J.node,J.offset),ge.addRange(oe))}}}}for(Ne=[],ge=F;ge=ge.parentNode;)ge.nodeType===1&&Ne.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<Ne.length;F++){var we=Ne[F];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}s0=!!Kx,Yx=Kx=null}finally{xt=b,X.p=g,V.T=u}}i.current=l,jr=2}}function QN(){if(jr===2){jr=0;var i=Gs,l=fc,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=V.T,V.T=null;var g=X.p;X.p=2;var b=xt;xt|=4;try{_N(i,l.alternate,l)}finally{xt=b,X.p=g,V.T=u}}jr=3}}function ZN(){if(jr===4||jr===3){jr=0,rt();var i=Gs,l=fc,u=Ui,g=$N;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?jr=5:(jr=0,fc=Gs=null,e5(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(Ws=null),ki(u),l=l.stateNode,ce&&typeof ce.onCommitFiberRoot=="function")try{ce.onCommitFiberRoot(he,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=V.T,b=X.p,X.p=2,V.T=null;try{for(var k=i.onRecoverableError,M=0;M<g.length;M++){var F=g[M];k(F.value,{componentStack:F.stack})}}finally{V.T=l,X.p=b}}(Ui&3)!==0&&Kh(),ni(i),b=i.pendingLanes,(u&261930)!==0&&(b&42)!==0?i===Ix?Xu++:(Xu=0,Ix=i):Xu=0,Ju(0)}}function e5(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,Ou(l)))}function Kh(){return JN(),QN(),ZN(),t5()}function t5(){if(jr!==5)return!1;var i=Gs,l=Px;Px=0;var u=ki(Ui),g=V.T,b=X.p;try{X.p=32>u?32:u,V.T=null,u=Rx,Rx=null;var k=Gs,M=Ui;if(jr=0,fc=Gs=null,Ui=0,(xt&6)!==0)throw Error(n(331));var F=xt;if(xt|=4,LN(k.current),PN(k,k.current,M,u),xt=F,Ju(0,!1),ce&&typeof ce.onPostCommitFiberRoot=="function")try{ce.onPostCommitFiberRoot(he,k)}catch{}return!0}finally{X.p=b,V.T=g,e5(i,l)}}function r5(i,l,u){l=Kn(u,l),l=hx(i.stateNode,l,2),i=Bs(i,l,2),i!==null&&(jo(i,2),ni(i))}function Nt(i,l,u){if(i.tag===3)r5(i,i,u);else for(;l!==null;){if(l.tag===3){r5(l,i,u);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ws===null||!Ws.has(g))){i=Kn(u,i),u=nN(2),g=Bs(l,u,2),g!==null&&(aN(u,g,l,i),jo(g,2),ni(g));break}}l=l.return}}function Bx(i,l,u){var g=i.pingCache;if(g===null){g=i.pingCache=new BI;var b=new Set;g.set(l,b)}else b=g.get(l),b===void 0&&(b=new Set,g.set(l,b));b.has(u)||(Tx=!0,b.add(u),i=HI.bind(null,i,l,u),l.then(i,i))}function HI(i,l,u){var g=i.pingCache;g!==null&&g.delete(l),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,Pt===i&&(st&u)===u&&(Zt===4||Zt===3&&(st&62914560)===st&&300>lt()-Fh?(xt&2)===0&&hc(i,0):Ox|=u,dc===st&&(dc=0)),ni(i)}function n5(i,l){l===0&&(l=Hf()),i=Io(i,l),i!==null&&(jo(i,l),ni(i))}function WI(i){var l=i.memoizedState,u=0;l!==null&&(u=l.retryLane),n5(i,u)}function GI(i,l){var u=0;switch(i.tag){case 31:case 13:var g=i.stateNode,b=i.memoizedState;b!==null&&(u=b.retryLane);break;case 19:g=i.stateNode;break;case 22:g=i.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(l),n5(i,u)}function VI(i,l){return Be(i,l)}var Yh=null,gc=null,$x=!1,Xh=!1,zx=!1,qs=0;function ni(i){i!==gc&&i.next===null&&(gc===null?Yh=gc=i:gc=gc.next=i),Xh=!0,$x||($x=!0,KI())}function Ju(i,l){if(!zx&&Xh){zx=!0;do for(var u=!1,g=Yh;g!==null;){if(i!==0){var b=g.pendingLanes;if(b===0)var k=0;else{var M=g.suspendedLanes,F=g.pingedLanes;k=(1<<31-Se(42|i)+1)-1,k&=b&~(M&~F),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(u=!0,o5(g,k))}else k=st,k=za(g,g===Pt?k:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(k&3)===0||ha(g,k)||(u=!0,o5(g,k));g=g.next}while(u);zx=!1}}function qI(){a5()}function a5(){Xh=$x=!1;var i=0;qs!==0&&aL()&&(i=qs);for(var l=lt(),u=null,g=Yh;g!==null;){var b=g.next,k=i5(g,l);k===0?(g.next=null,u===null?Yh=b:u.next=b,b===null&&(gc=u)):(u=g,(i!==0||(k&3)!==0)&&(Xh=!0)),g=b}jr!==0&&jr!==5||Ju(i),qs!==0&&(qs=0)}function i5(i,l){for(var u=i.suspendedLanes,g=i.pingedLanes,b=i.expirationTimes,k=i.pendingLanes&-62914561;0<k;){var M=31-Se(k),F=1<<M,K=b[M];K===-1?((F&u)===0||(F&g)!==0)&&(b[M]=gp(F,l)):K<=l&&(i.expiredLanes|=F),k&=~F}if(l=Pt,u=st,u=za(i,i===l?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g=i.callbackNode,u===0||i===l&&(jt===2||jt===9)||i.cancelPendingCommit!==null)return g!==null&&g!==null&&qt(g),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||ha(i,u)){if(l=u&-u,l===i.callbackPriority)return l;switch(g!==null&&qt(g),ki(u)){case 2:case 8:u=Le;break;case 32:u=Ke;break;case 268435456:u=pe;break;default:u=Ke}return g=s5.bind(null,i),u=Be(u,g),i.callbackPriority=l,i.callbackNode=u,l}return g!==null&&g!==null&&qt(g),i.callbackPriority=2,i.callbackNode=null,2}function s5(i,l){if(jr!==0&&jr!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(Kh()&&i.callbackNode!==u)return null;var g=st;return g=za(i,i===Pt?g:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g===0?null:(UN(i,g,l),i5(i,lt()),i.callbackNode!=null&&i.callbackNode===u?s5.bind(null,i):null)}function o5(i,l){if(Kh())return null;UN(i,l,!0)}function KI(){sL(function(){(xt&6)!==0?Be(ne,qI):a5()})}function Ux(){if(qs===0){var i=ec;i===0&&(i=Hn,Hn<<=1,(Hn&261888)===0&&(Hn=256)),qs=i}return qs}function l5(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:$l(""+i)}function c5(i,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,i.id&&u.setAttribute("form",i.id),l.parentNode.insertBefore(u,l),i=new FormData(i),u.parentNode.removeChild(u),i}function YI(i,l,u,g,b){if(l==="submit"&&u&&u.stateNode===b){var k=l5((b[Ar]||null).action),M=g.submitter;M&&(l=(l=M[Ar]||null)?l5(l.formAction):M.getAttribute("formAction"),l!==null&&(k=l,M=null));var F=new Ja("action","action",null,g,b);i.push({event:F,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(qs!==0){var K=M?c5(b,M):new FormData(b);ox(u,{pending:!0,data:K,method:b.method,action:k},null,K)}}else typeof k=="function"&&(F.preventDefault(),K=M?c5(b,M):new FormData(b),ox(u,{pending:!0,data:K,method:b.method,action:k},k,K))},currentTarget:b}]})}}for(var Fx=0;Fx<kp.length;Fx++){var Hx=kp[Fx],XI=Hx.toLowerCase(),JI=Hx[0].toUpperCase()+Hx.slice(1);wa(XI,"on"+JI)}wa(zj,"onAnimationEnd"),wa(Uj,"onAnimationIteration"),wa(Fj,"onAnimationStart"),wa("dblclick","onDoubleClick"),wa("focusin","onFocus"),wa("focusout","onBlur"),wa(hI,"onTransitionRun"),wa(mI,"onTransitionStart"),wa(gI,"onTransitionCancel"),wa(Hj,"onTransitionEnd"),qa("onMouseEnter",["mouseout","mouseover"]),qa("onMouseLeave",["mouseout","mouseover"]),qa("onPointerEnter",["pointerout","pointerover"]),qa("onPointerLeave",["pointerout","pointerover"]),Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Va("onBeforeInput",["compositionend","keypress","textInput","paste"]),Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function u5(i,l){l=(l&4)!==0;for(var u=0;u<i.length;u++){var g=i[u],b=g.event;g=g.listeners;e:{var k=void 0;if(l)for(var M=g.length-1;0<=M;M--){var F=g[M],K=F.instance,le=F.currentTarget;if(F=F.listener,K!==k&&b.isPropagationStopped())break e;k=F,b.currentTarget=le;try{k(b)}catch(ye){dh(ye)}b.currentTarget=null,k=K}else for(M=0;M<g.length;M++){if(F=g[M],K=F.instance,le=F.currentTarget,F=F.listener,K!==k&&b.isPropagationStopped())break e;k=F,b.currentTarget=le;try{k(b)}catch(ye){dh(ye)}b.currentTarget=null,k=K}}}}function at(i,l){var u=l[Rl];u===void 0&&(u=l[Rl]=new Set);var g=i+"__bubble";u.has(g)||(d5(l,i,2,!1),u.add(g))}function Wx(i,l,u){var g=0;l&&(g|=4),d5(u,i,g,l)}var Jh="_reactListening"+Math.random().toString(36).slice(2);function Gx(i){if(!i[Jh]){i[Jh]=!0,uu.forEach(function(u){u!=="selectionchange"&&(QI.has(u)||Wx(u,!1,i),Wx(u,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Jh]||(l[Jh]=!0,Wx("selectionchange",!1,l))}}function d5(i,l,u,g){switch(z5(l)){case 2:var b=_L;break;case 8:b=CL;break;default:b=sv}u=b.bind(null,l,u,i),b=void 0,!Co||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),g?b!==void 0?i.addEventListener(l,u,{capture:!0,passive:b}):i.addEventListener(l,u,!0):b!==void 0?i.addEventListener(l,u,{passive:b}):i.addEventListener(l,u,!1)}function Vx(i,l,u,g,b){var k=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var F=g.stateNode.containerInfo;if(F===b)break;if(M===4)for(M=g.return;M!==null;){var K=M.tag;if((K===3||K===4)&&M.stateNode.containerInfo===b)return;M=M.return}for(;F!==null;){if(M=Wa(F),M===null)return;if(K=M.tag,K===5||K===6||K===26||K===27){g=k=M;continue e}F=F.parentNode}}g=g.return}Es(function(){var le=k,ye=Gn(u),Ne=[];e:{var de=Wj.get(i);if(de!==void 0){var ge=Ja,De=i;switch(i){case"keypress":if(Ao(u)===0)break e;case"keydown":case"keyup":ge=ch;break;case"focusin":De="focus",ge=Oo;break;case"focusout":De="blur",ge=Oo;break;case"beforeblur":case"afterblur":ge=Oo;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Zf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=L;break;case zj:case Uj:case Fj:ge=th;break;case Hj:ge=ie;break;case"scroll":case"scrollend":ge=ju;break;case"wheel":ge=Ee;break;case"copy":case"cut":case"paste":ge=rh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=v;break;case"toggle":case"beforetoggle":ge=ir}var Ye=(l&4)!==0,At=!Ye&&(i==="scroll"||i==="scrollend"),te=Ye?de!==null?de+"Capture":null:de;Ye=[];for(var J=le,oe;J!==null;){var we=J;if(oe=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||oe===null||te===null||(we=xa(J,te),we!=null&&Ye.push(Zu(J,we,oe))),At)break;J=J.return}0<Ye.length&&(de=new ge(de,De,null,u,ye),Ne.push({event:de,listeners:Ye}))}}if((l&7)===0){e:{if(de=i==="mouseover"||i==="pointerover",ge=i==="mouseout"||i==="pointerout",de&&u!==yu&&(De=u.relatedTarget||u.fromElement)&&(Wa(De)||De[Fa]))break e;if((ge||de)&&(de=ye.window===ye?ye:(de=ye.ownerDocument)?de.defaultView||de.parentWindow:window,ge?(De=u.relatedTarget||u.toElement,ge=le,De=De?Wa(De):null,De!==null&&(At=o(De),Ye=De.tag,De!==At||Ye!==5&&Ye!==27&&Ye!==6)&&(De=null)):(ge=null,De=le),ge!==De)){if(Ye=Nu,we="onMouseLeave",te="onMouseEnter",J="mouse",(i==="pointerout"||i==="pointerover")&&(Ye=v,we="onPointerLeave",te="onPointerEnter",J="pointer"),At=ge==null?de:Sn(ge),oe=De==null?de:Sn(De),de=new Ye(we,J+"leave",ge,u,ye),de.target=At,de.relatedTarget=oe,we=null,Wa(ye)===le&&(Ye=new Ye(te,J+"enter",De,u,ye),Ye.target=oe,Ye.relatedTarget=At,we=Ye),At=we,ge&&De)t:{for(Ye=ZI,te=ge,J=De,oe=0,we=te;we;we=Ye(we))oe++;we=0;for(var Ve=J;Ve;Ve=Ye(Ve))we++;for(;0<oe-we;)te=Ye(te),oe--;for(;0<we-oe;)J=Ye(J),we--;for(;oe--;){if(te===J||J!==null&&te===J.alternate){Ye=te;break t}te=Ye(te),J=Ye(J)}Ye=null}else Ye=null;ge!==null&&f5(Ne,de,ge,Ye,!1),De!==null&&At!==null&&f5(Ne,At,De,Ye,!0)}}e:{if(de=le?Sn(le):window,ge=de.nodeName&&de.nodeName.toLowerCase(),ge==="select"||ge==="input"&&de.type==="file")var ht=Aj;else if(Cj(de))if(Tj)ht=uI;else{ht=lI;var Ue=oI}else ge=de.nodeName,!ge||ge.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?le&&Bl(le.elementType)&&(ht=Aj):ht=cI;if(ht&&(ht=ht(i,le))){Ej(Ne,ht,u,ye);break e}Ue&&Ue(i,de,le),i==="focusout"&&le&&de.type==="number"&&le.memoizedProps.value!=null&&pu(de,"number",de.value)}switch(Ue=le?Sn(le):window,i){case"focusin":(Cj(Ue)||Ue.contentEditable==="true")&&(Vl=Ue,wp=le,Eu=null);break;case"focusout":Eu=wp=Vl=null;break;case"mousedown":jp=!0;break;case"contextmenu":case"mouseup":case"dragend":jp=!1,Bj(Ne,u,ye);break;case"selectionchange":if(fI)break;case"keydown":case"keyup":Bj(Ne,u,ye)}var tt;if(Jt)e:{switch(i){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Gl?Wl(i,u)&&(ot="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(ot="onCompositionStart");ot&&(ya&&u.locale!=="ko"&&(Gl||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Gl&&(tt=wu()):(Xa=ye,bu="value"in Xa?Xa.value:Xa.textContent,Gl=!0)),Ue=Qh(le,ot),0<Ue.length&&(ot=new Za(ot,i,null,u,ye),Ne.push({event:ot,listeners:Ue}),tt?ot.data=tt:(tt=_j(u),tt!==null&&(ot.data=tt)))),(tt=Ci?nI(i,u):aI(i,u))&&(ot=Qh(le,"onBeforeInput"),0<ot.length&&(Ue=new Za("onBeforeInput","beforeinput",null,u,ye),Ne.push({event:Ue,listeners:ot}),Ue.data=tt)),YI(Ne,i,le,u,ye)}u5(Ne,l)})}function Zu(i,l,u){return{instance:i,listener:l,currentTarget:u}}function Qh(i,l){for(var u=l+"Capture",g=[];i!==null;){var b=i,k=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||k===null||(b=xa(i,u),b!=null&&g.unshift(Zu(i,b,k)),b=xa(i,l),b!=null&&g.push(Zu(i,b,k))),i.tag===3)return g;i=i.return}return[]}function ZI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function f5(i,l,u,g,b){for(var k=l._reactName,M=[];u!==null&&u!==g;){var F=u,K=F.alternate,le=F.stateNode;if(F=F.tag,K!==null&&K===g)break;F!==5&&F!==26&&F!==27||le===null||(K=le,b?(le=xa(u,k),le!=null&&M.unshift(Zu(u,le,K))):b||(le=xa(u,k),le!=null&&M.push(Zu(u,le,K)))),u=u.return}M.length!==0&&i.push({event:l,listeners:M})}var eL=/\r\n?/g,tL=/\u0000|\uFFFD/g;function h5(i){return(typeof i=="string"?i:""+i).replace(eL,`
`).replace(tL,"")}function m5(i,l){return l=h5(l),h5(i)===l}function Et(i,l,u,g,b,k){switch(u){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||hn(i,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&hn(i,""+g);break;case"className":_n(i,"class",g);break;case"tabIndex":_n(i,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":_n(i,u,g);break;case"style":vu(i,g,k);break;case"data":if(l!=="object"){_n(i,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||u!=="href")){i.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(u);break}g=$l(""+g),i.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(u==="formAction"?(l!=="input"&&Et(i,l,"name",b.name,b,null),Et(i,l,"formEncType",b.formEncType,b,null),Et(i,l,"formMethod",b.formMethod,b,null),Et(i,l,"formTarget",b.formTarget,b,null)):(Et(i,l,"encType",b.encType,b,null),Et(i,l,"method",b.method,b,null),Et(i,l,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(u);break}g=$l(""+g),i.setAttribute(u,g);break;case"onClick":g!=null&&(i.onclick=pa);break;case"onScroll":g!=null&&at("scroll",i);break;case"onScrollEnd":g!=null&&at("scrollend",i);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(u=g.__html,u!=null){if(b.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"multiple":i.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":i.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){i.removeAttribute("xlink:href");break}u=$l(""+g),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(u,""+g):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":g===!0?i.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(u,g):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?i.setAttribute(u,g):i.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?i.removeAttribute(u):i.setAttribute(u,g);break;case"popover":at("beforetoggle",i),at("toggle",i),Ll(i,"popover",g);break;case"xlinkActuate":fr(i,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":fr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":fr(i,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":fr(i,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":fr(i,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":fr(i,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":fr(i,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":fr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":fr(i,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Ll(i,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Qf.get(u)||u,Ll(i,u,g))}}function qx(i,l,u,g,b,k){switch(u){case"style":vu(i,g,k);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(u=g.__html,u!=null){if(b.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"children":typeof g=="string"?hn(i,g):(typeof g=="number"||typeof g=="bigint")&&hn(i,""+g);break;case"onScroll":g!=null&&at("scroll",i);break;case"onScrollEnd":g!=null&&at("scrollend",i);break;case"onClick":g!=null&&(i.onclick=pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!du.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(b=u.endsWith("Capture"),l=u.slice(2,b?u.length-7:void 0),k=i[Ar]||null,k=k!=null?k[u]:null,typeof k=="function"&&i.removeEventListener(l,k,b),typeof g=="function")){typeof k!="function"&&k!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(l,g,b);break e}u in i?i[u]=g:g===!0?i.setAttribute(u,""):Ll(i,u,g)}}}function Ur(i,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",i),at("load",i);var g=!1,b=!1,k;for(k in u)if(u.hasOwnProperty(k)){var M=u[k];if(M!=null)switch(k){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Et(i,l,k,M,u,null)}}b&&Et(i,l,"srcSet",u.srcSet,u,null),g&&Et(i,l,"src",u.src,u,null);return;case"input":at("invalid",i);var F=k=M=b=null,K=null,le=null;for(g in u)if(u.hasOwnProperty(g)){var ye=u[g];if(ye!=null)switch(g){case"name":b=ye;break;case"type":M=ye;break;case"checked":K=ye;break;case"defaultChecked":le=ye;break;case"value":k=ye;break;case"defaultValue":F=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(n(137,l));break;default:Et(i,l,g,ye,u,null)}}Yf(i,k,F,K,le,M,b,!1);return;case"select":at("invalid",i),g=M=k=null;for(b in u)if(u.hasOwnProperty(b)&&(F=u[b],F!=null))switch(b){case"value":k=F;break;case"defaultValue":M=F;break;case"multiple":g=F;default:Et(i,l,b,F,u,null)}l=k,u=M,i.multiple=!!g,l!=null?ks(i,!!g,l,!1):u!=null&&ks(i,!!g,u,!0);return;case"textarea":at("invalid",i),k=b=g=null;for(M in u)if(u.hasOwnProperty(M)&&(F=u[M],F!=null))switch(M){case"value":g=F;break;case"defaultValue":b=F;break;case"children":k=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(n(91));break;default:Et(i,l,M,F,u,null)}Ss(i,g,b,k);return;case"option":for(K in u)u.hasOwnProperty(K)&&(g=u[K],g!=null)&&(K==="selected"?i.selected=g&&typeof g!="function"&&typeof g!="symbol":Et(i,l,K,g,u,null));return;case"dialog":at("beforetoggle",i),at("toggle",i),at("cancel",i),at("close",i);break;case"iframe":case"object":at("load",i);break;case"video":case"audio":for(g=0;g<Qu.length;g++)at(Qu[g],i);break;case"image":at("error",i),at("load",i);break;case"details":at("toggle",i);break;case"embed":case"source":case"link":at("error",i),at("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in u)if(u.hasOwnProperty(le)&&(g=u[le],g!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Et(i,l,le,g,u,null)}return;default:if(Bl(l)){for(ye in u)u.hasOwnProperty(ye)&&(g=u[ye],g!==void 0&&qx(i,l,ye,g,u,void 0));return}}for(F in u)u.hasOwnProperty(F)&&(g=u[F],g!=null&&Et(i,l,F,g,u,null))}function rL(i,l,u,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,k=null,M=null,F=null,K=null,le=null,ye=null;for(ge in u){var Ne=u[ge];if(u.hasOwnProperty(ge)&&Ne!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":K=Ne;default:g.hasOwnProperty(ge)||Et(i,l,ge,null,g,Ne)}}for(var de in g){var ge=g[de];if(Ne=u[de],g.hasOwnProperty(de)&&(ge!=null||Ne!=null))switch(de){case"type":k=ge;break;case"name":b=ge;break;case"checked":le=ge;break;case"defaultChecked":ye=ge;break;case"value":M=ge;break;case"defaultValue":F=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(n(137,l));break;default:ge!==Ne&&Et(i,l,de,ge,g,Ne)}}Dl(i,M,F,K,le,ye,k,b);return;case"select":ge=M=F=de=null;for(k in u)if(K=u[k],u.hasOwnProperty(k)&&K!=null)switch(k){case"value":break;case"multiple":ge=K;default:g.hasOwnProperty(k)||Et(i,l,k,null,g,K)}for(b in g)if(k=g[b],K=u[b],g.hasOwnProperty(b)&&(k!=null||K!=null))switch(b){case"value":de=k;break;case"defaultValue":F=k;break;case"multiple":M=k;default:k!==K&&Et(i,l,b,k,g,K)}l=F,u=M,g=ge,de!=null?ks(i,!!u,de,!1):!!g!=!!u&&(l!=null?ks(i,!!u,l,!0):ks(i,!!u,u?[]:"",!1));return;case"textarea":ge=de=null;for(F in u)if(b=u[F],u.hasOwnProperty(F)&&b!=null&&!g.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:Et(i,l,F,null,g,b)}for(M in g)if(b=g[M],k=u[M],g.hasOwnProperty(M)&&(b!=null||k!=null))switch(M){case"value":de=b;break;case"defaultValue":ge=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==k&&Et(i,l,M,b,g,k)}Xf(i,de,ge);return;case"option":for(var De in u)de=u[De],u.hasOwnProperty(De)&&de!=null&&!g.hasOwnProperty(De)&&(De==="selected"?i.selected=!1:Et(i,l,De,null,g,de));for(K in g)de=g[K],ge=u[K],g.hasOwnProperty(K)&&de!==ge&&(de!=null||ge!=null)&&(K==="selected"?i.selected=de&&typeof de!="function"&&typeof de!="symbol":Et(i,l,K,de,g,ge));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ye in u)de=u[Ye],u.hasOwnProperty(Ye)&&de!=null&&!g.hasOwnProperty(Ye)&&Et(i,l,Ye,null,g,de);for(le in g)if(de=g[le],ge=u[le],g.hasOwnProperty(le)&&de!==ge&&(de!=null||ge!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(n(137,l));break;default:Et(i,l,le,de,g,ge)}return;default:if(Bl(l)){for(var At in u)de=u[At],u.hasOwnProperty(At)&&de!==void 0&&!g.hasOwnProperty(At)&&qx(i,l,At,void 0,g,de);for(ye in g)de=g[ye],ge=u[ye],!g.hasOwnProperty(ye)||de===ge||de===void 0&&ge===void 0||qx(i,l,ye,de,g,ge);return}}for(var te in u)de=u[te],u.hasOwnProperty(te)&&de!=null&&!g.hasOwnProperty(te)&&Et(i,l,te,null,g,de);for(Ne in g)de=g[Ne],ge=u[Ne],!g.hasOwnProperty(Ne)||de===ge||de==null&&ge==null||Et(i,l,Ne,de,g,ge)}function g5(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nL(){if(typeof performance.getEntriesByType=="function"){for(var i=0,l=0,u=performance.getEntriesByType("resource"),g=0;g<u.length;g++){var b=u[g],k=b.transferSize,M=b.initiatorType,F=b.duration;if(k&&F&&g5(M)){for(M=0,F=b.responseEnd,g+=1;g<u.length;g++){var K=u[g],le=K.startTime;if(le>F)break;var ye=K.transferSize,Ne=K.initiatorType;ye&&g5(Ne)&&(K=K.responseEnd,M+=ye*(K<F?1:(F-le)/(K-le)))}if(--g,l+=8*(k+M)/(b.duration/1e3),i++,10<i)break}}if(0<i)return l/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Kx=null,Yx=null;function Zh(i){return i.nodeType===9?i:i.ownerDocument}function p5(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function x5(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function Xx(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Jx=null;function aL(){var i=window.event;return i&&i.type==="popstate"?i===Jx?!1:(Jx=i,!0):(Jx=null,!1)}var v5=typeof setTimeout=="function"?setTimeout:void 0,iL=typeof clearTimeout=="function"?clearTimeout:void 0,y5=typeof Promise=="function"?Promise:void 0,sL=typeof queueMicrotask=="function"?queueMicrotask:typeof y5<"u"?function(i){return y5.resolve(null).then(i).catch(oL)}:v5;function oL(i){setTimeout(function(){throw i})}function Ks(i){return i==="head"}function b5(i,l){var u=l,g=0;do{var b=u.nextSibling;if(i.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"||u==="/&"){if(g===0){i.removeChild(b),yc(l);return}g--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")g++;else if(u==="html")ed(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,ed(u);for(var k=u.firstChild;k;){var M=k.nextSibling,F=k.nodeName;k[Ha]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&k.rel.toLowerCase()==="stylesheet"||u.removeChild(k),k=M}}else u==="body"&&ed(i.ownerDocument.body);u=b}while(u);yc(l)}function w5(i,l){var u=i;i=0;do{var g=u.nextSibling;if(u.nodeType===1?l?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(l?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=g}while(u)}function Qx(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Qx(u),Il(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function lL(i,l,u,g){for(;i.nodeType===1;){var b=u;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(g){if(!i[Ha])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(k=i.getAttribute("rel"),k==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(k!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(k=i.getAttribute("src"),(k!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&k&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var k=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===k)return i}else return i;if(i=Zn(i.nextSibling),i===null)break}return null}function cL(i,l,u){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=Zn(i.nextSibling),i===null))return null;return i}function j5(i,l){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Zn(i.nextSibling),i===null))return null;return i}function Zx(i){return i.data==="$?"||i.data==="$~"}function ev(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function uL(i,l){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=l;else if(i.data!=="$?"||u.readyState!=="loading")l();else{var g=function(){l(),u.removeEventListener("DOMContentLoaded",g)};u.addEventListener("DOMContentLoaded",g),i._reactRetry=g}}function Zn(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return i}var tv=null;function N5(i){i=i.nextSibling;for(var l=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(l===0)return Zn(i.nextSibling);l--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||l++}i=i.nextSibling}return null}function k5(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(l===0)return i;l--}else u!=="/$"&&u!=="/&"||l++}i=i.previousSibling}return null}function S5(i,l,u){switch(l=Zh(u),i){case"html":if(i=l.documentElement,!i)throw Error(n(452));return i;case"head":if(i=l.head,!i)throw Error(n(453));return i;case"body":if(i=l.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function ed(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);Il(i)}var ea=new Map,_5=new Set;function e0(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Fi=X.d;X.d={f:dL,r:fL,D:hL,C:mL,L:gL,m:pL,X:vL,S:xL,M:yL};function dL(){var i=Fi.f(),l=Gh();return i||l}function fL(i){var l=Wn(i);l!==null&&l.tag===5&&l.type==="form"?H4(l):Fi.r(i)}var pc=typeof document>"u"?null:document;function C5(i,l,u){var g=pc;if(g&&typeof l=="string"&&l){var b=fn(l);b='link[rel="'+i+'"][href="'+b+'"]',typeof u=="string"&&(b+='[crossorigin="'+u+'"]'),_5.has(b)||(_5.add(b),i={rel:i,crossOrigin:u,href:l},g.querySelector(b)===null&&(l=g.createElement("link"),Ur(l,"link",i),dr(l),g.head.appendChild(l)))}}function hL(i){Fi.D(i),C5("dns-prefetch",i,null)}function mL(i,l){Fi.C(i,l),C5("preconnect",i,l)}function gL(i,l,u){Fi.L(i,l,u);var g=pc;if(g&&i&&l){var b='link[rel="preload"][as="'+fn(l)+'"]';l==="image"&&u&&u.imageSrcSet?(b+='[imagesrcset="'+fn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(b+='[imagesizes="'+fn(u.imageSizes)+'"]')):b+='[href="'+fn(i)+'"]';var k=b;switch(l){case"style":k=xc(i);break;case"script":k=vc(i)}ea.has(k)||(i=p({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:i,as:l},u),ea.set(k,i),g.querySelector(b)!==null||l==="style"&&g.querySelector(td(k))||l==="script"&&g.querySelector(rd(k))||(l=g.createElement("link"),Ur(l,"link",i),dr(l),g.head.appendChild(l)))}}function pL(i,l){Fi.m(i,l);var u=pc;if(u&&i){var g=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+fn(g)+'"][href="'+fn(i)+'"]',k=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=vc(i)}if(!ea.has(k)&&(i=p({rel:"modulepreload",href:i},l),ea.set(k,i),u.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(rd(k)))return}g=u.createElement("link"),Ur(g,"link",i),dr(g),u.head.appendChild(g)}}}function xL(i,l,u){Fi.S(i,l,u);var g=pc;if(g&&i){var b=Ga(g).hoistableStyles,k=xc(i);l=l||"default";var M=b.get(k);if(!M){var F={loading:0,preload:null};if(M=g.querySelector(td(k)))F.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":l},u),(u=ea.get(k))&&rv(i,u);var K=M=g.createElement("link");dr(K),Ur(K,"link",i),K._p=new Promise(function(le,ye){K.onload=le,K.onerror=ye}),K.addEventListener("load",function(){F.loading|=1}),K.addEventListener("error",function(){F.loading|=2}),F.loading|=4,t0(M,l,g)}M={type:"stylesheet",instance:M,count:1,state:F},b.set(k,M)}}}function vL(i,l){Fi.X(i,l);var u=pc;if(u&&i){var g=Ga(u).hoistableScripts,b=vc(i),k=g.get(b);k||(k=u.querySelector(rd(b)),k||(i=p({src:i,async:!0},l),(l=ea.get(b))&&nv(i,l),k=u.createElement("script"),dr(k),Ur(k,"link",i),u.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},g.set(b,k))}}function yL(i,l){Fi.M(i,l);var u=pc;if(u&&i){var g=Ga(u).hoistableScripts,b=vc(i),k=g.get(b);k||(k=u.querySelector(rd(b)),k||(i=p({src:i,async:!0,type:"module"},l),(l=ea.get(b))&&nv(i,l),k=u.createElement("script"),dr(k),Ur(k,"link",i),u.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},g.set(b,k))}}function E5(i,l,u,g){var b=(b=_e.current)?e0(b):null;if(!b)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=xc(u.href),u=Ga(b).hoistableStyles,g=u.get(l),g||(g={type:"style",instance:null,count:0,state:null},u.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=xc(u.href);var k=Ga(b).hoistableStyles,M=k.get(i);if(M||(b=b.ownerDocument||b,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(i,M),(k=b.querySelector(td(i)))&&!k._p&&(M.instance=k,M.state.loading=5),ea.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ea.set(i,u),k||bL(b,i,u,M.state))),l&&g===null)throw Error(n(528,""));return M}if(l&&g!==null)throw Error(n(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=vc(u),u=Ga(b).hoistableScripts,g=u.get(l),g||(g={type:"script",instance:null,count:0,state:null},u.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function xc(i){return'href="'+fn(i)+'"'}function td(i){return'link[rel="stylesheet"]['+i+"]"}function A5(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function bL(i,l,u,g){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=i.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),Ur(l,"link",u),dr(l),i.head.appendChild(l))}function vc(i){return'[src="'+fn(i)+'"]'}function rd(i){return"script[async]"+i}function T5(i,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var g=i.querySelector('style[data-href~="'+fn(u.href)+'"]');if(g)return l.instance=g,dr(g),g;var b=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(i.ownerDocument||i).createElement("style"),dr(g),Ur(g,"style",b),t0(g,u.precedence,i),l.instance=g;case"stylesheet":b=xc(u.href);var k=i.querySelector(td(b));if(k)return l.state.loading|=4,l.instance=k,dr(k),k;g=A5(u),(b=ea.get(b))&&rv(g,b),k=(i.ownerDocument||i).createElement("link"),dr(k);var M=k;return M._p=new Promise(function(F,K){M.onload=F,M.onerror=K}),Ur(k,"link",g),l.state.loading|=4,t0(k,u.precedence,i),l.instance=k;case"script":return k=vc(u.src),(b=i.querySelector(rd(k)))?(l.instance=b,dr(b),b):(g=u,(b=ea.get(k))&&(g=p({},u),nv(g,b)),i=i.ownerDocument||i,b=i.createElement("script"),dr(b),Ur(b,"link",g),i.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,t0(g,u.precedence,i));return l.instance}function t0(i,l,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,k=b,M=0;M<g.length;M++){var F=g[M];if(F.dataset.precedence===l)k=F;else if(k!==b)break}k?k.parentNode.insertBefore(i,k.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(i,l.firstChild))}function rv(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function nv(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var r0=null;function O5(i,l,u){if(r0===null){var g=new Map,b=r0=new Map;b.set(u,g)}else b=r0,g=b.get(u),g||(g=new Map,b.set(u,g));if(g.has(i))return g;for(g.set(i,null),u=u.getElementsByTagName(i),b=0;b<u.length;b++){var k=u[b];if(!(k[Ha]||k[ur]||i==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var M=k.getAttribute(l)||"";M=i+M;var F=g.get(M);F?F.push(k):g.set(M,[k])}}return g}function M5(i,l,u){i=i.ownerDocument||i,i.head.insertBefore(u,l==="title"?i.querySelector("head > title"):null)}function wL(i,l,u){if(u===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(i=l.disabled,typeof l.precedence=="string"&&i==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function P5(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function jL(i,l,u,g){if(u.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var b=xc(g.href),k=l.querySelector(td(b));if(k){l=k._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(i.count++,i=n0.bind(i),l.then(i,i)),u.state.loading|=4,u.instance=k,dr(k);return}k=l.ownerDocument||l,g=A5(g),(b=ea.get(b))&&rv(g,b),k=k.createElement("link"),dr(k);var M=k;M._p=new Promise(function(F,K){M.onload=F,M.onerror=K}),Ur(k,"link",g),u.instance=k}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=n0.bind(i),l.addEventListener("load",u),l.addEventListener("error",u))}}var av=0;function NL(i,l){return i.stylesheets&&i.count===0&&i0(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var g=setTimeout(function(){if(i.stylesheets&&i0(i,i.stylesheets),i.unsuspend){var k=i.unsuspend;i.unsuspend=null,k()}},6e4+l);0<i.imgBytes&&av===0&&(av=62500*nL());var b=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&i0(i,i.stylesheets),i.unsuspend)){var k=i.unsuspend;i.unsuspend=null,k()}},(i.imgBytes>av?50:800)+l);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function n0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)i0(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var a0=null;function i0(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,a0=new Map,l.forEach(kL,i),a0=null,n0.call(i))}function kL(i,l){if(!(l.state.loading&4)){var u=a0.get(i);if(u)var g=u.get(null);else{u=new Map,a0.set(i,u);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<b.length;k++){var M=b[k];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(u.set(M.dataset.precedence,M),g=M)}g&&u.set(null,g)}b=l.instance,M=b.getAttribute("data-precedence"),k=u.get(M)||g,k===g&&u.set(null,b),u.set(M,b),this.count++,g=n0.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),k?k.parentNode.insertBefore(b,k.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),l.state.loading|=4}}var nd={$$typeof:E,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function SL(i,l,u,g,b,k,M,F,K){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ua(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ua(0),this.hiddenUpdates=Ua(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=k,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function R5(i,l,u,g,b,k,M,F,K,le,ye,Ne){return i=new SL(i,l,u,M,K,le,ye,Ne,F),l=1,k===!0&&(l|=24),k=En(3,null,null,l),i.current=k,k.stateNode=i,l=Dp(),l.refCount++,i.pooledCache=l,l.refCount++,k.memoizedState={element:g,isDehydrated:u,cache:l},Up(k),i}function I5(i){return i?(i=Yl,i):Yl}function L5(i,l,u,g,b,k){b=I5(b),g.context===null?g.context=b:g.pendingContext=b,g=Ds(l),g.payload={element:u},k=k===void 0?null:k,k!==null&&(g.callback=k),u=Bs(i,g,l),u!==null&&(vn(u,i,l),Iu(u,i,l))}function D5(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<l?u:l}}function iv(i,l){D5(i,l),(i=i.alternate)&&D5(i,l)}function B5(i){if(i.tag===13||i.tag===31){var l=Io(i,67108864);l!==null&&vn(l,i,67108864),iv(i,67108864)}}function $5(i){if(i.tag===13||i.tag===31){var l=Pn();l=No(l);var u=Io(i,l);u!==null&&vn(u,i,l),iv(i,l)}}var s0=!0;function _L(i,l,u,g){var b=V.T;V.T=null;var k=X.p;try{X.p=2,sv(i,l,u,g)}finally{X.p=k,V.T=b}}function CL(i,l,u,g){var b=V.T;V.T=null;var k=X.p;try{X.p=8,sv(i,l,u,g)}finally{X.p=k,V.T=b}}function sv(i,l,u,g){if(s0){var b=ov(g);if(b===null)Vx(i,l,g,o0,u),U5(i,g);else if(AL(b,i,l,u,g))g.stopPropagation();else if(U5(i,g),l&4&&-1<EL.indexOf(i)){for(;b!==null;){var k=Wn(b);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var M=$a(k.pendingLanes);if(M!==0){var F=k;for(F.pendingLanes|=2,F.entangledLanes|=2;M;){var K=1<<31-Se(M);F.entanglements[1]|=K,M&=~K}ni(k),(xt&6)===0&&(Hh=lt()+500,Ju(0))}}break;case 31:case 13:F=Io(k,2),F!==null&&vn(F,k,2),Gh(),iv(k,2)}if(k=ov(g),k===null&&Vx(i,l,g,o0,u),k===b)break;b=k}b!==null&&g.stopPropagation()}else Vx(i,l,g,null,u)}}function ov(i){return i=Gn(i),lv(i)}var o0=null;function lv(i){if(o0=null,i=Wa(i),i!==null){var l=o(i);if(l===null)i=null;else{var u=l.tag;if(u===13){if(i=c(l),i!==null)return i;i=null}else if(u===31){if(i=f(l),i!==null)return i;i=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return o0=i,null}function z5(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ot()){case ne:return 2;case Le:return 8;case Ke:case Lt:return 32;case pe:return 268435456;default:return 32}default:return 32}}var cv=!1,Ys=null,Xs=null,Js=null,ad=new Map,id=new Map,Qs=[],EL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U5(i,l){switch(i){case"focusin":case"focusout":Ys=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":ad.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":id.delete(l.pointerId)}}function sd(i,l,u,g,b,k){return i===null||i.nativeEvent!==k?(i={blockedOn:l,domEventName:u,eventSystemFlags:g,nativeEvent:k,targetContainers:[b]},l!==null&&(l=Wn(l),l!==null&&B5(l)),i):(i.eventSystemFlags|=g,l=i.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),i)}function AL(i,l,u,g,b){switch(l){case"focusin":return Ys=sd(Ys,i,l,u,g,b),!0;case"dragenter":return Xs=sd(Xs,i,l,u,g,b),!0;case"mouseover":return Js=sd(Js,i,l,u,g,b),!0;case"pointerover":var k=b.pointerId;return ad.set(k,sd(ad.get(k)||null,i,l,u,g,b)),!0;case"gotpointercapture":return k=b.pointerId,id.set(k,sd(id.get(k)||null,i,l,u,g,b)),!0}return!1}function F5(i){var l=Wa(i.target);if(l!==null){var u=o(l);if(u!==null){if(l=u.tag,l===13){if(l=c(u),l!==null){i.blockedOn=l,ma(i.priority,function(){$5(u)});return}}else if(l===31){if(l=f(u),l!==null){i.blockedOn=l,ma(i.priority,function(){$5(u)});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function l0(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var u=ov(i.nativeEvent);if(u===null){u=i.nativeEvent;var g=new u.constructor(u.type,u);yu=g,u.target.dispatchEvent(g),yu=null}else return l=Wn(u),l!==null&&B5(l),i.blockedOn=u,!1;l.shift()}return!0}function H5(i,l,u){l0(i)&&u.delete(l)}function TL(){cv=!1,Ys!==null&&l0(Ys)&&(Ys=null),Xs!==null&&l0(Xs)&&(Xs=null),Js!==null&&l0(Js)&&(Js=null),ad.forEach(H5),id.forEach(H5)}function c0(i,l){i.blockedOn===l&&(i.blockedOn=null,cv||(cv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,TL)))}var u0=null;function W5(i){u0!==i&&(u0=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){u0===i&&(u0=null);for(var l=0;l<i.length;l+=3){var u=i[l],g=i[l+1],b=i[l+2];if(typeof g!="function"){if(lv(g||u)===null)continue;break}var k=Wn(u);k!==null&&(i.splice(l,3),l-=3,ox(k,{pending:!0,data:b,method:u.method,action:g},g,b))}}))}function yc(i){function l(K){return c0(K,i)}Ys!==null&&c0(Ys,i),Xs!==null&&c0(Xs,i),Js!==null&&c0(Js,i),ad.forEach(l),id.forEach(l);for(var u=0;u<Qs.length;u++){var g=Qs[u];g.blockedOn===i&&(g.blockedOn=null)}for(;0<Qs.length&&(u=Qs[0],u.blockedOn===null);)F5(u),u.blockedOn===null&&Qs.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var b=u[g],k=u[g+1],M=b[Ar]||null;if(typeof k=="function")M||W5(u);else if(M){var F=null;if(k&&k.hasAttribute("formAction")){if(b=k,M=k[Ar]||null)F=M.formAction;else if(lv(b)!==null)continue}else F=M.action;typeof F=="function"?u[g+1]=F:(u.splice(g,3),g-=3),W5(u)}}}function G5(){function i(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(M){return b=M})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),g||setTimeout(u,20)}function u(){if(!g&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(u,100),function(){g=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function uv(i){this._internalRoot=i}d0.prototype.render=uv.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(n(409));var u=l.current,g=Pn();L5(u,g,i,l,null,null)},d0.prototype.unmount=uv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;L5(i.current,2,null,i,null,null),Gh(),l[Fa]=null}};function d0(i){this._internalRoot=i}d0.prototype.unstable_scheduleHydration=function(i){if(i){var l=Gf();i={blockedOn:null,target:i,priority:l};for(var u=0;u<Qs.length&&l!==0&&l<Qs[u].priority;u++);Qs.splice(u,0,i),u===0&&F5(i)}};var V5=t.version;if(V5!=="19.2.3")throw Error(n(527,V5,"19.2.3"));X.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=h(l),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var OL={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var f0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!f0.isDisabled&&f0.supportsFiber)try{he=f0.inject(OL),ce=f0}catch{}}return ld.createRoot=function(i,l){if(!s(i))throw Error(n(299));var u=!1,g="",b=Z4,k=eN,M=tN;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(k=l.onCaughtError),l.onRecoverableError!==void 0&&(M=l.onRecoverableError)),l=R5(i,1,!1,null,null,u,g,null,b,k,M,G5),i[Fa]=l.current,Gx(i),new uv(l)},ld.hydrateRoot=function(i,l,u){if(!s(i))throw Error(n(299));var g=!1,b="",k=Z4,M=eN,F=tN,K=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(k=u.onUncaughtError),u.onCaughtError!==void 0&&(M=u.onCaughtError),u.onRecoverableError!==void 0&&(F=u.onRecoverableError),u.formState!==void 0&&(K=u.formState)),l=R5(i,1,!0,l,u??null,g,b,K,k,M,F,G5),l.context=I5(null),u=l.current,g=Pn(),g=No(g),b=Ds(g),b.callback=null,Bs(u,b,g),u=g,l.current.lanes=u,jo(l,u),ni(l),i[Fa]=l.current,Gx(i),new d0(l)},ld.version="19.2.3",ld}var rk;function FL(){if(rk)return hv.exports;rk=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),hv.exports=UL(),hv.exports}var HL=FL();const WL=zn(HL);var nk="popstate";function GL(e={}){function t(n,s){let{pathname:o,search:c,hash:f}=n.location;return Sb("",{pathname:o,search:c,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Rd(s)}return qL(t,r,null,e)}function Kt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ia(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function VL(){return Math.random().toString(36).substring(2,10)}function ak(e,t){return{usr:e.state,key:e.key,idx:t}}function Sb(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Yc(t):t,state:r,key:t&&t.key||n||VL()}}function Rd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Yc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function qL(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,c=s.history,f="POP",d=null,h=m();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function m(){return(c.state||{idx:null}).idx}function p(){f="POP";let S=m(),C=S==null?null:S-h;h=S,d&&d({action:f,location:N.location,delta:C})}function x(S,C){f="PUSH";let A=Sb(N.location,S,C);h=m()+1;let E=ak(A,h),z=N.createHref(A);try{c.pushState(E,"",z)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(z)}o&&d&&d({action:f,location:N.location,delta:1})}function w(S,C){f="REPLACE";let A=Sb(N.location,S,C);h=m();let E=ak(A,h),z=N.createHref(A);c.replaceState(E,"",z),o&&d&&d({action:f,location:N.location,delta:0})}function j(S){return KL(S)}let N={get action(){return f},get location(){return e(s,c)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(nk,p),d=S,()=>{s.removeEventListener(nk,p),d=null}},createHref(S){return t(s,S)},createURL:j,encodeLocation(S){let C=j(S);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:x,replace:w,go(S){return c.go(S)}};return N}function KL(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Kt(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Rd(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function C6(e,t,r="/"){return YL(e,t,r,!1)}function YL(e,t,r,n){let s=typeof t=="string"?Yc(t):t,o=ns(s.pathname||"/",r);if(o==null)return null;let c=E6(e);XL(c);let f=null;for(let d=0;f==null&&d<c.length;++d){let h=o7(o);f=i7(c[d],h,n)}return f}function E6(e,t=[],r=[],n="",s=!1){let o=(c,f,d=s,h)=>{let m={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(n)&&d)return;Kt(m.relativePath.startsWith(n),`Absolute route path "${m.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(n.length)}let p=es([n,m.relativePath]),x=r.concat(m);c.children&&c.children.length>0&&(Kt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),E6(c.children,t,x,p,d)),!(c.path==null&&!c.index)&&t.push({path:p,score:n7(p,c.index),routesMeta:x})};return e.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))o(c,f);else for(let d of A6(c.path))o(c,f,!0,d)}),t}function A6(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let c=A6(n.join("/")),f=[];return f.push(...c.map(d=>d===""?o:[o,d].join("/"))),s&&f.push(...c),f.map(d=>e.startsWith("/")&&d===""?"/":d)}function XL(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:a7(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var JL=/^:[\w-]+$/,QL=3,ZL=2,e7=1,t7=10,r7=-2,ik=e=>e==="*";function n7(e,t){let r=e.split("/"),n=r.length;return r.some(ik)&&(n+=r7),t&&(n+=ZL),r.filter(s=>!ik(s)).reduce((s,o)=>s+(JL.test(o)?QL:o===""?e7:t7),n)}function a7(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function i7(e,t,r=!1){let{routesMeta:n}=e,s={},o="/",c=[];for(let f=0;f<n.length;++f){let d=n[f],h=f===n.length-1,m=o==="/"?t:t.slice(o.length)||"/",p=om({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),x=d.route;if(!p&&h&&r&&!n[n.length-1].route.index&&(p=om({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!p)return null;Object.assign(s,p.params),c.push({params:s,pathname:es([o,p.pathname]),pathnameBase:d7(es([o,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(o=es([o,p.pathnameBase]))}return c}function om(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=s7(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:n.reduce((h,{paramName:m,isOptional:p},x)=>{if(m==="*"){let j=f[x]||"";c=o.slice(0,o.length-j.length).replace(/(.)\/+$/,"$1")}const w=f[x];return p&&!w?h[m]=void 0:h[m]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:c,pattern:e}}function s7(e,t=!1,r=!0){Ia(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,d)=>(n.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function o7(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ia(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ns(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var T6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,l7=e=>T6.test(e);function c7(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Yc(e):e,o;if(r)if(l7(r))o=r;else{if(r.includes("//")){let c=r;r=r.replace(/\/\/+/g,"/"),Ia(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${r}`)}r.startsWith("/")?o=sk(r.substring(1),"/"):o=sk(r,t)}else o=t;return{pathname:o,search:f7(n),hash:h7(s)}}function sk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function xv(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function u7(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function O6(e){let t=u7(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function M6(e,t,r,n=!1){let s;typeof e=="string"?s=Yc(e):(s={...e},Kt(!s.pathname||!s.pathname.includes("?"),xv("?","pathname","search",s)),Kt(!s.pathname||!s.pathname.includes("#"),xv("#","pathname","hash",s)),Kt(!s.search||!s.search.includes("#"),xv("#","search","hash",s)));let o=e===""||s.pathname==="",c=o?"/":s.pathname,f;if(c==null)f=r;else{let p=t.length-1;if(!n&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),p-=1;s.pathname=x.join("/")}f=p>=0?t[p]:"/"}let d=c7(s,f),h=c&&c!=="/"&&c.endsWith("/"),m=(o||c===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}var es=e=>e.join("/").replace(/\/\/+/g,"/"),d7=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),f7=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,h7=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,m7=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function g7(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function p7(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var P6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function R6(e,t){let r=e;if(typeof r!="string"||!T6.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,s=!1;if(P6)try{let o=new URL(window.location.href),c=r.startsWith("//")?new URL(o.protocol+r):new URL(r),f=ns(c.pathname,t);c.origin===o.origin&&f!=null?r=f+c.search+c.hash:s=!0}catch{Ia(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:s,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var I6=["POST","PUT","PATCH","DELETE"];new Set(I6);var x7=["GET",...I6];new Set(x7);var Xc=y.createContext(null);Xc.displayName="DataRouter";var fg=y.createContext(null);fg.displayName="DataRouterState";var v7=y.createContext(!1),L6=y.createContext({isTransitioning:!1});L6.displayName="ViewTransition";var y7=y.createContext(new Map);y7.displayName="Fetchers";var b7=y.createContext(null);b7.displayName="Await";var ua=y.createContext(null);ua.displayName="Navigation";var af=y.createContext(null);af.displayName="Location";var vi=y.createContext({outlet:null,matches:[],isDataRoute:!1});vi.displayName="Route";var V1=y.createContext(null);V1.displayName="RouteError";var D6="REACT_ROUTER_ERROR",w7="REDIRECT",j7="ROUTE_ERROR_RESPONSE";function N7(e){if(e.startsWith(`${D6}:${w7}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function k7(e){if(e.startsWith(`${D6}:${j7}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new m7(t.status,t.statusText,t.data)}catch{}}function S7(e,{relative:t}={}){Kt(sf(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=y.useContext(ua),{hash:s,pathname:o,search:c}=lf(e,{relative:t}),f=o;return r!=="/"&&(f=o==="/"?r:es([r,o])),n.createHref({pathname:f,search:c,hash:s})}function sf(){return y.useContext(af)!=null}function yi(){return Kt(sf(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(af).location}var B6="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $6(e){y.useContext(ua).static||y.useLayoutEffect(e)}function Un(){let{isDataRoute:e}=y.useContext(vi);return e?B7():_7()}function _7(){Kt(sf(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(Xc),{basename:t,navigator:r}=y.useContext(ua),{matches:n}=y.useContext(vi),{pathname:s}=yi(),o=JSON.stringify(O6(n)),c=y.useRef(!1);return $6(()=>{c.current=!0}),y.useCallback((d,h={})=>{if(Ia(c.current,B6),!c.current)return;if(typeof d=="number"){r.go(d);return}let m=M6(d,JSON.parse(o),s,h.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:es([t,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[t,r,o,s,e])}y.createContext(null);function of(){let{matches:e}=y.useContext(vi),t=e[e.length-1];return t?t.params:{}}function lf(e,{relative:t}={}){let{matches:r}=y.useContext(vi),{pathname:n}=yi(),s=JSON.stringify(O6(r));return y.useMemo(()=>M6(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function C7(e,t){return z6(e,t)}function z6(e,t,r,n,s){Kt(sf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=y.useContext(ua),{matches:c}=y.useContext(vi),f=c[c.length-1],d=f?f.params:{},h=f?f.pathname:"/",m=f?f.pathnameBase:"/",p=f&&f.route;{let A=p&&p.path||"";F6(h,!p||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let x=yi(),w;if(t){let A=typeof t=="string"?Yc(t):t;Kt(m==="/"||A.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${A.pathname}" was given in the \`location\` prop.`),w=A}else w=x;let j=w.pathname||"/",N=j;if(m!=="/"){let A=m.replace(/^\//,"").split("/");N="/"+j.replace(/^\//,"").split("/").slice(A.length).join("/")}let S=C6(e,{pathname:N});Ia(p||S!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Ia(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=M7(S&&S.map(A=>Object.assign({},A,{params:Object.assign({},d,A.params),pathname:es([m,o.encodeLocation?o.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?m:es([m,o.encodeLocation?o.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),c,r,n,s);return t&&C?y.createElement(af.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},C):C}function E7(){let e=D7(),t=g7(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:o},"ErrorBoundary")," or"," ",y.createElement("code",{style:o},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:s},r):null,c)}var A7=y.createElement(E7,null),U6=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=k7(e.digest);r&&(e=r)}let t=e!==void 0?y.createElement(vi.Provider,{value:this.props.routeContext},y.createElement(V1.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?y.createElement(T7,{error:e},t):t}};U6.contextType=v7;var vv=new WeakMap;function T7({children:e,error:t}){let{basename:r}=y.useContext(ua);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=N7(t.digest);if(n){let s=vv.get(t);if(s)throw s;let o=R6(n.location,r);if(P6&&!vv.get(t))if(o.isExternal||n.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:n.replace}));throw vv.set(t,c),c}return y.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return e}function O7({routeContext:e,match:t,children:r}){let n=y.useContext(Xc);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(vi.Provider,{value:e},r)}function M7(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,c=r?.errors;if(c!=null){let m=o.findIndex(p=>p.route.id&&c?.[p.route.id]!==void 0);Kt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let f=!1,d=-1;if(r)for(let m=0;m<o.length;m++){let p=o[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:x,errors:w}=r,j=p.route.loader&&!x.hasOwnProperty(p.route.id)&&(!w||w[p.route.id]===void 0);if(p.route.lazy||j){f=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let h=r&&n?(m,p)=>{n(m,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:p7(r.matches),errorInfo:p})}:void 0;return o.reduceRight((m,p,x)=>{let w,j=!1,N=null,S=null;r&&(w=c&&p.route.id?c[p.route.id]:void 0,N=p.route.errorElement||A7,f&&(d<0&&x===0?(F6("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,S=null):d===x&&(j=!0,S=p.route.hydrateFallbackElement||null)));let C=t.concat(o.slice(0,x+1)),A=()=>{let E;return w?E=N:j?E=S:p.route.Component?E=y.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=m,y.createElement(O7,{match:p,routeContext:{outlet:m,matches:C,isDataRoute:r!=null},children:E})};return r&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?y.createElement(U6,{location:r.location,revalidation:r.revalidation,component:N,error:w,children:A(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:h}):A()},null)}function q1(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function P7(e){let t=y.useContext(Xc);return Kt(t,q1(e)),t}function R7(e){let t=y.useContext(fg);return Kt(t,q1(e)),t}function I7(e){let t=y.useContext(vi);return Kt(t,q1(e)),t}function K1(e){let t=I7(e),r=t.matches[t.matches.length-1];return Kt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function L7(){return K1("useRouteId")}function D7(){let e=y.useContext(V1),t=R7("useRouteError"),r=K1("useRouteError");return e!==void 0?e:t.errors?.[r]}function B7(){let{router:e}=P7("useNavigate"),t=K1("useNavigate"),r=y.useRef(!1);return $6(()=>{r.current=!0}),y.useCallback(async(s,o={})=>{Ia(r.current,B6),r.current&&(typeof s=="number"?await e.navigate(s):await e.navigate(s,{fromRouteId:t,...o}))},[e,t])}var ok={};function F6(e,t,r){!t&&!ok[e]&&(ok[e]=!0,Ia(!1,r))}y.memo($7);function $7({routes:e,future:t,state:r,onError:n}){return z6(e,void 0,r,n,t)}function Qr(e){Kt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function z7({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:o=!1,unstable_useTransitions:c}){Kt(!sf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),d=y.useMemo(()=>({basename:f,navigator:s,static:o,unstable_useTransitions:c,future:{}}),[f,s,o,c]);typeof r=="string"&&(r=Yc(r));let{pathname:h="/",search:m="",hash:p="",state:x=null,key:w="default"}=r,j=y.useMemo(()=>{let N=ns(h,f);return N==null?null:{location:{pathname:N,search:m,hash:p,state:x,key:w},navigationType:n}},[f,h,m,p,x,w,n]);return Ia(j!=null,`<Router basename="${f}"> is not able to match the URL "${h}${m}${p}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:y.createElement(ua.Provider,{value:d},y.createElement(af.Provider,{children:t,value:j}))}function U7({children:e,location:t}){return C7(_b(e),t)}function _b(e,t=[]){let r=[];return y.Children.forEach(e,(n,s)=>{if(!y.isValidElement(n))return;let o=[...t,s];if(n.type===y.Fragment){r.push.apply(r,_b(n.props.children,o));return}Kt(n.type===Qr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=_b(n.props.children,o)),r.push(c)}),r}var q0="get",K0="application/x-www-form-urlencoded";function hg(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function F7(e){return hg(e)&&e.tagName.toLowerCase()==="button"}function H7(e){return hg(e)&&e.tagName.toLowerCase()==="form"}function W7(e){return hg(e)&&e.tagName.toLowerCase()==="input"}function G7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function V7(e,t){return e.button===0&&(!t||t==="_self")&&!G7(e)}var h0=null;function q7(){if(h0===null)try{new FormData(document.createElement("form"),0),h0=!1}catch{h0=!0}return h0}var K7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yv(e){return e!=null&&!K7.has(e)?(Ia(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${K0}"`),null):e}function Y7(e,t){let r,n,s,o,c;if(H7(e)){let f=e.getAttribute("action");n=f?ns(f,t):null,r=e.getAttribute("method")||q0,s=yv(e.getAttribute("enctype"))||K0,o=new FormData(e)}else if(F7(e)||W7(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||f.getAttribute("action");if(n=d?ns(d,t):null,r=e.getAttribute("formmethod")||f.getAttribute("method")||q0,s=yv(e.getAttribute("formenctype"))||yv(f.getAttribute("enctype"))||K0,o=new FormData(f,e),!q7()){let{name:h,type:m,value:p}=e;if(m==="image"){let x=h?`${h}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else h&&o.append(h,p)}}else{if(hg(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=q0,n=null,s=K0,c=e}return o&&s==="text/plain"&&(c=o,o=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Y1(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function X7(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&ns(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function J7(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Q7(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Z7(e,t,r){let n=await Promise.all(e.map(async s=>{let o=t.routes[s.route.id];if(o){let c=await J7(o,r);return c.links?c.links():[]}return[]}));return nD(n.flat(1).filter(Q7).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function lk(e,t,r,n,s,o){let c=(d,h)=>r[h]?d.route.id!==r[h].route.id:!0,f=(d,h)=>r[h].pathname!==d.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,h)=>c(d,h)||f(d,h)):o==="data"?t.filter((d,h)=>{let m=n.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(c(d,h)||f(d,h))return!0;if(d.route.shouldRevalidate){let p=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function eD(e,t,{includeHydrateFallback:r}={}){return tD(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function tD(e){return[...new Set(e)]}function rD(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function nD(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let o=JSON.stringify(rD(s));return r.has(o)||(r.add(o),n.push({key:o,link:s})),n},[])}function H6(){let e=y.useContext(Xc);return Y1(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function aD(){let e=y.useContext(fg);return Y1(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var X1=y.createContext(void 0);X1.displayName="FrameworkContext";function W6(){let e=y.useContext(X1);return Y1(e,"You must render this element inside a <HydratedRouter> element"),e}function iD(e,t){let r=y.useContext(X1),[n,s]=y.useState(!1),[o,c]=y.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:h,onMouseLeave:m,onTouchStart:p}=t,x=y.useRef(null);y.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let N=C=>{C.forEach(A=>{c(A.isIntersecting)})},S=new IntersectionObserver(N,{threshold:.5});return x.current&&S.observe(x.current),()=>{S.disconnect()}}},[e]),y.useEffect(()=>{if(n){let N=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(N)}}},[n]);let w=()=>{s(!0)},j=()=>{s(!1),c(!1)};return r?e!=="intent"?[o,x,{}]:[o,x,{onFocus:cd(f,w),onBlur:cd(d,j),onMouseEnter:cd(h,w),onMouseLeave:cd(m,j),onTouchStart:cd(p,w)}]:[!1,x,{}]}function cd(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function sD({page:e,...t}){let{router:r}=H6(),n=y.useMemo(()=>C6(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?y.createElement(lD,{page:e,matches:n,...t}):null}function oD(e){let{manifest:t,routeModules:r}=W6(),[n,s]=y.useState([]);return y.useEffect(()=>{let o=!1;return Z7(e,t,r).then(c=>{o||s(c)}),()=>{o=!0}},[e,t,r]),n}function lD({page:e,matches:t,...r}){let n=yi(),{manifest:s,routeModules:o}=W6(),{basename:c}=H6(),{loaderData:f,matches:d}=aD(),h=y.useMemo(()=>lk(e,t,d,s,n,"data"),[e,t,d,s,n]),m=y.useMemo(()=>lk(e,t,d,s,n,"assets"),[e,t,d,s,n]),p=y.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,N=!1;if(t.forEach(C=>{let A=s.routes[C.route.id];!A||!A.hasLoader||(!h.some(E=>E.route.id===C.route.id)&&C.route.id in f&&o[C.route.id]?.shouldRevalidate||A.hasClientLoader?N=!0:j.add(C.route.id))}),j.size===0)return[];let S=X7(e,c,"data");return N&&j.size>0&&S.searchParams.set("_routes",t.filter(C=>j.has(C.route.id)).map(C=>C.route.id).join(",")),[S.pathname+S.search]},[c,f,n,s,h,t,e,o]),x=y.useMemo(()=>eD(m,s),[m,s]),w=oD(m);return y.createElement(y.Fragment,null,p.map(j=>y.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),x.map(j=>y.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),w.map(({key:j,link:N})=>y.createElement("link",{key:j,nonce:r.nonce,...N})))}function cD(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var uD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{uD&&(window.__reactRouterVersion="7.11.0")}catch{}function dD({basename:e,children:t,unstable_useTransitions:r,window:n}){let s=y.useRef();s.current==null&&(s.current=GL({window:n,v5Compat:!0}));let o=s.current,[c,f]=y.useState({action:o.action,location:o.location}),d=y.useCallback(h=>{r===!1?f(h):y.startTransition(()=>f(h))},[r]);return y.useLayoutEffect(()=>o.listen(d),[o,d]),y.createElement(z7,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:r})}var G6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kt=y.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:o,replace:c,state:f,target:d,to:h,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:x,...w},j){let{basename:N,unstable_useTransitions:S}=y.useContext(ua),C=typeof h=="string"&&G6.test(h),A=R6(h,N);h=A.to;let E=S7(h,{relative:s}),[z,P,B]=iD(n,w),T=gD(h,{replace:c,state:f,target:d,preventScrollReset:m,relative:s,viewTransition:p,unstable_defaultShouldRevalidate:x,unstable_useTransitions:S});function R(I){t&&t(I),I.defaultPrevented||T(I)}let $=y.createElement("a",{...w,...B,href:A.absoluteURL||E,onClick:A.isExternal||o?t:R,ref:cD(j,P),target:d,"data-discover":!C&&r==="render"?"true":void 0});return z&&!C?y.createElement(y.Fragment,null,$,y.createElement(sD,{page:E})):$});kt.displayName="Link";var fD=y.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:o,to:c,viewTransition:f,children:d,...h},m){let p=lf(c,{relative:h.relative}),x=yi(),w=y.useContext(fg),{navigator:j,basename:N}=y.useContext(ua),S=w!=null&&bD(p)&&f===!0,C=j.encodeLocation?j.encodeLocation(p).pathname:p.pathname,A=x.pathname,E=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;r||(A=A.toLowerCase(),E=E?E.toLowerCase():null,C=C.toLowerCase()),E&&N&&(E=ns(E,N)||E);const z=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let P=A===C||!s&&A.startsWith(C)&&A.charAt(z)==="/",B=E!=null&&(E===C||!s&&E.startsWith(C)&&E.charAt(C.length)==="/"),T={isActive:P,isPending:B,isTransitioning:S},R=P?t:void 0,$;typeof n=="function"?$=n(T):$=[n,P?"active":null,B?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let I=typeof o=="function"?o(T):o;return y.createElement(kt,{...h,"aria-current":R,className:$,ref:m,style:I,to:c,viewTransition:f},typeof d=="function"?d(T):d)});fD.displayName="NavLink";var hD=y.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:o,method:c=q0,action:f,onSubmit:d,relative:h,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:x,...w},j)=>{let{unstable_useTransitions:N}=y.useContext(ua),S=vD(),C=yD(f,{relative:h}),A=c.toLowerCase()==="get"?"get":"post",E=typeof f=="string"&&G6.test(f),z=P=>{if(d&&d(P),P.defaultPrevented)return;P.preventDefault();let B=P.nativeEvent.submitter,T=B?.getAttribute("formmethod")||c,R=()=>S(B||P.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:s,state:o,relative:h,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:x});N&&r!==!1?y.startTransition(()=>R()):R()};return y.createElement("form",{ref:j,method:A,action:C,onSubmit:n?d:z,...w,"data-discover":!E&&e==="render"?"true":void 0})});hD.displayName="Form";function mD(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function V6(e){let t=y.useContext(Xc);return Kt(t,mD(e)),t}function gD(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:d}={}){let h=Un(),m=yi(),p=lf(e,{relative:o});return y.useCallback(x=>{if(V7(x,t)){x.preventDefault();let w=r!==void 0?r:Rd(m)===Rd(p),j=()=>h(e,{replace:w,state:n,preventScrollReset:s,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:f});d?y.startTransition(()=>j()):j()}},[m,h,p,r,n,t,e,s,o,c,f,d])}var pD=0,xD=()=>`__${String(++pD)}__`;function vD(){let{router:e}=V6("useSubmit"),{basename:t}=y.useContext(ua),r=L7(),n=e.fetch,s=e.navigate;return y.useCallback(async(o,c={})=>{let{action:f,method:d,encType:h,formData:m,body:p}=Y7(o,t);if(c.navigate===!1){let x=c.fetcherKey||xD();await n(x,r,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:m,body:p,formMethod:c.method||d,formEncType:c.encType||h,flushSync:c.flushSync})}else await s(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:m,body:p,formMethod:c.method||d,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,s,t,r])}function yD(e,{relative:t}={}){let{basename:r}=y.useContext(ua),n=y.useContext(vi);Kt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...lf(e||".",{relative:t})},c=yi();if(e==null){o.search=c.search;let f=new URLSearchParams(o.search),d=f.getAll("index");if(d.some(m=>m==="")){f.delete("index"),d.filter(p=>p).forEach(p=>f.append("index",p));let m=f.toString();o.search=m?`?${m}`:""}}return(!e||e===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:es([r,o.pathname])),Rd(o)}function bD(e,{relative:t}={}){let r=y.useContext(L6);Kt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=V6("useViewTransitionState"),s=lf(e,{relative:t});if(!r.isTransitioning)return!1;let o=ns(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=ns(r.nextLocation.pathname,n)||r.nextLocation.pathname;return om(s.pathname,c)!=null||om(s.pathname,o)!=null}var qr=_6();const J1=zn(qr),wD=()=>{};var ck={};const q6=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):(s&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128)}return t},jD=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const s=e[r++];if(s<128)t[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=e[r++];t[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=e[r++],c=e[r++],f=e[r++],d=((s&7)<<18|(o&63)<<12|(c&63)<<6|f&63)-65536;t[n++]=String.fromCharCode(55296+(d>>10)),t[n++]=String.fromCharCode(56320+(d&1023))}else{const o=e[r++],c=e[r++];t[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return t.join("")},K6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<e.length;s+=3){const o=e[s],c=s+1<e.length,f=c?e[s+1]:0,d=s+2<e.length,h=d?e[s+2]:0,m=o>>2,p=(o&3)<<4|f>>4;let x=(f&15)<<2|h>>6,w=h&63;d||(w=64,c||(x=64)),n.push(r[m],r[p],r[x],r[w])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(q6(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):jD(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<e.length;){const o=r[e.charAt(s++)],f=s<e.length?r[e.charAt(s)]:0;++s;const h=s<e.length?r[e.charAt(s)]:64;++s;const p=s<e.length?r[e.charAt(s)]:64;if(++s,o==null||f==null||h==null||p==null)throw new ND;const x=o<<2|f>>4;if(n.push(x),h!==64){const w=f<<4&240|h>>2;if(n.push(w),p!==64){const j=h<<6&192|p;n.push(j)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ND extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kD=function(e){const t=q6(e);return K6.encodeByteArray(t,!0)},lm=function(e){return kD(e).replace(/\./g,"")},Y6=function(e){try{return K6.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function SD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const _D=()=>SD().__FIREBASE_DEFAULTS__,CD=()=>{if(typeof process>"u"||typeof ck>"u")return;const e=ck.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ED=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Y6(e[1]);return t&&JSON.parse(t)},Q1=()=>{try{return wD()||_D()||CD()||ED()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},X6=e=>Q1()?.emulatorHosts?.[e],J6=e=>{const t=X6(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},Q6=()=>Q1()?.config,Z6=e=>Q1()?.[`_${e}`];class AD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}function Jc(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Z1(e){return(await fetch(e,{credentials:"include"})).ok}function eA(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",s=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...e};return[lm(JSON.stringify(r)),lm(JSON.stringify(c)),""].join(".")}const Sd={};function TD(){const e={prod:[],emulator:[]};for(const t of Object.keys(Sd))Sd[t]?e.emulator.push(t):e.prod.push(t);return e}function OD(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let uk=!1;function e2(e,t){if(typeof window>"u"||typeof document>"u"||!Jc(window.location.host)||Sd[e]===t||Sd[e]||uk)return;Sd[e]=t;function r(x){return`__firebase__banner__${x}`}const n="__firebase__banner",o=TD().prod.length>0;function c(){const x=document.getElementById(n);x&&x.remove()}function f(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,w){x.setAttribute("width","24"),x.setAttribute("id",w),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function h(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{uk=!0,c()},x}function m(x,w){x.setAttribute("id",w),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function p(){const x=OD(n),w=r("text"),j=document.getElementById(w)||document.createElement("span"),N=r("learnmore"),S=document.getElementById(N)||document.createElement("a"),C=r("preprendIcon"),A=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const E=x.element;f(E),m(S,N);const z=h();d(A,C),E.append(A,j,S,z),document.body.appendChild(E)}o?(j.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function PD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RD(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function ID(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LD(){const e=cn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function DD(){try{return typeof indexedDB=="object"}catch{return!1}}function BD(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(r){t(r)}})}const $D="FirebaseError";class bi extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=$D,Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cf.prototype.create)}}class cf{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},s=`${this.service}/${t}`,o=this.errors[t],c=o?zD(o,n):"Error",f=`${this.serviceName}: ${c} (${s}).`;return new bi(s,f,n)}}function zD(e,t){return e.replace(UD,(r,n)=>{const s=t[n];return s!=null?String(s):`<${n}?>`})}const UD=/\{\$([^}]+)}/g;function FD(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function dl(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const s of r){if(!n.includes(s))return!1;const o=e[s],c=t[s];if(dk(o)&&dk(c)){if(!dl(o,c))return!1}else if(o!==c)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function dk(e){return e!==null&&typeof e=="object"}function uf(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(s=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function wd(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,o]=n.split("=");t[decodeURIComponent(s)]=decodeURIComponent(o)}}),t}function jd(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function HD(e,t){const r=new WD(e,t);return r.subscribe.bind(r)}class WD{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let s;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");GD(t,["next","error","complete"])?s=t:s={next:t,error:r,complete:n},s.next===void 0&&(s.next=bv),s.error===void 0&&(s.error=bv),s.complete===void 0&&(s.complete=bv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GD(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function bv(){}function Da(e){return e&&e._delegate?e._delegate:e}class fo{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Ko="[DEFAULT]";let VD=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new AD;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t?.identifier),n=t?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(KD(t))try{this.getOrInitializeService({instanceIdentifier:Ko})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(t=Ko){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ko){return this.instances.has(t)}getOptions(t=Ko){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(o);n===f&&c.resolve(s)}return s}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(n)??new Set;s.add(t),this.onInitCallbacks.set(n,s);const o=this.instances.get(n);return o&&t(o,n),()=>{s.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:qD(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Ko){return this.component?this.component.multipleInstances?t:Ko:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function qD(e){return e===Ko?void 0:e}function KD(e){return e.instantiationMode==="EAGER"}class YD{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new VD(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}var yt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(yt||(yt={}));const XD={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},JD=yt.INFO,QD={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},ZD=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),s=QD[t];if(s)console[s](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class t2{constructor(t){this.name=t,this._logLevel=JD,this._logHandler=ZD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in yt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?XD[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...t),this._logHandler(this,yt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...t),this._logHandler(this,yt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...t),this._logHandler(this,yt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...t),this._logHandler(this,yt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...t),this._logHandler(this,yt.ERROR,...t)}}const e9=(e,t)=>t.some(r=>e instanceof r);let fk,hk;function t9(){return fk||(fk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r9(){return hk||(hk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tA=new WeakMap,Cb=new WeakMap,rA=new WeakMap,wv=new WeakMap,r2=new WeakMap;function n9(e){const t=new Promise((r,n)=>{const s=()=>{e.removeEventListener("success",o),e.removeEventListener("error",c)},o=()=>{r(lo(e.result)),s()},c=()=>{n(e.error),s()};e.addEventListener("success",o),e.addEventListener("error",c)});return t.then(r=>{r instanceof IDBCursor&&tA.set(r,e)}).catch(()=>{}),r2.set(t,e),t}function a9(e){if(Cb.has(e))return;const t=new Promise((r,n)=>{const s=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",c),e.removeEventListener("abort",c)},o=()=>{r(),s()},c=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",o),e.addEventListener("error",c),e.addEventListener("abort",c)});Cb.set(e,t)}let Eb={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return Cb.get(e);if(t==="objectStoreNames")return e.objectStoreNames||rA.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return lo(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function i9(e){Eb=e(Eb)}function s9(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(jv(this),t,...r);return rA.set(n,t.sort?t.sort():[t]),lo(n)}:r9().includes(e)?function(...t){return e.apply(jv(this),t),lo(tA.get(this))}:function(...t){return lo(e.apply(jv(this),t))}}function o9(e){return typeof e=="function"?s9(e):(e instanceof IDBTransaction&&a9(e),e9(e,t9())?new Proxy(e,Eb):e)}function lo(e){if(e instanceof IDBRequest)return n9(e);if(wv.has(e))return wv.get(e);const t=o9(e);return t!==e&&(wv.set(e,t),r2.set(t,e)),t}const jv=e=>r2.get(e);function l9(e,t,{blocked:r,upgrade:n,blocking:s,terminated:o}={}){const c=indexedDB.open(e,t),f=lo(c);return n&&c.addEventListener("upgradeneeded",d=>{n(lo(c.result),d.oldVersion,d.newVersion,lo(c.transaction),d)}),r&&c.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),f.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const c9=["get","getKey","getAll","getAllKeys","count"],u9=["put","add","delete","clear"],Nv=new Map;function mk(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Nv.get(t))return Nv.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,s=u9.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||c9.includes(r)))return;const o=async function(c,...f){const d=this.transaction(c,s?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(f.shift())),(await Promise.all([h[r](...f),s&&d.done]))[0]};return Nv.set(t,o),o}i9(e=>({...e,get:(t,r,n)=>mk(t,r)||e.get(t,r,n),has:(t,r)=>!!mk(t,r)||e.has(t,r)}));class d9{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(f9(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function f9(e){return e.getComponent()?.type==="VERSION"}const Ab="@firebase/app",gk="0.14.6";const as=new t2("@firebase/app"),h9="@firebase/app-compat",m9="@firebase/analytics-compat",g9="@firebase/analytics",p9="@firebase/app-check-compat",x9="@firebase/app-check",v9="@firebase/auth",y9="@firebase/auth-compat",b9="@firebase/database",w9="@firebase/data-connect",j9="@firebase/database-compat",N9="@firebase/functions",k9="@firebase/functions-compat",S9="@firebase/installations",_9="@firebase/installations-compat",C9="@firebase/messaging",E9="@firebase/messaging-compat",A9="@firebase/performance",T9="@firebase/performance-compat",O9="@firebase/remote-config",M9="@firebase/remote-config-compat",P9="@firebase/storage",R9="@firebase/storage-compat",I9="@firebase/firestore",L9="@firebase/ai",D9="@firebase/firestore-compat",B9="firebase",$9="12.6.0";const Tb="[DEFAULT]",z9={[Ab]:"fire-core",[h9]:"fire-core-compat",[g9]:"fire-analytics",[m9]:"fire-analytics-compat",[x9]:"fire-app-check",[p9]:"fire-app-check-compat",[v9]:"fire-auth",[y9]:"fire-auth-compat",[b9]:"fire-rtdb",[w9]:"fire-data-connect",[j9]:"fire-rtdb-compat",[N9]:"fire-fn",[k9]:"fire-fn-compat",[S9]:"fire-iid",[_9]:"fire-iid-compat",[C9]:"fire-fcm",[E9]:"fire-fcm-compat",[A9]:"fire-perf",[T9]:"fire-perf-compat",[O9]:"fire-rc",[M9]:"fire-rc-compat",[P9]:"fire-gcs",[R9]:"fire-gcs-compat",[I9]:"fire-fst",[D9]:"fire-fst-compat",[L9]:"fire-vertex","fire-js":"fire-js",[B9]:"fire-js-all"};const cm=new Map,U9=new Map,Ob=new Map;function pk(e,t){try{e.container.addComponent(t)}catch(r){as.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function fl(e){const t=e.name;if(Ob.has(t))return as.debug(`There were multiple attempts to register component ${t}.`),!1;Ob.set(t,e);for(const r of cm.values())pk(r,e);for(const r of U9.values())pk(r,e);return!0}function mg(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function bn(e){return e==null?!1:e.settings!==void 0}const F9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},co=new cf("app","Firebase",F9);class H9{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw co.create("app-deleted",{appName:this._name})}}const Cl=$9;function nA(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:Tb,automaticDataCollectionEnabled:!0,...t},s=n.name;if(typeof s!="string"||!s)throw co.create("bad-app-name",{appName:String(s)});if(r||(r=Q6()),!r)throw co.create("no-options");const o=cm.get(s);if(o){if(dl(r,o.options)&&dl(n,o.config))return o;throw co.create("duplicate-app",{appName:s})}const c=new YD(s);for(const d of Ob.values())c.addComponent(d);const f=new H9(r,n,c);return cm.set(s,f),f}function n2(e=Tb){const t=cm.get(e);if(!t&&e===Tb&&Q6())return nA();if(!t)throw co.create("no-app",{appName:e});return t}function ui(e,t,r){let n=z9[e]??e;r&&(n+=`-${r}`);const s=n.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const c=[`Unable to register library "${n}" with version "${t}":`];s&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),as.warn(c.join(" "));return}fl(new fo(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}const W9="firebase-heartbeat-database",G9=1,Id="firebase-heartbeat-store";let kv=null;function aA(){return kv||(kv=l9(W9,G9,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Id)}catch(r){console.warn(r)}}}}).catch(e=>{throw co.create("idb-open",{originalErrorMessage:e.message})})),kv}async function V9(e){try{const r=(await aA()).transaction(Id),n=await r.objectStore(Id).get(iA(e));return await r.done,n}catch(t){if(t instanceof bi)as.warn(t.message);else{const r=co.create("idb-get",{originalErrorMessage:t?.message});as.warn(r.message)}}}async function xk(e,t){try{const n=(await aA()).transaction(Id,"readwrite");await n.objectStore(Id).put(t,iA(e)),await n.done}catch(r){if(r instanceof bi)as.warn(r.message);else{const n=co.create("idb-set",{originalErrorMessage:r?.message});as.warn(n.message)}}}function iA(e){return`${e.name}!${e.options.appId}`}const q9=1024,K9=30;class Y9{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new J9(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=vk();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>K9){const s=Q9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){as.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=vk(),{heartbeatsToSend:r,unsentEntries:n}=X9(this._heartbeatsCache.heartbeats),s=lm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return as.warn(t),""}}}function vk(){return new Date().toISOString().substring(0,10)}function X9(e,t=q9){const r=[];let n=e.slice();for(const s of e){const o=r.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),yk(r)>t){o.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),yk(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class J9{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DD()?BD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await V9(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return xk(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return xk(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function yk(e){return lm(JSON.stringify({version:2,heartbeats:e})).length}function Q9(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}function Z9(e){fl(new fo("platform-logger",t=>new d9(t),"PRIVATE")),fl(new fo("heartbeat",t=>new Y9(t),"PRIVATE")),ui(Ab,gk,e),ui(Ab,gk,"esm2020"),ui("fire-js","")}Z9("");function sA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eB=sA,oA=new cf("auth","Firebase",sA());const um=new t2("@firebase/auth");function tB(e,...t){um.logLevel<=yt.WARN&&um.warn(`Auth (${Cl}): ${e}`,...t)}function Y0(e,...t){um.logLevel<=yt.ERROR&&um.error(`Auth (${Cl}): ${e}`,...t)}function sa(e,...t){throw i2(e,...t)}function Pa(e,...t){return i2(e,...t)}function a2(e,t,r){const n={...eB(),[t]:r};return new cf("auth","Firebase",n).create(t,{appName:e.name})}function ts(e){return a2(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rB(e,t,r){const n=r;if(!(t instanceof n))throw n.name!==t.constructor.name&&sa(e,"argument-error"),a2(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function i2(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return oA.create(e,...t)}function Je(e,t,...r){if(!e)throw i2(t,...r)}function Yi(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Y0(t),new Error(t)}function is(e,t){e||Yi(t)}function Mb(){return typeof self<"u"&&self.location?.href||""}function nB(){return bk()==="http:"||bk()==="https:"}function bk(){return typeof self<"u"&&self.location?.protocol||null}function aB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nB()||RD()||"connection"in navigator)?navigator.onLine:!0}function iB(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}class df{constructor(t,r){this.shortDelay=t,this.longDelay=r,is(r>t,"Short delay should be less than long delay!"),this.isMobile=MD()||ID()}get(){return aB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function s2(e,t){is(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}class lA{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const oB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lB=new df(3e4,6e4);function hs(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function ms(e,t,r,n,s={}){return cA(e,s,async()=>{let o={},c={};n&&(t==="GET"?c=n:o={body:JSON.stringify(n)});const f=uf({key:e.config.apiKey,...c}).slice(1),d=await e._getAdditionalHeaders();d["Content-Type"]="application/json",e.languageCode&&(d["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:d,...o};return PD()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&Jc(e.emulatorConfig.host)&&(h.credentials="include"),lA.fetch()(await uA(e,e.config.apiHost,r,f),h)})}async function cA(e,t,r){e._canInitEmulator=!1;const n={...sB,...t};try{const s=new uB(e),o=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw m0(e,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const f=o.ok?c.errorMessage:c.error.message,[d,h]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw m0(e,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw m0(e,"email-already-in-use",c);if(d==="USER_DISABLED")throw m0(e,"user-disabled",c);const m=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw a2(e,m,h);sa(e,m)}}catch(s){if(s instanceof bi)throw s;sa(e,"network-request-failed",{message:String(s)})}}async function ff(e,t,r,n,s={}){const o=await ms(e,t,r,n,s);return"mfaPendingCredential"in o&&sa(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function uA(e,t,r,n){const s=`${t}${r}?${n}`,o=e,c=o.config.emulator?s2(e.config,s):`${e.config.apiScheme}://${s}`;return oB.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function cB(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Pa(this.auth,"network-request-failed")),lB.get())})}}function m0(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Pa(e,t,n);return s.customData._tokenResponse=r,s}function wk(e){return e!==void 0&&e.enterprise!==void 0}class dB{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return cB(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fB(e,t){return ms(e,"GET","/v2/recaptchaConfig",hs(e,t))}async function hB(e,t){return ms(e,"POST","/v1/accounts:delete",t)}async function dm(e,t){return ms(e,"POST","/v1/accounts:lookup",t)}function _d(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function mB(e,t=!1){const r=Da(e),n=await r.getIdToken(t),s=o2(n);Je(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:n,authTime:_d(Sv(s.auth_time)),issuedAtTime:_d(Sv(s.iat)),expirationTime:_d(Sv(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Sv(e){return Number(e)*1e3}function o2(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return Y0("JWT malformed, contained fewer than 3 sections"),null;try{const s=Y6(r);return s?JSON.parse(s):(Y0("Failed to decode base64 JWT payload"),null)}catch(s){return Y0("Caught error parsing JWT payload as JSON",s?.toString()),null}}function jk(e){const t=o2(e);return Je(t,"internal-error"),Je(typeof t.exp<"u","internal-error"),Je(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Ld(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof bi&&gB(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function gB({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}class pB{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Pb{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=_d(this.lastLoginAt),this.creationTime=_d(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function fm(e){const t=e.auth,r=await e.getIdToken(),n=await Ld(e,dm(t,{idToken:r}));Je(n?.users.length,t,"internal-error");const s=n.users[0];e._notifyReloadListener(s);const o=s.providerUserInfo?.length?dA(s.providerUserInfo):[],c=vB(e.providerData,o),f=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!c?.length,h=f?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Pb(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,m)}async function xB(e){const t=Da(e);await fm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function vB(e,t){return[...e.filter(n=>!t.some(s=>s.providerId===n.providerId)),...t]}function dA(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}async function yB(e,t){const r=await cA(e,{},async()=>{const n=uf({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:o}=e.config,c=await uA(e,s,"/v1/token",`key=${o}`),f=await e._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:n};return e.emulatorConfig&&Jc(e.emulatorConfig.host)&&(d.credentials="include"),lA.fetch()(c,d)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function bB(e,t){return ms(e,"POST","/v2/accounts:revokeToken",hs(e,t))}class Oc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Je(t.idToken,"internal-error"),Je(typeof t.idToken<"u","internal-error"),Je(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):jk(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Je(t.length!==0,"internal-error");const r=jk(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:s,expiresIn:o}=await yB(t,r);this.updateTokensAndExpiration(n,s,Number(o))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:s,expirationTime:o}=r,c=new Oc;return n&&(Je(typeof n=="string","internal-error",{appName:t}),c.refreshToken=n),s&&(Je(typeof s=="string","internal-error",{appName:t}),c.accessToken=s),o&&(Je(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Oc,this.toJSON())}_performRefresh(){return Yi("not implemented")}}function eo(e,t){Je(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Ta{constructor({uid:t,auth:r,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new pB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Pb(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const r=await Ld(this,this.stsTokenManager.getToken(this.auth,t));return Je(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return mB(this,t)}reload(){return xB(this)}_assign(t){this!==t&&(Je(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Ta({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await fm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(ts(this.auth));const t=await this.getIdToken();return await Ld(this,hB(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,s=r.email??void 0,o=r.phoneNumber??void 0,c=r.photoURL??void 0,f=r.tenantId??void 0,d=r._redirectEventId??void 0,h=r.createdAt??void 0,m=r.lastLoginAt??void 0,{uid:p,emailVerified:x,isAnonymous:w,providerData:j,stsTokenManager:N}=r;Je(p&&N,t,"internal-error");const S=Oc.fromJSON(this.name,N);Je(typeof p=="string",t,"internal-error"),eo(n,t.name),eo(s,t.name),Je(typeof x=="boolean",t,"internal-error"),Je(typeof w=="boolean",t,"internal-error"),eo(o,t.name),eo(c,t.name),eo(f,t.name),eo(d,t.name),eo(h,t.name),eo(m,t.name);const C=new Ta({uid:p,auth:t,email:s,emailVerified:x,displayName:n,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:f,stsTokenManager:S,createdAt:h,lastLoginAt:m});return j&&Array.isArray(j)&&(C.providerData=j.map(A=>({...A}))),d&&(C._redirectEventId=d),C}static async _fromIdTokenResponse(t,r,n=!1){const s=new Oc;s.updateFromServerResponse(r);const o=new Ta({uid:r.localId,auth:t,stsTokenManager:s,isAnonymous:n});return await fm(o),o}static async _fromGetAccountInfoResponse(t,r,n){const s=r.users[0];Je(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?dA(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,f=new Oc;f.updateFromIdToken(n);const d=new Ta({uid:s.localId,auth:t,stsTokenManager:f,isAnonymous:c}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Pb(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,h),d}}const Nk=new Map;function Xi(e){is(e instanceof Function,"Expected a class definition");let t=Nk.get(e);return t?(is(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Nk.set(e,t),t)}class fA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}fA.type="NONE";const kk=fA;function X0(e,t,r){return`firebase:${e}:${t}:${r}`}class Mc{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:s,name:o}=this.auth;this.fullUserKey=X0(this.userKey,s.apiKey,o),this.fullPersistenceKey=X0("persistence",s.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await dm(this.auth,{idToken:t}).catch(()=>{});return r?Ta._fromGetAccountInfoResponse(this.auth,r,t):null}return Ta._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new Mc(Xi(kk),t,n);const s=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||Xi(kk);const c=X0(n,t.config.apiKey,t.name);let f=null;for(const h of r)try{const m=await h._get(c);if(m){let p;if(typeof m=="string"){const x=await dm(t,{idToken:m}).catch(()=>{});if(!x)break;p=await Ta._fromGetAccountInfoResponse(t,x,m)}else p=Ta._fromJSON(t,m);h!==o&&(f=p),o=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Mc(o,t,n):(o=d[0],f&&await o._set(c,f.toJSON()),await Promise.all(r.map(async h=>{if(h!==o)try{await h._remove(c)}catch{}})),new Mc(o,t,n))}}function Sk(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(hA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(vA(t))return"Blackberry";if(yA(t))return"Webos";if(mA(t))return"Safari";if((t.includes("chrome/")||gA(t))&&!t.includes("edge/"))return"Chrome";if(xA(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if(n?.length===2)return n[1]}return"Other"}function hA(e=cn()){return/firefox\//i.test(e)}function mA(e=cn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function gA(e=cn()){return/crios\//i.test(e)}function pA(e=cn()){return/iemobile/i.test(e)}function xA(e=cn()){return/android/i.test(e)}function vA(e=cn()){return/blackberry/i.test(e)}function yA(e=cn()){return/webos/i.test(e)}function l2(e=cn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function wB(e=cn()){return l2(e)&&!!window.navigator?.standalone}function jB(){return LD()&&document.documentMode===10}function bA(e=cn()){return l2(e)||xA(e)||yA(e)||vA(e)||/windows phone/i.test(e)||pA(e)}function wA(e,t=[]){let r;switch(e){case"Browser":r=Sk(cn());break;case"Worker":r=`${Sk(cn())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Cl}/${n}`}class NB{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=o=>new Promise((c,f)=>{try{const d=t(o);c(d)}catch(d){f(d)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function kB(e,t={}){return ms(e,"GET","/v2/passwordPolicy",hs(e,t))}const SB=6;class _B{constructor(t){const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??SB,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),s&&(r.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<t.length;s++)n=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,s,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}class CB{constructor(t,r,n,s){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _k(this),this.idTokenSubscription=new _k(this),this.beforeStateQueue=new NB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Xi(r)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Mc.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await dm(this,{idToken:t}),n=await Ta._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(bn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=n?._redirectEventId,f=await this.tryRedirectSignIn(t);(!o||o===c)&&f?.user&&(n=f.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await fm(t)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=iB()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(bn(this.app))return Promise.reject(ts(this));const r=t?Da(t):null;return r&&Je(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Je(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return bn(this.app)?Promise.reject(ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await kB(this),r=new _B(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new cf("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await bB(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Xi(t)||this._popupRedirectResolver;Je(r,this,"argument-error"),this.redirectPersistenceManager=await Mc.create(this,[Xi(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,s){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(f,this,"internal-error"),f.then(()=>{c||o(this.currentUser)}),typeof r=="function"){const d=t.addObserver(r,n,s);return()=>{c=!0,d()}}else{const d=t.addObserver(r);return()=>{c=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=wA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&tB(`Error while retrieving App Check token: ${t.error}`),t?.token}}function gs(e){return Da(e)}class _k{constructor(t){this.auth=t,this.observer=null,this.addObserver=HD(r=>this.observer=r)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let gg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EB(e){gg=e}function jA(e){return gg.loadJS(e)}function AB(){return gg.recaptchaEnterpriseScript}function TB(){return gg.gapiScript}function OB(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class MB{constructor(){this.enterprise=new PB}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class PB{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const RB="recaptcha-enterprise",NA="NO_RECAPTCHA";class IB{constructor(t){this.type=RB,this.auth=gs(t)}async verify(t="verify",r=!1){async function n(o){if(!r){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,f)=>{fB(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const h=new dB(d);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,c(h.siteKey)}}).catch(d=>{f(d)})})}function s(o,c,f){const d=window.grecaptcha;wk(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:t}).then(h=>{c(h)}).catch(()=>{c(NA)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MB().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{n(this.auth).then(f=>{if(!r&&wk(window.grecaptcha))s(f,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=AB();d.length!==0&&(d+=f),jA(d).then(()=>{s(f,o,c)}).catch(h=>{c(h)})}}).catch(f=>{c(f)})})}}async function Ck(e,t,r,n=!1,s=!1){const o=new IB(e);let c;if(s)c=NA;else try{c=await o.verify(r)}catch{c=await o.verify(r,!0)}const f={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const d=f.phoneEnrollmentInfo.phoneNumber,h=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const d=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return n?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function hm(e,t,r,n,s){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Ck(e,t,r,r==="getOobCode");return n(e,o)}else return n(e,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Ck(e,t,r,r==="getOobCode");return n(e,c)}else return Promise.reject(o)})}function LB(e,t){const r=mg(e,"auth");if(r.isInitialized()){const s=r.getImmediate(),o=r.getOptions();if(dl(o,t??{}))return s;sa(s,"already-initialized")}return r.initialize({options:t})}function DB(e,t){const r=t?.persistence||[],n=(Array.isArray(r)?r:[r]).map(Xi);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t?.popupRedirectResolver)}function BB(e,t,r){const n=gs(e);Je(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const s=!1,o=kA(t),{host:c,port:f}=$B(t),d=f===null?"":`:${f}`,h={url:`${o}//${c}${d}/`},m=Object.freeze({host:c,port:f,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Je(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Je(dl(h,n.config.emulator)&&dl(m,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=m,n.settings.appVerificationDisabledForTesting=!0,Jc(c)?(Z1(`${o}//${c}${d}`),e2("Auth",!0)):zB()}function kA(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function $B(e){const t=kA(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const o=s[1];return{host:o,port:Ek(n.substr(o.length+1))}}else{const[o,c]=n.split(":");return{host:o,port:Ek(c)}}}function Ek(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function zB(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}class c2{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Yi("not implemented")}_getIdTokenResponse(t){return Yi("not implemented")}_linkToIdToken(t,r){return Yi("not implemented")}_getReauthenticationResolver(t){return Yi("not implemented")}}async function UB(e,t){return ms(e,"POST","/v1/accounts:signUp",t)}async function FB(e,t){return ff(e,"POST","/v1/accounts:signInWithPassword",hs(e,t))}async function SA(e,t){return ms(e,"POST","/v1/accounts:sendOobCode",hs(e,t))}async function HB(e,t){return SA(e,t)}async function WB(e,t){return SA(e,t)}async function GB(e,t){return ff(e,"POST","/v1/accounts:signInWithEmailLink",hs(e,t))}async function VB(e,t){return ff(e,"POST","/v1/accounts:signInWithEmailLink",hs(e,t))}class Dd extends c2{constructor(t,r,n,s=null){super("password",n),this._email=t,this._password=r,this._tenantId=s}static _fromEmailAndPassword(t,r){return new Dd(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new Dd(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hm(t,r,"signInWithPassword",FB);case"emailLink":return GB(t,{email:this._email,oobCode:this._password});default:sa(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hm(t,n,"signUpPassword",UB);case"emailLink":return VB(t,{idToken:r,email:this._email,oobCode:this._password});default:sa(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Pc(e,t){return ff(e,"POST","/v1/accounts:signInWithIdp",hs(e,t))}const qB="http://localhost";class hl extends c2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new hl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):sa("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:s,...o}=r;if(!n||!s)return null;const c=new hl(n,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const r=this.buildRequest();return Pc(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Pc(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Pc(t,r)}buildRequest(){const t={requestUri:qB,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=uf(r)}return t}}function KB(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YB(e){const t=wd(jd(e)).link,r=t?wd(jd(t)).deep_link_id:null,n=wd(jd(e)).deep_link_id;return(n?wd(jd(n)).link:null)||n||r||t||e}class u2{constructor(t){const r=wd(jd(t)),n=r.apiKey??null,s=r.oobCode??null,o=KB(r.mode??null);Je(n&&s&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=s,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=YB(t);try{return new u2(r)}catch{return null}}}class Qc{constructor(){this.providerId=Qc.PROVIDER_ID}static credential(t,r){return Dd._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=u2.parseLink(r);return Je(n,"argument-error"),Dd._fromEmailAndCode(t,n.code,n.tenantId)}}Qc.PROVIDER_ID="password";Qc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class d2{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class hf extends d2{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class no extends hf{constructor(){super("facebook.com")}static credential(t){return hl._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return no.credentialFromTaggedObject(t)}static credentialFromError(t){return no.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return no.credential(t.oauthAccessToken)}catch{return null}}}no.FACEBOOK_SIGN_IN_METHOD="facebook.com";no.PROVIDER_ID="facebook.com";class Gi extends hf{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return hl._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return Gi.credentialFromTaggedObject(t)}static credentialFromError(t){return Gi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return Gi.credential(r,n)}catch{return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com";Gi.PROVIDER_ID="google.com";class ao extends hf{constructor(){super("github.com")}static credential(t){return hl._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ao.credentialFromTaggedObject(t)}static credentialFromError(t){return ao.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ao.credential(t.oauthAccessToken)}catch{return null}}}ao.GITHUB_SIGN_IN_METHOD="github.com";ao.PROVIDER_ID="github.com";class io extends hf{constructor(){super("twitter.com")}static credential(t,r){return hl._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return io.credentialFromTaggedObject(t)}static credentialFromError(t){return io.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return io.credential(r,n)}catch{return null}}}io.TWITTER_SIGN_IN_METHOD="twitter.com";io.PROVIDER_ID="twitter.com";async function XB(e,t){return ff(e,"POST","/v1/accounts:signUp",hs(e,t))}class ml{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,s=!1){const o=await Ta._fromIdTokenResponse(t,n,s),c=Ak(n);return new ml({user:o,providerId:c,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const s=Ak(n);return new ml({user:t,providerId:s,_tokenResponse:n,operationType:r})}}function Ak(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class mm extends bi{constructor(t,r,n,s){super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,mm.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,s){return new mm(t,r,n,s)}}function _A(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?mm._fromErrorAndOperation(e,o,t,n):o})}async function JB(e,t,r=!1){const n=await Ld(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return ml._forOperation(e,"link",n)}async function QB(e,t,r=!1){const{auth:n}=e;if(bn(n.app))return Promise.reject(ts(n));const s="reauthenticate";try{const o=await Ld(e,_A(n,s,t,e),r);Je(o.idToken,n,"internal-error");const c=o2(o.idToken);Je(c,n,"internal-error");const{sub:f}=c;return Je(e.uid===f,n,"user-mismatch"),ml._forOperation(e,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&sa(n,"user-mismatch"),o}}async function CA(e,t,r=!1){if(bn(e.app))return Promise.reject(ts(e));const n="signIn",s=await _A(e,n,t),o=await ml._fromIdTokenResponse(e,n,s);return r||await e._updateCurrentUser(o.user),o}async function ZB(e,t){return CA(gs(e),t)}async function EA(e){const t=gs(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function e$(e,t,r){const n=gs(e);await hm(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",WB)}async function t$(e,t,r){if(bn(e.app))return Promise.reject(ts(e));const n=gs(e),c=await hm(n,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",XB).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&EA(e),d}),f=await ml._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(f.user),f}function r$(e,t,r){return bn(e.app)?Promise.reject(ts(e)):ZB(Da(e),Qc.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&EA(e),n})}async function n$(e,t){const r=Da(e),s={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()},{email:o}=await HB(r.auth,s);o!==e.email&&await e.reload()}function a$(e,t,r,n){return Da(e).onIdTokenChanged(t,r,n)}function i$(e,t,r){return Da(e).beforeAuthStateChanged(t,r)}function s$(e,t,r,n){return Da(e).onAuthStateChanged(t,r,n)}function o$(e){return Da(e).signOut()}const gm="__sak";class AA{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(gm,"1"),this.storage.removeItem(gm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const l$=1e3,c$=10;class TA extends AA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&t(r,s,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,f,d)=>{this.notifyListeners(c,d)});return}const n=t.key;r?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(n);!r&&this.localCache[n]===c||this.notifyListeners(n,c)},o=this.storage.getItem(n);jB()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,c$):s()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},l$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}TA.type="LOCAL";const u$=TA;class OA extends AA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}OA.type="SESSION";const MA=OA;function d$(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}class pg{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const n=new pg(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const f=Array.from(c).map(async h=>h(r.origin,o)),d=await d$(f);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pg.receivers=[];function f2(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}class f${constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((f,d)=>{const h=f2("",20);s.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},n);c={messageChannel:s,onMessage(p){const x=p;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),f(x.data.response);break;default:clearTimeout(m),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:h,data:r},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function di(){return window}function h$(e){di().location.href=e}function PA(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function m$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function g$(){return navigator?.serviceWorker?.controller||null}function p$(){return PA()?self:null}const RA="firebaseLocalStorageDb",x$=1,pm="firebaseLocalStorage",IA="fbase_key";class mf{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function xg(e,t){return e.transaction([pm],t?"readwrite":"readonly").objectStore(pm)}function v$(){const e=indexedDB.deleteDatabase(RA);return new mf(e).toPromise()}function Rb(){const e=indexedDB.open(RA,x$);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(pm,{keyPath:IA})}catch(s){r(s)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(pm)?t(n):(n.close(),await v$(),t(await Rb()))})})}async function Tk(e,t,r){const n=xg(e,!0).put({[IA]:t,value:r});return new mf(n).toPromise()}async function y$(e,t){const r=xg(e,!1).get(t),n=await new mf(r).toPromise();return n===void 0?null:n.value}function Ok(e,t){const r=xg(e,!0).delete(t);return new mf(r).toPromise()}const b$=800,w$=3;class LA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rb(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>w$)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pg._getInstance(p$()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await m$(),!this.activeServiceWorker)return;this.sender=new f$(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||g$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Rb();return await Tk(t,gm,"1"),await Ok(t,gm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tk(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>y$(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ok(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const o=xg(s,!1).getAll();return new mf(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:s,value:o}of t)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),b$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LA.type="LOCAL";const j$=LA;new df(3e4,6e4);function DA(e,t){return t?Xi(t):(Je(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class h2 extends c2{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Pc(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Pc(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Pc(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function N$(e){return CA(e.auth,new h2(e),e.bypassAuthState)}function k$(e){const{auth:t,user:r}=e;return Je(r,t,"internal-error"),QB(r,new h2(e),e.bypassAuthState)}async function S$(e){const{auth:t,user:r}=e;return Je(r,t,"internal-error"),JB(r,new h2(e),e.bypassAuthState)}class BA{constructor(t,r,n,s,o=!1){this.auth=t,this.resolver=n,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:s,tenantId:o,error:c,type:f}=t;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return N$;case"linkViaPopup":case"linkViaRedirect":return S$;case"reauthViaPopup":case"reauthViaRedirect":return k$;default:sa(this.auth,"internal-error")}}resolve(t){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _$=new df(2e3,1e4);async function C$(e,t,r){if(bn(e.app))return Promise.reject(Pa(e,"operation-not-supported-in-this-environment"));const n=gs(e);rB(e,t,d2);const s=DA(n,r);return new Zo(n,"signInViaPopup",t,s).executeNotNull()}class Zo extends BA{constructor(t,r,n,s,o){super(t,r,s,o),this.provider=n,this.authWindow=null,this.pollId=null,Zo.currentPopupAction&&Zo.currentPopupAction.cancel(),Zo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Je(t,this.auth,"internal-error"),t}async onExecution(){is(this.filter.length===1,"Popup operations only handle one event");const t=f2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Pa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Pa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,_$.get())};t()}}Zo.currentPopupAction=null;const E$="pendingRedirect",J0=new Map;class A$ extends BA{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=J0.get(this.auth._key());if(!t){try{const n=await T$(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}J0.set(this.auth._key(),t)}return this.bypassAuthState||J0.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T$(e,t){const r=P$(t),n=M$(e);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function O$(e,t){J0.set(e._key(),t)}function M$(e){return Xi(e._redirectPersistence)}function P$(e){return X0(E$,e.config.apiKey,e.name)}async function R$(e,t,r=!1){if(bn(e.app))return Promise.reject(ts(e));const n=gs(e),s=DA(n,t),c=await new A$(n,s,r).execute();return c&&!r&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,t)),c}const I$=600*1e3;class L${constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!D$(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){if(t.error&&!$A(t)){const n=t.error.code?.split("auth/")[1]||"internal-error";r.onError(Pa(this.auth,n))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=I$&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mk(t))}saveEventToCache(t){this.cachedEventUids.add(Mk(t)),this.lastProcessedEventTime=Date.now()}}function Mk(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function $A({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function D$(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $A(e);default:return!1}}async function B$(e,t={}){return ms(e,"GET","/v1/projects",t)}const $$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,z$=/^https?/;async function U$(e){if(e.config.emulator)return;const{authorizedDomains:t}=await B$(e);for(const r of t)try{if(F$(r))return}catch{}sa(e,"unauthorized-domain")}function F$(e){const t=Mb(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const c=new URL(e);return c.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&c.hostname===n}if(!z$.test(r))return!1;if($$.test(e))return n===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}const H$=new df(3e4,6e4);function Pk(){const e=di().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function W$(e){return new Promise((t,r)=>{function n(){Pk(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Pk(),r(Pa(e,"network-request-failed"))},timeout:H$.get()})}if(di().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(di().gapi?.load)n();else{const s=OB("iframefcb");return di()[s]=()=>{gapi.load?n():r(Pa(e,"network-request-failed"))},jA(`${TB()}?onload=${s}`).catch(o=>r(o))}}).catch(t=>{throw Q0=null,t})}let Q0=null;function G$(e){return Q0=Q0||W$(e),Q0}const V$=new df(5e3,15e3),q$="__/auth/iframe",K$="emulator/auth/iframe",Y$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},X$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J$(e){const t=e.config;Je(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?s2(t,K$):`https://${e.config.authDomain}/${q$}`,n={apiKey:t.apiKey,appName:e.name,v:Cl},s=X$.get(e.config.apiHost);s&&(n.eid=s);const o=e._getFrameworks();return o.length&&(n.fw=o.join(",")),`${r}?${uf(n).slice(1)}`}async function Q$(e){const t=await G$(e),r=di().gapi;return Je(r,e,"internal-error"),t.open({where:document.body,url:J$(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Y$,dontclear:!0},n=>new Promise(async(s,o)=>{await n.restyle({setHideOnLeave:!1});const c=Pa(e,"network-request-failed"),f=di().setTimeout(()=>{o(c)},V$.get());function d(){di().clearTimeout(f),s(n)}n.ping(d).then(d,()=>{o(c)})}))}const Z$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ez=500,tz=600,rz="_blank",nz="http://localhost";class Rk{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function az(e,t,r,n=ez,s=tz){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let f="";const d={...Z$,width:n.toString(),height:s.toString(),top:o,left:c},h=cn().toLowerCase();r&&(f=gA(h)?rz:r),hA(h)&&(t=t||nz,d.scrollbars="yes");const m=Object.entries(d).reduce((x,[w,j])=>`${x}${w}=${j},`,"");if(wB(h)&&f!=="_self")return iz(t||"",f),new Rk(null);const p=window.open(t||"",f,m);Je(p,e,"popup-blocked");try{p.focus()}catch{}return new Rk(p)}function iz(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}const sz="__/auth/handler",oz="emulator/auth/handler",lz=encodeURIComponent("fac");async function Ik(e,t,r,n,s,o){Je(e.config.authDomain,e,"auth-domain-config-required"),Je(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:Cl,eventId:s};if(t instanceof d2){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",FD(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[m,p]of Object.entries({}))c[m]=p}if(t instanceof hf){const m=t.getScopes().filter(p=>p!=="");m.length>0&&(c.scopes=m.join(","))}e.tenantId&&(c.tid=e.tenantId);const f=c;for(const m of Object.keys(f))f[m]===void 0&&delete f[m];const d=await e._getAppCheckToken(),h=d?`#${lz}=${encodeURIComponent(d)}`:"";return`${cz(e)}?${uf(f).slice(1)}${h}`}function cz({config:e}){return e.emulator?s2(e,oz):`https://${e.authDomain}/${sz}`}const _v="webStorageSupport";class uz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MA,this._completeRedirectFn=R$,this._overrideRedirectResult=O$}async _openPopup(t,r,n,s){is(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Ik(t,r,n,Mb(),s);return az(t,o,f2())}async _openRedirect(t,r,n,s){await this._originValidation(t);const o=await Ik(t,r,n,Mb(),s);return h$(o),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:s,promise:o}=this.eventManagers[r];return s?Promise.resolve(s):(is(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await Q$(t),n=new L$(t);return r.register("authEvent",s=>(Je(s?.authEvent,t,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(_v,{type:_v},s=>{const o=s?.[0]?.[_v];o!==void 0&&r(!!o),sa(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=U$(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return bA()||mA()||l2()}}const dz=uz;var Lk="@firebase/auth",Dk="1.12.0";class fz{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hz(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mz(e){fl(new fo("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=n.options;Je(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:c,authDomain:f,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wA(e)},h=new CB(n,s,o,d);return DB(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),fl(new fo("auth-internal",t=>{const r=gs(t.getProvider("auth").getImmediate());return(n=>new fz(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ui(Lk,Dk,hz(e)),ui(Lk,Dk,"esm2020")}const gz=300,pz=Z6("authIdTokenMaxAge")||gz;let Bk=null;const xz=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>pz)return;const s=r?.token;Bk!==s&&(Bk=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function vz(e=n2()){const t=mg(e,"auth");if(t.isInitialized())return t.getImmediate();const r=LB(e,{popupRedirectResolver:dz,persistence:[j$,u$,MA]}),n=Z6("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const c=xz(o.toString());i$(r,c,()=>c(r.currentUser)),a$(r,f=>c(f))}}const s=X6("auth");return s&&BB(r,`http://${s}`),r}function yz(){return document.getElementsByTagName("head")?.[0]??document}EB({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=s=>{const o=Pa("internal-error");o.customData=s,r(o)},n.type="text/javascript",n.charset="UTF-8",yz().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mz("Browser");const zA="firebasestorage.googleapis.com",bz="storageBucket",wz=120*1e3,jz=600*1e3;class wi extends bi{constructor(t,r,n=0){super(Cv(t),`Firebase Storage: ${r} (${Cv(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Cv(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hi||(hi={}));function Cv(e){return"storage/"+e}function Nz(){const e="An unknown error occurred, please check the error payload for server response.";return new wi(hi.UNKNOWN,e)}function kz(){return new wi(hi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Sz(){return new wi(hi.CANCELED,"User canceled the upload/download.")}function _z(e){return new wi(hi.INVALID_URL,"Invalid URL '"+e+"'.")}function Cz(e){return new wi(hi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function $k(e){return new wi(hi.INVALID_ARGUMENT,e)}function UA(){return new wi(hi.APP_DELETED,"The Firebase app was deleted.")}function Ez(e){return new wi(hi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Oa{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=Oa.makeFromUrl(t,r)}catch{return new Oa(t,"")}if(n.path==="")return n;throw Cz(t)}static makeFromUrl(t,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function o(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+s+c,"i"),d={bucket:1,path:3};function h(z){z.path_=decodeURIComponent(z.path)}const m="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${m}/b/${s}/o${x}`,"i"),j={bucket:1,path:3},N=r===zA?"(?:storage.googleapis.com|storage.cloud.google.com)":r,S="([^?#]*)",C=new RegExp(`^https?://${N}/${s}/${S}`,"i"),E=[{regex:f,indices:d,postModify:o},{regex:w,indices:j,postModify:h},{regex:C,indices:{bucket:1,path:2},postModify:h}];for(let z=0;z<E.length;z++){const P=E[z],B=P.regex.exec(t);if(B){const T=B[P.indices.bucket];let R=B[P.indices.path];R||(R=""),n=new Oa(T,R),P.postModify(n);break}}if(n==null)throw _z(t);return n}}class Az{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function Tz(e,t,r){let n=1,s=null,o=null,c=!1,f=0;function d(){return f===2}let h=!1;function m(...S){h||(h=!0,t.apply(null,S))}function p(S){s=setTimeout(()=>{s=null,e(w,d())},S)}function x(){o&&clearTimeout(o)}function w(S,...C){if(h){x();return}if(S){x(),m.call(null,S,...C);return}if(d()||c){x(),m.call(null,S,...C);return}n<64&&(n*=2);let E;f===1?(f=2,E=0):E=(n+Math.random())*1e3,p(E)}let j=!1;function N(S){j||(j=!0,x(),!h&&(s!==null?(S||(f=2),clearTimeout(s),p(0)):S||(f=1)))}return p(0),o=setTimeout(()=>{c=!0,N(!0)},r),N}function Oz(e){e(!1)}function Mz(e){return e!==void 0}function zk(e,t,r,n){if(n<t)throw $k(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw $k(`Invalid value for '${e}'. Expected ${r} or less.`)}function Pz(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const s=t(n)+"="+t(e[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var xm;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(xm||(xm={}));function Rz(e,t){const r=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,o=t.indexOf(e)!==-1;return r||s||o}class Iz{constructor(t,r,n,s,o,c,f,d,h,m,p,x=!0,w=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=m,this.connectionFactory_=p,this.retry=x,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,N)=>{this.resolve_=j,this.reject_=N,this.start_()})}start_(){const t=(n,s)=>{if(s){n(!1,new g0(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=f=>{const d=f.loaded,h=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const f=o.getErrorCode()===xm.NO_ERROR,d=o.getStatus();if(!f||Rz(d,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===xm.ABORT;n(!1,new g0(!1,null,m));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new g0(h,o))})},r=(n,s)=>{const o=this.resolve_,c=this.reject_,f=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(f,f.getResponse());Mz(d)?o(d):o()}catch(d){c(d)}else if(f!==null){const d=Nz();d.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,d)):c(d)}else if(s.canceled){const d=this.appDelete_?UA():Sz();c(d)}else{const d=kz();c(d)}};this.canceled_?r(!1,new g0(!1,null,!0)):this.backoffId_=Tz(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Oz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class g0{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function Lz(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Dz(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Bz(e,t){t&&(e["X-Firebase-GMPID"]=t)}function $z(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function zz(e,t,r,n,s,o,c=!0,f=!1){const d=Pz(e.urlParams),h=e.url+d,m=Object.assign({},e.headers);return Bz(m,t),Lz(m,r),Dz(m,o),$z(m,n),new Iz(h,e.method,m,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,c,f)}function Uz(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Fz(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}class vm{constructor(t,r){this._service=t,r instanceof Oa?this._location=r:this._location=Oa.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new vm(t,r)}get root(){const t=new Oa(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fz(this._location.path)}get storage(){return this._service}get parent(){const t=Uz(this._location.path);if(t===null)return null;const r=new Oa(this._location.bucket,t);return new vm(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw Ez(t)}}function Uk(e,t){const r=t?.[bz];return r==null?null:Oa.makeFromBucketSpec(r,e)}function Hz(e,t,r,n={}){e.host=`${t}:${r}`;const s=Jc(t);s&&(Z1(`https://${e.host}/b`),e2("Storage",!0)),e._isUsingEmulator=!0,e._protocol=s?"https":"http";const{mockUserToken:o}=n;o&&(e._overrideAuthToken=typeof o=="string"?o:eA(o,e.app.options.projectId))}class Wz{constructor(t,r,n,s,o,c=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=zA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wz,this._maxUploadRetryTime=jz,this._requests=new Set,s!=null?this._bucket=Oa.makeFromBucketSpec(s,this._host):this._bucket=Uk(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Oa.makeFromBucketSpec(this._url,t):this._bucket=Uk(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){zk("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){zk("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new vm(this,t)}_makeRequest(t,r,n,s,o=!0){if(this._deleted)return new Az(UA());{const c=zz(t,this._appId,n,s,r,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(t,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,s).getPromise()}}const Fk="@firebase/storage",Hk="0.14.0";const FA="storage";function Gz(e=n2(),t){e=Da(e);const n=mg(e,FA).getImmediate({identifier:t}),s=J6("storage");return s&&Vz(n,...s),n}function Vz(e,t,r,n={}){Hz(e,t,r,n)}function qz(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Wz(r,n,s,t,Cl)}function Kz(){fl(new fo(FA,qz,"PUBLIC").setMultipleInstances(!0)),ui(Fk,Hk,""),ui(Fk,Hk,"esm2020")}Kz();var Yz="firebase",Xz="12.7.0";ui(Yz,Xz,"app");var Wk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var m2;(function(){var e;function t(T,R){function $(){}$.prototype=R.prototype,T.F=R.prototype,T.prototype=new $,T.prototype.constructor=T,T.D=function(I,O,U){for(var D=Array(arguments.length-2),q=2;q<arguments.length;q++)D[q-2]=arguments[q];return R.prototype[O].apply(I,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,R,$){$||($=0);const I=Array(16);if(typeof R=="string")for(var O=0;O<16;++O)I[O]=R.charCodeAt($++)|R.charCodeAt($++)<<8|R.charCodeAt($++)<<16|R.charCodeAt($++)<<24;else for(O=0;O<16;++O)I[O]=R[$++]|R[$++]<<8|R[$++]<<16|R[$++]<<24;R=T.g[0],$=T.g[1],O=T.g[2];let U=T.g[3],D;D=R+(U^$&(O^U))+I[0]+3614090360&4294967295,R=$+(D<<7&4294967295|D>>>25),D=U+(O^R&($^O))+I[1]+3905402710&4294967295,U=R+(D<<12&4294967295|D>>>20),D=O+($^U&(R^$))+I[2]+606105819&4294967295,O=U+(D<<17&4294967295|D>>>15),D=$+(R^O&(U^R))+I[3]+3250441966&4294967295,$=O+(D<<22&4294967295|D>>>10),D=R+(U^$&(O^U))+I[4]+4118548399&4294967295,R=$+(D<<7&4294967295|D>>>25),D=U+(O^R&($^O))+I[5]+1200080426&4294967295,U=R+(D<<12&4294967295|D>>>20),D=O+($^U&(R^$))+I[6]+2821735955&4294967295,O=U+(D<<17&4294967295|D>>>15),D=$+(R^O&(U^R))+I[7]+4249261313&4294967295,$=O+(D<<22&4294967295|D>>>10),D=R+(U^$&(O^U))+I[8]+1770035416&4294967295,R=$+(D<<7&4294967295|D>>>25),D=U+(O^R&($^O))+I[9]+2336552879&4294967295,U=R+(D<<12&4294967295|D>>>20),D=O+($^U&(R^$))+I[10]+4294925233&4294967295,O=U+(D<<17&4294967295|D>>>15),D=$+(R^O&(U^R))+I[11]+2304563134&4294967295,$=O+(D<<22&4294967295|D>>>10),D=R+(U^$&(O^U))+I[12]+1804603682&4294967295,R=$+(D<<7&4294967295|D>>>25),D=U+(O^R&($^O))+I[13]+4254626195&4294967295,U=R+(D<<12&4294967295|D>>>20),D=O+($^U&(R^$))+I[14]+2792965006&4294967295,O=U+(D<<17&4294967295|D>>>15),D=$+(R^O&(U^R))+I[15]+1236535329&4294967295,$=O+(D<<22&4294967295|D>>>10),D=R+(O^U&($^O))+I[1]+4129170786&4294967295,R=$+(D<<5&4294967295|D>>>27),D=U+($^O&(R^$))+I[6]+3225465664&4294967295,U=R+(D<<9&4294967295|D>>>23),D=O+(R^$&(U^R))+I[11]+643717713&4294967295,O=U+(D<<14&4294967295|D>>>18),D=$+(U^R&(O^U))+I[0]+3921069994&4294967295,$=O+(D<<20&4294967295|D>>>12),D=R+(O^U&($^O))+I[5]+3593408605&4294967295,R=$+(D<<5&4294967295|D>>>27),D=U+($^O&(R^$))+I[10]+38016083&4294967295,U=R+(D<<9&4294967295|D>>>23),D=O+(R^$&(U^R))+I[15]+3634488961&4294967295,O=U+(D<<14&4294967295|D>>>18),D=$+(U^R&(O^U))+I[4]+3889429448&4294967295,$=O+(D<<20&4294967295|D>>>12),D=R+(O^U&($^O))+I[9]+568446438&4294967295,R=$+(D<<5&4294967295|D>>>27),D=U+($^O&(R^$))+I[14]+3275163606&4294967295,U=R+(D<<9&4294967295|D>>>23),D=O+(R^$&(U^R))+I[3]+4107603335&4294967295,O=U+(D<<14&4294967295|D>>>18),D=$+(U^R&(O^U))+I[8]+1163531501&4294967295,$=O+(D<<20&4294967295|D>>>12),D=R+(O^U&($^O))+I[13]+2850285829&4294967295,R=$+(D<<5&4294967295|D>>>27),D=U+($^O&(R^$))+I[2]+4243563512&4294967295,U=R+(D<<9&4294967295|D>>>23),D=O+(R^$&(U^R))+I[7]+1735328473&4294967295,O=U+(D<<14&4294967295|D>>>18),D=$+(U^R&(O^U))+I[12]+2368359562&4294967295,$=O+(D<<20&4294967295|D>>>12),D=R+($^O^U)+I[5]+4294588738&4294967295,R=$+(D<<4&4294967295|D>>>28),D=U+(R^$^O)+I[8]+2272392833&4294967295,U=R+(D<<11&4294967295|D>>>21),D=O+(U^R^$)+I[11]+1839030562&4294967295,O=U+(D<<16&4294967295|D>>>16),D=$+(O^U^R)+I[14]+4259657740&4294967295,$=O+(D<<23&4294967295|D>>>9),D=R+($^O^U)+I[1]+2763975236&4294967295,R=$+(D<<4&4294967295|D>>>28),D=U+(R^$^O)+I[4]+1272893353&4294967295,U=R+(D<<11&4294967295|D>>>21),D=O+(U^R^$)+I[7]+4139469664&4294967295,O=U+(D<<16&4294967295|D>>>16),D=$+(O^U^R)+I[10]+3200236656&4294967295,$=O+(D<<23&4294967295|D>>>9),D=R+($^O^U)+I[13]+681279174&4294967295,R=$+(D<<4&4294967295|D>>>28),D=U+(R^$^O)+I[0]+3936430074&4294967295,U=R+(D<<11&4294967295|D>>>21),D=O+(U^R^$)+I[3]+3572445317&4294967295,O=U+(D<<16&4294967295|D>>>16),D=$+(O^U^R)+I[6]+76029189&4294967295,$=O+(D<<23&4294967295|D>>>9),D=R+($^O^U)+I[9]+3654602809&4294967295,R=$+(D<<4&4294967295|D>>>28),D=U+(R^$^O)+I[12]+3873151461&4294967295,U=R+(D<<11&4294967295|D>>>21),D=O+(U^R^$)+I[15]+530742520&4294967295,O=U+(D<<16&4294967295|D>>>16),D=$+(O^U^R)+I[2]+3299628645&4294967295,$=O+(D<<23&4294967295|D>>>9),D=R+(O^($|~U))+I[0]+4096336452&4294967295,R=$+(D<<6&4294967295|D>>>26),D=U+($^(R|~O))+I[7]+1126891415&4294967295,U=R+(D<<10&4294967295|D>>>22),D=O+(R^(U|~$))+I[14]+2878612391&4294967295,O=U+(D<<15&4294967295|D>>>17),D=$+(U^(O|~R))+I[5]+4237533241&4294967295,$=O+(D<<21&4294967295|D>>>11),D=R+(O^($|~U))+I[12]+1700485571&4294967295,R=$+(D<<6&4294967295|D>>>26),D=U+($^(R|~O))+I[3]+2399980690&4294967295,U=R+(D<<10&4294967295|D>>>22),D=O+(R^(U|~$))+I[10]+4293915773&4294967295,O=U+(D<<15&4294967295|D>>>17),D=$+(U^(O|~R))+I[1]+2240044497&4294967295,$=O+(D<<21&4294967295|D>>>11),D=R+(O^($|~U))+I[8]+1873313359&4294967295,R=$+(D<<6&4294967295|D>>>26),D=U+($^(R|~O))+I[15]+4264355552&4294967295,U=R+(D<<10&4294967295|D>>>22),D=O+(R^(U|~$))+I[6]+2734768916&4294967295,O=U+(D<<15&4294967295|D>>>17),D=$+(U^(O|~R))+I[13]+1309151649&4294967295,$=O+(D<<21&4294967295|D>>>11),D=R+(O^($|~U))+I[4]+4149444226&4294967295,R=$+(D<<6&4294967295|D>>>26),D=U+($^(R|~O))+I[11]+3174756917&4294967295,U=R+(D<<10&4294967295|D>>>22),D=O+(R^(U|~$))+I[2]+718787259&4294967295,O=U+(D<<15&4294967295|D>>>17),D=$+(U^(O|~R))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+R&4294967295,T.g[1]=T.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+O&4294967295,T.g[3]=T.g[3]+U&4294967295}n.prototype.v=function(T,R){R===void 0&&(R=T.length);const $=R-this.blockSize,I=this.C;let O=this.h,U=0;for(;U<R;){if(O==0)for(;U<=$;)s(this,T,U),U+=this.blockSize;if(typeof T=="string"){for(;U<R;)if(I[O++]=T.charCodeAt(U++),O==this.blockSize){s(this,I),O=0;break}}else for(;U<R;)if(I[O++]=T[U++],O==this.blockSize){s(this,I),O=0;break}}this.h=O,this.o+=R},n.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var R=1;R<T.length-8;++R)T[R]=0;R=this.o*8;for(var $=T.length-8;$<T.length;++$)T[$]=R&255,R/=256;for(this.v(T),T=Array(16),R=0,$=0;$<4;++$)for(let I=0;I<32;I+=8)T[R++]=this.g[$]>>>I&255;return T};function o(T,R){var $=f;return Object.prototype.hasOwnProperty.call($,T)?$[T]:$[T]=R(T)}function c(T,R){this.h=R;const $=[];let I=!0;for(let O=T.length-1;O>=0;O--){const U=T[O]|0;I&&U==R||($[O]=U,I=!1)}this.g=$}var f={};function d(T){return-128<=T&&T<128?o(T,function(R){return new c([R|0],R<0?-1:0)}):new c([T|0],T<0?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return S(h(-T));const R=[];let $=1;for(let I=0;T>=$;I++)R[I]=T/$|0,$*=4294967296;return new c(R,0)}function m(T,R){if(T.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(T.charAt(0)=="-")return S(m(T.substring(1),R));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const $=h(Math.pow(R,8));let I=p;for(let U=0;U<T.length;U+=8){var O=Math.min(8,T.length-U);const D=parseInt(T.substring(U,U+O),R);O<8?(O=h(Math.pow(R,O)),I=I.j(O).add(h(D))):(I=I.j($),I=I.add(h(D)))}return I}var p=d(0),x=d(1),w=d(16777216);e=c.prototype,e.m=function(){if(N(this))return-S(this).m();let T=0,R=1;for(let $=0;$<this.g.length;$++){const I=this.i($);T+=(I>=0?I:4294967296+I)*R,R*=4294967296}return T},e.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(j(this))return"0";if(N(this))return"-"+S(this).toString(T);const R=h(Math.pow(T,6));var $=this;let I="";for(;;){const O=z($,R).g;$=C($,O.j(R));let U=(($.g.length>0?$.g[0]:$.h)>>>0).toString(T);if($=O,j($))return U+I;for(;U.length<6;)U="0"+U;I=U+I}},e.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function j(T){if(T.h!=0)return!1;for(let R=0;R<T.g.length;R++)if(T.g[R]!=0)return!1;return!0}function N(T){return T.h==-1}e.l=function(T){return T=C(this,T),N(T)?-1:j(T)?0:1};function S(T){const R=T.g.length,$=[];for(let I=0;I<R;I++)$[I]=~T.g[I];return new c($,~T.h).add(x)}e.abs=function(){return N(this)?S(this):this},e.add=function(T){const R=Math.max(this.g.length,T.g.length),$=[];let I=0;for(let O=0;O<=R;O++){let U=I+(this.i(O)&65535)+(T.i(O)&65535),D=(U>>>16)+(this.i(O)>>>16)+(T.i(O)>>>16);I=D>>>16,U&=65535,D&=65535,$[O]=D<<16|U}return new c($,$[$.length-1]&-2147483648?-1:0)};function C(T,R){return T.add(S(R))}e.j=function(T){if(j(this)||j(T))return p;if(N(this))return N(T)?S(this).j(S(T)):S(S(this).j(T));if(N(T))return S(this.j(S(T)));if(this.l(w)<0&&T.l(w)<0)return h(this.m()*T.m());const R=this.g.length+T.g.length,$=[];for(var I=0;I<2*R;I++)$[I]=0;for(I=0;I<this.g.length;I++)for(let O=0;O<T.g.length;O++){const U=this.i(I)>>>16,D=this.i(I)&65535,q=T.i(O)>>>16,Z=T.i(O)&65535;$[2*I+2*O]+=D*Z,A($,2*I+2*O),$[2*I+2*O+1]+=U*Z,A($,2*I+2*O+1),$[2*I+2*O+1]+=D*q,A($,2*I+2*O+1),$[2*I+2*O+2]+=U*q,A($,2*I+2*O+2)}for(T=0;T<R;T++)$[T]=$[2*T+1]<<16|$[2*T];for(T=R;T<2*R;T++)$[T]=0;return new c($,0)};function A(T,R){for(;(T[R]&65535)!=T[R];)T[R+1]+=T[R]>>>16,T[R]&=65535,R++}function E(T,R){this.g=T,this.h=R}function z(T,R){if(j(R))throw Error("division by zero");if(j(T))return new E(p,p);if(N(T))return R=z(S(T),R),new E(S(R.g),S(R.h));if(N(R))return R=z(T,S(R)),new E(S(R.g),R.h);if(T.g.length>30){if(N(T)||N(R))throw Error("slowDivide_ only works with positive integers.");for(var $=x,I=R;I.l(T)<=0;)$=P($),I=P(I);var O=B($,1),U=B(I,1);for(I=B(I,2),$=B($,2);!j(I);){var D=U.add(I);D.l(T)<=0&&(O=O.add($),U=D),I=B(I,1),$=B($,1)}return R=C(T,O.j(R)),new E(O,R)}for(O=p;T.l(R)>=0;){for($=Math.max(1,Math.floor(T.m()/R.m())),I=Math.ceil(Math.log($)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),U=h($),D=U.j(R);N(D)||D.l(T)>0;)$-=I,U=h($),D=U.j(R);j(U)&&(U=x),O=O.add(U),T=C(T,D)}return new E(O,T)}e.B=function(T){return z(this,T).h},e.and=function(T){const R=Math.max(this.g.length,T.g.length),$=[];for(let I=0;I<R;I++)$[I]=this.i(I)&T.i(I);return new c($,this.h&T.h)},e.or=function(T){const R=Math.max(this.g.length,T.g.length),$=[];for(let I=0;I<R;I++)$[I]=this.i(I)|T.i(I);return new c($,this.h|T.h)},e.xor=function(T){const R=Math.max(this.g.length,T.g.length),$=[];for(let I=0;I<R;I++)$[I]=this.i(I)^T.i(I);return new c($,this.h^T.h)};function P(T){const R=T.g.length+1,$=[];for(let I=0;I<R;I++)$[I]=T.i(I)<<1|T.i(I-1)>>>31;return new c($,T.h)}function B(T,R){const $=R>>5;R%=32;const I=T.g.length-$,O=[];for(let U=0;U<I;U++)O[U]=R>0?T.i(U+$)>>>R|T.i(U+$+1)<<32-R:T.i(U+$);return new c(O,T.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=m,m2=c}).apply(typeof Wk<"u"?Wk:typeof self<"u"?self:typeof window<"u"?window:{});var p0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var e,t=Object.defineProperty;function r(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof p0=="object"&&p0];for(var _=0;_<v.length;++_){var L=v[_];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var n=r(this);function s(v,_){if(_)e:{var L=n;v=v.split(".");for(var W=0;W<v.length-1;W++){var ie=v[W];if(!(ie in L))break e;L=L[ie]}v=v[v.length-1],W=L[v],_=_(W),_!=W&&_!=null&&t(L,v,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(v){return v||function(_){var L=[],W;for(W in _)Object.prototype.hasOwnProperty.call(_,W)&&L.push([W,_[W]]);return L}});var o=o||{},c=this||self;function f(v){var _=typeof v;return _=="object"&&v!=null||_=="function"}function d(v,_,L){return v.call.apply(v.bind,arguments)}function h(v,_,L){return h=d,h.apply(null,arguments)}function m(v,_){var L=Array.prototype.slice.call(arguments,1);return function(){var W=L.slice();return W.push.apply(W,arguments),v.apply(this,W)}}function p(v,_){function L(){}L.prototype=_.prototype,v.Z=_.prototype,v.prototype=new L,v.prototype.constructor=v,v.Ob=function(W,ie,me){for(var Ee=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)Ee[Ze-2]=arguments[Ze];return _.prototype[ie].apply(W,Ee)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function w(v){const _=v.length;if(_>0){const L=Array(_);for(let W=0;W<_;W++)L[W]=v[W];return L}return[]}function j(v,_){for(let W=1;W<arguments.length;W++){const ie=arguments[W];var L=typeof ie;if(L=L!="object"?L:ie?Array.isArray(ie)?"array":L:"null",L=="array"||L=="object"&&typeof ie.length=="number"){L=v.length||0;const me=ie.length||0;v.length=L+me;for(let Ee=0;Ee<me;Ee++)v[L+Ee]=ie[Ee]}else v.push(ie)}}class N{constructor(_,L){this.i=_,this.j=L,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function S(v){c.setTimeout(()=>{throw v},0)}function C(){var v=T;let _=null;return v.g&&(_=v.g,v.g=v.g.next,v.g||(v.h=null),_.next=null),_}class A{constructor(){this.h=this.g=null}add(_,L){const W=E.get();W.set(_,L),this.h?this.h.next=W:this.g=W,this.h=W}}var E=new N(()=>new z,v=>v.reset());class z{constructor(){this.next=this.g=this.h=null}set(_,L){this.h=_,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let P,B=!1,T=new A,R=()=>{const v=Promise.resolve(void 0);P=()=>{v.then($)}};function $(){for(var v;v=C();){try{v.h.call(v.g)}catch(L){S(L)}var _=E;_.j(v),_.h<100&&(_.h++,v.next=_.g,_.g=v)}B=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(v,_){this.type=v,this.g=this.target=_,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,_=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const L=()=>{};c.addEventListener("test",L,_),c.removeEventListener("test",L,_)}catch{}return v})();function D(v){return/^[\s\xa0]*$/.test(v)}function q(v,_){O.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,_)}p(q,O),q.prototype.init=function(v,_){const L=this.type=v.type,W=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=_,_=v.relatedTarget,_||(L=="mouseover"?_=v.fromElement:L=="mouseout"&&(_=v.toElement)),this.relatedTarget=_,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),V=0;function X(v,_,L,W,ie){this.listener=v,this.proxy=null,this.src=_,this.type=L,this.capture=!!W,this.ha=ie,this.key=++V,this.da=this.fa=!1}function re(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function fe(v,_,L){for(const W in v)_.call(L,v[W],W,v)}function Y(v,_){for(const L in v)_.call(void 0,v[L],L,v)}function H(v){const _={};for(const L in v)_[L]=v[L];return _}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(v,_){let L,W;for(let ie=1;ie<arguments.length;ie++){W=arguments[ie];for(L in W)v[L]=W[L];for(let me=0;me<G.length;me++)L=G[me],Object.prototype.hasOwnProperty.call(W,L)&&(v[L]=W[L])}}function Q(v){this.src=v,this.g={},this.h=0}Q.prototype.add=function(v,_,L,W,ie){const me=v.toString();v=this.g[me],v||(v=this.g[me]=[],this.h++);const Ee=_e(v,_,W,ie);return Ee>-1?(_=v[Ee],L||(_.fa=!1)):(_=new X(_,this.src,me,!!W,ie),_.fa=L,v.push(_)),_};function ae(v,_){const L=_.type;if(L in v.g){var W=v.g[L],ie=Array.prototype.indexOf.call(W,_,void 0),me;(me=ie>=0)&&Array.prototype.splice.call(W,ie,1),me&&(re(_),v.g[L].length==0&&(delete v.g[L],v.h--))}}function _e(v,_,L,W){for(let ie=0;ie<v.length;++ie){const me=v[ie];if(!me.da&&me.listener==_&&me.capture==!!L&&me.ha==W)return ie}return-1}var be="closure_lm_"+(Math.random()*1e6|0),Pe={};function se(v,_,L,W,ie){if(Array.isArray(_)){for(let me=0;me<_.length;me++)se(v,_[me],L,W,ie);return null}return L=$e(L),v&&v[Z]?v.J(_,L,f(W)?!!W.capture:!1,ie):Ae(v,_,L,!1,W,ie)}function Ae(v,_,L,W,ie,me){if(!_)throw Error("Invalid event type");const Ee=f(ie)?!!ie.capture:!!ie;let Ze=Oe(v);if(Ze||(v[be]=Ze=new Q(v)),L=Ze.add(_,L,W,Ee,me),L.proxy)return L;if(W=Ce(),L.proxy=W,W.src=v,W.listener=L,v.addEventListener)U||(ie=Ee),ie===void 0&&(ie=!1),v.addEventListener(_.toString(),W,ie);else if(v.attachEvent)v.attachEvent(je(_.toString()),W);else if(v.addListener&&v.removeListener)v.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return L}function Ce(){function v(L){return _.call(v.src,v.listener,L)}const _=ke;return v}function xe(v,_,L,W,ie){if(Array.isArray(_))for(var me=0;me<_.length;me++)xe(v,_[me],L,W,ie);else W=f(W)?!!W.capture:!!W,L=$e(L),v&&v[Z]?(v=v.i,me=String(_).toString(),me in v.g&&(_=v.g[me],L=_e(_,L,W,ie),L>-1&&(re(_[L]),Array.prototype.splice.call(_,L,1),_.length==0&&(delete v.g[me],v.h--)))):v&&(v=Oe(v))&&(_=v.g[_.toString()],v=-1,_&&(v=_e(_,L,W,ie)),(L=v>-1?_[v]:null)&&We(L))}function We(v){if(typeof v!="number"&&v&&!v.da){var _=v.src;if(_&&_[Z])ae(_.i,v);else{var L=v.type,W=v.proxy;_.removeEventListener?_.removeEventListener(L,W,v.capture):_.detachEvent?_.detachEvent(je(L),W):_.addListener&&_.removeListener&&_.removeListener(W),(L=Oe(_))?(ae(L,v),L.h==0&&(L.src=null,_[be]=null)):re(v)}}}function je(v){return v in Pe?Pe[v]:Pe[v]="on"+v}function ke(v,_){if(v.da)v=!0;else{_=new q(_,this);const L=v.listener,W=v.ha||v.src;v.fa&&We(v),v=L.call(W,_)}return v}function Oe(v){return v=v[be],v instanceof Q?v:null}var Me="__closure_events_fn_"+(Math.random()*1e9>>>0);function $e(v){return typeof v=="function"?v:(v[Me]||(v[Me]=function(_){return v.handleEvent(_)}),v[Me])}function ze(){I.call(this),this.i=new Q(this),this.M=this,this.G=null}p(ze,I),ze.prototype[Z]=!0,ze.prototype.removeEventListener=function(v,_,L,W){xe(this,v,_,L,W)};function Be(v,_){var L,W=v.G;if(W)for(L=[];W;W=W.G)L.push(W);if(v=v.M,W=_.type||_,typeof _=="string")_=new O(_,v);else if(_ instanceof O)_.target=_.target||v;else{var ie=_;_=new O(W,v),ee(_,ie)}ie=!0;let me,Ee;if(L)for(Ee=L.length-1;Ee>=0;Ee--)me=_.g=L[Ee],ie=qt(me,W,!0,_)&&ie;if(me=_.g=v,ie=qt(me,W,!0,_)&&ie,ie=qt(me,W,!1,_)&&ie,L)for(Ee=0;Ee<L.length;Ee++)me=_.g=L[Ee],ie=qt(me,W,!1,_)&&ie}ze.prototype.N=function(){if(ze.Z.N.call(this),this.i){var v=this.i;for(const _ in v.g){const L=v.g[_];for(let W=0;W<L.length;W++)re(L[W]);delete v.g[_],v.h--}}this.G=null},ze.prototype.J=function(v,_,L,W){return this.i.add(String(v),_,!1,L,W)},ze.prototype.K=function(v,_,L,W){return this.i.add(String(v),_,!0,L,W)};function qt(v,_,L,W){if(_=v.i.g[String(_)],!_)return!0;_=_.concat();let ie=!0;for(let me=0;me<_.length;++me){const Ee=_[me];if(Ee&&!Ee.da&&Ee.capture==L){const Ze=Ee.listener,ir=Ee.ha||Ee.src;Ee.fa&&ae(v.i,Ee),ie=Ze.call(ir,W)!==!1&&ie}}return ie&&!W.defaultPrevented}function wr(v,_){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=h(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(v,_||0)}function rt(v){v.g=wr(()=>{v.g=null,v.i&&(v.i=!1,rt(v))},v.l);const _=v.h;v.h=null,v.m.apply(null,_)}class lt extends I{constructor(_,L){super(),this.m=_,this.l=L,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:rt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ot(v){I.call(this),this.h=v,this.g={}}p(Ot,I);var ne=[];function Le(v){fe(v.g,function(_,L){this.g.hasOwnProperty(L)&&We(_)},v),v.g={}}Ot.prototype.N=function(){Ot.Z.N.call(this),Le(this)},Ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ke=c.JSON.stringify,Lt=c.JSON.parse,pe=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Re(){}function Xe(){}var he={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ce(){O.call(this,"d")}p(ce,O);function ve(){O.call(this,"c")}p(ve,O);var Se={},qe=null;function ar(){return qe=qe||new ze}Se.Ia="serverreachability";function Ni(v){O.call(this,Se.Ia,v)}p(Ni,O);function Hn(v){const _=ar();Be(_,new Ni(_))}Se.STAT_EVENT="statevent";function wo(v,_){O.call(this,Se.STAT_EVENT,v),this.stat=_}p(wo,O);function cr(v){const _=ar();Be(_,new wo(_,v))}Se.Ja="timingevent";function $a(v,_){O.call(this,Se.Ja,v),this.size=_}p($a,O);function za(v,_){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},_)}function ha(){this.g=!0}ha.prototype.ua=function(){this.g=!1};function gp(v,_,L,W,ie,me){v.info(function(){if(v.g)if(me){var Ee="",Ze=me.split("&");for(let wt=0;wt<Ze.length;wt++){var ir=Ze[wt].split("=");if(ir.length>1){const Jt=ir[0];ir=ir[1];const Xr=Jt.split("_");Ee=Xr.length>=2&&Xr[1]=="type"?Ee+(Jt+"="+ir+"&"):Ee+(Jt+"=redacted&")}}}else Ee=null;else Ee=me;return"XMLHTTP REQ ("+W+") [attempt "+ie+"]: "+_+`
`+L+`
`+Ee})}function Hf(v,_,L,W,ie,me,Ee){v.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ie+"]: "+_+`
`+L+`
`+me+" "+Ee})}function Ua(v,_,L,W){v.info(function(){return"XMLHTTP TEXT ("+_+"): "+pp(v,L)+(W?" "+W:"")})}function jo(v,_){v.info(function(){return"TIMEOUT: "+_})}ha.prototype.info=function(){};function pp(v,_){if(!v.g)return _;if(!_)return null;try{const me=JSON.parse(_);if(me){for(v=0;v<me.length;v++)if(Array.isArray(me[v])){var L=me[v];if(!(L.length<2)){var W=L[1];if(Array.isArray(W)&&!(W.length<1)){var ie=W[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(let Ee=1;Ee<W.length;Ee++)W[Ee]=""}}}}return Ke(me)}catch{return _}}var Pl={NO_ERROR:0,TIMEOUT:8},Wf={},cu;function No(){}p(No,Re),No.prototype.g=function(){return new XMLHttpRequest},cu=new No;function ki(v){return encodeURIComponent(String(v))}function Gf(v){var _=1;v=v.split(":");const L=[];for(;_>0&&v.length;)L.push(v.shift()),_--;return v.length&&L.push(v.join(":")),L}function ma(v,_,L,W){this.j=v,this.i=_,this.l=L,this.S=W||1,this.V=new Ot(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ga}function ga(){this.i=null,this.g="",this.h=!1}var ur={},Ar={};function Fa(v,_,L){v.M=1,v.A=ko(fr(_)),v.u=L,v.R=!0,Rl(v,null)}function Rl(v,_){v.F=Date.now(),Ha(v),v.B=fr(v.A);var L=v.B,W=v.S;Array.isArray(W)||(W=[String(W)]),Bl(L.i,"t",W),v.C=0,L=v.j.L,v.h=new ga,v.g=sh(v.j,L?_:null,!v.u),v.P>0&&(v.O=new lt(h(v.Y,v,v.g),v.P)),_=v.V,L=v.g,W=v.ba;var ie="readystatechange";Array.isArray(ie)||(ie&&(ne[0]=ie.toString()),ie=ne);for(let me=0;me<ie.length;me++){const Ee=se(L,ie[me],W||_.handleEvent,!1,_.h||_);if(!Ee)break;_.g[Ee.key]=Ee}_=v.J?H(v.J):{},v.u?(v.v||(v.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,_)):(v.v="GET",v.g.ea(v.B,v.v,null,_)),Hn(),gp(v.i,v.v,v.B,v.l,v.S,v.u)}ma.prototype.ba=function(v){v=v.target;const _=this.O;_&&va(v)==3?_.j():this.Y(v)},ma.prototype.Y=function(v){try{if(v==this.g)e:{const Ze=va(this.g),ir=this.g.ya(),wt=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||Dr(this.g)))){this.K||Ze!=4||ir==7||(ir==8||wt<=0?Hn(3):Hn(2)),Wa(this);var _=this.g.ca();this.X=_;var L=xp(this);if(this.o=_==200,Hf(this.i,this.v,this.B,this.l,this.S,Ze,_),this.o){if(this.U&&!this.L){t:{if(this.g){var W,ie=this.g;if((W=ie.g?ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(W)){var me=W;break t}}me=null}if(v=me)Ua(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ga(this,v);else{this.o=!1,this.m=3,cr(12),Sn(this),Wn(this);break e}}if(this.R){v=!0;let Jt;for(;!this.K&&this.C<L.length;)if(Jt=qf(this,L),Jt==Ar){Ze==4&&(this.m=4,cr(14),v=!1),Ua(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==ur){this.m=4,cr(15),Ua(this.i,this.l,L,"[Invalid Chunk]"),v=!1;break}else Ua(this.i,this.l,Jt,null),Ga(this,Jt);if(Vf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||L.length!=0||this.h.h||(this.m=1,cr(16),v=!1),this.o=this.o&&v,!v)Ua(this.i,this.l,L,"[Invalid Chunked Response]"),Sn(this),Wn(this);else if(L.length>0&&!this.W){this.W=!0;var Ee=this.j;Ee.g==this&&Ee.aa&&!Ee.P&&(Ee.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),ku(Ee),Ee.P=!0,cr(11))}}else Ua(this.i,this.l,L,null),Ga(this,L);Ze==4&&Sn(this),this.o&&!this.K&&(Ze==4?rh(this.j,this):(this.o=!1,Ha(this)))}else _i(this.g),_==400&&L.indexOf("Unknown SID")>0?(this.m=3,cr(12)):(this.m=0,cr(13)),Sn(this),Wn(this)}}}catch{}};function xp(v){if(!Vf(v))return v.g.la();const _=Dr(v.g);if(_==="")return"";let L="";const W=_.length,ie=va(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return Sn(v),Wn(v),"";v.h.i=new c.TextDecoder}for(let me=0;me<W;me++)v.h.h=!0,L+=v.h.i.decode(_[me],{stream:!(ie&&me==W-1)});return _.length=0,v.h.g+=L,v.C=0,v.h.g}function Vf(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function qf(v,_){var L=v.C,W=_.indexOf(`
`,L);return W==-1?Ar:(L=Number(_.substring(L,W)),isNaN(L)?ur:(W+=1,W+L>_.length?Ar:(_=_.slice(W,W+L),v.C=W+L,_)))}ma.prototype.cancel=function(){this.K=!0,Sn(this)};function Ha(v){v.T=Date.now()+v.H,Il(v,v.H)}function Il(v,_){if(v.D!=null)throw Error("WatchDog timer not null");v.D=za(h(v.aa,v),_)}function Wa(v){v.D&&(c.clearTimeout(v.D),v.D=null)}ma.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(jo(this.i,this.B),this.M!=2&&(Hn(),cr(17)),Sn(this),this.m=2,Wn(this)):Il(this,this.T-v)};function Wn(v){v.j.I==0||v.K||rh(v.j,v)}function Sn(v){Wa(v);var _=v.O;_&&typeof _.dispose=="function"&&_.dispose(),v.O=null,Le(v.V),v.g&&(_=v.g,v.g=null,_.abort(),_.dispose())}function Ga(v,_){try{var L=v.j;if(L.I!=0&&(L.g==v||qa(L.h,v))){if(!v.L&&qa(L.h,v)&&L.I==3){try{var W=L.Ba.g.parse(_)}catch{W=null}if(Array.isArray(W)&&W.length==3){var ie=W;if(ie[0]==0){e:if(!L.v){if(L.g)if(L.g.F+3e3<v.F)Hl(L),Ts(L);else break e;Oo(L),cr(18)}}else L.xa=ie[1],0<L.xa-L.K&&ie[2]<37500&&L.F&&L.A==0&&!L.C&&(L.C=za(h(L.Va,L),6e3));Va(L.h)<=1&&L.ta&&(L.ta=void 0)}else Za(L,11)}else if((v.L||L.g==v)&&Hl(L),!D(_))for(ie=L.Ba.g.parse(_),_=0;_<ie.length;_++){let wt=ie[_];const Jt=wt[0];if(!(Jt<=L.K))if(L.K=Jt,wt=wt[1],L.I==2)if(wt[0]=="c"){L.M=wt[1],L.ba=wt[2];const Xr=wt[3];Xr!=null&&(L.ka=Xr,L.j.info("VER="+L.ka));const Ci=wt[4];Ci!=null&&(L.za=Ci,L.j.info("SVER="+L.za));const ya=wt[5];ya!=null&&typeof ya=="number"&&ya>0&&(W=1.5*ya,L.O=W,L.j.info("backChannelRequestTimeoutMs_="+W)),W=L;const ba=v.g;if(ba){const Mo=ba.g?ba.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mo){var me=W.h;me.g||Mo.indexOf("spdy")==-1&&Mo.indexOf("quic")==-1&&Mo.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(fu(me,me.h),me.h=null))}if(W.G){const Wl=ba.g?ba.g.getResponseHeader("X-HTTP-Session-Id"):null;Wl&&(W.wa=Wl,bt(W.J,W.G,Wl))}}L.I=3,L.l&&L.l.ra(),L.aa&&(L.T=Date.now()-v.F,L.j.info("Handshake RTT: "+L.T+"ms")),W=L;var Ee=v;if(W.na=ih(W,W.L?W.ba:null,W.W),Ee.L){hu(W.h,Ee);var Ze=Ee,ir=W.O;ir&&(Ze.H=ir),Ze.D&&(Wa(Ze),Ha(Ze)),W.g=Ee}else eh(W);L.i.length>0&&Qa(L)}else wt[0]!="stop"&&wt[0]!="close"||Za(L,7);else L.I==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?Za(L,7):ju(L):wt[0]!="noop"&&L.l&&L.l.qa(wt),L.A=0)}}Hn(4)}catch{}}var dr=class{constructor(v,_){this.g=v,this.map=_}};function uu(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function du(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function Va(v){return v.h?1:v.g?v.g.size:0}function qa(v,_){return v.h?v.h==_:v.g?v.g.has(_):!1}function fu(v,_){v.g?v.g.add(_):v.h=_}function hu(v,_){v.h&&v.h==_?v.h=null:v.g&&v.g.has(_)&&v.g.delete(_)}uu.prototype.cancel=function(){if(this.i=mu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function mu(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let _=v.i;for(const L of v.g.values())_=_.concat(L.G);return _}return w(v.i)}var Kf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ll(v,_){if(v){v=v.split("&");for(let L=0;L<v.length;L++){const W=v[L].indexOf("=");let ie,me=null;W>=0?(ie=v[L].substring(0,W),me=v[L].substring(W+1)):ie=v[L],_(ie,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function _n(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;v instanceof _n?(this.l=v.l,Tr(this,v.j),this.o=v.o,this.g=v.g,Ns(this,v.u),this.h=v.h,gu(this,Qf(v.i)),this.m=v.m):v&&(_=String(v).match(Kf))?(this.l=!1,Tr(this,_[1]||"",!0),this.o=Ka(_[2]||""),this.g=Ka(_[3]||"",!0),Ns(this,_[4]),this.h=Ka(_[5]||"",!0),gu(this,_[6]||"",!0),this.m=Ka(_[7]||"")):(this.l=!1,this.i=new Ss(null,this.l))}_n.prototype.toString=function(){const v=[];var _=this.j;_&&v.push(So(_,Dl,!0),":");var L=this.g;return(L||_=="file")&&(v.push("//"),(_=this.o)&&v.push(So(_,Dl,!0),"@"),v.push(ki(L).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.u,L!=null&&v.push(":",String(L))),(L=this.h)&&(this.g&&L.charAt(0)!="/"&&v.push("/"),v.push(So(L,L.charAt(0)=="/"?pu:Yf,!0))),(L=this.i.toString())&&v.push("?",L),(L=this.m)&&v.push("#",So(L,Xf)),v.join("")},_n.prototype.resolve=function(v){const _=fr(this);let L=!!v.j;L?Tr(_,v.j):L=!!v.o,L?_.o=v.o:L=!!v.g,L?_.g=v.g:L=v.u!=null;var W=v.h;if(L)Ns(_,v.u);else if(L=!!v.h){if(W.charAt(0)!="/")if(this.g&&!this.h)W="/"+W;else{var ie=_.h.lastIndexOf("/");ie!=-1&&(W=_.h.slice(0,ie+1)+W)}if(ie=W,ie==".."||ie==".")W="";else if(ie.indexOf("./")!=-1||ie.indexOf("/.")!=-1){W=ie.lastIndexOf("/",0)==0,ie=ie.split("/");const me=[];for(let Ee=0;Ee<ie.length;){const Ze=ie[Ee++];Ze=="."?W&&Ee==ie.length&&me.push(""):Ze==".."?((me.length>1||me.length==1&&me[0]!="")&&me.pop(),W&&Ee==ie.length&&me.push("")):(me.push(Ze),W=!0)}W=me.join("/")}else W=ie}return L?_.h=W:L=v.i.toString()!=="",L?gu(_,Qf(v.i)):L=!!v.m,L&&(_.m=v.m),_};function fr(v){return new _n(v)}function Tr(v,_,L){v.j=L?Ka(_,!0):_,v.j&&(v.j=v.j.replace(/:$/,""))}function Ns(v,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);v.u=_}else v.u=null}function gu(v,_,L){_ instanceof Ss?(v.i=_,$l(v.i,v.l)):(L||(_=So(_,ks)),v.i=new Ss(_,v.l))}function bt(v,_,L){v.i.set(_,L)}function ko(v){return bt(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function Ka(v,_){return v?_?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function So(v,_,L){return typeof v=="string"?(v=encodeURI(v).replace(_,fn),L&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function fn(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Dl=/[#\/\?@]/g,Yf=/[#\?:]/g,pu=/[#\?]/g,ks=/[#\?@]/g,Xf=/#/g;function Ss(v,_){this.h=this.g=null,this.i=v||null,this.j=!!_}function hn(v){v.g||(v.g=new Map,v.h=0,v.i&&Ll(v.i,function(_,L){v.add(decodeURIComponent(_.replace(/\+/g," ")),L)}))}e=Ss.prototype,e.add=function(v,_){hn(this),this.i=null,v=_s(this,v);let L=this.g.get(v);return L||this.g.set(v,L=[]),L.push(_),this.h+=1,this};function Jf(v,_){hn(v),_=_s(v,_),v.g.has(_)&&(v.i=null,v.h-=v.g.get(_).length,v.g.delete(_))}function xu(v,_){return hn(v),_=_s(v,_),v.g.has(_)}e.forEach=function(v,_){hn(this),this.g.forEach(function(L,W){L.forEach(function(ie){v.call(_,ie,W,this)},this)},this)};function vu(v,_){hn(v);let L=[];if(typeof _=="string")xu(v,_)&&(L=L.concat(v.g.get(_s(v,_))));else for(v=Array.from(v.g.values()),_=0;_<v.length;_++)L=L.concat(v[_]);return L}e.set=function(v,_){return hn(this),this.i=null,v=_s(this,v),xu(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[_]),this.h+=1,this},e.get=function(v,_){return v?(v=vu(this,v),v.length>0?String(v[0]):_):_};function Bl(v,_,L){Jf(v,_),L.length>0&&(v.i=null,v.g.set(_s(v,_),w(L)),v.h+=L.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],_=Array.from(this.g.keys());for(let W=0;W<_.length;W++){var L=_[W];const ie=ki(L);L=vu(this,L);for(let me=0;me<L.length;me++){let Ee=ie;L[me]!==""&&(Ee+="="+ki(L[me])),v.push(Ee)}}return this.i=v.join("&")};function Qf(v){const _=new Ss;return _.i=v.i,v.g&&(_.g=new Map(v.g),_.h=v.h),_}function _s(v,_){return _=String(_),v.j&&(_=_.toLowerCase()),_}function $l(v,_){_&&!v.j&&(hn(v),v.i=null,v.g.forEach(function(L,W){const ie=W.toLowerCase();W!=ie&&(Jf(this,W),Bl(this,ie,L))},v)),v.j=_}function pa(v,_){const L=new ha;if(c.Image){const W=new Image;W.onload=m(Gn,L,"TestLoadImage: loaded",!0,_,W),W.onerror=m(Gn,L,"TestLoadImage: error",!1,_,W),W.onabort=m(Gn,L,"TestLoadImage: abort",!1,_,W),W.ontimeout=m(Gn,L,"TestLoadImage: timeout",!1,_,W),c.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=v}else _(!1)}function yu(v,_){const L=new ha,W=new AbortController,ie=setTimeout(()=>{W.abort(),Gn(L,"TestPingServer: timeout",!1,_)},1e4);fetch(v,{signal:W.signal}).then(me=>{clearTimeout(ie),me.ok?Gn(L,"TestPingServer: ok",!0,_):Gn(L,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(ie),Gn(L,"TestPingServer: error",!1,_)})}function Gn(v,_,L,W,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),W(L)}catch{}}function Cs(){this.g=new pe}function Ya(v){this.i=v.Sb||null,this.h=v.ab||!1}p(Ya,Re),Ya.prototype.g=function(){return new _o(this.i,this.h)};function _o(v,_){ze.call(this),this.H=v,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(_o,ze),e=_o.prototype,e.open=function(v,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=_,this.readyState=1,xa(this)},e.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(_.body=v),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Es(this)),this.readyState=0},e.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,xa(this)),this.g&&(this.readyState=3,xa(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zl(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function zl(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}e.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var _=v.value?v.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!v.done}))&&(this.response=this.responseText+=_)}v.done?Es(this):xa(this),this.readyState==3&&zl(this)}},e.Oa=function(v){this.g&&(this.response=this.responseText=v,Es(this))},e.Na=function(v){this.g&&(this.response=v,Es(this))},e.ga=function(){this.g&&Es(this)};function Es(v){v.readyState=4,v.l=null,v.j=null,v.B=null,xa(v)}e.setRequestHeader=function(v,_){this.A.append(v,_)},e.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],_=this.h.entries();for(var L=_.next();!L.done;)L=L.value,v.push(L[0]+": "+L[1]),L=_.next();return v.join(`\r
`)};function xa(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Vn(v){let _="";return fe(v,function(L,W){_+=W,_+=":",_+=L,_+=`\r
`}),_}function Co(v,_,L){e:{for(W in L){var W=!1;break e}W=!0}W||(L=Vn(L),typeof v=="string"?L!=null&&ki(L):bt(v,_,L))}function Mt(v){ze.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Mt,ze);var Xa=/^https?$/i,bu=["POST","PUT"];e=Mt.prototype,e.Fa=function(v){this.H=v},e.ea=function(v,_,L,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);_=_?_.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cu.g(),this.g.onreadystatechange=x(h(this.Ca,this));try{this.B=!0,this.g.open(_,String(v),!0),this.B=!1}catch(me){Eo(this,me);return}if(v=L||"",L=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ie in W)L.set(ie,W[ie]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const me of W.keys())L.set(me,W.get(me));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(L.keys()).find(me=>me.toLowerCase()=="content-type"),ie=c.FormData&&v instanceof c.FormData,!(Array.prototype.indexOf.call(bu,_,void 0)>=0)||W||ie||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Ee]of L)this.g.setRequestHeader(me,Ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(me){Eo(this,me)}};function Eo(v,_){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=_,v.o=5,wu(v),Si(v)}function wu(v){v.A||(v.A=!0,Be(v,"complete"),Be(v,"error"))}e.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,Be(this,"complete"),Be(this,"abort"),Si(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Si(this,!0)),Mt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Ao(this):this.Xa())},e.Xa=function(){Ao(this)};function Ao(v){if(v.h&&typeof o<"u"){if(v.v&&va(v)==4)setTimeout(v.Ca.bind(v),0);else if(Be(v,"readystatechange"),va(v)==4){v.h=!1;try{const me=v.ca();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var L;if(!(L=_)){var W;if(W=me===0){let Ee=String(v.D).match(Kf)[1]||null;!Ee&&c.self&&c.self.location&&(Ee=c.self.location.protocol.slice(0,-1)),W=!Xa.test(Ee?Ee.toLowerCase():"")}L=W}if(L)Be(v,"complete"),Be(v,"success");else{v.o=6;try{var ie=va(v)>2?v.g.statusText:""}catch{ie=""}v.l=ie+" ["+v.ca()+"]",wu(v)}}finally{Si(v)}}}}function Si(v,_){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const L=v.g;v.g=null,_||Be(v,"ready");try{L.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function va(v){return v.g?v.g.readyState:0}e.ca=function(){try{return va(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(v){if(this.g){var _=this.g.responseText;return v&&_.indexOf(v)==0&&(_=_.substring(v.length)),Lt(_)}};function Dr(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function _i(v){const _={};v=(v.g&&va(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<v.length;W++){if(D(v[W]))continue;var L=Gf(v[W]);const ie=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const me=_[ie]||[];_[ie]=me,me.push(L)}Y(_,function(W){return W.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ja(v,_,L){return L&&L.internalChannelParams&&L.internalChannelParams[v]||_}function As(v){this.za=0,this.i=[],this.j=new ha,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ja("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ja("baseRetryDelayMs",5e3,v),this.Za=Ja("retryDelaySeedMs",1e4,v),this.Ta=Ja("forwardChannelMaxRetries",2,v),this.va=Ja("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new uu(v&&v.concurrentRequestLimit),this.Ba=new Cs,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=As.prototype,e.ka=8,e.I=1,e.connect=function(v,_,L,W){cr(0),this.W=v,this.H=_||{},L&&W!==void 0&&(this.H.OSID=L,this.H.OAID=W),this.F=this.X,this.J=ih(this,null,this.W),Qa(this)};function ju(v){if(Ul(v),v.I==3){var _=v.V++,L=fr(v.J);if(bt(L,"SID",v.M),bt(L,"RID",_),bt(L,"TYPE","terminate"),To(v,L),_=new ma(v,v.j,_),_.M=2,_.A=ko(fr(L)),L=!1,c.navigator&&c.navigator.sendBeacon)try{L=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!L&&c.Image&&(new Image().src=_.A,L=!0),L||(_.g=sh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Ha(_)}ah(v)}function Ts(v){v.g&&(ku(v),v.g.cancel(),v.g=null)}function Ul(v){Ts(v),v.v&&(c.clearTimeout(v.v),v.v=null),Hl(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&c.clearTimeout(v.m),v.m=null)}function Qa(v){if(!du(v.h)&&!v.m){v.m=!0;var _=v.Ea;P||R(),B||(P(),B=!0),T.add(_,v),v.D=0}}function Fl(v,_){return Va(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=_.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=za(h(v.Ea,v,_),nh(v,v.D)),v.D++,!0)}e.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const ie=new ma(this,this.j,v);let me=this.o;if(this.U&&(me?(me=H(me),ee(me,this.U)):me=this.U),this.u!==null||this.R||(ie.J=me,me=null),this.S)e:{for(var _=0,L=0;L<this.i.length;L++){t:{var W=this.i[L];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(_+=W,_>4096){_=L;break e}if(_===4096||L===this.i.length-1){_=L+1;break e}}_=1e3}else _=1e3;_=Zf(this,ie,_),L=fr(this.J),bt(L,"RID",v),bt(L,"CVER",22),this.G&&bt(L,"X-HTTP-Session-Id",this.G),To(this,L),me&&(this.R?_="headers="+ki(Vn(me))+"&"+_:this.u&&Co(L,this.u,me)),fu(this.h,ie),this.Ra&&bt(L,"TYPE","init"),this.S?(bt(L,"$req",_),bt(L,"SID","null"),ie.U=!0,Fa(ie,L,null)):Fa(ie,L,_),this.I=2}}else this.I==3&&(v?Nu(this,v):this.i.length==0||du(this.h)||Nu(this))};function Nu(v,_){var L;_?L=_.l:L=v.V++;const W=fr(v.J);bt(W,"SID",v.M),bt(W,"RID",L),bt(W,"AID",v.K),To(v,W),v.u&&v.o&&Co(W,v.u,v.o),L=new ma(v,v.j,L,v.D+1),v.u===null&&(L.J=v.o),_&&(v.i=_.G.concat(v.i)),_=Zf(v,L,1e3),L.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),fu(v.h,L),Fa(L,W,_)}function To(v,_){v.H&&fe(v.H,function(L,W){bt(_,W,L)}),v.l&&fe({},function(L,W){bt(_,W,L)})}function Zf(v,_,L){L=Math.min(v.i.length,L);const W=v.l?h(v.l.Ka,v.l,v):null;e:{var ie=v.i;let Ze=-1;for(;;){const ir=["count="+L];Ze==-1?L>0?(Ze=ie[0].g,ir.push("ofs="+Ze)):Ze=0:ir.push("ofs="+Ze);let wt=!0;for(let Jt=0;Jt<L;Jt++){var me=ie[Jt].g;const Xr=ie[Jt].map;if(me-=Ze,me<0)Ze=Math.max(0,ie[Jt].g-100),wt=!1;else try{me="req"+me+"_"||"";try{var Ee=Xr instanceof Map?Xr:Object.entries(Xr);for(const[Ci,ya]of Ee){let ba=ya;f(ya)&&(ba=Ke(ya)),ir.push(me+Ci+"="+encodeURIComponent(ba))}}catch(Ci){throw ir.push(me+"type="+encodeURIComponent("_badmap")),Ci}}catch{W&&W(Xr)}}if(wt){Ee=ir.join("&");break e}}Ee=void 0}return v=v.i.splice(0,L),_.G=v,Ee}function eh(v){if(!v.g&&!v.v){v.Y=1;var _=v.Da;P||R(),B||(P(),B=!0),T.add(_,v),v.A=0}}function Oo(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=za(h(v.Da,v),nh(v,v.A)),v.A++,!0)}e.Da=function(){if(this.v=null,th(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=za(h(this.Wa,this),v)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,cr(10),Ts(this),th(this))};function ku(v){v.B!=null&&(c.clearTimeout(v.B),v.B=null)}function th(v){v.g=new ma(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var _=fr(v.na);bt(_,"RID","rpc"),bt(_,"SID",v.M),bt(_,"AID",v.K),bt(_,"CI",v.F?"0":"1"),!v.F&&v.ia&&bt(_,"TO",v.ia),bt(_,"TYPE","xmlhttp"),To(v,_),v.u&&v.o&&Co(_,v.u,v.o),v.O&&(v.g.H=v.O);var L=v.g;v=v.ba,L.M=1,L.A=ko(fr(_)),L.u=null,L.R=!0,Rl(L,v)}e.Va=function(){this.C!=null&&(this.C=null,Ts(this),Oo(this),cr(19))};function Hl(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function rh(v,_){var L=null;if(v.g==_){Hl(v),ku(v),v.g=null;var W=2}else if(qa(v.h,_))L=_.G,hu(v.h,_),W=1;else return;if(v.I!=0){if(_.o)if(W==1){L=_.u?_.u.length:0,_=Date.now()-_.F;var ie=v.D;W=ar(),Be(W,new $a(W,L)),Qa(v)}else eh(v);else if(ie=_.m,ie==3||ie==0&&_.X>0||!(W==1&&Fl(v,_)||W==2&&Oo(v)))switch(L&&L.length>0&&(_=v.h,_.i=_.i.concat(L)),ie){case 1:Za(v,5);break;case 4:Za(v,10);break;case 3:Za(v,6);break;default:Za(v,2)}}}function nh(v,_){let L=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(L*=2),L*_}function Za(v,_){if(v.j.info("Error code "+_),_==2){var L=h(v.bb,v),W=v.Ua;const ie=!W;W=new _n(W||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Tr(W,"https"),ko(W),ie?pa(W.toString(),L):yu(W.toString(),L)}else cr(2);v.I=0,v.l&&v.l.pa(_),ah(v),Ul(v)}e.bb=function(v){v?(this.j.info("Successfully pinged google.com"),cr(2)):(this.j.info("Failed to ping google.com"),cr(1))};function ah(v){if(v.I=0,v.ja=[],v.l){const _=mu(v.h);(_.length!=0||v.i.length!=0)&&(j(v.ja,_),j(v.ja,v.i),v.h.i.length=0,w(v.i),v.i.length=0),v.l.oa()}}function ih(v,_,L){var W=L instanceof _n?fr(L):new _n(L);if(W.g!="")_&&(W.g=_+"."+W.g),Ns(W,W.u);else{var ie=c.location;W=ie.protocol,_=_?_+"."+ie.hostname:ie.hostname,ie=+ie.port;const me=new _n(null);W&&Tr(me,W),_&&(me.g=_),ie&&Ns(me,ie),L&&(me.h=L),W=me}return L=v.G,_=v.wa,L&&_&&bt(W,L,_),bt(W,"VER",v.ka),To(v,W),W}function sh(v,_,L){if(_&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=v.Aa&&!v.ma?new Mt(new Ya({ab:L})):new Mt(v.ma),_.Fa(v.L),_}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function oh(){}e=oh.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Yr(v,_){ze.call(this),this.g=new As(_),this.l=v,this.h=_&&_.messageUrlParams||null,v=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(v?v["X-WebChannel-Content-Type"]=_.messageContentType:v={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(v?v["X-WebChannel-Client-Profile"]=_.sa:v={"X-WebChannel-Client-Profile":_.sa}),this.g.U=v,(v=_&&_.Qb)&&!D(v)&&(this.g.u=v),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!D(_)&&(this.g.G=_,v=this.h,v!==null&&_ in v&&(v=this.h,_ in v&&delete v[_])),this.j=new Os(this)}p(Yr,ze),Yr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yr.prototype.close=function(){ju(this.g)},Yr.prototype.o=function(v){var _=this.g;if(typeof v=="string"){var L={};L.__data__=v,v=L}else this.v&&(L={},L.__data__=Ke(v),v=L);_.i.push(new dr(_.Ya++,v)),_.I==3&&Qa(_)},Yr.prototype.N=function(){this.g.l=null,delete this.j,ju(this.g),delete this.g,Yr.Z.N.call(this)};function lh(v){ce.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var _=v.__sm__;if(_){e:{for(const L in _){v=L;break e}v=void 0}(this.i=v)&&(v=this.i,_=_!==null&&v in _?_[v]:void 0),this.data=_}else this.data=v}p(lh,ce);function ch(){ve.call(this),this.status=1}p(ch,ve);function Os(v){this.g=v}p(Os,oh),Os.prototype.ra=function(){Be(this.g,"a")},Os.prototype.qa=function(v){Be(this.g,new lh(v))},Os.prototype.pa=function(v){Be(this.g,new ch)},Os.prototype.oa=function(){Be(this.g,"b")},Yr.prototype.send=Yr.prototype.o,Yr.prototype.open=Yr.prototype.m,Yr.prototype.close=Yr.prototype.close,Pl.NO_ERROR=0,Pl.TIMEOUT=8,Pl.HTTP_ERROR=6,Wf.COMPLETE="complete",Xe.EventType=he,he.OPEN="a",he.CLOSE="b",he.ERROR="c",he.MESSAGE="d",ze.prototype.listen=ze.prototype.J,Mt.prototype.listenOnce=Mt.prototype.K,Mt.prototype.getLastError=Mt.prototype.Ha,Mt.prototype.getLastErrorCode=Mt.prototype.ya,Mt.prototype.getStatus=Mt.prototype.ca,Mt.prototype.getResponseJson=Mt.prototype.La,Mt.prototype.getResponseText=Mt.prototype.la,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Fa}).apply(typeof p0<"u"?p0:typeof self<"u"?self:typeof window<"u"?window:{});const Gk="@firebase/firestore",Vk="4.9.3";class sn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");let gf="12.7.0";const Bc=new t2("@firebase/firestore");function Ma(e,...t){if(Bc.logLevel<=yt.DEBUG){const r=t.map(g2);Bc.debug(`Firestore (${gf}): ${e}`,...r)}}function HA(e,...t){if(Bc.logLevel<=yt.ERROR){const r=t.map(g2);Bc.error(`Firestore (${gf}): ${e}`,...r)}}function Jz(e,...t){if(Bc.logLevel<=yt.WARN){const r=t.map(g2);Bc.warn(`Firestore (${gf}): ${e}`,...r)}}function g2(e){if(typeof e=="string")return e;try{return(function(r){return JSON.stringify(r)})(e)}catch{return e}}function Bd(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,WA(e,n,r)}function WA(e,t,r){let n=`FIRESTORE (${gf}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw HA(n),new Error(n)}function Cd(e,t,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,e||WA(t,s,n)}const dt={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class ft extends bi{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ed{constructor(){this.promise=new Promise(((t,r)=>{this.resolve=t,this.reject=r}))}}class GA{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Qz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable((()=>r(sn.UNAUTHENTICATED)))}shutdown(){}}class Zz{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class eU{constructor(t){this.t=t,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){Cd(this.o===void 0,42304);let n=this.i;const s=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let o=new Ed;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ed,t.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=o;t.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},f=d=>{Ma("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(Ma("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ed)}}),0),c()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==t?(Ma("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Cd(typeof n.accessToken=="string",31837,{l:n}),new GA(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Cd(t===null||typeof t=="string",2055,{h:t}),new sn(t)}}class tU{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class rU{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new tU(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable((()=>r(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qk{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nU{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){Cd(this.o===void 0,3512);const n=o=>{o.error!=null&&Ma("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Ma("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?r(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>n(o)))};const s=o=>{Ma("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Ma("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qk(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((r=>r?(Cd(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new qk(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function aU(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}class iU{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=aU(40);for(let o=0;o<s.length;++o)n.length<20&&s[o]<r&&(n+=t.charAt(s[o]%62))}return n}}function ho(e,t){return e<t?-1:e>t?1:0}function sU(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const s=e.charAt(n),o=t.charAt(n);if(s!==o)return Ev(s)===Ev(o)?ho(s,o):Ev(s)?1:-1}return ho(e.length,t.length)}const oU=55296,lU=57343;function Ev(e){const t=e.charCodeAt(0);return t>=oU&&t<=lU}const Kk="__name__";class ii{constructor(t,r,n){r===void 0?r=0:r>t.length&&Bd(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&Bd(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return ii.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof ii?t.forEach((n=>{r.push(n)})):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let s=0;s<n;s++){const o=ii.compareSegments(t.get(s),r.get(s));if(o!==0)return o}return ho(t.length,r.length)}static compareSegments(t,r){const n=ii.isNumericId(t),s=ii.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?ii.extractNumericId(t).compare(ii.extractNumericId(r)):sU(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return m2.fromString(t.substring(4,t.length-2))}}class _a extends ii{construct(t,r,n){return new _a(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new ft(dt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((s=>s.length>0)))}return new _a(r)}static emptyPath(){return new _a([])}}const cU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qo extends ii{construct(t,r,n){return new Qo(t,r,n)}static isValidIdentifier(t){return cU.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qo.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Kk}static keyField(){return new Qo([Kk])}static fromServerFormat(t){const r=[];let n="",s=0;const o=()=>{if(n.length===0)throw new ft(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let c=!1;for(;s<t.length;){const f=t[s];if(f==="\\"){if(s+1===t.length)throw new ft(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ft(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=d,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(n+=f,s++):(o(),s++)}if(o(),c)throw new ft(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Qo(r)}static emptyPath(){return new Qo([])}}class el{constructor(t){this.path=t}static fromPath(t){return new el(_a.fromString(t))}static fromName(t){return new el(_a.fromString(t).popFirst(5))}static empty(){return new el(_a.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_a.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return _a.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new el(new _a(t.slice()))}}function uU(e,t,r,n){if(t===!0&&n===!0)throw new ft(dt.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function dU(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function fU(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(n){return n.constructor?n.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Bd(12329,{type:typeof e})}function hU(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ft(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=fU(e);throw new ft(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function vr(e,t){const r={typeString:e};return t&&(r.value=t),r}function pf(e,t){if(!dU(e))throw new ft(dt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const s=t[n].typeString,o="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const c=e[n];if(s&&typeof c!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){r=`Expected '${n}' field to equal '${o.value}'`;break}}if(r)throw new ft(dt.INVALID_ARGUMENT,r);return!0}const Yk=-62135596800,Xk=1e6;class si{static now(){return si.fromMillis(Date.now())}static fromDate(t){return si.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*Xk);return new si(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new ft(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ft(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<Yk)throw new ft(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ft(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xk}_compareTo(t){return this.seconds===t.seconds?ho(this.nanoseconds,t.nanoseconds):ho(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:si._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(pf(t,si._jsonSchema))return new si(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Yk;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}si._jsonSchemaVersion="firestore/timestamp/1.0",si._jsonSchema={type:vr("string",si._jsonSchemaVersion),seconds:vr("number"),nanoseconds:vr("number")};function mU(e){return e.name==="IndexedDbTransactionError"}class gU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class gl{constructor(t){this.binaryString=t}static fromBase64String(t){const r=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new gU("Invalid base64 string: "+o):o}})(t);return new gl(r)}static fromUint8Array(t){const r=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(t);return new gl(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ho(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}gl.EMPTY_BYTE_STRING=new gl("");const Ib="(default)";class ym{constructor(t,r){this.projectId=t,this.database=r||Ib}static empty(){return new ym("","")}get isDefaultDatabase(){return this.database===Ib}isEqual(t){return t instanceof ym&&t.projectId===this.projectId&&t.database===this.database}}class pU{constructor(t,r=null,n=[],s=[],o=null,c="F",f=null,d=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=o,this.limitType=c,this.startAt=f,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xU(e){return new pU(e)}var Jk,ut;(ut=Jk||(Jk={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";new m2([4294967295,4294967295],0);const vU=41943040;const yU=1048576;function Av(){return typeof document<"u"?document:null}class bU{constructor(t,r,n=1e3,s=1.5,o=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-n);s>0&&Ma("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}class p2{constructor(t,r,n,s,o){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=o,this.deferred=new Ed,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,s,o){const c=Date.now()+n,f=new p2(t,r,c,s,o);return f.start(n),f}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ft(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Qk,Zk;(Zk=Qk||(Qk={})).Ma="default",Zk.Cache="cache";function wU(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}const eS=new Map;const VA="firestore.googleapis.com",tS=!0;class rS{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ft(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VA,this.ssl=tS}else this.host=t.host,this.ssl=t.ssl??tS;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=vU;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<yU)throw new ft(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}uU("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wU(t.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ft(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ft(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ft(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class qA{constructor(t,r,n,s){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ft(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ft(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rS(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Qz;switch(n.type){case"firstParty":return new rU(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ft(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=eS.get(r);n&&(Ma("ComponentProvider","Removing Datastore"),eS.delete(r),n.terminate())})(this),Promise.resolve()}}function jU(e,t,r,n={}){e=hU(e,qA);const s=Jc(t),o=e._getSettings(),c={...o,emulatorOptions:e._getEmulatorOptions()},f=`${t}:${r}`;s&&(Z1(`https://${f}`),e2("Firestore",!0)),o.host!==VA&&o.host!==f&&Jz("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:f,ssl:s,emulatorOptions:n};if(!dl(d,c)&&(e._setSettings(d),n.mockUserToken)){let h,m;if(typeof n.mockUserToken=="string")h=n.mockUserToken,m=sn.MOCK_USER;else{h=eA(n.mockUserToken,e._app?.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new ft(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new sn(p)}e._authCredentials=new Zz(new GA(h,m))}}class x2{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new x2(this.firestore,t,this._query)}}class li{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new v2(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new li(this.firestore,t,this._key)}toJSON(){return{type:li._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(pf(r,li._jsonSchema))return new li(t,n||null,new el(_a.fromString(r.referencePath)))}}li._jsonSchemaVersion="firestore/documentReference/1.0",li._jsonSchema={type:vr("string",li._jsonSchemaVersion),referencePath:vr("string")};class v2 extends x2{constructor(t,r,n){super(t,r,xU(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new li(this.firestore,null,new el(t))}withConverter(t){return new v2(this.firestore,t,this._path)}}const nS="AsyncQueue";class aS{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bU(this,"async_queue_retry"),this._c=()=>{const n=Av();n&&Ma(nS,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=Av();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=Av();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const r=new Ed;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!mU(t))throw t;Ma(nS,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const r=this.ac.then((()=>(this.rc=!0,t().catch((n=>{throw this.nc=n,this.rc=!1,HA("INTERNAL UNHANDLED ERROR: ",iS(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const s=p2.createAndSchedule(this,t,r,n,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Bd(47125,{Pc:iS(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function iS(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class NU extends qA{constructor(t,r,n,s){super(t,r,n,s),this.type="firestore",this._queue=new aS,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new aS(t),this._firestoreClient=void 0,await t}}}function kU(e,t){const r=typeof e=="object"?e:n2(),n=typeof e=="string"?e:Ib,s=mg(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const o=J6("firestore");o&&jU(s,...o)}return s}class Vi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Vi(gl.fromBase64String(t))}catch(r){throw new ft(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Vi(gl.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Vi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(pf(t,Vi._jsonSchema))return Vi.fromBase64String(t.bytes)}}Vi._jsonSchemaVersion="firestore/bytes/1.0",Vi._jsonSchema={type:vr("string",Vi._jsonSchemaVersion),bytes:vr("string")};class KA{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new ft(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class il{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new ft(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new ft(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ho(this._lat,t._lat)||ho(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:il._jsonSchemaVersion}}static fromJSON(t){if(pf(t,il._jsonSchema))return new il(t.latitude,t.longitude)}}il._jsonSchemaVersion="firestore/geoPoint/1.0",il._jsonSchema={type:vr("string",il._jsonSchemaVersion),latitude:vr("number"),longitude:vr("number")};class sl{constructor(t){this._values=(t||[]).map((r=>r))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(n,s){if(n.length!==s.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==s[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:sl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(pf(t,sl._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((r=>typeof r=="number")))return new sl(t.vectorValues);throw new ft(dt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}sl._jsonSchemaVersion="firestore/vectorValue/1.0",sl._jsonSchema={type:vr("string",sl._jsonSchemaVersion),vectorValues:vr("object")};const SU=new RegExp("[~\\*/\\[\\]]");function _U(e,t,r){if(t.search(SU)>=0)throw sS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e);try{return new KA(...t.split("."))._internalPath}catch{throw sS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e)}}function sS(e,t,r,n,s){let o=`Function ${t}() called with invalid data`;o+=". ";let c="";return new ft(dt.INVALID_ARGUMENT,o+e+c)}class YA{constructor(t,r,n,s,o){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new li(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new CU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(XA("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class CU extends YA{data(){return super.data()}}function XA(e,t){return typeof t=="string"?_U(e,t):t instanceof KA?t._internalPath:t._delegate._internalPath}class x0{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Rc extends YA{constructor(t,r,n,s,o,c){super(t,r,n,s,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Z0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(XA("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(dt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=Rc._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Rc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Rc._jsonSchema={type:vr("string",Rc._jsonSchemaVersion),bundleSource:vr("string","DocumentSnapshot"),bundleName:vr("string"),bundle:vr("string")};class Z0 extends Rc{data(t={}){return super.data(t)}}class Ad{constructor(t,r,n,s){this._firestore=t,this._userDataWriter=r,this._snapshot=s,this.metadata=new x0(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const t=[];return this.forEach((r=>t.push(r))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach((n=>{t.call(r,new Z0(this._firestore,this._userDataWriter,n.key,n,new x0(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ft(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((f=>{const d=new Z0(s._firestore,s._userDataWriter,f.doc.key,f.doc,new x0(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>o||f.type!==3)).map((f=>{const d=new Z0(s._firestore,s._userDataWriter,f.doc.key,f.doc,new x0(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return f.type!==0&&(h=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),m=c.indexOf(f.doc.key)),{type:EU(f.type),doc:d,oldIndex:h,newIndex:m}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(dt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ad._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=iU.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(r.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function EU(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bd(61501,{type:e})}}Ad._jsonSchemaVersion="firestore/querySnapshot/1.0",Ad._jsonSchema={type:vr("string",Ad._jsonSchemaVersion),bundleSource:vr("string","QuerySnapshot"),bundleName:vr("string"),bundle:vr("string")};(function(t,r=!0){(function(s){gf=s})(Cl),fl(new fo("firestore",((n,{instanceIdentifier:s,options:o})=>{const c=n.getProvider("app").getImmediate(),f=new NU(new eU(n.getProvider("auth-internal")),new nU(c,n.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ft(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ym(h.options.projectId,m)})(c,s),c);return o={useFetchStreams:r,...o},f._setSettings(o),f}),"PUBLIC").setMultipleInstances(!0)),ui(Gk,Vk,t),ui(Gk,Vk,"esm2020")})();const AU={apiKey:"AIzaSyAdqbFNjrB6y-8BrMEYYCT5ywiCgZVtMaE",authDomain:"mtglibrary-70b46.firebaseapp.com",projectId:"mtglibrary-70b46",storageBucket:"mtglibrary-70b46.firebasestorage.app",messagingSenderId:"602862103839",appId:"1:602862103839:web:23c64b7486c058c903d42a",measurementId:"G-EWELJJQ631"},y2=nA(AU),Sa=vz(y2);kU(y2);Gz(y2);const TU="";async function OU(){const e={"Content-Type":"application/json"};if(Sa.currentUser){const t=await Sa.currentUser.getIdToken();e.Authorization=`Bearer ${t}`}else console.warn("[API] No currentUser found, sending request without auth.");return e}async function ka(e,t,r=null,n={}){let s=`${TU}${t}`;const o=new URL(s,window.location.origin);Object.keys(n).forEach(d=>{n[d]!==null&&n[d]!==void 0&&o.searchParams.append(d,n[d])});const c={method:e,headers:await OU()};r&&(c.body=JSON.stringify(r));const f=await fetch(o,c);if(!f.ok){let d=f.statusText;try{const h=await f.json();h.error&&(d=h.error)}catch{}throw new Error(`API Error (${f.status}): ${d}`)}return f.status===204?null:f.json()}const Fe={get:(e,t)=>ka("GET",e,null,t),post:(e,t)=>ka("POST",e,t),put:(e,t)=>ka("PUT",e,t),delete:e=>ka("DELETE",e),getBugs:()=>ka("GET","/bugs").then(e=>e.content),updateUser:(e,t)=>ka("PUT",`/users/${e}`,t),getBinders:()=>ka("GET","/api/binders"),getBinderCards:e=>ka("GET",`/api/binders/${e}/cards`),createBinder:e=>ka("POST","/api/binders",e),updateBinder:(e,t)=>ka("PUT",`/api/binders/${e}`,t),deleteBinder:e=>ka("DELETE",`/api/binders/${e}`)},JA=y.createContext(),vt=()=>y.useContext(JA),MU=({children:e})=>{const[t,r]=y.useState(null),[n,s]=y.useState(null),[o,c]=y.useState(!0),f=async(A,E,z={})=>{const P=await t$(Sa,A,E);if(P.user,Object.keys(z).length>0)try{await N();const B=await Fe.get("/me");B?.id&&(await Fe.updateUser(B.id,z),await N())}catch(B){console.error("Failed to save profile data during signup",B)}return P},d=(A,E)=>r$(Sa,A,E),h=()=>{const A=new Gi;return C$(Sa,A)},m=()=>(s(null),o$(Sa)),p=A=>e$(Sa,A),x=()=>{if(!Sa.currentUser)throw new Error("No user logged in");return n$(Sa.currentUser)},w=async A=>{if(!n?.id)throw new Error("User profile not ready");try{await Fe.updateUser(n.id,A),await N()}catch(E){throw console.error("Failed to update profile fields:",E),E}},j=async A=>{if(console.log("[AuthContext] uploadProfilePicture called",{file:A.name,currentUser:!!t}),!t)throw console.error("[AuthContext] No user logged in"),new Error("No user logged in");if(!A.type.startsWith("image/"))throw console.error("[AuthContext] Invalid file type:",A.type),new Error("File must be an image.");if(A.size>10*1024*1024)throw console.error("[AuthContext] File too large:",A.size),new Error("File size must be under 10MB.");try{console.log("[AuthContext] Converting image to base64...");const E=new FileReader,P=await new Promise((B,T)=>{E.onload=()=>B(E.result),E.onerror=T,E.readAsDataURL(A)});if(console.log("[AuthContext] Image converted to base64, size:",P.length),console.log("[AuthContext] Saving to database..."),!n?.id)throw new Error("User profile not ready");return await Fe.updateUser(n.id,{photo_url:P}),console.log("[AuthContext] Saved to database"),await N(),console.log("[AuthContext] Profile refreshed"),P}catch(E){throw console.error("[AuthContext] Error uploading profile picture:",E),console.error("[AuthContext] Error code:",E.code),console.error("[AuthContext] Error message:",E.message),E}},N=async()=>{if(Sa.currentUser)try{const A=await Fe.get("/me");s(A)}catch(A){console.error("Failed to fetch user profile:",A)}};y.useEffect(()=>s$(Sa,async E=>{r(E),E?await N():s(null),c(!1)}),[]);const C={currentUser:t,user:t,userProfile:n,refreshUserProfile:N,updateSettings:async A=>{if(!n)return;const E={...n.settings||{},...A};console.log("[AuthContext] Updating settings:",E);try{await Fe.updateUser(n.id,{settings:E})&&s(P=>({...P,settings:E}))}catch(z){console.error("Failed to update settings:",z)}},signup:f,login:d,loginWithGoogle:h,logout:m,resetPassword:p,sendVerification:x,updateProfileFields:w,uploadProfilePicture:j};return a.jsx(JA.Provider,{value:C,children:!o&&e})};function PU(){const[e,t]=y.useState([]),[r,n]=y.useState(!1),[s,o]=y.useState(null),c=y.useCallback(async(d,h={})=>{const{set:m,cn:p,...x}=h,w=(d||"").trim();if(!(m||p||Object.keys(x).length>0)&&(!w||w.length<2)){t([]);return}n(!0),o(null);try{const N=await Fe.post("/cards/search",{query:w,set:m,cn:p,...x});t(N.data||[])}catch(N){console.error(N),o(N.message),t([])}finally{n(!1)}},[]),f=y.useCallback(async d=>{if(!d||d.trim().length<2)return[];try{return(await Fe.get("/cards/autocomplete",{q:d})).data||[]}catch(h){return console.error("[useScryfall] Autocomplete error:",h),[]}},[]);return{results:e,loading:r,error:s,searchCards:c,getSuggestions:f,setResults:t}}const QA=y.createContext();function rn(){return y.useContext(QA)}function RU({children:e}){const[t,r]=y.useState([]),n=y.useCallback((o,c="info",f=3e3)=>{const d=Date.now();r(h=>[...h,{id:d,message:o,type:c}]),f>0&&setTimeout(()=>{r(h=>h.filter(m=>m.id!==d))},f)},[]),s=y.useCallback(o=>{r(c=>c.filter(f=>f.id!==o))},[]);return a.jsxs(QA.Provider,{value:{addToast:n},children:[e,qr.createPortal(a.jsx("div",{className:"fixed bottom-4 right-4 z-[99999] flex flex-col gap-2 pointer-events-none",children:t.map(o=>a.jsx("div",{className:`
                                px-4 py-3 rounded-lg shadow-lg text-sm font-medium transition-all transform animate-fade-in-up pointer-events-auto cursor-pointer
                                ${o.type==="success"?"bg-green-600 text-white":""}
                                ${o.type==="error"?"bg-red-600 text-white":""}
                                ${o.type==="info"?"bg-gray-800 text-white border border-gray-700":""}
                                ${o.type==="warning"?"bg-yellow-500 text-black":""}
                            `,onClick:()=>s(o.id),children:o.message},o.id))}),document.body)]})}function da(e={}){const{wishlist:t,userId:r}=e,[n,s]=y.useState([]),[o,c]=y.useState(!0),[f,d]=y.useState(null),{currentUser:h}=vt(),m=async()=>{if(h){c(!0);try{const w=new URLSearchParams;t!==void 0&&w.append("wishlist",t),r&&w.append("userId",r),w.append("ts",Date.now());const N=(await Fe.get(`/collection?${w.toString()}`)).map(S=>({...S.data,...S,deckId:S.deck_id,quantity:S.count,firestoreId:S.firestore_id,id:S.id,scryfall_id:S.scryfall_id}));s(N),d(null)}catch(w){console.error("Error fetching collection:",w),d(w)}finally{c(!1)}}};return y.useEffect(()=>{if(!h){s([]),c(!1);return}m()},[h,r,t]),{cards:n,loading:o,error:f,refresh:m,removeCard:async w=>{try{await Fe.delete(`/collection/${w}`),await m()}catch(j){throw console.error("Error removing card:",j),j}},updateCard:async(w,j)=>{try{await Fe.put(`/collection/${w}`,j),await m()}catch(N){throw console.error("Error updating card:",N),N}}}}function IU(e,t){const[r,n]=y.useState(e);return y.useEffect(()=>{const s=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(s)}},[e,t]),r}const Wr={async addCardToCollection(e,t,r=1,n,s=!1,o=null){return Fe.post("/collection",{scryfall_id:t.id,name:t.name,set_code:t.set||t.set_code,collector_number:t.collector_number,finish:n||t.finish||"nonfoil",count:r,data:t,deck_id:null,is_wishlist:s,targetUserId:o})},async updateCard(e,t){return Fe.put(`/collection/${e}`,t)},async removeCard(e){return Fe.delete(`/collection/${e}`)},async importBatch(e,t,r="merge"){return Fe.post("/collection/batch",{cards:t,mode:r})}},Gr={fetchRelationships:async()=>Fe.get("/api/community/relationships"),sendRequest:async e=>Fe.post("/api/community/relationships/request",{targetEmail:e}),respondToRequest:async(e,t)=>Fe.put(`/api/community/relationships/${e}`,{status:t}),deleteRelationship:async e=>Fe.delete(`/api/community/relationships/${e}`),fetchPermissions:async(e=null)=>Fe.get(`/api/community/permissions${e?`?deckId=${e}`:""}`),fetchIncomingPermissions:async()=>Fe.get("/api/community/permissions?direction=incoming"),grantPermission:async(e,t,r=null)=>Fe.post("/api/community/permissions",{granteeId:e,permissionLevel:t,deckId:r}),revokePermission:async e=>Fe.delete(`/api/community/permissions/${e}`),updateDeckPublicStatus:async(e,t,r)=>Fe.put(`/decks/${e}`,{isPublic:t,shareSlug:r})},ZA=y.createContext();function vg(){return y.useContext(ZA)}function LU({children:e}){const[t,r]=y.useState(null),[n,s]=y.useState(!1),o=y.useCallback(f=>{r(f),s(!0)},[]),c=y.useCallback(()=>{s(!1),setTimeout(()=>r(null),300)},[]);return a.jsx(ZA.Provider,{value:{selectedCard:t,isOpen:n,openCardModal:o,closeCardModal:c},children:e})}const eT=({card:e,normalCount:t=0,foilCount:r=0,wishlistCount:n=0,onUpdateCount:s,onUpdateWishlistCount:o,ownerName:c,currentUser:f,showOwnerTag:d=!1})=>{const{openCardModal:h}=vg(),[m,p]=y.useState(!1),x=c||e.owner_username||(f&&(e.owner_id===f.id||e.user_id===f.id)?f.username||"ME":null),w=(B,T=0)=>{if(!B)return"https://placehold.co/250x350?text=No+Image";const R=B.data||B;return R.card_faces&&R.card_faces.length>1?R.card_faces[T]?.image_uris?.normal||B.image_uri||"https://placehold.co/250x350?text=No+Image":R.image_uris?.normal||B.image_uri||"https://placehold.co/250x350?text=No+Image"},j=e.data?.card_faces||e.card_faces,N=j?.length>1&&!!j[1].image_uris,S=w(e,0),C=N?w(e,1):null,A=B=>{B.stopPropagation(),h(e)},E=(B,T,R)=>{B.stopPropagation(),s&&s(e,T,R)},z=t+r>0,P=!z&&n>0;return e.finish==="foil"?e.prices?.usd_foil||e.prices?.usd:e.prices?.usd||e.prices?.usd_foil,a.jsxs("div",{className:`group relative flex bg-gray-900/60 backdrop-blur-md rounded-xl overflow-hidden shadow-2xl border transition-all duration-300 hover:shadow-[0_0_30px_rgba(79,70,229,0.15)] aspect-[3.2/3.5] perspective-1000 ${z?"border-indigo-500/30":"border-white/5 grayscale-[0.8] opacity-70 hover:grayscale-0 hover:opacity-100"}`,children:[a.jsxs("div",{className:"relative aspect-[2.5/3.5] h-full cursor-pointer overflow-hidden bg-gray-950 shrink-0",onClick:A,children:[a.jsxs("div",{className:`relative w-full h-full transition-all duration-700 transform-style-3d ${m?"rotate-y-180":""}`,children:[a.jsxs("div",{className:"absolute inset-0 backface-hidden",children:[a.jsx("img",{src:S,alt:e.name,className:"w-full h-full object-cover",loading:"lazy"}),a.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 bg-gradient-to-t from-indigo-500/20 to-transparent transition-opacity duration-500"})]}),N&&a.jsx("div",{className:"absolute inset-0 backface-hidden rotate-y-180",children:a.jsx("img",{src:C||S,alt:`${e.name} Back`,className:"w-full h-full object-cover"})})]}),N&&a.jsx("button",{onClick:B=>{B.stopPropagation(),p(!m)},className:"absolute top-2 left-2 p-2 bg-black/60 hover:bg-indigo-600 text-white rounded-full backdrop-blur-md transition-all z-30 shadow-lg border border-white/10",title:"Flip Card",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),P&&a.jsx("div",{className:`absolute top-2 ${N?"left-12":"left-2"} z-20 bg-orange-500 text-white p-1 rounded-md shadow-lg animate-pulse`,children:a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})}),d&&x&&z&&a.jsxs("div",{className:`absolute ${N||P?"top-16":"top-12"} left-2 bg-gray-950/90 text-white text-[11px] font-black px-2 py-0.5 rounded border border-white/20 shadow-xl z-30 backdrop-blur-md uppercase tracking-wider`,children:[" ",x]}),a.jsx("div",{className:"absolute bottom-2 right-2 left-2 z-10",children:a.jsxs("div",{className:"bg-black/70 backdrop-blur-md px-2 py-1 rounded-lg border border-white/10 flex items-center justify-around text-[10px] font-mono",children:[a.jsxs("span",{className:"text-gray-400",children:["$",(parseFloat(e.prices?.usd)||0).toFixed(2)]}),a.jsx("div",{className:"h-2 w-[1px] bg-white/20"}),a.jsxs("span",{className:"text-yellow-400",children:["$",(parseFloat(e.prices?.usd_foil)||0).toFixed(2)," "]})]})})]}),a.jsxs("div",{className:"flex-1 bg-black/40 flex flex-col justify-between py-1 border-l border-white/5 relative",children:[a.jsxs("div",{className:"flex flex-col items-center flex-1 justify-center relative hover:bg-white/5 transition-colors group/sec",children:[a.jsx("button",{onClick:B=>E(B,"normal",1),className:"p-1.5 text-gray-500 hover:text-white transition-all transform hover:scale-125",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 15l7-7 7 7"})})}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"text-lg font-black text-white tabular-nums drop-shadow-[0_2px_4px_rgba(0,0,0,1)]",children:t}),a.jsx("span",{className:"text-[8px] font-black uppercase text-gray-600 tracking-[0.2em] -mt-1",children:"Normal"})]}),a.jsx("button",{onClick:B=>E(B,"normal",-1),className:"p-1.5 text-gray-500 hover:text-white transition-all transform hover:scale-125 disabled:opacity-0",disabled:t<=0,children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M19 9l-7 7-7-7"})})})]}),a.jsx("div",{className:"h-[1px] bg-white/5 mx-2"}),a.jsxs("div",{className:"flex flex-col items-center flex-1 justify-center relative hover:bg-indigo-500/5 transition-colors group/sec",children:[a.jsx("button",{onClick:B=>E(B,"foil",1),className:"p-1.5 text-indigo-400/60 hover:text-indigo-300 transition-all transform hover:scale-125",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 15l7-7 7 7"})})}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"text-lg font-black text-indigo-400 tabular-nums drop-shadow-[0_2px_4px_rgba(0,0,0,1)]",children:r}),a.jsx("span",{className:"text-[8px] font-black uppercase text-indigo-600 tracking-[0.2em] -mt-1",children:"Foil"})]}),a.jsx("button",{onClick:B=>E(B,"foil",-1),className:"p-1.5 text-indigo-400/60 hover:text-indigo-300 transition-all transform hover:scale-125 disabled:opacity-0",disabled:r<=0,children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M19 9l-7 7-7-7"})})})]}),a.jsx("div",{className:"h-[1px] bg-white/5 mx-2"}),a.jsxs("div",{className:"flex flex-col items-center flex-1 justify-center relative hover:bg-orange-500/5 transition-colors group/sec",children:[a.jsx("button",{onClick:B=>{B.stopPropagation(),o&&o(e,1)},className:"p-1.5 text-orange-400/60 hover:text-orange-300 transition-all transform hover:scale-125",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 15l7-7 7 7"})})}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"text-lg font-black text-orange-400 tabular-nums drop-shadow-[0_2px_4px_rgba(0,0,0,1)]",children:n}),a.jsx("span",{className:"text-[8px] font-black uppercase text-orange-600 tracking-[0.2em] -mt-1",children:"Wish"})]}),a.jsx("button",{onClick:B=>{B.stopPropagation(),o&&o(e,-1)},className:"p-1.5 text-orange-400/60 hover:text-orange-300 transition-all transform hover:scale-125 disabled:opacity-0",disabled:n<=0,children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M19 9l-7 7-7-7"})})})]})]})]})};function DU({title:e,titleId:t,...r},n){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{fillRule:"evenodd",d:"M11.47 7.72a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 0 1-1.06-1.06l7.5-7.5Z",clipRule:"evenodd"}))}const BU=y.forwardRef(DU);function $U({title:e,titleId:t,...r},n){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?y.createElement("title",{id:t},e):null,y.createElement("path",{fillRule:"evenodd",d:"M3.792 2.938A49.069 49.069 0 0 1 12 2.25c2.797 0 5.54.236 8.209.688a1.857 1.857 0 0 1 1.541 1.836v1.044a3 3 0 0 1-.879 2.121l-6.182 6.182a1.5 1.5 0 0 0-.439 1.061v2.927a3 3 0 0 1-1.658 2.684l-1.757.878A.75.75 0 0 1 9.75 21v-5.818a1.5 1.5 0 0 0-.44-1.06L3.13 7.938a3 3 0 0 1-.879-2.121V4.774c0-.897.64-1.683 1.542-1.836Z",clipRule:"evenodd"}))}const tT=y.forwardRef($U),zU=({value:e,onChange:t})=>{const[r,n]=y.useState(!1),s=y.useRef(null),o=[{label:"=",value:"="},{label:"",value:">="},{label:"",value:"<="}];y.useEffect(()=>{const f=d=>{s.current&&!s.current.contains(d.target)&&n(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const c=o.find(f=>f.value===e)||o[0];return a.jsxs("div",{className:"relative",ref:s,children:[a.jsxs("button",{type:"button",onClick:()=>n(!r),className:"flex items-center gap-2 px-3 py-3 bg-gray-900/50 hover:bg-gray-800 text-indigo-400 font-bold rounded-l-xl border-r border-white/10 transition-colors min-w-[50px] justify-center",children:[c.label,a.jsx("svg",{className:`w-3 h-3 transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&a.jsx("div",{className:"absolute top-full left-0 mt-1 w-20 bg-gray-900 border border-white/10 rounded-lg shadow-2xl z-[70] overflow-hidden backdrop-blur-xl",children:o.map(f=>a.jsx("button",{type:"button",onClick:()=>{t(f.value),n(!1)},className:`w-full px-4 py-2 text-left text-sm font-bold transition-colors ${e===f.value?"bg-indigo-600 text-white":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:f.label},f.value))})]})},b2=({isOpen:e,onClose:t,onAddCard:r})=>{const[n,s]=y.useState(""),[o,c]=y.useState(!1),[f,d]=y.useState(""),[h,m]=y.useState(""),[p,x]=y.useState(null),[w,j]=y.useState([]),[N,S]=y.useState(!1),[C,A]=y.useState([]),[E,z]=y.useState(!1),[P,B]=y.useState([]),[T,R]=y.useState("or"),[$,I]=y.useState(!1),[O,U]=y.useState(!1),[D,q]=y.useState([]),[Z,V]=y.useState(""),[X,re]=y.useState(""),[fe,Y]=y.useState({operator:"=",value:""}),[H,G]=y.useState({operator:"=",value:""}),[ee,Q]=y.useState({operator:"=",value:""}),[ae,_e]=y.useState(""),[be,Pe]=y.useState(""),{results:se,loading:Ae,error:Ce,searchCards:xe,getSuggestions:We}=PU(),{currentUser:je}=vt(),{addToast:ke}=rn(),{cards:Oe,refresh:Me}=da({userId:p||void 0}),$e=y.useRef(null),ze=y.useRef(null),Be=IU(n,300);y.useEffect(()=>{Be.length>=2&&o?qt(Be):Be.length<2&&A([])},[Be]);const qt=async pe=>{const Re=await We(pe);A(Re),z(Re.length>0)};y.useEffect(()=>{e&&(async()=>{try{const Xe=(await Gr.fetchIncomingPermissions()).filter(he=>["editor","admin","contributor"].includes(he.permission_level)&&!he.target_deck_id);j(Xe)}catch(Re){console.error("Failed to load writable collections",Re)}})()},[e]);const wr=y.useMemo(()=>{const pe=new Map;return Oe&&Oe.forEach(Re=>{const Xe=Re.scryfall_id||Re.id;pe.has(Xe)||pe.set(Xe,[]),pe.get(Xe).push(Re)}),pe},[Oe]);y.useEffect(()=>{e&&$e.current&&$e.current.focus()},[e]);const rt=pe=>{pe&&pe.preventDefault(),z(!1);const Re={set:f,cn:h,colors:P.length>0?P:void 0,colorLogic:T,colorIdentity:$,colorExcluded:O,rarity:D.length>0?D:void 0,type:Z,text:X,flavor:ae,artist:be,mv:fe.value!==""?{operator:fe.operator,value:Number(fe.value)}:void 0,power:H.value!==""?{operator:H.operator,value:Number(H.value)}:void 0,toughness:ee.value!==""?{operator:ee.operator,value:Number(ee.value)}:void 0};xe(n,Re)},lt=()=>{s(""),d(""),m(""),B([]),U(!1),q([]),V(""),re(""),Y({operator:"=",value:""}),G({operator:"=",value:""}),Q({operator:"=",value:""}),_e(""),Pe("")},Ot=pe=>{B(Re=>Re.includes(pe)?Re.filter(Xe=>Xe!==pe):[...Re,pe])},ne=pe=>{q(Re=>Re.includes(pe)?Re.filter(Xe=>Xe!==pe):[...Re,pe])},Le=async(pe,Re,Xe)=>{if(!je)return ke("Please log in","error");try{const he=pe.id,ce=wr.get(he)||[],ve=Re==="foil"?"foil":"nonfoil",Se=ce.find(qe=>qe.finish===ve&&!qe.deck_id&&!qe.is_wishlist);Xe>0?Se?(await Wr.updateCard(Se.id,{count:Se.count+1}),ke(`Added ${ve} ${pe.name}`,"success")):(await Wr.addCardToCollection(je.uid,pe,1,ve,!1,p),ke(`Added new ${ve} ${pe.name}`,"success")):Se&&(Se.count>1?(await Wr.updateCard(Se.id,{count:Se.count-1}),ke(`Removed ${ve} ${pe.name}`,"info")):(await Wr.removeCard(Se.id),ke(`Removed last ${ve} ${pe.name}`,"info"))),Me()}catch(he){console.error("Update failed",he),ke("Failed to update collection","error")}},Ke=async(pe,Re)=>{if(!je)return ke("Please log in","error");try{const Xe=pe.id,ce=(wr.get(Xe)||[]).find(ve=>ve.is_wishlist&&!ve.deck_id);Re>0?ce?(await Wr.updateCard(ce.id,{count:ce.count+1}),ke(`Increased ${pe.name} in wishlist`,"success")):(await Wr.addCardToCollection(je.uid,pe,1,"nonfoil",!0,p),ke(`Added ${pe.name} to wishlist`,"success")):ce&&(ce.count>1?(await Wr.updateCard(ce.id,{count:ce.count-1}),ke(`Decreased ${pe.name} in wishlist`,"info")):(await Wr.removeCard(ce.id),ke(`Removed ${pe.name} from wishlist`,"info"))),Me()}catch(Xe){console.error("Wishlist update failed",Xe),ke("Failed to update wishlist","error")}};if(!e)return null;const Lt={W:{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-200",symbol:"https://svgs.scryfall.io/card-symbols/W.svg"},U:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-200",symbol:"https://svgs.scryfall.io/card-symbols/U.svg"},B:{bg:"bg-gray-300",text:"text-gray-800",border:"border-gray-400",symbol:"https://svgs.scryfall.io/card-symbols/B.svg"},R:{bg:"bg-red-100",text:"text-red-700",border:"border-red-200",symbol:"https://svgs.scryfall.io/card-symbols/R.svg"},G:{bg:"bg-green-100",text:"text-green-700",border:"border-green-200",symbol:"https://svgs.scryfall.io/card-symbols/G.svg"},C:{bg:"bg-gray-400",text:"text-gray-900",border:"border-gray-500",symbol:"https://svgs.scryfall.io/card-symbols/C.svg"}};return qr.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 animate-fade-in",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity",onClick:t}),a.jsxs("div",{className:"relative bg-gray-900 border border-white/10 rounded-3xl shadow-2xl w-full max-w-7xl max-h-[90vh] flex flex-col overflow-hidden ring-1 ring-white/5",children:[a.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-gray-950/50 flex-shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-3",children:[a.jsx("span",{className:"text-indigo-400",children:"Card Library"}),a.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-indigo-500/20 text-indigo-300 uppercase tracking-wider border border-indigo-500/30",children:"Database"})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Search the entire Scryfall database to grow your collection."})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors p-2 hover:bg-white/5 rounded-xl",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w.length>0&&a.jsxs("div",{className:"px-6 pb-2 bg-gray-950/50 border-b border-white/5 flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Target:"}),a.jsxs("select",{value:p||"",onChange:pe=>x(pe.target.value||null),className:"bg-gray-900 border border-white/10 rounded-lg px-2 py-1 text-xs text-white focus:border-indigo-500 outline-none",children:[a.jsx("option",{value:"",children:"My Collection"}),w.map(pe=>a.jsxs("option",{value:pe.owner_id,children:[pe.owner_username,"'s Collection (",pe.permission_level,")"]},pe.owner_id))]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",children:[a.jsx("div",{className:"p-6 bg-gray-900 space-y-4 relative z-[60] border-b border-white/5",children:a.jsxs("form",{onSubmit:rt,className:"relative flex flex-col gap-4",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"relative flex-1 group",children:[a.jsx("input",{ref:$e,type:"text",placeholder:"Search cards...",className:"w-full bg-gray-950 text-white border border-white/10 rounded-2xl py-4 px-6 pl-14 text-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all placeholder-gray-600 shadow-inner",value:n,onChange:pe=>{s(pe.target.value),c(!0),z(!0)},onFocus:()=>n.length>=2&&z(!0)}),a.jsx("svg",{className:"absolute left-5 top-5 w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),E&&C.length>0&&a.jsx("div",{ref:ze,className:"absolute top-full left-0 right-0 mt-2 bg-gray-900 border border-white/10 rounded-xl shadow-2xl z-[100] py-2 max-h-60 overflow-y-auto custom-scrollbar",children:C.map((pe,Re)=>a.jsx("button",{type:"button",onClick:()=>{s(pe),c(!1),z(!1),xe(pe,{set:f,cn:h})},className:"w-full text-left px-6 py-3 hover:bg-white/5 text-gray-400 hover:text-white transition-colors border-b border-white/5 last:border-0",children:pe},Re))})]}),a.jsxs("button",{type:"button",onClick:()=>S(!N),className:`px-6 rounded-2xl border border-white/10 flex items-center gap-2 font-bold transition-all ${N?"bg-indigo-600 text-white border-indigo-500":"bg-gray-950 text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[a.jsx(tT,{className:"w-5 h-5"}),"Advanced Search"]}),a.jsx("button",{type:"submit",disabled:Ae,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-2xl text-lg font-bold transition-all disabled:opacity-50 min-w-[120px] shadow-lg shadow-indigo-500/20",children:Ae?"...":"Search"})]}),a.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${N?"max-h-[800px] opacity-100 mt-2":"max-h-0 opacity-0"}`,children:a.jsxs("div",{className:"bg-gray-950/50 rounded-2xl p-6 border border-white/5 space-y-6",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("h3",{className:"text-xs font-black text-gray-500 uppercase tracking-widest",children:"Advanced Configuration"}),a.jsx("button",{onClick:lt,className:"text-orange-500 hover:text-orange-400 text-[10px] font-black uppercase tracking-widest hover:underline",children:"Reset Filters"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Colors"}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsx("div",{className:"flex gap-2",children:Object.entries(Lt).map(([pe,Re])=>a.jsx("button",{type:"button",onClick:()=>Ot(pe),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all border-2 ${P.includes(pe)?"border-white scale-110 shadow-lg":"border-transparent opacity-60 hover:opacity-100 hover:scale-105"}`,style:{backgroundColor:P.includes(pe)?"transparent":""},children:a.jsx("img",{src:Re.symbol,alt:pe,className:`w-full h-full ${P.includes(pe)?"drop-shadow-md":"grayscale"}`})},pe))}),a.jsx("div",{className:"flex items-center gap-2 text-sm bg-gray-900 border border-white/10 rounded-lg p-1",children:["or","and"].map(pe=>a.jsx("button",{type:"button",onClick:()=>R(pe),className:`px-3 py-1 rounded-md text-[10px] font-black uppercase transition-all ${T===pe?"bg-indigo-600 text-white":"text-gray-500 hover:text-gray-300"}`,children:pe},pe))})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Rarity"}),a.jsx("div",{className:"flex gap-3",children:["common","uncommon","rare","mythic"].map(pe=>a.jsx("button",{type:"button",onClick:()=>ne(pe),className:`px-3 py-1.5 rounded-lg border text-xs font-bold uppercase transition-all ${D.includes(pe)?"bg-indigo-500/20 border-indigo-500 text-indigo-300":"bg-gray-900 border-white/10 text-gray-500 hover:text-gray-300"}`,children:pe.charAt(0)},pe))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Type"}),a.jsx("input",{type:"text",placeholder:"Creature, Artifact...",className:"w-full bg-gray-900 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:border-indigo-500 outline-none",value:Z,onChange:pe=>V(pe.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Text"}),a.jsx("input",{type:"text",placeholder:"Rules text...",className:"w-full bg-gray-900 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:border-indigo-500 outline-none",value:X,onChange:pe=>re(pe.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Mana Value"}),a.jsxs("div",{className:"flex items-center bg-gray-900 border border-white/10 rounded-xl overflow-hidden",children:[a.jsx(zU,{value:fe.operator,onChange:pe=>Y({...fe,operator:pe})}),a.jsx("input",{type:"number",className:"w-full bg-transparent p-2 text-sm outline-none",value:fe.value,onChange:pe=>Y({...fe,value:pe.target.value})})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Set"}),a.jsx("input",{type:"text",placeholder:"ABC",maxLength:5,className:"w-full bg-gray-900 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:border-indigo-500 outline-none uppercase",value:f,onChange:pe=>d(pe.target.value)})]}),a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider ml-1",children:"CN"}),a.jsx("input",{type:"text",placeholder:"#",className:"w-full bg-gray-900 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:border-indigo-500 outline-none",value:h,onChange:pe=>m(pe.target.value)})]})]})]})]})})]})}),a.jsxs("div",{className:"p-6",children:[Ce&&a.jsx("div",{className:"flex items-center justify-center p-8 text-red-400 bg-red-500/10 rounded-2xl border border-red-500/20",children:a.jsx("p",{className:"font-bold",children:Ce})}),!Ae&&se.length===0&&(n||N)&&!Ce&&a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-500 opacity-60",children:[a.jsx("svg",{className:"w-16 h-16 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),a.jsx("p",{className:"text-lg font-bold",children:"No matches found"})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:se.map((pe,Re)=>{const Xe=wr.get(pe.id)||[],he=Xe.filter(Se=>Se.finish==="nonfoil"&&!Se.deck_id&&!Se.is_wishlist).reduce((Se,qe)=>Se+(qe.count||1),0),ce=Xe.filter(Se=>Se.finish==="foil"&&!Se.deck_id&&!Se.is_wishlist).reduce((Se,qe)=>Se+(qe.count||1),0),ve=Xe.filter(Se=>Se.is_wishlist&&!Se.deck_id).reduce((Se,qe)=>Se+(qe.count||1),0);return a.jsx(eT,{card:pe,normalCount:he,foilCount:ce,wishlistCount:ve,onUpdateCount:Le,onUpdateWishlistCount:Ke},pe.id||Re)})})]})]})]}),a.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .custom-scrollbar::-webkit-scrollbar { width: 8px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.02); }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(99, 102, 241, 0.2); border-radius: 10px; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(99, 102, 241, 0.4); }
            `}})]}),document.body)},Ln={async sendMessage(e,t,r,n="",s=null){if(!e)throw new Error("API Key is missing. Please add it in Settings.");const o=s?.name||"MTG Forge",c=s?.personality?`Personality: ${s.personality}`:"Personality: Knowledgeable, friendly, and concise.",d=[{role:"user",parts:[{text:`
You are ${o}, an elite Magic: The Gathering AI assistant.
Your goal is to provide accurate, strategic, and engaging advice to players.

**Persona & Style:**
- ${c}
- Use emojis to add flair (e.g., , , , , , , ).
- Format responses using **Tailwind CSS** classes within HTML tags for a premium look.
- Do NOT use Markdown. Output raw HTML that can be injected directly into a <div>.

**Formatting Rules:**
- Use <p class="mb-2 text-gray-300"> for paragraphs.
- Use <strong class="text-indigo-400"> for key terms or card names.
- Use <ul class="list-disc pl-5 mb-2 space-y-1 text-gray-300"> for lists.
- Use <div class="bg-gray-700/50 p-3 rounded-lg border-l-4 border-indigo-500 mb-2"> for important notes or rules citations.
- Use <code class="bg-gray-900 px-1 py-0.5 rounded text-indigo-300 font-mono text-sm"> for mana costs (e.g., {1}{U}{B}) or keywords.

**Content Guidance:**
- If asked about rules, cite the Comprehensive Rules if possible.
- If asked about deck building, consider mana curve, synergy, and format staples.
- If asked about lore, be descriptive and immersive.

Context from User's Current View:
${n}
`.trim()}]},...t.map(p=>({role:p.role==="user"?"user":"model",parts:[{text:p.content}]})),{role:"user",parts:[{text:r}]}],h=["gemini-2.5-flash","gemini-2.0-flash","gemini-flash-latest","gemini-2.5-flash-lite","gemini-2.0-flash-lite","gemini-flash-lite-latest","gemini-exp-1206","gemini-pro-latest","gemini-1.5-flash","gemini-1.5-flash-latest","gemini-1.5-pro","gemini-1.5-pro-latest"];let m=null;for(const p of h)try{const x=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${p}:generateContent?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:d})});if(!x.ok){const N=await x.json();if(x.status===404||x.status===429){console.warn(`Model ${p} failed (${x.status}). Trying next...`),m=N;continue}throw new Error(N.error?.message||`Gemini API Error: ${x.statusText}`)}return(await x.json()).candidates?.[0]?.content?.parts?.[0]?.text||"I couldn't generate a response."}catch(x){console.warn(`Error with model ${p}:`,x),m=x}throw console.error("All Gemini models failed. Last error:",m),m||new Error("Failed to connect to any Gemini model.")},async getDeckStrategy(e,t,r=null,n=[],s=null){if(!e)throw new Error("API Key is missing.");const o=s?.name||"The Oracle",c=s?.personality?`Adopt the persona of ${o}: ${s.personality}`:"Act as a Magic: The Gathering expert.",f=n&&n.length>0,d=f?`Existing Deck List Analysis:
${n.map(p=>`- ${p.name} (${p.type_line||"Unknown"})`).join(`
`)}`:"This is a NEW deck build.";let h="";r&&(h=`
                User Playstyle Profile:
                - Archetypes: ${r.archetypes?.join(", ")||"N/A"}
                - Summary: ${r.summary||"N/A"}
                - Aggression: ${r.scores?.aggression||0}
                - Combo Affinity: ${r.scores?.comboAffinity||0}
                - Interaction: ${r.scores?.interaction||0}
                Tailor the deck's theme and card suggestions to align with this playstyle.
            `);const m=`
            ${c} I have chosen "${t}" as my Commander.
            
            ${d}
            
            ${f?"Analyze the PROVIDED deck list. Identify the specific game plan, key synergies between these cards, and how to pilot THIS build.":"Suggest a competitive yet fun deck strategy tailored to the following playstyle."}
            
            ${h}

            **Deck Composition Goals:**
            - Lands: 35-38
            - Mana Ramp: 10-12
            - Card Draw: 10
            - Targeted Removal: 8-10
            - Board Wipes: 2-4
            - Synergy / Strategy: 25-30

            **Mana Curve Goal (Bell Curve):**
            - 1-2 Mana: High volume for setup.
            - 3-4 Mana: Moderate volume for utility/threats.
            - 5+ Mana: Low volume for finishers.

            **Formatting Instructions:**
            - Use **HTML** for the 'strategy' field.
            - The 'theme' field should be a **short, punchy title** (e.g., "Elemental Mastery", "Shadow Infiltration").
            - The 'strategy' field should start with a **Theme Summary**: 2-3 sentences providing high-level context, styled with a distinct, prominent look.
            - Focus on a structured breakdown:
              1. **Welcome/Theme Summary**: A few sentences on why this commander and theme work.
              2. **Commander Context**: What are the assumed or key abilities that drive the build?
              3. **Early Game (Turns 1-3)**: Focus on setup, ramp, and disruption. Use a  emoji.
              4. **Mid Game (Turns 4-6)**: Focus on value engines and commander deployment. Use a  emoji.
              5. **Late Game (Turns 7+)**: Focus on finishers and storming off. Use a  emoji.
              6. **Key Synergies & Combos**: Highlight 3-4 specific card combinations. Use a  emoji.
            - Use **Tailwind CSS** classes (e.g., <span class="text-indigo-400 font-bold">Key Card</span>) to highlight important terms.
            - Use headers for each phase (e.g., <h4 class="text-indigo-400 font-black uppercase mb-2"> Early Game</h4>).
            5. **CRITICAL: Deck Composition Numbers**:
                - You MUST calculate specific counts for this specific commander strategies.
                - Do NOT use generic numbers (like 10/10/10). Tailor them! (e.g., A spellslinger deck might want 25 Instants and only 5 Creatures).
                - The 'functional' categories MUST sum to exactly **99** cards (assuming 1 commander).
                - The 'types' categories MUST sum to exactly **99** cards.
                - Ensure 'Lands' concept matches in both sections (e.g. if Functional Lands is 36, Type Lands should be 36).

            You MUST respond with VALID JSON strictly matching this format:
            {
                "layout": {
                    "functional": {
                        "Lands": 36, 
                        "Mana Ramp": 10,
                        "Card Draw": 10,
                        "Targeted Removal": 10,
                        "Board Wipes": 3,
                        "Synergy / Strategy": 30
                    },
                    "types": {
                        "Creatures": 30,
                        "Instants": 10,
                        "Sorceries": 10,
                        "Artifacts": 10,
                        "Enchantments": 5,
                        "Planeswalkers": 0,
                        "Lands": 34
                    }
                },
                "suggestedName": "...",
                "theme": "...",
                "strategy": "<div>...Structured HTML Content...</div>"
            }
            CRITICAL: 
            1. 'layout' is the MOST IMPORTANT field. It MUST be populated.
            2. 'functional' counts must sum to exactly 99.
            3. 'types' counts must sum to exactly 99. 
            4. Do NOT refer to yourself as "The Oracle" unless your name is explicitly "The Oracle". Use ONLY your assigned name: ${o}.
            Do NOT use markdown code blocks. Return only the JSON string.
        `;try{const x=(await this.sendMessage(e,[],m)).replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(x)}catch(p){throw console.error("AI Strategy Error:",p),new Error("Failed to generate strategy. Please try again.")}},async generatePlaystyleQuestion(e,t){if(!e)throw new Error("API Key is missing.");const r="You are an expert survey designer for Magic: The Gathering (MTG) players. Your goal is to create the most informative question to understand a user's playstyle based on their previous answers. Questions should be clear and concise, with 3-5 distinct multiple-choice answers. Avoid repeating questions. Focus on different aspects of MTG playstyles, such as deck preferences, game strategies, social interaction styles, and risk tolerance.";let n;t.length===0?n="Generate the very first question for an MTG playstyle questionnaire. This question should gauge the player's overall experience with the game, as this will help tailor subsequent questions.":t.length===1?n="Generate the second question for an MTG playstyle questionnaire. This question should build on the player's overall experience and delve into their specific preferences.":t.length===2?n="Generate the third question for an MTG playstyle questionnaire. This question should explore the player's fantasy or thematic preferences in deck building.":n=`Based on the user's previous answers, generate the next single best question to further refine their playstyle profile. Do not repeat questions.

Previous Answers:
${t.map(c=>`- ${c.question}: ${c.answer}`).join(`
`)}`;const s=`${r}

${n}

Respond with VALID JSON ONLY:
{ "question": "...", "choices": ["...", "..."] }`;try{const c=(await this.sendMessage(e,[],s)).replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(c)}catch(o){throw console.error("Gemini Question Error:",o),o}},async synthesizePlaystyle(e,t){if(!e)throw new Error("API Key is missing.");const r="You are an expert MTG coach and psychographic analyst. Your task is to analyze a player's answers and synthesize a detailed playstyle profile. The summary should be a concise paragraph. Scores must be 0-100.",n=`Analyze the following questionnaire answers and generate a detailed playstyle profile in JSON format.

${t.map(o=>`- ${o.question} -> ${o.answer}`).join(`
`)}`,s=`${r}

${n}

Respond with VALID JSON ONLY matching this schema:
        {
            "summary": "...",
            "tags": ["tag1", "tag2"],
            "scores": { "aggression": 50, "consistency": 50, "interaction": 50, "variance": 50, "comboAffinity": 50 },
            "archetypes": ["archetype1", "archetype2"]
        }`;try{const c=(await this.sendMessage(e,[],s)).replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(c)}catch(o){throw console.error("Gemini Synthesis Error:",o),new Error("Failed to synthesize profile.")}},async refinePlaystyleChat(e,t,r,n=null){if(!e)throw new Error("API Key is missing.");const s=n?.name||"The Oracle",o=n?.personality?`Personality: ${n.personality}`:"Personality: Wise, insightful, slightly magical.",c=t.length===0,f=`
            You are ${s}, an expert MTG coach conducting a "Deep Dive" interview to build a player's psychographic profile.
            ${o}

            Current Profile Summary: ${r?.summary||"New Profile"}
            Current Tags: ${r?.tags?.join(", ")||"None"}

            Instructions:
            ${c?`1. Introduce yourself as ${s}.
                   2. Explain that you want to understand their playstyle to help build better decks.
                   3. Ask the FIRST open-ended question to start the profile (e.g. "What draws you to magic?").`:`1. Analyze the user's latest input.
                   2. Formulate a conversational response (warm, insightful, matching your persona).
                   3. Ask ONE follow-up question to dig deeper into a missing or vague area.
                   4. Simultaneously, UPDATE the JSON profile based on the new information (merging with known info).`}
        `,d=t.slice(-6),h=[{role:"user",parts:[{text:f}]},...d.map(w=>({role:w.role==="user"?"user":"model",parts:[{text:w.content}]}))],m=`
            ${c?"Generate the initial greeting and first question.":"Based on the conversation, respond to the user and update the profile."}
            RETURN JSON ONLY.
        `;h.push({role:"user",parts:[{text:m}]});const p=["gemini-2.0-flash","gemini-2.5-flash","gemini-flash-latest","gemini-1.5-flash-latest","gemini-1.5-flash","gemini-1.5-pro","gemini-1.5-pro-latest"];let x=[];for(const w of p){try{const j=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${w}:generateContent?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:h,generationConfig:{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{aiResponse:{type:"STRING"},updatedProfile:{type:"OBJECT",properties:{summary:{type:"STRING"},tags:{type:"ARRAY",items:{type:"STRING"}},scores:{type:"OBJECT",properties:{aggression:{type:"NUMBER"},consistency:{type:"NUMBER"},interaction:{type:"NUMBER"},comboAffinity:{type:"NUMBER"}}},archetypes:{type:"ARRAY",items:{type:"STRING"}}},required:["summary","tags","scores","archetypes"]}},required:["aiResponse","updatedProfile"]}}})});if(j.ok){const S=(await j.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(S)return JSON.parse(S)}else{const N=await j.json();if(x.push(`${w} (Schema): ${j.status} ${N.error?.message||""}`),j.status===404||j.status===429)continue}}catch(j){x.push(`${w} (Schema Error): ${j.message}`)}try{const j=JSON.parse(JSON.stringify(h));j[j.length-1].parts[0].text+=`

CRITICAL: Respond with VALID JSON only. No markdown. Format: { aiResponse: string, updatedProfile: object }`;const N=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${w}:generateContent?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:j})});if(N.ok){const C=(await N.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(C){const A=C.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(A)}}else{const S=await N.json();x.push(`${w} (Raw): ${N.status} ${S.error?.message||""}`)}}catch(j){x.push(`${w} (Raw Error): ${j.message}`)}}throw console.error("Gemini Chat Refine Exhausted:",x),new Error(`Oracle Exhausted: ${x[0]||"Unknown error"}`)},async forgeHelperChat(e,t,r){if(!e)throw new Error("API Key is missing.");const n=`
            You are an expert fantasy writer and character designer allowing a user to "Forge" their own AI companion for Magic: The Gathering.
            Your goal is to interview the user to define their Helper's Persona.
            
            Current Draft:
            - Name: ${r?.name||"Unknown"}
            - Type: ${r?.type||"Unknown"} (e.g., Spirit, Goblin, Construct, Wizard)
            - Personality: ${r?.personality||"Unknown"} (e.g., Snarky, Wise, Aggressive)

            Instructions:
            1. Analyze the user's input.
            2. If they provided new info (name, type, personality), UPDATE the JSON draft locally.
            3. Respond in a neutral, helpful "System" tone (like a character creation menu guide).
            4. Ask for the missing fields one by one.
            5. If all fields are present, ask for confirmation.
        `,s=t.slice(-6),o=[{role:"user",parts:[{text:n}]},...s.map(h=>({role:h.role==="user"?"user":"model",parts:[{text:h.content}]}))];o.push({role:"user",parts:[{text:`
            Based on the conversation, respond to the user and update the helper draft.
            RETURN JSON ONLY.
        `}]});const f=["gemini-2.0-flash","gemini-2.5-flash","gemini-flash-latest","gemini-1.5-flash-latest","gemini-1.5-flash","gemini-1.5-pro","gemini-1.5-pro-latest"];let d=[];for(const h of f){try{const m=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${h}:generateContent?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:o,generationConfig:{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{aiResponse:{type:"STRING"},updatedDraft:{type:"OBJECT",properties:{name:{type:"STRING"},type:{type:"STRING"},personality:{type:"STRING"}},required:["name","type","personality"]}},required:["aiResponse","updatedDraft"]}}})});if(m.ok){const x=(await m.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(x)return JSON.parse(x)}else{const p=await m.json();if(d.push(`${h}: ${m.status}`),m.status===404||m.status===429)continue}}catch(m){d.push(`${h}: ${m.message}`)}try{const m=JSON.parse(JSON.stringify(o));m[m.length-1].parts[0].text+=`

CRITICAL: Respond with VALID JSON only. No markdown. Format: { aiResponse: string, updatedDraft: object }`;const p=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${h}:generateContent?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:m})});if(p.ok){const w=(await p.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(w){const j=w.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(j)}}}catch{}}throw new Error(`Forge Exhausted: ${d.join(" | ")}`)},async generateDeckSuggestions(e,t,r=null){if(!e)throw new Error("API Key is missing.");const{playstyle:n,targetRole:s}=t,o=r?.name||"Expert MTG Deck Builder",c=r?.personality?`Adopt the persona of ${o}: ${r.personality}`:"";let f="";n&&(f=`
                User Playstyle: ${n.archetypes?.join(", ")||"N/A"}. 
                Summary: ${n.summary||"N/A"}.
            `);const d=`
            You are ${o}. ${c}
            Analyze candidates for a ${s||"general"} role in the deck.
            ${f}
            
            **Mana Curve Priorities (Bell Curve):**
            Focus on CMC 1-2 for high volume, 3-4 for moderate, 5+ for finishers.
            
            **Basic Land Split Logic:**
            If targetRole is 'Lands', and you cannot fill the required count with provided candidates, suggest a 'Basic Land Split' at the END of the suggestions array.
        `,h=["gemini-2.0-flash","gemini-flash-latest","gemini-1.5-flash","gemini-1.5-flash-latest","gemini-1.5-flash-001","gemini-1.5-flash-002","gemini-1.5-pro","gemini-1.5-pro-latest"],m={role:"system",parts:[{text:d}]},p=[{role:"user",parts:[{text:`Task: ${t.instructions}

Candidates: ${JSON.stringify(t.candidates)}

IMPORTANT: You MUST respond with a VALID JSON object containing a "suggestions" array. Each suggestion needs "rating" (1-10) and "reason" (string).`}]}];let x=[];for(const w of h){try{const j=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${w}:generateContent?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({system_instruction:m,contents:p,generationConfig:{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{suggestions:{type:"ARRAY",items:{type:"OBJECT",properties:{firestoreId:{type:"STRING"},name:{type:"STRING"},count:{type:"NUMBER"},rating:{type:"NUMBER"},reason:{type:"STRING"},isBasicLand:{type:"BOOLEAN"}},required:["rating","reason"]}}},required:["suggestions"]}}})});if(j.ok){const S=(await j.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(S)return JSON.parse(S)}else{const N=await j.json();if(x.push(`${w} (Schema): ${j.status} ${N.error?.message||""}`),j.status===404||j.status===429)continue}}catch(j){x.push(`${w} (Schema Error): ${j.message}`)}try{const j=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${w}:generateContent?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({system_instruction:m,contents:[{role:"user",parts:[{text:`${p[0].parts[0].text}

You MUST respond with VALID RAW JSON format ONLY. Do not use markdown blocks.`}]}]})});if(j.ok){const S=(await j.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(S){const C=S.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(C)}}else{const N=await j.json();x.push(`${w} (Raw): ${j.status} ${N.error?.message||""}`)}}catch(j){x.push(`${w} (Raw Error): ${j.message}`)}}throw console.error("[Gemini] All models failed. Summary:",x),new Error(`Oracle Exhausted: ${x.join(" | ")}`)},async analyzeDeck(e,t,r,n=null){if(!e)throw new Error("API Key is missing.");const s=n?.name||"The Deck Doctor",o=n?.personality?`Adopt the persona of ${s}: ${n.personality}`:"Personality: Clinical, precise, but encouraging.",c=t.map(p=>`- ${p.name} (${p.type_line})`).join(`
`),f=`
            You are ${s}, an expert Magic: The Gathering deck consultant.
            ${o}
            Your goal is to Grade a deck on a scale of 0-100 and identify critical flaws.
        `,d=`
            Analyze this Commander deck for "${r}":
            
            ${c}

            **Rubric:**
            - **Synergy**: Do cards support the commander?
            - **Speed**: Is there enough ramp? Is the curve too high?
            - **Interaction**: Is there enough removal/protection?
            - **Consistency**: Is there enough card draw/tutors?

            **Task:**
            1. Calculate a Score (0-100).
            2. Rate Synergy, Speed, Interaction (0-100).
            3. List 3-5 critical "Issues" (strings).
            4. Propose up to 5 specific "Changes". For each change:
                - "remove": Exact card name to cut.
                - "add": Exact card name to add.
                - "reason": Why?

            **Response Format (VALID JSON ONLY):**
            {
                "score": 85,
                "metrics": { "synergy": 80, "speed": 70, "interaction": 60 },
                "issues": ["Not enough lands (32)", "Lack of board wipes"],
                "changes": [
                    { "remove": "Bad Card", "add": "Good Card", "reason": "Strict upgrade for mana cost." }
                ]
            }
        `,h=[{role:"user",parts:[{text:f}]},{role:"user",parts:[{text:d}]}],m=["gemini-2.0-flash","gemini-2.5-flash","gemini-flash-latest","gemini-1.5-flash"];for(const p of m)try{const x=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${p}:generateContent?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:h,generationConfig:{responseMimeType:"application/json"}})});if(x.ok){const j=(await x.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(j)return JSON.parse(j)}}catch(x){console.warn(`Deck Doctor (${p}) failed:`,x)}throw new Error("Deck Doctor failed to diagnose.")}},v0=10,rT=({isOpen:e,onClose:t,onComplete:r})=>{const{userProfile:n}=vt(),[s,o]=y.useState("selection"),[c,f]=y.useState("intro"),[d,h]=y.useState([]),[m,p]=y.useState([]),[x,w]=y.useState(null),[j,N]=y.useState(null),[S,C]=y.useState([]),[A,E]=y.useState(null),[z,P]=y.useState(""),B=y.useRef(null),[T,R]=y.useState(!1),[$,I]=y.useState(null),O=n?.settings?.helper?.name||"The Oracle";y.useEffect(()=>{e&&U()},[e]),y.useEffect(()=>{B.current?.scrollIntoView({behavior:"smooth"})},[S]);const U=()=>{o("selection"),f("intro"),p([]),C([]),E(null),I(null),N(null),P("")},D=()=>{o("quick"),f("loading"),q([])},q=async H=>{f("loading"),R(!0),I(null),N(null);try{const G=n?.settings?.geminiApiKey;if(!G)throw new Error("Gemini API Key is missing.");const ee=await Ln.generatePlaystyleQuestion(G,H);w(ee),f("question")}catch(G){console.error("Quick Wizard Error:",G),I(G.message||"Failed to summon the oracle."),o("error")}finally{R(!1)}},Z=async H=>{N(H),await new Promise(Q=>setTimeout(Q,600));const G={question:x.question,answer:H},ee=[...m,G];p(ee),ee.length>=v0?V(ee):q(ee)},V=async H=>{o("synthesis");try{const G=n?.settings?.geminiApiKey,ee=await Ln.synthesizePlaystyle(G,H);r&&await r(ee),t()}catch{I("Failed to synthesize your profile."),o("error")}},X=async()=>{o("advanced"),f("chat"),R(!0),E({summary:"Pending analysis...",tags:[],scores:{}});try{const H=n?.settings?.geminiApiKey;if(!H)throw new Error("API Key missing.");const G=await Ln.refinePlaystyleChat(H,[],A,n.settings.helper);C([{role:"model",content:G.aiResponse}])}catch(H){console.error("Intro Error:",H),C([{role:"model",content:`Greetings. I am ${O}. Let us begin our analysis.`}])}finally{R(!1)}},re=async()=>{if(!z.trim())return;const H={role:"user",content:z},G=[...S,H];C(G),P(""),R(!0);try{const ee=n?.settings?.geminiApiKey;if(!ee)throw new Error("API Key missing.");const Q=await Ln.refinePlaystyleChat(ee,G,A,n.settings.helper);E(Q.updatedProfile),C(ae=>[...ae,{role:"model",content:Q.aiResponse}])}catch(ee){console.error("Chat Error:",ee),C(Q=>[...Q,{role:"model",content:"My connection to the leyline flickered. Please repeat that."}])}finally{R(!1)}},fe=async()=>{o("synthesis"),A&&r&&await r(A),t()},Y=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),re())};return e?a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:a.jsxs("div",{className:"relative w-full max-w-6xl h-[85vh] bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden flex flex-col",children:[a.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-20 p-2 bg-black/20 rounded-full hover:bg-black/40 transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s==="selection"&&a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 space-y-12 animate-fade-in",children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("h2",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400",children:"Choose Your Path"}),a.jsx("p",{className:"text-gray-400 text-lg max-w-2xl",children:"How shall we determine your magical signature?"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-4xl",children:[a.jsxs("button",{onClick:D,className:"group relative bg-gray-800/50 hover:bg-indigo-900/20 border border-gray-700 hover:border-indigo-500 rounded-2xl p-8 text-left transition-all duration-300 transform hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/10",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:a.jsx("svg",{className:"w-32 h-32 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M13 2L3 14h9v8l10-12h-9l9-8z"})})}),a.jsxs("div",{className:"relative z-10 space-y-4",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-500/20 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),a.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-indigo-300 transition-colors",children:"Quick Setup"}),a.jsxs("p",{className:"text-gray-400 group-hover:text-gray-300",children:["Answer ",v0," rapid-fire questions to generate a baseline profile. Best for getting started quickly."]}),a.jsxs("div",{className:"pt-4 flex items-center text-sm font-bold text-indigo-400 uppercase tracking-wider",children:["Start Assessment ",a.jsx("span",{className:"ml-2 group-hover:ml-3 transition-all",children:""})]})]})]}),a.jsxs("button",{onClick:X,className:"group relative bg-gray-800/50 hover:bg-purple-900/20 border border-gray-700 hover:border-purple-500 rounded-2xl p-8 text-left transition-all duration-300 transform hover:-translate-y-1 hover:shadow-2xl hover:shadow-purple-500/10",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:a.jsx("svg",{className:"w-32 h-32 text-purple-500",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),a.jsxs("div",{className:"relative z-10 space-y-4",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),a.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-purple-300 transition-colors",children:"Deep Dive"}),a.jsx("p",{className:"text-gray-400 group-hover:text-gray-300",children:"Have a conversation with the Oracle. Iterate on your preferences in real-time for a highly tailored profile."}),a.jsxs("div",{className:"pt-4 flex items-center text-sm font-bold text-purple-400 uppercase tracking-wider",children:["Enter The Sanctum ",a.jsx("span",{className:"ml-2 group-hover:ml-3 transition-all",children:""})]})]})]})]}),a.jsx("div",{className:"text-gray-500 text-sm",children:"You can always retake this assessment later from your profile settings."})]}),s==="quick"&&a.jsxs("div",{className:"flex-1 flex flex-col h-full bg-gray-900",children:[a.jsxs("div",{className:"h-16 border-b border-gray-800 flex items-center justify-between px-8 bg-gray-900/50",children:[a.jsxs("h3",{className:"text-lg font-bold text-white flex items-center",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mr-3"}),"Quick Assessment"]}),a.jsxs("div",{className:"text-sm font-mono text-indigo-400",children:["Q",m.length+1," / ",v0]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 flex flex-col items-center justify-center",children:c==="loading"?a.jsxs("div",{className:"flex flex-col items-center space-y-4 animate-pulse",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-indigo-300 font-medium",children:"Consulting the archives..."})]}):x&&a.jsxs("div",{className:"max-w-2xl w-full space-y-8 animate-fade-in-up",children:[a.jsx("div",{className:"w-full h-1 bg-gray-800 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-500 ease-out",style:{width:`${m.length/v0*100}%`}})}),a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white leading-relaxed text-center",children:x.question}),a.jsx("div",{className:"grid grid-cols-1 gap-3",children:x.choices.map((H,G)=>{const ee=j===H;return a.jsxs("button",{onClick:()=>Z(H),disabled:j!==null,className:`
                                                            group flex items-center p-4 rounded-xl border transition-all duration-200 text-left
                                                            ${ee?"bg-indigo-600/20 border-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.3)]":"bg-gray-800 border-gray-700 hover:bg-gray-750 hover:border-gray-600"}
                                                            ${j&&!ee?"opacity-50":""}
                                                        `,children:[a.jsx("span",{className:`
                                                            w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-4 transition-colors
                                                            ${ee?"bg-indigo-500 text-white":"bg-gray-700 text-gray-400 group-hover:bg-gray-600"}
                                                        `,children:String.fromCharCode(65+G)}),a.jsx("span",{className:`text-lg transition-colors ${ee?"text-white":"text-gray-300 group-hover:text-white"}`,children:H})]},G)})})]})})]}),s==="advanced"&&a.jsxs("div",{className:"flex-1 flex h-full",children:[a.jsxs("div",{className:"flex-1 flex flex-col bg-gray-900 border-r border-gray-800 w-2/3",children:[a.jsxs("div",{className:"h-16 border-b border-gray-800 flex items-center px-6 bg-gray-900/80 backdrop-blur-sm z-10",children:[a.jsx("div",{className:"w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center mr-3",children:a.jsx("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-bold",children:O}),a.jsx("p",{className:"text-xs text-purple-400",children:"Deep Dive Analysis"})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[S.map((H,G)=>a.jsx("div",{className:`flex ${H.role==="user"?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`
                                            max-w-[80%] rounded-2xl p-4 text-sm leading-relaxed
                                            ${H.role==="user"?"bg-purple-600 text-white rounded-br-none":"bg-gray-800 text-gray-200 border border-gray-700 rounded-bl-none"}
                                        `,children:H.content})},G)),T&&a.jsx("div",{className:"flex justify-start",children:a.jsxs("div",{className:"bg-gray-800 rounded-2xl p-4 border border-gray-700 rounded-bl-none flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce"}),a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce delay-100"}),a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce delay-200"})]})}),a.jsx("div",{ref:B})]}),a.jsx("div",{className:"p-4 border-t border-gray-800 bg-gray-900",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:z,onChange:H=>P(H.target.value),onKeyDown:Y,placeholder:"Describe your playstyle...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500",disabled:T}),a.jsx("button",{onClick:re,disabled:T||!z.trim(),className:"bg-purple-600 hover:bg-purple-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 rounded-xl font-bold transition-colors",children:"Send"})]})})]}),a.jsxs("div",{className:"w-1/3 bg-gray-950 p-6 overflow-y-auto border-l border-gray-800 hidden md:block",children:[a.jsxs("h3",{className:"text-white font-bold mb-6 flex items-center",children:[a.jsx("svg",{className:"w-5 h-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Live Profile Summary"]}),A?a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-4 border border-gray-800",children:[a.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Analysis"}),a.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:A.summary||"Gathering data..."})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Dominant Traits"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:A.tags?.length>0?A.tags.map((H,G)=>a.jsx("span",{className:"px-2 py-1 rounded bg-purple-500/10 text-purple-400 border border-purple-500/20 text-xs font-medium",children:H},G)):a.jsx("span",{className:"text-gray-600 text-xs italic",children:"Pending..."})})]}),A.scores&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1",children:"Psychographics"}),Object.entries(A.scores).map(([H,G])=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1 capitalize",children:[a.jsx("span",{children:H.replace(/([A-Z])/g," $1").trim()}),a.jsxs("span",{children:[G,"%"]})]}),a.jsx("div",{className:"h-1.5 w-full bg-gray-800 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-indigo-500",style:{width:`${G}%`}})})]},H))]}),a.jsxs("div",{className:"pt-6 border-t border-gray-800",children:[a.jsx("button",{onClick:fe,className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white rounded-lg font-bold shadow-lg hover:shadow-green-500/20 transition-all",children:"Finalize Profile"}),a.jsx("p",{className:"text-center text-xs text-gray-500 mt-2",children:"Click whenever you feel the profile is accurate."})]})]}):a.jsxs("div",{className:"text-center py-10 text-gray-600",children:[a.jsx("div",{className:"animate-pulse mb-2 text-4xl",children:""}),a.jsx("p",{className:"text-sm",children:"The Oracle is listening..."})]})]})]}),s==="synthesis"&&a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-6 bg-gray-900 p-8",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-t-2 border-b-2 border-green-500"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"h-10 w-10 bg-green-500/20 rounded-full animate-pulse"})})]}),a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Finalizing your Grimoire..."}),a.jsx("p",{className:"text-gray-400",children:"Saving your magical identity to the archives."})]}),s==="error"&&a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-4 bg-gray-900 text-center p-8",children:[a.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Something went wrong"}),a.jsx("p",{className:"text-red-300 max-w-md mx-auto",children:$}),a.jsx("button",{onClick:U,className:"mt-6 bg-gray-800 hover:bg-gray-700 text-white py-3 px-8 rounded-lg transition-colors border border-gray-600",children:"Try Again"})]})]})}):null},UU=({isOpen:e,onClose:t,profile:r,onRetake:n,userImage:s})=>{if(!e)return null;if(!r)return a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:a.jsxs("div",{className:"relative w-full max-w-md bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden flex flex-col p-8 text-center space-y-6",children:[a.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-10 p-2 bg-black/20 rounded-full hover:bg-black/40 transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mx-auto overflow-hidden",children:s?a.jsx("img",{src:s,alt:"User",className:"w-full h-full object-cover"}):a.jsx("svg",{className:"w-10 h-10 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No Playstyle Found"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"You haven't taken the assessment yet. Discover your magical identity and get better recommendations!"})]}),a.jsx("button",{onClick:n,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-indigo-500/25 transition-all transform hover:-translate-y-0.5",children:"Start Assessment"})]})});const{summary:o,tags:c,scores:f,archetypes:d}=r;return a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:a.jsxs("div",{className:"relative w-full max-w-6xl bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-10 p-2 bg-black/20 rounded-full hover:bg-black/40 transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsxs("div",{className:"flex flex-col md:flex-row h-full",children:[a.jsxs("div",{className:"w-full md:w-80 flex-shrink-0 bg-gray-800/50 p-8 border-b md:border-b-0 md:border-r border-gray-700 flex flex-col items-center text-center",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg mb-6 ring-4 ring-gray-800 overflow-hidden",children:s?a.jsx("img",{src:s,alt:"User",className:"w-full h-full object-cover"}):a.jsx("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Your Playstyle"}),a.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:c&&c.map((h,m)=>a.jsx("span",{className:"px-3 py-1 bg-indigo-500/20 text-indigo-300 text-xs font-bold uppercase rounded-full border border-indigo-500/30",children:h},m))}),a.jsx("button",{onClick:n,className:"mt-auto w-full py-3 px-4 bg-gray-700 hover:bg-gray-600 text-gray-200 rounded-lg text-sm font-bold transition-all border border-gray-600 hover:border-gray-500",children:"Retake Assessment"})]}),a.jsxs("div",{className:"flex-1 p-8 overflow-y-auto",children:[a.jsxs("section",{className:"mb-8",children:[a.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Analysis Summary"}),a.jsxs("p",{className:"text-gray-300 leading-relaxed text-lg font-serif italic border-l-4 border-indigo-500 pl-4 bg-gray-800/30 py-4 pr-4 rounded-r",children:['"',o,'"']})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-4",children:"Psychographic Profile"}),a.jsx("div",{className:"space-y-4",children:f&&Object.entries(f).map(([h,m])=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-gray-400 capitalize",children:h.replace(/([A-Z])/g," $1").trim()}),a.jsxs("span",{className:"text-white font-mono",children:[m,"/100"]})]}),a.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${FU(m)}`,style:{width:`${m}%`}})})]},h))})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-4",children:"Recommended Archetypes"}),a.jsx("div",{className:"grid grid-cols-1 gap-3",children:d&&d.map((h,m)=>a.jsxs("div",{className:"bg-gray-800/80 p-4 rounded-lg border border-gray-700 flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 shadow-[0_0_8px_rgba(74,222,128,0.5)]"}),a.jsx("span",{className:"text-gray-200 font-medium",children:h})]},m))})]})]})]})]})]})})};function FU(e){return e>75?"bg-green-500":e>50?"bg-blue-500":e>25?"bg-yellow-500":"bg-red-500"}const HU=[{id:"alpha_tester",label:"Alpha Tester",icon:"",description:"Restoring balance to the multiverse."},{id:"bug_hunter",label:"Bug Hunter",icon:"",description:"Tracking down pests in the code."},{id:"architect",label:"Architect",icon:"",description:"Building the foundation of the future."},{id:"spark_ignited",label:"Spark Ignited",icon:"",description:"First to walk the planes."},{id:"data_scryer",label:"Data Scryer",icon:"",description:"Analyzing the meta streams."},{id:"stress_tester",label:"Stress Tester",icon:"",description:"Breaking things so we can fix them."},{id:"feedback_loop",label:"Feedback Loop",icon:"",description:"Iterating towards perfection."},{id:"void_gazer",label:"Void Gazer",icon:"",description:"Staring into the console logs."}],WU=({isOpen:e,onClose:t,currentBadgeId:r,onSelect:n,isMaster:s})=>e?a.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto w-full h-full flex items-center justify-center md:pl-[250px]",children:[a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm transition-opacity",onClick:t}),a.jsxs("div",{className:"relative bg-gray-900 rounded-2xl border border-gray-700 shadow-2xl w-full max-w-2xl mx-4 overflow-hidden animate-scale-in",children:[a.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-900/50",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[a.jsx("span",{className:"text-amber-500",children:""})," Customize Your Badge"]}),a.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Select a badge to display next to your profile."})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto custom-scrollbar",children:a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:HU.filter(o=>o.id!=="architect"||s).map(o=>a.jsxs("button",{onClick:()=>n(o),className:`flex items-center gap-4 p-4 rounded-xl border text-left transition-all ${r===o.id?"bg-indigo-900/30 border-indigo-500 ring-1 ring-indigo-500/50":"bg-gray-800/30 border-gray-700 hover:bg-gray-800 hover:border-gray-600"}`,children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-800 flex items-center justify-center text-2xl shadow-inner border border-gray-700",children:o.icon}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-bold ${r===o.id?"text-indigo-300":"text-white"}`,children:o.label}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o.description})]})]},o.id))})}),a.jsx("div",{className:"p-4 bg-gray-800/50 border-t border-gray-800 text-center text-xs text-gray-500",children:"Thank you for being an early supporter of MTG-Forge."})]})]}):null,GU=()=>{const e=yi(),{currentUser:t,userProfile:r,logout:n,updateSettings:s,refreshUserProfile:o,uploadProfilePicture:c}=vt(),f=e.pathname==="/",[d,h]=y.useState(!1),[m,p]=y.useState(!1),[x,w]=y.useState(!1),[j,N]=y.useState(!1),[S,C]=y.useState(!1),[A,E]=y.useState(!1),z=Te.useRef(null);Te.useEffect(()=>{const U=D=>{S&&!D.target.closest("#user-menu-button")&&!D.target.closest("#user-menu-dropdown")&&C(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[S]);const P=async U=>{console.log("Saving new playstyle:",U),await s({playstyle:U}),await o(),w(!0)},B=async U=>{const D=U.target.files[0];if(D){console.log("[Navbar] Starting file upload:",D.name,D.size,D.type);try{E(!0),console.log("[Navbar] Calling uploadProfilePicture...");const q=await c(D);console.log("[Navbar] Upload successful! Photo URL:",q),alert("Profile picture updated successfully!")}catch(q){console.error("[Navbar] Upload failed:",q),alert(`Upload failed: ${q.message}`)}finally{console.log("[Navbar] Upload complete, resetting state"),E(!1),C(!1)}}},T=()=>{z.current?.click()},R=t?.uid==="Kyrlwz6G6NWICCEPYbXtFfyLzWI3",$=R?"FORGE MASTER":t?.email||"",I=R?{icon:""}:r?.settings?.badge||{icon:""},O=async()=>{try{await n(),window.location.href="/"}catch(U){console.error("Logout failed",U)}};return a.jsxs(a.Fragment,{children:[a.jsx("nav",{className:"bg-gray-950/30 backdrop-blur-2xl border-b border-white/5 sticky top-0 z-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex items-center justify-between h-16",children:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsx("div",{className:"flex-shrink-0 flex items-center gap-3",children:a.jsxs(kt,{to:"/",className:"flex items-center gap-2 transform hover:scale-105 transition-transform",children:[a.jsx("img",{src:"/logo.png",alt:"MTG Forge Logo",className:"h-10 w-auto"}),a.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent hidden sm:inline-block",children:"MTG-Forge"}),a.jsx("span",{className:"bg-orange-500/10 border border-orange-500/30 text-orange-400 text-[9px] font-bold px-1.5 py-0.5 rounded ml-1 animate-pulse",children:"ALPHA"})]})}),a.jsx("div",{className:"hidden lg:ml-10 lg:flex lg:items-baseline lg:space-x-4",children:f?a.jsxs(a.Fragment,{children:[a.jsx("a",{href:"#features",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Features"}),a.jsx(kt,{to:"/about",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"About"})]}):a.jsxs(a.Fragment,{children:[a.jsx(kt,{to:"/dashboard",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Dashboard"}),a.jsx(kt,{to:"/collection",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Collection"}),a.jsx(kt,{to:"/wishlist",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Wishlist"}),a.jsx(kt,{to:"/decks",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Decks"}),a.jsx(kt,{to:"/sets",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Sets"})]})}),a.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[t&&a.jsxs("button",{onClick:()=>h(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-1.5 rounded-lg text-sm font-bold transition-colors shadow-lg shadow-indigo-500/20 flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),a.jsx("span",{className:"hidden sm:inline",children:"Add Card"})]}),t?a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>N(!0),className:`flex items-center justify-center w-8 h-8 rounded-full border transition-all group relative ${R?"bg-amber-500/20 border-amber-500/50 hover:bg-amber-500/30 shadow-[0_0_10px_rgba(245,158,11,0.3)]":"bg-indigo-900/30 border-indigo-500/30 hover:bg-indigo-900/50"}`,title:R?"Data Architect":"Click to change badge",children:[a.jsx("span",{className:"text-base",children:I.icon}),R&&a.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-amber-500"})]})]}),a.jsx("span",{className:`text-sm font-medium hidden sm:inline-block ${R?"text-amber-400 font-bold tracking-wider":"text-gray-300 max-w-[150px] truncate"}`,children:$}),a.jsx("button",{id:"user-menu-button",onClick:()=>C(!S),className:"text-gray-400 hover:text-white transition-colors focus:outline-none",children:t.photoURL?a.jsx("img",{src:t.photoURL,alt:"Profile",className:"h-8 w-8 rounded-full object-cover ring-2 ring-transparent hover:ring-indigo-500 transition-all border border-gray-600"}):a.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-500/20 border border-indigo-500/50 flex items-center justify-center ring-2 ring-transparent hover:ring-indigo-500 transition-all",children:a.jsx("span",{className:"text-xs font-bold text-indigo-300",children:t.email?t.email[0].toUpperCase():"U"})})})]}),S&&a.jsxs("div",{id:"user-menu-dropdown",className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg py-1 border border-gray-700 ring-1 ring-black ring-opacity-5 animate-fade-in-up",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-gray-700",children:[a.jsx("p",{className:"text-sm text-white font-bold",children:"Account"}),a.jsx("p",{className:"text-xs text-gray-400 truncate",children:t.email})]}),a.jsx("button",{onClick:T,disabled:A,className:"block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white",children:A?"Uploading...":"Upload Photo"}),a.jsx("input",{type:"file",ref:z,onChange:B,className:"hidden",accept:"image/*"}),a.jsx("div",{className:"border-t border-gray-700 my-1"}),a.jsx("button",{onClick:()=>{C(!1),w(!0)},className:"block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white",children:"Playstyle Profile"}),a.jsx(kt,{to:"/settings",onClick:()=>C(!1),className:"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white",children:"Settings"}),a.jsx("div",{className:"border-t border-gray-700 my-1"}),a.jsx("button",{onClick:()=>{C(!1),O()},className:"block w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-700 hover:text-red-300",children:"Sign Out"})]})]}):a.jsx(kt,{to:"/login",className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-bold transition-colors shadow-lg shadow-indigo-500/20",children:"Sign In"})]})]})})})}),a.jsx(b2,{isOpen:d,onClose:()=>h(!1)}),a.jsx(rT,{isOpen:m,onClose:()=>p(!1),onComplete:P}),a.jsx(UU,{isOpen:x,onClose:()=>w(!1),profile:r?.settings?.playstyle,userImage:t?.photoURL,onRetake:()=>{w(!1),p(!0)}}),a.jsx(WU,{isOpen:j,onClose:()=>N(!1),currentBadgeId:r?.settings?.badge?.id||"alpha_tester",isMaster:t?.uid==="Kyrlwz6G6NWICCEPYbXtFfyLzWI3",onSelect:async U=>{await s({badge:U}),await o(),N(!1)}}),!f&&a.jsx("div",{className:"md:hidden fixed bottom-0 left-0 w-full bg-gray-900 border-t border-gray-800 z-50 pb-safe",children:a.jsxs("div",{className:"flex justify-around items-center h-16",children:[a.jsxs(kt,{to:"/dashboard",className:`flex flex-col items-center justify-center w-full h-full ${e.pathname==="/dashboard"?"text-indigo-400":"text-gray-400 hover:text-gray-200"}`,children:[a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),a.jsx("span",{className:"text-[10px] mt-1 uppercase tracking-wide",children:"Home"})]}),a.jsxs(kt,{to:"/collection",className:`flex flex-col items-center justify-center w-full h-full ${e.pathname==="/collection"?"text-indigo-400":"text-gray-400 hover:text-gray-200"}`,children:[a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),a.jsx("span",{className:"text-[10px] mt-1 uppercase tracking-wide",children:"Collection"})]}),a.jsxs(kt,{to:"/wishlist",className:`flex flex-col items-center justify-center w-full h-full ${e.pathname==="/wishlist"?"text-orange-400":"text-gray-400 hover:text-gray-200"}`,children:[a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),a.jsx("span",{className:"text-[10px] mt-1 uppercase tracking-wide",children:"Wishlist"})]}),a.jsxs(kt,{to:"/decks",className:`flex flex-col items-center justify-center w-full h-full ${e.pathname.startsWith("/decks")?"text-indigo-400":"text-gray-400 hover:text-gray-200"}`,children:[a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),a.jsx("span",{className:"text-[10px] mt-1 uppercase tracking-wide",children:"Decks"})]}),a.jsxs(kt,{to:"/sets",className:`flex flex-col items-center justify-center w-full h-full ${e.pathname.startsWith("/sets")?"text-indigo-400":"text-gray-400 hover:text-gray-200"}`,children:[a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),a.jsx("span",{className:"text-[10px] mt-1 uppercase tracking-wide",children:"Sets"})]}),a.jsxs(kt,{to:"/settings",className:`flex flex-col items-center justify-center w-full h-full ${e.pathname==="/settings"?"text-indigo-400":"text-gray-400 hover:text-gray-200"}`,children:[a.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),a.jsx("span",{className:"text-[10px] mt-1 uppercase tracking-wide",children:"Settings"})]})]})})]})},w2=({isOpen:e,onClose:t})=>e?qr.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md transition-opacity",onClick:t}),a.jsxs("div",{className:"bg-gray-900 border border-white/10 rounded-3xl w-full max-w-3xl relative z-10 shadow-2xl overflow-hidden animate-fade-in-up flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-6 border-b border-white/5 bg-gradient-to-r from-indigo-900 to-gray-900 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-xl text-indigo-400",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:"Binder Management Guide"}),a.jsx("p",{className:"text-gray-400 text-xs",children:"Organize your collection like a pro."})]})]}),a.jsx("button",{onClick:t,className:"w-8 h-8 rounded-full bg-black/20 flex items-center justify-center text-gray-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-8",children:[a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center text-xs",children:"1"}),"Two Ways to Build"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gray-800/40 p-4 rounded-2xl border border-white/5",children:[a.jsx("h4",{className:"text-white font-bold mb-1 flex items-center gap-2",children:" Manual Binder"}),a.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:"Classic storage. You drag and drop exactly which cards go inside. Great for mirroring your physical binders."})]}),a.jsxs("div",{className:"bg-indigo-900/10 p-4 rounded-2xl border border-indigo-500/20",children:[a.jsx("h4",{className:"text-indigo-300 font-bold mb-1 flex items-center gap-2",children:" Smart Binder"}),a.jsx("p",{className:"text-xs text-indigo-200/60 leading-relaxed",children:'Live automation. You set rules (like "Price > $10"), and the binder automatically grabs matching cards from your collection.'})]})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500/20 text-purple-400 flex items-center justify-center text-xs",children:"2"}),"AI Smart Creator"]}),a.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-4",children:"Don't want to build rules manually? Just describe what you want in plain English!"}),a.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-indigo-500/30 mb-4",children:[a.jsx("p",{className:"font-mono text-xs text-gray-400 mb-2",children:"Try prompts like:"}),a.jsxs("ul",{className:"space-y-2 text-sm text-indigo-300 font-medium",children:[a.jsx("li",{children:'"All my red goblins over $5"'}),a.jsx("li",{children:'"Cards to trade that I have duplicates of"'}),a.jsx("li",{children:'"High value commanders not in any decks"'})]})]}),a.jsx("p",{className:"text-xs text-gray-500",children:"The AI detects price, color, type, quantity, rarity, and even whether a card is currently used in a deck."})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-green-500/20 text-green-400 flex items-center justify-center text-xs",children:"3"}),"Advanced Logic (In Deck, Quantity)"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gray-800/40 p-3 rounded-xl border border-white/5",children:[a.jsx("h5",{className:"text-green-400 font-bold text-xs uppercase mb-1",children:"In Deck Status"}),a.jsxs("p",{className:"text-xs text-gray-400",children:['Filter cards based on usage. Create a "Trade Binder" by excluding cards that are currently ',a.jsx("span",{className:"text-white font-mono",children:"In Deck = True"}),"."]})]}),a.jsxs("div",{className:"bg-gray-800/40 p-3 rounded-xl border border-white/5",children:[a.jsx("h5",{className:"text-green-400 font-bold text-xs uppercase mb-1",children:"Quantity Control"}),a.jsxs("p",{className:"text-xs text-gray-400",children:["Filter by how many copies you own. Great for finding ",a.jsx("span",{className:"text-white font-mono",children:"Count > 4"})," (Duplicates)."]})]})]})]}),a.jsxs("section",{className:"bg-gradient-to-br from-indigo-900/40 to-purple-900/40 p-6 rounded-3xl border border-indigo-500/20",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:" Pro Tips"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"text-xl",children:""}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-white font-bold text-xs uppercase tracking-wider",children:"Custom Style"}),a.jsx("p",{className:"text-xs text-gray-300",children:"Use any Hex Code color and pick from hundreds of icons (including MTG Mana Symbols) to make your binder pop."})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"text-xl",children:""}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-white font-bold text-xs uppercase tracking-wider",children:"Live Updates"}),a.jsx("p",{className:"text-xs text-gray-300",children:"Smart Binders are alive. When you add a new card to your collection that matches the rules, it instantly appears in the binder."})]})]})]})]})]}),a.jsx("div",{className:"p-6 bg-gray-950 border-t border-white/5 flex justify-end",children:a.jsx("button",{onClick:t,className:"px-8 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl transition-all font-black text-sm shadow-xl shadow-indigo-900/20 active:scale-95",children:"Got it!"})})]})]}),document.body):null,nT=({isOpen:e,onClose:t})=>e?qr.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md transition-opacity",onClick:t}),a.jsxs("div",{className:"bg-gray-900 border border-white/10 rounded-3xl w-full max-w-3xl relative z-10 shadow-2xl overflow-hidden animate-fade-in-up flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-6 border-b border-white/5 bg-gradient-to-r from-purple-900 to-gray-900 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-purple-500/20 rounded-xl text-purple-400",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:"Access Control Guide"}),a.jsx("p",{className:"text-gray-400 text-xs",children:"Everything you need to know about Pods & Permissions."})]})]}),a.jsx("button",{onClick:t,className:"w-8 h-8 rounded-full bg-black/20 flex items-center justify-center text-gray-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-8",children:[a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center text-xs",children:"1"}),'What is a "Pod"?']}),a.jsxs("p",{className:"text-gray-400 text-sm leading-relaxed mb-4",children:['In Magic: The Gathering, a "Pod" is your local playgroup. On Forge, it represents your list of ',a.jsx("strong",{className:"text-white",children:"Trusted Connections"}),". Linking accounts with someone in your Pod allows you to share digital resources instantly."]}),a.jsxs("div",{className:"bg-indigo-900/20 p-4 rounded-xl border border-indigo-500/20 flex items-center gap-3",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsx("p",{className:"text-xs text-indigo-300 font-bold",children:"Pro Tip: Only add people you actually know and trust to your Pod."})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500/20 text-purple-400 flex items-center justify-center text-xs",children:"2"}),"Permission Levels"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gray-800/40 p-4 rounded-2xl border border-white/5 hover:border-blue-500/30 transition-all",children:[a.jsx("span",{className:"text-[10px] font-black uppercase text-blue-400 tracking-wider mb-2 block",children:"Default"}),a.jsx("h4",{className:"text-white font-bold text-lg mb-4",children:"Viewer"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-center gap-2 text-xs text-gray-300",children:[a.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"View Private Decks"]}),a.jsxs("li",{className:"flex items-center gap-2 text-xs text-gray-300",children:[a.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"View Collection"]}),a.jsxs("li",{className:"flex items-center gap-2 text-xs text-gray-300",children:[a.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Download/Clone Decks"]}),a.jsxs("li",{className:"flex items-center gap-2 text-xs text-gray-500 opacity-60",children:[a.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Edit Decks"]}),a.jsxs("li",{className:"flex items-center gap-2 text-xs text-gray-500 opacity-60",children:[a.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Change Settings"]})]})]}),a.jsxs("div",{className:"bg-gray-800/40 p-4 rounded-2xl border border-white/5 hover:border-purple-500/30 transition-all",children:[a.jsx("span",{className:"text-[10px] font-black uppercase text-purple-400 tracking-wider mb-2 block",children:"Advanced"}),a.jsx("h4",{className:"text-white font-bold text-lg mb-4",children:"Editor"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-center gap-2 text-xs text-gray-300",children:[a.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Everything in Viewer"]}),a.jsxs("li",{className:"flex items-center gap-2 text-xs text-white font-bold",children:[a.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Add/Remove Cards ",a.jsx("span",{className:"font-normal text-gray-400 ml-1",children:"from Decks"})]}),a.jsxs("li",{className:"flex items-center gap-2 text-xs text-green-300",children:[a.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Add Cards to Collection"]}),a.jsxs("li",{className:"flex items-center gap-2 text-xs text-gray-500 opacity-60",children:[a.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Delete Decks"]}),a.jsxs("li",{className:"flex items-center gap-2 text-xs text-gray-500 opacity-60",children:[a.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Manage Account"]})]})]})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-green-500/20 text-green-400 flex items-center justify-center text-xs",children:"3"}),"Shared Collections"]}),a.jsx("p",{className:"text-gray-400 text-sm leading-relaxed mb-4",children:`When building a deck, you can choose to see cards from your friends' collections. This is perfect for brewing "Team Decks" or borrowing cards you don't own.`}),a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-xl border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-xs font-bold text-white ring-2 ring-indigo-500",children:"You"}),a.jsx("div",{className:"h-px bg-gray-600 w-8"}),a.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-xs font-bold text-gray-400",children:"P2"}),a.jsx("div",{className:"h-px bg-gray-600 w-8"}),a.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-xs font-bold text-gray-400",children:"P3"})]}),a.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Collaborative Deck Building"})]})]})]}),a.jsx("div",{className:"p-6 bg-gray-950 border-t border-white/5 flex justify-end",children:a.jsx("button",{onClick:t,className:"px-8 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl transition-all font-black text-sm shadow-xl shadow-indigo-900/20 active:scale-95",children:"Got it, thanks!"})})]})]}),document.body):null;var VU=Object.defineProperty,bm=Object.getOwnPropertySymbols,aT=Object.prototype.hasOwnProperty,iT=Object.prototype.propertyIsEnumerable,oS=(e,t,r)=>t in e?VU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Lb=(e,t)=>{for(var r in t||(t={}))aT.call(t,r)&&oS(e,r,t[r]);if(bm)for(var r of bm(t))iT.call(t,r)&&oS(e,r,t[r]);return e},Db=(e,t)=>{var r={};for(var n in e)aT.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&bm)for(var n of bm(e))t.indexOf(n)<0&&iT.call(e,n)&&(r[n]=e[n]);return r};var pl;(e=>{const t=class it{constructor(d,h,m,p){if(this.version=d,this.errorCorrectionLevel=h,this.modules=[],this.isFunction=[],d<it.MIN_VERSION||d>it.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let x=[];for(let j=0;j<this.size;j++)x.push(!1);for(let j=0;j<this.size;j++)this.modules.push(x.slice()),this.isFunction.push(x.slice());this.drawFunctionPatterns();const w=this.addEccAndInterleave(m);if(this.drawCodewords(w),p==-1){let j=1e9;for(let N=0;N<8;N++){this.applyMask(N),this.drawFormatBits(N);const S=this.getPenaltyScore();S<j&&(p=N,j=S),this.applyMask(N)}}s(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(d,h){const m=e.QrSegment.makeSegments(d);return it.encodeSegments(m,h)}static encodeBinary(d,h){const m=e.QrSegment.makeBytes(d);return it.encodeSegments([m],h)}static encodeSegments(d,h,m=1,p=40,x=-1,w=!0){if(!(it.MIN_VERSION<=m&&m<=p&&p<=it.MAX_VERSION)||x<-1||x>7)throw new RangeError("Invalid value");let j,N;for(j=m;;j++){const E=it.getNumDataCodewords(j,h)*8,z=c.getTotalBits(d,j);if(z<=E){N=z;break}if(j>=p)throw new RangeError("Data too long")}for(const E of[it.Ecc.MEDIUM,it.Ecc.QUARTILE,it.Ecc.HIGH])w&&N<=it.getNumDataCodewords(j,E)*8&&(h=E);let S=[];for(const E of d){r(E.mode.modeBits,4,S),r(E.numChars,E.mode.numCharCountBits(j),S);for(const z of E.getData())S.push(z)}s(S.length==N);const C=it.getNumDataCodewords(j,h)*8;s(S.length<=C),r(0,Math.min(4,C-S.length),S),r(0,(8-S.length%8)%8,S),s(S.length%8==0);for(let E=236;S.length<C;E^=253)r(E,8,S);let A=[];for(;A.length*8<S.length;)A.push(0);return S.forEach((E,z)=>A[z>>>3]|=E<<7-(z&7)),new it(j,h,A,x)}getModule(d,h){return 0<=d&&d<this.size&&0<=h&&h<this.size&&this.modules[h][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let m=0;m<this.size;m++)this.setFunctionModule(6,m,m%2==0),this.setFunctionModule(m,6,m%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),h=d.length;for(let m=0;m<h;m++)for(let p=0;p<h;p++)m==0&&p==0||m==0&&p==h-1||m==h-1&&p==0||this.drawAlignmentPattern(d[m],d[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const h=this.errorCorrectionLevel.formatBits<<3|d;let m=h;for(let x=0;x<10;x++)m=m<<1^(m>>>9)*1335;const p=(h<<10|m)^21522;s(p>>>15==0);for(let x=0;x<=5;x++)this.setFunctionModule(8,x,n(p,x));this.setFunctionModule(8,7,n(p,6)),this.setFunctionModule(8,8,n(p,7)),this.setFunctionModule(7,8,n(p,8));for(let x=9;x<15;x++)this.setFunctionModule(14-x,8,n(p,x));for(let x=0;x<8;x++)this.setFunctionModule(this.size-1-x,8,n(p,x));for(let x=8;x<15;x++)this.setFunctionModule(8,this.size-15+x,n(p,x));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let m=0;m<12;m++)d=d<<1^(d>>>11)*7973;const h=this.version<<12|d;s(h>>>18==0);for(let m=0;m<18;m++){const p=n(h,m),x=this.size-11+m%3,w=Math.floor(m/3);this.setFunctionModule(x,w,p),this.setFunctionModule(w,x,p)}}drawFinderPattern(d,h){for(let m=-4;m<=4;m++)for(let p=-4;p<=4;p++){const x=Math.max(Math.abs(p),Math.abs(m)),w=d+p,j=h+m;0<=w&&w<this.size&&0<=j&&j<this.size&&this.setFunctionModule(w,j,x!=2&&x!=4)}}drawAlignmentPattern(d,h){for(let m=-2;m<=2;m++)for(let p=-2;p<=2;p++)this.setFunctionModule(d+p,h+m,Math.max(Math.abs(p),Math.abs(m))!=1)}setFunctionModule(d,h,m){this.modules[h][d]=m,this.isFunction[h][d]=!0}addEccAndInterleave(d){const h=this.version,m=this.errorCorrectionLevel;if(d.length!=it.getNumDataCodewords(h,m))throw new RangeError("Invalid argument");const p=it.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][h],x=it.ECC_CODEWORDS_PER_BLOCK[m.ordinal][h],w=Math.floor(it.getNumRawDataModules(h)/8),j=p-w%p,N=Math.floor(w/p);let S=[];const C=it.reedSolomonComputeDivisor(x);for(let E=0,z=0;E<p;E++){let P=d.slice(z,z+N-x+(E<j?0:1));z+=P.length;const B=it.reedSolomonComputeRemainder(P,C);E<j&&P.push(0),S.push(P.concat(B))}let A=[];for(let E=0;E<S[0].length;E++)S.forEach((z,P)=>{(E!=N-x||P>=j)&&A.push(z[E])});return s(A.length==w),A}drawCodewords(d){if(d.length!=Math.floor(it.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let h=0;for(let m=this.size-1;m>=1;m-=2){m==6&&(m=5);for(let p=0;p<this.size;p++)for(let x=0;x<2;x++){const w=m-x,N=(m+1&2)==0?this.size-1-p:p;!this.isFunction[N][w]&&h<d.length*8&&(this.modules[N][w]=n(d[h>>>3],7-(h&7)),h++)}}s(h==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let h=0;h<this.size;h++)for(let m=0;m<this.size;m++){let p;switch(d){case 0:p=(m+h)%2==0;break;case 1:p=h%2==0;break;case 2:p=m%3==0;break;case 3:p=(m+h)%3==0;break;case 4:p=(Math.floor(m/3)+Math.floor(h/2))%2==0;break;case 5:p=m*h%2+m*h%3==0;break;case 6:p=(m*h%2+m*h%3)%2==0;break;case 7:p=((m+h)%2+m*h%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[h][m]&&p&&(this.modules[h][m]=!this.modules[h][m])}}getPenaltyScore(){let d=0;for(let x=0;x<this.size;x++){let w=!1,j=0,N=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[x][S]==w?(j++,j==5?d+=it.PENALTY_N1:j>5&&d++):(this.finderPenaltyAddHistory(j,N),w||(d+=this.finderPenaltyCountPatterns(N)*it.PENALTY_N3),w=this.modules[x][S],j=1);d+=this.finderPenaltyTerminateAndCount(w,j,N)*it.PENALTY_N3}for(let x=0;x<this.size;x++){let w=!1,j=0,N=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[S][x]==w?(j++,j==5?d+=it.PENALTY_N1:j>5&&d++):(this.finderPenaltyAddHistory(j,N),w||(d+=this.finderPenaltyCountPatterns(N)*it.PENALTY_N3),w=this.modules[S][x],j=1);d+=this.finderPenaltyTerminateAndCount(w,j,N)*it.PENALTY_N3}for(let x=0;x<this.size-1;x++)for(let w=0;w<this.size-1;w++){const j=this.modules[x][w];j==this.modules[x][w+1]&&j==this.modules[x+1][w]&&j==this.modules[x+1][w+1]&&(d+=it.PENALTY_N2)}let h=0;for(const x of this.modules)h=x.reduce((w,j)=>w+(j?1:0),h);const m=this.size*this.size,p=Math.ceil(Math.abs(h*20-m*10)/m)-1;return s(0<=p&&p<=9),d+=p*it.PENALTY_N4,s(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,h=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let m=[6];for(let p=this.size-7;m.length<d;p-=h)m.splice(1,0,p);return m}}static getNumRawDataModules(d){if(d<it.MIN_VERSION||d>it.MAX_VERSION)throw new RangeError("Version number out of range");let h=(16*d+128)*d+64;if(d>=2){const m=Math.floor(d/7)+2;h-=(25*m-10)*m-55,d>=7&&(h-=36)}return s(208<=h&&h<=29648),h}static getNumDataCodewords(d,h){return Math.floor(it.getNumRawDataModules(d)/8)-it.ECC_CODEWORDS_PER_BLOCK[h.ordinal][d]*it.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let h=[];for(let p=0;p<d-1;p++)h.push(0);h.push(1);let m=1;for(let p=0;p<d;p++){for(let x=0;x<h.length;x++)h[x]=it.reedSolomonMultiply(h[x],m),x+1<h.length&&(h[x]^=h[x+1]);m=it.reedSolomonMultiply(m,2)}return h}static reedSolomonComputeRemainder(d,h){let m=h.map(p=>0);for(const p of d){const x=p^m.shift();m.push(0),h.forEach((w,j)=>m[j]^=it.reedSolomonMultiply(w,x))}return m}static reedSolomonMultiply(d,h){if(d>>>8||h>>>8)throw new RangeError("Byte out of range");let m=0;for(let p=7;p>=0;p--)m=m<<1^(m>>>7)*285,m^=(h>>>p&1)*d;return s(m>>>8==0),m}finderPenaltyCountPatterns(d){const h=d[1];s(h<=this.size*3);const m=h>0&&d[2]==h&&d[3]==h*3&&d[4]==h&&d[5]==h;return(m&&d[0]>=h*4&&d[6]>=h?1:0)+(m&&d[6]>=h*4&&d[0]>=h?1:0)}finderPenaltyTerminateAndCount(d,h,m){return d&&(this.finderPenaltyAddHistory(h,m),h=0),h+=this.size,this.finderPenaltyAddHistory(h,m),this.finderPenaltyCountPatterns(m)}finderPenaltyAddHistory(d,h){h[0]==0&&(d+=this.size),h.pop(),h.unshift(d)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function r(f,d,h){if(d<0||d>31||f>>>d)throw new RangeError("Value out of range");for(let m=d-1;m>=0;m--)h.push(f>>>m&1)}function n(f,d){return(f>>>d&1)!=0}function s(f){if(!f)throw new Error("Assertion error")}const o=class tr{constructor(d,h,m){if(this.mode=d,this.numChars=h,this.bitData=m,h<0)throw new RangeError("Invalid argument");this.bitData=m.slice()}static makeBytes(d){let h=[];for(const m of d)r(m,8,h);return new tr(tr.Mode.BYTE,d.length,h)}static makeNumeric(d){if(!tr.isNumeric(d))throw new RangeError("String contains non-numeric characters");let h=[];for(let m=0;m<d.length;){const p=Math.min(d.length-m,3);r(parseInt(d.substring(m,m+p),10),p*3+1,h),m+=p}return new tr(tr.Mode.NUMERIC,d.length,h)}static makeAlphanumeric(d){if(!tr.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let h=[],m;for(m=0;m+2<=d.length;m+=2){let p=tr.ALPHANUMERIC_CHARSET.indexOf(d.charAt(m))*45;p+=tr.ALPHANUMERIC_CHARSET.indexOf(d.charAt(m+1)),r(p,11,h)}return m<d.length&&r(tr.ALPHANUMERIC_CHARSET.indexOf(d.charAt(m)),6,h),new tr(tr.Mode.ALPHANUMERIC,d.length,h)}static makeSegments(d){return d==""?[]:tr.isNumeric(d)?[tr.makeNumeric(d)]:tr.isAlphanumeric(d)?[tr.makeAlphanumeric(d)]:[tr.makeBytes(tr.toUtf8ByteArray(d))]}static makeEci(d){let h=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)r(d,8,h);else if(d<16384)r(2,2,h),r(d,14,h);else if(d<1e6)r(6,3,h),r(d,21,h);else throw new RangeError("ECI assignment value out of range");return new tr(tr.Mode.ECI,0,h)}static isNumeric(d){return tr.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return tr.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,h){let m=0;for(const p of d){const x=p.mode.numCharCountBits(h);if(p.numChars>=1<<x)return 1/0;m+=4+x+p.bitData.length}return m}static toUtf8ByteArray(d){d=encodeURI(d);let h=[];for(let m=0;m<d.length;m++)d.charAt(m)!="%"?h.push(d.charCodeAt(m)):(h.push(parseInt(d.substring(m+1,m+3),16)),m+=2);return h}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let c=o;e.QrSegment=o})(pl||(pl={}));(e=>{(t=>{const r=class{constructor(s,o){this.ordinal=s,this.formatBits=o}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),t.Ecc=r})(e.QrCode||(e.QrCode={}))})(pl||(pl={}));(e=>{(t=>{const r=class{constructor(s,o){this.modeBits=s,this.numBitsCharCount=o}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),t.Mode=r})(e.QrSegment||(e.QrSegment={}))})(pl||(pl={}));var Ec=pl;var qU={L:Ec.QrCode.Ecc.LOW,M:Ec.QrCode.Ecc.MEDIUM,Q:Ec.QrCode.Ecc.QUARTILE,H:Ec.QrCode.Ecc.HIGH},sT=128,oT="L",lT="#FFFFFF",cT="#000000",uT=!1,dT=1,KU=4,YU=0,XU=.1;function fT(e,t=0){const r=[];return e.forEach(function(n,s){let o=null;n.forEach(function(c,f){if(!c&&o!==null){r.push(`M${o+t} ${s+t}h${f-o}v1H${o+t}z`),o=null;return}if(f===n.length-1){if(!c)return;o===null?r.push(`M${f+t},${s+t} h1v1H${f+t}z`):r.push(`M${o+t},${s+t} h${f+1-o}v1H${o+t}z`);return}c&&o===null&&(o=f)})}),r.join("")}function hT(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((s,o)=>o<t.x||o>=t.x+t.w?s:!1))}function JU(e,t,r,n){if(n==null)return null;const s=e.length+r*2,o=Math.floor(t*XU),c=s/t,f=(n.width||o)*c,d=(n.height||o)*c,h=n.x==null?e.length/2-f/2:n.x*c,m=n.y==null?e.length/2-d/2:n.y*c,p=n.opacity==null?1:n.opacity;let x=null;if(n.excavate){let j=Math.floor(h),N=Math.floor(m),S=Math.ceil(f+h-j),C=Math.ceil(d+m-N);x={x:j,y:N,w:S,h:C}}const w=n.crossOrigin;return{x:h,y:m,h:d,w:f,excavation:x,opacity:p,crossOrigin:w}}function QU(e,t){return t!=null?Math.max(Math.floor(t),0):e?KU:YU}function mT({value:e,level:t,minVersion:r,includeMargin:n,marginSize:s,imageSettings:o,size:c,boostLevel:f}){let d=Te.useMemo(()=>{const j=(Array.isArray(e)?e:[e]).reduce((N,S)=>(N.push(...Ec.QrSegment.makeSegments(S)),N),[]);return Ec.QrCode.encodeSegments(j,qU[t],r,void 0,void 0,f)},[e,t,r,f]);const{cells:h,margin:m,numCells:p,calculatedImageSettings:x}=Te.useMemo(()=>{let w=d.getModules();const j=QU(n,s),N=w.length+j*2,S=JU(w,c,j,o);return{cells:w,margin:j,numCells:N,calculatedImageSettings:S}},[d,c,o,n,s]);return{qrcode:d,margin:m,cells:h,numCells:p,calculatedImageSettings:x}}var ZU=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),eF=Te.forwardRef(function(t,r){const n=t,{value:s,size:o=sT,level:c=oT,bgColor:f=lT,fgColor:d=cT,includeMargin:h=uT,minVersion:m=dT,boostLevel:p,marginSize:x,imageSettings:w}=n,N=Db(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:S}=N,C=Db(N,["style"]),A=w?.src,E=Te.useRef(null),z=Te.useRef(null),P=Te.useCallback(q=>{E.current=q,typeof r=="function"?r(q):r&&(r.current=q)},[r]),[B,T]=Te.useState(!1),{margin:R,cells:$,numCells:I,calculatedImageSettings:O}=mT({value:s,level:c,minVersion:m,boostLevel:p,includeMargin:h,marginSize:x,imageSettings:w,size:o});Te.useEffect(()=>{if(E.current!=null){const q=E.current,Z=q.getContext("2d");if(!Z)return;let V=$;const X=z.current,re=O!=null&&X!==null&&X.complete&&X.naturalHeight!==0&&X.naturalWidth!==0;re&&O.excavation!=null&&(V=hT($,O.excavation));const fe=window.devicePixelRatio||1;q.height=q.width=o*fe;const Y=o/I*fe;Z.scale(Y,Y),Z.fillStyle=f,Z.fillRect(0,0,I,I),Z.fillStyle=d,ZU?Z.fill(new Path2D(fT(V,R))):$.forEach(function(H,G){H.forEach(function(ee,Q){ee&&Z.fillRect(Q+R,G+R,1,1)})}),O&&(Z.globalAlpha=O.opacity),re&&Z.drawImage(X,O.x+R,O.y+R,O.w,O.h)}}),Te.useEffect(()=>{T(!1)},[A]);const U=Lb({height:o,width:o},S);let D=null;return A!=null&&(D=Te.createElement("img",{src:A,key:A,style:{display:"none"},onLoad:()=>{T(!0)},ref:z,crossOrigin:O?.crossOrigin})),Te.createElement(Te.Fragment,null,Te.createElement("canvas",Lb({style:U,height:o,width:o,ref:P,role:"img"},C)),D)});eF.displayName="QRCodeCanvas";var gT=Te.forwardRef(function(t,r){const n=t,{value:s,size:o=sT,level:c=oT,bgColor:f=lT,fgColor:d=cT,includeMargin:h=uT,minVersion:m=dT,boostLevel:p,title:x,marginSize:w,imageSettings:j}=n,N=Db(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:S,cells:C,numCells:A,calculatedImageSettings:E}=mT({value:s,level:c,minVersion:m,boostLevel:p,includeMargin:h,marginSize:w,imageSettings:j,size:o});let z=C,P=null;j!=null&&E!=null&&(E.excavation!=null&&(z=hT(C,E.excavation)),P=Te.createElement("image",{href:j.src,height:E.h,width:E.w,x:E.x+S,y:E.y+S,preserveAspectRatio:"none",opacity:E.opacity,crossOrigin:E.crossOrigin}));const B=fT(z,S);return Te.createElement("svg",Lb({height:o,width:o,viewBox:`0 0 ${A} ${A}`,ref:r,role:"img"},N),!!x&&Te.createElement("title",null,x),Te.createElement("path",{fill:f,d:`M0,0 h${A}v${A}H0z`,shapeRendering:"crispEdges"}),Te.createElement("path",{fill:d,d:B,shapeRendering:"crispEdges"}),P)});gT.displayName="QRCodeSVG";const tF=({isOpen:e,onClose:t})=>{if(!e)return null;const r="http://mtg-forge/share/heir-to-the-hysteria-x26l";return qr.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md transition-opacity",onClick:t}),a.jsxs("div",{className:"relative z-10 w-full max-w-md bg-gray-900 border border-white/10 rounded-3xl overflow-hidden shadow-2xl animate-fade-in-up",children:[a.jsxs("div",{className:"p-6 pb-2 text-center",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Share Deck"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Scan to view deck list instantly"})]}),a.jsxs("div",{className:"p-8 flex flex-col items-center justify-center space-y-6",children:[a.jsx("div",{className:"bg-white p-4 rounded-3xl shadow-[0_0_40px_rgba(255,255,255,0.1)]",children:a.jsx(gT,{value:r,size:200,level:"H",includeMargin:!1})}),a.jsxs("div",{className:"w-full text-center space-y-3",children:[a.jsxs("div",{className:"bg-black/40 border border-white/5 rounded-xl p-3 flex items-center gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-500 mb-1 text-left",children:"Share Link"}),a.jsx("p",{className:"text-xs text-indigo-300 font-mono truncate text-left select-all",children:r})]}),a.jsx("button",{onClick:()=>navigator.clipboard.writeText(r),className:"p-2 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",title:"Copy",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Anyone with this link can view the full deck list and statistics."})]})]}),a.jsx("div",{className:"p-4 border-t border-white/5 bg-gray-950/50 flex justify-center",children:a.jsx("button",{onClick:()=>window.open(r,"_blank"),className:"text-indigo-400 hover:text-white text-sm font-bold transition-colors",children:"Open Link in New Tab "})})]})]}),document.body)},rF=()=>{const[e,t]=y.useState(null);return a.jsxs("section",{id:"features",className:"py-20 bg-gray-900 relative",children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-20 animate-fade-in-up",children:[a.jsx("span",{className:"text-indigo-400 font-bold tracking-widest uppercase text-sm mb-2 block",children:"Why Choose The Forge?"}),a.jsx("h2",{className:"text-3xl md:text-5xl font-black text-white mb-6",children:"More Than Just A Deck Builder"}),a.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto text-lg",children:"Experience the next generation of Magic: The Gathering tools. Powered by AI, designed for every player."})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12 mb-24",children:[a.jsxs("div",{className:"flex-1 space-y-6 animate-fade-in-left",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-2xl flex items-center justify-center mb-4 text-blue-400",children:a.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),a.jsx("h3",{className:"text-3xl font-bold text-white",children:"Advanced Collection Tracking"}),a.jsx("p",{className:"text-gray-400 text-lg leading-relaxed",children:'Track every card you own, from foils to promos. Filter by set, rarity, color identity, and price. Manage your "Wishlist" separate from your main binder.'}),a.jsxs("ul",{className:"space-y-3 text-gray-300",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Real-time TCGPlayer Pricing"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"CSV Export & Import"]})]})]}),a.jsx("div",{className:"flex-1 rounded-2xl overflow-hidden shadow-2xl border border-gray-800 animate-fade-in-right",children:a.jsx("div",{className:"aspect-video bg-gray-800 relative flex items-center justify-center",children:a.jsx("img",{src:"/images/features/collection-dashboard.jpg",alt:"Collection Dashboard showing card grid",className:"w-full h-full object-cover rounded-2xl opacity-90 hover:opacity-100 transition-opacity"})})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row-reverse items-center gap-12 mb-24",children:[a.jsxs("div",{className:"flex-1 space-y-6 animate-fade-in-right",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-500/20 rounded-2xl flex items-center justify-center mb-4 text-indigo-400",children:a.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),a.jsx("h3",{className:"text-3xl font-bold text-white",children:"Connect & Organize"}),a.jsx("p",{className:"text-gray-400 text-lg leading-relaxed",children:`Go beyond solo collection. Link accounts with your playgroup ("Pods") to browse friends' trades instantly. Share your builds with the world via dynamic QR Codes.`}),a.jsxs("div",{className:"space-y-4 relative",children:[a.jsx("p",{className:"absolute -top-6 right-0 text-[10px] text-gray-500 font-medium uppercase tracking-wider animate-pulse",children:"Click to preview guides"}),a.jsxs("button",{onClick:()=>t("smart"),className:"w-full bg-gray-800/50 p-4 rounded-xl border border-white/5 flex flex-col items-start gap-2 hover:bg-gray-800 hover:border-indigo-500/30 transition-all cursor-pointer group text-left relative overflow-hidden",children:[a.jsxs("h4",{className:"text-white font-bold mb-1 flex items-center gap-2 group-hover:text-indigo-400 transition-colors",children:[a.jsx("span",{className:"text-xl",children:""})," Smart Binders"]}),a.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors pr-6",children:"AI automatically sorts cards into binders based on your rules."}),a.jsx("div",{className:"absolute bottom-3 right-3 opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0 text-indigo-500",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:()=>t("pods"),className:"bg-gray-800/50 p-4 rounded-xl border border-white/5 text-left hover:bg-gray-800 hover:border-purple-500/30 transition-all cursor-pointer group relative overflow-hidden",children:[a.jsxs("h4",{className:"text-white font-bold mb-1 flex items-center gap-2 group-hover:text-purple-400 transition-colors",children:[a.jsx("span",{className:"text-xl",children:""})," Pods"]}),a.jsx("p",{className:"text-xs text-gray-400 group-hover:text-gray-300 transition-colors pr-4",children:"Link with friends for real-time trading."}),a.jsx("div",{className:"absolute bottom-3 right-3 opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0 text-purple-500",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})})]}),a.jsxs("button",{onClick:()=>t("qr"),className:"bg-gray-800/50 p-4 rounded-xl border border-white/5 text-left hover:bg-gray-800 hover:border-blue-500/30 transition-all cursor-pointer group relative overflow-hidden",children:[a.jsxs("h4",{className:"text-white font-bold mb-1 flex items-center gap-2 group-hover:text-blue-400 transition-colors",children:[a.jsx("span",{className:"text-xl",children:""})," QR Share"]}),a.jsx("p",{className:"text-xs text-gray-400 group-hover:text-gray-300 transition-colors pr-4",children:"Showcase deck lists instantly."}),a.jsx("div",{className:"absolute bottom-3 right-3 opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0 text-blue-500",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})})]})]})]})]}),a.jsx("div",{className:"flex-1 rounded-2xl overflow-hidden shadow-2xl border border-gray-800 animate-fade-in-left",children:a.jsx("div",{className:"aspect-video bg-gray-800 relative flex items-center justify-center p-8",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full h-full opacity-80",children:[a.jsxs("div",{className:"bg-indigo-900/30 rounded-xl border border-indigo-500/20 p-4 flex flex-col items-center justify-center",children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("div",{className:"text-xs font-bold text-indigo-300 uppercase",children:"Smart Binder"})]}),a.jsxs("div",{className:"bg-purple-900/30 rounded-xl border border-purple-500/20 p-4 flex flex-col items-center justify-center",children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("div",{className:"text-xs font-bold text-purple-300 uppercase",children:"Pod Trade"})]}),a.jsxs("div",{className:"bg-blue-900/30 rounded-xl border border-blue-500/20 p-4 flex flex-col items-center justify-center",children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("div",{className:"text-xs font-bold text-blue-300 uppercase",children:"QR Share"})]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-xl border border-white/5 p-4 flex flex-col items-center justify-center",children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:"Friend List"})]})]})})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12 mb-24",children:[a.jsxs("div",{className:"flex-1 space-y-6 animate-fade-in-left",children:[a.jsx("div",{className:"w-16 h-16 bg-purple-500/20 rounded-2xl flex items-center justify-center mb-4 text-purple-400",children:a.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),a.jsx("h3",{className:"text-3xl font-bold text-white",children:"AI-Powered Strategy"}),a.jsx("p",{className:"text-gray-400 text-lg leading-relaxed",children:"Don't just build listsbuild strategies. Our Gemini-integrated AI analyzes your commander and suggests synergies, mana curves, and win conditions tailored to your playstyle."}),a.jsxs("ul",{className:"space-y-3 text-gray-300",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Automated Theme Suggestions"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Intelligent Land Base Generation"]})]})]}),a.jsx("div",{className:"flex-1 rounded-2xl overflow-hidden shadow-2xl border border-gray-800 group animate-fade-in-right",children:a.jsx("div",{className:"aspect-video bg-gray-800 relative flex items-center justify-center",children:a.jsx("img",{src:"/images/features/ai-strategy-modal.png",alt:"AI Strategy Modal showing detailed deck analysis",className:"w-full h-full object-cover rounded-2xl opacity-90 group-hover:opacity-100 transition-opacity"})})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row-reverse items-center gap-12 mb-24",children:[a.jsxs("div",{className:"flex-1 space-y-6 animate-fade-in-right",children:[a.jsx("div",{className:"w-16 h-16 bg-pink-500/20 rounded-2xl flex items-center justify-center mb-4 text-pink-400",children:a.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-3xl font-bold text-white",children:"Custom AI Personas"}),a.jsxs("p",{className:"text-gray-400 text-lg leading-relaxed",children:['Forge your own assistant. Define their personality, tone, and expertise. Whether you need a ruthless "Deity" to optimize your curve or a chaotic "Goblin" to suggest fun jank, your AI companion adapts to ',a.jsx("em",{children:"your"})," goals."]})]}),a.jsx("div",{className:"flex-1 rounded-2xl overflow-hidden shadow-2xl border border-gray-800 animate-fade-in-left",children:a.jsx("div",{className:"aspect-video bg-gray-800 relative flex items-center justify-center",children:a.jsx("img",{src:"/images/features/custom-ai-persona.png",alt:"Custom AI Persona creation interface",className:"w-full h-full object-cover rounded-2xl opacity-90 hover:opacity-100 transition-opacity"})})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12",children:[a.jsxs("div",{className:"flex-1 space-y-6 animate-fade-in-left",children:[a.jsx("div",{className:"w-16 h-16 bg-orange-500/20 rounded-2xl flex items-center justify-center mb-4 text-orange-400",children:a.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsx("h3",{className:"text-3xl font-bold text-white",children:"Format Flexible Design"}),a.jsxs("p",{className:"text-gray-400 text-lg leading-relaxed",children:["Built mainly for Commander, but ready for everything else. Full support for ",a.jsx("strong",{children:"Standard"}),", ",a.jsx("strong",{children:"Modern"}),", and ",a.jsx("strong",{children:"Pioneer"})," is built into the core."]}),a.jsxs("ul",{className:"space-y-3 text-gray-300",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Commander Partners & Backgrounds"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Sideboard & Companion Support"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Future Format Updates Planned"]})]})]}),a.jsx("div",{className:"flex-1 rounded-2xl overflow-hidden shadow-2xl border border-gray-800 animate-fade-in-right",children:a.jsx("div",{className:"aspect-video bg-gray-800 relative flex items-center justify-center",children:a.jsx("img",{src:"/images/features/commander-centric-design.png",alt:"My Decks view showing commanders",className:"w-full h-full object-cover rounded-2xl opacity-90 hover:opacity-100 transition-opacity"})})})]})]}),a.jsx(w2,{isOpen:e==="smart",onClose:()=>t(null)}),a.jsx(nT,{isOpen:e==="pods",onClose:()=>t(null)}),a.jsx(tF,{isOpen:e==="qr",onClose:()=>t(null)})]})},nF=()=>a.jsxs("div",{className:"flex flex-col min-h-screen",children:[a.jsx("div",{className:"bg-gradient-to-r from-orange-600 via-red-600 to-orange-600 text-white text-center py-2 px-4 shadow-lg z-50 relative animate-pulse-slow",children:a.jsxs("p",{className:"font-bold text-sm tracking-wide flex items-center justify-center gap-2",children:[a.jsx("span",{className:"text-lg",children:""}),"ALPHA TEST - Feature Complete but Experimental",a.jsx("span",{className:"text-lg",children:""})]})}),a.jsxs("div",{className:"relative bg-gray-900 border-b border-gray-800",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 z-10"}),a.jsx("img",{src:"/MTG-Forge_Logo_Background_80.png",alt:"Background",className:"w-full h-full object-cover object-center absolute inset-0 z-0 opacity-80"})]}),a.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 md:py-32 flex flex-col items-center text-center",children:[a.jsxs("h1",{className:"text-4xl md:text-6xl font-extrabold tracking-tight text-white mb-6",children:[a.jsx("span",{className:"block",children:"Master Your Collection"}),a.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-500",children:"Build Powerful Decks"})]}),a.jsx("p",{className:"mt-4 max-w-2xl text-xl text-gray-300 mx-auto",children:"The ultimate tool for Magic: The Gathering players. Organize your cards, analyze your mana curves, and playtest your strategies in one modern interface."}),a.jsxs("div",{className:"mt-10 flex gap-4 justify-center",children:[a.jsx(kt,{to:"/dashboard",className:"px-8 py-3 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white font-bold text-lg transition-all shadow-lg shadow-indigo-500/30 transform hover:-translate-y-1",children:"Get Started"}),a.jsx("button",{className:"px-8 py-3 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-200 font-semibold text-lg border border-gray-700 transition-all",children:"Learn More"})]})]})]}),a.jsx(rF,{}),a.jsx("footer",{className:"bg-black py-12 border-t border-gray-900 mt-auto",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 text-center",children:a.jsx("p",{className:"text-gray-500",children:" 2025 MTG-Forge. Not affiliated with Wizards of the Coast."})})})]}),aF=({isOpen:e,onClose:t})=>{const[r,n]=y.useState("Loading bugs...");return y.useEffect(()=>{e&&Fe.getBugs().then(s=>n(s)).catch(s=>n("Failed to load bug list: "+s.message))},[e]),e?a.jsx("div",{className:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-900/75 transition-opacity","aria-hidden":"true",onClick:t}),a.jsxs("div",{className:"inline-block align-bottom bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full border border-gray-700 relative z-10",children:[a.jsx("div",{className:"bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:a.jsx("div",{className:"sm:flex sm:items-start",children:a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl leading-6 font-medium text-white",id:"modal-title",children:"Known Bugs & Tasks"}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"mt-2 bg-gray-900 rounded p-4 h-[60vh] overflow-y-auto font-mono text-sm text-gray-300 whitespace-pre-wrap",children:r})]})})}),a.jsxs("div",{className:"bg-gray-800 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse border-t border-gray-700",children:[a.jsx("a",{href:"https://discord.gg/mtgforge",target:"_blank",rel:"noreferrer",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm",children:"Report New Bug (Discord)"}),a.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-600 shadow-sm px-4 py-2 bg-gray-700 text-base font-medium text-gray-300 hover:bg-gray-600 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:t,children:"Close"})]})]})]})}):null};function xf(e=null){const[t,r]=y.useState([]),[n,s]=y.useState(!0),[o,c]=y.useState(null),{currentUser:f}=vt(),d=async()=>{if(f){s(!0);try{const h=e?`/decks?userId=${e}`:"/decks",m=await Fe.get(h);r(m),c(null)}catch(h){console.error("Error fetching decks:",h),c(h)}finally{s(!1)}}};return y.useEffect(()=>{if(!f){r([]),s(!1);return}d()},[f,e]),{decks:t,loading:n,error:o,refresh:d}}const Tv={W:{name:"White",flavor:"A single spark of light can banish a world of shadows.",theme:"Absolute Order",pips:["W"],bg:"bg-yellow-600"},U:{name:"Blue",flavor:"The mind is the only battlefield where victory is absolute.",theme:"Infinite Inquiry",pips:["U"],bg:"bg-blue-600"},B:{name:"Black",flavor:"Power at any cost, for greatness is written in blood.",theme:"Unrestricted Power",pips:["B"],bg:"bg-gray-800"},R:{name:"Red",flavor:"Do not fear the fire; fear the heart that commands it.",theme:"Chaotic Passion",pips:["R"],bg:"bg-red-600"},G:{name:"Green",flavor:"The forest does not ask for permission to grow.",theme:"Primal Growth",pips:["G"],bg:"bg-green-600"},C:{name:"Colorless",flavor:"Existence is a fleeting dream in the eyes of the silent.",theme:"The Great Void",pips:["C"],bg:"bg-gray-500"},WU:{name:"Azorius Senate",flavor:"Justice is blind, but she has a very long reach.",theme:"Bureaucratic Control",pips:["W","U"],bg:"bg-gradient-to-br from-yellow-300 to-blue-500"},UB:{name:"House Dimir",flavor:"The finest secrets are those that kill the ones who keep them.",theme:"Subterfuge & Infiltration",pips:["U","B"],bg:"bg-gradient-to-br from-blue-600 to-black"},BR:{name:"Cult of Rakdos",flavor:"Entertain us, or become the entertainment.",theme:"Carnival of Carnage",pips:["B","R"],bg:"bg-gradient-to-br from-black to-red-600"},RG:{name:"Gruul Clans",flavor:"Not for city-dwellers. Not for the weak. Only for the wild.",theme:"Primal Destruction",pips:["R","G"],bg:"bg-gradient-to-br from-red-500 to-green-600"},WG:{name:"Selesnya Conclave",flavor:"One voice is a whisper; the Conclave is a roar.",theme:"Collective Harmony",pips:["W","G"],bg:"bg-gradient-to-br from-green-500 to-yellow-200"},WB:{name:"Orzhov Syndicate",flavor:"Even death is no excuse for a breach of contract.",theme:"Indentured Eternity",pips:["W","B"],bg:"bg-gradient-to-br from-gray-200 to-gray-900"},BG:{name:"Golgari Swarm",flavor:"Every grave is a garden if you wait long enough.",theme:"Cycles of Rot",pips:["B","G"],bg:"bg-gradient-to-br from-gray-900 to-green-600"},UG:{name:"Simic Combine",flavor:"Nature is a rough draft; we are the final edit.",theme:"Biological Evolution",pips:["U","G"],bg:"bg-gradient-to-br from-green-400 to-blue-500"},UR:{name:"Izzet League",flavor:"If it doesn't explode, you aren't trying hard enough.",theme:"Volatile Genius",pips:["U","R"],bg:"bg-gradient-to-br from-blue-500 to-red-500"},WR:{name:"Boros Legion",flavor:"First to the fight, last to the fall.",theme:"Tactical Aggression",pips:["W","R"],bg:"bg-gradient-to-br from-red-600 to-yellow-200"},WUG:{name:"Bant",flavor:"The sigil of the sun protects those who stand together.",theme:"Knightly Order",pips:["W","U","G"],bg:"bg-gradient-to-r from-green-400 via-yellow-200 to-blue-400"},WUB:{name:"Esper",flavor:"Perfection is not a goal; it is a requirement.",theme:"Obsidian Logic",pips:["W","U","B"],bg:"bg-gradient-to-r from-yellow-200 via-blue-400 to-black"},UBR:{name:"Grixis",flavor:"A wasteland of power where only the cruelest thrive.",theme:"Ruthless Tyranny",pips:["U","B","R"],bg:"bg-gradient-to-r from-blue-600 via-black to-red-600"},BRG:{name:"Jund",flavor:"In this world, you are either the dragon or the meal.",theme:"Apex Predation",pips:["B","R","G"],bg:"bg-gradient-to-r from-black via-red-600 to-green-600"},WRG:{name:"Naya",flavor:"Where the mountains wake and the earth trembles.",theme:"Primal Majesty",pips:["W","R","G"],bg:"bg-gradient-to-r from-red-500 via-green-500 to-yellow-200"},WBG:{name:"Abzan",flavor:"We do not break; we simply outlast.",theme:"Eternal Endurance",pips:["W","B","G"],bg:"bg-gradient-to-r from-yellow-100 via-black to-green-600"},WUR:{name:"Jeskai",flavor:"The wind carries the strike; the mind guides the bolt.",theme:"Disciplined Spark",pips:["W","U","R"],bg:"bg-gradient-to-r from-blue-500 via-red-500 to-yellow-100"},UBG:{name:"Sultai",flavor:"Power is measured in gold and the bones of the fallen.",theme:"Opulent Decay",pips:["U","B","G"],bg:"bg-gradient-to-r from-black via-green-600 to-blue-600"},WBR:{name:"Mardu",flavor:"Victory is the only law worth following.",theme:"Relentless Conquest",pips:["W","B","R"],bg:"bg-gradient-to-r from-red-600 via-yellow-100 to-black"},URG:{name:"Temur",flavor:"The wild does not think; it reacts with ice and fire.",theme:"Elemental Instinct",pips:["U","R","G"],bg:"bg-gradient-to-r from-green-500 via-blue-500 to-red-500"},UBRG:{name:"Glint-Eye",flavor:"Order is a cage; we have chosen to break the locks.",theme:"Chaotic Adaptation",pips:["U","B","R","G"],bg:"bg-indigo-900"},WBRG:{name:"Dune-Brood",flavor:"When the logic of the mind fails, the instinct of the swarm prevails.",theme:"Sandless Conquest",pips:["W","B","R","G"],bg:"bg-orange-900"},WURG:{name:"Ink-Treader",flavor:"To touch one is to touch the whole of the world.",theme:"Radiant Reflection",pips:["W","U","R","G"],bg:"bg-sky-900"},WUBG:{name:"Witch-Maw",flavor:"There is a hunger beneath the earth that knows no fire.",theme:"Eldritch Growth",pips:["W","U","B","G"],bg:"bg-emerald-900"},WUBR:{name:"Yore-Tiller",flavor:"The past is a weapon we sharpen for the future.",theme:"Relentless History",pips:["W","U","B","R"],bg:"bg-slate-900"},WUBRG:{name:"WUBRG",flavor:"The full spectrum of power, bound in a single hand.",theme:"The Convergence",pips:["W","U","B","R","G"],bg:"bg-gradient-to-r from-yellow-500 via-blue-500 to-green-500"}},Td=e=>{if(!e)return Tv.C;const t={W:0,U:1,B:2,R:3,G:4,C:-1};let r=Array.isArray(e)?e:e.split("");const s=[...new Set(r)].filter(o=>t[o]!==void 0&&o!=="C").sort((o,c)=>t[o]-t[c]).join("");return Tv[s]||Tv.C},iF=({onOpenModal:e})=>a.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/40 to-purple-900/40 border border-indigo-500/20 rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group",children:[a.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-pink-500/10 rounded-full blur-2xl group-hover:bg-pink-500/20 transition-all duration-700"}),a.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-500/20 rounded-xl flex items-center justify-center text-xl shadow-inner",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-white leading-tight",children:"Support the Forge"}),a.jsx("p",{className:"text-[10px] text-indigo-400 font-bold uppercase tracking-widest",children:"Community Project"})]})]}),a.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed",children:"MTG-Forge is built by enthusiasts, for enthusiasts. Help us keep the AI Architect powered up!"}),a.jsxs("button",{onClick:e,className:"w-full py-3 bg-white hover:bg-indigo-50 text-indigo-950 font-black rounded-xl transition-all transform hover:-translate-y-1 shadow-lg shadow-white/5 flex items-center justify-center gap-2 group/btn",children:["Donate Now",a.jsx("svg",{className:"w-4 h-4 transition-transform group-hover/btn:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]})]}),sF=()=>{const e=Un(),{addToast:t}=rn(),[r,n]=y.useState([]),[s,o]=y.useState(0),[c,f]=y.useState(!0);y.useEffect(()=>{(async()=>{try{const p=await Gr.fetchRelationships(),x=p.filter(j=>j.status==="accepted");n(x);const w=p.filter(j=>j.status==="pending"&&j.direction==="incoming");o(w.length)}catch(p){console.error("Widget fetch failed",p)}finally{f(!1)}})()},[]);const d=(m,p)=>{m.preventDefault(),m.stopPropagation(),e("/settings/community")},h=m=>{m.preventDefault(),m.stopPropagation(),t("Go to Settings > Community > Manage to view the guide.","info"),e("/settings/community")};return a.jsxs("div",{className:"bg-gray-900/50 rounded-2xl p-6 border border-gray-800 hover:border-indigo-500/30 transition-all group relative overflow-hidden flex flex-col h-full",children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 rounded-full blur-2xl -mr-16 -mt-16 group-hover:bg-indigo-500/20 transition-all pointer-events-none"}),a.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-gray-400 text-sm font-medium flex items-center gap-2",children:["My Pod",s>0&&a.jsxs("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-0.5 rounded-full animate-pulse",children:[s," New"]})]}),a.jsxs("div",{className:"mt-1",children:[a.jsx("span",{className:"text-3xl font-bold text-white",children:r.length}),a.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"connections"})]})]}),a.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]}),a.jsx("div",{className:"flex-1 space-y-3 relative z-10",children:c?a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-10 bg-gray-800 rounded-xl animate-pulse"}),a.jsx("div",{className:"h-10 bg-gray-800 rounded-xl animate-pulse delay-75"})]}):r.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-2",children:r.slice(0,3).map(m=>a.jsxs("div",{className:"group/item flex items-center justify-between p-2 rounded-xl hover:bg-white/5 transition-colors border border-transparent hover:border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-900 flex items-center justify-center text-xs font-bold text-indigo-200 ring-2 ring-gray-900",children:m.friend.username?.[0]?.toUpperCase()}),a.jsx("div",{className:"text-sm font-bold text-gray-300 truncate max-w-[80px]",children:m.friend.username})]}),a.jsx("button",{onClick:p=>d(p,m.id),className:"opacity-0 group-hover/item:opacity-100 p-1.5 text-xs font-bold text-gray-400 hover:text-white hover:bg-gray-700 rounded transition-all",children:"Manage"})]},m.id))}),r.length>3&&a.jsxs(kt,{to:"/settings/community",className:"block text-center text-xs text-gray-500 hover:text-indigo-400 mt-2 font-medium transition-colors",children:["+ ",r.length-3," others"]})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"No friends yet."}),a.jsx(kt,{to:"/settings/community",className:"text-xs font-bold text-indigo-400 hover:text-indigo-300",children:"Add Friends "})]})}),a.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-800 relative z-10 flex justify-between items-center",children:[a.jsxs("button",{onClick:h,className:"flex items-center gap-1.5 text-[10px] uppercase font-bold text-gray-500 hover:text-indigo-400 transition-colors",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Setup Guide"]}),a.jsx(kt,{to:"/settings/community",className:"text-[10px] uppercase font-bold text-indigo-500 hover:text-indigo-400 transition-colors",children:"All Settings "})]})]})},bc=["Just buy a new booster box? Add the cards through the set page, after organizing the cards by collector number. You can go top down, or bottom up on the list and make your life MUCH easier.","You can bulk import your collection via CSV! Check the Collection page for the template.","Right-click any card in your collection to instantly find it on TCGPlayer.","Use the 'Wishlist' filter in your collection to track cards you plan to buy.","You can separate your 'Foils' from regular printings by toggling the foil icon when adding cards.","Filter your collection by 'Rarity: Mythic' to see your big hits quickly.","The 'Price' filter helps you find those hidden gems in your bulk box.","Did you know? You can manually edit the market price of a card if you have a specific variant not tracked correctly.","Smart Binders update automatically. If you add a new Goblin to your collection, it instantly goes into your 'Goblin Tribe' binder.","You can use RegEx in Smart Binders! Example: Name matches `^Dark` finds cards starting with 'Dark'.","Want a binder for high-value cards? Set a rule for 'Price > 5.00'.","Create a 'Trade Binder' by excluding cards that are currently in a deck: `In Deck = False`.","You can combine rules! `Color Identity = R` AND `Type = Dragon` makes a perfect dragon binder.","Smart Binders can track duplicates. Set `Quantity > 4` to find cards you can trade away.","Customize your binder icons with emojis to make them stand out in the list.","Use the 'Pro Color' toggles in the Smart Creator to quickly select color identities.","When building a deck, use the 'Synergy' tab to see cards that work well with your Commander.","The Mana Curve chart updates in real-time as you add cards to your deck.","You can clone any of your existing decks to try out a new strategy without losing the original.","Use the 'Playtest' feature to draw sample hands and see if your land count is right.","Toggle 'Group by Type' in the deck view to see your creature/spell balance.","The AI Strategy tool can suggest a land base for you based on your color pips.","Add 'Tags' to cards in your deck (like 'Ramp', 'Removal') to see a custom breakdown.","You can set a card as your 'Commander' directly from the search results.","Check the 'Sideboard' tab to keep track of cards you're considering but haven't cut yet.","Invite friends to your 'Pod' to see their trade binders in real-time.","You can set your Pod permissions to 'Viewer' (read-only) or 'Editor' (trust them to modify decks).","Share your deck with a QR code! It's perfect for showing off your build at the LGS.","Link your account with a partner to build 'Team Decks' using a shared card pool.","Mark cards as 'Not for Trade' in your collection, and they won't show up for your Pod friends.","Collaborate on a deck list by giving a friend 'Editor' access in your Pod.","Keep your database healthy! Run the 'Cleanup' script periodically if you notice duplicate entries.","You can change your theme preference in the Settings menu (Dark/Light mode).","Report bugs directly from the dashboard using the 'System Status' widget.","The dollar value of your collection is an estimate based on TCGPlayer Market Price.","Use standard Scryfall syntax in the search bar. `t:creature cmc>5` works!","Hover over the KPI cards on the dashboard to see more detailed tooltips.","Click the 'Update Prices' button on the dashboard to fetch the latest market data.","You can view your deck's stats (CMC, Type distribution) on the mobile view too!","The app works offline for browsing, but you need internet to sync prices or images.","Double-click a card image to view the high-res version.","Use keyboard shortcuts! 'Ctrl/Cmd + F' usually brings up the card search."],oF=()=>{const[e,t]=y.useState(0),[r,n]=y.useState(!1);y.useEffect(()=>{const o=Math.floor(Math.random()*bc.length);t(o)},[]);const s=o=>{r||(n(!0),setTimeout(()=>n(!1),300),t(c=>o==="next"?(c+1)%bc.length:(c-1+bc.length)%bc.length))};return a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-900/50 border border-white/5 rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group",children:[a.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-5 group-hover:opacity-10 transition-opacity",children:a.jsx("svg",{className:"w-24 h-24 transform rotate-12",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"})})}),a.jsxs("h2",{className:"font-bold text-white mb-4 flex items-center gap-2 relative z-10",children:[a.jsx("span",{className:"p-1.5 bg-yellow-500/10 rounded-lg text-yellow-400",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),"Pro Tips",a.jsx("span",{className:"text-[10px] text-gray-600 font-mono uppercase",children:"tips are generated, and might not reflect actual features"}),a.jsx("br",{}),a.jsx("span",{className:"text-[10px] text-gray-600 font-mono uppercase",children:"have a feature? suggest on discord!"})]}),a.jsxs("div",{className:"relative z-10 min-h-[80px] flex flex-col justify-between",children:[a.jsx("p",{className:`text-sm text-gray-300 leading-relaxed transition-opacity duration-300 ${r?"opacity-0":"opacity-100"}`,children:bc[e]}),a.jsxs("div",{className:"flex items-center justify-between mt-4 border-t border-white/5 pt-3",children:[a.jsxs("span",{className:"text-[10px] text-gray-600 font-mono uppercase",children:["Tip ",e+1," of ",bc.length]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>s("prev"),className:"p-1.5 rounded-lg hover:bg-white/10 text-gray-500 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{onClick:()=>s("next"),className:"p-1.5 rounded-lg hover:bg-white/10 text-gray-500 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})]})};var pT="clover",lF=function(t){return t===3?"v3":t},xT="https://js.stripe.com",cF="".concat(xT,"/").concat(pT,"/stripe.js"),uF=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,dF=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var fF=function(t){return uF.test(t)||dF.test(t)},hF=function(){for(var t=document.querySelectorAll('script[src^="'.concat(xT,'"]')),r=0;r<t.length;r++){var n=t[r];if(fF(n.src))return n}return null},lS=function(t){var r="",n=document.createElement("script");n.src="".concat(cF).concat(r);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(n),n},mF=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"8.6.0",startTime:r})},ud=null,y0=null,b0=null,gF=function(t){return function(r){t(new Error("Failed to load Stripe.js",{cause:r}))}},pF=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},xF=function(t){return ud!==null?ud:(ud=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var s=hF();if(!(s&&t)){if(!s)s=lS(t);else if(s&&b0!==null&&y0!==null){var o;s.removeEventListener("load",b0),s.removeEventListener("error",y0),(o=s.parentNode)===null||o===void 0||o.removeChild(s),s=lS(t)}}b0=pF(r,n),y0=gF(n),s.addEventListener("load",b0),s.addEventListener("error",y0)}catch(c){n(c);return}}),ud.catch(function(r){return ud=null,Promise.reject(r)}))},vF=function(t,r,n){if(t===null)return null;var s=r[0],o=s.match(/^pk_test/),c=lF(t.version),f=pT;o&&c!==f&&console.warn("Stripe.js@".concat(c," was loaded on the page, but @stripe/stripe-js@").concat("8.6.0"," expected Stripe.js@").concat(f,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var d=t.apply(void 0,r);return mF(d,n),d},dd,vT=!1,yT=function(){return dd||(dd=xF(null).catch(function(t){return dd=null,Promise.reject(t)}),dd)};Promise.resolve().then(function(){return yT()}).catch(function(e){vT||console.warn(e)});var yF=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];vT=!0;var s=Date.now();return yT().then(function(o){return vF(o,r,s)})},Ov={exports:{}},Mv,cS;function bF(){if(cS)return Mv;cS=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Mv=e,Mv}var Pv,uS;function wF(){if(uS)return Pv;uS=1;var e=bF();function t(){}function r(){}return r.resetWarningCache=t,Pv=function(){function n(c,f,d,h,m,p){if(p!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function s(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return o.PropTypes=o,o},Pv}var dS;function j2(){return dS||(dS=1,Ov.exports=wF()()),Ov.exports}var jF=j2();const Rt=zn(jF);function fS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fS(Object(r),!0).forEach(function(n){bT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function em(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?em=function(t){return typeof t}:em=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},em(e)}function bT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NF(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,o;for(o=0;o<n.length;o++)s=n[o],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function kF(e,t){if(e==null)return{};var r=NF(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wT(e,t){return SF(e)||_F(e,t)||CF(e,t)||EF()}function SF(e){if(Array.isArray(e))return e}function _F(e,t){var r=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(r!=null){var n=[],s=!0,o=!1,c,f;try{for(r=r.call(e);!(s=(c=r.next()).done)&&(n.push(c.value),!(t&&n.length===t));s=!0);}catch(d){o=!0,f=d}finally{try{!s&&r.return!=null&&r.return()}finally{if(o)throw f}}return n}}function CF(e,t){if(e){if(typeof e=="string")return mS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mS(e,t)}}function mS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function EF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var an=function(t,r,n){var s=!!n,o=Te.useRef(n);Te.useEffect(function(){o.current=n},[n]),Te.useEffect(function(){if(!s||!t)return function(){};var c=function(){o.current&&o.current.apply(o,arguments)};return t.on(r,c),function(){t.off(r,c)}},[s,r,t,o])},Bb=function(t){var r=Te.useRef(t);return Te.useEffect(function(){r.current=t},[t]),r.current},$c=function(t){return t!==null&&em(t)==="object"},AF=function(t){return $c(t)&&typeof t.then=="function"},TF=function(t){return $c(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},gS="[object Object]",OF=function e(t,r){if(!$c(t)||!$c(r))return t===r;var n=Array.isArray(t),s=Array.isArray(r);if(n!==s)return!1;var o=Object.prototype.toString.call(t)===gS,c=Object.prototype.toString.call(r)===gS;if(o!==c)return!1;if(!o&&!n)return t===r;var f=Object.keys(t),d=Object.keys(r);if(f.length!==d.length)return!1;for(var h={},m=0;m<f.length;m+=1)h[f[m]]=!0;for(var p=0;p<d.length;p+=1)h[d[p]]=!0;var x=Object.keys(h);if(x.length!==f.length)return!1;var w=t,j=r,N=function(C){return e(w[C],j[C])};return x.every(N)},jT=function(t,r,n){return $c(t)?Object.keys(t).reduce(function(s,o){var c=!$c(r)||!OF(t[o],r[o]);return n.includes(o)?(c&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),s):c?hS(hS({},s||{}),{},bT({},o,t[o])):s},null):null},NT="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",pS=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NT;if(t===null||TF(t))return t;throw new Error(r)},MF=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NT;if(AF(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(s){return pS(s,r)})};var n=pS(t,r);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},PF=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"5.4.1"}),t.registerAppInfo({name:"react-stripe-js",version:"5.4.1",url:"https://stripe.com/docs/stripe-js/react"}))},yg=Te.createContext(null);yg.displayName="ElementsContext";var kT=function(t,r){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return t},ST=function(t){var r=t.stripe,n=t.options,s=t.children,o=Te.useMemo(function(){return MF(r)},[r]),c=Te.useState(function(){return{stripe:o.tag==="sync"?o.stripe:null,elements:o.tag==="sync"?o.stripe.elements(n):null}}),f=wT(c,2),d=f[0],h=f[1];Te.useEffect(function(){var x=!0,w=function(N){h(function(S){return S.stripe?S:{stripe:N,elements:N.elements(n)}})};return o.tag==="async"&&!d.stripe?o.stripePromise.then(function(j){j&&x&&w(j)}):o.tag==="sync"&&!d.stripe&&w(o.stripe),function(){x=!1}},[o,d,n]);var m=Bb(r);Te.useEffect(function(){m!==null&&m!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[m,r]);var p=Bb(n);return Te.useEffect(function(){if(d.elements){var x=jT(n,p,["clientSecret","fonts"]);x&&d.elements.update(x)}},[n,p,d.elements]),Te.useEffect(function(){PF(d.stripe)},[d.stripe]),Te.createElement(yg.Provider,{value:d},s)};ST.propTypes={stripe:Rt.any,options:Rt.object};var RF=function(t){var r=Te.useContext(yg);return kT(r,t)},IF=function(){var t=RF("calls useElements()"),r=t.elements;return r};Rt.func.isRequired;var _T=Te.createContext(null);_T.displayName="CheckoutContext";Rt.any,Rt.shape({clientSecret:Rt.oneOfType([Rt.string,Rt.instanceOf(Promise)]).isRequired,elementsOptions:Rt.object}).isRequired;var $b=function(t){var r=Te.useContext(_T),n=Te.useContext(yg);if(r){if(n)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return r}else return kT(n,t)},LF=["mode"],DF=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},jn=function(t,r){var n="".concat(DF(t),"Element"),s=function(d){var h=d.id,m=d.className,p=d.options,x=p===void 0?{}:p,w=d.onBlur,j=d.onFocus,N=d.onReady,S=d.onChange,C=d.onEscape,A=d.onClick,E=d.onLoadError,z=d.onLoaderStart,P=d.onNetworksChange,B=d.onConfirm,T=d.onCancel,R=d.onShippingAddressChange,$=d.onShippingRateChange,I=d.onSavedPaymentMethodRemove,O=d.onSavedPaymentMethodUpdate,U=$b("mounts <".concat(n,">")),D="elements"in U?U.elements:null,q="checkoutState"in U?U.checkoutState:null,Z=q?.type==="success"||q?.type==="loading"?q.sdk:null,V=Te.useState(null),X=wT(V,2),re=X[0],fe=X[1],Y=Te.useRef(null),H=Te.useRef(null);an(re,"blur",w),an(re,"focus",j),an(re,"escape",C),an(re,"click",A),an(re,"loaderror",E),an(re,"loaderstart",z),an(re,"networkschange",P),an(re,"confirm",B),an(re,"cancel",T),an(re,"shippingaddresschange",R),an(re,"shippingratechange",$),an(re,"savedpaymentmethodremove",I),an(re,"savedpaymentmethodupdate",O),an(re,"change",S);var G;N&&(t==="expressCheckout"?G=N:G=function(){N(re)}),an(re,"ready",G),Te.useLayoutEffect(function(){if(Y.current===null&&H.current!==null&&(D||Z)){var Q=null;if(Z)switch(t){case"paymentForm":Q=Z.createPaymentFormElement();break;case"payment":Q=Z.createPaymentElement(x);break;case"address":if("mode"in x){var ae=x.mode,_e=kF(x,LF);if(ae==="shipping")Q=Z.createShippingAddressElement(_e);else if(ae==="billing")Q=Z.createBillingAddressElement(_e);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":Q=Z.createExpressCheckoutElement(x);break;case"currencySelector":Q=Z.createCurrencySelectorElement();break;case"taxId":Q=Z.createTaxIdElement(x);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else D&&(Q=D.create(t,x));Y.current=Q,fe(Q),Q&&Q.mount(H.current)}},[D,Z,x]);var ee=Bb(x);return Te.useEffect(function(){if(Y.current){var Q=jT(x,ee,["paymentRequest"]);Q&&"update"in Y.current&&Y.current.update(Q)}},[x,ee]),Te.useLayoutEffect(function(){return function(){if(Y.current&&typeof Y.current.destroy=="function")try{Y.current.destroy(),Y.current=null}catch{}}},[]),Te.createElement("div",{id:h,className:m,ref:H})},o=function(d){$b("mounts <".concat(n,">"));var h=d.id,m=d.className;return Te.createElement("div",{id:h,className:m})},c=r?o:s;return c.propTypes={id:Rt.string,className:Rt.string,onChange:Rt.func,onBlur:Rt.func,onFocus:Rt.func,onReady:Rt.func,onEscape:Rt.func,onClick:Rt.func,onLoadError:Rt.func,onLoaderStart:Rt.func,onNetworksChange:Rt.func,onConfirm:Rt.func,onCancel:Rt.func,onShippingAddressChange:Rt.func,onShippingRateChange:Rt.func,onSavedPaymentMethodRemove:Rt.func,onSavedPaymentMethodUpdate:Rt.func,options:Rt.object},c.displayName=n,c.__elementType=t,c},Nn=typeof window>"u",BF=Te.createContext(null);BF.displayName="EmbeddedCheckoutProviderContext";var $F=function(){var t=$b("calls useStripe()"),r=t.stripe;return r};jn("auBankAccount",Nn);jn("card",Nn);jn("cardNumber",Nn);jn("cardExpiry",Nn);jn("cardCvc",Nn);jn("iban",Nn);var zF=jn("payment",Nn);jn("expressCheckout",Nn);jn("paymentRequestButton",Nn);jn("linkAuthentication",Nn);jn("address",Nn);jn("shippingAddress",Nn);jn("paymentMethodMessaging",Nn);jn("taxId",Nn);const UF=yF("pk_test_51SlUJ5RZLrZbIKAT4PlkbQtUhT31DRwaEjBmKyJf0MbVTVdDAMcKLeYUuJZy7fFmMHI6bk33Dhl6WcXwX8v71bpR00s1sphawr"),FF=({amount:e,onCancel:t,onSuccess:r})=>{const n=$F(),s=IF(),[o,c]=y.useState(null),[f,d]=y.useState(!1),[h,m]=y.useState(!1),p="pk_test_51SlUJ5RZLrZbIKAT4PlkbQtUhT31DRwaEjBmKyJf0MbVTVdDAMcKLeYUuJZy7fFmMHI6bk33Dhl6WcXwX8v71bpR00s1sphawr".startsWith("pk_live")&&window.location.protocol==="http:",x=async w=>{if(w.preventDefault(),!n||!s)return;d(!0);const{error:j}=await n.confirmPayment({elements:s,confirmParams:{return_url:window.location.origin+"/dashboard?donation=success"},redirect:"if_required"});j?(c(j.message),d(!1)):r()};return a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[p?a.jsxs("div",{className:"bg-amber-900/30 border border-amber-500/50 p-6 rounded-xl text-center space-y-3",children:[a.jsx("span",{className:"text-3xl",children:""}),a.jsx("h3",{className:"font-bold text-amber-200",children:"HTTPS Required"}),a.jsxs("p",{className:"text-sm text-gray-400",children:["Live Stripe payments require a secure (HTTPS) connection. Please use ",a.jsx("strong",{children:"test keys"})," for local development or deploy to a secure server."]})]}):a.jsxs("div",{className:"relative min-h-[100px]",children:[!h&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 rounded-xl border border-gray-700 animate-pulse text-gray-500 text-sm",children:"Loading Secure Form..."}),a.jsx(zF,{onReady:()=>m(!0),onLoadError:w=>c(w.error?.message||"Failed to load payment form."),className:"bg-gray-900 p-4 rounded-xl border border-gray-700"})]}),o&&a.jsx("div",{className:"text-red-500 text-sm mt-2 p-3 bg-red-950/30 border border-red-500/30 rounded-lg",children:o}),a.jsxs("div",{className:"flex gap-4 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 bg-gray-800 hover:bg-gray-700 text-gray-400 rounded-xl font-bold transition-all",children:"Change Amount"}),a.jsx("button",{disabled:f||!n,className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold transition-all shadow-lg shadow-indigo-500/25 disabled:opacity-50",children:f?"Processing...":`Donate $${e}`})]})]})},CT=({isOpen:e,onClose:t})=>{const[r,n]=y.useState("amount"),[s,o]=y.useState(10),[c,f]=y.useState(""),[d,h]=y.useState(!1),[m,p]=y.useState("stripe");y.useEffect(()=>{e||(n("amount"),f(""),h(!1))},[e]);const x=async w=>{o(w),h(!0);try{const j=await Fe.post("/payments/create-intent",{amount:w});f(j.clientSecret),n("payment")}catch(j){alert("Error creating payment: "+j.message)}finally{h(!1)}};return e?a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:t}),a.jsxs("div",{className:"relative bg-gray-900 border border-gray-700 w-full max-w-lg rounded-3xl flex flex-col max-h-[calc(100vh-4rem)] shadow-2xl animate-fade-in-up overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-950/50 flex-shrink-0",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx("span",{className:"text-pink-500 text-2xl",children:""})," Support MTG-Forge"]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors p-2",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"p-8 overflow-y-auto custom-scrollbar flex-grow",children:[r==="amount"&&a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-400 mb-6",children:"Your support helps us keep the servers running and the AI Architect dreaming of new decks."}),a.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[5,10,20].map(w=>a.jsxs("button",{onClick:()=>o(w),className:`py-4 rounded-xl border font-bold transition-all ${s===w?"bg-indigo-600 border-indigo-400 text-white shadow-lg shadow-indigo-500/20 scale-105":"bg-gray-800 border-gray-700 text-gray-400 hover:border-gray-500"}`,children:["$",w]},w))}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"$"}),a.jsx("input",{type:"number",value:s,onChange:w=>o(parseFloat(w.target.value)||""),className:"w-full bg-gray-800 border border-gray-700 rounded-xl py-3 pl-8 pr-4 text-white font-bold focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"Other amount"})]})]}),a.jsx("button",{onClick:()=>x(s),disabled:d||!s||s<1,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded-xl font-bold text-lg shadow-xl hover:shadow-indigo-500/30 transition-all transform hover:-translate-y-1 disabled:opacity-50",children:d?"Loading...":"Continue to Payment"})]}),r==="payment"&&a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsx("div",{className:"flex bg-gray-950 p-1 rounded-xl mb-4",children:["stripe","google","paypal"].map(w=>a.jsx("button",{onClick:()=>p(w),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${m===w?"bg-gray-800 text-white shadow-sm":"text-gray-500 hover:text-gray-400"}`,children:w==="stripe"?"Card":w==="google"?"Google Pay":"PayPal"},w))}),m==="stripe"&&c&&a.jsx(ST,{stripe:UF,options:{clientSecret:c,appearance:{theme:"night"}},children:a.jsx(FF,{amount:s,onCancel:()=>n("amount"),onSuccess:()=>n("success")})}),(m==="google"||m==="paypal")&&a.jsxs("div",{className:"text-center py-12 space-y-4 animate-pulse",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-800 rounded-full flex items-center justify-center text-2xl",children:m==="google"?"":""}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-gray-300 capitalize",children:[m," Pay Integration"]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Coming incredibly soon! Please use Card for now."})]}),a.jsx("button",{onClick:()=>p("stripe"),className:"text-indigo-400 text-sm hover:underline font-bold",children:"Back to Card Payment"})]})]}),r==="success"&&a.jsxs("div",{className:"text-center space-y-8 animate-fade-in py-8",children:[a.jsxs("div",{className:"w-24 h-24 mx-auto relative",children:[a.jsx("div",{className:"absolute inset-0 bg-pink-500 rounded-full animate-ping opacity-20"}),a.jsx("div",{className:"relative bg-gradient-to-br from-pink-500 to-rose-600 w-24 h-24 rounded-full flex items-center justify-center text-4xl shadow-lg ring-4 ring-pink-500/20",children:""})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-4xl font-black text-white tracking-tight",children:"YOU ARE ABSOLUTELY INCREDIBLE!"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-gray-300 text-lg",children:["From the bottom of our digital hearts, ",a.jsx("span",{className:"text-pink-400 font-bold",children:"THANK YOU!"})]}),a.jsx("p",{className:"text-gray-400 leading-relaxed max-w-xs mx-auto text-sm italic",children:`"Your generosity fuels the spark of creativity. You're not just a donor; you're a patron of the Multiverse."`})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsx("p",{className:"text-[10px] text-gray-600 uppercase font-black tracking-[0.2em]",children:"Honorary Title Acquired"}),a.jsx("div",{className:"bg-indigo-500/10 border border-indigo-500/30 py-2 px-4 rounded-full inline-block mx-auto text-indigo-300 font-bold text-sm",children:"Guardian of the Forge"})]}),a.jsx("button",{onClick:t,className:"w-full py-4 bg-gray-800 hover:bg-gray-700 text-white rounded-xl font-bold transition-all border border-gray-700 mt-4",children:"Continue Forging"})]})]}),r!=="success"&&a.jsx("div",{className:"bg-gray-950/80 p-4 border-t border-gray-800 text-center flex-shrink-0",children:a.jsxs("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold flex items-center justify-center gap-2",children:[a.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Secure Payments by Stripe"]})})]})]}):null},HF=()=>{const{currentUser:e,userProfile:t}=vt(),{cards:r,refresh:n}=da(),{decks:s,loading:o}=xf(),[c,f]=y.useState(!1),[d,h]=y.useState(!1),[m,p]=y.useState(!1),[x,w]=y.useState(!1),[j,N]=y.useState(!1),S=Un(),C=async()=>{N(!0);try{await Fe.post("/sync/prices"),await n()}catch(z){console.error("Sync failed",z)}finally{N(!1)}},A=y.useMemo(()=>{if(!r||!s)return{totalCards:0,uniqueDecks:0,value:0,topColor:"N/A"};const z=new Set(r.map(I=>I.scryfall_id||I.id));let P=r.reduce((I,O)=>I+(O.count||1),0);s.forEach(I=>{if(I.commander){const O=I.commander.id||I.commander.scryfall_id;O&&!z.has(O)&&(P++,z.add(O))}if(I.commander_partner){const O=I.commander_partner.id||I.commander_partner.scryfall_id;O&&!z.has(O)&&(P++,z.add(O))}});const B=r.reduce((I,O)=>{const U=parseFloat(O.prices?.usd||0);return I+U*(O.count||1)},0),T={};r.forEach(I=>{const O=I.color_identity||[],U={W:0,U:1,B:2,R:3,G:4},D=O.filter(Z=>U[Z]!==void 0).sort((Z,V)=>U[Z]-U[V]).join(""),q=D.length===0?"C":D;T[q]=(T[q]||0)+(I.count||1)});const R=Object.entries(T);let $=Td("C");if(R.length>0){const[I,O]=R.reduce((U,D)=>D[1]>U[1]?D:U);$=Td(I)}return{totalCards:P,uniqueDecks:s.length,value:B.toLocaleString("en-US",{style:"currency",currency:"USD"}),topColor:$}},[r,s]),E=y.useMemo(()=>s?[...s].reverse().slice(0,3):[],[s]);return a.jsxs("div",{className:"relative min-h-screen",children:[a.jsx("div",{className:"fixed inset-0 z-0 bg-cover bg-center transition-all duration-1000",style:{backgroundImage:"url(/MTG-Forge_Logo_Background.png)"},children:a.jsx("div",{className:"absolute inset-0 bg-gray-950/80 backdrop-blur-sm"})}),a.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 py-12 space-y-12 animate-fade-in",children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-black text-white tracking-tight mb-2",children:"Dashboard"}),a.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",a.jsx("span",{className:"text-indigo-400 font-bold",children:e?e.displayName||e.email:"Guest"}),"."]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx(Rv,{to:"/collection",title:"Total Cards",value:A.totalCards,icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",color:"blue"}),a.jsx(Rv,{to:"/decks",title:"Unique Decks",value:A.uniqueDecks,icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",color:"purple"}),a.jsx(Rv,{title:"Collection Value",value:A.value,icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z",color:"green",children:a.jsx("button",{onClick:C,disabled:j,className:`absolute top-4 right-4 p-1.5 rounded-lg bg-green-500/10 text-green-400 hover:bg-green-500/20 transition-all ${j?"animate-spin":""}`,title:"Update Prices from Scryfall",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})}),a.jsxs("div",{className:"bg-gray-900/60 border border-gray-800 rounded-2xl p-5 backdrop-blur-sm hover:border-gray-700 transition-colors group relative overflow-hidden",children:[a.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 opacity-10 rounded-bl-full ${A.topColor.bg}`}),a.jsxs("div",{className:"flex flex-col h-full justify-between relative z-10",children:[a.jsx("div",{className:"flex gap-1 mb-2",children:A.topColor.pips?.map((z,P)=>a.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center font-bold text-xs ring-1 ring-white/10 shadow-sm ${z==="W"?"bg-yellow-200 text-yellow-900":z==="U"?"bg-blue-300 text-blue-900":z==="B"?"bg-gray-800 text-gray-200":z==="R"?"bg-red-400 text-red-900":z==="G"?"bg-green-400 text-green-900":"bg-gray-400 text-gray-900"}`,children:z},P))}),a.jsxs("div",{children:[a.jsx("div",{className:`text-xl font-black tracking-tight ${A.topColor.color||"text-white"}`,children:A.topColor.name}),a.jsx("div",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mt-1",children:"Top Color Identity"}),a.jsxs("div",{className:"text-[10px] text-gray-400 italic mt-2 line-clamp-2 opacity-70",children:['"',A.topColor.flavor,'"']})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx(w0,{title:"New Deck",icon:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),color:"from-indigo-600 to-purple-600",onClick:()=>S("/decks/new")}),a.jsx(w0,{title:"Add Cards",icon:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),color:"from-blue-600 to-cyan-600",onClick:()=>S("/collection")}),a.jsx(w0,{title:"Browse Sets",icon:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),color:"from-green-600 to-emerald-600",onClick:()=>S("/sets")}),a.jsx(w0,{title:"Wishlist",icon:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),color:"from-pink-600 to-rose-600",onClick:()=>S("/collection?wishlist=true")})]}),a.jsxs("div",{className:"bg-gray-950/40 border border-white/5 rounded-3xl p-8 backdrop-blur-md shadow-xl",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-3",children:[a.jsx("span",{className:"p-2 bg-indigo-500/20 rounded-lg text-indigo-400",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"Recent Decks"]}),o?a.jsx("div",{className:"text-gray-400 text-center py-8",children:"Loading decks..."}):E.length>0?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(z=>{const P=R=>R?R.image_uris?.art_crop?R.image_uris.art_crop:R.card_faces?.[0]?.image_uris?.art_crop?R.card_faces[0].image_uris.art_crop:null:null,B=P(z.commander),T=P(z.commander_partner);return a.jsxs("div",{onClick:()=>S(`/decks/${z.id}`),className:"group relative aspect-[63/88] rounded-2xl overflow-hidden cursor-pointer shadow-lg hover:shadow-indigo-500/30 transition-all hover:-translate-y-2 border border-white/5 bg-gray-900",children:[a.jsx("div",{className:"absolute inset-0 bg-gray-950",children:z.commander_partner?a.jsxs("div",{className:"w-full h-full flex",children:[a.jsxs("div",{className:"w-1/2 h-full relative border-r border-black/50",children:[a.jsx("img",{src:B||"https://placehold.co/400x600?text=?",alt:z.commander?.name,className:"w-full h-full object-cover opacity-90 group-hover:scale-110 transition-transform duration-700"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-transparent opacity-60"})]}),a.jsxs("div",{className:"w-1/2 h-full relative",children:[a.jsx("img",{src:T||"https://placehold.co/400x600?text=?",alt:z.commander_partner?.name,className:"w-full h-full object-cover opacity-90 group-hover:scale-110 transition-transform duration-700"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-transparent opacity-60"})]})]}):a.jsx("img",{src:B||"https://placehold.co/400x600?text=?",alt:z.name,className:"absolute inset-0 w-full h-full object-cover opacity-90 group-hover:scale-110 transition-transform duration-700"})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-950/40 to-transparent opacity-90"}),a.jsxs("div",{className:"absolute inset-0 p-5 flex flex-col justify-end",children:[a.jsxs("div",{className:"mb-1",children:[a.jsx("div",{className:"flex justify-between items-end mb-2",children:a.jsx("span",{className:"px-2 py-0.5 bg-indigo-500/20 border border-indigo-500/30 text-indigo-300 rounded text-[10px] font-bold uppercase tracking-wider backdrop-blur-sm",children:z.format||"Commander"})}),a.jsx("h3",{className:"text-xl font-bold text-white leading-tight mb-1 group-hover:text-indigo-400 transition-colors line-clamp-2",children:z.name}),a.jsx("p",{className:"text-sm text-gray-400 line-clamp-1",children:z.commander_partner?`${z.commander.name} & ${z.commander_partner.name}`:z.commander?.name||"Unknown Commander"})]}),a.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10 flex justify-between items-center text-xs text-gray-500 font-mono",children:[a.jsxs("span",{children:[z.card_count||0," cards"]}),a.jsx("svg",{className:"w-4 h-4 text-gray-600 group-hover:text-white transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]})]},z.id)})}):a.jsxs("div",{className:"text-center py-12 bg-gray-900/30 rounded-2xl border border-dashed border-gray-800",children:[a.jsx("p",{className:"text-gray-500",children:"No decks forged yet."}),a.jsx(kt,{to:"/decks/new",className:"text-indigo-400 font-bold hover:text-indigo-300 mt-2 inline-block",children:"Create your first deck "})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-red-900/10 border border-red-500/20 rounded-3xl p-6 backdrop-blur-md",children:[a.jsxs("h2",{className:"font-bold text-white mb-2 flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"System Status"]}),a.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Found a bug or have a feature request? Help us improve the Forge."}),a.jsxs("button",{onClick:()=>f(!0),className:"w-full py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded-xl shadow-lg shadow-red-900/20 transition-all flex items-center justify-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Report Issue"]})]}),a.jsx(iF,{onOpenModal:()=>h(!0)})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(oF,{}),a.jsxs("div",{className:"bg-gray-900/40 border border-white/5 rounded-3xl p-6 backdrop-blur-md",children:[a.jsxs("h2",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"p-1.5 bg-blue-500/10 rounded-lg text-blue-400",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),"Guides & Resources"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:()=>p(!0),className:"w-full text-left p-3 rounded-xl bg-gray-950/50 hover:bg-gray-800 border border-white/5 hover:border-indigo-500/30 transition-all group flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400 group-hover:scale-110 transition-transform",children:""}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-bold text-gray-200 group-hover:text-white",children:"Smart Binders"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Automate your collection"})]}),a.jsx("svg",{className:"w-4 h-4 text-gray-600 group-hover:text-indigo-400 ml-auto transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),a.jsxs("button",{onClick:()=>w(!0),className:"w-full text-left p-3 rounded-xl bg-gray-950/50 hover:bg-gray-800 border border-white/5 hover:border-purple-500/30 transition-all group flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg text-purple-400 group-hover:scale-110 transition-transform",children:""}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-bold text-gray-200 group-hover:text-white",children:"Pods & Sharing"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Manage permissions"})]}),a.jsx("svg",{className:"w-4 h-4 text-gray-600 group-hover:text-purple-400 ml-auto transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),a.jsx("div",{className:"h-auto",children:a.jsx(sF,{})})]})]})]}),a.jsx(aF,{isOpen:c,onClose:()=>f(!1)}),a.jsx(CT,{isOpen:d,onClose:()=>h(!1)}),a.jsx(w2,{isOpen:m,onClose:()=>p(!1)}),a.jsx(nT,{isOpen:x,onClose:()=>w(!1)})]})},Rv=({title:e,value:t,icon:r,color:n,to:s,children:o})=>{const c=a.jsxs("div",{className:"bg-gray-900/60 border border-gray-800 rounded-2xl p-5 backdrop-blur-sm hover:border-gray-700 transition-colors group relative h-full",children:[o,a.jsx("div",{className:"flex justify-between items-start mb-4",children:a.jsx("div",{className:`p-2.5 rounded-xl bg-gray-950 text-${n}-400 group-hover:scale-110 transition-transform shadow-inner`,children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:r})})})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl font-black text-white tracking-tight",children:t}),a.jsx("div",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mt-1",children:e})]})]});return s?a.jsx(kt,{to:s,className:"block transition-transform active:scale-95",children:c}):c},w0=({title:e,icon:t,color:r,onClick:n})=>a.jsxs("button",{onClick:n,className:"group relative overflow-hidden rounded-2xl p-4 md:p-6 text-left transition-all hover:-translate-y-1 hover:shadow-xl border border-white/5",children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${r} opacity-0 group-hover:opacity-10 transition-opacity duration-300`}),a.jsx("div",{className:"absolute inset-0 bg-gray-800/50 group-hover:opacity-0 transition-opacity"}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center gap-3 text-gray-300 group-hover:text-white transition-colors",children:[a.jsx("div",{className:"p-3 bg-gray-900/50 rounded-full backdrop-blur-sm group-hover:scale-110 transition-transform group-hover:bg-white/20",children:t}),a.jsx("span",{className:"font-bold text-sm tracking-wide",children:e})]})]}),WF=()=>{const[e,t]=y.useState(!0),[r,n]=y.useState(""),[s,o]=y.useState(""),[c,f]=y.useState(""),[d,h]=y.useState(""),[m,p]=y.useState(""),[x,w]=y.useState(""),[j,N]=y.useState(!1),[S,C]=y.useState(!1),[A,E]=y.useState(""),{login:z,signup:P,loginWithGoogle:B,resetPassword:T}=vt(),R=Un(),$=async O=>{O.preventDefault();try{if(E(""),j){await T(r),C(!0);return}if(e)await z(r,s),R("/dashboard");else{if(s!==c)return E("Passwords do not match");if(s.length<6)return E("Password must be at least 6 characters");await P(r,s,{username:d,first_name:m,last_name:x}),R("/onboarding")}}catch(U){E("Failed to "+(e?"log in":"sign up")+": "+U.message)}},I=async()=>{try{E(""),await B(),R("/dashboard")}catch(O){E("Failed to log in with Google: "+O.message)}};return a.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4 sm:px-6 lg:px-8 relative",children:[a.jsx("div",{className:"absolute inset-0 z-0",children:a.jsx("img",{src:"/MTG-Forge_Logo_Background_80.png",alt:"Background",className:"w-full h-full object-cover opacity-50"})}),a.jsxs("div",{className:"max-w-md w-full space-y-8 relative z-10 bg-black/60 p-10 rounded-2xl backdrop-blur-md border border-white/10 shadow-2xl",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:j?"Reset Password":e?"Sign in to MTG-Forge":"Create an Account"}),a.jsx("p",{className:"mt-2 text-center text-sm text-gray-400",children:j?"Enter your email to receive a reset link":e?"Access your collection and decks anywhere":"Start your journey with MTG-Forge"})]}),S&&a.jsx("div",{className:"bg-green-500/20 border border-green-500 text-green-100 p-3 rounded text-sm text-center",children:"Reset link sent! Check your inbox."}),A&&a.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 p-3 rounded text-sm text-center",children:A}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:$,children:[a.jsxs("div",{className:"space-y-4",children:[!e&&!j&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("div",{children:a.jsx("input",{type:"text",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-700 placeholder-gray-500 text-white bg-gray-800 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"First Name",value:m,onChange:O=>p(O.target.value)})}),a.jsx("div",{children:a.jsx("input",{type:"text",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-700 placeholder-gray-500 text-white bg-gray-800 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Last Name",value:x,onChange:O=>w(O.target.value)})})]}),!e&&!j&&a.jsx("div",{children:a.jsx("input",{type:"text",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-700 placeholder-gray-500 text-white bg-gray-800 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Username",value:d,onChange:O=>h(O.target.value)})}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),a.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-700 placeholder-gray-500 text-white bg-gray-800 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:r,onChange:O=>n(O.target.value)})]}),!j&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),a.jsx("input",{id:"password",name:"password",type:"password",autoComplete:e?"current-password":"new-password",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-700 placeholder-gray-500 text-white bg-gray-800 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:s,onChange:O=>o(O.target.value)})]}),!e&&!j&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),a.jsx("input",{id:"confirm-password",name:"confirmConnectPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-700 placeholder-gray-500 text-white bg-gray-800 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Confirm Password",value:c,onChange:O=>f(O.target.value)})]})]}),e&&!j&&a.jsx("div",{className:"flex items-center justify-end",children:a.jsx("button",{type:"button",onClick:()=>N(!0),className:"text-xs text-indigo-400 hover:text-indigo-300 transition-colors",children:"Forgot your password?"})}),a.jsx("div",{children:a.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:j?"Send Reset Link":e?"Sign in with Email":"Sign Up with Email"})})]}),a.jsx("div",{className:"text-center",children:a.jsx("button",{type:"button",onClick:()=>{j?(N(!1),C(!1)):t(!e),E("")},className:"text-sm text-indigo-400 hover:text-indigo-300 transition-colors",children:j?"Back to Sign In":e?"Don't have an account? Sign Up":"Already have an account? Sign In"})}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-600"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-transparent text-gray-400 uppercase font-bold bg-[#1a1c23]",children:"Or continue with"})})]}),a.jsxs("button",{onClick:I,className:"w-full flex items-center justify-center gap-3 bg-white text-gray-900 font-bold py-3 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),a.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),a.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),a.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),e?"Sign in with Google":"Sign up with Google"]})]})]})};function GF(){const[e,t]=y.useState([]),[r,n]=y.useState(!0),{currentUser:s}=vt(),o=async()=>{if(s){n(!0);try{const c=await Fe.getBinders();t(c)}catch(c){console.error("[useBinders] Failed to fetch",c)}finally{n(!1)}}};return y.useEffect(()=>{o()},[s]),{binders:e,loading:r,refreshBinders:o}}const tm=({options:e=[],selected:t=[],onChange:r,placeholder:n="Select...",label:s})=>{const[o,c]=y.useState(!1),[f,d]=y.useState(""),h=y.useRef(null);y.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const m=e.filter(x=>x.label.toLowerCase().includes(f.toLowerCase())),p=x=>{const w=t.includes(x)?t.filter(j=>j!==x):[...t,x];r(w)};return a.jsxs("div",{className:"relative",ref:h,children:[s&&a.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:s}),a.jsxs("button",{type:"button",onClick:()=>c(!o),className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-2 px-3 text-left text-sm text-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent flex justify-between items-center",children:[a.jsx("span",{className:"truncate",children:t.length===0?n:`${t.length} selected`}),a.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&a.jsxs("div",{className:"absolute z-50 mt-2 w-full bg-gray-900/95 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl max-h-68 flex flex-col overflow-hidden animate-fade-in-down",children:[a.jsx("div",{className:"p-3 border-b border-white/5",children:a.jsx("input",{type:"text",placeholder:"Filter options...",className:"w-full bg-gray-950/50 border border-gray-800 rounded-xl px-3 py-2 text-xs text-white focus:outline-none focus:ring-1 focus:ring-indigo-500 placeholder-gray-600",value:f,onChange:x=>d(x.target.value),autoFocus:!0})}),a.jsx("div",{className:"overflow-y-auto flex-1 p-2 custom-scrollbar",children:m.length===0?a.jsx("div",{className:"text-gray-500 text-[10px] font-bold uppercase tracking-widest p-4 text-center",children:"No results found"}):m.map(x=>a.jsxs("div",{onClick:()=>p(x.value),className:`
                                        flex items-center gap-3 px-3 py-2 rounded-xl cursor-pointer text-xs font-medium transition-all
                                        ${t.includes(x.value)?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/40":"text-gray-400 hover:bg-white/5 hover:text-white"}
                                    `,children:[a.jsx("div",{className:`w-4 h-4 rounded-md border transition-all flex items-center justify-center ${t.includes(x.value)?"bg-white border-white scale-110":"border-gray-700 bg-gray-950/50"}`,children:t.includes(x.value)&&a.jsx("svg",{className:"w-3 h-3 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 13l4 4L19 7"})})}),a.jsx("span",{className:"truncate",children:x.label})]},x.value))})]})]})},ET=()=>a.jsx("div",{className:"relative aspect-[2.5/3.5] bg-gray-800 rounded-lg overflow-hidden border border-gray-700 animate-pulse",children:a.jsx("div",{className:"absolute inset-0 bg-gray-700/50"})}),$d=({card:e,availableFoils:t,onRemove:r,showQuantity:n=!0,onClick:s,decks:o=[],ownerName:c,currentUser:f,showOwnerTag:d=!1,hideDeckTag:h=!1,hideOwnerTag:m=!1})=>{const[p,x]=y.useState(!1),{openCardModal:w}=vg(),j=o?.find(T=>T.id===e.deck_id)?.name,N=c||e.owner_username||(f&&(e.owner_id===f.id||e.user_id===f.id)?f.username||"ME":null),S=T=>parseFloat(e.prices?.[T]||e.data?.prices?.[T])||0,C=(T,R=0)=>{if(!T)return"https://placehold.co/250x350?text=No+Image";const $=T.data||T;return $.card_faces&&$.card_faces.length>1?$.card_faces[R]?.image_uris?.normal||"https://placehold.co/250x350?text=No+Image":$.image_uris?.normal||T.image_uri||"https://placehold.co/250x350?text=No+Image"},A=e.data?.card_faces?.length>1||e.card_faces?.length>1,E=C(e,0),z=A?C(e,1):null,P=e.countInDeck||e.quantity||e.count||1,B=T=>{T.stopPropagation(),s?s(e):w(e)};return a.jsx("div",{className:"relative group perspective-1000 h-full w-full aspect-[2.5/3.5] min-h-[200px] cursor-pointer",onClick:B,children:a.jsxs("div",{className:`relative w-full h-full transition-all duration-500 transform-style-3d ${p?"rotate-y-180":""}`,children:[a.jsxs("div",{className:"absolute inset-0 w-full h-full backface-hidden rounded-lg overflow-hidden shadow-md bg-gray-950/40 backdrop-blur-md border border-white/5 bg-cover bg-center",style:{backgroundImage:"url('/card-back.jpg')"},children:[a.jsx("img",{src:E,alt:e.name,className:"w-full h-full object-cover",loading:"lazy"}),n&&P>1&&a.jsxs("div",{className:"absolute top-1.5 right-1.5 bg-black/80 text-white text-xs font-bold px-2 py-0.5 rounded-full border border-gray-600 shadow-sm z-20",children:["x",P]}),!h&&j&&a.jsxs("div",{className:"absolute top-[3.75rem] left-1.5 max-w-[80%] bg-indigo-600/90 text-white text-[9px] font-bold px-2 py-0.5 rounded shadow-lg z-20 backdrop-blur-md border border-indigo-400/50 truncate uppercase tracking-tight",title:`In deck: ${j}`,children:[" ",j]}),!m&&d&&N&&a.jsxs("div",{className:`absolute ${j?"top-[5.25rem]":"top-[3.75rem]"} left-1.5 bg-gray-950/90 text-white text-[11px] font-black px-2 py-0.5 rounded border border-white/20 shadow-xl z-20 backdrop-blur-md uppercase tracking-wider`,children:[" ",N]}),e.finish==="foil"?a.jsx("div",{className:"absolute top-1.5 left-1.5 bg-yellow-500/80 text-yellow-100 text-[10px] font-bold px-1.5 py-0.5 rounded-full shadow-md z-20 backdrop-blur-sm border border-yellow-300/50",children:""}):e.is_wishlist?a.jsxs("div",{className:"absolute top-1.5 left-1.5 bg-orange-600/90 text-white text-[10px] font-black px-1.5 py-0.5 rounded-full shadow-md z-20 backdrop-blur-sm border border-orange-400/50 flex items-center gap-1",children:[a.jsx("svg",{className:"w-2.5 h-2.5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),"WISH"]}):t?.has(e.name)&&a.jsx("div",{className:"absolute top-1.5 left-1.5 bg-gray-700/90 text-yellow-400 text-[10px] font-bold px-1.5 py-0.5 rounded-full shadow-md z-20 backdrop-blur-sm border border-yellow-500/30 cursor-help",title:"Foil copy available in collection",children:""}),a.jsx("div",{className:"absolute bottom-1.5 left-1.5 right-1.5 bg-black/70 backdrop-blur-md px-2 py-1 rounded border border-white/10 z-20 text-[9px] font-mono flex items-center justify-center",children:a.jsxs("span",{className:e.finish==="foil"?"text-yellow-400":"text-green-400",children:["$",(e.finish==="foil"?S("usd_foil")||S("usd"):S("usd")||S("usd_foil")).toFixed(2)]})}),a.jsxs("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-all duration-300 z-30",children:[a.jsx("div",{className:"absolute inset-0 bg-black/20"}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black via-black/95 to-transparent p-3 pt-6",children:[a.jsx("p",{className:"font-black text-sm text-white leading-tight line-clamp-1 drop-shadow-lg mb-2",children:e.name}),a.jsx("div",{className:"flex items-center gap-2 mb-3",children:a.jsxs("div",{className:`flex items-center gap-1.5 border rounded-lg px-2.5 py-1 backdrop-blur-md ${e.finish==="foil"?"bg-yellow-500/20 border-yellow-500/40":"bg-green-500/20 border-green-500/40"}`,children:[a.jsx("svg",{className:`w-3 h-3 ${e.finish==="foil"?"text-yellow-400":"text-green-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("span",{className:`text-xs font-bold font-mono ${e.finish==="foil"?"text-yellow-400":"text-green-400"}`,children:["$",(e.finish==="foil"?S("usd_foil")||S("usd"):S("usd")||S("usd_foil")).toFixed(2)]})]})}),a.jsxs("div",{className:"flex gap-1.5",children:[a.jsxs("button",{onClick:B,className:"flex-1 bg-gradient-to-r from-indigo-600 to-indigo-500 hover:from-indigo-500 hover:to-indigo-400 text-white font-bold py-2 px-3 rounded-lg transition-all duration-200 flex items-center justify-center gap-1.5 shadow-lg hover:shadow-indigo-500/50 active:scale-95",children:[a.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),a.jsx("span",{className:"text-[10px] uppercase tracking-wider font-black",children:"View"})]}),A&&a.jsx("button",{onClick:T=>{T.stopPropagation(),x(!p)},className:"bg-gray-700/90 hover:bg-gray-600 text-white p-2 rounded-lg transition-all duration-200 shadow-lg hover:shadow-gray-500/30 active:scale-95",title:"Flip",children:a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),r&&a.jsx("button",{onClick:T=>{T.stopPropagation(),r(e.firestoreId||e.id,e.name)},className:"bg-red-600/90 hover:bg-red-500 text-white p-2 rounded-lg transition-all duration-200 shadow-lg hover:shadow-red-500/50 active:scale-95",title:"Remove",children:a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})]}),A&&a.jsxs("div",{className:"absolute inset-0 w-full h-full backface-hidden rotate-y-180 rounded-lg overflow-hidden shadow-md bg-gray-950/40 backdrop-blur-md border border-white/5 bg-cover bg-center",style:{backgroundImage:"url('/card-back.jpg')"},children:[a.jsx("img",{src:z,alt:`${e.name} (Back)`,className:"w-full h-full object-cover",loading:"lazy"}),a.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-all duration-200 flex flex-col justify-center items-center gap-2 p-2 backdrop-blur-sm z-30",children:[a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"font-bold text-xs text-white line-clamp-2",children:e.name})}),a.jsx("div",{className:"text-indigo-300 text-xs font-bold uppercase tracking-wider bg-indigo-900/50 px-2 py-1 rounded border border-indigo-500/30",children:"Click to Flip"})]})]})]})})},VF=({cards:e,isMixed:t})=>{const[r,n]=y.useState({key:"name",direction:"asc"}),s=y.useMemo(()=>{let d=[...e];return r.key&&d.sort((h,m)=>{let p=h[r.key],x=m[r.key];return r.key==="price"?(p=parseFloat(h.prices?.usd||0),x=parseFloat(m.prices?.usd||0)):r.key==="type"?(p=h.type_line||"",x=m.type_line||""):r.key==="set"&&(p=h.set_name||"",x=m.set_name||""),p<x?r.direction==="asc"?-1:1:p>x?r.direction==="asc"?1:-1:0}),d},[e,r]),o=d=>{let h="asc";r.key===d&&r.direction==="asc"&&(h="desc"),n({key:d,direction:h})},c=d=>r.key!==d?a.jsx("svg",{className:"w-3 h-3 text-gray-700 opacity-0 group-hover:opacity-100",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):r.direction==="asc"?a.jsx("svg",{className:"w-3 h-3 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):a.jsx("svg",{className:"w-3 h-3 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),f=({label:d,sortKey:h,className:m=""})=>a.jsx("th",{className:`px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer group hover:text-white transition-colors select-none ${m}`,onClick:()=>o(h),children:a.jsxs("div",{className:"flex items-center gap-2",children:[d,c(h)]})});return a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[1000px] border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-800",children:[a.jsx(f,{label:"Card Name",sortKey:"name"}),a.jsx(f,{label:"Set",sortKey:"set"}),a.jsx(f,{label:"Type",sortKey:"type"}),a.jsx(f,{label:"Rarity",sortKey:"rarity"}),a.jsx(f,{label:"Market Price",sortKey:"price"}),a.jsx(f,{label:"Paid",sortKey:"price_bought"}),t&&a.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Owner"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Tags"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800/50",children:s.map(d=>a.jsxs("tr",{className:"group hover:bg-gray-800/30 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 flex-shrink-0 relative rounded overflow-hidden mr-4 border border-gray-700 bg-gray-900 group-hover:scale-150 group-hover:z-10 transition-all origin-left",children:a.jsx("img",{className:"h-full w-full object-cover",src:d.image_uri||d.image_uris?.small,alt:""})}),a.jsxs("div",{className:"ml-0",children:[a.jsx("div",{className:"text-sm font-bold text-white group-hover:text-indigo-300 transition-colors",children:d.name}),a.jsxs("div",{className:"text-xs text-gray-500 font-mono",children:["x",d.count]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-800 text-gray-300 border border-gray-700",children:[a.jsx("svg",{className:"mr-1.5 h-3 w-3 text-indigo-400",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zm0 9l2.5-1.25L12 8.5l-2.5 1.25L12 11zm0 2.5l-5-2.5-5 2.5L12 22l10-8.5-5-2.5-5 2.5z"})}),d.set_name]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400 truncate max-w-[200px]",title:d.type_line,children:d.type_line}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`
                                    inline-flex items-center px-2 py-0.5 rounded text-xs font-bold uppercase tracking-wide
                                    ${d.rarity==="mythic"?"text-orange-400 bg-orange-900/10 border border-orange-500/20":d.rarity==="rare"?"text-yellow-400 bg-yellow-900/10 border border-yellow-500/20":d.rarity==="uncommon"?"text-blue-400 bg-blue-900/10 border border-blue-500/20":"text-gray-400 bg-gray-800 border border-gray-700"}
                                `,children:d.rarity})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-400 font-mono",children:["$",parseFloat(d.prices?.usd||0).toFixed(2)]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400 font-mono",children:d.price_bought?`$${parseFloat(d.price_bought).toFixed(2)}`:"-"}),t&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",title:d.owner_username,children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-600 flex items-center justify-center text-white text-[10px] font-bold",children:d.owner_username?d.owner_username[0].toUpperCase():"?"}),a.jsx("span",{className:"text-xs text-gray-400 truncate max-w-[80px]",children:d.owner_username})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[(d.tags&&typeof d.tags=="string"?JSON.parse(d.tags):d.tags||[]).map((h,m)=>a.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] bg-indigo-500/20 text-indigo-300 border border-indigo-500/30",children:h},m)),(!d.tags||Array.isArray(d.tags)&&d.tags.length===0)&&a.jsx("span",{className:"text-gray-600 text-xs italic",children:"No tags"})]})})]},d.id||d.firestoreId))})]})})},qF=({mode:e,onChange:t})=>a.jsxs("div",{className:"bg-gray-900 p-1 rounded-xl flex border border-gray-800",children:[a.jsx("button",{onClick:()=>t("folder"),className:`p-2 rounded-lg transition-all ${e==="folder"?"bg-indigo-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,title:"Folder Group View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),a.jsx("button",{onClick:()=>t("grid"),className:`p-2 rounded-lg transition-all ${e==="grid"?"bg-indigo-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,title:"Grid View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),a.jsx("button",{onClick:()=>t("table"),className:`p-2 rounded-lg transition-all ${e==="table"?"bg-indigo-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,title:"Table List View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]}),KF=({isOpen:e,onClose:t})=>{const{currentUser:r}=vt(),{addToast:n}=rn(),{refreshCollection:s}=da(),[o,c]=y.useState(""),[f,d]=y.useState([]),[h,m]=y.useState(!1),[p,x]=y.useState("input"),[w,j]=y.useState([]),[N,S]=y.useState(""),[C,A]=y.useState(!1),[E,z]=y.useState([]),P=y.useRef(null),B=O=>{const U=O.trim();if(!U)return null;const D=U.split(/[,\t]/).map(re=>re.trim());if(D.length<1)return null;const q=D[0],Z=D[1]||null,V=D[2]||null,X=D[3]||null;return{count:1,name:q,set:Z,collector_number:V,tag:X,mode:"unified"}},T=async()=>{if(o.trim()){m(!0);try{const U=o.split(`
`).map(B).filter(Boolean),D=await Promise.all(U.map(async q=>{try{let Z="";if(q.set&&q.collector_number)Z=`https://api.scryfall.com/cards/${q.set.toLowerCase()}/${q.collector_number}`;else{let X=q.name;q.set&&(X+=` set:${q.set}`),Z=`https://api.scryfall.com/cards/named?fuzzy=${encodeURIComponent(X)}`}const V=await fetch(Z);if(V.ok){const X=await V.json();return{...q,valid:!0,scryfallId:X.id,data:X,image:X.image_uris?.small||X.card_faces?.[0]?.image_uris?.small}}else{if(q.set&&q.collector_number){const X=await fetch(`https://api.scryfall.com/cards/named?fuzzy=${encodeURIComponent(q.name)}`);if(X.ok){const re=await X.json();return{...q,valid:!0,scryfallId:re.id,data:re,image:re.image_uris?.small||re.card_faces?.[0]?.image_uris?.small,warning:"Exact match failed, found by name."}}}return{...q,valid:!1}}}catch{return{...q,valid:!1}}}));d(D),x("preview")}catch{n("Failed to parse cards","error")}finally{m(!1)}}},R=O=>{const U=O.target.files[0];if(!U)return;const D=new FileReader;D.onload=q=>{c(q.target.result)},D.readAsText(U)},$=async()=>{A(!0);const O=f.filter(U=>U.valid);try{const U=O.map(Z=>{const V=[...w];return Z.tag&&!V.includes(Z.tag)&&V.push(Z.tag),{name:Z.data.name,scryfall_id:Z.scryfallId,set_code:Z.data.set,collector_number:Z.data.collector_number,image_uri:Z.data.image_uris?.normal||Z.data.card_faces?.[0]?.image_uris?.normal,count:Z.count,data:Z.data,tags:JSON.stringify(V)}}),D=await r.getIdToken();if(!(await fetch("http://localhost:3000/api/collection/batch",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify({cards:U,mode:"merge"})})).ok)throw new Error("Import failed");z(U),x("success"),s(),n(`Successfully imported ${O.length} cards!`,"success")}catch(U){console.error(U),n("Import failed. Check console.","error")}finally{A(!1)}},I=O=>{O.key==="Enter"&&N.trim()&&(w.includes(N.trim())||j([...w,N.trim()]),S(""))};return e?qr.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-gray-900 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col border border-white/10",children:[a.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-white",children:p==="success"?"Import Complete":"Bulk Import"}),a.jsx("p",{className:"text-gray-400",children:p==="success"?`Successfully added ${E.length} cards to your collection.`:"Import cards from CSV or text list."})]}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:[p==="input"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl text-blue-200 text-sm",children:[a.jsx("p",{className:"font-bold mb-2",children:"Supported Formats:"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-xs uppercase text-blue-400 mb-1",children:"CSV (Recommended)"}),a.jsxs("code",{className:"block bg-black/30 p-2 rounded text-xs opacity-80",children:["Name, Set, CN, Tag",a.jsx("br",{}),"Sol Ring, CMD, 45, Mana Rock",a.jsx("br",{}),"Black Lotus, LEA, 1, Power 9"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-xs uppercase text-blue-400 mb-1",children:"Text List"}),a.jsxs("code",{className:"block bg-black/30 p-2 rounded text-xs opacity-80",children:["Name, Set, CN, Tag",a.jsx("br",{}),"Sol Ring, CMD, 45, Mana Rock",a.jsx("br",{}),"Command Tower, CMD, , Base"]})]})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("button",{onClick:()=>P.current.click(),className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 border border-gray-600 rounded-lg text-sm font-bold text-white flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Upload CSV / Text File"]}),a.jsx("input",{type:"file",ref:P,onChange:R,accept:".csv,.txt",className:"hidden"})]}),a.jsx("textarea",{value:o,onChange:O=>c(O.target.value),placeholder:"Paste your list here...",className:"w-full h-80 bg-gray-800/50 border border-gray-700 text-gray-200 p-4 rounded-xl font-mono focus:ring-2 focus:ring-indigo-500 outline-none resize-none text-sm"})]}),p==="preview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700",children:[a.jsx("label",{className:"block text-xs font-bold uppercase tracking-widest text-gray-500 mb-2",children:"Apply Tags to Batch"}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[w.map(O=>a.jsxs("span",{className:"bg-indigo-600 text-white px-2 py-1 rounded text-sm flex items-center gap-1",children:[O,a.jsx("button",{onClick:()=>j(w.filter(U=>U!==O)),className:"hover:text-red-300",children:""})]},O)),a.jsx("input",{type:"text",placeholder:"Type tag & Enter...",value:N,onChange:O=>S(O.target.value),onKeyDown:I,className:"bg-transparent border-none focus:ring-0 text-white placeholder-gray-600 text-sm min-w-[120px]"})]})]}),a.jsx("div",{className:"bg-black/20 rounded-xl overflow-hidden border border-gray-800",children:a.jsxs("table",{className:"w-full text-left text-sm text-gray-400",children:[a.jsx("thead",{className:"bg-gray-800/50 text-gray-500 font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3",children:"Card"}),a.jsx("th",{className:"p-3",children:"Set"}),a.jsx("th",{className:"p-3 text-center",children:"Qty"}),a.jsx("th",{className:"p-3",children:"Matched Tag"}),a.jsx("th",{className:"p-3 text-right",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:f.map((O,U)=>a.jsxs("tr",{className:O.valid?"":"bg-red-900/10",children:[a.jsxs("td",{className:"p-3 flex items-center gap-3",children:[O.image?a.jsx("img",{src:O.image,className:"w-8 h-8 rounded object-cover",alt:""}):a.jsx("div",{className:"w-8 h-8 bg-gray-800 rounded flex items-center justify-center text-xs",children:"?"}),a.jsxs("div",{children:[a.jsx("div",{className:O.valid?"text-white font-bold":"text-red-400 line-through",children:O.name}),O.warning&&a.jsx("div",{className:"text-[10px] text-yellow-500",children:O.warning})]})]}),a.jsx("td",{className:"p-3",children:O.data?.set_name||O.set||"-"}),a.jsx("td",{className:"p-3 text-center font-mono",children:O.count}),a.jsx("td",{className:"p-3",children:O.tag&&a.jsx("span",{className:"text-xs bg-gray-700 px-1 rounded text-gray-300",children:O.tag})}),a.jsx("td",{className:"p-3 text-right",children:O.valid?a.jsx("span",{className:"text-green-400",children:"Ready"}):a.jsx("span",{className:"text-red-500",children:"Not Found"})})]},U))})]})})]}),p==="success"&&a.jsxs("div",{className:"animate-fade-in",children:[a.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 p-4 rounded-xl text-center mb-6",children:[a.jsx("div",{className:"text-5xl mb-2",children:""}),a.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Import Successful!"}),a.jsx("p",{className:"text-green-200 text-sm",children:"Your new cards have been added to the collection."})]}),a.jsx("div",{className:"bg-black/20 rounded-xl overflow-hidden border border-gray-800 max-h-[50vh] overflow-y-auto",children:a.jsxs("table",{className:"w-full text-left text-sm text-gray-400",children:[a.jsx("thead",{className:"bg-gray-800/50 text-gray-500 font-bold sticky top-0 bg-gray-900 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3",children:"Card"}),a.jsx("th",{className:"p-3",children:"Set"}),a.jsx("th",{className:"p-3 text-center",children:"Qty"}),a.jsx("th",{className:"p-3",children:"Applied Tags"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:E.map((O,U)=>a.jsxs("tr",{children:[a.jsxs("td",{className:"p-3 flex items-center gap-3",children:[a.jsx("img",{src:O.image_uri,className:"w-8 h-8 rounded object-cover",alt:""}),a.jsx("span",{className:"text-white font-bold",children:O.name})]}),a.jsx("td",{className:"p-3",children:O.set_code?.toUpperCase()}),a.jsx("td",{className:"p-3 text-center font-mono",children:O.count}),a.jsx("td",{className:"p-3",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:JSON.parse(O.tags).map(D=>a.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-indigo-500/20 text-indigo-300 border border-indigo-500/30",children:D},D))})})]},U))})]})})]})]}),a.jsx("div",{className:"p-6 border-t border-gray-800 flex justify-between bg-gray-900/50 rounded-b-2xl",children:p==="input"?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:t,className:"px-6 py-3 font-bold text-gray-400 hover:text-white",children:"Cancel"}),a.jsx("button",{onClick:T,disabled:h||!o.trim(),className:"bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-8 py-3 rounded-xl font-bold transition-all shadow-lg flex items-center gap-2",children:h?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Review Cards"]}):"Review Cards"})]}):p==="preview"?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>x("input"),className:"px-6 py-3 font-bold text-gray-400 hover:text-white",children:"Back to Edit"}),a.jsx("button",{onClick:$,disabled:C||f.filter(O=>O.valid).length===0,className:"bg-green-600 hover:bg-green-500 disabled:opacity-50 text-white px-8 py-3 rounded-xl font-bold transition-all shadow-lg flex items-center gap-2",children:C?"Importing...":`Import ${f.filter(O=>O.valid).length} Cards`})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{}),a.jsx("button",{onClick:t,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-xl font-bold transition-all shadow-lg",children:"Done"})]})})]})}),document.body):null},YF=e=>{const t=e.toLowerCase(),r=[];let n="Smart Binder",s="",o="blue",c=`Generated from "${e}"`;(t.includes("red")||t.includes("fire")||t.includes("mountain")||t.includes("burn"))&&(o="red",t.includes("goblin")||(n="Red Collection")),(t.includes("green")||t.includes("forest")||t.includes("elf")||t.includes("nature"))&&(o="green",t.includes("elf")||(n="Green Collection")),(t.includes("blue")||t.includes("island")||t.includes("control")||t.includes("water"))&&(o="blue",n="Blue Collection"),(t.includes("black")||t.includes("swamp")||t.includes("death")||t.includes("grave"))&&(o="purple",n="Black Collection"),(t.includes("white")||t.includes("plains")||t.includes("light")||t.includes("angel"))&&(o="gray",n="White Collection"),t.includes("commander")||t.includes("legend")||t.includes("edh")?(r.push({field:"type",operator:"contains",value:"Legendary Creature"}),s="",n="Commanders",(t.includes("potential")||t.includes("candidate"))&&(n="Potential Commanders")):t.includes("creature")&&(r.push({field:"type",operator:"contains",value:"Creature"}),n==="Smart Binder"&&(n="Creatures",s="")),t.includes("land")&&(r.push({field:"type",operator:"contains",value:"Land"}),s="",n="Lands"),(t.includes("artifact")||t.includes("rock"))&&(r.push({field:"type",operator:"contains",value:"Artifact"}),s="",n="Artifacts"),t.includes("enchantment")&&(r.push({field:"type",operator:"contains",value:"Enchantment"}),s="",n="Enchantments"),t.includes("goblin")&&(r.push({field:"type",operator:"contains",value:"Goblin"}),s="",n="Goblin Tribe",o="red"),(t.includes("elf")||t.includes("elves"))&&(r.push({field:"type",operator:"contains",value:"Elf"}),s="",n="Elven Tribe",o="green"),t.includes("not in deck")||t.includes("unused")||t.includes("spare")||t.includes("binder fodder")?(r.push({field:"in_deck",operator:"is",value:"false"}),n==="Smart Binder"?n="Unused Cards":n=`Unused ${n}`):(t.includes("in deck")||t.includes("used")||t.includes("active"))&&(r.push({field:"in_deck",operator:"is",value:"true"}),n=`Active ${n}`),(t.includes("expensive")||t.includes("value")||t.includes("money")||t.includes("high end")||t.includes("sell")&&!t.includes("not")&&!t.includes("dont")&&!t.includes("wouldnt"))&&(r.push({field:"price",operator:"gt",value:"5.00"}),s="",n.includes("Commander")||(n="High Value")),(t.includes("bulk")||t.includes("cheap")||t.includes("pauper")||t.includes("sell")&&(t.includes("not")||t.includes("dont")||t.includes("wouldnt")))&&(r.push({field:"price",operator:"lt",value:"1.00"}),s="",n="Bulk Storage"),t.includes("trade")&&(r.some(d=>d.field==="in_deck")||r.push({field:"in_deck",operator:"is",value:"false"}),n="Trade Binder",s="");const f=[];return t.includes("rare")&&f.push("rare"),t.includes("mythic")&&f.push("mythic"),f.length>0&&(r.push({field:"rarity",operator:"in",value:f}),(!s||s==="")&&(s="")),(t.includes("duplicate")||t.includes("playset")||t.includes("extra")||t.includes("few of")||t.includes("many"))&&(r.push({field:"count",operator:"gt",value:"4"}),n==="Smart Binder"&&(n="Trade Stock"),s=""),r.length===0&&r.push({field:"name",operator:"contains",value:e}),{id:`ai-${Date.now()}`,name:n,description:c,icon:s,color:o,rules:r}},j0={string:[{id:"contains",label:"contains"},{id:"is",label:"is exactly"},{id:"not",label:"is not"}],number:[{id:"gt",label:"is greater than"},{id:"lt",label:"is less than"},{id:"eq",label:"is exactly"}],select:[{id:"in",label:"is one of"},{id:"not_in",label:"is none of"}],color:[{id:"contains",label:"contains"},{id:"contains_any",label:"contains any of"},{id:"is_exactly",label:"is exactly"}],boolean:[{id:"is",label:"is"}]},N0=[{id:"name",label:"Name",type:"string"},{id:"colors",label:"Color Identity",type:"color"},{id:"rarity",label:"Rarity",type:"select",options:["common","uncommon","rare","mythic"]},{id:"type",label:"Type Line",type:"string"},{id:"price",label:"Market Price ($)",type:"number"},{id:"cmc",label:"Mana Value (CMC)",type:"number"},{id:"set",label:"Set Code",type:"string"},{id:"count",label:"Quantity",type:"number"},{id:"in_deck",label:"In a Deck?",type:"boolean",options:[{id:"true",label:"In a Deck"},{id:"false",label:"Not in a Deck"}]}],XF=({rules:e=[],onChange:t})=>{const r=()=>{const c={field:"name",operator:"contains",value:""};t([...e,c])},n=(c,f)=>{const d=[...e];if(d[c]={...d[c],...f},f.field){const h=N0.find(p=>p.id===f.field),m=j0[h.type]||j0.string;d[c].operator=m[0].id,d[c].value=h.type==="select"?[]:h.type==="color"?[]:h.type==="boolean"?h.options[0].id:""}t(d)},s=c=>{t(e.filter((f,d)=>d!==c))},o=(c,f)=>{const d=e[c].value||[],h=d.includes(f)?d.filter(m=>m!==f):[...d,f].sort((m,p)=>"WUBRG".indexOf(m)-"WUBRG".indexOf(p));n(c,{value:h})};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-gray-500",children:"Logic Rules"}),a.jsx("button",{onClick:r,className:"text-[10px] font-bold bg-indigo-600/20 text-indigo-400 border border-indigo-500/30 px-3 py-1 rounded-full hover:bg-indigo-600 hover:text-white transition-all",children:"+ Add Condition"})]}),a.jsxs("div",{className:"space-y-3",children:[e.map((c,f)=>{const d=N0.find(m=>m.id===c.field)||N0[0],h=j0[d.type]||j0.string;return a.jsxs("div",{className:"group flex flex-col sm:flex-row items-start sm:items-center gap-2 bg-gray-950/40 p-3 rounded-2xl border border-gray-800/50 hover:border-gray-700 transition-all",children:[a.jsx("div",{className:"w-12 text-[10px] font-black uppercase text-indigo-500/60",children:f===0?"IF":"AND"}),a.jsx("select",{value:c.field,onChange:m=>n(f,{field:m.target.value}),className:"bg-gray-950/50 border border-white/5 text-white text-xs font-black rounded-xl px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",children:N0.map(m=>a.jsx("option",{value:m.id,children:m.label},m.id))}),a.jsx("select",{value:c.operator,onChange:m=>n(f,{operator:m.target.value}),className:"bg-gray-950/50 border border-white/5 text-indigo-400 text-xs font-bold rounded-xl px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",children:h.map(m=>a.jsx("option",{value:m.id,children:m.label},m.id))}),a.jsx("div",{className:"flex-1 min-w-[150px]",children:d.type==="color"?a.jsx("div",{className:"flex gap-1",children:"WUBRGC".split("").map(m=>a.jsx("button",{onClick:()=>o(f,m),className:`w-7 h-7 rounded-full flex items-center justify-center transition-all border ${c.value?.includes(m)?"bg-indigo-600 border-indigo-400 shadow-[0_0_10px_rgba(79,70,229,0.4)]":"bg-gray-800 border-gray-700 text-gray-500 hover:border-gray-500"}`,children:a.jsx("i",{className:`ms ms-${m.toLowerCase()} ms-cost text-xs ${c.value?.includes(m)?"text-white":""}`})},m))}):d.type==="select"?a.jsx("div",{className:"flex flex-wrap gap-1",children:d.options.map(m=>a.jsx("button",{onClick:()=>{const p=c.value||[],x=p.includes(m)?p.filter(w=>w!==m):[...p,m];n(f,{value:x})},className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase transition-all border ${c.value?.includes(m)?"bg-indigo-600/20 border-indigo-500 text-indigo-400":"bg-gray-800 border-gray-700 text-gray-500"}`,children:m},m))}):d.type==="boolean"?a.jsx("div",{className:"flex gap-1",children:d.options.map(m=>a.jsx("button",{onClick:()=>n(f,{value:m.id}),className:`px-3 py-1 rounded-lg text-[10px] font-bold transition-all border ${c.value===m.id?"bg-indigo-600 border-indigo-400 text-white":"bg-gray-800 border-gray-700 text-gray-500 hover:border-gray-600"}`,children:m.label},m.id))}):a.jsx("input",{type:d.type==="number"?"number":"text",value:c.value,placeholder:"Value...",onChange:m=>n(f,{value:m.target.value}),className:"w-full bg-gray-900/50 border-none text-white text-xs rounded-lg px-3 py-1.5 focus:ring-2 focus:ring-indigo-500 outline-none"})}),a.jsx("button",{onClick:()=>s(f),className:"p-1 px-2 text-gray-600 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all text-sm",title:"Remove Rule",children:""})]},f)}),e.length===0&&a.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-800 rounded-3xl",children:[a.jsx("p",{className:"text-gray-600 text-sm font-medium italic",children:"No rules defined. This binder will be empty or use manual selection."}),a.jsx("button",{onClick:r,className:"text-indigo-400 text-xs font-bold mt-2 hover:underline",children:"+ Click to create your first rule"})]})]}),a.jsxs("div",{className:"mt-4 p-4 bg-indigo-950/10 border border-indigo-900/20 rounded-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-400",children:"Binder Recipe Output"})]}),a.jsx("button",{onClick:()=>setShowRaw(!showRaw),className:"text-[10px] font-bold text-gray-500 hover:text-white transition-colors uppercase tracking-wider",children:showRaw?"Show Preview":"Import / Export"})]}),showRaw?a.jsxs("div",{children:[a.jsx("textarea",{value:JSON.stringify(e,null,2),onChange:c=>{try{const f=JSON.parse(c.target.value);Array.isArray(f)&&t(f)}catch{}},className:"w-full h-32 bg-gray-900/50 border border-indigo-500/30 rounded-xl p-3 text-[10px] font-mono text-indigo-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 resize-y",placeholder:"Paste rule JSON here..."}),a.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Copy this JSON to share rules between binders. Paste existing JSON to load it."})]}):a.jsx("div",{className:"font-mono text-[10px] text-gray-500 break-all leading-relaxed select-text cursor-text active:text-indigo-400 transition-colors",onClick:()=>{navigator.clipboard.writeText(JSON.stringify(e,null,2))},title:"Click to copy JSON to clipboard",children:e.length>0?a.jsxs(a.Fragment,{children:["SELECT * FROM collection WHERE user_id = current_user",e.map((c,f)=>a.jsxs("span",{className:"text-indigo-300/60 block ml-4",children:["AND ",c.field," ",c.operator," '",Array.isArray(c.value)?c.value.join(", "):c.value,"'"]},f))]}):"-- No rules defined yet --"})]})]})},yn={METHOD:1,CONFIG:2,REVIEW:3},JF=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],QF=({isOpen:e,onClose:t,selectedCards:r=[],editingBinder:n=null})=>{const{addToast:s}=rn();da();const[o,c]=y.useState(yn.METHOD),[f,d]=y.useState(!1),[h,m]=y.useState(""),[p,x]=y.useState("collection"),[w,j]=y.useState("emoji"),[N,S]=y.useState(""),[C,A]=y.useState("blue"),[E,z]=y.useState([]),[P,B]=y.useState([]),[T,R]=y.useState(!1);y.useEffect(()=>{e&&(n?(c(yn.CONFIG),m(n.name||""),x(n.type||"collection"),j(n.icon_type||"emoji"),S(n.icon_value||""),A(n.color_preference||"blue"),B(n.rules?typeof n.rules=="string"?JSON.parse(n.rules):n.rules:[]),R(!!n.rules),z([])):(c(yn.METHOD),m(""),x("collection"),j("emoji"),S(""),A("blue"),z(r||[]),B([]),R(!1)),I([]))},[e,n]);const[$,I]=y.useState([]),[O,U]=y.useState(""),[D,q]=y.useState(!1),Z=async()=>{O.trim()&&(q(!0),I([]),setTimeout(()=>{const G=YF(O);I([G]),q(!1)},800))},V=G=>{m(G.name),S(G.icon),A(G.color),B(G.rules),R(!0),c(yn.CONFIG)},X=async()=>{d(!0);try{const G={name:h,type:p,icon_type:w,icon_value:N,color_preference:C,rules:T?P:null};let ee;if(n?(await Fe.updateBinder(n.id,G),ee=n.id):ee=(await Fe.post("/api/binders",G)).id,E.length>0){const Q=E.map(ae=>ae.firestoreId||ae.id);await Fe.put("/api/collection/batch-update",{cardIds:Q,binderId:ee})}s(n?"Binder updated!":"Binder created successfully!","success"),t()}catch(G){console.error("[BinderWizard] Submit error:",G),s("Failed to save binder","error")}finally{d(!1)}},re=async()=>{if(n&&window.confirm(`Are you sure you want to delete "${n.name}"? This will NOT delete the cards inside.`)){d(!0);try{await Fe.deleteBinder(n.id),s("Binder deleted","success"),t()}catch(G){console.error("[BinderWizard] Delete error:",G),s("Failed to delete binder","error")}finally{d(!1)}}},fe=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:()=>{R(!1),c(yn.CONFIG)},className:"p-6 bg-gray-950/40 hover:bg-indigo-900/10 border border-white/5 hover:border-indigo-500/50 rounded-3xl text-left transition-all group relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:a.jsx("svg",{className:"w-24 h-24",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})})}),a.jsx("div",{className:"w-14 h-14 bg-gray-800 rounded-2xl flex items-center justify-center text-3xl mb-4 group-hover:scale-110 transition-transform shadow-xl",children:""}),a.jsx("h3",{className:"text-xl font-black text-white mb-2",children:"Manual Binder"}),a.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:"Classic storage. Move cards in and out exactly how you want."})]}),a.jsxs("div",{className:"p-6 bg-indigo-950/20 border border-indigo-500/20 rounded-3xl relative overflow-hidden flex flex-col h-full",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:a.jsx("svg",{className:"w-24 h-24",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.381z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[a.jsx("div",{className:"w-14 h-14 bg-indigo-600/20 text-indigo-400 rounded-2xl flex items-center justify-center text-3xl mb-4 shadow-xl shadow-indigo-900/20",children:""}),a.jsx("h3",{className:"text-xl font-black text-white mb-2",children:"Smart Creator"}),a.jsxs("p",{className:"text-gray-400 text-sm leading-relaxed mb-6",children:["Describe what you want, and AI will build the rules for you. ",a.jsx("button",{onClick:()=>window.open("https://github.com/TristinParker/MTGLibrary/blob/main/docs/SMART_BINDERS.md","_blank"),className:"text-indigo-400 hover:text-indigo-300 underline md:hidden",children:"What is this?"})]}),a.jsx("div",{className:"mt-auto",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:O,onChange:G=>U(G.target.value),placeholder:'e.g., "Red Goblins over $5"',className:"w-full bg-black/40 border border-indigo-500/30 rounded-xl pl-4 pr-12 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all text-sm",onKeyDown:G=>G.key==="Enter"&&Z()}),a.jsx("button",{onClick:Z,disabled:!O.trim()||D,className:"absolute right-1 top-1 bottom-1 px-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-all flex items-center justify-center",children:D?a.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})})]})]})]}),(D||$.length>0)&&a.jsxs("div",{className:"mt-8 space-y-4 animate-fade-in-up",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"h-px bg-white/10 flex-1"}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-400",children:"Suggested Blueprints"}),a.jsx("div",{className:"h-px bg-white/10 flex-1"})]}),D?a.jsxs("div",{className:"py-8 flex flex-col items-center",children:[a.jsxs("div",{className:"relative w-16 h-16",children:[a.jsx("div",{className:"absolute inset-0 border-4 border-indigo-500/20 rounded-full"}),a.jsx("div",{className:"absolute inset-0 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})]}),a.jsx("p",{className:"mt-4 text-indigo-400 font-mono text-xs animate-pulse",children:"Generating rules..."})]}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:$.map(G=>a.jsxs("button",{onClick:()=>V(G),className:"p-4 bg-gray-900/60 hover:bg-gray-800 border border-white/5 hover:border-indigo-500/30 rounded-2xl flex items-center gap-4 transition-all text-left group shadow-lg",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-transform group-hover:scale-110",style:{backgroundColor:`rgba(${G.color==="purple"?"139, 92, 246":G.color==="green"?"16, 185, 129":G.color==="orange"?"249, 115, 22":"239, 68, 68"}, 0.1)`},children:G.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-bold text-white text-sm",children:G.name}),a.jsx("div",{className:"text-[10px] text-gray-500 leading-tight",children:G.description})]}),a.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-indigo-500",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M9 5l7 7-7 7"})})})]},G.id))})]})]}),Y=()=>a.jsxs("div",{className:"space-y-8 max-w-xl mx-auto",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-500 mb-2 ml-1",children:"Binder Name"}),a.jsx("input",{type:"text",value:h,onChange:G=>m(G.target.value),placeholder:"e.g., The Vault",autoFocus:!0,className:"w-full bg-gray-950 border-2 border-white/5 focus:border-indigo-500/50 text-white px-5 py-4 rounded-2xl focus:outline-none font-black text-xl transition-all shadow-inner shadow-black/40 placeholder:text-gray-800"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-500 mb-2 ml-1",children:"Icon Type"}),a.jsxs("div",{className:"flex bg-gray-950 p-1 rounded-xl border border-white/5",children:[a.jsx("button",{onClick:()=>j("emoji"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${w==="emoji"?"bg-indigo-600 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:"Emoji"}),a.jsx("button",{onClick:()=>j("mtg"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${w==="mtg"?"bg-indigo-600 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:"Symbols"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-500 mb-2 ml-1",children:"Theme Color"}),a.jsxs("div",{className:"flex gap-2 bg-gray-950 p-2 rounded-xl border border-white/5 overflow-x-auto custom-scrollbar no-scrollbar items-center",children:[["blue","red","green","purple","orange","gray"].map(G=>a.jsx("button",{onClick:()=>A(G),className:`w-6 h-6 shrink-0 rounded-full transition-all ${C===G?"ring-2 ring-white scale-110 shadow-lg":"opacity-40 hover:opacity-100"}`,style:{backgroundColor:G==="blue"?"#3B82F6":G==="red"?"#EF4444":G==="green"?"#10B981":G==="purple"?"#8B5CF6":G==="orange"?"#F59E0B":"#6B7280"}},G)),a.jsx("div",{className:"w-px h-6 bg-white/10 mx-1"}),a.jsx("div",{className:"relative group",children:a.jsx("div",{className:`w-6 h-6 rounded-full border border-white/20 flex items-center justify-center overflow-hidden ${["blue","red","green","purple","orange","gray"].includes(C)?"":"ring-2 ring-white"}`,children:a.jsx("input",{type:"color",value:["blue","red","green","purple","orange","gray"].includes(C)?"#ffffff":C,onChange:G=>A(G.target.value),className:"w-8 h-8 -m-1 cursor-pointer"})})})]})]})]})]}),a.jsx("div",{className:"bg-gray-950 rounded-3xl p-5 border border-white/5 shadow-inner shadow-black/40",children:a.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-10 gap-3 h-40 overflow-y-auto custom-scrollbar pr-2",children:w==="emoji"?JF.map(G=>a.jsx("button",{onClick:()=>S(G),className:`w-10 h-10 rounded-xl flex items-center justify-center text-xl transition-all ${N===G?"bg-indigo-600 shadow-lg shadow-indigo-900/40":"bg-gray-900 border border-white/5 text-gray-500 hover:bg-gray-800 hover:text-white"}`,children:G},G)):["ms-w","ms-u","ms-b","ms-r","ms-g","ms-c","ms-wp","ms-up","ms-bp","ms-rp","ms-gp","ms-s","ms-x","ms-e","ms-planeswalker","ms-land","ms-artifact","ms-enchantment","ms-creature","ms-instant","ms-sorcery","ms-multiple","ms-guild-azorius","ms-guild-selesnya","ms-guild-boros","ms-guild-dimir","ms-guild-simic","ms-guild-gruul","ms-guild-rakdos","ms-guild-orzhov","ms-guild-izzet","ms-guild-golgari","ms-clan-abzan","ms-clan-jeskai","ms-clan-sultai","ms-clan-mardu","ms-clan-temur","ms-shard-bant","ms-shard-esper","ms-shard-grixis","ms-shard-jund","ms-shard-naya","ms-p","ms-chaos","ms-loyalty-up","ms-loyalty-down","ms-loyalty-zero","ms-tap","ms-untap","ms-flashback","ms-dfc-day","ms-dfc-night"].map(G=>a.jsx("button",{onClick:()=>S(G),className:`w-10 h-10 rounded-xl flex items-center justify-center text-xl transition-all ${N===G?"bg-indigo-600 shadow-lg shadow-indigo-900/40 text-white":"bg-gray-900 border border-white/5 text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:a.jsx("i",{className:`ms ${G} ms-cost`})},G))})}),a.jsxs("div",{className:"bg-gray-950 rounded-3xl p-6 border border-white/5 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-xl transition-colors ${T?"bg-indigo-600/20 text-indigo-400":"bg-gray-800 text-gray-500"}`,children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-bold text-sm",children:"Automated Smart Rules"}),a.jsx("p",{className:"text-[10px] text-gray-500",children:"Auto-organize collection based on conditions."})]})]}),a.jsx("button",{onClick:()=>R(!T),className:`w-12 h-6 rounded-full transition-all relative ${T?"bg-indigo-600":"bg-gray-800"}`,children:a.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all shadow-md ${T?"left-7":"left-1"}`})})]}),T&&a.jsx("div",{className:"pt-4 border-t border-white/5 animate-fade-in",children:a.jsx(XF,{rules:P,onChange:B})})]})]}),H=()=>a.jsxs("div",{className:"text-center py-10 space-y-8 animate-fade-in",children:[a.jsxs("div",{className:"relative inline-block",children:[a.jsx("div",{className:`absolute inset-0 bg-${C}-500/20 blur-3xl rounded-full scale-150 animate-pulse`}),a.jsxs("div",{className:"relative w-32 h-32 bg-gray-900 border-4 border-white/10 rounded-[2.5rem] flex items-center justify-center text-6xl shadow-2xl z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent pointer-events-none"}),N.startsWith("ms")?a.jsx("i",{className:`ms ${N} ms-2x`}):N]}),a.jsx("div",{className:"absolute -bottom-2 -right-2 px-3 py-1 bg-indigo-600 text-white text-[10px] font-black uppercase rounded-full shadow-lg border border-white/20 z-20",children:T?"Smart":"Manual"})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-4xl font-black text-white mb-2 leading-tight",children:h||"Unnamed Binder"}),a.jsx("p",{className:"text-gray-500 text-sm",children:T?`Smart Binder with ${P.length} rule(s)`:"Curated collection binder"})]}),a.jsx("div",{className:"bg-gray-950/40 rounded-3xl p-6 border border-white/5 max-w-sm mx-auto shadow-inner shadow-black/60",children:T?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-400",children:[a.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Recipe Preview"})]}),a.jsxs("div",{className:"space-y-2",children:[P.map((G,ee)=>a.jsxs("div",{className:"text-xs text-gray-400 bg-black/40 p-2 rounded-xl border border-white/5 flex gap-2",children:[a.jsx("span",{className:"font-bold text-gray-500 uppercase",children:ee===0?"IF":"AND"}),a.jsxs("span",{children:[G.field," ",a.jsx("span",{className:"text-indigo-400",children:G.operator})," '",Array.isArray(G.value)?G.value.join(", "):G.value,"'"]})]},ee)),P.length===0&&a.jsx("p",{className:"text-xs text-red-400 italic",children:"Warning: No rules defined! This binder will be empty."})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest text-gray-500",children:[a.jsx("span",{children:"Manifest"}),a.jsxs("span",{children:[E.length," Cards"]})]}),a.jsx("div",{className:"flex justify-center -space-x-4 pl-4 h-24 items-end pb-2",children:E.length>0?E.slice(0,5).map((G,ee)=>a.jsx("div",{className:"w-16 h-20 bg-gray-800 rounded-lg border-2 border-white/10 shadow-2xl relative transition-transform hover:-translate-y-2 overflow-hidden",style:{transform:`rotate(${(ee-2)*8}deg)`},children:G.data?.image_uris?.small||G.image_uris?.small?a.jsx("img",{src:G.data?.image_uris?.small||G.image_uris.small,className:"w-full h-full object-cover",alt:""}):null},ee)):a.jsx("div",{className:"text-gray-700 italic text-xs",children:"Empty binder (add cards later)"})}),E.length>5&&a.jsxs("div",{className:"text-[10px] text-gray-600 font-bold",children:["+ ",E.length-5," more items"]})]})})]});return e?qr.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-xl p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-gray-950 border border-white/10 rounded-[2.5rem] shadow-[0_0_100px_rgba(0,0,0,0.8)] w-full max-w-2xl flex flex-col max-h-[90vh] overflow-hidden relative",children:[a.jsx("div",{className:`absolute top-0 left-1/2 -translate-x-1/2 w-48 h-1 bg-${C}-500 blur-md opacity-30`}),a.jsxs("div",{className:"p-8 pb-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsxs("span",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-[0.3em]",children:["Step 0",o]}),a.jsx("div",{className:"h-px w-8 bg-indigo-500/30"})]}),a.jsx("h2",{className:"text-3xl font-black text-white tracking-tight",children:o===yn.METHOD?"Initialize Binder":o===yn.CONFIG?"Configure Profile":"Final Review"})]}),a.jsx("button",{onClick:t,className:"w-10 h-10 rounded-2xl bg-white/5 hover:bg-white/10 flex items-center justify-center text-gray-500 hover:text-white transition-all active:scale-90",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-8 py-4 no-scrollbar",children:[o===yn.METHOD&&fe(),o===yn.CONFIG&&Y(),o===yn.REVIEW&&H()]}),a.jsxs("div",{className:"p-8 pt-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>o>1?c(o-1):t(),className:"px-6 py-3 font-black text-gray-500 hover:text-white transition-colors text-xs uppercase tracking-widest active:scale-95",children:o===1?"Cancel":"Back"}),n&&o===yn.CONFIG&&a.jsxs("button",{onClick:re,disabled:f,className:"px-4 py-3 text-[10px] font-black text-red-500/60 hover:text-red-500 transition-colors uppercase tracking-[0.2em] flex items-center gap-2 bg-red-500/5 rounded-xl border border-red-500/10 hover:border-red-500/30",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]}),a.jsx("button",{onClick:()=>{o===yn.REVIEW?X():c(o+1)},disabled:f||o===yn.CONFIG&&!h,className:`group px-8 py-4 rounded-2xl font-black text-xs uppercase tracking-widest transition-all ${f?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-500 text-white shadow-2xl shadow-indigo-900/40 active:scale-95 flex items-center gap-3"}`,children:f?a.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}):a.jsxs(a.Fragment,{children:[o===yn.REVIEW?n?"Push Changes":"Initialize":"Proceed",a.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M14 5l7 7-7 7"})})]})})]})]})}),document.body):null},ZF=(e,t)=>!t||!Array.isArray(t)||t.length===0?!0:t.every(r=>{const{field:n,operator:s,value:o}=r;let c;switch(n){case"name":c=e.name||"";break;case"colors":c=e.data?.color_identity||[];break;case"rarity":c=e.data?.rarity||"";break;case"type":c=e.data?.type_line||"";break;case"price":c=parseFloat(e.data?.prices?.usd||0);break;case"set":c=e.data?.set_name||"";const d=e.data?.set||"";if(s==="contains")return c.toLowerCase().includes(String(o).toLowerCase())||d.toLowerCase().includes(String(o).toLowerCase());break;case"cmc":c=parseFloat(e.data?.cmc||0);break;case"count":c=parseInt(e.count||0,10);break;case"in_deck":const h=!!e.deck_id;return o==="true"?h:!h;default:c=e.data?.[n]||""}const f=Array.isArray(o)?o:String(o);switch(s){case"is":case"eq":return String(c).toLowerCase()===String(f).toLowerCase();case"not":return String(c).toLowerCase()!==String(f).toLowerCase();case"contains":return String(c).toLowerCase().includes(String(f).toLowerCase());case"gt":case"greater_than":return parseFloat(c)>parseFloat(f);case"lt":case"less_than":return parseFloat(c)<parseFloat(f);case"in":return Array.isArray(f)?f.includes(String(c).toLowerCase()):!1;case"not_in":return Array.isArray(f)?!f.includes(String(c).toLowerCase()):!0;case"contains_any":return Array.isArray(c)&&Array.isArray(f)?f.some(d=>c.includes(d)):!1;case"is_exactly":return Array.isArray(c)?JSON.stringify(c.sort())===JSON.stringify(f.sort()):!1;default:return!1}}),eH=()=>{const{userProfile:e}=vt(),{addToast:t}=rn(),r=yi(),n=new URLSearchParams(r.search).get("wishlist")==="true",[s,o]=y.useState([]),[c,f]=y.useState("me");y.useEffect(()=>{Gr.fetchIncomingPermissions().then(ne=>{const Le=[],Ke=new Set;(Array.isArray(ne)?ne:ne.data||[]).forEach(pe=>{pe.owner_id&&!Ke.has(pe.owner_id)&&(Ke.add(pe.owner_id),Le.push({id:pe.owner_id,name:pe.owner_username||"Unknown"}))}),o(Le)}).catch(ne=>console.error("Failed to fetch shared sources",ne))},[]);const d=c!=="me"&&c!=="all",h=c==="all",{cards:m,error:p,refresh:x}=da({wishlist:n,userId:c==="me"?null:c}),{binders:w,refreshBinders:j}=GF(),{decks:N}=xf(c==="me"?null:c),[S,C]=y.useState(""),[A,E]=y.useState(!1),[z,P]=y.useState(!1),B=async()=>{P(!0);try{await Fe.post("/sync/prices"),await x()}catch(ne){console.error("Sync failed",ne)}finally{P(!1)}},[T,R]=y.useState(()=>localStorage.getItem("collection_viewMode")||"grid"),[$,I]=y.useState(()=>localStorage.getItem("collection_groupingMode")||"binders"),[O,U]=y.useState(null),[D,q]=y.useState([]),[Z,V]=y.useState(!1),[X,re]=y.useState(!1),[fe,Y]=y.useState(!1),[H,G]=y.useState(!1),[ee,Q]=y.useState(!1),[ae,_e]=y.useState(null),[be,Pe]=y.useState(()=>{const ne=localStorage.getItem("collection_filters");return ne?JSON.parse(ne):{colors:[],rarity:[],types:[],sets:[],decks:[],users:[]}}),[se,Ae]=y.useState(()=>localStorage.getItem("collection_sortBy")||"added_at"),[Ce,xe]=y.useState(()=>localStorage.getItem("collection_sortOrder")||"desc"),[We,je]=y.useState(()=>parseInt(localStorage.getItem("collection_currentPage"))||1),[ke,Oe]=y.useState(()=>parseInt(localStorage.getItem("collection_itemsPerPage"))||50);Te.useEffect(()=>{localStorage.setItem("collection_viewMode",T)},[T]),Te.useEffect(()=>{localStorage.setItem("collection_groupingMode",$)},[$]),Te.useEffect(()=>{localStorage.setItem("collection_filters",JSON.stringify(be))},[be]),Te.useEffect(()=>{localStorage.setItem("collection_sortBy",se),localStorage.setItem("collection_sortOrder",Ce)},[se,Ce]),Te.useEffect(()=>{localStorage.setItem("collection_currentPage",We),localStorage.setItem("collection_itemsPerPage",ke)},[We,ke]),Te.useEffect(()=>{je(1)},[S,be,se,Ce]),y.useEffect(()=>{if(O&&O.startsWith("binder-")){const ne=O.replace("binder-","");V(!0),Fe.getBinderCards(ne).then(Le=>q(Le)).catch(Le=>t("Failed to load binder cards","error")).finally(()=>V(!1))}else q([])},[O,t]);const Me=y.useMemo(()=>{const ne=new Set;return m.forEach(Le=>{Le.set&&Le.set_name&&ne.add(JSON.stringify({value:Le.set,label:Le.set_name}))}),Array.from(ne).map(Le=>JSON.parse(Le)).sort((Le,Ke)=>Le.label.localeCompare(Ke.label))},[m]),$e=y.useMemo(()=>s.map(ne=>({value:ne.id,label:ne.name})),[s]),ze=y.useMemo(()=>N.map(ne=>({value:ne.id,label:ne.name})),[N]),Be=y.useMemo(()=>m.filter(ne=>{const Le=ne.name||"";if(S&&!Le.toLowerCase().includes(S.toLowerCase()))return!1;if(be.colors.length>0){const Ke=ne.color_identity||[],Lt=Ke.length>1,pe=Ke.length===0;if(!be.colors.some(Xe=>Xe==="C"?pe:Xe==="M"?Lt:Ke.includes(Xe)))return!1}if(be.rarity.length>0&&!be.rarity.includes(ne.rarity))return!1;if(be.types.length>0){const Ke=(ne.type_line||"").toLowerCase();if(!be.types.some(pe=>Ke.includes(pe.toLowerCase())))return!1}return!(be.sets.length>0&&!be.sets.includes(ne.set)||be.decks.length>0&&!be.decks.includes(ne.deckId)||be.users&&be.users.length>0&&!be.users.includes(ne.user_id)&&!be.users.includes(ne.owner_id))}).sort((ne,Le)=>{let Ke,Lt;switch(se){case"name":Ke=ne.name||"",Lt=Le.name||"";break;case"price":Ke=parseFloat(ne.prices?.usd||ne.prices?.usd_foil||0),Lt=parseFloat(Le.prices?.usd||Le.prices?.usd_foil||0);break;case"owner":Ke=ne.owner_username||"ME",Lt=Le.owner_username||"ME";break;default:Ke=new Date(ne.added_at||0).getTime(),Lt=new Date(Le.added_at||0).getTime()}return Ke<Lt?Ce==="asc"?-1:1:Ke>Lt?Ce==="asc"?1:-1:0}),[m,S,be,se,Ce]),qt=y.useMemo(()=>{if(T!=="folder")return[];if($==="custom"){const pe={},Re=[];Be.forEach(he=>{const ce=typeof he.tags=="string"?JSON.parse(he.tags):he.tags||[];ce.length===0?Re.push(he):ce.forEach(ve=>{pe[ve]||(pe[ve]=[]),pe[ve].push(he)})});const Xe=Object.entries(pe).map(([he,ce])=>({id:`tag-${he}`,label:he,type:"tag",cards:ce,icon:"",color:"indigo"}));return Re.length>0&&Xe.push({id:"unsorted",label:"Unsorted",type:"tag",cards:Re,icon:"",color:"gray"}),Xe.sort((he,ce)=>he.label.localeCompare(ce.label))}const ne={},Le={},Ke={};Be.forEach(pe=>{if(pe.set_name&&(ne[pe.set_name]||(ne[pe.set_name]=[]),ne[pe.set_name].push(pe)),pe.deck_id){const Se=N.find(qe=>qe.id===pe.deck_id)?.name||"Unknown Deck";Le[Se]||(Le[Se]=[]),Le[Se].push(pe)}let Re=pe.color_identity;if(typeof Re=="string")try{Re=JSON.parse(Re)}catch{Re=[]}Array.isArray(Re)||(Re=[]);const Xe={W:0,U:1,B:2,R:3,G:4},ce=Re.filter(Se=>Xe[Se]!==void 0).sort((Se,qe)=>Xe[Se]-Xe[qe]).join(""),ve=ce.length===0?"C":ce;Ke[ve]||(Ke[ve]=[]),Ke[ve].push(pe)});const Lt=[];return Object.entries(Le).forEach(([pe,Re])=>{const Xe=h&&Re[0]?.owner_username?Re[0].owner_username:null;Lt.push({id:`deck-${pe}`,label:pe,type:"deck",cards:Re,icon:"",color:"purple",sub:"Deck",ownerName:Xe})}),Object.entries(Ke).sort(([pe],[Re])=>{const Xe=pe==="C"?0:pe.length,he=Re==="C"?0:Re.length;if(Xe!==he)return Xe-he;const ce=Td(pe),ve=Td(Re);return(ce.name||"").localeCompare(ve.name||"")}).forEach(([pe,Re])=>{if(Re.length>0){const Xe=Td(pe);Lt.push({id:`color-${pe}`,label:Xe.name,type:"color",cards:Re,icon:"",pips:Xe.pips,flavor:Xe.flavor,theme:Xe.theme,color:Xe.bg?.replace("bg-","")?.split(" ")[0]||"blue",sub:"Color Identity"})}}),$==="binders"?w.map(pe=>{const Re=pe.rules?typeof pe.rules=="string"?JSON.parse(pe.rules):pe.rules:null,Xe=Re?m.filter(he=>ZF(he,Re)):m.filter(he=>String(he.binder_id)===String(pe.id));return{id:`binder-${pe.id}`,label:pe.name,type:"binder",cards:Xe,icon:pe.icon_value||"",color:pe.color_preference||"blue",sub:Re?"Smart Binder":"Collection Binder",isSmart:!!Re}}):Lt},[Be,$,T,N,w,m]),wr=(ne,Le)=>{Pe(Ke=>{const Lt=Ke[ne],pe=Lt.includes(Le)?Lt.filter(Re=>Re!==Le):[...Lt,Le];return{...Ke,[ne]:pe}})},rt=y.useMemo(()=>{const ne=qt.find(Le=>Le.id===O);return ne&&ne.type==="binder"?{...ne,cards:D}:ne},[qt,O,D]),lt=y.useMemo(()=>{if(T!=="grid")return Be;const ne=(We-1)*ke,Le=ne+ke;return Be.slice(ne,Le)},[Be,We,ke,T]),Ot=y.useMemo(()=>T!=="grid"?1:Math.ceil(Be.length/ke),[Be.length,ke,T]);return a.jsxs("div",{className:"relative min-h-screen overflow-x-hidden",children:[a.jsx("div",{className:"fixed inset-0 z-0 bg-cover bg-center transition-all duration-1000",style:{backgroundImage:"url(/MTG-Forge_Logo_Background.png)"},children:a.jsx("div",{className:"absolute inset-0 bg-gray-950/80 backdrop-blur-sm"})}),a.jsxs("div",{className:"relative z-10 max-w-[1600px] mx-auto px-4 md:px-6 py-8 space-y-8 animate-fade-in pb-24",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 bg-gray-950/40 p-4 md:p-6 rounded-3xl backdrop-blur-md border border-white/5 shadow-xl",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-4xl font-black text-white tracking-tight mb-1 md:mb-2",children:n?"My Wishlist":"My Collection"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1",children:[a.jsxs("p",{className:"text-gray-400 font-medium text-xs md:text-sm",children:[Be.length," ",Be.length===1?"card":"cards"," found  ",a.jsxs("span",{className:"text-indigo-400",children:["$",Be.reduce((ne,Le)=>ne+parseFloat(Le.prices?.usd||0)*(Le.count||1),0).toFixed(2)]})]}),a.jsxs("button",{onClick:B,disabled:z,className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-indigo-500/10 hover:bg-indigo-500/20 text-indigo-400 text-[10px] font-black uppercase tracking-widest transition-all border border-indigo-500/20 ${z?"opacity-70 cursor-wait":""}`,title:"Update prices from Scryfall",children:[a.jsx("svg",{className:`w-3 h-3 ${z?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),z?"Syncing...":"Sync Prices"]})]})]}),a.jsxs("div",{className:"flex gap-2 md:gap-3 w-full md:w-auto items-center justify-between md:justify-end",children:[a.jsx(qF,{mode:T,onChange:ne=>{R(ne),U(null)}}),!d&&a.jsxs("div",{className:"flex h-10 items-center gap-2",children:[a.jsx("div",{className:"h-6 w-px bg-gray-700 mx-1 md:mx-2"}),a.jsxs("button",{onClick:()=>G(!0),className:"flex bg-gray-800 hover:bg-gray-700 text-indigo-400 hover:text-white p-2.5 md:px-4 md:py-3 rounded-xl transition-all border border-gray-700 hover:border-indigo-500/50 items-center justify-center gap-2 group",title:"Create New Binder",children:[a.jsx("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest hidden lg:inline-block",children:"New Binder"})]}),a.jsx("button",{onClick:()=>Q(!0),className:"hidden md:flex bg-gray-900 hover:bg-indigo-900/30 text-gray-500 hover:text-indigo-400 p-2.5 md:px-3 md:py-3 rounded-xl transition-all border border-gray-800 hover:border-indigo-500/30 items-center justify-center shadow-lg",title:"Binder Guide",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("button",{onClick:()=>Y(!0),className:"flex text-gray-400 hover:text-white font-bold p-2.5 md:px-4 md:py-3 rounded-xl hover:bg-gray-800 transition-all items-center gap-2 text-xs uppercase tracking-widest",title:"Bulk Paste",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsxs("button",{onClick:()=>re(!0),className:"flex bg-indigo-600 hover:bg-indigo-500 text-white font-bold p-2.5 md:px-6 md:py-3 rounded-xl shadow-lg shadow-indigo-900/40 transition-all items-center gap-2 uppercase tracking-widest text-xs whitespace-nowrap",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),a.jsx("span",{className:"hidden md:inline-block",children:"Add Cards"})]})]})]})]}),a.jsxs("div",{className:"bg-gray-950/40 border border-white/5 rounded-3xl p-4 md:p-6 backdrop-blur-md shadow-2xl",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 md:gap-4 mb-6 justify-between",children:[a.jsxs("div",{className:"flex gap-2 flex-wrap flex-1",children:[a.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[a.jsx("input",{type:"text",placeholder:"Search cards...",value:S,onChange:ne=>C(ne.target.value),className:"w-full bg-gray-900/50 border border-gray-700 text-white px-4 py-2.5 md:py-3 pl-10 md:pl-12 rounded-xl focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all placeholder-gray-500 font-medium text-sm h-10 md:h-12"}),a.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 text-gray-400 absolute left-3 md:left-4 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),a.jsxs("select",{value:c,onChange:ne=>{f(ne.target.value),U(null)},className:"bg-gray-800 border-gray-700 text-white px-3 py-2 md:px-4 md:py-3 rounded-xl font-bold text-xs md:text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 whitespace-nowrap h-10 md:h-12",children:[a.jsx("option",{value:"me",children:"My Collection"}),a.jsx("option",{value:"all",children:"All Linked Collections"}),s.map(ne=>a.jsxs("option",{value:ne.id,children:[ne.name,"'s Collection"]},ne.id))]}),a.jsxs("select",{value:se,onChange:ne=>Ae(ne.target.value),className:"bg-gray-800 border-gray-700 text-white px-3 py-2 md:px-4 md:py-3 rounded-xl font-bold text-xs md:text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 h-10 md:h-12",children:[a.jsx("option",{value:"added_at",children:"Date Added"}),a.jsx("option",{value:"name",children:"Name"}),a.jsx("option",{value:"price",children:"Price"}),h&&a.jsx("option",{value:"owner",children:"Owner"})]}),a.jsx("button",{onClick:()=>xe(Ce==="asc"?"desc":"asc"),className:"bg-gray-800 border border-gray-700 text-gray-400 hover:text-white px-3 py-2 md:px-4 md:py-3 rounded-xl transition-all h-10 md:h-12",title:`Sort Order: ${Ce.toUpperCase()}`,children:Ce==="asc"?a.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"})}):a.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})})}),a.jsxs("button",{onClick:()=>E(!A),className:`px-4 py-2 md:px-5 md:py-3 rounded-xl border font-bold text-xs md:text-sm flex items-center gap-2 transition-all h-10 md:h-12 ${A?"bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-gray-800 border-gray-700 text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[a.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),a.jsx("span",{className:"hidden sm:inline",children:"Filters"})]})]}),T==="folder"&&!O&&a.jsx("div",{className:"flex gap-2",children:a.jsxs("div",{className:"bg-gray-900 border border-gray-700 p-1 rounded-xl flex self-start overflow-hidden",children:[a.jsx("button",{onClick:()=>I("binders"),className:`px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${$==="binders"?"bg-indigo-600 text-white":"text-gray-500 hover:text-gray-300"}`,children:"Binders"}),a.jsx("button",{onClick:()=>I("smart"),className:`px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${$==="smart"?"bg-indigo-600 text-white":"text-gray-500 hover:text-gray-300"}`,children:"Smart"}),a.jsx("button",{onClick:()=>I("custom"),className:`px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${$==="custom"?"bg-indigo-600 text-white":"text-gray-500 hover:text-gray-300"}`,children:"Tags"})]})})]}),A&&a.jsx("div",{className:"mb-8 p-6 bg-gray-900/50 rounded-2xl border border-gray-800 space-y-6 animate-fade-in-down",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"col-span-1",children:[a.jsx("label",{className:"block text-xs font-bold uppercase tracking-widest text-gray-500 mb-3",children:"Colors"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["W","U","B","R","G","C","M"].map(ne=>a.jsxs("button",{onClick:()=>wr("colors",ne),className:`
w - 8 h - 8 rounded - full border flex items - center justify - center transition - all transform hover: scale - 110
                                                    ${be.colors.includes(ne)?"ring-2 ring-indigo-500 ring-offset-2 ring-offset-gray-900 shadow-lg scale-110":"opacity-60 hover:opacity-100"}
                                                    ${ne==="W"?"bg-[#F9FAFB] text-gray-900 border-gray-300":""}
                                                    ${ne==="U"?"bg-[#3B82F6] text-white border-blue-600":""}
                                                    ${ne==="B"?"bg-[#1F2937] text-white border-gray-600":""}
                                                    ${ne==="R"?"bg-[#EF4444] text-white border-red-600":""}
                                                    ${ne==="G"?"bg-[#10B981] text-white border-green-600":""}
                                                    ${ne==="C"?"bg-gray-400 text-gray-900 border-gray-500":""}
                                                    ${ne==="M"?"bg-gradient-to-br from-yellow-400 via-red-500 to-purple-600 text-white border-purple-500":""}
`,title:ne==="C"?"Colorless":ne==="M"?"Multicolor":ne,children:[ne!=="M"&&ne!=="C"&&a.jsx("img",{src:`https://svgs.scryfall.io/card-symbols/${ne}.svg`,alt:ne,className:"w-4 h-4"}),ne==="M"&&a.jsx("span",{className:"font-bold text-xs",children:"M"}),ne==="C"&&a.jsx("span",{className:"font-bold text-xs",children:"C"})]},ne))})]}),a.jsxs("div",{className:"col-span-1",children:[a.jsx("label",{className:"block text-xs font-bold uppercase tracking-widest text-gray-500 mb-3",children:"Rarity"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["common","uncommon","rare","mythic"].map(ne=>a.jsx("button",{onClick:()=>wr("rarity",ne),className:`
                                                    px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-wider border transition-all hover:-translate-y-0.5
                                                    ${be.rarity.includes(ne)?"bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-gray-800 border-gray-700 text-gray-400 hover:border-gray-500 hover:text-white"}
                                                `,children:ne},ne))})]}),a.jsxs("div",{className:"col-span-1",children:[a.jsx("label",{className:"block text-xs font-bold uppercase tracking-widest text-gray-500 mb-3",children:"Types"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["Creature","Instant","Sorcery","Enchantment","Artifact","Planeswalker","Land"].map(ne=>a.jsx("button",{onClick:()=>wr("types",ne),className:`
                                                     px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-wider border transition-all hover:-translate-y-0.5
                                                     ${be.types.includes(ne)?"bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-gray-800 border-gray-700 text-gray-400 hover:border-gray-500 hover:text-white"}
                                                 `,children:ne},ne))})]}),a.jsxs("div",{className:"col-span-1 space-y-4",children:[a.jsx(tm,{label:"Sets",options:Me,selected:be.sets,onChange:ne=>Pe({...be,sets:ne})}),h&&a.jsx(tm,{label:"Card Owner",options:$e,selected:be.users,onChange:ne=>Pe({...be,users:ne})}),a.jsx(tm,{label:"Filter by Deck",options:ze,selected:be.decks,onChange:ne=>Pe(Le=>({...Le,decks:ne})),placeholder:"All Decks"})]})]})}),p?a.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 text-red-200 p-8 rounded-2xl text-center",children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Error Loading Collection"}),a.jsx("p",{children:p.message})]}):a.jsxs(a.Fragment,{children:[T==="folder"&&!rt&&a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6 animate-fade-in",children:[qt.map(ne=>a.jsxs("div",{onClick:()=>U(ne.id),className:"bg-gray-900/40 hover:bg-gray-800/60 border border-white/5 hover:border-indigo-500/30 rounded-2xl p-4 md:p-6 cursor-pointer transition-all hover:-translate-y-1 hover:shadow-xl group flex flex-col items-center text-center gap-2 md:gap-3 backdrop-blur-sm relative overflow-hidden",children:[a.jsx("div",{className:`absolute -top-10 -right-10 w-32 h-32 bg-${ne.color}-500/10 rounded-full blur-3xl`}),a.jsx("div",{className:"flex gap-1 mb-1 md:mb-2 group-hover:scale-110 transition-transform",children:ne.pips?ne.pips.map((Le,Ke)=>a.jsx("img",{src:`https://svgs.scryfall.io/card-symbols/${Le}.svg`,alt:Le,className:"w-6 h-6 md:w-8 md:h-8 drop-shadow-md transition-transform group-hover:scale-110"},Ke)):ne.icon&&ne.icon.startsWith("ms-")?a.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 bg-${ne.color}-900/30 text-${ne.color}-400 rounded-xl flex items-center justify-center text-xl md:text-2xl`,children:a.jsx("i",{className:`ms ${ne.icon} ms-cost`})}):a.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 bg-${ne.color}-900/30 text-${ne.color}-400 rounded-xl flex items-center justify-center text-xl md:text-2xl`,children:ne.icon})}),a.jsxs("div",{className:"z-10 px-2 mt-4",children:[a.jsx("div",{className:"text-[10px] uppercase tracking-tighter text-indigo-400 font-black mb-1",children:ne.theme||ne.sub}),a.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-indigo-300 transition-colors leading-tight",children:ne.label}),ne.flavor&&a.jsxs("p",{className:"text-[10px] text-gray-500 italic mt-2 font-serif px-2 leading-relaxed opacity-80 group-hover:opacity-100 transition-opacity",children:['"',ne.flavor,'"']}),ne.ownerName&&a.jsxs("div",{className:"mt-2 inline-flex items-center gap-1 bg-gray-950/80 text-gray-300 text-[9px] font-bold px-2 py-1 rounded-full border border-white/10",children:[a.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),ne.ownerName]})]}),a.jsxs("span",{className:"mt-4 px-3 py-1 bg-black/30 rounded-full text-xs font-mono text-gray-400 border border-white/5",children:[ne.cards.length," cards"]})]},ne.id)),qt.length===0&&a.jsx("div",{className:"col-span-full py-20 text-center text-gray-500 italic",children:"No cards match your filter criteria."})]}),T==="folder"&&rt&&a.jsxs("div",{className:"animate-fade-in",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("button",{onClick:()=>U(null),className:"p-2 bg-gray-800 hover:bg-gray-700 rounded-lg text-white transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[rt.icon," ",rt.label]}),rt.type==="binder"&&a.jsx("button",{onClick:()=>{const ne=w.find(Le=>Le.id===parseInt(O.replace("binder-","")));_e(ne),G(!0)},className:"p-2 bg-gray-800 hover:bg-gray-700 rounded-lg text-indigo-400 hover:text-white transition-colors",title:"Edit Binder Rules",children:a.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",children:rt.cards.map(ne=>a.jsx("div",{className:"h-full",children:a.jsx($d,{card:ne,decks:N,currentUser:e,showOwnerTag:h})},ne.firestoreId||ne.id))})]}),T==="grid"&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6 animate-fade-in",children:[lt.map(ne=>a.jsx("div",{className:"h-full",children:a.jsx($d,{card:ne,decks:N,currentUser:e,showOwnerTag:h})},ne.firestoreId||ne.id)),Be.length===0&&a.jsx("div",{className:"col-span-full py-20 text-center text-gray-500 italic",children:"No cards found."})]})}),T==="table"&&a.jsx("div",{className:"animate-fade-in",children:a.jsx(VF,{cards:Be,isMixed:h})})]})]})]}),a.jsx(b2,{isOpen:X,onClose:()=>re(!1),onAddCard:()=>x()}),a.jsx(KF,{isOpen:fe,onClose:()=>Y(!1)}),a.jsx(w2,{isOpen:ee,onClose:()=>Q(!1)}),a.jsx(QF,{isOpen:H,editingBinder:ae,onClose:()=>{if(G(!1),_e(null),j(),O&&O.startsWith("binder-")){const ne=O.replace("binder-","");V(!0),Fe.getBinderCards(ne).then(q).finally(()=>V(!1))}}}),T==="grid"&&Be.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden md:block fixed bottom-0 left-0 right-0 z-[55] bg-gray-950/95 backdrop-blur-xl border-t border-white/10 shadow-[0_-10px_40px_rgba(0,0,0,0.5)]",children:a.jsx("div",{className:"max-w-[1600px] mx-auto px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"text-sm text-gray-400 font-medium whitespace-nowrap",children:["Showing ",(We-1)*ke+1," - ",Math.min(We*ke,Be.length)," of ",Be.length," cards"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>je(1),disabled:We===1,className:"px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 text-gray-400 hover:text-white hover:bg-gray-700 disabled:opacity-30 disabled:cursor-not-allowed transition-all",title:"First Page",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),a.jsx("button",{onClick:()=>je(ne=>Math.max(1,ne-1)),disabled:We===1,className:"px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 text-gray-400 hover:text-white hover:bg-gray-700 disabled:opacity-30 disabled:cursor-not-allowed transition-all",title:"Previous Page",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,Ot)},(ne,Le)=>{let Ke;return Ot<=5||We<=3?Ke=Le+1:We>=Ot-2?Ke=Ot-4+Le:Ke=We-2+Le,a.jsx("button",{onClick:()=>je(Ke),className:`min-w-[2.5rem] px-3 py-2 rounded-lg font-bold text-sm transition-all ${We===Ke?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"bg-gray-800 border border-gray-700 text-gray-400 hover:text-white hover:bg-gray-700"}`,children:Ke},Ke)})}),a.jsx("button",{onClick:()=>je(ne=>Math.min(Ot,ne+1)),disabled:We===Ot,className:"px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 text-gray-400 hover:text-white hover:bg-gray-700 disabled:opacity-30 disabled:cursor-not-allowed transition-all",title:"Next Page",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),a.jsx("button",{onClick:()=>je(Ot),disabled:We===Ot,className:"px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 text-gray-400 hover:text-white hover:bg-gray-700 disabled:opacity-30 disabled:cursor-not-allowed transition-all",title:"Last Page",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),a.jsxs("div",{className:"flex items-center gap-2 whitespace-nowrap",children:[a.jsx("label",{className:"text-sm text-gray-400 font-medium",children:"Per page:"}),a.jsxs("select",{value:ke,onChange:ne=>{Oe(parseInt(ne.target.value)),je(1)},className:"bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg font-bold text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[a.jsx("option",{value:25,children:"25"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"}),a.jsx("option",{value:200,children:"200"})]})]})]})})}),a.jsx("div",{className:"md:hidden fixed bottom-16 left-0 right-0 z-[55] bg-gray-950/95 backdrop-blur-xl border-t border-white/10 shadow-[0_-10px_40px_rgba(0,0,0,0.5)]",children:a.jsx("div",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"text-xs text-gray-400 font-medium",children:["Page ",We," of ",Ot]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>je(ne=>Math.max(1,ne-1)),disabled:We===1,className:"px-2.5 py-2 rounded-lg bg-gray-800 border border-gray-700 text-gray-400 active:bg-gray-700 disabled:opacity-30 disabled:cursor-not-allowed transition-all",title:"Previous",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("div",{className:"text-xs font-bold text-white bg-indigo-600 px-3 py-2 rounded-lg min-w-[3rem] text-center",children:We}),a.jsx("button",{onClick:()=>je(ne=>Math.min(Ot,ne+1)),disabled:We===Ot,className:"px-2.5 py-2 rounded-lg bg-gray-800 border border-gray-700 text-gray-400 active:bg-gray-700 disabled:opacity-30 disabled:cursor-not-allowed transition-all",title:"Next",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),a.jsxs("select",{value:ke,onChange:ne=>{Oe(parseInt(ne.target.value)),je(1)},className:"bg-gray-800 border border-gray-700 text-white px-2 py-2 rounded-lg font-bold text-xs focus:outline-none",children:[a.jsx("option",{value:25,children:"25"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"}),a.jsx("option",{value:200,children:"200"})]})]})})})]})]})},xS=e=>{if(!e)return null;const t=e.data||e;return t.image_uris?.art_crop?t.image_uris.art_crop:t.card_faces?.[0]?.image_uris?.art_crop?t.card_faces[0].image_uris.art_crop:t.image_uris?.normal?t.image_uris.normal:null},tH=e=>{const t=e?.commander?.color_identity||[],r=e?.commander_partner?.color_identity||[],n=[...new Set([...t,...r])];return n.length>0?n:["C"]},rH=[{badge:"White",colors:["W"],flavor:"Order, protection, and the light of law."},{badge:"Blue",colors:["U"],flavor:"Knowledge, manipulation, and the perfection of mind."},{badge:"Black",colors:["B"],flavor:"Power, ambition, and death at any cost."},{badge:"Red",colors:["R"],flavor:"Freedom, emotion, and the fire of impulse."},{badge:"Green",colors:["G"],flavor:"Nature, instinct, and the strength of the wild."},{badge:"Colorless",colors:["C"],flavor:"The void between, pure and unyielding."},{badge:"Azorius",colors:["W","U"],flavor:"The law is the shield of the just."},{badge:"Dimir",colors:["U","B"],flavor:"Knowledge is power, and we know everything."},{badge:"Rakdos",colors:["B","R"],flavor:"Entertainment is a serious business."},{badge:"Gruul",colors:["R","G"],flavor:"Not Gruul? Then die!"},{badge:"Selesnya",colors:["G","W"],flavor:"Together, we are the world's soul."},{badge:"Orzhov",colors:["W","B"],flavor:"Wealth is power, and spirit is currency."},{badge:"Izzet",colors:["U","R"],flavor:"Genius and madness are two sides of the same coin."},{badge:"Golgari",colors:["B","G"],flavor:"Life and death are a continuous circle."},{badge:"Boros",colors:["R","W"],flavor:"Strike fast, strike hard, strike true."},{badge:"Simic",colors:["G","U"],flavor:"Nature, perfected by design."},{badge:"Esper",colors:["W","U","B"],flavor:"Perfection through etherium and discipline."},{badge:"Grixis",colors:["U","B","R"],flavor:"Life is short, death is forever."},{badge:"Jund",colors:["B","R","G"],flavor:"Only the strongest survive the feeding frenzy."},{badge:"Naya",colors:["R","G","W"],flavor:"Where giant beasts roam and the wild reigns."},{badge:"Bant",colors:["G","W","U"],flavor:"Honor, valor, and the righteousness of caste."},{badge:"Abzan",colors:["W","B","G"],flavor:"Family is the only fortress that matters."},{badge:"Jeskai",colors:["U","R","W"],flavor:"Cunning strategies and swift strikes."},{badge:"Sultai",colors:["B","G","U"],flavor:"Ruthlessness is a virtue in the opulent dark."},{badge:"Mardu",colors:["R","W","B"],flavor:"Speed of the horse, edge of the blade."},{badge:"Temur",colors:["G","U","R"],flavor:"Savagery concealed by ice and snow."},{badge:"Glint-Eye",colors:["U","B","R","G"],flavor:"Chaos without order."},{badge:"Dune-Brood",colors:["W","B","R","G"],flavor:"Growth through conflict."},{badge:"Ink-Treader",colors:["W","U","R","G"],flavor:"Motion without purpose."},{badge:"Witch-Maw",colors:["W","U","B","G"],flavor:"Life without death."},{badge:"Yore-Tiller",colors:["W","U","B","R"],flavor:"Artifice without nature."},{badge:"WUBRG",colors:["W","U","B","R","G"],flavor:"All five colors in perfect harmony."}],AT=e=>{const t=e||[],r=t.length;return rH.find(s=>s.badge==="Colorless"&&(r===0||r===1&&t[0]==="C")?!0:s.colors.length!==r?!1:s.colors.every(o=>t.includes(o)))||{badge:"Commander",colors:t,flavor:"A unique combination of powers."}},nH=({deck:e})=>{const t=tH(e),r=AT(t),n=parseInt(e.card_count||0),s=xS(e.commander),o=xS(e.commander_partner);return a.jsx(kt,{to:`/decks/${e.id}`,className:"group relative flex flex-col h-[420px] rounded-3xl transition-all duration-300 hover:-translate-y-2",children:a.jsxs("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-md rounded-3xl border border-white/5 shadow-2xl group-hover:border-indigo-500/50 group-hover:shadow-indigo-500/20 transition-all overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"h-[60%] w-full relative overflow-hidden bg-gray-950 shrink-0",children:[e.commander_partner?a.jsxs("div",{className:"w-full h-full flex",children:[a.jsxs("div",{className:"w-1/2 h-full relative border-r border-black/50",children:[a.jsx("img",{src:s||"https://placehold.co/400x600?text=?",alt:e.commander?.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity duration-500"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-80"})]}),a.jsxs("div",{className:"w-1/2 h-full relative",children:[a.jsx("img",{src:o||"https://placehold.co/400x600?text=?",alt:e.commander_partner?.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity duration-500"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-80"})]})]}):s?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:s,alt:e.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-90"})]}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-900",children:a.jsx("svg",{className:"w-16 h-16 text-gray-800",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.is_mockup&&a.jsx("div",{className:"absolute top-3 left-3 px-2 py-1 bg-orange-500/20 text-orange-400 border border-orange-500/30 backdrop-blur-md rounded text-[10px] font-black uppercase tracking-widest shadow-lg",children:"Mockup"})]}),a.jsxs("div",{className:"h-[40%] p-5 flex flex-col justify-between relative grow",children:[a.jsx("div",{className:"absolute -top-3 left-5 flex gap-1 bg-gray-900/80 backdrop-blur-md rounded-full px-2 py-1 border border-white/10 shadow-xl",children:(e.format?.toLowerCase()==="standard"?e.colors||[]:t).map(c=>{const f=`https://svgs.scryfall.io/card-symbols/${c}.svg`;return a.jsx("img",{src:f,alt:c,className:"w-4 h-4 shadow-sm"},c)})}),a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-indigo-400 mb-1 opacity-80",children:r.badge}),a.jsx("h3",{className:"text-xl font-bold text-white leading-tight line-clamp-2 mb-1 group-hover:text-indigo-300 transition-colors",children:e.name||"Untitled Deck"}),a.jsx("p",{className:"text-xs text-gray-500 font-medium line-clamp-1",children:e.commander_partner?`${e.commander?.name} & ${e.commander_partner?.name}`:e.commander?.name||"No Commander"})]}),a.jsxs("div",{className:"flex justify-between items-center border-t border-white/5 pt-4 mt-2",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-wider",children:"Format"}),a.jsx("span",{className:"text-xs text-gray-300 font-medium",children:e.format||"Commander"})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-wider",children:"Cards"}),a.jsxs("span",{className:`text-sm font-mono font-bold ${n>=(e.format?.toLowerCase()==="standard"?60:100)?"text-green-500":"text-indigo-400"}`,children:[n,a.jsxs("span",{className:"text-gray-600 text-[10px]",children:["/",e.format?.toLowerCase()==="standard"?"60":"100"]})]})]})]})]})]})})},TT=({title:e,decks:t,loading:r,error:n,isOwner:s=!1})=>{const[o,c]=y.useState(!1),f=o?t:t.slice(0,4),d=t.length>4;return r?a.jsxs("div",{className:"mb-12",children:[a.jsx("div",{className:"h-8 w-48 bg-gray-800 rounded-lg animate-pulse mb-6"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(h=>a.jsx("div",{className:"h-[420px] bg-gray-900 rounded-3xl animate-pulse"},h))})]}):n?a.jsx("div",{className:"mb-12 p-6 bg-red-900/20 border border-red-500/50 rounded-2xl",children:a.jsx("h3",{className:"text-red-400 font-bold",children:"Error loading decks"})}):t.length===0?null:a.jsxs("div",{className:"mb-12 animate-fade-in relative z-10",children:[a.jsxs("div",{className:"flex justify-between items-end mb-6 border-b border-white/5 pb-4",children:[a.jsx("div",{children:a.jsxs("h2",{className:"text-2xl font-bold text-white tracking-tight flex items-center gap-3",children:[e,a.jsx("span",{className:"text-sm font-medium text-gray-500 bg-gray-800 px-2 py-0.5 rounded-full",children:t.length})]})}),d&&a.jsxs("button",{onClick:()=>c(!o),className:"text-indigo-400 hover:text-indigo-300 text-sm font-bold uppercase tracking-wider transition-colors flex items-center gap-2",children:[o?"Show Less":`Show All (${t.length})`,a.jsx("svg",{className:`w-4 h-4 transition-transform duration-300 ${o?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map(h=>a.jsx(nH,{deck:h},h.id))}),s&&t.length===0&&a.jsxs("div",{className:"col-span-full py-20 flex flex-col items-center justify-center text-center bg-gray-900/20 rounded-3xl border border-dashed border-gray-800",children:[a.jsx("p",{className:"text-gray-500 mb-6",children:"You haven't built any decks yet."}),a.jsx(kt,{to:"/decks/new",className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl transition-all",children:"Create Deck"})]})]})},aH=({friend:e})=>{const{decks:t,loading:r,error:n}=xf(e.owner_id),s=e.owner?.username||e.owner_username||"Unknown Friend";return!r&&!n&&t.length===0?null:a.jsx(TT,{title:`Decks by ${s}`,decks:t,loading:r,error:n,isOwner:!1})},iH=()=>{const{user:e}=vt(),[t,r]=y.useState([]),{decks:n,loading:s,error:o}=xf(null);return y.useEffect(()=>{e&&(async()=>{try{const f=await Gr.fetchIncomingPermissions(),d=(Array.isArray(f)?f:[]).filter(h=>!h.target_deck_id);r(d)}catch(f){console.error("Failed to load shared sources",f)}})()},[e]),a.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-[500px] bg-indigo-900/10 blur-[120px] rounded-full pointer-events-none"}),a.jsxs("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-10 relative z-10",children:[a.jsxs("div",{className:"flex justify-between items-end mb-12",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-black text-white tracking-tight mb-2",children:"My Strategies"}),a.jsx("p",{className:"text-gray-400 font-medium",children:"Manage your collection and view shared decks."})]}),a.jsxs(kt,{to:"/decks/new",className:"group bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-3 rounded-xl font-black uppercase tracking-widest text-xs transition-all shadow-lg shadow-indigo-500/20 flex items-center gap-2 border border-indigo-400/20 hover:border-indigo-400",children:[a.jsx("span",{className:"text-xl leading-none font-light",children:"+"}),"Create New Deck"]})]}),a.jsx(TT,{title:"My Decks",decks:n,loading:s,error:o,isOwner:!0}),t.length>0&&a.jsxs("div",{className:"mt-16 border-t border-white/5 pt-12",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-500 uppercase tracking-widest mb-8 flex items-center gap-4",children:[a.jsx("span",{className:"h-px bg-gray-800 flex-1"}),"Shared Libraries",a.jsx("span",{className:"h-px bg-gray-800 flex-1"})]}),a.jsx("div",{className:"space-y-4",children:t.map(c=>a.jsx(aH,{friend:c},c.id))})]})]})]})},sH=({isOpen:e,onClose:t,onAdd:r})=>{const{addToast:n}=rn(),[s,o]=y.useState(""),[c,f]=y.useState(!1),[d,h]=y.useState([]),[m,p]=y.useState(null),[x,w]=y.useState(!1),[j,N]=y.useState([]),[S,C]=y.useState("and"),[A,E]=y.useState(""),[z,P]=y.useState(""),B=I=>{N(O=>O.includes(I)?O.filter(U=>U!==I):[...O,I])},T=async I=>{I.preventDefault();const O=j.length>0||A.trim()||z.trim();if(!(!s.trim()&&!O)){f(!0);try{let U=null;if(z.trim()){const Z=z.trim().match(/^([<>]=?|=)?\s*(\d+)$/);Z&&(U={operator:Z[1]||"=",value:parseInt(Z[2],10)})}const D={query:s,type:"legendary creature",text:A,colors:j.length>0?j:void 0,colorIdentity:!0,colorLogic:S,mv:U},q=await Fe.post("/cards/search",D);h(q.data||[])}catch(U){console.error(U),n("Search failed. The Oracle is unreachable.","error")}finally{f(!1)}}},R=async I=>{p({id:I.id,name:I.name});try{const O={scryfall_id:I.id,name:I.name,set_code:I.set,collector_number:I.collector_number,finish:"nonfoil",count:1,data:I,is_wishlist:!0};await Fe.post("/collection",O),n(`"${I.name}" added to Wishlist!`,"success"),r&&r(),t()}catch(O){console.error(O),n("Failed to add to wishlist.","error")}finally{p(null)}};if(!e)return null;const $={W:{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-200",symbol:"https://svgs.scryfall.io/card-symbols/W.svg"},U:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-200",symbol:"https://svgs.scryfall.io/card-symbols/U.svg"},B:{bg:"bg-gray-300",text:"text-gray-800",border:"border-gray-400",symbol:"https://svgs.scryfall.io/card-symbols/B.svg"},R:{bg:"bg-red-100",text:"text-red-700",border:"border-red-200",symbol:"https://svgs.scryfall.io/card-symbols/R.svg"},G:{bg:"bg-green-100",text:"text-green-700",border:"border-green-200",symbol:"https://svgs.scryfall.io/card-symbols/G.svg"}};return qr.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:[a.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-2xl w-full max-w-5xl max-h-[95vh] flex flex-col border border-white/10 overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-white/5 bg-gray-950/50 flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-3",children:[a.jsx("span",{className:"text-purple-400",children:"Summon Legend"}),a.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-purple-500/20 text-purple-300 uppercase tracking-wider border border-purple-500/30",children:"Wishlist"})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Search the multiverse for a commander you don't own yet."})]}),a.jsx("button",{onClick:t,className:"p-2 rounded-xl hover:bg-white/5 text-gray-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"bg-gray-900 border-b border-white/5 flex flex-col shrink-0",children:a.jsxs("form",{onSubmit:T,className:"p-6",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",value:s,onChange:I=>o(I.target.value),placeholder:"Search by name...",className:"w-full bg-gray-950 border border-white/10 rounded-2xl py-4 pl-14 pr-4 text-lg text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all shadow-inner",autoFocus:!x}),a.jsx("svg",{className:"absolute left-5 top-5 w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),a.jsxs("button",{type:"button",onClick:()=>w(!x),className:`px-4 rounded-2xl border border-white/10 flex items-center gap-2 font-bold transition-all ${x?"bg-purple-600 text-white border-purple-500":"bg-gray-950 text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[a.jsx(tT,{className:"w-5 h-5"}),"Filters"]}),a.jsx("button",{type:"submit",disabled:c,className:"px-8 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-2xl transition-all disabled:opacity-50 shadow-lg shadow-purple-500/20",children:c?"Searching...":"Search"})]}),a.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${x?"max-h-96 opacity-100 mt-6":"max-h-0 opacity-0"}`,children:a.jsxs("div",{className:"bg-gray-950/50 rounded-2xl p-6 border border-white/5 grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Color Identity"}),a.jsx("div",{className:"flex gap-2",children:Object.entries($).map(([I,O])=>a.jsx("button",{type:"button",onClick:()=>B(I),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all border-2 ${j.includes(I)?"border-white scale-110 shadow-lg":"border-transparent opacity-60 hover:opacity-100 hover:scale-105"}`,style:{backgroundColor:j.includes(I)?"transparent":""},children:a.jsx("img",{src:O.symbol,alt:I,className:`w-full h-full ${j.includes(I)?"drop-shadow-md":"grayscale"}`})},I))}),a.jsxs("div",{className:"flex items-center gap-4 text-sm mt-2",children:[a.jsx("span",{className:`cursor-pointer ${S==="or"?"text-purple-400 font-bold":"text-gray-600"}`,onClick:()=>C("or"),children:"Includes any (OR)"}),a.jsx("div",{className:"w-10 h-5 bg-gray-800 rounded-full relative cursor-pointer border border-white/10",onClick:()=>C(I=>I==="or"?"and":"or"),children:a.jsx("div",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-purple-500 transition-all ${S==="and"?"left-5.5":"left-0.5"}`})}),a.jsx("span",{className:`cursor-pointer ${S==="and"?"text-purple-400 font-bold":"text-gray-600"}`,onClick:()=>C("and"),children:"Exact match (AND)"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Oracle Text"}),a.jsx("input",{type:"text",value:A,onChange:I=>E(I.target.value),placeholder:"e.g. 'draw cards', 'counter'",className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-purple-500 text-sm"}),a.jsx("p",{className:"text-[10px] text-gray-600",children:"Searches abilities and rules text."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Mana Value (CMC)"}),a.jsx("input",{type:"text",value:z,onChange:I=>P(I.target.value),placeholder:"e.g. '4' or '<= 3'",className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-purple-500 text-sm font-mono"})]})]})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-950/30 custom-scrollbar",children:[!c&&d.length===0&&a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-40",children:[a.jsx("svg",{className:"w-24 h-24 text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})}),a.jsx("p",{className:"text-xl font-bold text-gray-400",children:"No legends found."}),a.jsx("p",{className:"text-sm text-gray-500",children:"Try adjusting your filters."})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:d.map(I=>{const O=I.image_uris?.art_crop||I.image_uris?.normal||I.data?.image_uris?.art_crop||I.data?.image_uris?.normal,U=m?.id===I.id;return a.jsxs("div",{className:"group relative bg-gray-900 rounded-2xl border border-white/5 overflow-hidden hover:border-purple-500/50 transition-all hover:shadow-2xl hover:shadow-purple-500/10 hover:-translate-y-1",children:[a.jsxs("div",{className:"h-60 w-full bg-black relative",children:[O?a.jsx("img",{src:O,alt:I.name,className:"w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-all duration-500"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-700 font-bold",children:"No Art"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent"})]}),a.jsxs("div",{className:"p-4 relative",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-purple-300 transition-colors line-clamp-1",children:I.name}),a.jsx("p",{className:"text-xs text-gray-500 mb-4 line-clamp-1",children:I.type_line}),a.jsx("button",{onClick:()=>R(I),disabled:U,className:"w-full py-2 bg-white/5 hover:bg-purple-600 text-gray-300 hover:text-white rounded-lg font-bold text-sm transition-all flex items-center justify-center gap-2 group-hover:bg-purple-600 group-hover:text-white",children:U?a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add to Wishlist"]})})]})]},I.id)})})]})]}),a.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .custom-scrollbar::-webkit-scrollbar { width: 8px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.02); }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(168, 85, 247, 0.2); border-radius: 10px; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(168, 85, 247, 0.4); }
            `}})]}),document.body)},er={BASICS:1,COMMANDER:2,PARTNER:2.5,AI_STRATEGY:3,REVIEW:4},oH=()=>{const e=Un(),{userProfile:t}=vt(),{addToast:r}=rn(),[n,s]=y.useState(er.BASICS),[o,c]=y.useState(!1),[f,d]=y.useState("folder"),[h,m]=y.useState({}),[p,x]=y.useState(null),[w,j]=y.useState(""),[N,S]=y.useState("Commander"),[C,A]=y.useState([]),[E,z]=y.useState(null),[P,B]=y.useState(null),[T,R]=y.useState(""),[$,I]=y.useState(""),[O,U]=y.useState(null),[D,q]=y.useState("Consulting the Oracle..."),[Z,V]=y.useState(!1),[X,re]=y.useState(!1);y.useEffect(()=>{window.scrollTo(0,0)},[n]);const fe=je=>{if(!je)return null;const ke=je.data||je;return ke.image_uris?.art_crop?ke.image_uris.art_crop:ke.card_faces?.[0]?.image_uris?.art_crop?ke.card_faces[0].image_uris.art_crop:ke.image_uris?.normal?ke.image_uris.normal:null},Y=je=>{const Oe=(je.data||je).color_identity||[];return Oe.length>0?Oe:["C"]},H=(je,ke)=>{je==="Commander"||je==="Standard"?G(je,ke):console.warn("Unknown format selected")},G=async(je,ke)=>{c(!0);try{const Oe={unused:!0};je==="Commander"&&(Oe.type_line="legendary creature"),ke||(Oe.wishlist="false");const Me=await Fe.get("/collection",Oe);A(Me),s(er.COMMANDER)}catch(Oe){console.error(Oe),r("Failed to load cards","error")}finally{c(!1)}},ee=je=>{if(z(je),N==="Standard"){r("Standard AI Deck Tech coming soon! Please verify on Discord to prioritize.","info"),s(er.REVIEW);return}const ke=je.data||je,Oe=ke.keywords||[],Me=ke.oracle_text||"",$e=Oe.includes("Partner")||Me.includes("Partner");s($e?er.PARTNER:er.AI_STRATEGY)},Q=je=>{B(je),s(er.AI_STRATEGY)},ae=async()=>{if(N==="Standard")return;const je=t?.settings?.geminiApiKey,ke=t?.settings?.helper?.name||"The Oracle";if(!je){r("AI Key missing. Skipping strategy.","warning"),s(er.REVIEW);return}c(!0),q(`${ke} is analyzing ${P?"your commanders":"your commander"}...`);try{const Oe=P?`${E.name} & ${P.name}`:E.name,Me=await Ln.getDeckStrategy(je,Oe,t.playstyle,[],t?.settings?.helper);Me.layout||(Me.layout={functional:{Lands:36,"Mana Ramp":10,"Card Draw":10,Removal:10,"Board Wipes":3,Synergy:30},types:{Creatures:30,Instants:10,Sorceries:10,Artifacts:10,Enchantments:4,Planeswalkers:0,Lands:36}}),U(Me),!w.trim()&&Me.suggestedName&&j(Me.suggestedName),s(er.REVIEW)}catch(Oe){console.error(Oe),r("AI Generation Failed. Proceeding manually.","error"),U({theme:"",strategy:"Manual strategy required.",layout:{functional:{Lands:36,Creatures:63},types:{Lands:36,Creatures:63}}}),s(er.REVIEW)}finally{c(!1)}},_e=async()=>{c(!0);try{const je={name:w||(P?`${E.name} & ${P.name}`:E?.name)||"New Commander Deck",format:N,commander:E?.data||E||null,commanderPartner:P?.data||P||null,aiBlueprint:O?{theme:O.theme,strategy:O.strategy,suggestedCounts:O.layout?.functional||O.layout,typeCounts:O.layout?.types}:null,isMockup:Z},ke=await Fe.post("/decks",je);r("Deck created successfully!","success"),e(`/decks/${ke.id}`)}catch(je){console.error(je),r("Failed to create deck","error")}finally{c(!1)}};y.useEffect(()=>{n===er.AI_STRATEGY&&E&&!O&&ae()},[n]);const be=({card:je,onClick:ke,isSelected:Oe})=>{const Me=fe(je),$e=Y(je),ze=je.data||je;return a.jsx("div",{onClick:()=>ke(je),className:`group relative h-[480px] rounded-3xl cursor-pointer transition-all duration-300 hover:-translate-y-2 ${Oe?"ring-4 ring-indigo-500 scale-105":""}`,children:a.jsxs("div",{className:"absolute inset-0 bg-gray-900/40 backdrop-blur-md rounded-3xl border border-white/5 shadow-2xl group-hover:border-indigo-500/50 group-hover:shadow-indigo-500/20 transition-all overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"h-[55%] w-full relative overflow-hidden bg-gray-950",children:[Me?a.jsx("img",{src:Me,alt:je.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-900",children:a.jsx("span",{className:"text-gray-700 font-bold",children:"No Art"})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-90"})]}),a.jsxs("div",{className:"h-[45%] p-5 flex flex-col relative",children:[a.jsxs("div",{className:"absolute -top-3 left-5 flex gap-2 z-10",children:[a.jsx("div",{className:"flex gap-1 bg-gray-900/90 backdrop-blur-md rounded-full px-2 py-1 border border-white/10 shadow-xl",children:$e.map((Be,qt)=>a.jsx("img",{src:`https://svgs.scryfall.io/card-symbols/${Be}.svg`,alt:Be,className:"w-4 h-4 shadow-sm"},qt))}),je.finish==="foil"&&a.jsx("div",{className:"flex items-center justify-center w-8 h-8 -mt-1 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full shadow-[0_0_15px_rgba(250,204,21,0.6)] animate-pulse",title:"Foil",children:a.jsx("svg",{className:"w-5 h-5 text-white drop-shadow-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),a.jsxs("div",{className:"mt-4 flex-1 flex flex-col gap-2",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-white leading-tight line-clamp-2 mb-1 group-hover:text-indigo-300 transition-colors",children:je.name}),a.jsx("p",{className:"text-xs text-gray-400 font-medium line-clamp-1 border-b border-white/5 pb-2 mb-2",children:ze.type_line})]}),a.jsx("p",{className:"text-[10px] text-gray-300 leading-relaxed font-serif opacity-80 line-clamp-4",children:ze.oracle_text})]}),a.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-white/5",children:[ze.power&&ze.toughness&&a.jsxs("div",{className:"bg-gray-800/80 px-2 py-1 rounded text-xs font-bold text-white border border-white/10 shadow-inner",children:[ze.power," / ",ze.toughness]}),a.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest text-indigo-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"Select"})]})]})]})})},Pe=y.useMemo(()=>{if(!C.length)return{};const je={};return C.filter(Oe=>Oe.name.toLowerCase().includes(T.toLowerCase())||(Oe.data?.type_line||"").toLowerCase().includes(T.toLowerCase())).forEach(Oe=>{const Me=Y(Oe),$e=AT(Me);je[$e.badge]||(je[$e.badge]={identity:$e,cards:[]}),je[$e.badge].cards.push(Oe)}),je},[C,T]),se=()=>{const je=T.trim().length>0,ke=Object.entries(Pe).sort((Me,$e)=>{const ze=Me[1].identity.colors.length-$e[1].identity.colors.length;return ze!==0?ze:$e[1].cards.length-Me[1].cards.length}),Oe=(Me,$e,ze)=>a.jsxs("div",{onClick:ze,className:"w-full bg-gray-900/60 hover:bg-gray-800/60 backdrop-blur-md border border-white/5 rounded-2xl p-6 cursor-pointer transition-all flex items-center justify-between group mb-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex gap-1 bg-gray-950/50 rounded-full px-3 py-1.5 border border-white/5",children:Me.identity.colors.map(Be=>a.jsx("img",{src:`https://svgs.scryfall.io/card-symbols/${Be}.svg`,alt:Be,className:"w-5 h-5 shadow-sm"},Be))}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-indigo-300 transition-colors",children:Me.identity.badge}),a.jsxs("p",{className:"text-sm text-gray-400 italic line-clamp-1",children:['"',Me.identity.flavor,'"']})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"text-sm font-mono text-gray-500",children:[Me.cards.length," ",N==="Commander"?"Legends":"Cards"]}),a.jsx("svg",{className:`w-6 h-6 text-gray-400 transform transition-transform ${$e?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]});return a.jsxs("div",{className:"animate-fade-in space-y-6 h-full flex flex-col",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end mb-4 gap-4 shrink-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:N==="Commander"?"Choose Commander":"Choose Spotlight Card"}),a.jsx("p",{className:"text-gray-400",children:N==="Commander"?"Select the legend who will lead your deck.":"Select a card to feature as the face of your deck."})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:()=>re(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-xl font-bold text-sm shadow-lg shadow-purple-500/20 flex items-center gap-2 transition-all hover:-translate-y-0.5",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Search Database"]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-1 flex border border-white/10",children:[a.jsx("button",{onClick:()=>d("list"),className:`p-2 rounded-lg transition-all ${f==="list"?"bg-indigo-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,title:"List View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),a.jsx("button",{onClick:()=>d("folder"),className:`p-2 rounded-lg transition-all ${f==="folder"?"bg-indigo-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,title:"Folder View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:N==="Commander"?"Search legends...":"Search cards...",value:T,onChange:Me=>R(Me.target.value),className:"bg-gray-800/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 outline-none w-64 backdrop-blur-md"}),a.jsx("svg",{className:"w-5 h-5 text-gray-400 absolute right-3 top-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:[f==="folder"&&!p&&a.jsx(a.Fragment,{children:ke.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center animate-fade-in",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mb-6 border border-gray-700",children:a.jsx("svg",{className:"w-10 h-10 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),a.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"No Cards Found"}),a.jsx("p",{className:"text-gray-400 max-w-md mb-8",children:T?"No cards match your search filters.":"We couldn't find any qualifying cards in your collection."}),a.jsxs("button",{onClick:()=>re(!0),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-xl font-bold shadow-lg shadow-indigo-500/20 hover:-translate-y-1 transition-all flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Search Full Database"]})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ke.map(([Me,$e])=>a.jsxs("div",{onClick:()=>x(Me),className:"bg-gray-800/40 hover:bg-gray-700/50 border border-white/5 rounded-2xl p-6 cursor-pointer transition-all hover:-translate-y-1 hover:shadow-xl group flex flex-col items-center text-center gap-3 backdrop-blur-sm",children:[a.jsx("div",{className:"flex gap-1 bg-gray-950/50 rounded-full px-3 py-2 border border-white/5",children:$e.identity.colors.map(ze=>a.jsx("img",{src:`https://svgs.scryfall.io/card-symbols/${ze}.svg`,alt:ze,className:"w-6 h-6"},ze))}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-white group-hover:text-indigo-300 transition-colors uppercase tracking-wide",children:$e.identity.badge}),a.jsx("div",{className:"h-0.5 w-8 bg-indigo-500/50 mx-auto my-2"}),a.jsxs("p",{className:"text-sm text-gray-400 italic",children:['"',$e.identity.flavor,'"']})]}),a.jsxs("span",{className:"text-sm font-mono font-bold text-gray-500 bg-black/20 px-3 py-1 rounded-full mt-2",children:[$e.cards.length," ",N==="Commander"?"Legends":"Cards"]})]},Me))})}),f==="folder"&&p&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("button",{onClick:()=>x(null),className:"flex items-center gap-2 text-indigo-400 hover:text-white transition-colors font-bold uppercase text-xs tracking-widest mb-4",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Groups"]}),a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("h3",{className:"text-3xl font-black text-white",children:Pe[p].identity.badge}),a.jsx("div",{className:"flex gap-1",children:Pe[p].identity.colors.map(Me=>a.jsx("img",{src:`https://svgs.scryfall.io/card-symbols/${Me}.svg`,alt:Me,className:"w-6 h-6"},Me))})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Pe[p].cards.map(Me=>a.jsx(be,{card:Me,onClick:ee},Me.id))})]}),f==="list"&&a.jsx("div",{className:"space-y-4",children:ke.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center animate-fade-in border border-dashed border-gray-800 rounded-3xl",children:[a.jsx("p",{className:"text-gray-400",children:"No cards found in your collection matching criteria."}),a.jsx("button",{onClick:()=>re(!0),className:"text-indigo-400 font-bold hover:text-indigo-300 mt-2 hover:underline",children:"Search Scryfall Database"})]}):ke.map(([Me,$e])=>{const ze=h[Me]||je;return a.jsxs("div",{children:[Oe($e,ze,()=>m(Be=>({...Be,[Me]:!Be[Me]}))),ze&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8 pl-4 border-l-2 border-white/5 animate-fade-in",children:$e.cards.map(Be=>a.jsx(be,{card:Be,onClick:ee},Be.id))})]},Me)})})]})]})},Ae=()=>{const je=C.filter(ke=>{const Oe=ke.data||ke,Me=Oe.keywords||[],$e=Oe.oracle_text||"",ze=Me.includes("Partner")||$e.includes("Partner");return ke.id===E?.id||!ze?!1:ke.name.toLowerCase().includes($.toLowerCase())});return a.jsxs("div",{className:"animate-fade-in space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-end mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:"Choose Partner"}),a.jsxs("p",{className:"text-gray-400",children:["Select a partner for ",E?.name,"."]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"relative",children:a.jsx("input",{type:"text",placeholder:"Search partners...",value:$,onChange:ke=>I(ke.target.value),className:"bg-gray-800/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 outline-none w-64 backdrop-blur-md"})}),a.jsx("button",{onClick:()=>{B(null),s(er.AI_STRATEGY)},className:"text-sm font-bold text-gray-400 hover:text-white underline self-center",children:"Skip / Solo Commander"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 max-h-[65vh] overflow-y-auto pr-2 custom-scrollbar",children:[je.map(ke=>a.jsx(be,{card:ke,onClick:Q},ke.id)),je.length===0&&a.jsx("div",{className:"col-span-full py-20 text-center text-gray-500",children:"No valid partners found matching your search."})]})]})},Ce=()=>a.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] animate-fade-in text-center",children:[a.jsxs("div",{className:"relative mb-8",children:[a.jsx("div",{className:"w-24 h-24 bg-indigo-500/20 rounded-full animate-ping absolute inset-0"}),a.jsx("div",{className:"w-24 h-24 bg-indigo-600 rounded-full flex items-center justify-center relative shadow-[0_0_50px_rgba(79,70,229,0.5)]",children:a.jsx("svg",{className:"w-10 h-10 text-white animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})})]}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:D}),a.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:"Brewing a perfect strategy tailored to your playstyle."})]}),xe=()=>{const je=O?.layout?.functional||{},ke=O?.layout?.types||{};return a.jsxs("div",{className:"animate-fade-in space-y-8 max-h-[70vh] overflow-y-auto pr-2 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("label",{className:"block text-sm font-bold text-gray-400 uppercase tracking-wider",children:"Deck Name"}),a.jsx("input",{type:"text",value:w,onChange:Oe=>j(Oe.target.value),className:"w-full text-4xl font-black bg-transparent border-b-2 border-white/10 focus:border-indigo-500 text-white placeholder-gray-600 outline-none pb-2 transition-colors",placeholder:"Name your deck..."})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-gray-800/40 border border-white/5 rounded-2xl p-6 backdrop-blur-md",children:[a.jsx("h3",{className:"text-xl font-bold text-indigo-300 mb-4",children:"Theme & Strategy"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Theme"}),a.jsx("p",{className:"text-lg text-white font-medium",children:O?.theme})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Gameplan"}),a.jsx("div",{className:"text-sm text-gray-300 leading-relaxed prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:O?.strategy}})]})]})]}),a.jsxs("div",{className:"bg-gray-800/40 border border-white/5 rounded-2xl p-6 backdrop-blur-md space-y-6",children:[a.jsx("h3",{className:"text-xl font-bold text-green-300 mb-4",children:"Composition Preview"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Functional Needs"}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(je).map(([Oe,Me])=>a.jsxs("div",{className:"flex justify-between items-center bg-gray-900/50 px-3 py-2 rounded-lg border border-white/5",children:[a.jsx("span",{className:"text-sm text-gray-300",children:Oe}),a.jsx("span",{className:"font-mono font-bold text-indigo-400",children:Me})]},Oe))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Type Balance"}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(ke).map(([Oe,Me])=>a.jsxs("div",{className:"flex justify-between items-center bg-gray-900/50 px-3 py-2 rounded-lg border border-white/5",children:[a.jsx("span",{className:"text-sm text-gray-300",children:Oe}),a.jsx("span",{className:"font-mono font-bold text-emerald-400",children:Me})]},Oe))})]})]})]})]})},We=E?fe(E):null;return a.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden flex flex-col",children:[We&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-cover bg-center transition-all duration-1000 transform scale-105",style:{backgroundImage:`url(${We})`}}),a.jsx("div",{className:"fixed inset-0 bg-gray-950/60 backdrop-blur-2xl transition-all duration-1000"}),a.jsx("div",{className:"fixed inset-0 bg-gradient-to-t from-gray-950 via-gray-950/50 to-transparent"})]}),!We&&a.jsx("div",{className:"absolute top-0 left-0 w-full h-[500px] bg-indigo-900/20 blur-[120px] rounded-full pointer-events-none"}),a.jsxs("div",{className:"relative z-10 flex-1 flex flex-col max-w-[1600px] mx-auto w-full px-6 py-8",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[a.jsx("button",{onClick:()=>e("/decks"),className:"text-gray-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7 7-7m-7 7h18"})})}),a.jsx("div",{className:"h-8 w-[1px] bg-white/10 mx-2"}),a.jsx("div",{className:"flex gap-2",children:[er.BASICS,er.COMMANDER,er.AI_STRATEGY,er.REVIEW].map((je,ke)=>a.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${n>=je?"w-12 bg-indigo-500":"w-4 bg-gray-700"}`},je))})]}),a.jsxs("div",{className:"flex-1 bg-gray-950/40 border border-white/5 rounded-3xl p-8 shadow-2xl backdrop-blur-xl animate-fade-in-up flex flex-col overflow-hidden",children:[o&&n!==er.AI_STRATEGY&&a.jsx("div",{className:"flex justify-center items-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"})}),!o&&n===er.BASICS&&a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-full space-y-12 animate-fade-in py-8",children:[a.jsxs("h1",{className:"text-5xl font-black text-white tracking-tight text-center",children:["Let's build something ",a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400",children:"legendary."})]}),a.jsxs("div",{className:"w-full max-w-5xl px-4 space-y-12",children:[E&&a.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-white/5 backdrop-blur-sm animate-fade-in-down",children:[a.jsx("h3",{className:"text-sm font-black text-gray-500 uppercase tracking-widest mb-4",children:N==="Commander"?"Commander":"Spotlight Card"}),a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl opacity-50 group-hover:opacity-75 blur transition duration-500"}),a.jsx("img",{src:E.image_uris?.normal||E.image_uris?.large,alt:E.name,className:"relative w-64 rounded-xl shadow-2xl transform group-hover:scale-[1.02] transition-all duration-500"})]}),a.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-3xl font-black text-white mb-2",children:E.name}),a.jsx("p",{className:"text-gray-400 text-sm",children:E.type_line}),a.jsx("p",{className:"text-gray-300 mt-4 text-base leading-relaxed",children:E.oracle_text})]}),a.jsxs("button",{onClick:()=>z(null),className:"self-start text-sm font-bold text-red-400 hover:text-red-300 underline mt-4",children:["Change ",N==="Commander"?"Commander":"Spotlight Card"]})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),a.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-[0.3em]",children:"Commander"}),a.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{onClick:()=>{V(!1),S("Commander"),H("Commander",!1)},className:"group cursor-pointer bg-gray-800/40 hover:bg-indigo-900/20 border border-white/10 hover:border-indigo-500/50 rounded-3xl p-8 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/10 flex flex-col items-center text-center gap-4 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"w-20 h-20 bg-indigo-500/20 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-500 border border-white/5 group-hover:border-indigo-500/30",children:a.jsx("svg",{className:"w-10 h-10 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("h3",{className:"text-2xl font-black text-white mb-2 group-hover:text-indigo-300 transition-colors",children:"From Collection"}),a.jsxs("p",{className:"text-sm text-gray-400 leading-relaxed",children:["Build using only cards you own.",a.jsx("br",{}),"Oracle verifies your binder."]})]})]}),a.jsxs("div",{onClick:()=>{V(!0),S("Commander"),H("Commander",!0)},className:"group cursor-pointer bg-gray-800/40 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 rounded-3xl p-8 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl hover:shadow-purple-500/10 flex flex-col items-center text-center gap-4 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"w-20 h-20 bg-purple-500/20 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-500 border border-white/5 group-hover:border-purple-500/30",children:a.jsx("svg",{className:"w-10 h-10 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("h3",{className:"text-2xl font-black text-white mb-2 group-hover:text-purple-300 transition-colors",children:"Theorycraft Mockup"}),a.jsxs("p",{className:"text-sm text-gray-400 leading-relaxed",children:["Design without limits.",a.jsx("br",{}),"Missing cards added to wishlist."]})]})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),a.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-[0.3em]",children:"Standard"}),a.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{onClick:()=>{V(!1),S("Standard"),H("Standard",!1)},className:"group cursor-pointer bg-gray-800/40 hover:bg-emerald-900/20 border border-white/10 hover:border-emerald-500/50 rounded-3xl p-8 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl hover:shadow-emerald-500/10 flex flex-col items-center text-center gap-4 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"w-20 h-20 bg-emerald-500/20 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-500 border border-white/5 group-hover:border-emerald-500/30",children:a.jsx("svg",{className:"w-10 h-10 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("h3",{className:"text-2xl font-black text-white mb-2 group-hover:text-emerald-300 transition-colors",children:"Standard Collection"}),a.jsxs("p",{className:"text-sm text-gray-400 leading-relaxed",children:["Build a 60-card Standard deck.",a.jsx("br",{}),"Using your own cards."]})]})]}),a.jsxs("div",{onClick:()=>{V(!0),S("Standard"),H("Standard",!0)},className:"group cursor-pointer bg-gray-800/40 hover:bg-cyan-900/20 border border-white/10 hover:border-cyan-500/50 rounded-3xl p-8 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl hover:shadow-cyan-500/10 flex flex-col items-center text-center gap-4 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"w-20 h-20 bg-cyan-500/20 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-500 border border-white/5 group-hover:border-cyan-500/30",children:a.jsx("svg",{className:"w-10 h-10 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("h3",{className:"text-2xl font-black text-white mb-2 group-hover:text-cyan-300 transition-colors",children:"Standard Theorycraft"}),a.jsxs("p",{className:"text-sm text-gray-400 leading-relaxed",children:["Test new Standard meta decks.",a.jsx("br",{}),"Without owning every card."]})]})]})]})]})]})]}),!o&&n===er.COMMANDER&&se(),!o&&n===er.PARTNER&&Ae(),n===er.AI_STRATEGY&&Ce(),!o&&n===er.REVIEW&&xe()]}),!o&&n===er.REVIEW&&a.jsx("div",{className:"mt-6 flex justify-end animate-fade-in-up",children:a.jsxs("button",{onClick:_e,disabled:o,className:"bg-indigo-600 hover:bg-indigo-500 text-white text-xl font-bold py-4 px-12 rounded-2xl shadow-lg shadow-indigo-500/20 transform hover:-translate-y-1 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-3",children:[o?"Forging Deck...":"Create Deck",!o&&a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]}),a.jsx(sH,{isOpen:X,onClose:()=>re(!1),onAdd:()=>G()})]})};function OT(e){const[t,r]=y.useState(null),[n,s]=y.useState([]),[o,c]=y.useState(!0),[f,d]=y.useState(null),{currentUser:h}=vt(),m=async()=>{if(!(!h||!e||e==="new")){c(!0);try{const{deck:p,items:x}=await Fe.get(`/decks/${e}`);r(p),s(x.map(w=>({...w,countInDeck:w.count||1,managedId:w.id}))),d(null)}catch(p){console.error("Error fetching deck:",p),d(p)}finally{c(!1)}}};return y.useEffect(()=>{if(!h||!e){c(!1);return}m()},[h,e]),{deck:t,cards:n,loading:o,error:f,refresh:m}}const oi={async addCardToDeck(e,t,r){return Fe.post("/collection",{scryfall_id:r.id,name:r.name,set_code:r.set||r.set_code,collector_number:r.collector_number,finish:r.finish||"nonfoil",data:r,deck_id:t,count:1})},async removeCardFromDeck(e,t,r){return Fe.put(`/collection/${r}`,{deck_id:null})},async updateCardQuantity(e,t,r,n){return n<=0?this.removeCardFromDeck(e,t,r):Fe.put(`/collection/${r}`,{count:n})},async setCommander(e,t,r){return Fe.put(`/decks/${t}`,{commander:r})},async importDeck(e,t,r,n){return Fe.post("/decks/import",{deck:t,cards:r,options:n})},async updateDeck(e,t,r){return Fe.put(`/decks/${t}`,r)},async deleteDeck(e,t){return Fe.delete(`/decks/${t}`)}},lH=({isOpen:e,onClose:t,onConfirm:r,title:n,message:s,confirmText:o="Confirm",cancelText:c="Cancel",isDanger:f=!1})=>e?a.jsxs("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center transition-all duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),a.jsx("div",{className:"relative bg-gray-800 rounded-xl shadow-2xl border border-gray-700 w-full max-w-md transform transition-all scale-100 animate-scale-in m-4",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-2",id:"modal-title",children:n}),a.jsx("p",{className:"text-gray-300 mb-6",children:s}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg text-gray-300 hover:text-white hover:bg-gray-700 transition-colors font-medium",children:c}),a.jsx("button",{onClick:()=>{r(),t()},className:`px-4 py-2 rounded-lg text-white font-bold shadow-lg transition-transform transform hover:-translate-y-0.5 ${f?"bg-red-600 hover:bg-red-500 shadow-red-500/20":"bg-indigo-600 hover:bg-indigo-500 shadow-indigo-500/20"}`,children:o})]})]})})]}):null,cH=(e,t)=>{if(!e||e.length===0)return!0;const r=new Set(t||[]);return e.every(n=>r.has(n))},uH=({isOpen:e,onClose:t,deck:r,deckCards:n=[]})=>{const{cards:s,loading:o}=da(),{currentUser:c}=vt(),{openCardModal:f}=vg(),[d,h]=y.useState(""),[m,p]=y.useState("All"),[x,w]=y.useState(!1),[j,N]=y.useState({colors:[],rarity:[],set:"",manaValue:""}),[S,C]=y.useState("name"),A=y.useMemo(()=>{if(!s||!r)return[];const P=r.format?.toLowerCase()==="standard",B=r.commander?.color_identity||[],T=r.commander_partner?.color_identity||[],R=new Set([...B,...T]);return s.filter(I=>{if(I.deckId)return!1;const O=I.type_line?.toLowerCase().includes("basic land");if(!P&&!cH(I.color_identity,[...R]))return!1;if(j.colors.length>0){const Z=I.color_identity||[];if(!j.colors.some(X=>X==="C"?Z.length===0:Z.includes(X)))return!1}if(j.rarity.length>0&&!j.rarity.includes(I.rarity?.toLowerCase()))return!1;if(j.set){const Z=j.set.toLowerCase();if(!I.set?.toLowerCase().includes(Z)&&!I.set_name?.toLowerCase().includes(Z))return!1}if(j.manaValue!==""){const Z=parseFloat(j.manaValue);if(I.cmc!==Z)return!1}const U=n.filter(Z=>Z.name===I.name).reduce((Z,V)=>Z+(V.countInDeck||1),0);if(!O&&U>=(P?4:1))return!1;const q=d.toLowerCase();return!(q&&!I.name.toLowerCase().includes(q)&&!I.type_line?.toLowerCase().includes(q)||m!=="All"&&!I.type_line?.toLowerCase().includes(m.toLowerCase()))}).sort((I,O)=>{if(S==="name")return I.name.localeCompare(O.name);if(S.startsWith("price")){const U=parseFloat(I.prices?.usd||I.data?.prices?.usd||0),D=parseFloat(O.prices?.usd||O.data?.prices?.usd||0);return S==="price-asc"?U-D:D-U}if(S==="rarity"){const U={mythic:4,rare:3,uncommon:2,common:1},D=U[I.rarity?.toLowerCase()]||0;return(U[O.rarity?.toLowerCase()]||0)-D}return 0})},[s,r,n,d,m,j,S]),E=async P=>{try{await oi.addCardToDeck(c.uid,r.id,P),addToast(`Added ${P.name} to deck`,"success")}catch(B){console.error(B),addToast("Failed to add card","error")}};if(!e)return null;const z=["All","Creature","Instant","Sorcery","Enchantment","Artifact","Planeswalker","Land"];return qr.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl w-full max-w-5xl h-[90vh] flex flex-col border border-gray-700",children:[a.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center bg-gray-900/50 rounded-t-xl",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:"Add from Collection"}),a.jsxs("span",{className:"text-sm font-normal text-gray-400",children:["(",A.length," available)"]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Showing unassigned cards compatible with this deck."})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors bg-gray-800 hover:bg-gray-700 p-2 rounded-lg",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"p-4 bg-gray-800 border-b border-gray-700 space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"Search by name, type, or text...",className:"w-full bg-gray-900 text-white border border-gray-700 rounded-lg py-3 px-4 pl-12 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent shadow-inner",value:d,onChange:P=>h(P.target.value),autoFocus:!0}),a.jsx("svg",{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(P=>a.jsx("button",{onClick:()=>p(P),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors border ${m===P?"bg-indigo-600 text-white border-indigo-500 shadow-md":"bg-gray-800 text-gray-400 border-gray-700 hover:border-gray-500 hover:text-gray-200"}`,children:P},P))}),a.jsxs("button",{onClick:()=>w(!x),className:`flex items-center gap-2 px-4 py-1.5 text-xs font-bold rounded-lg border transition-all ${x?"bg-indigo-600 text-white border-indigo-500 shadow-lg":"bg-gray-900 text-gray-400 border-gray-700 hover:border-gray-500"}`,children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),x?"Hide Filters":"Advanced Filters"]})]}),x&&a.jsxs("div",{className:"p-4 bg-gray-900/50 rounded-xl border border-gray-700 grid grid-cols-1 md:grid-cols-3 gap-6 animate-fade-in-down shadow-inner",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-500 mb-3",children:"Color Identity"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[["W","U","B","R","G"].filter(P=>r?.format?.toLowerCase()==="standard"?!0:new Set([...r?.commander?.color_identity||[],...r?.commander_partner?.color_identity||[]]).has(P)).map(P=>a.jsx("button",{onClick:()=>N(B=>({...B,colors:B.colors.includes(P)?B.colors.filter(T=>T!==P):[...B.colors,P]})),className:`w-8 h-8 rounded-full border flex items-center justify-center transition-all ${j.colors.includes(P)?"ring-2 ring-indigo-500 ring-offset-2 ring-offset-gray-900 border-white bg-gray-700":"opacity-40 grayscale hover:grayscale-0 hover:opacity-100 border-gray-600 bg-gray-800"}`,children:a.jsx("img",{src:`https://svgs.scryfall.io/card-symbols/${P}.svg`,alt:P,className:"w-5 h-5 shadow-sm"})},P)),a.jsx("button",{onClick:()=>N(P=>({...P,colors:P.colors.includes("C")?P.colors.filter(B=>B!=="C"):[...P.colors,"C"]})),className:`w-8 h-8 rounded-full border flex items-center justify-center text-[10px] font-black transition-all ${j.colors.includes("C")?"ring-2 ring-indigo-500 ring-offset-2 ring-offset-gray-900 border-white bg-indigo-600 text-white":"opacity-40 border-gray-600 bg-gray-800 text-gray-500 hover:opacity-100"}`,children:"C"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-500 mb-3",children:"Rarity"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["common","uncommon","rare","mythic"].map(P=>a.jsx("button",{onClick:()=>N(B=>({...B,rarity:B.rarity.includes(P)?B.rarity.filter(T=>T!==P):[...B.rarity,P]})),className:`px-3 py-1 text-[10px] font-bold uppercase rounded-lg border transition-all ${j.rarity.includes(P)?"bg-indigo-600 text-white border-indigo-400 shadow-md":"bg-gray-800 text-gray-500 border-gray-700 hover:border-gray-500 hover:text-gray-300"}`,children:P.charAt(0)},P))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-500 mb-3",children:"Set (Name/Code)"}),a.jsx("input",{type:"text",placeholder:"e.g. MH3 or Modern Horizons 3",value:j.set,onChange:P=>N(B=>({...B,set:P.target.value})),className:"w-full bg-gray-800 text-gray-300 border border-gray-700 rounded-lg px-3 py-1.5 text-xs focus:outline-none focus:border-indigo-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-500 mb-3",children:"Mana Value"}),a.jsx("input",{type:"number",min:"0",placeholder:"CMC",value:j.manaValue,onChange:P=>N(B=>({...B,manaValue:P.target.value})),className:"w-full bg-gray-800 text-gray-300 border border-gray-700 rounded-lg px-3 py-1.5 text-xs focus:outline-none focus:border-indigo-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-500 mb-3",children:"Sort By"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("select",{value:S,onChange:P=>C(P.target.value),className:"bg-gray-800 text-gray-300 border border-gray-700 rounded-lg px-3 py-1.5 text-xs focus:outline-none focus:border-indigo-500 w-full",children:[a.jsx("option",{value:"name",children:"Name (A-Z)"}),a.jsx("option",{value:"price-desc",children:"Price (Highest)"}),a.jsx("option",{value:"price-asc",children:"Price (Lowest)"}),a.jsx("option",{value:"rarity",children:"Rarity"})]}),a.jsx("button",{onClick:()=>{N({colors:[],rarity:[],set:"",manaValue:""}),C("name"),h(""),p("All")},className:"text-[10px] font-bold text-indigo-400 hover:text-indigo-300 transition-colors uppercase tracking-widest mt-1",children:"Reset All"})]})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-900/30 p-2 custom-scrollbar",children:o?a.jsx("div",{className:"flex justify-center items-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})}):A.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 space-y-2",children:[a.jsx("svg",{className:"w-12 h-12 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),a.jsx("p",{children:"No cards found matching your criteria."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:A.map(P=>{const B=P.data||P,T=B.image_uris?.art_crop||B.image_uris?.normal||B.card_faces?.[0]?.image_uris?.art_crop||B.card_faces?.[0]?.image_uris?.normal||"https://placehold.co/100x100?text=No+Img";return a.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-800/80 rounded-lg border border-gray-700/50 hover:bg-gray-700 hover:border-indigo-500/50 transition-all group cursor-pointer",onClick:()=>f(P),children:[a.jsxs("div",{className:"relative w-16 h-12 rounded overflow-hidden shrink-0 shadow-sm",children:[a.jsx("img",{src:T,className:"w-full h-full object-cover",alt:P.name,loading:"lazy"}),P.finish==="foil"&&a.jsx("div",{className:"absolute top-0.5 right-0.5 text-yellow-500 bg-black/40 rounded-full p-0.5 leading-none",title:"Foil",children:a.jsx("span",{className:"text-[10px]",children:""})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-gray-500 text-xs font-mono font-bold bg-gray-900 px-1 rounded",children:[P.count||1,"x"]}),a.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate",children:P.name})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[a.jsx("span",{className:"truncate max-w-[120px]",children:P.type_line}),a.jsx("span",{className:"bg-gray-700 px-1 rounded text-[10px]",children:P.set?.toUpperCase()})]})]}),a.jsx("button",{onClick:R=>{R.stopPropagation(),E(P)},className:"bg-indigo-600 hover:bg-indigo-500 text-white p-2 rounded-lg shadow-md transition-transform active:scale-95 shrink-0 flex items-center gap-1 text-xs font-bold",children:"Add"})]},P.firestoreId||P.id)})})})]})}),document.body)};function MT(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=MT(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function _t(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=MT(e))&&(n&&(n+=" "),n+=t);return n}var dH=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function N2(e){if(typeof e!="string")return!1;var t=dH;return t.includes(e)}var fH=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],hH=new Set(fH);function PT(e){return typeof e!="string"?!1:hH.has(e)}function RT(e){return typeof e=="string"&&e.startsWith("data-")}function mi(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(PT(r)||RT(r))&&(t[r]=e[r]);return t}function zd(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return mi(t)}return typeof e=="object"&&!Array.isArray(e)?mi(e):null}function oa(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(PT(r)||RT(r)||N2(r))&&(t[r]=e[r]);return t}var mH=["children","width","height","viewBox","className","style","title","desc"];function zb(){return zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zb.apply(null,arguments)}function gH(e,t){if(e==null)return{};var r,n,s=pH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var k2=y.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:o,className:c,style:f,title:d,desc:h}=e,m=gH(e,mH),p=o||{width:n,height:s,x:0,y:0},x=_t("recharts-surface",c);return y.createElement("svg",zb({},oa(m),{className:x,width:n,height:s,style:f,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),y.createElement("title",null,d),y.createElement("desc",null,h),r)}),xH=["children","className"];function Ub(){return Ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ub.apply(null,arguments)}function vH(e,t){if(e==null)return{};var r,n,s=yH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var un=y.forwardRef((e,t)=>{var{children:r,className:n}=e,s=vH(e,xH),o=_t("recharts-layer",n);return y.createElement("g",Ub({className:o},oa(s),{ref:t}),r)}),IT=y.createContext(null),bH=()=>y.useContext(IT);function Dt(e){return function(){return e}}const LT=Math.cos,wm=Math.sin,Ba=Math.sqrt,jm=Math.PI,bg=2*jm,Fb=Math.PI,Hb=2*Fb,Yo=1e-6,wH=Hb-Yo;function DT(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function jH(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return DT;const r=10**t;return function(n){this._+=n[0];for(let s=1,o=n.length;s<o;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class NH{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?DT:jH(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,o,c){this._append`C${+t},${+r},${+n},${+s},${this._x1=+o},${this._y1=+c}`}arcTo(t,r,n,s,o){if(t=+t,r=+r,n=+n,s=+s,o=+o,o<0)throw new Error(`negative radius: ${o}`);let c=this._x1,f=this._y1,d=n-t,h=s-r,m=c-t,p=f-r,x=m*m+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(x>Yo)if(!(Math.abs(p*d-h*m)>Yo)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let w=n-c,j=s-f,N=d*d+h*h,S=w*w+j*j,C=Math.sqrt(N),A=Math.sqrt(x),E=o*Math.tan((Fb-Math.acos((N+x-S)/(2*C*A)))/2),z=E/A,P=E/C;Math.abs(z-1)>Yo&&this._append`L${t+z*m},${r+z*p}`,this._append`A${o},${o},0,0,${+(p*w>m*j)},${this._x1=t+P*d},${this._y1=r+P*h}`}}arc(t,r,n,s,o,c){if(t=+t,r=+r,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let f=n*Math.cos(s),d=n*Math.sin(s),h=t+f,m=r+d,p=1^c,x=c?s-o:o-s;this._x1===null?this._append`M${h},${m}`:(Math.abs(this._x1-h)>Yo||Math.abs(this._y1-m)>Yo)&&this._append`L${h},${m}`,n&&(x<0&&(x=x%Hb+Hb),x>wH?this._append`A${n},${n},0,1,${p},${t-f},${r-d}A${n},${n},0,1,${p},${this._x1=h},${this._y1=m}`:x>Yo&&this._append`A${n},${n},0,${+(x>=Fb)},${p},${this._x1=t+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function S2(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new NH(t)}function _2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function BT(e){this._context=e}BT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function wg(e){return new BT(e)}function $T(e){return e[0]}function zT(e){return e[1]}function UT(e,t){var r=Dt(!0),n=null,s=wg,o=null,c=S2(f);e=typeof e=="function"?e:e===void 0?$T:Dt(e),t=typeof t=="function"?t:t===void 0?zT:Dt(t);function f(d){var h,m=(d=_2(d)).length,p,x=!1,w;for(n==null&&(o=s(w=c())),h=0;h<=m;++h)!(h<m&&r(p=d[h],h,d))===x&&((x=!x)?o.lineStart():o.lineEnd()),x&&o.point(+e(p,h,d),+t(p,h,d));if(w)return o=null,w+""||null}return f.x=function(d){return arguments.length?(e=typeof d=="function"?d:Dt(+d),f):e},f.y=function(d){return arguments.length?(t=typeof d=="function"?d:Dt(+d),f):t},f.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Dt(!!d),f):r},f.curve=function(d){return arguments.length?(s=d,n!=null&&(o=s(n)),f):s},f.context=function(d){return arguments.length?(d==null?n=o=null:o=s(n=d),f):n},f}function k0(e,t,r){var n=null,s=Dt(!0),o=null,c=wg,f=null,d=S2(h);e=typeof e=="function"?e:e===void 0?$T:Dt(+e),t=typeof t=="function"?t:Dt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?zT:Dt(+r);function h(p){var x,w,j,N=(p=_2(p)).length,S,C=!1,A,E=new Array(N),z=new Array(N);for(o==null&&(f=c(A=d())),x=0;x<=N;++x){if(!(x<N&&s(S=p[x],x,p))===C)if(C=!C)w=x,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),j=x-1;j>=w;--j)f.point(E[j],z[j]);f.lineEnd(),f.areaEnd()}C&&(E[x]=+e(S,x,p),z[x]=+t(S,x,p),f.point(n?+n(S,x,p):E[x],r?+r(S,x,p):z[x]))}if(A)return f=null,A+""||null}function m(){return UT().defined(s).curve(c).context(o)}return h.x=function(p){return arguments.length?(e=typeof p=="function"?p:Dt(+p),n=null,h):e},h.x0=function(p){return arguments.length?(e=typeof p=="function"?p:Dt(+p),h):e},h.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Dt(+p),h):n},h.y=function(p){return arguments.length?(t=typeof p=="function"?p:Dt(+p),r=null,h):t},h.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Dt(+p),h):t},h.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Dt(+p),h):r},h.lineX0=h.lineY0=function(){return m().x(e).y(t)},h.lineY1=function(){return m().x(e).y(r)},h.lineX1=function(){return m().x(n).y(t)},h.defined=function(p){return arguments.length?(s=typeof p=="function"?p:Dt(!!p),h):s},h.curve=function(p){return arguments.length?(c=p,o!=null&&(f=c(o)),h):c},h.context=function(p){return arguments.length?(p==null?o=f=null:f=c(o=p),h):o},h}class FT{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function kH(e){return new FT(e,!0)}function SH(e){return new FT(e,!1)}const C2={draw(e,t){const r=Ba(t/jm);e.moveTo(r,0),e.arc(0,0,r,0,bg)}},_H={draw(e,t){const r=Ba(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},HT=Ba(1/3),CH=HT*2,EH={draw(e,t){const r=Ba(t/CH),n=r*HT;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},AH={draw(e,t){const r=Ba(t),n=-r/2;e.rect(n,n,r,r)}},TH=.8908130915292852,WT=wm(jm/10)/wm(7*jm/10),OH=wm(bg/10)*WT,MH=-LT(bg/10)*WT,PH={draw(e,t){const r=Ba(t*TH),n=OH*r,s=MH*r;e.moveTo(0,-r),e.lineTo(n,s);for(let o=1;o<5;++o){const c=bg*o/5,f=LT(c),d=wm(c);e.lineTo(d*r,-f*r),e.lineTo(f*n-d*s,d*n+f*s)}e.closePath()}},Iv=Ba(3),RH={draw(e,t){const r=-Ba(t/(Iv*3));e.moveTo(0,r*2),e.lineTo(-Iv*r,-r),e.lineTo(Iv*r,-r),e.closePath()}},ta=-.5,ra=Ba(3)/2,Wb=1/Ba(12),IH=(Wb/2+1)*3,LH={draw(e,t){const r=Ba(t/IH),n=r/2,s=r*Wb,o=n,c=r*Wb+r,f=-o,d=c;e.moveTo(n,s),e.lineTo(o,c),e.lineTo(f,d),e.lineTo(ta*n-ra*s,ra*n+ta*s),e.lineTo(ta*o-ra*c,ra*o+ta*c),e.lineTo(ta*f-ra*d,ra*f+ta*d),e.lineTo(ta*n+ra*s,ta*s-ra*n),e.lineTo(ta*o+ra*c,ta*c-ra*o),e.lineTo(ta*f+ra*d,ta*d-ra*f),e.closePath()}};function DH(e,t){let r=null,n=S2(s);e=typeof e=="function"?e:Dt(e||C2),t=typeof t=="function"?t:Dt(t===void 0?64:+t);function s(){let o;if(r||(r=o=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),o)return r=null,o+""||null}return s.type=function(o){return arguments.length?(e=typeof o=="function"?o:Dt(o),s):e},s.size=function(o){return arguments.length?(t=typeof o=="function"?o:Dt(+o),s):t},s.context=function(o){return arguments.length?(r=o??null,s):r},s}function Nm(){}function km(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function GT(e){this._context=e}GT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:km(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:km(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function BH(e){return new GT(e)}function VT(e){this._context=e}VT.prototype={areaStart:Nm,areaEnd:Nm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:km(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $H(e){return new VT(e)}function qT(e){this._context=e}qT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:km(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zH(e){return new qT(e)}function KT(e){this._context=e}KT.prototype={areaStart:Nm,areaEnd:Nm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function UH(e){return new KT(e)}function vS(e){return e<0?-1:1}function yS(e,t,r){var n=e._x1-e._x0,s=t-e._x1,o=(e._y1-e._y0)/(n||s<0&&-0),c=(r-e._y1)/(s||n<0&&-0),f=(o*s+c*n)/(n+s);return(vS(o)+vS(c))*Math.min(Math.abs(o),Math.abs(c),.5*Math.abs(f))||0}function bS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Lv(e,t,r){var n=e._x0,s=e._y0,o=e._x1,c=e._y1,f=(o-n)/3;e._context.bezierCurveTo(n+f,s+f*t,o-f,c-f*r,o,c)}function Sm(e){this._context=e}Sm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Lv(this,this._t0,bS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Lv(this,bS(this,r=yS(this,e,t)),r);break;default:Lv(this,this._t0,r=yS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function YT(e){this._context=new XT(e)}(YT.prototype=Object.create(Sm.prototype)).point=function(e,t){Sm.prototype.point.call(this,t,e)};function XT(e){this._context=e}XT.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,o){this._context.bezierCurveTo(t,e,n,r,o,s)}};function FH(e){return new Sm(e)}function HH(e){return new YT(e)}function JT(e){this._context=e}JT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=wS(e),s=wS(t),o=0,c=1;c<r;++o,++c)this._context.bezierCurveTo(n[0][o],s[0][o],n[1][o],s[1][o],e[c],t[c]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function wS(e){var t,r=e.length-1,n,s=new Array(r),o=new Array(r),c=new Array(r);for(s[0]=0,o[0]=2,c[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,o[t]=4,c[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,o[r-1]=7,c[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/o[t-1],o[t]-=n,c[t]-=n*c[t-1];for(s[r-1]=c[r-1]/o[r-1],t=r-2;t>=0;--t)s[t]=(c[t]-s[t+1])/o[t];for(o[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-s[t+1];return[s,o]}function WH(e){return new JT(e)}function jg(e,t){this._context=e,this._t=t}jg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function GH(e){return new jg(e,.5)}function VH(e){return new jg(e,0)}function qH(e){return new jg(e,1)}function xl(e,t){if((c=e.length)>1)for(var r=1,n,s,o=e[t[0]],c,f=o.length;r<c;++r)for(s=o,o=e[t[r]],n=0;n<f;++n)o[n][1]+=o[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Gb(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function KH(e,t){return e[t]}function YH(e){const t=[];return t.key=e,t}function XH(){var e=Dt([]),t=Gb,r=xl,n=KH;function s(o){var c=Array.from(e.apply(this,arguments),YH),f,d=c.length,h=-1,m;for(const p of o)for(f=0,++h;f<d;++f)(c[f][h]=[0,+n(p,c[f].key,h,o)]).data=p;for(f=0,m=_2(t(c));f<d;++f)c[m[f]].index=f;return r(c,m),c}return s.keys=function(o){return arguments.length?(e=typeof o=="function"?o:Dt(Array.from(o)),s):e},s.value=function(o){return arguments.length?(n=typeof o=="function"?o:Dt(+o),s):n},s.order=function(o){return arguments.length?(t=o==null?Gb:typeof o=="function"?o:Dt(Array.from(o)),s):t},s.offset=function(o){return arguments.length?(r=o??xl,s):r},s}function JH(e,t){if((n=e.length)>0){for(var r,n,s=0,o=e[0].length,c;s<o;++s){for(c=r=0;r<n;++r)c+=e[r][s][1]||0;if(c)for(r=0;r<n;++r)e[r][s][1]/=c}xl(e,t)}}function QH(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,o=n.length;r<o;++r){for(var c=0,f=0;c<s;++c)f+=e[c][r][1]||0;n[r][1]+=n[r][0]=-f/2}xl(e,t)}}function ZH(e,t){if(!(!((c=e.length)>0)||!((o=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,o,c;n<o;++n){for(var f=0,d=0,h=0;f<c;++f){for(var m=e[t[f]],p=m[n][1]||0,x=m[n-1][1]||0,w=(p-x)/2,j=0;j<f;++j){var N=e[t[j]],S=N[n][1]||0,C=N[n-1][1]||0;w+=S-C}d+=p,h+=w*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=h/d)}s[n-1][1]+=s[n-1][0]=r,xl(e,t)}}var Dv={},Bv={},jS;function eW(){return jS||(jS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Bv)),Bv}var $v={},NS;function QT(){return NS||(NS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})($v)),$v}var zv={},kS;function E2(){return kS||(kS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(zv)),zv}var Uv={},Fv={},SS;function tW(){return SS||(SS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Fv)),Fv}var _S;function A2(){return _S||(_S=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tW(),r=E2();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const o=[],c=s.length;if(c===0)return o;let f=0,d="",h="",m=!1;for(s.charCodeAt(0)===46&&(o.push(""),f++);f<c;){const p=s[f];h?p==="\\"&&f+1<c?(f++,d+=s[f]):p===h?h="":d+=p:m?p==='"'||p==="'"?h=p:p==="]"?(m=!1,o.push(d),d=""):d+=p:p==="["?(m=!0,d&&(o.push(d),d="")):p==="."?d&&(o.push(d),d=""):d+=p,f++}return d&&o.push(d),o}e.toPath=n})(Uv)),Uv}var CS;function T2(){return CS||(CS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eW(),r=QT(),n=E2(),s=A2();function o(f,d,h){if(f==null)return h;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return h;const m=f[d];return m===void 0?r.isDeepKey(d)?o(f,s.toPath(d),h):h:m}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const m=f[d];return m===void 0?h:m}default:{if(Array.isArray(d))return c(f,d,h);if(Object.is(d?.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return h;const m=f[d];return m===void 0?h:m}}}function c(f,d,h){if(d.length===0)return h;let m=f;for(let p=0;p<d.length;p++){if(m==null||t.isUnsafeProperty(d[p]))return h;m=m[d[p]]}return m===void 0?h:m}e.get=o})(Dv)),Dv}var Hv,ES;function rW(){return ES||(ES=1,Hv=T2().get),Hv}var nW=rW();const vl=zn(nW);var aW=4;function oo(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:aW,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function rr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((s,o,c)=>{var f=r[c-1];return typeof f=="string"?s+f+o:f!==void 0?s+oo(f)+o:s+o},"")}var Vr=e=>e===0?0:e>0?1:-1,gi=e=>typeof e=="number"&&e!=+e,ss=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ge=e=>(typeof e=="number"||e instanceof Number)&&!gi(e),pi=e=>Ge(e)||typeof e=="string",iW=0,Ud=e=>{var t=++iW;return"".concat(e||"").concat(t)},tn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ge(t)&&typeof t!="string")return n;var o;if(ss(t)){if(r==null)return n;var c=t.indexOf("%");o=r*parseFloat(t.slice(0,c))/100}else o=+t;return gi(o)&&(o=n),s&&r!=null&&o>r&&(o=r),o},ZT=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function Nr(e,t,r){return Ge(e)&&Ge(t)?oo(e+r*(t-e)):t}function sW(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):vl(n,t))===r)}var Ir=e=>e===null||typeof e>"u",vf=e=>Ir(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function oW(e){return e!=null}function yf(){}var lW=["type","size","sizeType"];function Vb(){return Vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vb.apply(null,arguments)}function AS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function TS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AS(Object(r),!0).forEach(function(n){cW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cW(e,t,r){return(t=uW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uW(e){var t=dW(e,"string");return typeof t=="symbol"?t:t+""}function dW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fW(e,t){if(e==null)return{};var r,n,s=hW(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var eO={symbolCircle:C2,symbolCross:_H,symbolDiamond:EH,symbolSquare:AH,symbolStar:PH,symbolTriangle:RH,symbolWye:LH},mW=Math.PI/180,gW=e=>{var t="symbol".concat(vf(e));return eO[t]||C2},pW=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*mW;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},xW=(e,t)=>{eO["symbol".concat(vf(e))]=t},O2=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=fW(e,lW),o=TS(TS({},s),{},{type:t,size:r,sizeType:n}),c="circle";typeof t=="string"&&(c=t);var f=()=>{var x=gW(c),w=DH().type(x).size(pW(r,n,c)),j=w();if(j!==null)return j},{className:d,cx:h,cy:m}=o,p=oa(o);return Ge(h)&&Ge(m)&&Ge(r)?y.createElement("path",Vb({},p,{className:_t("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(m,")"),d:f()})):null};O2.registerSymbol=xW;var tO=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,vW=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{N2(s)&&(n[s]=(o=>r[s](r,o)))}),n},yW=(e,t,r)=>n=>(e(t,r,n),null),bf=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var o=e[s];N2(s)&&typeof o=="function"&&(n||(n={}),n[s]=yW(o,t,r))}),n};function OS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OS(Object(r),!0).forEach(function(n){wW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wW(e,t,r){return(t=jW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jW(e){var t=NW(e,"string");return typeof t=="symbol"?t:t+""}function NW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kr(e,t){var r=bW({},e),n=t,s=Object.keys(t),o=s.reduce((c,f)=>(c[f]===void 0&&n[f]!==void 0&&(c[f]=n[f]),c),r);return o}function _m(){return _m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_m.apply(null,arguments)}function MS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MS(Object(r),!0).forEach(function(n){SW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SW(e,t,r){return(t=_W(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _W(e){var t=CW(e,"string");return typeof t=="symbol"?t:t+""}function CW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aa=32,EW={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function AW(e){var{data:t,iconType:r,inactiveColor:n}=e,s=aa/2,o=aa/6,c=aa/3,f=t.inactive?n:t.color,d=r??t.type;if(d==="none")return null;if(d==="plainline"){var h;return y.createElement("line",{strokeWidth:4,fill:"none",stroke:f,strokeDasharray:(h=t.payload)===null||h===void 0?void 0:h.strokeDasharray,x1:0,y1:s,x2:aa,y2:s,className:"recharts-legend-icon"})}if(d==="line")return y.createElement("path",{strokeWidth:4,fill:"none",stroke:f,d:"M0,".concat(s,"h").concat(c,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*c,",").concat(s,`
            H`).concat(aa,"M").concat(2*c,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(c,",").concat(s),className:"recharts-legend-icon"});if(d==="rect")return y.createElement("path",{stroke:"none",fill:f,d:"M0,".concat(aa/8,"h").concat(aa,"v").concat(aa*3/4,"h").concat(-aa,"z"),className:"recharts-legend-icon"});if(y.isValidElement(t.legendIcon)){var m=kW({},t);return delete m.legendIcon,y.cloneElement(t.legendIcon,m)}return y.createElement(O2,{fill:f,cx:s,cy:s,size:aa,sizeType:"diameter",type:d})}function TW(e){var{payload:t,iconSize:r,layout:n,formatter:s,inactiveColor:o,iconType:c}=e,f={x:0,y:0,width:aa,height:aa},d={display:n==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((m,p)=>{var x=m.formatter||s,w=_t({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:m.inactive});if(m.type==="none")return null;var j=m.inactive?o:m.color,N=x?x(m.value,m,p):m.value;return y.createElement("li",_m({className:w,style:d,key:"legend-item-".concat(p)},bf(e,m,p)),y.createElement(k2,{width:r,height:r,viewBox:f,style:h,"aria-label":"".concat(N," legend icon")},y.createElement(AW,{data:m,iconType:c,inactiveColor:o})),y.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},N))})}var OW=e=>{var t=Kr(e,EW),{payload:r,layout:n,align:s}=t;if(!r||!r.length)return null;var o={padding:0,margin:0,textAlign:n==="horizontal"?s:"left"};return y.createElement("ul",{className:"recharts-default-legend",style:o},y.createElement(TW,_m({},t,{payload:r})))},Wv={},Gv={},PS;function MW(){return PS||(PS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let o=0;o<r.length;o++){const c=r[o],f=n(c);s.has(f)||s.set(f,c)}return Array.from(s.values())}e.uniqBy=t})(Gv)),Gv}var Vv={},RS;function rO(){return RS||(RS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Vv)),Vv}var qv={},Kv={},Yv={},IS;function PW(){return IS||(IS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Yv)),Yv}var LS;function M2(){return LS||(LS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PW();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Kv)),Kv}var Xv={},DS;function RW(){return DS||(DS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Xv)),Xv}var BS;function IW(){return BS||(BS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M2(),r=RW();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(qv)),qv}var Jv={},Qv={},$S;function LW(){return $S||($S=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T2();function r(n){return function(s){return t.get(s,n)}}e.property=r})(Qv)),Qv}var Zv={},ey={},ty={},ry={},zS;function nO(){return zS||(zS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(ry)),ry}var ny={},US;function aO(){return US||(US=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(ny)),ny}var ay={},FS;function iO(){return FS||(FS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(ay)),ay}var HS;function DW(){return HS||(HS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nO(),r=aO(),n=iO();function s(m,p,x){return typeof x!="function"?s(m,p,()=>{}):o(m,p,function w(j,N,S,C,A,E){const z=x(j,N,S,C,A,E);return z!==void 0?!!z:o(j,N,w,E)},new Map)}function o(m,p,x,w){if(p===m)return!0;switch(typeof p){case"object":return c(m,p,x,w);case"function":return Object.keys(p).length>0?o(m,{...p},x,w):n.eq(m,p);default:return t.isObject(m)?typeof p=="string"?p==="":!0:n.eq(m,p)}}function c(m,p,x,w){if(p==null)return!0;if(Array.isArray(p))return d(m,p,x,w);if(p instanceof Map)return f(m,p,x,w);if(p instanceof Set)return h(m,p,x,w);const j=Object.keys(p);if(m==null||r.isPrimitive(m))return j.length===0;if(j.length===0)return!0;if(w?.has(p))return w.get(p)===m;w?.set(p,m);try{for(let N=0;N<j.length;N++){const S=j[N];if(!r.isPrimitive(m)&&!(S in m)||p[S]===void 0&&m[S]!==void 0||p[S]===null&&m[S]!==null||!x(m[S],p[S],S,m,p,w))return!1}return!0}finally{w?.delete(p)}}function f(m,p,x,w){if(p.size===0)return!0;if(!(m instanceof Map))return!1;for(const[j,N]of p.entries()){const S=m.get(j);if(x(S,N,j,m,p,w)===!1)return!1}return!0}function d(m,p,x,w){if(p.length===0)return!0;if(!Array.isArray(m))return!1;const j=new Set;for(let N=0;N<p.length;N++){const S=p[N];let C=!1;for(let A=0;A<m.length;A++){if(j.has(A))continue;const E=m[A];let z=!1;if(x(E,S,N,m,p,w)&&(z=!0),z){j.add(A),C=!0;break}}if(!C)return!1}return!0}function h(m,p,x,w){return p.size===0?!0:m instanceof Set?d([...m],[...p],x,w):!1}e.isMatchWith=s,e.isSetMatch=h})(ty)),ty}var WS;function sO(){return WS||(WS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DW();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(ey)),ey}var iy={},sy={},oy={},GS;function BW(){return GS||(GS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(oy)),oy}var ly={},VS;function oO(){return VS||(VS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(ly)),ly}var cy={},qS;function lO(){return qS||(qS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",o="[object Arguments]",c="[object Symbol]",f="[object Date]",d="[object Map]",h="[object Set]",m="[object Array]",p="[object Function]",x="[object ArrayBuffer]",w="[object Object]",j="[object Error]",N="[object DataView]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",A="[object Uint16Array]",E="[object Uint32Array]",z="[object BigUint64Array]",P="[object Int8Array]",B="[object Int16Array]",T="[object Int32Array]",R="[object BigInt64Array]",$="[object Float32Array]",I="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=x,e.arrayTag=m,e.bigInt64ArrayTag=R,e.bigUint64ArrayTag=z,e.booleanTag=s,e.dataViewTag=N,e.dateTag=f,e.errorTag=j,e.float32ArrayTag=$,e.float64ArrayTag=I,e.functionTag=p,e.int16ArrayTag=B,e.int32ArrayTag=T,e.int8ArrayTag=P,e.mapTag=d,e.numberTag=n,e.objectTag=w,e.regexpTag=t,e.setTag=h,e.stringTag=r,e.symbolTag=c,e.uint16ArrayTag=A,e.uint32ArrayTag=E,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=C})(cy)),cy}var uy={},KS;function $W(){return KS||(KS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(uy)),uy}var YS;function cO(){return YS||(YS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BW(),r=oO(),n=lO(),s=aO(),o=$W();function c(m,p){return f(m,void 0,m,new Map,p)}function f(m,p,x,w=new Map,j=void 0){const N=j?.(m,p,x,w);if(N!==void 0)return N;if(s.isPrimitive(m))return m;if(w.has(m))return w.get(m);if(Array.isArray(m)){const S=new Array(m.length);w.set(m,S);for(let C=0;C<m.length;C++)S[C]=f(m[C],C,x,w,j);return Object.hasOwn(m,"index")&&(S.index=m.index),Object.hasOwn(m,"input")&&(S.input=m.input),S}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const S=new RegExp(m.source,m.flags);return S.lastIndex=m.lastIndex,S}if(m instanceof Map){const S=new Map;w.set(m,S);for(const[C,A]of m)S.set(C,f(A,C,x,w,j));return S}if(m instanceof Set){const S=new Set;w.set(m,S);for(const C of m)S.add(f(C,void 0,x,w,j));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(o.isTypedArray(m)){const S=new(Object.getPrototypeOf(m)).constructor(m.length);w.set(m,S);for(let C=0;C<m.length;C++)S[C]=f(m[C],C,x,w,j);return S}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const S=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return w.set(m,S),d(S,m,x,w,j),S}if(typeof File<"u"&&m instanceof File){const S=new File([m],m.name,{type:m.type});return w.set(m,S),d(S,m,x,w,j),S}if(typeof Blob<"u"&&m instanceof Blob){const S=new Blob([m],{type:m.type});return w.set(m,S),d(S,m,x,w,j),S}if(m instanceof Error){const S=new m.constructor;return w.set(m,S),S.message=m.message,S.name=m.name,S.stack=m.stack,S.cause=m.cause,d(S,m,x,w,j),S}if(m instanceof Boolean){const S=new Boolean(m.valueOf());return w.set(m,S),d(S,m,x,w,j),S}if(m instanceof Number){const S=new Number(m.valueOf());return w.set(m,S),d(S,m,x,w,j),S}if(m instanceof String){const S=new String(m.valueOf());return w.set(m,S),d(S,m,x,w,j),S}if(typeof m=="object"&&h(m)){const S=Object.create(Object.getPrototypeOf(m));return w.set(m,S),d(S,m,x,w,j),S}return m}function d(m,p,x=m,w,j){const N=[...Object.keys(p),...t.getSymbols(p)];for(let S=0;S<N.length;S++){const C=N[S],A=Object.getOwnPropertyDescriptor(m,C);(A==null||A.writable)&&(m[C]=f(p[C],C,x,w,j))}}function h(m){switch(r.getTag(m)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=c,e.cloneDeepWithImpl=f,e.copyProperties=d})(sy)),sy}var XS;function zW(){return XS||(XS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cO();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(iy)),iy}var JS;function UW(){return JS||(JS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sO(),r=zW();function n(s){return s=r.cloneDeep(s),o=>t.isMatch(o,s)}e.matches=n})(Zv)),Zv}var dy={},fy={},hy={},QS;function FW(){return QS||(QS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cO(),r=lO();function n(s,o){return t.cloneDeepWith(s,(c,f,d,h)=>{const m=o?.(c,f,d,h);if(m!==void 0)return m;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s?.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(hy)),hy}var ZS;function HW(){return ZS||(ZS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FW();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(fy)),fy}var my={},gy={},e_;function uO(){return e_||(e_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(gy)),gy}var py={},t_;function WW(){return t_||(t_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oO();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(py)),py}var r_;function GW(){return r_||(r_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QT(),r=uO(),n=WW(),s=A2();function o(c,f){let d;if(Array.isArray(f)?d=f:typeof f=="string"&&t.isDeepKey(f)&&c?.[f]==null?d=s.toPath(f):d=[f],d.length===0)return!1;let h=c;for(let m=0;m<d.length;m++){const p=d[m];if((h==null||!Object.hasOwn(h,p))&&!((Array.isArray(h)||n.isArguments(h))&&r.isIndex(p)&&p<h.length))return!1;h=h[p]}return!0}e.has=o})(my)),my}var n_;function VW(){return n_||(n_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sO(),r=E2(),n=HW(),s=T2(),o=GW();function c(f,d){switch(typeof f){case"object":{Object.is(f?.valueOf(),-0)&&(f="-0");break}case"number":{f=r.toKey(f);break}}return d=n.cloneDeep(d),function(h){const m=s.get(h,f);return m===void 0?o.has(h,f):d===void 0?m===void 0:t.isMatch(m,d)}}e.matchesProperty=c})(dy)),dy}var a_;function qW(){return a_||(a_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rO(),r=LW(),n=UW(),s=VW();function o(c){if(c==null)return t.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?s.matchesProperty(c[0],c[1]):n.matches(c);case"string":case"symbol":case"number":return r.property(c)}}e.iteratee=o})(Jv)),Jv}var i_;function KW(){return i_||(i_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MW(),r=rO(),n=IW(),s=qW();function o(c,f=r.identity){return n.isArrayLikeObject(c)?t.uniqBy(Array.from(c),s.iteratee(f)):[]}e.uniqBy=o})(Wv)),Wv}var xy,s_;function YW(){return s_||(s_=1,xy=KW().uniqBy),xy}var XW=YW();const o_=zn(XW);function dO(e,t,r){return t===!0?o_(e,r):typeof t=="function"?o_(e,t):e}var vy={exports:{}},yy={},by={exports:{}},wy={};var l_;function JW(){if(l_)return wy;l_=1;var e=xo();function t(p,x){return p===x&&(p!==0||1/p===1/x)||p!==p&&x!==x}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,o=e.useLayoutEffect,c=e.useDebugValue;function f(p,x){var w=x(),j=n({inst:{value:w,getSnapshot:x}}),N=j[0].inst,S=j[1];return o(function(){N.value=w,N.getSnapshot=x,d(N)&&S({inst:N})},[p,w,x]),s(function(){return d(N)&&S({inst:N}),p(function(){d(N)&&S({inst:N})})},[p]),c(w),w}function d(p){var x=p.getSnapshot;p=p.value;try{var w=x();return!r(p,w)}catch{return!0}}function h(p,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:f;return wy.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,wy}var c_;function QW(){return c_||(c_=1,by.exports=JW()),by.exports}var u_;function ZW(){if(u_)return yy;u_=1;var e=xo(),t=QW();function r(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,o=e.useRef,c=e.useEffect,f=e.useMemo,d=e.useDebugValue;return yy.useSyncExternalStoreWithSelector=function(h,m,p,x,w){var j=o(null);if(j.current===null){var N={hasValue:!1,value:null};j.current=N}else N=j.current;j=f(function(){function C(B){if(!A){if(A=!0,E=B,B=x(B),w!==void 0&&N.hasValue){var T=N.value;if(w(T,B))return z=T}return z=B}if(T=z,n(E,B))return T;var R=x(B);return w!==void 0&&w(T,R)?(E=B,T):(E=B,z=R)}var A=!1,E,z,P=p===void 0?null:p;return[function(){return C(m())},P===null?void 0:function(){return C(P())}]},[m,p,x,w]);var S=s(h,j[0],j[1]);return c(function(){N.hasValue=!0,N.value=S},[S]),d(S),S},yy}var d_;function eG(){return d_||(d_=1,vy.exports=ZW()),vy.exports}var tG=eG(),P2=y.createContext(null),rG=e=>e,Bt=()=>{var e=y.useContext(P2);return e?e.store.dispatch:rG},rm=()=>{},nG=()=>rm,aG=(e,t)=>e===t;function He(e){var t=y.useContext(P2);return tG.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:nG,t?t.store.getState:rm,t?t.store.getState:rm,t?e:rm,aG)}function iG(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function sG(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function oG(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var f_=e=>Array.isArray(e)?e:[e];function lG(e){const t=Array.isArray(e[0])?e[0]:e;return oG(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function cG(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var uG=class{constructor(e){this.value=e}deref(){return this.value}},dG=typeof WeakRef<"u"?WeakRef:uG,fG=0,h_=1;function S0(){return{s:fG,v:void 0,o:null,p:null}}function fO(e,t={}){let r=S0();const{resultEqualityCheck:n}=t;let s,o=0;function c(){let f=r;const{length:d}=arguments;for(let p=0,x=d;p<x;p++){const w=arguments[p];if(typeof w=="function"||typeof w=="object"&&w!==null){let j=f.o;j===null&&(f.o=j=new WeakMap);const N=j.get(w);N===void 0?(f=S0(),j.set(w,f)):f=N}else{let j=f.p;j===null&&(f.p=j=new Map);const N=j.get(w);N===void 0?(f=S0(),j.set(w,f)):f=N}}const h=f;let m;if(f.s===h_)m=f.v;else if(m=e.apply(null,arguments),o++,n){const p=s?.deref?.()??s;p!=null&&n(p,m)&&(m=p,o!==0&&o--),s=typeof m=="object"&&m!==null||typeof m=="function"?new dG(m):m}return h.s=h_,h.v=m,m}return c.clearCache=()=>{r=S0(),c.resetResultsCount()},c.resultsCount=()=>o,c.resetResultsCount=()=>{o=0},c}function hG(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let o=0,c=0,f,d={},h=s.pop();typeof h=="object"&&(d=h,h=s.pop()),iG(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const m={...r,...d},{memoize:p,memoizeOptions:x=[],argsMemoize:w=fO,argsMemoizeOptions:j=[]}=m,N=f_(x),S=f_(j),C=lG(s),A=p(function(){return o++,h.apply(null,arguments)},...N),E=w(function(){c++;const P=cG(C,arguments);return f=A.apply(null,P),f},...S);return Object.assign(E,{resultFunc:h,memoizedResultFunc:A,dependencies:C,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>f,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:p,argsMemoize:w})};return Object.assign(n,{withTypes:()=>n}),n}var ue=hG(fO),mG=Object.assign((e,t=ue)=>{sG(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(o=>e[o]);return t(n,(...o)=>o.reduce((c,f,d)=>(c[r[d]]=f,c),{}))},{withTypes:()=>mG}),jy={},Ny={},ky={},m_;function gG(){return m_||(m_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,o)=>{if(n!==s){const c=t(n),f=t(s);if(c===f&&c===0){if(n<s)return o==="desc"?1:-1;if(n>s)return o==="desc"?-1:1}return o==="desc"?f-c:c-f}return 0};e.compareValues=r})(ky)),ky}var Sy={},_y={},g_;function hO(){return g_||(g_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(_y)),_y}var p_;function pG(){return p_||(p_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hO(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(o,c){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(n.test(o)||!r.test(o))||c!=null&&Object.hasOwn(c,o)}e.isKey=s})(Sy)),Sy}var x_;function xG(){return x_||(x_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gG(),r=pG(),n=A2();function s(o,c,f,d){if(o==null)return[];f=d?void 0:f,Array.isArray(o)||(o=Object.values(o)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(f)||(f=f==null?[]:[f]),f=f.map(w=>String(w));const h=(w,j)=>{let N=w;for(let S=0;S<j.length&&N!=null;++S)N=N[j[S]];return N},m=(w,j)=>j==null||w==null?j:typeof w=="object"&&"key"in w?Object.hasOwn(j,w.key)?j[w.key]:h(j,w.path):typeof w=="function"?w(j):Array.isArray(w)?h(j,w):typeof j=="object"?j[w]:j,p=c.map(w=>(Array.isArray(w)&&w.length===1&&(w=w[0]),w==null||typeof w=="function"||Array.isArray(w)||r.isKey(w)?w:{key:w,path:n.toPath(w)}));return o.map(w=>({original:w,criteria:p.map(j=>m(j,w))})).slice().sort((w,j)=>{for(let N=0;N<p.length;N++){const S=t.compareValues(w.criteria[N],j.criteria[N],f[N]);if(S!==0)return S}return 0}).map(w=>w.original)}e.orderBy=s})(Ny)),Ny}var Cy={},v_;function vG(){return v_||(v_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],o=Math.floor(n),c=(f,d)=>{for(let h=0;h<f.length;h++){const m=f[h];Array.isArray(m)&&d<o?c(m,d+1):s.push(m)}};return c(r,0),s}e.flatten=t})(Cy)),Cy}var Ey={},y_;function mO(){return y_||(y_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uO(),r=M2(),n=nO(),s=iO();function o(c,f,d){return n.isObject(d)&&(typeof f=="number"&&r.isArrayLike(d)&&t.isIndex(f)&&f<d.length||typeof f=="string"&&f in d)?s.eq(d[f],c):!1}e.isIterateeCall=o})(Ey)),Ey}var b_;function yG(){return b_||(b_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xG(),r=vG(),n=mO();function s(o,...c){const f=c.length;return f>1&&n.isIterateeCall(o,c[0],c[1])?c=[]:f>2&&n.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),t.orderBy(o,r.flatten(c),["asc"])}e.sortBy=s})(jy)),jy}var Ay,w_;function bG(){return w_||(w_=1,Ay=yG().sortBy),Ay}var wG=bG();const Ng=zn(wG);var gO=e=>e.legend.settings,jG=e=>e.legend.size,NG=e=>e.legend.payload,kG=ue([NG,gO],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Ng(n,r):n});function SG(){return He(kG)}var _0=1;function pO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(s=>{if(s!=null){var o=s.getBoundingClientRect(),c={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(c.height-t.height)>_0||Math.abs(c.left-t.left)>_0||Math.abs(c.top-t.top)>_0||Math.abs(c.width-t.width)>_0)&&r({height:c.height,left:c.left,top:c.top,width:c.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Fr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var _G=typeof Symbol=="function"&&Symbol.observable||"@@observable",j_=_G,Ty=()=>Math.random().toString(36).substring(7).split("").join("."),CG={INIT:`@@redux/INIT${Ty()}`,REPLACE:`@@redux/REPLACE${Ty()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ty()}`},Cm=CG;function R2(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function xO(e,t,r){if(typeof e!="function")throw new Error(Fr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Fr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Fr(1));return r(xO)(e,t)}let n=e,s=t,o=new Map,c=o,f=0,d=!1;function h(){c===o&&(c=new Map,o.forEach((S,C)=>{c.set(C,S)}))}function m(){if(d)throw new Error(Fr(3));return s}function p(S){if(typeof S!="function")throw new Error(Fr(4));if(d)throw new Error(Fr(5));let C=!0;h();const A=f++;return c.set(A,S),function(){if(C){if(d)throw new Error(Fr(6));C=!1,h(),c.delete(A),o=null}}}function x(S){if(!R2(S))throw new Error(Fr(7));if(typeof S.type>"u")throw new Error(Fr(8));if(typeof S.type!="string")throw new Error(Fr(17));if(d)throw new Error(Fr(9));try{d=!0,s=n(s,S)}finally{d=!1}return(o=c).forEach(A=>{A()}),S}function w(S){if(typeof S!="function")throw new Error(Fr(10));n=S,x({type:Cm.REPLACE})}function j(){const S=p;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Fr(11));function A(){const z=C;z.next&&z.next(m())}return A(),{unsubscribe:S(A)}},[j_](){return this}}}return x({type:Cm.INIT}),{dispatch:x,subscribe:p,getState:m,replaceReducer:w,[j_]:j}}function EG(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Cm.INIT})>"u")throw new Error(Fr(12));if(typeof r(void 0,{type:Cm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Fr(13))})}function vO(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const c=t[o];typeof e[c]=="function"&&(r[c]=e[c])}const n=Object.keys(r);let s;try{EG(r)}catch(o){s=o}return function(c={},f){if(s)throw s;let d=!1;const h={};for(let m=0;m<n.length;m++){const p=n[m],x=r[p],w=c[p],j=x(w,f);if(typeof j>"u")throw f&&f.type,new Error(Fr(14));h[p]=j,d=d||j!==w}return d=d||n.length!==Object.keys(c).length,d?h:c}}function Em(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function AG(...e){return t=>(r,n)=>{const s=t(r,n);let o=()=>{throw new Error(Fr(15))};const c={getState:s.getState,dispatch:(d,...h)=>o(d,...h)},f=e.map(d=>d(c));return o=Em(...f)(s.dispatch),{...s,dispatch:o}}}function yO(e){return R2(e)&&"type"in e&&typeof e.type=="string"}var bO=Symbol.for("immer-nothing"),N_=Symbol.for("immer-draftable"),dn=Symbol.for("immer-state");function Ca(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Dn=Object,zc=Dn.getPrototypeOf,Am="constructor",kg="prototype",qb="configurable",Tm="enumerable",nm="writable",Fd="value",os=e=>!!e&&!!e[dn];function La(e){return e?wO(e)||Sg(e)||!!e[N_]||!!e[Am]?.[N_]||_g(e)||Cg(e):!1}var TG=Dn[kg][Am].toString(),k_=new WeakMap;function wO(e){if(!e||!I2(e))return!1;const t=zc(e);if(t===null||t===Dn[kg])return!0;const r=Dn.hasOwnProperty.call(t,Am)&&t[Am];if(r===Object)return!0;if(!_c(r))return!1;let n=k_.get(r);return n===void 0&&(n=Function.toString.call(r),k_.set(r,n)),n===TG}function wf(e,t,r=!0){jf(e)===0?(r?Reflect.ownKeys(e):Dn.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function jf(e){const t=e[dn];return t?t.type_:Sg(e)?1:_g(e)?2:Cg(e)?3:0}var S_=(e,t,r=jf(e))=>r===2?e.has(t):Dn[kg].hasOwnProperty.call(e,t),Kb=(e,t,r=jf(e))=>r===2?e.get(t):e[t],Om=(e,t,r,n=jf(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function OG(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Sg=Array.isArray,_g=e=>e instanceof Map,Cg=e=>e instanceof Set,I2=e=>typeof e=="object",_c=e=>typeof e=="function",Oy=e=>typeof e=="boolean";function MG(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Wi=e=>e.copy_||e.base_,L2=e=>e.modified_?e.copy_:e.base_;function Yb(e,t){if(_g(e))return new Map(e);if(Cg(e))return new Set(e);if(Sg(e))return Array[kg].slice.call(e);const r=wO(e);if(t===!0||t==="class_only"&&!r){const n=Dn.getOwnPropertyDescriptors(e);delete n[dn];let s=Reflect.ownKeys(n);for(let o=0;o<s.length;o++){const c=s[o],f=n[c];f[nm]===!1&&(f[nm]=!0,f[qb]=!0),(f.get||f.set)&&(n[c]={[qb]:!0,[nm]:!0,[Tm]:f[Tm],[Fd]:e[c]})}return Dn.create(zc(e),n)}else{const n=zc(e);if(n!==null&&r)return{...e};const s=Dn.create(n);return Dn.assign(s,e)}}function D2(e,t=!1){return Eg(e)||os(e)||!La(e)||(jf(e)>1&&Dn.defineProperties(e,{set:C0,add:C0,clear:C0,delete:C0}),Dn.freeze(e),t&&wf(e,(r,n)=>{D2(n,!0)},!1)),e}function PG(){Ca(2)}var C0={[Fd]:PG};function Eg(e){return e===null||!I2(e)?!0:Dn.isFrozen(e)}var Mm="MapSet",Xb="Patches",__="ArrayMethods",jO={};function yl(e){const t=jO[e];return t||Ca(0,e),t}var C_=e=>!!jO[e],Hd,NO=()=>Hd,RG=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:C_(Mm)?yl(Mm):void 0,arrayMethodsPlugin_:C_(__)?yl(__):void 0});function E_(e,t){t&&(e.patchPlugin_=yl(Xb),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Jb(e){Qb(e),e.drafts_.forEach(IG),e.drafts_=null}function Qb(e){e===Hd&&(Hd=e.parent_)}var A_=e=>Hd=RG(Hd,e);function IG(e){const t=e[dn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function T_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[dn].modified_&&(Jb(t),Ca(4)),La(e)&&(e=O_(t,e));const{patchPlugin_:s}=t;s&&s.generateReplacementPatches_(r[dn].base_,e,t)}else e=O_(t,r);return LG(t,e,!0),Jb(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==bO?e:void 0}function O_(e,t){if(Eg(t))return t;const r=t[dn];if(!r)return B2(t,e.handledSet_,e);if(!Ag(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);_O(r,e)}return r.copy_}function LG(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&D2(t,r)}function kO(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Ag=(e,t)=>e.scope_===t,DG=[];function SO(e,t,r,n){const s=Wi(e),o=e.type_;if(n!==void 0&&Kb(s,n,o)===t){Om(s,n,r,o);return}if(!e.draftLocations_){const f=e.draftLocations_=new Map;wf(s,(d,h)=>{if(os(h)){const m=f.get(h)||[];m.push(d),f.set(h,m)}})}const c=e.draftLocations_.get(t)??DG;for(const f of c)Om(s,f,r,o)}function BG(e,t,r){e.callbacks_.push(function(s){const o=t;if(!o||!Ag(o,s))return;s.mapSetPlugin_?.fixSetContents(o);const c=L2(o);SO(e,o.draft_??o,c,r),_O(o,s)})}function _O(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=t;if(n){const s=n.getPath(e);s&&n.generatePatches_(e,s,t)}kO(e)}}function $G(e,t,r){const{scope_:n}=e;if(os(r)){const s=r[dn];Ag(s,n)&&s.callbacks_.push(function(){am(e);const c=L2(s);SO(e,r,c,t)})}else La(r)&&e.callbacks_.push(function(){const o=Wi(e);Kb(o,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&B2(Kb(e.copy_,t,e.type_),n.handledSet_,n)})}function B2(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||os(e)||t.has(e)||!La(e)||Eg(e)||(t.add(e),wf(e,(n,s)=>{if(os(s)){const o=s[dn];if(Ag(o,r)){const c=L2(o);Om(e,n,c,e.type_),kO(o)}}else La(s)&&B2(s,t,r)})),e}function zG(e,t){const r=Sg(e),n={type_:r?1:0,scope_:t?t.scope_:NO(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=n,o=$2;r&&(s=[n],o=Wd);const{revoke:c,proxy:f}=Proxy.revocable(s,o);return n.draft_=f,n.revoke_=c,[f,n]}var $2={get(e,t){if(t===dn)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const s=Wi(e);if(!S_(s,t,e.type_))return UG(e,s,t);const o=s[t];if(e.finalized_||!La(o)||n&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&MG(t))return o;if(o===My(e.base_,t)){am(e);const c=e.type_===1?+t:t,f=e1(e.scope_,o,e,c);return e.copy_[c]=f}return o},has(e,t){return t in Wi(e)},ownKeys(e){return Reflect.ownKeys(Wi(e))},set(e,t,r){const n=CO(Wi(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=My(Wi(e),t),o=s?.[dn];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(OG(r,s)&&(r!==void 0||S_(e.base_,t,e.type_)))return!0;am(e),Zb(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),$G(e,t,r)),!0},deleteProperty(e,t){return am(e),My(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Zb(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Wi(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[nm]:!0,[qb]:e.type_!==1||t!=="length",[Tm]:n[Tm],[Fd]:r[t]}},defineProperty(){Ca(11)},getPrototypeOf(e){return zc(e.base_)},setPrototypeOf(){Ca(12)}},Wd={};wf($2,(e,t)=>{Wd[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});Wd.deleteProperty=function(e,t){return Wd.set.call(this,e,t,void 0)};Wd.set=function(e,t,r){return $2.set.call(this,e[0],t,r,e[0])};function My(e,t){const r=e[dn];return(r?Wi(r):e)[t]}function UG(e,t,r){const n=CO(t,r);return n?Fd in n?n[Fd]:n.get?.call(e.draft_):void 0}function CO(e,t){if(!(t in e))return;let r=zc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=zc(r)}}function Zb(e){e.modified_||(e.modified_=!0,e.parent_&&Zb(e.parent_))}function am(e){e.copy_||(e.assigned_=new Map,e.copy_=Yb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var FG=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,s)=>{if(_c(r)&&!_c(n)){const c=n;n=r;const f=this;return function(h=c,...m){return f.produce(h,p=>n.call(this,p,...m))}}_c(n)||Ca(6),s!==void 0&&!_c(s)&&Ca(7);let o;if(La(r)){const c=A_(this),f=e1(c,r,void 0);let d=!0;try{o=n(f),d=!1}finally{d?Jb(c):Qb(c)}return E_(c,s),T_(o,c)}else if(!r||!I2(r)){if(o=n(r),o===void 0&&(o=r),o===bO&&(o=void 0),this.autoFreeze_&&D2(o,!0),s){const c=[],f=[];yl(Xb).generateReplacementPatches_(r,o,{patches_:c,inversePatches_:f}),s(c,f)}return o}else Ca(1,r)},this.produceWithPatches=(r,n)=>{if(_c(r))return(f,...d)=>this.produceWithPatches(f,h=>r(h,...d));let s,o;return[this.produce(r,n,(f,d)=>{s=f,o=d}),s,o]},Oy(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Oy(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Oy(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){La(t)||Ca(8),os(t)&&(t=Ra(t));const r=A_(this),n=e1(r,t,void 0);return n[dn].isManual_=!0,Qb(r),n}finishDraft(t,r){const n=t&&t[dn];(!n||!n.isManual_)&&Ca(9);const{scope_:s}=n;return E_(s,r),T_(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const o=r[n];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}n>-1&&(r=r.slice(n+1));const s=yl(Xb).applyPatches_;return os(t)?s(t,r):this.produce(t,o=>s(o,r))}};function e1(e,t,r,n){const[s,o]=_g(t)?yl(Mm).proxyMap_(t,r):Cg(t)?yl(Mm).proxySet_(t,r):zG(t,r);return(r?.scope_??NO()).drafts_.push(s),o.callbacks_=r?.callbacks_??[],o.key_=n,r&&n!==void 0?BG(r,o,n):o.callbacks_.push(function(d){d.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:h}=d;o.modified_&&h&&h.generatePatches_(o,[],d)}),s}function Ra(e){return os(e)||Ca(10,e),EO(e)}function EO(e){if(!La(e)||Eg(e))return e;const t=e[dn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Yb(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Yb(e,!0);return wf(r,(s,o)=>{Om(r,s,EO(o))},n),t&&(t.finalized_=!1),r}var HG=new FG,AO=HG.produce;function TO(e){return({dispatch:r,getState:n})=>s=>o=>typeof o=="function"?o(r,n,e):s(o)}var WG=TO(),GG=TO,VG=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Em:Em.apply(null,arguments)};function la(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Bn(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>yO(n)&&n.type===e,r}var OO=class Nd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Nd.prototype)}static get[Symbol.species](){return Nd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Nd(...t[0].concat(this)):new Nd(...t.concat(this))}};function M_(e){return La(e)?AO(e,()=>{}):e}function E0(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function qG(e){return typeof e=="boolean"}var KG=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:o=!0}=t??{};let c=new OO;return r&&(qG(r)?c.push(WG):c.push(GG(r.extraArgument))),c},MO="RTK_autoBatch",Wt=()=>e=>({payload:e,meta:{[MO]:!0}}),P_=e=>t=>{setTimeout(t,e)},PO=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,o=!1,c=!1;const f=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:P_(10):e.type==="callback"?e.queueNotification:P_(e.timeout),h=()=>{c=!1,o&&(o=!1,f.forEach(m=>m()))};return Object.assign({},n,{subscribe(m){const p=()=>s&&m(),x=n.subscribe(p);return f.add(m),()=>{x(),f.delete(m)}},dispatch(m){try{return s=!m?.meta?.[MO],o=!s,o&&(c||(c=!0,d(h))),n.dispatch(m)}finally{s=!0}}})},YG=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new OO(e);return n&&s.push(PO(typeof n=="object"?n:void 0)),s};function XG(e){const t=KG(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:o=void 0,enhancers:c=void 0}=e||{};let f;if(typeof r=="function")f=r;else if(R2(r))f=vO(r);else throw new Error(Bn(1));let d;typeof n=="function"?d=n(t):d=t();let h=Em;s&&(h=VG({trace:!1,...typeof s=="object"&&s}));const m=AG(...d),p=YG(m);let x=typeof c=="function"?c(p):p();const w=h(...x);return xO(f,o,w)}function RO(e){const t={},r=[];let n;const s={addCase(o,c){const f=typeof o=="string"?o:o.type;if(!f)throw new Error(Bn(28));if(f in t)throw new Error(Bn(29));return t[f]=c,s},addAsyncThunk(o,c){return c.pending&&(t[o.pending.type]=c.pending),c.rejected&&(t[o.rejected.type]=c.rejected),c.fulfilled&&(t[o.fulfilled.type]=c.fulfilled),c.settled&&r.push({matcher:o.settled,reducer:c.settled}),s},addMatcher(o,c){return r.push({matcher:o,reducer:c}),s},addDefaultCase(o){return n=o,s}};return e(s),[t,r,n]}function JG(e){return typeof e=="function"}function QG(e,t){let[r,n,s]=RO(t),o;if(JG(e))o=()=>M_(e());else{const f=M_(e);o=()=>f}function c(f=o(),d){let h=[r[d.type],...n.filter(({matcher:m})=>m(d)).map(({reducer:m})=>m)];return h.filter(m=>!!m).length===0&&(h=[s]),h.reduce((m,p)=>{if(p)if(os(m)){const w=p(m,d);return w===void 0?m:w}else{if(La(m))return AO(m,x=>p(x,d));{const x=p(m,d);if(x===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return m},f)}return c.getInitialState=o,c}var ZG="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",eV=(e=21)=>{let t="",r=e;for(;r--;)t+=ZG[Math.random()*64|0];return t},tV=Symbol.for("rtk-slice-createasyncthunk");function rV(e,t){return`${e}/${t}`}function nV({creators:e}={}){const t=e?.asyncThunk?.[tV];return function(n){const{name:s,reducerPath:o=s}=n;if(!s)throw new Error(Bn(11));const c=(typeof n.reducers=="function"?n.reducers(iV()):n.reducers)||{},f=Object.keys(c),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(E,z){const P=typeof E=="string"?E:E.type;if(!P)throw new Error(Bn(12));if(P in d.sliceCaseReducersByType)throw new Error(Bn(13));return d.sliceCaseReducersByType[P]=z,h},addMatcher(E,z){return d.sliceMatchers.push({matcher:E,reducer:z}),h},exposeAction(E,z){return d.actionCreators[E]=z,h},exposeCaseReducer(E,z){return d.sliceCaseReducersByName[E]=z,h}};f.forEach(E=>{const z=c[E],P={reducerName:E,type:rV(s,E),createNotation:typeof n.reducers=="function"};oV(z)?cV(P,z,h,t):sV(P,z,h)});function m(){const[E={},z=[],P=void 0]=typeof n.extraReducers=="function"?RO(n.extraReducers):[n.extraReducers],B={...E,...d.sliceCaseReducersByType};return QG(n.initialState,T=>{for(let R in B)T.addCase(R,B[R]);for(let R of d.sliceMatchers)T.addMatcher(R.matcher,R.reducer);for(let R of z)T.addMatcher(R.matcher,R.reducer);P&&T.addDefaultCase(P)})}const p=E=>E,x=new Map,w=new WeakMap;let j;function N(E,z){return j||(j=m()),j(E,z)}function S(){return j||(j=m()),j.getInitialState()}function C(E,z=!1){function P(T){let R=T[E];return typeof R>"u"&&z&&(R=E0(w,P,S)),R}function B(T=p){const R=E0(x,z,()=>new WeakMap);return E0(R,T,()=>{const $={};for(const[I,O]of Object.entries(n.selectors??{}))$[I]=aV(O,T,()=>E0(w,T,S),z);return $})}return{reducerPath:E,getSelectors:B,get selectors(){return B(P)},selectSlice:P}}const A={name:s,reducer:N,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:S,...C(o),injectInto(E,{reducerPath:z,...P}={}){const B=z??o;return E.inject({reducerPath:B,reducer:N},P),{...A,...C(B,!0)}}};return A}}function aV(e,t,r,n){function s(o,...c){let f=t(o);return typeof f>"u"&&n&&(f=r()),e(f,...c)}return s.unwrapped=e,s}var kn=nV();function iV(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function sV({type:e,reducerName:t,createNotation:r},n,s){let o,c;if("reducer"in n){if(r&&!lV(n))throw new Error(Bn(17));o=n.reducer,c=n.prepare}else o=n;s.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,c?la(e,c):la(e))}function oV(e){return e._reducerDefinitionType==="asyncThunk"}function lV(e){return e._reducerDefinitionType==="reducerWithPrepare"}function cV({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Bn(18));const{payloadCreator:o,fulfilled:c,pending:f,rejected:d,settled:h,options:m}=r,p=s(e,o,m);n.exposeAction(t,p),c&&n.addCase(p.fulfilled,c),f&&n.addCase(p.pending,f),d&&n.addCase(p.rejected,d),h&&n.addMatcher(p.settled,h),n.exposeCaseReducer(t,{fulfilled:c||A0,pending:f||A0,rejected:d||A0,settled:h||A0})}function A0(){}var uV="task",IO="listener",LO="completed",z2="cancelled",dV=`task-${z2}`,fV=`task-${LO}`,t1=`${IO}-${z2}`,hV=`${IO}-${LO}`,Tg=class{constructor(e){this.code=e,this.message=`${uV} ${z2} (reason: ${e})`}name="TaskAbortError";message},U2=(e,t)=>{if(typeof e!="function")throw new TypeError(Bn(32))},Pm=()=>{},DO=(e,t=Pm)=>(e.catch(t),e),BO=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ol=e=>{if(e.aborted)throw new Tg(e.reason)};function $O(e,t){let r=Pm;return new Promise((n,s)=>{const o=()=>s(new Tg(e.reason));if(e.aborted){o();return}r=BO(e,o),t.finally(()=>r()).then(n,s)}).finally(()=>{r=Pm})}var mV=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Tg?"cancelled":"rejected",error:r}}finally{t?.()}},Rm=e=>t=>DO($O(e,t).then(r=>(ol(e),r))),zO=e=>{const t=Rm(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Ic}=Object,R_={},Og="listenerMiddleware",gV=(e,t)=>{const r=n=>BO(e,()=>n.abort(e.reason));return(n,s)=>{U2(n);const o=new AbortController;r(o);const c=mV(async()=>{ol(e),ol(o.signal);const f=await n({pause:Rm(o.signal),delay:zO(o.signal),signal:o.signal});return ol(o.signal),f},()=>o.abort(fV));return s?.autoJoin&&t.push(c.catch(Pm)),{result:Rm(e)(c),cancel(){o.abort(dV)}}}},pV=(e,t)=>{const r=async(n,s)=>{ol(t);let o=()=>{};const f=[new Promise((d,h)=>{let m=e({predicate:n,effect:(p,x)=>{x.unsubscribe(),d([p,x.getState(),x.getOriginalState()])}});o=()=>{m(),h()}})];s!=null&&f.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await $O(t,Promise.race(f));return ol(t),d}finally{o()}};return(n,s)=>DO(r(n,s))},UO=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:o}=e;if(t)s=la(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Bn(21));return U2(o),{predicate:s,type:t,effect:o}},FO=Ic(e=>{const{type:t,predicate:r,effect:n}=UO(e);return{id:eV(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Bn(22))}}},{withTypes:()=>FO}),I_=(e,t)=>{const{type:r,effect:n,predicate:s}=UO(t);return Array.from(e.values()).find(o=>(typeof r=="string"?o.type===r:o.predicate===s)&&o.effect===n)},r1=e=>{e.pending.forEach(t=>{t.abort(t1)})},xV=(e,t)=>()=>{for(const r of t.keys())r1(r);e.clear()},L_=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},HO=Ic(la(`${Og}/add`),{withTypes:()=>HO}),vV=la(`${Og}/removeAll`),WO=Ic(la(`${Og}/remove`),{withTypes:()=>WO}),yV=(...e)=>{console.error(`${Og}/error`,...e)},Nf=(e={})=>{const t=new Map,r=new Map,n=w=>{const j=r.get(w)??0;r.set(w,j+1)},s=w=>{const j=r.get(w)??1;j===1?r.delete(w):r.set(w,j-1)},{extra:o,onError:c=yV}=e;U2(c);const f=w=>(w.unsubscribe=()=>t.delete(w.id),t.set(w.id,w),j=>{w.unsubscribe(),j?.cancelActive&&r1(w)}),d=w=>{const j=I_(t,w)??FO(w);return f(j)};Ic(d,{withTypes:()=>d});const h=w=>{const j=I_(t,w);return j&&(j.unsubscribe(),w.cancelActive&&r1(j)),!!j};Ic(h,{withTypes:()=>h});const m=async(w,j,N,S)=>{const C=new AbortController,A=pV(d,C.signal),E=[];try{w.pending.add(C),n(w),await Promise.resolve(w.effect(j,Ic({},N,{getOriginalState:S,condition:(z,P)=>A(z,P).then(Boolean),take:A,delay:zO(C.signal),pause:Rm(C.signal),extra:o,signal:C.signal,fork:gV(C.signal,E),unsubscribe:w.unsubscribe,subscribe:()=>{t.set(w.id,w)},cancelActiveListeners:()=>{w.pending.forEach((z,P,B)=>{z!==C&&(z.abort(t1),B.delete(z))})},cancel:()=>{C.abort(t1),w.pending.delete(C)},throwIfCancelled:()=>{ol(C.signal)}})))}catch(z){z instanceof Tg||L_(c,z,{raisedBy:"effect"})}finally{await Promise.all(E),C.abort(hV),s(w),w.pending.delete(C)}},p=xV(t,r);return{middleware:w=>j=>N=>{if(!yO(N))return j(N);if(HO.match(N))return d(N.payload);if(vV.match(N)){p();return}if(WO.match(N))return h(N.payload);let S=w.getState();const C=()=>{if(S===R_)throw new Error(Bn(23));return S};let A;try{if(A=j(N),t.size>0){const E=w.getState(),z=Array.from(t.values());for(const P of z){let B=!1;try{B=P.predicate(N,E,S)}catch(T){B=!1,L_(c,T,{raisedBy:"predicate"})}B&&m(P,N,w,C)}}}finally{S=R_}return A},startListening:d,stopListening:h,clearListeners:p}};function Bn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var bV={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},GO=kn({name:"chartLayout",initialState:bV,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,o;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:wV,setLayout:jV,setChartSize:NV,setScale:kV}=GO.actions,SV=GO.reducer;function VO(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Yt(e){return Number.isFinite(e)}function mo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function D_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ac(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D_(Object(r),!0).forEach(function(n){_V(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _V(e,t,r){return(t=CV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CV(e){var t=EV(e,"string");return typeof t=="symbol"?t:t+""}function EV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ft(e,t,r){return Ir(e)||Ir(t)?r:pi(t)?vl(e,t,r):typeof t=="function"?t(e):r}var AV=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:o,verticalAlign:c,layout:f}=t;if((f==="vertical"||f==="horizontal"&&c==="middle")&&o!=="center"&&Ge(e[o]))return Ac(Ac({},e),{},{[o]:e[o]+(n||0)});if((f==="horizontal"||f==="vertical"&&o==="center")&&c!=="middle"&&Ge(e[c]))return Ac(Ac({},e),{},{[c]:e[c]+(s||0)})}return e},El=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",B_=1e-4,TV=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-B_,o=Math.max(n[0],n[1])+B_,c=e(t[0]),f=e(t[r-1]);(c<s||c>o||f<s||f>o)&&e.domain([t[0],t[r-1]])}},OV=(e,t)=>{if(!t||t.length!==2||!Ge(t[0])||!Ge(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!Ge(e[0])||e[0]<r)&&(s[0]=r),(!Ge(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},MV=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var s=0;s<n;++s)for(var o=0,c=0,f=0;f<r;++f){var d=e[f],h=d?.[s];if(h!=null){var m=h[1],p=h[0],x=gi(m)?p:m;x>=0?(h[0]=o,h[1]=o+x,o=m):(h[0]=c,h[1]=c+x,c=m)}}}},PV=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var s=0;s<n;++s)for(var o=0,c=0;c<r;++c){var f=e[c],d=f?.[s];if(d!=null){var h=gi(d[1])?d[0]:d[1];h>=0?(d[0]=o,d[1]=o+h,o=d[1]):(d[0]=0,d[1]=0)}}}},RV={sign:MV,expand:JH,none:xl,silhouette:QH,wiggle:ZH,positive:PV},IV=(e,t,r)=>{var n,s=(n=RV[r])!==null&&n!==void 0?n:xl,o=XH().keys(t).value((f,d)=>Number(Ft(f,d,0))).order(Gb).offset(s),c=o(e);return c.forEach((f,d)=>{f.forEach((h,m)=>{var p=Ft(e[m],t[d],0);Array.isArray(p)&&p.length===2&&Ge(p[0])&&Ge(p[1])&&(h[0]=p[0],h[1]=p[1])})}),c};function LV(e){return e==null?void 0:String(e)}var $_=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:o,index:c}=e;if(t.type==="category")return r[c]?r[c].coordinate+n:null;var f=Ft(o,t.dataKey,t.scale.domain()[c]);return Ir(f)?null:t.scale(f)-s/2+n},DV=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},BV=e=>{var t=e.flat(2).filter(Ge);return[Math.min(...t),Math.max(...t)]},$V=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],zV=(e,t,r)=>{if(e!=null)return $V(Object.keys(e).reduce((n,s)=>{var o=e[s];if(!o)return n;var{stackedData:c}=o,f=c.reduce((d,h)=>{var m=VO(h,t,r),p=BV(m);return!Yt(p[0])||!Yt(p[1])?d:[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(f[0],n[0]),Math.max(f[1],n[1])]},[1/0,-1/0]))},z_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,U_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Im=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=Ng(t,m=>m.coordinate),o=1/0,c=1,f=s.length;c<f;c++){var d=s[c],h=s[c-1];o=Math.min((d?.coordinate||0)-(h?.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0};function F_(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:o}=e;return Ac(Ac({},t),{},{dataKey:r,payload:n,value:s,name:o})}function Mg(e,t){if(e)return String(e);if(typeof t=="string")return t}var UV=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},FV=(e,t)=>t==="centric"?e.angle:e.radius,ps=e=>e.layout.width,xs=e=>e.layout.height,HV=e=>e.layout.scale,qO=e=>e.layout.margin,Pg=ue(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Rg=ue(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),KO="data-recharts-item-index",YO="data-recharts-item-id",kf=60;function H_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function T0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H_(Object(r),!0).forEach(function(n){WV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WV(e,t,r){return(t=GV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GV(e){var t=VV(e,"string");return typeof t=="symbol"?t:t+""}function VV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qV=e=>e.brush.height;function KV(e){var t=Rg(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:kf;return r+s}return r},0)}function YV(e){var t=Rg(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:kf;return r+s}return r},0)}function XV(e){var t=Pg(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function JV(e){var t=Pg(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Sr=ue([ps,xs,qO,qV,KV,YV,XV,JV,gO,jG],(e,t,r,n,s,o,c,f,d,h)=>{var m={left:(r.left||0)+s,right:(r.right||0)+o},p={top:(r.top||0)+c,bottom:(r.bottom||0)+f},x=T0(T0({},p),m),w=x.bottom;x.bottom+=n,x=AV(x,d,h);var j=e-x.left-x.right,N=t-x.top-x.bottom;return T0(T0({brushBottom:w},x),{},{width:Math.max(j,0),height:Math.max(N,0)})}),QV=ue(Sr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),F2=ue(ps,xs,(e,t)=>({x:0,y:0,width:e,height:t})),ZV=y.createContext(null),Fn=()=>y.useContext(ZV)!=null,Ig=e=>e.brush,Lg=ue([Ig,Sr,qO],(e,t,r)=>({height:e.height,x:Ge(e.x)?e.x:t.left,y:Ge(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:Ge(e.width)?e.width:t.width})),Py={},Ry={},Iy={},W_;function eq(){return W_||(W_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:o}={}){let c,f=null;const d=o!=null&&o.includes("leading"),h=o==null||o.includes("trailing"),m=()=>{f!==null&&(r.apply(c,f),c=void 0,f=null)},p=()=>{h&&m(),N()};let x=null;const w=()=>{x!=null&&clearTimeout(x),x=setTimeout(()=>{x=null,p()},n)},j=()=>{x!==null&&(clearTimeout(x),x=null)},N=()=>{j(),c=void 0,f=null},S=()=>{m()},C=function(...A){if(s?.aborted)return;c=this,f=A;const E=x==null;w(),d&&E&&m()};return C.schedule=w,C.cancel=N,C.flush=S,s?.addEventListener("abort",N,{once:!0}),C}e.debounce=t})(Iy)),Iy}var G_;function tq(){return G_||(G_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eq();function r(n,s=0,o={}){typeof o!="object"&&(o={});const{leading:c=!1,trailing:f=!0,maxWait:d}=o,h=Array(2);c&&(h[0]="leading"),f&&(h[1]="trailing");let m,p=null;const x=t.debounce(function(...N){m=n.apply(this,N),p=null},s,{edges:h}),w=function(...N){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(m=n.apply(this,N),p=Date.now(),x.cancel(),x.schedule(),m):(x.apply(this,N),m)},j=()=>(x.flush(),m);return w.cancel=x.cancel,w.flush=j,w}e.debounce=r})(Ry)),Ry}var V_;function rq(){return V_||(V_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tq();function r(n,s=0,o={}){const{leading:c=!0,trailing:f=!0}=o;return t.debounce(n,s,{leading:c,maxWait:s,trailing:f})}e.throttle=r})(Py)),Py}var Ly,q_;function nq(){return q_||(q_=1,Ly=rq().throttle),Ly}var aq=nq();const iq=zn(aq);var K_=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),o=2;o<n;o++)s[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=0;console.warn(r.replace(/%s/g,()=>s[c++]))}},XO=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:o,maxHeight:c}=r,f=ss(n)?e:Number(n),d=ss(s)?t:Number(s);return o&&o>0&&(f?d=f/o:d&&(f=d*o),c&&d!=null&&d>c&&(d=c)),{calculatedWidth:f,calculatedHeight:d}},sq={width:0,height:0,overflow:"visible"},oq={width:0,overflowX:"visible"},lq={height:0,overflowY:"visible"},cq={},uq=e=>{var{width:t,height:r}=e,n=ss(t),s=ss(r);return n&&s?sq:n?oq:s?lq:cq};function dq(e){var{width:t,height:r,aspect:n}=e,s=t,o=r;return s===void 0&&o===void 0?(s="100%",o="100%"):s===void 0?s=n&&n>0?void 0:"100%":o===void 0&&(o=n&&n>0?void 0:"100%"),{width:s,height:o}}function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n1.apply(null,arguments)}function Y_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function X_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y_(Object(r),!0).forEach(function(n){fq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fq(e,t,r){return(t=hq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hq(e){var t=mq(e,"string");return typeof t=="symbol"?t:t+""}function mq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JO=y.createContext({width:-1,height:-1});function gq(e){return mo(e.width)&&mo(e.height)}function QO(e){var{children:t,width:r,height:n}=e,s=y.useMemo(()=>({width:r,height:n}),[r,n]);return gq(s)?y.createElement(JO.Provider,{value:s},t):null}var H2=()=>y.useContext(JO),pq=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:o,minWidth:c=0,minHeight:f,maxHeight:d,children:h,debounce:m=0,id:p,className:x,onResize:w,style:j={}}=e,N=y.useRef(null),S=y.useRef();S.current=w,y.useImperativeHandle(t,()=>N.current);var[C,A]=y.useState({containerWidth:n.width,containerHeight:n.height}),E=y.useCallback((R,$)=>{A(I=>{var O=Math.round(R),U=Math.round($);return I.containerWidth===O&&I.containerHeight===U?I:{containerWidth:O,containerHeight:U}})},[]);y.useEffect(()=>{if(N.current==null||typeof ResizeObserver>"u")return yf;var R=U=>{var D,{width:q,height:Z}=U[0].contentRect;E(q,Z),(D=S.current)===null||D===void 0||D.call(S,q,Z)};m>0&&(R=iq(R,m,{trailing:!0,leading:!1}));var $=new ResizeObserver(R),{width:I,height:O}=N.current.getBoundingClientRect();return E(I,O),$.observe(N.current),()=>{$.disconnect()}},[E,m]);var{containerWidth:z,containerHeight:P}=C;K_(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:B,calculatedHeight:T}=XO(z,P,{width:s,height:o,aspect:r,maxHeight:d});return K_(B!=null&&B>0||T!=null&&T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,T,s,o,c,f,r),y.createElement("div",{id:p?"".concat(p):void 0,className:_t("recharts-responsive-container",x),style:X_(X_({},j),{},{width:s,height:o,minWidth:c,minHeight:f,maxHeight:d}),ref:N},y.createElement("div",{style:uq({width:s,height:o})},y.createElement(QO,{width:B,height:T},h)))}),J_=y.forwardRef((e,t)=>{var r=H2();if(mo(r.width)&&mo(r.height))return e.children;var{width:n,height:s}=dq({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:c}=XO(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return Ge(o)&&Ge(c)?y.createElement(QO,{width:o,height:c},e.children):y.createElement(pq,n1({},e,{width:n,height:s,ref:t}))});function ZO(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Dg=()=>{var e,t=Fn(),r=He(QV),n=He(Lg),s=(e=He(Ig))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},xq={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},vq=()=>{var e;return(e=He(Sr))!==null&&e!==void 0?e:xq},eM=()=>He(ps),tM=()=>He(xs),yq=()=>He(e=>e.layout.margin),pt=e=>e.layout.layoutType,Sf=()=>He(pt),bq=()=>{var e=Sf();return e!==void 0},Bg=e=>{var t=Bt(),r=Fn(),{width:n,height:s}=e,o=H2(),c=n,f=s;return o&&(c=o.width>0?o.width:n,f=o.height>0?o.height:s),y.useEffect(()=>{!r&&mo(c)&&mo(f)&&t(NV({width:c,height:f}))},[t,r,c,f]),null},rM=Symbol.for("immer-nothing"),Q_=Symbol.for("immer-draftable"),$n=Symbol.for("immer-state");function Ea(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Gd=Object.getPrototypeOf;function Uc(e){return!!e&&!!e[$n]}function bl(e){return e?nM(e)||Array.isArray(e)||!!e[Q_]||!!e.constructor?.[Q_]||_f(e)||zg(e):!1}var wq=Object.prototype.constructor.toString(),Z_=new WeakMap;function nM(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=Z_.get(r);return n===void 0&&(n=Function.toString.call(r),Z_.set(r,n)),n===wq}function Lm(e,t,r=!0){$g(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function $g(e){const t=e[$n];return t?t.type_:Array.isArray(e)?1:_f(e)?2:zg(e)?3:0}function a1(e,t){return $g(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function aM(e,t,r){const n=$g(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function jq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function _f(e){return e instanceof Map}function zg(e){return e instanceof Set}function Xo(e){return e.copy_||e.base_}function i1(e,t){if(_f(e))return new Map(e);if(zg(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=nM(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[$n];let s=Reflect.ownKeys(n);for(let o=0;o<s.length;o++){const c=s[o],f=n[c];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(n[c]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[c]})}return Object.create(Gd(e),n)}else{const n=Gd(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function W2(e,t=!1){return Ug(e)||Uc(e)||!bl(e)||($g(e)>1&&Object.defineProperties(e,{set:O0,add:O0,clear:O0,delete:O0}),Object.freeze(e),t&&Object.values(e).forEach(r=>W2(r,!0))),e}function Nq(){Ea(2)}var O0={value:Nq};function Ug(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var kq={};function wl(e){const t=kq[e];return t||Ea(0,e),t}var Vd;function iM(){return Vd}function Sq(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function eC(e,t){t&&(wl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function s1(e){o1(e),e.drafts_.forEach(_q),e.drafts_=null}function o1(e){e===Vd&&(Vd=e.parent_)}function tC(e){return Vd=Sq(Vd,e)}function _q(e){const t=e[$n];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function rC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[$n].modified_&&(s1(t),Ea(4)),bl(e)&&(e=Dm(t,e),t.parent_||Bm(t,e)),t.patches_&&wl("Patches").generateReplacementPatches_(r[$n].base_,e,t.patches_,t.inversePatches_)):e=Dm(t,r,[]),s1(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==rM?e:void 0}function Dm(e,t,r){if(Ug(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[$n];if(!s)return Lm(t,(o,c)=>nC(e,s,t,o,c,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return Bm(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const o=s.copy_;let c=o,f=!1;s.type_===3&&(c=new Set(o),o.clear(),f=!0),Lm(c,(d,h)=>nC(e,s,o,d,h,r,f),n),Bm(e,o,!1),r&&e.patches_&&wl("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function nC(e,t,r,n,s,o,c){if(s==null||typeof s!="object"&&!c)return;const f=Ug(s);if(!(f&&!c)){if(Uc(s)){const d=o&&t&&t.type_!==3&&!a1(t.assigned_,n)?o.concat(n):void 0,h=Dm(e,s,d);if(aM(r,n,h),Uc(h))e.canAutoFreeze_=!1;else return}else c&&r.add(s);if(bl(s)&&!f){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&f)return;Dm(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(_f(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Bm(e,s)}}}function Bm(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&W2(t,r)}function Cq(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:iM(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,o=G2;r&&(s=[n],o=qd);const{revoke:c,proxy:f}=Proxy.revocable(s,o);return n.draft_=f,n.revoke_=c,f}var G2={get(e,t){if(t===$n)return e;const r=Xo(e);if(!a1(r,t))return Eq(e,r,t);const n=r[t];return e.finalized_||!bl(n)?n:n===Dy(e.base_,t)?(By(e),e.copy_[t]=c1(n,e)):n},has(e,t){return t in Xo(e)},ownKeys(e){return Reflect.ownKeys(Xo(e))},set(e,t,r){const n=sM(Xo(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=Dy(Xo(e),t),o=s?.[$n];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(jq(r,s)&&(r!==void 0||a1(e.base_,t)))return!0;By(e),l1(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Dy(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,By(e),l1(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Xo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Ea(11)},getPrototypeOf(e){return Gd(e.base_)},setPrototypeOf(){Ea(12)}},qd={};Lm(G2,(e,t)=>{qd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});qd.deleteProperty=function(e,t){return qd.set.call(this,e,t,void 0)};qd.set=function(e,t,r){return G2.set.call(this,e[0],t,r,e[0])};function Dy(e,t){const r=e[$n];return(r?Xo(r):e)[t]}function Eq(e,t,r){const n=sM(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function sM(e,t){if(!(t in e))return;let r=Gd(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Gd(r)}}function l1(e){e.modified_||(e.modified_=!0,e.parent_&&l1(e.parent_))}function By(e){e.copy_||(e.copy_=i1(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Aq=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const c=this;return function(d=o,...h){return c.produce(d,m=>r.call(this,m,...h))}}typeof r!="function"&&Ea(6),n!==void 0&&typeof n!="function"&&Ea(7);let s;if(bl(t)){const o=tC(this),c=c1(t,void 0);let f=!0;try{s=r(c),f=!1}finally{f?s1(o):o1(o)}return eC(o,n),rC(s,o)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===rM&&(s=void 0),this.autoFreeze_&&W2(s,!0),n){const o=[],c=[];wl("Patches").generateReplacementPatches_(t,s,o,c),n(o,c)}return s}else Ea(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(c,...f)=>this.produceWithPatches(c,d=>t(d,...f));let n,s;return[this.produce(t,r,(c,f)=>{n=c,s=f}),n,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){bl(e)||Ea(8),Uc(e)&&(e=Tq(e));const t=tC(this),r=c1(e,void 0);return r[$n].isManual_=!0,o1(t),r}finishDraft(e,t){const r=e&&e[$n];(!r||!r.isManual_)&&Ea(9);const{scope_:n}=r;return eC(n,t),rC(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=wl("Patches").applyPatches_;return Uc(e)?n(e,t):this.produce(e,s=>n(s,t))}};function c1(e,t){const r=_f(e)?wl("MapSet").proxyMap_(e,t):zg(e)?wl("MapSet").proxySet_(e,t):Cq(e,t);return(t?t.scope_:iM()).drafts_.push(r),r}function Tq(e){return Uc(e)||Ea(10,e),oM(e)}function oM(e){if(!bl(e)||Ug(e))return e;const t=e[$n];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=i1(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=i1(e,!0);return Lm(r,(s,o)=>{aM(r,s,oM(o))},n),t&&(t.finalized_=!1),r}var Oq=new Aq;Oq.produce;var Mq={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},lM=kn({name:"legend",initialState:Mq,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Wt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Ra(e).payload.indexOf(r);s>-1&&(e.payload[s]=n)},prepare:Wt()},removeLegendPayload:{reducer(e,t){var r=Ra(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Wt()}}}),{setLegendSize:aC,setLegendSettings:Pq,addLegendPayload:cM,replaceLegendPayload:uM,removeLegendPayload:dM}=lM.actions,Rq=lM.reducer,Iq=["contextPayload"];function u1(){return u1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u1.apply(null,arguments)}function iC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iC(Object(r),!0).forEach(function(n){Lq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lq(e,t,r){return(t=Dq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dq(e){var t=Bq(e,"string");return typeof t=="symbol"?t:t+""}function Bq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $q(e,t){if(e==null)return{};var r,n,s=zq(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function zq(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Uq(e){return e.value}function Fq(e){var{contextPayload:t}=e,r=$q(e,Iq),n=dO(t,e.payloadUniqBy,Uq),s=Fc(Fc({},r),{},{payload:n});return y.isValidElement(e.content)?y.cloneElement(e.content,s):typeof e.content=="function"?y.createElement(e.content,s):y.createElement(OW,s)}function Hq(e,t,r,n,s,o){var{layout:c,align:f,verticalAlign:d}=t,h,m;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(f==="center"&&c==="vertical"?h={left:((n||0)-o.width)/2}:h=f==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?m={top:((s||0)-o.height)/2}:m=d==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Fc(Fc({},h),m)}function Wq(e){var t=Bt();return y.useEffect(()=>{t(Pq(e))},[t,e]),null}function Gq(e){var t=Bt();return y.useEffect(()=>(t(aC(e)),()=>{t(aC({width:0,height:0}))}),[t,e]),null}function Vq(e,t,r,n){return e==="vertical"&&Ge(t)?{height:t}:e==="horizontal"?{width:r||n}:null}var qq={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function fM(e){var t=Kr(e,qq),r=SG(),n=bH(),s=yq(),{width:o,height:c,wrapperStyle:f,portal:d}=t,[h,m]=pO([r]),p=eM(),x=tM();if(p==null||x==null)return null;var w=p-(s?.left||0)-(s?.right||0),j=Vq(t.layout,c,o,w),N=d?f:Fc(Fc({position:"absolute",width:j?.width||o||"auto",height:j?.height||c||"auto"},Hq(f,t,s,p,x,h)),f),S=d??n;if(S==null||r==null)return null;var C=y.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:m},y.createElement(Wq,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!d&&y.createElement(Gq,{width:h.width,height:h.height}),y.createElement(Fq,u1({},t,j,{margin:s,chartWidth:p,chartHeight:x,contextPayload:r})));return qr.createPortal(C,S)}fM.displayName="Legend";function d1(){return d1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d1.apply(null,arguments)}function sC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $y(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(r),!0).forEach(function(n){Kq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kq(e,t,r){return(t=Yq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yq(e){var t=Xq(e,"string");return typeof t=="symbol"?t:t+""}function Xq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jq(e){return Array.isArray(e)&&pi(e[0])&&pi(e[1])?e.join(" ~ "):e}var Qq=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:o,formatter:c,itemSorter:f,wrapperClassName:d,labelClassName:h,label:m,labelFormatter:p,accessibilityLayer:x=!1}=e,w=()=>{if(o&&o.length){var P={padding:0,margin:0},B=(f?Ng(o,f):o).map((T,R)=>{if(T.type==="none")return null;var $=T.formatter||c||Jq,{value:I,name:O}=T,U=I,D=O;if($){var q=$(I,O,T,R,o);if(Array.isArray(q))[U,D]=q;else if(q!=null)U=q;else return null}var Z=$y({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:Z},pi(D)?y.createElement("span",{className:"recharts-tooltip-item-name"},D):null,pi(D)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},U),y.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:P},B)}return null},j=$y({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),N=$y({margin:0},s),S=!Ir(m),C=S?m:"",A=_t("recharts-default-tooltip",d),E=_t("recharts-tooltip-label",h);S&&p&&o!==void 0&&o!==null&&(C=p(m,o));var z=x?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",d1({className:A,style:j},z),y.createElement("p",{className:E,style:N},y.isValidElement(C)?C:"".concat(C)),w())},fd="recharts-tooltip-wrapper",Zq={visibility:"hidden"};function eK(e){var{coordinate:t,translateX:r,translateY:n}=e;return _t(fd,{["".concat(fd,"-right")]:Ge(r)&&t&&Ge(t.x)&&r>=t.x,["".concat(fd,"-left")]:Ge(r)&&t&&Ge(t.x)&&r<t.x,["".concat(fd,"-bottom")]:Ge(n)&&t&&Ge(t.y)&&n>=t.y,["".concat(fd,"-top")]:Ge(n)&&t&&Ge(t.y)&&n<t.y})}function oC(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:o,reverseDirection:c,tooltipDimension:f,viewBox:d,viewBoxDimension:h}=e;if(o&&Ge(o[n]))return o[n];var m=r[n]-f-(s>0?s:0),p=r[n]+s;if(t[n])return c[n]?m:p;var x=d[n];if(x==null)return 0;if(c[n]){var w=m,j=x;return w<j?Math.max(p,x):Math.max(m,x)}if(h==null)return 0;var N=p+f,S=x+h;return N>S?Math.max(m,x):Math.max(p,x)}function tK(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function rK(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:o,tooltipBox:c,useTranslate3d:f,viewBox:d}=e,h,m,p;return c.height>0&&c.width>0&&r?(m=oC({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:o,tooltipDimension:c.width,viewBox:d,viewBoxDimension:d.width}),p=oC({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:o,tooltipDimension:c.height,viewBox:d,viewBoxDimension:d.height}),h=tK({translateX:m,translateY:p,useTranslate3d:f})):h=Zq,{cssProperties:h,cssClasses:eK({translateX:m,translateY:p,coordinate:r})}}function lC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function M0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lC(Object(r),!0).forEach(function(n){f1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f1(e,t,r){return(t=nK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nK(e){var t=aK(e,"string");return typeof t=="symbol"?t:t+""}function aK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class iK extends y.PureComponent{constructor(){super(...arguments),f1(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),f1(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:o,coordinate:c,hasPayload:f,isAnimationActive:d,offset:h,position:m,reverseDirection:p,useTranslate3d:x,viewBox:w,wrapperStyle:j,lastBoundingBox:N,innerRef:S,hasPortalFromProps:C}=this.props,{cssClasses:A,cssProperties:E}=rK({allowEscapeViewBox:r,coordinate:c,offsetTopLeft:h,position:m,reverseDirection:p,tooltipBox:{height:N.height,width:N.width},useTranslate3d:x,viewBox:w}),z=C?{}:M0(M0({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&f?"visible":"hidden",position:"absolute",top:0,left:0}),P=M0(M0({},z),{},{visibility:!this.state.dismissed&&t&&f?"visible":"hidden"},j);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:A,style:P,ref:S},o)}}var hM=()=>{var e;return(e=He(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function h1(){return h1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h1.apply(null,arguments)}function cC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function uC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(r),!0).forEach(function(n){sK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sK(e,t,r){return(t=oK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oK(e){var t=lK(e,"string");return typeof t=="symbol"?t:t+""}function lK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dC={curveBasisClosed:$H,curveBasisOpen:zH,curveBasis:BH,curveBumpX:kH,curveBumpY:SH,curveLinearClosed:UH,curveLinear:wg,curveMonotoneX:FH,curveMonotoneY:HH,curveNatural:WH,curveStep:GH,curveStepAfter:qH,curveStepBefore:VH},$m=e=>Yt(e.x)&&Yt(e.y),fC=e=>e.base!=null&&$m(e.base)&&$m(e),hd=e=>e.x,md=e=>e.y,cK=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(vf(e));return(r==="curveMonotone"||r==="curveBump")&&t?dC["".concat(r).concat(t==="vertical"?"Y":"X")]:dC[r]||wg},uK=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:o=!1}=e,c=cK(t,s),f=o?r.filter($m):r,d;if(Array.isArray(n)){var h=r.map((w,j)=>uC(uC({},w),{},{base:n[j]}));s==="vertical"?d=k0().y(md).x1(hd).x0(w=>w.base.x):d=k0().x(hd).y1(md).y0(w=>w.base.y);var m=d.defined(fC).curve(c),p=o?h.filter(fC):h;return m(p)}s==="vertical"&&Ge(n)?d=k0().y(md).x1(hd).x0(n):Ge(n)?d=k0().x(hd).y1(md).y0(n):d=UT().x(hd).y(md);var x=d.defined($m).curve(c);return x(f)},V2=e=>{var{className:t,points:r,path:n,pathRef:s}=e,o=Sf();if((!r||!r.length)&&!n)return null;var c={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},f=r&&r.length?uK(c):n;return y.createElement("path",h1({},mi(e),vW(e),{className:_t("recharts-curve",t),d:f===null?void 0:f,ref:s}))},dK=["x","y","top","left","width","height","className"];function m1(){return m1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m1.apply(null,arguments)}function hC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(r),!0).forEach(function(n){hK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hK(e,t,r){return(t=mK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mK(e){var t=gK(e,"string");return typeof t=="symbol"?t:t+""}function gK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pK(e,t){if(e==null)return{};var r,n,s=xK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function xK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vK=(e,t,r,n,s,o)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(o,",").concat(t,"h").concat(r),yK=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:o=0,height:c=0,className:f}=e,d=pK(e,dK),h=fK({x:t,y:r,top:n,left:s,width:o,height:c},d);return!Ge(t)||!Ge(r)||!Ge(o)||!Ge(c)||!Ge(n)||!Ge(s)?null:y.createElement("path",m1({},oa(h),{className:_t("recharts-cross",f),d:vK(t,r,o,c,n,s)}))};function bK(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function mC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mC(Object(r),!0).forEach(function(n){wK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wK(e,t,r){return(t=jK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jK(e){var t=NK(e,"string");return typeof t=="symbol"?t:t+""}function NK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kK=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),mM=(e,t,r)=>e.map(n=>"".concat(kK(n)," ").concat(t,"ms ").concat(r)).join(","),SK=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Kd=(e,t)=>Object.keys(t).reduce((r,n)=>gC(gC({},r),{},{[n]:e(n,t[n])}),{});function pC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(r),!0).forEach(function(n){_K(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _K(e,t,r){return(t=CK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CK(e){var t=EK(e,"string");return typeof t=="symbol"?t:t+""}function EK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zm=(e,t,r)=>e+(t-e)*r,g1=e=>{var{from:t,to:r}=e;return t!==r},gM=(e,t,r)=>{var n=Kd((s,o)=>{if(g1(o)){var[c,f]=e(o.from,o.to,o.velocity);return kr(kr({},o),{},{from:c,velocity:f})}return o},t);return r<1?Kd((s,o)=>g1(o)&&n[s]!=null?kr(kr({},o),{},{velocity:zm(o.velocity,n[s].velocity,r),from:zm(o.from,n[s].from,r)}):o,t):gM(e,n,r-1)};function AK(e,t,r,n,s,o){var c,f=n.reduce((x,w)=>kr(kr({},x),{},{[w]:{from:e[w],velocity:0,to:t[w]}}),{}),d=()=>Kd((x,w)=>w.from,f),h=()=>!Object.values(f).filter(g1).length,m=null,p=x=>{c||(c=x);var w=x-c,j=w/r.dt;f=gM(r,f,j),s(kr(kr(kr({},e),t),d())),c=x,h()||(m=o.setTimeout(p))};return()=>(m=o.setTimeout(p),()=>{var x;(x=m)===null||x===void 0||x()})}function TK(e,t,r,n,s,o,c){var f=null,d=s.reduce((p,x)=>{var w=e[x],j=t[x];return w==null||j==null?p:kr(kr({},p),{},{[x]:[w,j]})},{}),h,m=p=>{h||(h=p);var x=(p-h)/n,w=Kd((N,S)=>zm(...S,r(x)),d);if(o(kr(kr(kr({},e),t),w)),x<1)f=c.setTimeout(m);else{var j=Kd((N,S)=>zm(...S,r(1)),d);o(kr(kr(kr({},e),t),j))}};return()=>(f=c.setTimeout(m),()=>{var p;(p=f)===null||p===void 0||p()})}const OK=(e,t,r,n,s,o)=>{var c=SK(e,t);return r==null?()=>(s(kr(kr({},e),t)),()=>{}):r.isStepper===!0?AK(e,t,r,c,s,o):TK(e,t,r,n,c,s,o)};var Um=1e-4,pM=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],xM=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),xC=(e,t)=>r=>{var n=pM(e,t);return xM(n,r)},MK=(e,t)=>r=>{var n=pM(e,t),s=[...n.map((o,c)=>o*c).slice(1),0];return xM(s,r)},PK=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var s=n.map(o=>parseFloat(o));return[s[0],s[1],s[2],s[3]]},RK=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s=PK(r[0]);if(s)return s}}return r.length===4?r:[0,0,1,1]},IK=(e,t,r,n)=>{var s=xC(e,r),o=xC(t,n),c=MK(e,r),f=h=>h>1?1:h<0?0:h,d=h=>{for(var m=h>1?1:h,p=m,x=0;x<8;++x){var w=s(p)-m,j=c(p);if(Math.abs(w-m)<Um||j<Um)return o(p);p=f(p-w/j)}return o(p)};return d.isStepper=!1,d},vC=function(){return IK(...RK(...arguments))},LK=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,o=(c,f,d)=>{var h=-(c-f)*r,m=d*n,p=d+(h-m)*s/1e3,x=d*s/1e3+c;return Math.abs(x-f)<Um&&Math.abs(p)<Um?[f,0]:[x,p]};return o.isStepper=!0,o.dt=s,o},DK=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return vC(e);case"spring":return LK();default:if(e.split("(")[0]==="cubic-bezier")return vC(e)}return typeof e=="function"?e:null};function BK(e){var t,r=()=>null,n=!1,s=null,o=c=>{if(!n){if(Array.isArray(c)){if(!c.length)return;var f=c,[d,...h]=f;if(typeof d=="number"){s=e.setTimeout(o.bind(null,h),d);return}o(d),s=e.setTimeout(o.bind(null,h));return}typeof c=="string"&&(t=c,r(t)),typeof c=="object"&&(t=c,r(t)),typeof c=="function"&&c()}};return{stop:()=>{n=!0},start:c=>{n=!1,s&&(s(),s=null),o(c)},subscribe:c=>(r=c,()=>{r=()=>null}),getTimeoutController:()=>e}}class $K{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,o=c=>{c-n>=r?t(c):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(o))};return s=requestAnimationFrame(o),()=>{s!=null&&cancelAnimationFrame(s)}}}function zK(){return BK(new $K)}var UK=y.createContext(zK);function FK(e,t){var r=y.useContext(UK);return y.useMemo(()=>t??r(e),[e,t,r])}var HK=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Fg={isSsr:HK()},WK={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},yC={t:0},zy={t:1};function Hg(e){var t=Kr(e,WK),{isActive:r,canBegin:n,duration:s,easing:o,begin:c,onAnimationEnd:f,onAnimationStart:d,children:h}=t,m=r==="auto"?!Fg.isSsr:r,p=FK(t.animationId,t.animationManager),[x,w]=y.useState(m?yC:zy),j=y.useRef(null);return y.useEffect(()=>{m||w(zy)},[m]),y.useEffect(()=>{if(!m||!n)return yf;var N=OK(yC,zy,DK(o),s,w,p.getTimeoutController()),S=()=>{j.current=N()};return p.start([d,c,S,s,f]),()=>{p.stop(),j.current&&j.current(),f()}},[m,n,s,o,c,d,f,p]),h(x.t)}function Wg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(Ud(t)),n=y.useRef(e);return n.current!==e&&(r.current=Ud(t),n.current=e),r.current}var GK=["radius"],VK=["radius"],bC,wC,jC,NC,kC,SC,_C,CC,EC,AC;function TC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TC(Object(r),!0).forEach(function(n){qK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qK(e,t,r){return(t=KK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KK(e){var t=YK(e,"string");return typeof t=="symbol"?t:t+""}function YK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fm(){return Fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fm.apply(null,arguments)}function MC(e,t){if(e==null)return{};var r,n,s=XK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function XK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ai(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var PC=(e,t,r,n,s)=>{var o=oo(r),c=oo(n),f=Math.min(Math.abs(o)/2,Math.abs(c)/2),d=c>=0?1:-1,h=o>=0?1:-1,m=c>=0&&o>=0||c<0&&o<0?1:0,p;if(f>0&&s instanceof Array){for(var x=[0,0,0,0],w=0,j=4;w<j;w++)x[w]=s[w]>f?f:s[w];p=rr(bC||(bC=ai(["M",",",""])),e,t+d*x[0]),x[0]>0&&(p+=rr(wC||(wC=ai(["A ",",",",0,0,",",",",",""])),x[0],x[0],m,e+h*x[0],t)),p+=rr(jC||(jC=ai(["L ",",",""])),e+r-h*x[1],t),x[1]>0&&(p+=rr(NC||(NC=ai(["A ",",",",0,0,",`,
        `,",",""])),x[1],x[1],m,e+r,t+d*x[1])),p+=rr(kC||(kC=ai(["L ",",",""])),e+r,t+n-d*x[2]),x[2]>0&&(p+=rr(SC||(SC=ai(["A ",",",",0,0,",`,
        `,",",""])),x[2],x[2],m,e+r-h*x[2],t+n)),p+=rr(_C||(_C=ai(["L ",",",""])),e+h*x[3],t+n),x[3]>0&&(p+=rr(CC||(CC=ai(["A ",",",",0,0,",`,
        `,",",""])),x[3],x[3],m,e,t+n-d*x[3])),p+="Z"}else if(f>0&&s===+s&&s>0){var N=Math.min(f,s);p=rr(EC||(EC=ai(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+d*N,N,N,m,e+h*N,t,e+r-h*N,t,N,N,m,e+r,t+d*N,e+r,t+n-d*N,N,N,m,e+r-h*N,t+n,e+h*N,t+n,N,N,m,e,t+n-d*N)}else p=rr(AC||(AC=ai(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return p},RC={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vM=e=>{var t=Kr(e,RC),r=y.useRef(null),[n,s]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var X=r.current.getTotalLength();X&&s(X)}catch{}},[]);var{x:o,y:c,width:f,height:d,radius:h,className:m}=t,{animationEasing:p,animationDuration:x,animationBegin:w,isAnimationActive:j,isUpdateAnimationActive:N}=t,S=y.useRef(f),C=y.useRef(d),A=y.useRef(o),E=y.useRef(c),z=y.useMemo(()=>({x:o,y:c,width:f,height:d,radius:h}),[o,c,f,d,h]),P=Wg(z,"rectangle-");if(o!==+o||c!==+c||f!==+f||d!==+d||f===0||d===0)return null;var B=_t("recharts-rectangle",m);if(!N){var T=oa(t),{radius:R}=T,$=MC(T,GK);return y.createElement("path",Fm({},$,{x:oo(o),y:oo(c),width:oo(f),height:oo(d),radius:typeof h=="number"?h:void 0,className:B,d:PC(o,c,f,d,h)}))}var I=S.current,O=C.current,U=A.current,D=E.current,q="0px ".concat(n===-1?1:n,"px"),Z="".concat(n,"px 0px"),V=mM(["strokeDasharray"],x,typeof p=="string"?p:RC.animationEasing);return y.createElement(Hg,{animationId:P,key:P,canBegin:n>0,duration:x,easing:p,isActive:N,begin:w},X=>{var re=Nr(I,f,X),fe=Nr(O,d,X),Y=Nr(U,o,X),H=Nr(D,c,X);r.current&&(S.current=re,C.current=fe,A.current=Y,E.current=H);var G;j?X>0?G={transition:V,strokeDasharray:Z}:G={strokeDasharray:q}:G={strokeDasharray:Z};var ee=oa(t),{radius:Q}=ee,ae=MC(ee,VK);return y.createElement("path",Fm({},ae,{radius:typeof h=="number"?h:void 0,className:B,d:PC(Y,H,re,fe,h),ref:r,style:OC(OC({},G),t.style)}))})};function IC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function LC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IC(Object(r),!0).forEach(function(n){JK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JK(e,t,r){return(t=QK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QK(e){var t=ZK(e,"string");return typeof t=="symbol"?t:t+""}function ZK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hm=Math.PI/180,eY=e=>e*180/Math.PI,yr=(e,t,r,n)=>({x:e+Math.cos(-Hm*n)*r,y:t+Math.sin(-Hm*n)*r}),yM=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},tY=(e,t)=>{var{x:r,y:n}=e,{x:s,y:o}=t;return Math.sqrt((r-s)**2+(n-o)**2)},rY=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:o}=t,c=tY({x:r,y:n},{x:s,y:o});if(c<=0)return{radius:c,angle:0};var f=(r-s)/c,d=Math.acos(f);return n>o&&(d=2*Math.PI-d),{radius:c,angle:eY(d),angleInRadian:d}},nY=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),o=Math.min(n,s);return{startAngle:t-o*360,endAngle:r-o*360}},aY=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),o=Math.floor(n/360),c=Math.min(s,o);return e+c*360},iY=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:o}=rY({x:r,y:n},t),{innerRadius:c,outerRadius:f}=t;if(s<c||s>f||s===0)return null;var{startAngle:d,endAngle:h}=nY(t),m=o,p;if(d<=h){for(;m>h;)m-=360;for(;m<d;)m+=360;p=m>=d&&m<=h}else{for(;m>d;)m-=360;for(;m<h;)m+=360;p=m>=h&&m<=d}return p?LC(LC({},t),{},{radius:s,angle:aY(m,t)}):null};function bM(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:o}=e,c=yr(t,r,n,s),f=yr(t,r,n,o);return{points:[c,f],cx:t,cy:r,radius:n,startAngle:s,endAngle:o}}var DC,BC,$C,zC,UC,FC,HC;function p1(){return p1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p1.apply(null,arguments)}function tl(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var sY=(e,t)=>{var r=Vr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},P0=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:o,isExternal:c,cornerRadius:f,cornerIsExternal:d}=e,h=f*(c?1:-1)+n,m=Math.asin(f/h)/Hm,p=d?s:s+o*m,x=yr(t,r,h,p),w=yr(t,r,n,p),j=d?s-o*m:s,N=yr(t,r,h*Math.cos(m*Hm),j);return{center:x,circleTangency:w,lineTangency:N,theta:m}},wM=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:o,endAngle:c}=e,f=sY(o,c),d=o+f,h=yr(t,r,s,o),m=yr(t,r,s,d),p=rr(DC||(DC=tl(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,s,s,+(Math.abs(f)>180),+(o>d),m.x,m.y);if(n>0){var x=yr(t,r,n,o),w=yr(t,r,n,d);p+=rr(BC||(BC=tl(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),w.x,w.y,n,n,+(Math.abs(f)>180),+(o<=d),x.x,x.y)}else p+=rr($C||($C=tl(["L ",","," Z"])),t,r);return p},oY=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:f,startAngle:d,endAngle:h}=e,m=Vr(h-d),{circleTangency:p,lineTangency:x,theta:w}=P0({cx:t,cy:r,radius:s,angle:d,sign:m,cornerRadius:o,cornerIsExternal:f}),{circleTangency:j,lineTangency:N,theta:S}=P0({cx:t,cy:r,radius:s,angle:h,sign:-m,cornerRadius:o,cornerIsExternal:f}),C=f?Math.abs(d-h):Math.abs(d-h)-w-S;if(C<0)return c?rr(zC||(zC=tl(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),x.x,x.y,o,o,o*2,o,o,-o*2):wM({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:h});var A=rr(UC||(UC=tl(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),x.x,x.y,o,o,+(m<0),p.x,p.y,s,s,+(C>180),+(m<0),j.x,j.y,o,o,+(m<0),N.x,N.y);if(n>0){var{circleTangency:E,lineTangency:z,theta:P}=P0({cx:t,cy:r,radius:n,angle:d,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:f}),{circleTangency:B,lineTangency:T,theta:R}=P0({cx:t,cy:r,radius:n,angle:h,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:f}),$=f?Math.abs(d-h):Math.abs(d-h)-P-R;if($<0&&o===0)return"".concat(A,"L").concat(t,",").concat(r,"Z");A+=rr(FC||(FC=tl(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),T.x,T.y,o,o,+(m<0),B.x,B.y,n,n,+($>180),+(m>0),E.x,E.y,o,o,+(m<0),z.x,z.y)}else A+=rr(HC||(HC=tl(["L",",","Z"])),t,r);return A},lY={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},jM=e=>{var t=Kr(e,lY),{cx:r,cy:n,innerRadius:s,outerRadius:o,cornerRadius:c,forceCornerRadius:f,cornerIsExternal:d,startAngle:h,endAngle:m,className:p}=t;if(o<s||h===m)return null;var x=_t("recharts-sector",p),w=o-s,j=tn(c,w,0,!0),N;return j>0&&Math.abs(h-m)<360?N=oY({cx:r,cy:n,innerRadius:s,outerRadius:o,cornerRadius:Math.min(j,w/2),forceCornerRadius:f,cornerIsExternal:d,startAngle:h,endAngle:m}):N=wM({cx:r,cy:n,innerRadius:s,outerRadius:o,startAngle:h,endAngle:m}),y.createElement("path",p1({},oa(t),{className:x,d:N}))};function cY(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(tO(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:o,outerRadius:c,angle:f}=t,d=yr(n,s,o,f),h=yr(n,s,c,f);return[{x:d.x,y:d.y},{x:h.x,y:h.y}]}return bM(t)}}var Uy={},Fy={},Hy={},WC;function uY(){return WC||(WC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hO();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Hy)),Hy}var GC;function dY(){return GC||(GC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uY();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Fy)),Fy}var VC;function fY(){return VC||(VC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mO(),r=dY();function n(s,o,c){c&&typeof c!="number"&&t.isIterateeCall(s,o,c)&&(o=c=void 0),s=r.toFinite(s),o===void 0?(o=s,s=0):o=r.toFinite(o),c=c===void 0?s<o?1:-1:r.toFinite(c);const f=Math.max(Math.ceil((o-s)/(c||1)),0),d=new Array(f);for(let h=0;h<f;h++)d[h]=s,s+=c;return d}e.range=n})(Uy)),Uy}var Wy,qC;function hY(){return qC||(qC=1,Wy=fY().range),Wy}var mY=hY();const NM=zn(mY);function uo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gY(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function q2(e){let t,r,n;e.length!==2?(t=uo,r=(f,d)=>uo(e(f),d),n=(f,d)=>e(f)-d):(t=e===uo||e===gY?e:pY,r=e,n=e);function s(f,d,h=0,m=f.length){if(h<m){if(t(d,d)!==0)return m;do{const p=h+m>>>1;r(f[p],d)<0?h=p+1:m=p}while(h<m)}return h}function o(f,d,h=0,m=f.length){if(h<m){if(t(d,d)!==0)return m;do{const p=h+m>>>1;r(f[p],d)<=0?h=p+1:m=p}while(h<m)}return h}function c(f,d,h=0,m=f.length){const p=s(f,d,h,m-1);return p>h&&n(f[p-1],d)>-n(f[p],d)?p-1:p}return{left:s,center:c,right:o}}function pY(){return 0}function kM(e){return e===null?NaN:+e}function*xY(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const vY=q2(uo),Cf=vY.right;q2(kM).center;class KC extends Map{constructor(t,r=wY){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(YC(this,t))}has(t){return super.has(YC(this,t))}set(t,r){return super.set(yY(this,t),r)}delete(t){return super.delete(bY(this,t))}}function YC({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function yY({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function bY({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function wY(e){return e!==null&&typeof e=="object"?e.valueOf():e}function jY(e=uo){if(e===uo)return SM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function SM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const NY=Math.sqrt(50),kY=Math.sqrt(10),SY=Math.sqrt(2);function Wm(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),o=n/Math.pow(10,s),c=o>=NY?10:o>=kY?5:o>=SY?2:1;let f,d,h;return s<0?(h=Math.pow(10,-s)/c,f=Math.round(e*h),d=Math.round(t*h),f/h<e&&++f,d/h>t&&--d,h=-h):(h=Math.pow(10,s)*c,f=Math.round(e/h),d=Math.round(t/h),f*h<e&&++f,d*h>t&&--d),d<f&&.5<=r&&r<2?Wm(e,t,r*2):[f,d,h]}function x1(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,o,c]=n?Wm(t,e,r):Wm(e,t,r);if(!(o>=s))return[];const f=o-s+1,d=new Array(f);if(n)if(c<0)for(let h=0;h<f;++h)d[h]=(o-h)/-c;else for(let h=0;h<f;++h)d[h]=(o-h)*c;else if(c<0)for(let h=0;h<f;++h)d[h]=(s+h)/-c;else for(let h=0;h<f;++h)d[h]=(s+h)*c;return d}function v1(e,t,r){return t=+t,e=+e,r=+r,Wm(e,t,r)[2]}function y1(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?v1(t,e,r):v1(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function XC(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function JC(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function _M(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?SM:jY(s);n>r;){if(n-r>600){const d=n-r+1,h=t-r+1,m=Math.log(d),p=.5*Math.exp(2*m/3),x=.5*Math.sqrt(m*p*(d-p)/d)*(h-d/2<0?-1:1),w=Math.max(r,Math.floor(t-h*p/d+x)),j=Math.min(n,Math.floor(t+(d-h)*p/d+x));_M(e,t,w,j,s)}const o=e[t];let c=r,f=n;for(gd(e,r,t),s(e[n],o)>0&&gd(e,r,n);c<f;){for(gd(e,c,f),++c,--f;s(e[c],o)<0;)++c;for(;s(e[f],o)>0;)--f}s(e[r],o)===0?gd(e,r,f):(++f,gd(e,f,n)),f<=t&&(r=f+1),t<=f&&(n=f-1)}return e}function gd(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function _Y(e,t,r){if(e=Float64Array.from(xY(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return JC(e);if(t>=1)return XC(e);var n,s=(n-1)*t,o=Math.floor(s),c=XC(_M(e,o).subarray(0,o+1)),f=JC(e.subarray(o+1));return c+(f-c)*(s-o)}}function CY(e,t,r=kM){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,o=Math.floor(s),c=+r(e[o],o,e),f=+r(e[o+1],o+1,e);return c+(f-c)*(s-o)}}function EY(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(s);++n<s;)o[n]=e+n*r;return o}function fa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function vs(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const b1=Symbol("implicit");function K2(){var e=new KC,t=[],r=[],n=b1;function s(o){let c=e.get(o);if(c===void 0){if(n!==b1)return n;e.set(o,c=t.push(o)-1)}return r[c%r.length]}return s.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new KC;for(const c of o)e.has(c)||e.set(c,t.push(c)-1);return s},s.range=function(o){return arguments.length?(r=Array.from(o),s):r.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.copy=function(){return K2(t,r).unknown(n)},fa.apply(s,arguments),s}function Y2(){var e=K2().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,o,c,f=!1,d=0,h=0,m=.5;delete e.unknown;function p(){var x=t().length,w=s<n,j=w?s:n,N=w?n:s;o=(N-j)/Math.max(1,x-d+h*2),f&&(o=Math.floor(o)),j+=(N-j-o*(x-d))*m,c=o*(1-d),f&&(j=Math.round(j),c=Math.round(c));var S=EY(x).map(function(C){return j+o*C});return r(w?S.reverse():S)}return e.domain=function(x){return arguments.length?(t(x),p()):t()},e.range=function(x){return arguments.length?([n,s]=x,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(x){return[n,s]=x,n=+n,s=+s,f=!0,p()},e.bandwidth=function(){return c},e.step=function(){return o},e.round=function(x){return arguments.length?(f=!!x,p()):f},e.padding=function(x){return arguments.length?(d=Math.min(1,h=+x),p()):d},e.paddingInner=function(x){return arguments.length?(d=Math.min(1,x),p()):d},e.paddingOuter=function(x){return arguments.length?(h=+x,p()):h},e.align=function(x){return arguments.length?(m=Math.max(0,Math.min(1,x)),p()):m},e.copy=function(){return Y2(t(),[n,s]).round(f).paddingInner(d).paddingOuter(h).align(m)},fa.apply(p(),arguments)}function CM(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return CM(t())},e}function AY(){return CM(Y2.apply(null,arguments).paddingInner(1))}function X2(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function EM(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Ef(){}var Yd=.7,Gm=1/Yd,Lc="\\s*([+-]?\\d+)\\s*",Xd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",TY=/^#([0-9a-f]{3,8})$/,OY=new RegExp(`^rgb\\(${Lc},${Lc},${Lc}\\)$`),MY=new RegExp(`^rgb\\(${fi},${fi},${fi}\\)$`),PY=new RegExp(`^rgba\\(${Lc},${Lc},${Lc},${Xd}\\)$`),RY=new RegExp(`^rgba\\(${fi},${fi},${fi},${Xd}\\)$`),IY=new RegExp(`^hsl\\(${Xd},${fi},${fi}\\)$`),LY=new RegExp(`^hsla\\(${Xd},${fi},${fi},${Xd}\\)$`),QC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};X2(Ef,Jd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ZC,formatHex:ZC,formatHex8:DY,formatHsl:BY,formatRgb:eE,toString:eE});function ZC(){return this.rgb().formatHex()}function DY(){return this.rgb().formatHex8()}function BY(){return AM(this).formatHsl()}function eE(){return this.rgb().formatRgb()}function Jd(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=TY.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?tE(t):r===3?new wn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?R0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?R0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=OY.exec(e))?new wn(t[1],t[2],t[3],1):(t=MY.exec(e))?new wn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=PY.exec(e))?R0(t[1],t[2],t[3],t[4]):(t=RY.exec(e))?R0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=IY.exec(e))?aE(t[1],t[2]/100,t[3]/100,1):(t=LY.exec(e))?aE(t[1],t[2]/100,t[3]/100,t[4]):QC.hasOwnProperty(e)?tE(QC[e]):e==="transparent"?new wn(NaN,NaN,NaN,0):null}function tE(e){return new wn(e>>16&255,e>>8&255,e&255,1)}function R0(e,t,r,n){return n<=0&&(e=t=r=NaN),new wn(e,t,r,n)}function $Y(e){return e instanceof Ef||(e=Jd(e)),e?(e=e.rgb(),new wn(e.r,e.g,e.b,e.opacity)):new wn}function w1(e,t,r,n){return arguments.length===1?$Y(e):new wn(e,t,r,n??1)}function wn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}X2(wn,w1,EM(Ef,{brighter(e){return e=e==null?Gm:Math.pow(Gm,e),new wn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Yd:Math.pow(Yd,e),new wn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new wn(ll(this.r),ll(this.g),ll(this.b),Vm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rE,formatHex:rE,formatHex8:zY,formatRgb:nE,toString:nE}));function rE(){return`#${rl(this.r)}${rl(this.g)}${rl(this.b)}`}function zY(){return`#${rl(this.r)}${rl(this.g)}${rl(this.b)}${rl((isNaN(this.opacity)?1:this.opacity)*255)}`}function nE(){const e=Vm(this.opacity);return`${e===1?"rgb(":"rgba("}${ll(this.r)}, ${ll(this.g)}, ${ll(this.b)}${e===1?")":`, ${e})`}`}function Vm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ll(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rl(e){return e=ll(e),(e<16?"0":"")+e.toString(16)}function aE(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Aa(e,t,r,n)}function AM(e){if(e instanceof Aa)return new Aa(e.h,e.s,e.l,e.opacity);if(e instanceof Ef||(e=Jd(e)),!e)return new Aa;if(e instanceof Aa)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),o=Math.max(t,r,n),c=NaN,f=o-s,d=(o+s)/2;return f?(t===o?c=(r-n)/f+(r<n)*6:r===o?c=(n-t)/f+2:c=(t-r)/f+4,f/=d<.5?o+s:2-o-s,c*=60):f=d>0&&d<1?0:c,new Aa(c,f,d,e.opacity)}function UY(e,t,r,n){return arguments.length===1?AM(e):new Aa(e,t,r,n??1)}function Aa(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}X2(Aa,UY,EM(Ef,{brighter(e){return e=e==null?Gm:Math.pow(Gm,e),new Aa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Yd:Math.pow(Yd,e),new Aa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new wn(Gy(e>=240?e-240:e+120,s,n),Gy(e,s,n),Gy(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Aa(iE(this.h),I0(this.s),I0(this.l),Vm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Vm(this.opacity);return`${e===1?"hsl(":"hsla("}${iE(this.h)}, ${I0(this.s)*100}%, ${I0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function iE(e){return e=(e||0)%360,e<0?e+360:e}function I0(e){return Math.max(0,Math.min(1,e||0))}function Gy(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const J2=e=>()=>e;function FY(e,t){return function(r){return e+r*t}}function HY(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function WY(e){return(e=+e)==1?TM:function(t,r){return r-t?HY(t,r,e):J2(isNaN(t)?r:t)}}function TM(e,t){var r=t-e;return r?FY(e,r):J2(isNaN(e)?t:e)}const sE=(function e(t){var r=WY(t);function n(s,o){var c=r((s=w1(s)).r,(o=w1(o)).r),f=r(s.g,o.g),d=r(s.b,o.b),h=TM(s.opacity,o.opacity);return function(m){return s.r=c(m),s.g=f(m),s.b=d(m),s.opacity=h(m),s+""}}return n.gamma=e,n})(1);function GY(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(o){for(s=0;s<r;++s)n[s]=e[s]*(1-o)+t[s]*o;return n}}function VY(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qY(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),o=new Array(r),c;for(c=0;c<n;++c)s[c]=Zc(e[c],t[c]);for(;c<r;++c)o[c]=t[c];return function(f){for(c=0;c<n;++c)o[c]=s[c](f);return o}}function KY(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function qm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function YY(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Zc(e[s],t[s]):n[s]=t[s];return function(o){for(s in r)n[s]=r[s](o);return n}}var j1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vy=new RegExp(j1.source,"g");function XY(e){return function(){return e}}function JY(e){return function(t){return e(t)+""}}function QY(e,t){var r=j1.lastIndex=Vy.lastIndex=0,n,s,o,c=-1,f=[],d=[];for(e=e+"",t=t+"";(n=j1.exec(e))&&(s=Vy.exec(t));)(o=s.index)>r&&(o=t.slice(r,o),f[c]?f[c]+=o:f[++c]=o),(n=n[0])===(s=s[0])?f[c]?f[c]+=s:f[++c]=s:(f[++c]=null,d.push({i:c,x:qm(n,s)})),r=Vy.lastIndex;return r<t.length&&(o=t.slice(r),f[c]?f[c]+=o:f[++c]=o),f.length<2?d[0]?JY(d[0].x):XY(t):(t=d.length,function(h){for(var m=0,p;m<t;++m)f[(p=d[m]).i]=p.x(h);return f.join("")})}function Zc(e,t){var r=typeof t,n;return t==null||r==="boolean"?J2(t):(r==="number"?qm:r==="string"?(n=Jd(t))?(t=n,sE):QY:t instanceof Jd?sE:t instanceof Date?KY:VY(t)?GY:Array.isArray(t)?qY:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?YY:qm)(e,t)}function Q2(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function ZY(e,t){t===void 0&&(t=e,e=Zc);for(var r=0,n=t.length-1,s=t[0],o=new Array(n<0?0:n);r<n;)o[r]=e(s,s=t[++r]);return function(c){var f=Math.max(0,Math.min(n-1,Math.floor(c*=n)));return o[f](c-f)}}function eX(e){return function(){return e}}function Km(e){return+e}var oE=[0,1];function ln(e){return e}function N1(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:eX(isNaN(t)?NaN:.5)}function tX(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function rX(e,t,r){var n=e[0],s=e[1],o=t[0],c=t[1];return s<n?(n=N1(s,n),o=r(c,o)):(n=N1(n,s),o=r(o,c)),function(f){return o(n(f))}}function nX(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),o=new Array(n),c=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<n;)s[c]=N1(e[c],e[c+1]),o[c]=r(t[c],t[c+1]);return function(f){var d=Cf(e,f,1,n)-1;return o[d](s[d](f))}}function Af(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gg(){var e=oE,t=oE,r=Zc,n,s,o,c=ln,f,d,h;function m(){var x=Math.min(e.length,t.length);return c!==ln&&(c=tX(e[0],e[x-1])),f=x>2?nX:rX,d=h=null,p}function p(x){return x==null||isNaN(x=+x)?o:(d||(d=f(e.map(n),t,r)))(n(c(x)))}return p.invert=function(x){return c(s((h||(h=f(t,e.map(n),qm)))(x)))},p.domain=function(x){return arguments.length?(e=Array.from(x,Km),m()):e.slice()},p.range=function(x){return arguments.length?(t=Array.from(x),m()):t.slice()},p.rangeRound=function(x){return t=Array.from(x),r=Q2,m()},p.clamp=function(x){return arguments.length?(c=x?!0:ln,m()):c!==ln},p.interpolate=function(x){return arguments.length?(r=x,m()):r},p.unknown=function(x){return arguments.length?(o=x,p):o},function(x,w){return n=x,s=w,m()}}function Z2(){return Gg()(ln,ln)}function aX(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ym(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Hc(e){return e=Ym(Math.abs(e)),e?e[1]:NaN}function iX(e,t){return function(r,n){for(var s=r.length,o=[],c=0,f=e[0],d=0;s>0&&f>0&&(d+f+1>n&&(f=Math.max(1,n-d)),o.push(r.substring(s-=f,s+f)),!((d+=f+1)>n));)f=e[c=(c+1)%e.length];return o.reverse().join(t)}}function sX(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var oX=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qd(e){if(!(t=oX.exec(e)))throw new Error("invalid format: "+e);var t;return new ew({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Qd.prototype=ew.prototype;function ew(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ew.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lX(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var OM;function cX(e,t){var r=Ym(e,t);if(!r)return e+"";var n=r[0],s=r[1],o=s-(OM=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,c=n.length;return o===c?n:o>c?n+new Array(o-c+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+Ym(e,Math.max(0,t+o-1))[0]}function lE(e,t){var r=Ym(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const cE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:aX,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>lE(e*100,t),r:lE,s:cX,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function uE(e){return e}var dE=Array.prototype.map,fE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function uX(e){var t=e.grouping===void 0||e.thousands===void 0?uE:iX(dE.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?uE:sX(dE.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function h(p){p=Qd(p);var x=p.fill,w=p.align,j=p.sign,N=p.symbol,S=p.zero,C=p.width,A=p.comma,E=p.precision,z=p.trim,P=p.type;P==="n"?(A=!0,P="g"):cE[P]||(E===void 0&&(E=12),z=!0,P="g"),(S||x==="0"&&w==="=")&&(S=!0,x="0",w="=");var B=N==="$"?r:N==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",T=N==="$"?n:/[%p]/.test(P)?c:"",R=cE[P],$=/[defgprs%]/.test(P);E=E===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function I(O){var U=B,D=T,q,Z,V;if(P==="c")D=R(O)+D,O="";else{O=+O;var X=O<0||1/O<0;if(O=isNaN(O)?d:R(Math.abs(O),E),z&&(O=lX(O)),X&&+O==0&&j!=="+"&&(X=!1),U=(X?j==="("?j:f:j==="-"||j==="("?"":j)+U,D=(P==="s"?fE[8+OM/3]:"")+D+(X&&j==="("?")":""),$){for(q=-1,Z=O.length;++q<Z;)if(V=O.charCodeAt(q),48>V||V>57){D=(V===46?s+O.slice(q+1):O.slice(q))+D,O=O.slice(0,q);break}}}A&&!S&&(O=t(O,1/0));var re=U.length+O.length+D.length,fe=re<C?new Array(C-re+1).join(x):"";switch(A&&S&&(O=t(fe+O,fe.length?C-D.length:1/0),fe=""),w){case"<":O=U+O+D+fe;break;case"=":O=U+fe+O+D;break;case"^":O=fe.slice(0,re=fe.length>>1)+U+O+D+fe.slice(re);break;default:O=fe+U+O+D;break}return o(O)}return I.toString=function(){return p+""},I}function m(p,x){var w=h((p=Qd(p),p.type="f",p)),j=Math.max(-8,Math.min(8,Math.floor(Hc(x)/3)))*3,N=Math.pow(10,-j),S=fE[8+j/3];return function(C){return w(N*C)+S}}return{format:h,formatPrefix:m}}var L0,tw,MM;dX({thousands:",",grouping:[3],currency:["$",""]});function dX(e){return L0=uX(e),tw=L0.format,MM=L0.formatPrefix,L0}function fX(e){return Math.max(0,-Hc(Math.abs(e)))}function hX(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Hc(t)/3)))*3-Hc(Math.abs(e)))}function mX(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Hc(t)-Hc(e))+1}function PM(e,t,r,n){var s=y1(e,t,r),o;switch(n=Qd(n??",f"),n.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(o=hX(s,c))&&(n.precision=o),MM(n,c)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=mX(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=fX(s))&&(n.precision=o-(n.type==="%")*2);break}}return tw(n)}function vo(e){var t=e.domain;return e.ticks=function(r){var n=t();return x1(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return PM(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,o=n.length-1,c=n[s],f=n[o],d,h,m=10;for(f<c&&(h=c,c=f,f=h,h=s,s=o,o=h);m-- >0;){if(h=v1(c,f,r),h===d)return n[s]=c,n[o]=f,t(n);if(h>0)c=Math.floor(c/h)*h,f=Math.ceil(f/h)*h;else if(h<0)c=Math.ceil(c*h)/h,f=Math.floor(f*h)/h;else break;d=h}return e},e}function RM(){var e=Z2();return e.copy=function(){return Af(e,RM())},fa.apply(e,arguments),vo(e)}function IM(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Km),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return IM(e).unknown(t)},e=arguments.length?Array.from(e,Km):[0,1],vo(r)}function LM(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],o=e[n],c;return o<s&&(c=r,r=n,n=c,c=s,s=o,o=c),e[r]=t.floor(s),e[n]=t.ceil(o),e}function hE(e){return Math.log(e)}function mE(e){return Math.exp(e)}function gX(e){return-Math.log(-e)}function pX(e){return-Math.exp(-e)}function xX(e){return isFinite(e)?+("1e"+e):e<0?0:e}function vX(e){return e===10?xX:e===Math.E?Math.exp:t=>Math.pow(e,t)}function yX(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function gE(e){return(t,r)=>-e(-t,r)}function rw(e){const t=e(hE,mE),r=t.domain;let n=10,s,o;function c(){return s=yX(n),o=vX(n),r()[0]<0?(s=gE(s),o=gE(o),e(gX,pX)):e(hE,mE),t}return t.base=function(f){return arguments.length?(n=+f,c()):n},t.domain=function(f){return arguments.length?(r(f),c()):r()},t.ticks=f=>{const d=r();let h=d[0],m=d[d.length-1];const p=m<h;p&&([h,m]=[m,h]);let x=s(h),w=s(m),j,N;const S=f==null?10:+f;let C=[];if(!(n%1)&&w-x<S){if(x=Math.floor(x),w=Math.ceil(w),h>0){for(;x<=w;++x)for(j=1;j<n;++j)if(N=x<0?j/o(-x):j*o(x),!(N<h)){if(N>m)break;C.push(N)}}else for(;x<=w;++x)for(j=n-1;j>=1;--j)if(N=x>0?j/o(-x):j*o(x),!(N<h)){if(N>m)break;C.push(N)}C.length*2<S&&(C=x1(h,m,S))}else C=x1(x,w,Math.min(w-x,S)).map(o);return p?C.reverse():C},t.tickFormat=(f,d)=>{if(f==null&&(f=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Qd(d)).precision==null&&(d.trim=!0),d=tw(d)),f===1/0)return d;const h=Math.max(1,n*f/t.ticks().length);return m=>{let p=m/o(Math.round(s(m)));return p*n<n-.5&&(p*=n),p<=h?d(m):""}},t.nice=()=>r(LM(r(),{floor:f=>o(Math.floor(s(f))),ceil:f=>o(Math.ceil(s(f)))})),t}function DM(){const e=rw(Gg()).domain([1,10]);return e.copy=()=>Af(e,DM()).base(e.base()),fa.apply(e,arguments),e}function pE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function xE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function nw(e){var t=1,r=e(pE(t),xE(t));return r.constant=function(n){return arguments.length?e(pE(t=+n),xE(t)):t},vo(r)}function BM(){var e=nw(Gg());return e.copy=function(){return Af(e,BM()).constant(e.constant())},fa.apply(e,arguments)}function vE(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function bX(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function wX(e){return e<0?-e*e:e*e}function aw(e){var t=e(ln,ln),r=1;function n(){return r===1?e(ln,ln):r===.5?e(bX,wX):e(vE(r),vE(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},vo(t)}function iw(){var e=aw(Gg());return e.copy=function(){return Af(e,iw()).exponent(e.exponent())},fa.apply(e,arguments),e}function jX(){return iw.apply(null,arguments).exponent(.5)}function yE(e){return Math.sign(e)*e*e}function NX(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function $M(){var e=Z2(),t=[0,1],r=!1,n;function s(o){var c=NX(e(o));return isNaN(c)?n:r?Math.round(c):c}return s.invert=function(o){return e.invert(yE(o))},s.domain=function(o){return arguments.length?(e.domain(o),s):e.domain()},s.range=function(o){return arguments.length?(e.range((t=Array.from(o,Km)).map(yE)),s):t.slice()},s.rangeRound=function(o){return s.range(o).round(!0)},s.round=function(o){return arguments.length?(r=!!o,s):r},s.clamp=function(o){return arguments.length?(e.clamp(o),s):e.clamp()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.copy=function(){return $M(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},fa.apply(s,arguments),vo(s)}function zM(){var e=[],t=[],r=[],n;function s(){var c=0,f=Math.max(1,t.length);for(r=new Array(f-1);++c<f;)r[c-1]=CY(e,c/f);return o}function o(c){return c==null||isNaN(c=+c)?n:t[Cf(r,c)]}return o.invertExtent=function(c){var f=t.indexOf(c);return f<0?[NaN,NaN]:[f>0?r[f-1]:e[0],f<r.length?r[f]:e[e.length-1]]},o.domain=function(c){if(!arguments.length)return e.slice();e=[];for(let f of c)f!=null&&!isNaN(f=+f)&&e.push(f);return e.sort(uo),s()},o.range=function(c){return arguments.length?(t=Array.from(c),s()):t.slice()},o.unknown=function(c){return arguments.length?(n=c,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return zM().domain(e).range(t).unknown(n)},fa.apply(o,arguments)}function UM(){var e=0,t=1,r=1,n=[.5],s=[0,1],o;function c(d){return d!=null&&d<=d?s[Cf(n,d,0,r)]:o}function f(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return c}return c.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,f()):[e,t]},c.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,f()):s.slice()},c.invertExtent=function(d){var h=s.indexOf(d);return h<0?[NaN,NaN]:h<1?[e,n[0]]:h>=r?[n[r-1],t]:[n[h-1],n[h]]},c.unknown=function(d){return arguments.length&&(o=d),c},c.thresholds=function(){return n.slice()},c.copy=function(){return UM().domain([e,t]).range(s).unknown(o)},fa.apply(vo(c),arguments)}function FM(){var e=[.5],t=[0,1],r,n=1;function s(o){return o!=null&&o<=o?t[Cf(e,o,0,n)]:r}return s.domain=function(o){return arguments.length?(e=Array.from(o),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(o){return arguments.length?(t=Array.from(o),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(o){var c=t.indexOf(o);return[e[c-1],e[c]]},s.unknown=function(o){return arguments.length?(r=o,s):r},s.copy=function(){return FM().domain(e).range(t).unknown(r)},fa.apply(s,arguments)}const qy=new Date,Ky=new Date;function _r(e,t,r,n){function s(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return s.floor=o=>(e(o=new Date(+o)),o),s.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),s.round=o=>{const c=s(o),f=s.ceil(o);return o-c<f-o?c:f},s.offset=(o,c)=>(t(o=new Date(+o),c==null?1:Math.floor(c)),o),s.range=(o,c,f)=>{const d=[];if(o=s.ceil(o),f=f==null?1:Math.floor(f),!(o<c)||!(f>0))return d;let h;do d.push(h=new Date(+o)),t(o,f),e(o);while(h<o&&o<c);return d},s.filter=o=>_r(c=>{if(c>=c)for(;e(c),!o(c);)c.setTime(c-1)},(c,f)=>{if(c>=c)if(f<0)for(;++f<=0;)for(;t(c,-1),!o(c););else for(;--f>=0;)for(;t(c,1),!o(c););}),r&&(s.count=(o,c)=>(qy.setTime(+o),Ky.setTime(+c),e(qy),e(Ky),Math.floor(r(qy,Ky))),s.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?s.filter(n?c=>n(c)%o===0:c=>s.count(0,c)%o===0):s)),s}const Xm=_r(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Xm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?_r(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Xm);Xm.range;const Ji=1e3,ia=Ji*60,Qi=ia*60,ls=Qi*24,sw=ls*7,bE=ls*30,Yy=ls*365,nl=_r(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ji)},(e,t)=>(t-e)/Ji,e=>e.getUTCSeconds());nl.range;const ow=_r(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ji)},(e,t)=>{e.setTime(+e+t*ia)},(e,t)=>(t-e)/ia,e=>e.getMinutes());ow.range;const lw=_r(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ia)},(e,t)=>(t-e)/ia,e=>e.getUTCMinutes());lw.range;const cw=_r(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ji-e.getMinutes()*ia)},(e,t)=>{e.setTime(+e+t*Qi)},(e,t)=>(t-e)/Qi,e=>e.getHours());cw.range;const uw=_r(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Qi)},(e,t)=>(t-e)/Qi,e=>e.getUTCHours());uw.range;const Tf=_r(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ia)/ls,e=>e.getDate()-1);Tf.range;const Vg=_r(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ls,e=>e.getUTCDate()-1);Vg.range;const HM=_r(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ls,e=>Math.floor(e/ls));HM.range;function Al(e){return _r(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ia)/sw)}const qg=Al(0),Jm=Al(1),kX=Al(2),SX=Al(3),Wc=Al(4),_X=Al(5),CX=Al(6);qg.range;Jm.range;kX.range;SX.range;Wc.range;_X.range;CX.range;function Tl(e){return _r(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/sw)}const Kg=Tl(0),Qm=Tl(1),EX=Tl(2),AX=Tl(3),Gc=Tl(4),TX=Tl(5),OX=Tl(6);Kg.range;Qm.range;EX.range;AX.range;Gc.range;TX.range;OX.range;const dw=_r(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());dw.range;const fw=_r(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());fw.range;const cs=_r(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());cs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_r(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});cs.range;const us=_r(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());us.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_r(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});us.range;function WM(e,t,r,n,s,o){const c=[[nl,1,Ji],[nl,5,5*Ji],[nl,15,15*Ji],[nl,30,30*Ji],[o,1,ia],[o,5,5*ia],[o,15,15*ia],[o,30,30*ia],[s,1,Qi],[s,3,3*Qi],[s,6,6*Qi],[s,12,12*Qi],[n,1,ls],[n,2,2*ls],[r,1,sw],[t,1,bE],[t,3,3*bE],[e,1,Yy]];function f(h,m,p){const x=m<h;x&&([h,m]=[m,h]);const w=p&&typeof p.range=="function"?p:d(h,m,p),j=w?w.range(h,+m+1):[];return x?j.reverse():j}function d(h,m,p){const x=Math.abs(m-h)/p,w=q2(([,,S])=>S).right(c,x);if(w===c.length)return e.every(y1(h/Yy,m/Yy,p));if(w===0)return Xm.every(Math.max(y1(h,m,p),1));const[j,N]=c[x/c[w-1][2]<c[w][2]/x?w-1:w];return j.every(N)}return[f,d]}const[MX,PX]=WM(us,fw,Kg,HM,uw,lw),[RX,IX]=WM(cs,dw,qg,Tf,cw,ow);function Xy(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Jy(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pd(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function LX(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,o=e.days,c=e.shortDays,f=e.months,d=e.shortMonths,h=xd(s),m=vd(s),p=xd(o),x=vd(o),w=xd(c),j=vd(c),N=xd(f),S=vd(f),C=xd(d),A=vd(d),E={a:X,A:re,b:fe,B:Y,c:null,d:_E,e:_E,f:iJ,g:gJ,G:xJ,H:rJ,I:nJ,j:aJ,L:GM,m:sJ,M:oJ,p:H,q:G,Q:AE,s:TE,S:lJ,u:cJ,U:uJ,V:dJ,w:fJ,W:hJ,x:null,X:null,y:mJ,Y:pJ,Z:vJ,"%":EE},z={a:ee,A:Q,b:ae,B:_e,c:null,d:CE,e:CE,f:jJ,g:MJ,G:RJ,H:yJ,I:bJ,j:wJ,L:qM,m:NJ,M:kJ,p:be,q:Pe,Q:AE,s:TE,S:SJ,u:_J,U:CJ,V:EJ,w:AJ,W:TJ,x:null,X:null,y:OJ,Y:PJ,Z:IJ,"%":EE},P={a:I,A:O,b:U,B:D,c:q,d:kE,e:kE,f:QX,g:NE,G:jE,H:SE,I:SE,j:KX,L:JX,m:qX,M:YX,p:$,q:VX,Q:eJ,s:tJ,S:XX,u:UX,U:FX,V:HX,w:zX,W:WX,x:Z,X:V,y:NE,Y:jE,Z:GX,"%":ZX};E.x=B(r,E),E.X=B(n,E),E.c=B(t,E),z.x=B(r,z),z.X=B(n,z),z.c=B(t,z);function B(se,Ae){return function(Ce){var xe=[],We=-1,je=0,ke=se.length,Oe,Me,$e;for(Ce instanceof Date||(Ce=new Date(+Ce));++We<ke;)se.charCodeAt(We)===37&&(xe.push(se.slice(je,We)),(Me=wE[Oe=se.charAt(++We)])!=null?Oe=se.charAt(++We):Me=Oe==="e"?" ":"0",($e=Ae[Oe])&&(Oe=$e(Ce,Me)),xe.push(Oe),je=We+1);return xe.push(se.slice(je,We)),xe.join("")}}function T(se,Ae){return function(Ce){var xe=pd(1900,void 0,1),We=R(xe,se,Ce+="",0),je,ke;if(We!=Ce.length)return null;if("Q"in xe)return new Date(xe.Q);if("s"in xe)return new Date(xe.s*1e3+("L"in xe?xe.L:0));if(Ae&&!("Z"in xe)&&(xe.Z=0),"p"in xe&&(xe.H=xe.H%12+xe.p*12),xe.m===void 0&&(xe.m="q"in xe?xe.q:0),"V"in xe){if(xe.V<1||xe.V>53)return null;"w"in xe||(xe.w=1),"Z"in xe?(je=Jy(pd(xe.y,0,1)),ke=je.getUTCDay(),je=ke>4||ke===0?Qm.ceil(je):Qm(je),je=Vg.offset(je,(xe.V-1)*7),xe.y=je.getUTCFullYear(),xe.m=je.getUTCMonth(),xe.d=je.getUTCDate()+(xe.w+6)%7):(je=Xy(pd(xe.y,0,1)),ke=je.getDay(),je=ke>4||ke===0?Jm.ceil(je):Jm(je),je=Tf.offset(je,(xe.V-1)*7),xe.y=je.getFullYear(),xe.m=je.getMonth(),xe.d=je.getDate()+(xe.w+6)%7)}else("W"in xe||"U"in xe)&&("w"in xe||(xe.w="u"in xe?xe.u%7:"W"in xe?1:0),ke="Z"in xe?Jy(pd(xe.y,0,1)).getUTCDay():Xy(pd(xe.y,0,1)).getDay(),xe.m=0,xe.d="W"in xe?(xe.w+6)%7+xe.W*7-(ke+5)%7:xe.w+xe.U*7-(ke+6)%7);return"Z"in xe?(xe.H+=xe.Z/100|0,xe.M+=xe.Z%100,Jy(xe)):Xy(xe)}}function R(se,Ae,Ce,xe){for(var We=0,je=Ae.length,ke=Ce.length,Oe,Me;We<je;){if(xe>=ke)return-1;if(Oe=Ae.charCodeAt(We++),Oe===37){if(Oe=Ae.charAt(We++),Me=P[Oe in wE?Ae.charAt(We++):Oe],!Me||(xe=Me(se,Ce,xe))<0)return-1}else if(Oe!=Ce.charCodeAt(xe++))return-1}return xe}function $(se,Ae,Ce){var xe=h.exec(Ae.slice(Ce));return xe?(se.p=m.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function I(se,Ae,Ce){var xe=w.exec(Ae.slice(Ce));return xe?(se.w=j.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function O(se,Ae,Ce){var xe=p.exec(Ae.slice(Ce));return xe?(se.w=x.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function U(se,Ae,Ce){var xe=C.exec(Ae.slice(Ce));return xe?(se.m=A.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function D(se,Ae,Ce){var xe=N.exec(Ae.slice(Ce));return xe?(se.m=S.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function q(se,Ae,Ce){return R(se,t,Ae,Ce)}function Z(se,Ae,Ce){return R(se,r,Ae,Ce)}function V(se,Ae,Ce){return R(se,n,Ae,Ce)}function X(se){return c[se.getDay()]}function re(se){return o[se.getDay()]}function fe(se){return d[se.getMonth()]}function Y(se){return f[se.getMonth()]}function H(se){return s[+(se.getHours()>=12)]}function G(se){return 1+~~(se.getMonth()/3)}function ee(se){return c[se.getUTCDay()]}function Q(se){return o[se.getUTCDay()]}function ae(se){return d[se.getUTCMonth()]}function _e(se){return f[se.getUTCMonth()]}function be(se){return s[+(se.getUTCHours()>=12)]}function Pe(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var Ae=B(se+="",E);return Ae.toString=function(){return se},Ae},parse:function(se){var Ae=T(se+="",!1);return Ae.toString=function(){return se},Ae},utcFormat:function(se){var Ae=B(se+="",z);return Ae.toString=function(){return se},Ae},utcParse:function(se){var Ae=T(se+="",!0);return Ae.toString=function(){return se},Ae}}}var wE={"-":"",_:" ",0:"0"},Lr=/^\s*\d+/,DX=/^%/,BX=/[\\^$*+?|[\]().{}]/g;function gt(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",o=s.length;return n+(o<r?new Array(r-o+1).join(t)+s:s)}function $X(e){return e.replace(BX,"\\$&")}function xd(e){return new RegExp("^(?:"+e.map($X).join("|")+")","i")}function vd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function zX(e,t,r){var n=Lr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function UX(e,t,r){var n=Lr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function FX(e,t,r){var n=Lr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function HX(e,t,r){var n=Lr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function WX(e,t,r){var n=Lr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function jE(e,t,r){var n=Lr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function NE(e,t,r){var n=Lr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function GX(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function VX(e,t,r){var n=Lr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function qX(e,t,r){var n=Lr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function kE(e,t,r){var n=Lr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function KX(e,t,r){var n=Lr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function SE(e,t,r){var n=Lr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function YX(e,t,r){var n=Lr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function XX(e,t,r){var n=Lr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function JX(e,t,r){var n=Lr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function QX(e,t,r){var n=Lr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function ZX(e,t,r){var n=DX.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function eJ(e,t,r){var n=Lr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function tJ(e,t,r){var n=Lr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function _E(e,t){return gt(e.getDate(),t,2)}function rJ(e,t){return gt(e.getHours(),t,2)}function nJ(e,t){return gt(e.getHours()%12||12,t,2)}function aJ(e,t){return gt(1+Tf.count(cs(e),e),t,3)}function GM(e,t){return gt(e.getMilliseconds(),t,3)}function iJ(e,t){return GM(e,t)+"000"}function sJ(e,t){return gt(e.getMonth()+1,t,2)}function oJ(e,t){return gt(e.getMinutes(),t,2)}function lJ(e,t){return gt(e.getSeconds(),t,2)}function cJ(e){var t=e.getDay();return t===0?7:t}function uJ(e,t){return gt(qg.count(cs(e)-1,e),t,2)}function VM(e){var t=e.getDay();return t>=4||t===0?Wc(e):Wc.ceil(e)}function dJ(e,t){return e=VM(e),gt(Wc.count(cs(e),e)+(cs(e).getDay()===4),t,2)}function fJ(e){return e.getDay()}function hJ(e,t){return gt(Jm.count(cs(e)-1,e),t,2)}function mJ(e,t){return gt(e.getFullYear()%100,t,2)}function gJ(e,t){return e=VM(e),gt(e.getFullYear()%100,t,2)}function pJ(e,t){return gt(e.getFullYear()%1e4,t,4)}function xJ(e,t){var r=e.getDay();return e=r>=4||r===0?Wc(e):Wc.ceil(e),gt(e.getFullYear()%1e4,t,4)}function vJ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+gt(t/60|0,"0",2)+gt(t%60,"0",2)}function CE(e,t){return gt(e.getUTCDate(),t,2)}function yJ(e,t){return gt(e.getUTCHours(),t,2)}function bJ(e,t){return gt(e.getUTCHours()%12||12,t,2)}function wJ(e,t){return gt(1+Vg.count(us(e),e),t,3)}function qM(e,t){return gt(e.getUTCMilliseconds(),t,3)}function jJ(e,t){return qM(e,t)+"000"}function NJ(e,t){return gt(e.getUTCMonth()+1,t,2)}function kJ(e,t){return gt(e.getUTCMinutes(),t,2)}function SJ(e,t){return gt(e.getUTCSeconds(),t,2)}function _J(e){var t=e.getUTCDay();return t===0?7:t}function CJ(e,t){return gt(Kg.count(us(e)-1,e),t,2)}function KM(e){var t=e.getUTCDay();return t>=4||t===0?Gc(e):Gc.ceil(e)}function EJ(e,t){return e=KM(e),gt(Gc.count(us(e),e)+(us(e).getUTCDay()===4),t,2)}function AJ(e){return e.getUTCDay()}function TJ(e,t){return gt(Qm.count(us(e)-1,e),t,2)}function OJ(e,t){return gt(e.getUTCFullYear()%100,t,2)}function MJ(e,t){return e=KM(e),gt(e.getUTCFullYear()%100,t,2)}function PJ(e,t){return gt(e.getUTCFullYear()%1e4,t,4)}function RJ(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Gc(e):Gc.ceil(e),gt(e.getUTCFullYear()%1e4,t,4)}function IJ(){return"+0000"}function EE(){return"%"}function AE(e){return+e}function TE(e){return Math.floor(+e/1e3)}var wc,YM,XM;LJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function LJ(e){return wc=LX(e),YM=wc.format,wc.parse,XM=wc.utcFormat,wc.utcParse,wc}function DJ(e){return new Date(e)}function BJ(e){return e instanceof Date?+e:+new Date(+e)}function hw(e,t,r,n,s,o,c,f,d,h){var m=Z2(),p=m.invert,x=m.domain,w=h(".%L"),j=h(":%S"),N=h("%I:%M"),S=h("%I %p"),C=h("%a %d"),A=h("%b %d"),E=h("%B"),z=h("%Y");function P(B){return(d(B)<B?w:f(B)<B?j:c(B)<B?N:o(B)<B?S:n(B)<B?s(B)<B?C:A:r(B)<B?E:z)(B)}return m.invert=function(B){return new Date(p(B))},m.domain=function(B){return arguments.length?x(Array.from(B,BJ)):x().map(DJ)},m.ticks=function(B){var T=x();return e(T[0],T[T.length-1],B??10)},m.tickFormat=function(B,T){return T==null?P:h(T)},m.nice=function(B){var T=x();return(!B||typeof B.range!="function")&&(B=t(T[0],T[T.length-1],B??10)),B?x(LM(T,B)):m},m.copy=function(){return Af(m,hw(e,t,r,n,s,o,c,f,d,h))},m}function $J(){return fa.apply(hw(RX,IX,cs,dw,qg,Tf,cw,ow,nl,YM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function zJ(){return fa.apply(hw(MX,PX,us,fw,Kg,Vg,uw,lw,nl,XM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Yg(){var e=0,t=1,r,n,s,o,c=ln,f=!1,d;function h(p){return p==null||isNaN(p=+p)?d:c(s===0?.5:(p=(o(p)-r)*s,f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t]=p,r=o(e=+e),n=o(t=+t),s=r===n?0:1/(n-r),h):[e,t]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(c=p,h):c};function m(p){return function(x){var w,j;return arguments.length?([w,j]=x,c=p(w,j),h):[c(0),c(1)]}}return h.range=m(Zc),h.rangeRound=m(Q2),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return o=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),h}}function yo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function JM(){var e=vo(Yg()(ln));return e.copy=function(){return yo(e,JM())},vs.apply(e,arguments)}function QM(){var e=rw(Yg()).domain([1,10]);return e.copy=function(){return yo(e,QM()).base(e.base())},vs.apply(e,arguments)}function ZM(){var e=nw(Yg());return e.copy=function(){return yo(e,ZM()).constant(e.constant())},vs.apply(e,arguments)}function mw(){var e=aw(Yg());return e.copy=function(){return yo(e,mw()).exponent(e.exponent())},vs.apply(e,arguments)}function UJ(){return mw.apply(null,arguments).exponent(.5)}function eP(){var e=[],t=ln;function r(n){if(n!=null&&!isNaN(n=+n))return t((Cf(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(uo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,o)=>_Y(e,o/n))},r.copy=function(){return eP(t).domain(e)},vs.apply(r,arguments)}function Xg(){var e=0,t=.5,r=1,n=1,s,o,c,f,d,h=ln,m,p=!1,x;function w(N){return isNaN(N=+N)?x:(N=.5+((N=+m(N))-o)*(n*N<n*o?f:d),h(p?Math.max(0,Math.min(1,N)):N))}w.domain=function(N){return arguments.length?([e,t,r]=N,s=m(e=+e),o=m(t=+t),c=m(r=+r),f=s===o?0:.5/(o-s),d=o===c?0:.5/(c-o),n=o<s?-1:1,w):[e,t,r]},w.clamp=function(N){return arguments.length?(p=!!N,w):p},w.interpolator=function(N){return arguments.length?(h=N,w):h};function j(N){return function(S){var C,A,E;return arguments.length?([C,A,E]=S,h=ZY(N,[C,A,E]),w):[h(0),h(.5),h(1)]}}return w.range=j(Zc),w.rangeRound=j(Q2),w.unknown=function(N){return arguments.length?(x=N,w):x},function(N){return m=N,s=N(e),o=N(t),c=N(r),f=s===o?0:.5/(o-s),d=o===c?0:.5/(c-o),n=o<s?-1:1,w}}function tP(){var e=vo(Xg()(ln));return e.copy=function(){return yo(e,tP())},vs.apply(e,arguments)}function rP(){var e=rw(Xg()).domain([.1,1,10]);return e.copy=function(){return yo(e,rP()).base(e.base())},vs.apply(e,arguments)}function nP(){var e=nw(Xg());return e.copy=function(){return yo(e,nP()).constant(e.constant())},vs.apply(e,arguments)}function gw(){var e=aw(Xg());return e.copy=function(){return yo(e,gw()).exponent(e.exponent())},vs.apply(e,arguments)}function FJ(){return gw.apply(null,arguments).exponent(.5)}const kd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Y2,scaleDiverging:tP,scaleDivergingLog:rP,scaleDivergingPow:gw,scaleDivergingSqrt:FJ,scaleDivergingSymlog:nP,scaleIdentity:IM,scaleImplicit:b1,scaleLinear:RM,scaleLog:DM,scaleOrdinal:K2,scalePoint:AY,scalePow:iw,scaleQuantile:zM,scaleQuantize:UM,scaleRadial:$M,scaleSequential:JM,scaleSequentialLog:QM,scaleSequentialPow:mw,scaleSequentialQuantile:eP,scaleSequentialSqrt:UJ,scaleSequentialSymlog:ZM,scaleSqrt:jX,scaleSymlog:BM,scaleThreshold:FM,scaleTime:$J,scaleUtc:zJ,tickFormat:PM},Symbol.toStringTag,{value:"Module"}));var ys=e=>e.chartData,Jg=ue([ys],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),aP=(e,t,r,n)=>n?Jg(e):ys(e),HJ=(e,t,r)=>r?Jg(e):ys(e);function go(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Yt(t)&&Yt(r))return!0}return!1}function OE(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function iP(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,o;if(Yt(r))s=r;else if(typeof r=="function")return;if(Yt(n))o=n;else if(typeof n=="function")return;var c=[s,o];if(go(c))return c}}function WJ(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(go(n))return OE(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,o]=e,c,f;if(s==="auto")t!=null&&(c=Math.min(...t));else if(Ge(s))c=s;else if(typeof s=="function")try{t!=null&&(c=s(t?.[0]))}catch{}else if(typeof s=="string"&&z_.test(s)){var d=z_.exec(s);if(d==null||d[1]==null||t==null)c=void 0;else{var h=+d[1];c=t[0]-h}}else c=t?.[0];if(o==="auto")t!=null&&(f=Math.max(...t));else if(Ge(o))f=o;else if(typeof o=="function")try{t!=null&&(f=o(t?.[1]))}catch{}else if(typeof o=="string"&&U_.test(o)){var m=U_.exec(o);if(m==null||m[1]==null||t==null)f=void 0;else{var p=+m[1];f=t[1]+p}}else f=t?.[1];var x=[c,f];if(go(x))return t==null?x:OE(x,t,r)}}}var eu=1e9,GJ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},xw,Gt=!0,ca="[DecimalError] ",cl=ca+"Invalid argument: ",pw=ca+"Exponent out of range: ",tu=Math.floor,Jo=Math.pow,VJ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,In,Rr=1e7,Ut=7,sP=9007199254740991,Zm=tu(sP/Ut),Ie={};Ie.absoluteValue=Ie.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ie.comparedTo=Ie.cmp=function(e){var t,r,n,s,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(n=o.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return n===s?0:n>s^o.s<0?1:-1};Ie.decimalPlaces=Ie.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ut;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ie.dividedBy=Ie.div=function(e){return rs(this,new this.constructor(e))};Ie.dividedToIntegerBy=Ie.idiv=function(e){var t=this,r=t.constructor;return It(rs(t,new r(e),0,1),r.precision)};Ie.equals=Ie.eq=function(e){return!this.cmp(e)};Ie.exponent=function(){return br(this)};Ie.greaterThan=Ie.gt=function(e){return this.cmp(e)>0};Ie.greaterThanOrEqualTo=Ie.gte=function(e){return this.cmp(e)>=0};Ie.isInteger=Ie.isint=function(){return this.e>this.d.length-2};Ie.isNegative=Ie.isneg=function(){return this.s<0};Ie.isPositive=Ie.ispos=function(){return this.s>0};Ie.isZero=function(){return this.s===0};Ie.lessThan=Ie.lt=function(e){return this.cmp(e)<0};Ie.lessThanOrEqualTo=Ie.lte=function(e){return this.cmp(e)<1};Ie.logarithm=Ie.log=function(e){var t,r=this,n=r.constructor,s=n.precision,o=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(In))throw Error(ca+"NaN");if(r.s<1)throw Error(ca+(r.s?"NaN":"-Infinity"));return r.eq(In)?new n(0):(Gt=!1,t=rs(Zd(r,o),Zd(e,o),o),Gt=!0,It(t,s))};Ie.minus=Ie.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?cP(t,e):oP(t,(e.s=-e.s,e))};Ie.modulo=Ie.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(ca+"NaN");return r.s?(Gt=!1,t=rs(r,e,0,1).times(e),Gt=!0,r.minus(t)):It(new n(r),s)};Ie.naturalExponential=Ie.exp=function(){return lP(this)};Ie.naturalLogarithm=Ie.ln=function(){return Zd(this)};Ie.negated=Ie.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ie.plus=Ie.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?oP(t,e):cP(t,(e.s=-e.s,e))};Ie.precision=Ie.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(cl+e);if(t=br(s)+1,n=s.d.length-1,r=n*Ut+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ie.squareRoot=Ie.sqrt=function(){var e,t,r,n,s,o,c,f=this,d=f.constructor;if(f.s<1){if(!f.s)return new d(0);throw Error(ca+"NaN")}for(e=br(f),Gt=!1,s=Math.sqrt(+f),s==0||s==1/0?(t=ci(f.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=tu((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=c=r+3;;)if(o=n,n=o.plus(rs(f,o,c+2)).times(.5),ci(o.d).slice(0,c)===(t=ci(n.d)).slice(0,c)){if(t=t.slice(c-3,c+1),s==c&&t=="4999"){if(It(o,r+1,0),o.times(o).eq(f)){n=o;break}}else if(t!="9999")break;c+=4}return Gt=!0,It(n,r)};Ie.times=Ie.mul=function(e){var t,r,n,s,o,c,f,d,h,m=this,p=m.constructor,x=m.d,w=(e=new p(e)).d;if(!m.s||!e.s)return new p(0);for(e.s*=m.s,r=m.e+e.e,d=x.length,h=w.length,d<h&&(o=x,x=w,w=o,c=d,d=h,h=c),o=[],c=d+h,n=c;n--;)o.push(0);for(n=h;--n>=0;){for(t=0,s=d+n;s>n;)f=o[s]+w[n]*x[s-n-1]+t,o[s--]=f%Rr|0,t=f/Rr|0;o[s]=(o[s]+t)%Rr|0}for(;!o[--c];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,Gt?It(e,p.precision):e};Ie.toDecimalPlaces=Ie.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(xi(e,0,eu),t===void 0?t=n.rounding:xi(t,0,8),It(r,e+br(r)+1,t))};Ie.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=jl(n,!0):(xi(e,0,eu),t===void 0?t=s.rounding:xi(t,0,8),n=It(new s(n),e+1,t),r=jl(n,!0,e+1)),r};Ie.toFixed=function(e,t){var r,n,s=this,o=s.constructor;return e===void 0?jl(s):(xi(e,0,eu),t===void 0?t=o.rounding:xi(t,0,8),n=It(new o(s),e+br(s)+1,t),r=jl(n.abs(),!1,e+br(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ie.toInteger=Ie.toint=function(){var e=this,t=e.constructor;return It(new t(e),br(e)+1,t.rounding)};Ie.toNumber=function(){return+this};Ie.toPower=Ie.pow=function(e){var t,r,n,s,o,c,f=this,d=f.constructor,h=12,m=+(e=new d(e));if(!e.s)return new d(In);if(f=new d(f),!f.s){if(e.s<1)throw Error(ca+"Infinity");return f}if(f.eq(In))return f;if(n=d.precision,e.eq(In))return It(f,n);if(t=e.e,r=e.d.length-1,c=t>=r,o=f.s,c){if((r=m<0?-m:m)<=sP){for(s=new d(In),t=Math.ceil(n/Ut+4),Gt=!1;r%2&&(s=s.times(f),PE(s.d,t)),r=tu(r/2),r!==0;)f=f.times(f),PE(f.d,t);return Gt=!0,e.s<0?new d(In).div(s):It(s,n)}}else if(o<0)throw Error(ca+"NaN");return o=o<0&&e.d[Math.max(t,r)]&1?-1:1,f.s=1,Gt=!1,s=e.times(Zd(f,n+h)),Gt=!0,s=lP(s),s.s=o,s};Ie.toPrecision=function(e,t){var r,n,s=this,o=s.constructor;return e===void 0?(r=br(s),n=jl(s,r<=o.toExpNeg||r>=o.toExpPos)):(xi(e,1,eu),t===void 0?t=o.rounding:xi(t,0,8),s=It(new o(s),e,t),r=br(s),n=jl(s,e<=r||r<=o.toExpNeg,e)),n};Ie.toSignificantDigits=Ie.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(xi(e,1,eu),t===void 0?t=n.rounding:xi(t,0,8)),It(new n(r),e,t)};Ie.toString=Ie.valueOf=Ie.val=Ie.toJSON=Ie[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=br(e),r=e.constructor;return jl(e,t<=r.toExpNeg||t>=r.toExpPos)};function oP(e,t){var r,n,s,o,c,f,d,h,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),Gt?It(t,p):t;if(d=e.d,h=t.d,c=e.e,s=t.e,d=d.slice(),o=c-s,o){for(o<0?(n=d,o=-o,f=h.length):(n=h,s=c,f=d.length),c=Math.ceil(p/Ut),f=c>f?c+1:f+1,o>f&&(o=f,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(f=d.length,o=h.length,f-o<0&&(o=f,n=h,h=d,d=n),r=0;o;)r=(d[--o]=d[o]+h[o]+r)/Rr|0,d[o]%=Rr;for(r&&(d.unshift(r),++s),f=d.length;d[--f]==0;)d.pop();return t.d=d,t.e=s,Gt?It(t,p):t}function xi(e,t,r){if(e!==~~e||e<t||e>r)throw Error(cl+e)}function ci(e){var t,r,n,s=e.length-1,o="",c=e[0];if(s>0){for(o+=c,t=1;t<s;t++)n=e[t]+"",r=Ut-n.length,r&&(o+=to(r)),o+=n;c=e[t],n=c+"",r=Ut-n.length,r&&(o+=to(r))}else if(c===0)return"0";for(;c%10===0;)c/=10;return o+c}var rs=(function(){function e(n,s){var o,c=0,f=n.length;for(n=n.slice();f--;)o=n[f]*s+c,n[f]=o%Rr|0,c=o/Rr|0;return c&&n.unshift(c),n}function t(n,s,o,c){var f,d;if(o!=c)d=o>c?1:-1;else for(f=d=0;f<o;f++)if(n[f]!=s[f]){d=n[f]>s[f]?1:-1;break}return d}function r(n,s,o){for(var c=0;o--;)n[o]-=c,c=n[o]<s[o]?1:0,n[o]=c*Rr+n[o]-s[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,o,c){var f,d,h,m,p,x,w,j,N,S,C,A,E,z,P,B,T,R,$=n.constructor,I=n.s==s.s?1:-1,O=n.d,U=s.d;if(!n.s)return new $(n);if(!s.s)throw Error(ca+"Division by zero");for(d=n.e-s.e,T=U.length,P=O.length,w=new $(I),j=w.d=[],h=0;U[h]==(O[h]||0);)++h;if(U[h]>(O[h]||0)&&--d,o==null?A=o=$.precision:c?A=o+(br(n)-br(s))+1:A=o,A<0)return new $(0);if(A=A/Ut+2|0,h=0,T==1)for(m=0,U=U[0],A++;(h<P||m)&&A--;h++)E=m*Rr+(O[h]||0),j[h]=E/U|0,m=E%U|0;else{for(m=Rr/(U[0]+1)|0,m>1&&(U=e(U,m),O=e(O,m),T=U.length,P=O.length),z=T,N=O.slice(0,T),S=N.length;S<T;)N[S++]=0;R=U.slice(),R.unshift(0),B=U[0],U[1]>=Rr/2&&++B;do m=0,f=t(U,N,T,S),f<0?(C=N[0],T!=S&&(C=C*Rr+(N[1]||0)),m=C/B|0,m>1?(m>=Rr&&(m=Rr-1),p=e(U,m),x=p.length,S=N.length,f=t(p,N,x,S),f==1&&(m--,r(p,T<x?R:U,x))):(m==0&&(f=m=1),p=U.slice()),x=p.length,x<S&&p.unshift(0),r(N,p,S),f==-1&&(S=N.length,f=t(U,N,T,S),f<1&&(m++,r(N,T<S?R:U,S))),S=N.length):f===0&&(m++,N=[0]),j[h++]=m,f&&N[0]?N[S++]=O[z]||0:(N=[O[z]],S=1);while((z++<P||N[0]!==void 0)&&A--)}return j[0]||j.shift(),w.e=d,It(w,c?o+br(w)+1:o)}})();function lP(e,t){var r,n,s,o,c,f,d=0,h=0,m=e.constructor,p=m.precision;if(br(e)>16)throw Error(pw+br(e));if(!e.s)return new m(In);for(Gt=!1,f=p,c=new m(.03125);e.abs().gte(.1);)e=e.times(c),h+=5;for(n=Math.log(Jo(2,h))/Math.LN10*2+5|0,f+=n,r=s=o=new m(In),m.precision=f;;){if(s=It(s.times(e),f),r=r.times(++d),c=o.plus(rs(s,r,f)),ci(c.d).slice(0,f)===ci(o.d).slice(0,f)){for(;h--;)o=It(o.times(o),f);return m.precision=p,t==null?(Gt=!0,It(o,p)):o}o=c}}function br(e){for(var t=e.e*Ut,r=e.d[0];r>=10;r/=10)t++;return t}function Qy(e,t,r){if(t>e.LN10.sd())throw Gt=!0,r&&(e.precision=r),Error(ca+"LN10 precision limit exceeded");return It(new e(e.LN10),t)}function to(e){for(var t="";e--;)t+="0";return t}function Zd(e,t){var r,n,s,o,c,f,d,h,m,p=1,x=10,w=e,j=w.d,N=w.constructor,S=N.precision;if(w.s<1)throw Error(ca+(w.s?"NaN":"-Infinity"));if(w.eq(In))return new N(0);if(t==null?(Gt=!1,h=S):h=t,w.eq(10))return t==null&&(Gt=!0),Qy(N,h);if(h+=x,N.precision=h,r=ci(j),n=r.charAt(0),o=br(w),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)w=w.times(e),r=ci(w.d),n=r.charAt(0),p++;o=br(w),n>1?(w=new N("0."+r),o++):w=new N(n+"."+r.slice(1))}else return d=Qy(N,h+2,S).times(o+""),w=Zd(new N(n+"."+r.slice(1)),h-x).plus(d),N.precision=S,t==null?(Gt=!0,It(w,S)):w;for(f=c=w=rs(w.minus(In),w.plus(In),h),m=It(w.times(w),h),s=3;;){if(c=It(c.times(m),h),d=f.plus(rs(c,new N(s),h)),ci(d.d).slice(0,h)===ci(f.d).slice(0,h))return f=f.times(2),o!==0&&(f=f.plus(Qy(N,h+2,S).times(o+""))),f=rs(f,new N(p),h),N.precision=S,t==null?(Gt=!0,It(f,S)):f;f=d,s+=2}}function ME(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=tu(r/Ut),e.d=[],n=(r+1)%Ut,r<0&&(n+=Ut),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Ut;n<s;)e.d.push(+t.slice(n,n+=Ut));t=t.slice(n),n=Ut-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Gt&&(e.e>Zm||e.e<-Zm))throw Error(pw+r)}else e.s=0,e.e=0,e.d=[0];return e}function It(e,t,r){var n,s,o,c,f,d,h,m,p=e.d;for(c=1,o=p[0];o>=10;o/=10)c++;if(n=t-c,n<0)n+=Ut,s=t,h=p[m=0];else{if(m=Math.ceil((n+1)/Ut),o=p.length,m>=o)return e;for(h=o=p[m],c=1;o>=10;o/=10)c++;n%=Ut,s=n-Ut+c}if(r!==void 0&&(o=Jo(10,c-s-1),f=h/o%10|0,d=t<0||p[m+1]!==void 0||h%o,d=r<4?(f||d)&&(r==0||r==(e.s<0?3:2)):f>5||f==5&&(r==4||d||r==6&&(n>0?s>0?h/Jo(10,c-s):0:p[m-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(o=br(e),p.length=1,t=t-o-1,p[0]=Jo(10,(Ut-t%Ut)%Ut),e.e=tu(-t/Ut)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=m,o=1,m--):(p.length=m+1,o=Jo(10,Ut-n),p[m]=s>0?(h/Jo(10,c-s)%Jo(10,s)|0)*o:0),d)for(;;)if(m==0){(p[0]+=o)==Rr&&(p[0]=1,++e.e);break}else{if(p[m]+=o,p[m]!=Rr)break;p[m--]=0,o=1}for(n=p.length;p[--n]===0;)p.pop();if(Gt&&(e.e>Zm||e.e<-Zm))throw Error(pw+br(e));return e}function cP(e,t){var r,n,s,o,c,f,d,h,m,p,x=e.constructor,w=x.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new x(e),Gt?It(t,w):t;if(d=e.d,p=t.d,n=t.e,h=e.e,d=d.slice(),c=h-n,c){for(m=c<0,m?(r=d,c=-c,f=p.length):(r=p,n=h,f=d.length),s=Math.max(Math.ceil(w/Ut),f)+2,c>s&&(c=s,r.length=1),r.reverse(),s=c;s--;)r.push(0);r.reverse()}else{for(s=d.length,f=p.length,m=s<f,m&&(f=s),s=0;s<f;s++)if(d[s]!=p[s]){m=d[s]<p[s];break}c=0}for(m&&(r=d,d=p,p=r,t.s=-t.s),f=d.length,s=p.length-f;s>0;--s)d[f++]=0;for(s=p.length;s>c;){if(d[--s]<p[s]){for(o=s;o&&d[--o]===0;)d[o]=Rr-1;--d[o],d[s]+=Rr}d[s]-=p[s]}for(;d[--f]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Gt?It(t,w):t):new x(0)}function jl(e,t,r){var n,s=br(e),o=ci(e.d),c=o.length;return t?(r&&(n=r-c)>0?o=o.charAt(0)+"."+o.slice(1)+to(n):c>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(s<0?"e":"e+")+s):s<0?(o="0."+to(-s-1)+o,r&&(n=r-c)>0&&(o+=to(n))):s>=c?(o+=to(s+1-c),r&&(n=r-s-1)>0&&(o=o+"."+to(n))):((n=s+1)<c&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-c)>0&&(s+1===c&&(o+="."),o+=to(n))),e.s<0?"-"+o:o}function PE(e,t){if(e.length>t)return e.length=t,!0}function uP(e){var t,r,n;function s(o){var c=this;if(!(c instanceof s))return new s(o);if(c.constructor=s,o instanceof s){c.s=o.s,c.e=o.e,c.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(cl+o);if(o>0)c.s=1;else if(o<0)o=-o,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(o===~~o&&o<1e7){c.e=0,c.d=[o];return}return ME(c,o.toString())}else if(typeof o!="string")throw Error(cl+o);if(o.charCodeAt(0)===45?(o=o.slice(1),c.s=-1):c.s=1,VJ.test(o))ME(c,o);else throw Error(cl+o)}if(s.prototype=Ie,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=uP,s.config=s.set=qJ,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function qJ(e){if(!e||typeof e!="object")throw Error(ca+"Object expected");var t,r,n,s=["precision",1,eu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(tu(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(cl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(cl+r+": "+n);return this}var xw=uP(GJ);In=new xw(1);const St=xw;var KJ=e=>e,dP={},fP=e=>e===dP,RE=e=>function t(){return arguments.length===0||arguments.length===1&&fP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},hP=(e,t)=>e===1?t:RE(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var o=n.filter(c=>c!==dP).length;return o>=e?t(...n):hP(e-o,RE(function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];var h=n.map(m=>fP(m)?f.shift():m);return t(...h,...f)}))}),YJ=e=>hP(e.length,e),k1=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},XJ=YJ((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),JJ=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return KJ;var s=r.reverse(),o=s[0],c=s.slice(1);return function(){return c.reduce((f,d)=>d(f),o(...arguments))}};function mP(e){var t;return e===0?t=1:t=Math.floor(new St(e).abs().log(10).toNumber())+1,t}function gP(e,t,r){for(var n=new St(e),s=0,o=[];n.lt(t)&&s<1e5;)o.push(n.toNumber()),n=n.add(r),s++;return o}var pP=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},xP=(e,t,r)=>{if(e.lte(0))return new St(0);var n=mP(e.toNumber()),s=new St(10).pow(n),o=e.div(s),c=n!==1?.05:.1,f=new St(Math.ceil(o.div(c).toNumber())).add(r).mul(c),d=f.mul(s);return t?new St(d.toNumber()):new St(Math.ceil(d.toNumber()))},QJ=(e,t,r)=>{var n=new St(1),s=new St(e);if(!s.isint()&&r){var o=Math.abs(e);o<1?(n=new St(10).pow(mP(e)-1),s=new St(Math.floor(s.div(n).toNumber())).mul(n)):o>1&&(s=new St(Math.floor(e)))}else e===0?s=new St(Math.floor((t-1)/2)):r||(s=new St(Math.floor(e)));var c=Math.floor((t-1)/2),f=JJ(XJ(d=>s.add(new St(d-c).mul(n)).toNumber()),k1);return f(0,t)},vP=function(t,r,n,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new St(0),tickMin:new St(0),tickMax:new St(0)};var c=xP(new St(r).sub(t).div(n-1),s,o),f;t<=0&&r>=0?f=new St(0):(f=new St(t).add(r).div(2),f=f.sub(new St(f).mod(c)));var d=Math.ceil(f.sub(t).div(c).toNumber()),h=Math.ceil(new St(r).sub(f).div(c).toNumber()),m=d+h+1;return m>n?vP(t,r,n,s,o+1):(m<n&&(h=r>0?h+(n-m):h,d=r>0?d:d+(n-m)),{step:c,tickMin:f.sub(new St(d).mul(c)),tickMax:f.add(new St(h).mul(c))})},ZJ=function(t){var[r,n]=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(s,2),[f,d]=pP([r,n]);if(f===-1/0||d===1/0){var h=d===1/0?[f,...k1(0,s-1).map(()=>1/0)]:[...k1(0,s-1).map(()=>-1/0),d];return r>n?h.reverse():h}if(f===d)return QJ(f,s,o);var{step:m,tickMin:p,tickMax:x}=vP(f,d,c,o,0),w=gP(p,x.add(new St(.1).mul(m)),m);return r>n?w.reverse():w},eQ=function(t,r){var[n,s]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[c,f]=pP([n,s]);if(c===-1/0||f===1/0)return[n,s];if(c===f)return[c];var d=Math.max(r,2),h=xP(new St(f).sub(c).div(d-1),o,0),m=[...gP(new St(c),new St(f),h),f];return o===!1&&(m=m.map(p=>Math.round(p))),n>s?m.reverse():m},yP=e=>e.rootProps.maxBarSize,tQ=e=>e.rootProps.barGap,bP=e=>e.rootProps.barCategoryGap,rQ=e=>e.rootProps.barSize,Of=e=>e.rootProps.stackOffset,wP=e=>e.rootProps.reverseStackOrder,vw=e=>e.options.chartName,yw=e=>e.rootProps.syncId,jP=e=>e.rootProps.syncMethod,bw=e=>e.options.eventEmitter,en={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},qi={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Rn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Qg=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},nQ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:qi.angleAxisId,includeHidden:!1,name:void 0,reversed:qi.reversed,scale:qi.scale,tick:qi.tick,tickCount:void 0,ticks:void 0,type:qi.type,unit:void 0},aQ={allowDataOverflow:Rn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Rn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Rn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Rn.scale,tick:Rn.tick,tickCount:Rn.tickCount,ticks:void 0,type:Rn.type,unit:void 0},iQ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:qi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:qi.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:qi.scale,tick:qi.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},sQ={allowDataOverflow:Rn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Rn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Rn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Rn.scale,tick:Rn.tick,tickCount:Rn.tickCount,ticks:void 0,type:"category",unit:void 0},ww=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?iQ:nQ,jw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?sQ:aQ,Zg=e=>e.polarOptions,Nw=ue([ps,xs,Sr],yM),NP=ue([Zg,Nw],(e,t)=>{if(e!=null)return tn(e.innerRadius,t,0)}),kP=ue([Zg,Nw],(e,t)=>{if(e!=null)return tn(e.outerRadius,t,t*.8)}),oQ=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},SP=ue([Zg],oQ);ue([ww,SP],Qg);var _P=ue([Nw,NP,kP],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});ue([jw,_P],Qg);var CP=ue([pt,Zg,NP,kP,ps,xs],(e,t,r,n,s,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:c,cy:f,startAngle:d,endAngle:h}=t;return{cx:tn(c,s,s/2),cy:tn(f,o,o/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:h,clockWise:!1}}}),Vt=(e,t)=>t,Mf=(e,t,r)=>r;function kw(e){return e?.id}function EP(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:o}=r,c=new Map;return e.forEach(f=>{var d,h=(d=f.data)!==null&&d!==void 0?d:n;if(!(h==null||h.length===0)){var m=kw(f);h.forEach((p,x)=>{var w=o==null||s?x:String(Ft(p,o,null)),j=Ft(p,f.dataKey,0),N;c.has(w)?N=c.get(w):N={},Object.assign(N,{[m]:j}),c.set(w,N)})}}),Array.from(c.values())}function ep(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var tp=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function rp(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function lQ(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Cr=e=>{var t=pt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ru=e=>e.tooltip.settings.axisId;function IE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function eg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IE(Object(r),!0).forEach(function(n){cQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cQ(e,t,r){return(t=uQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uQ(e){var t=dQ(e,"string");return typeof t=="symbol"?t:t+""}function dQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S1=[0,"auto"],Mr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},AP=(e,t)=>e.cartesianAxis.xAxis[t],bs=(e,t)=>{var r=AP(e,t);return r??Mr},Pr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:S1,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:kf},TP=(e,t)=>e.cartesianAxis.yAxis[t],ws=(e,t)=>{var r=TP(e,t);return r??Pr},fQ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Sw=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??fQ},Xt=(e,t,r)=>{switch(t){case"xAxis":return bs(e,r);case"yAxis":return ws(e,r);case"zAxis":return Sw(e,r);case"angleAxis":return ww(e,r);case"radiusAxis":return jw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},hQ=(e,t,r)=>{switch(t){case"xAxis":return bs(e,r);case"yAxis":return ws(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Pf=(e,t,r)=>{switch(t){case"xAxis":return bs(e,r);case"yAxis":return ws(e,r);case"angleAxis":return ww(e,r);case"radiusAxis":return jw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},OP=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function _w(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Cw=e=>e.graphicalItems.cartesianItems,mQ=ue([Vt,Mf],_w),Ew=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),Rf=ue([Cw,Xt,mQ],Ew,{memoizeOptions:{resultEqualityCheck:rp}}),MP=ue([Rf],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(ep)),PP=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),gQ=ue([Rf],PP),Aw=e=>e.map(t=>t.data).filter(Boolean).flat(1),pQ=ue([Rf],Aw,{memoizeOptions:{resultEqualityCheck:rp}}),Tw=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},Ow=ue([pQ,aP],Tw),Mw=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:Ft(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Ft(s,n)}))):e.map(n=>({value:n})),np=ue([Ow,Xt,Rf],Mw);function RP(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function im(e){if(pi(e)||e instanceof Date){var t=Number(e);if(Yt(t))return t}}function LE(e){if(Array.isArray(e)){var t=[im(e[0]),im(e[1])];return go(t)?t:void 0}var r=im(e);if(r!=null)return[r,r]}function ds(e){return e.map(im).filter(oW)}function xQ(e,t,r){return!r||typeof t!="number"||gi(t)?[]:r.length?ds(r.flatMap(n=>{var s=Ft(e,n.dataKey),o,c;if(Array.isArray(s)?[o,c]=s:o=c=s,!(!Yt(o)||!Yt(c)))return[t-o,t+c]})):[]}var Er=e=>{var t=Cr(e),r=ru(e);return Pf(e,t,r)},If=ue([Er],e=>e?.dataKey),vQ=ue([MP,aP,Er],EP),IP=(e,t,r,n)=>{var s={},o=t.reduce((c,f)=>{if(f.stackId==null)return c;var d=c[f.stackId];return d==null&&(d=[]),d.push(f),c[f.stackId]=d,c},s);return Object.fromEntries(Object.entries(o).map(c=>{var[f,d]=c,h=n?[...d].reverse():d,m=h.map(kw);return[f,{stackedData:IV(e,m,r),graphicalItems:h}]}))},_1=ue([vQ,MP,Of,wP],IP),LP=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:o}=t;if(n==null&&r!=="zAxis"){var c=zV(e,s,o);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},yQ=ue([Xt],e=>e.allowDataOverflow),Pw=e=>{var t;if(e==null||!("domain"in e))return S1;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=ds(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:S1},Rw=ue([Xt],Pw),Iw=ue([Rw,yQ],iP),bQ=ue([_1,ys,Vt,Iw],LP,{memoizeOptions:{resultEqualityCheck:tp}}),ap=e=>e.errorBars,wQ=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>RP(r,n)),tg=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var o=s.flat(),c=Math.min(...o),f=Math.max(...o);return[c,f]}},Lw=(e,t,r,n,s)=>{var o,c;if(r.length>0&&e.forEach(f=>{r.forEach(d=>{var h,m,p=(h=n[d.id])===null||h===void 0?void 0:h.filter(C=>RP(s,C)),x=Ft(f,(m=t.dataKey)!==null&&m!==void 0?m:d.dataKey),w=xQ(f,x,p);if(w.length>=2){var j=Math.min(...w),N=Math.max(...w);(o==null||j<o)&&(o=j),(c==null||N>c)&&(c=N)}var S=LE(x);S!=null&&(o=o==null?S[0]:Math.min(o,S[0]),c=c==null?S[1]:Math.max(c,S[1]))})}),t?.dataKey!=null&&e.forEach(f=>{var d=LE(Ft(f,t.dataKey));d!=null&&(o=o==null?d[0]:Math.min(o,d[0]),c=c==null?d[1]:Math.max(c,d[1]))}),Yt(o)&&Yt(c))return[o,c]},jQ=ue([Ow,Xt,gQ,ap,Vt],Lw,{memoizeOptions:{resultEqualityCheck:tp}});function NQ(e){var{value:t}=e;if(pi(t)||t instanceof Date)return t}var kQ=(e,t,r)=>{var n=e.map(NQ).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&ZT(n))?NM(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},DP=e=>e.referenceElements.dots,nu=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),SQ=ue([DP,Vt,Mf],nu),BP=e=>e.referenceElements.areas,_Q=ue([BP,Vt,Mf],nu),$P=e=>e.referenceElements.lines,CQ=ue([$P,Vt,Mf],nu),zP=(e,t)=>{if(e!=null){var r=ds(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},EQ=ue(SQ,Vt,zP),UP=(e,t)=>{if(e!=null){var r=ds(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},AQ=ue([_Q,Vt],UP);function TQ(e){var t;if(e.x!=null)return ds([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:ds(r)}function OQ(e){var t;if(e.y!=null)return ds([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:ds(r)}var FP=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?TQ(n):OQ(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},MQ=ue([CQ,Vt],FP),PQ=ue(EQ,MQ,AQ,(e,t,r)=>tg(e,r,t)),Dw=(e,t,r,n,s,o,c,f)=>{if(r!=null)return r;var d=c==="vertical"&&f==="xAxis"||c==="horizontal"&&f==="yAxis",h=d?tg(n,o,s):tg(o,s);return WJ(t,h,e.allowDataOverflow)},RQ=ue([Xt,Rw,Iw,bQ,jQ,PQ,pt,Vt],Dw,{memoizeOptions:{resultEqualityCheck:tp}}),IQ=[0,1],Bw=(e,t,r,n,s,o,c)=>{if(!((e==null||r==null||r.length===0)&&c===void 0)){var{dataKey:f,type:d}=e,h=El(t,o);if(h&&f==null){var m;return NM(0,(m=r?.length)!==null&&m!==void 0?m:0)}return d==="category"?kQ(n,e,h):s==="expand"?IQ:c}},$w=ue([Xt,pt,Ow,np,Of,Vt,RQ],Bw),HP=(e,t,r,n,s)=>{if(e!=null){var{scale:o,type:c}=e;if(o==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":c==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":c==="category"?"band":"linear";if(typeof o=="string"){var f="scale".concat(vf(o));return f in kd?f:"point"}}},au=ue([Xt,pt,OP,vw,Vt],HP);function LQ(e){if(e!=null){if(e in kd)return kd[e]();var t="scale".concat(vf(e));if(t in kd)return kd[t]()}}function zw(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=LQ(t);if(s!=null){var o=s.domain(r).range(n);return TV(o),o}}}var Uw=(e,t,r)=>{var n=Pw(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&go(e))return ZJ(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&go(e))return eQ(e,t.tickCount,t.allowDecimals)}},Fw=ue([$w,Pf,au],Uw),Hw=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&go(t)&&Array.isArray(r)&&r.length>0){var s=t[0],o=r[0],c=t[1],f=r[r.length-1];return[Math.min(s,o),Math.max(c,f)]}return t},DQ=ue([Xt,$w,Fw,Vt],Hw),BQ=ue(np,Xt,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ds(e.map(p=>p.value))).sort((p,x)=>p-x),s=n[0],o=n[n.length-1];if(s==null||o==null)return 1/0;var c=o-s;if(c===0)return 1/0;for(var f=0;f<n.length-1;f++){var d=n[f],h=n[f+1];if(!(d==null||h==null)){var m=h-d;r=Math.min(r,m)}}return r/c}}),WP=ue(BQ,pt,bP,Sr,(e,t,r,n,s)=>s,(e,t,r,n,s)=>{if(!Yt(e))return 0;var o=t==="vertical"?n.height:n.width;if(s==="gap")return e*o/2;if(s==="no-gap"){var c=tn(r,e*o),f=e*o/2;return f-c-(f-c)/o*c}return 0}),$Q=(e,t,r)=>{var n=bs(e,t);return n==null||typeof n.padding!="string"?0:WP(e,"xAxis",t,r,n.padding)},zQ=(e,t,r)=>{var n=ws(e,t);return n==null||typeof n.padding!="string"?0:WP(e,"yAxis",t,r,n.padding)},UQ=ue(bs,$Q,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),FQ=ue(ws,zQ,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),HQ=ue([Sr,UQ,Lg,Ig,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:o}=n;return s?[o.left,r.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),WQ=ue([Sr,pt,FQ,Lg,Ig,(e,t,r)=>r],(e,t,r,n,s,o)=>{var{padding:c}=s;return o?[n.height-c.bottom,c.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Lf=(e,t,r,n)=>{var s;switch(t){case"xAxis":return HQ(e,r,n);case"yAxis":return WQ(e,r,n);case"zAxis":return(s=Sw(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return SP(e);case"radiusAxis":return _P(e,r);default:return}},GP=ue([Xt,Lf],Qg),ip=ue([Xt,au,DQ,GP],zw);ue([Rf,ap,Vt],wQ);function VP(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var sp=(e,t)=>t,op=(e,t,r)=>r,GQ=ue(Pg,sp,op,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(VP)),VQ=ue(Rg,sp,op,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(VP)),qP=(e,t)=>({width:e.width,height:t.height}),qQ=(e,t)=>{var r=typeof t.width=="number"?t.width:kf;return{width:r,height:e.height}},KP=ue(Sr,bs,qP),KQ=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},YQ=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},XQ=ue(xs,Sr,GQ,sp,op,(e,t,r,n,s)=>{var o={},c;return r.forEach(f=>{var d=qP(t,f);c==null&&(c=KQ(t,n,e));var h=n==="top"&&!s||n==="bottom"&&s;o[f.id]=c-Number(h)*d.height,c+=(h?-1:1)*d.height}),o}),JQ=ue(ps,Sr,VQ,sp,op,(e,t,r,n,s)=>{var o={},c;return r.forEach(f=>{var d=qQ(t,f);c==null&&(c=YQ(t,n,e));var h=n==="left"&&!s||n==="right"&&s;o[f.id]=c-Number(h)*d.width,c+=(h?-1:1)*d.width}),o}),QQ=(e,t)=>{var r=bs(e,t);if(r!=null)return XQ(e,r.orientation,r.mirror)},ZQ=ue([Sr,bs,QQ,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),eZ=(e,t)=>{var r=ws(e,t);if(r!=null)return JQ(e,r.orientation,r.mirror)},tZ=ue([Sr,ws,eZ,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),YP=ue(Sr,ws,(e,t)=>{var r=typeof t.width=="number"?t.width:kf;return{width:r,height:e.height}}),DE=(e,t,r)=>{switch(t){case"xAxis":return KP(e,r).width;case"yAxis":return YP(e,r).height;default:return}},XP=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:o,dataKey:c}=r,f=El(e,n),d=t.map(h=>h.value);if(c&&f&&o==="category"&&s&&ZT(d))return d}},Ww=ue([pt,np,Xt,Vt],XP),JP=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:o}=r,c=El(e,n);if(c&&(s==="number"||o!=="auto"))return t.map(f=>f.value)}},Gw=ue([pt,np,Pf,Vt],JP);ue([pt,hQ,au,ip,Ww,Gw,Lf,Fw,Vt],(e,t,r,n,s,o,c,f,d)=>{if(t!=null){var h=El(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:o,duplicateDomain:s,isCategorical:h,niceTicks:f,range:c,realScaleType:r,scale:n}}});var rZ=(e,t,r,n,s,o,c,f,d)=>{if(!(t==null||n==null)){var h=El(e,d),{type:m,ticks:p,tickCount:x}=t,w=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,j=m==="category"&&n.bandwidth?n.bandwidth()/w:0;j=d==="angleAxis"&&o!=null&&o.length>=2?Vr(o[0]-o[1])*2*j:j;var N=p||s;if(N){var S=N.map((C,A)=>{var E=c?c.indexOf(C):C;return{index:A,coordinate:n(E)+j,value:C,offset:j}});return S.filter(C=>Yt(C.coordinate))}return h&&f?f.map((C,A)=>({coordinate:n(C)+j,value:C,index:A,offset:j})).filter(C=>Yt(C.coordinate)):n.ticks?n.ticks(x).map(C=>({coordinate:n(C)+j,value:C,offset:j})):n.domain().map((C,A)=>({coordinate:n(C)+j,value:c?c[C]:C,index:A,offset:j}))}},QP=ue([pt,Pf,au,ip,Fw,Lf,Ww,Gw,Vt],rZ),nZ=(e,t,r,n,s,o,c)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var f=El(e,c),{tickCount:d}=t,h=0;return h=c==="angleAxis"&&n?.length>=2?Vr(n[0]-n[1])*2*h:h,f&&o?o.map((m,p)=>({coordinate:r(m)+h,value:m,index:p,offset:h})):r.ticks?r.ticks(d).map(m=>({coordinate:r(m)+h,value:m,offset:h})):r.domain().map((m,p)=>({coordinate:r(m)+h,value:s?s[m]:m,index:p,offset:h}))}},Vc=ue([pt,Pf,ip,Lf,Ww,Gw,Vt],nZ),qc=ue(Xt,ip,(e,t)=>{if(!(e==null||t==null))return eg(eg({},e),{},{scale:t})}),aZ=ue([Xt,au,$w,GP],zw);ue((e,t,r)=>Sw(e,r),aZ,(e,t)=>{if(!(e==null||t==null))return eg(eg({},e),{},{scale:t})});var iZ=ue([pt,Pg,Rg],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),ZP=e=>e.options.defaultTooltipEventType,e8=e=>e.options.validateTooltipEventTypes;function t8(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Vw(e,t){var r=ZP(e),n=e8(e);return t8(t,r,n)}function sZ(e){return He(t=>Vw(t,e))}var r8=(e,t)=>{var r,n=Number(t);if(!(gi(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},oZ=e=>e.tooltip.settings,so={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},lZ={itemInteraction:{click:so,hover:so},axisInteraction:{click:so,hover:so},keyboardInteraction:so,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},n8=kn({name:"tooltip",initialState:lZ,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Wt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Ra(e).tooltipItemPayloads.indexOf(r);s>-1&&(e.tooltipItemPayloads[s]=n)},prepare:Wt()},removeTooltipEntrySettings:{reducer(e,t){var r=Ra(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Wt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:cZ,replaceTooltipEntrySettings:uZ,removeTooltipEntrySettings:dZ,setTooltipSettingsState:fZ,setActiveMouseOverItemIndex:a8,mouseLeaveItem:hZ,mouseLeaveChart:i8,setActiveClickItemIndex:mZ,setMouseOverAxisIndex:s8,setMouseClickAxisIndex:gZ,setSyncInteraction:C1,setKeyboardInteraction:E1}=n8.actions,pZ=n8.reducer;function BE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function D0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BE(Object(r),!0).forEach(function(n){xZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xZ(e,t,r){return(t=vZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vZ(e){var t=yZ(e,"string");return typeof t=="symbol"?t:t+""}function yZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bZ(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function wZ(e){return e.index!=null}var o8=(e,t,r,n)=>{if(t==null)return so;var s=bZ(e,t,r);if(s==null)return so;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(wZ(s)){if(o)return D0(D0({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return D0(D0({},so),{},{coordinate:s.coordinate})};function jZ(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function NZ(e,t){var r=jZ(e),n=t[0],s=t[1];if(r===void 0)return!1;var o=Math.min(n,s),c=Math.max(n,s);return r>=o&&r<=c}function kZ(e,t,r){if(r==null||t==null)return!0;var n=Ft(e,t);return n==null||!go(r)?!0:NZ(n,r)}var qw=(e,t,r,n)=>{var s=e?.index;if(s==null)return null;var o=Number(s);if(!Yt(o))return s;var c=0,f=1/0;t.length>0&&(f=t.length-1);var d=Math.max(c,Math.min(o,f)),h=t[d];return h==null||kZ(h,r,n)?String(d):null},l8=(e,t,r,n,s,o,c,f)=>{if(!(o==null||f==null)){var d=c[0],h=d==null?void 0:f(d.positions,o);if(h!=null)return h;var m=s?.[Number(o)];if(m)return r==="horizontal"?{x:m.coordinate,y:(n.top+t)/2}:{x:(n.left+e)/2,y:m.coordinate}}},c8=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;if(r==="hover"?s=e.itemInteraction.hover.graphicalItemId:s=e.itemInteraction.click.graphicalItemId,s==null&&n!=null){var o=e.tooltipItemPayloads[0];return o!=null?[o]:[]}return e.tooltipItemPayloads.filter(c=>{var f;return((f=c.settings)===null||f===void 0?void 0:f.graphicalItemId)===s})},Df=e=>e.options.tooltipPayloadSearcher,iu=e=>e.tooltip;function $E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(r),!0).forEach(function(n){SZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$E(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SZ(e,t,r){return(t=_Z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Z(e){var t=CZ(e,"string");return typeof t=="symbol"?t:t+""}function CZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EZ(e,t){return e??t}var u8=(e,t,r,n,s,o,c)=>{if(!(t==null||o==null)){var{chartData:f,computedData:d,dataStartIndex:h,dataEndIndex:m}=r,p=[];return e.reduce((x,w)=>{var j,{dataDefinedOnItem:N,settings:S}=w,C=EZ(N,f),A=Array.isArray(C)?VO(C,h,m):C,E=(j=S?.dataKey)!==null&&j!==void 0?j:n,z=S?.nameKey,P;if(n&&Array.isArray(A)&&!Array.isArray(A[0])&&c==="axis"?P=sW(A,n,s):P=o(A,t,d,z),Array.isArray(P))P.forEach(T=>{var R=zE(zE({},S),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});x.push(F_({tooltipEntrySettings:R,dataKey:T.dataKey,payload:T.payload,value:Ft(T.payload,T.dataKey),name:T.name}))});else{var B;x.push(F_({tooltipEntrySettings:S,dataKey:E,payload:P,value:Ft(P,E),name:(B=Ft(P,z))!==null&&B!==void 0?B:S?.name}))}return x},p)}},Kw=ue([Er,pt,OP,vw,Cr],HP),AZ=ue([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),TZ=ue([Cr,ru],_w),su=ue([AZ,Er,TZ],Ew,{memoizeOptions:{resultEqualityCheck:rp}}),OZ=ue([su],e=>e.filter(ep)),MZ=ue([su],Aw,{memoizeOptions:{resultEqualityCheck:rp}}),ou=ue([MZ,ys],Tw),PZ=ue([OZ,ys,Er],EP),Yw=ue([ou,Er,su],Mw),d8=ue([Er],Pw),RZ=ue([Er],e=>e.allowDataOverflow),f8=ue([d8,RZ],iP),IZ=ue([su],e=>e.filter(ep)),LZ=ue([PZ,IZ,Of,wP],IP),DZ=ue([LZ,ys,Cr,f8],LP),BZ=ue([su],PP),$Z=ue([ou,Er,BZ,ap,Cr],Lw,{memoizeOptions:{resultEqualityCheck:tp}}),zZ=ue([DP,Cr,ru],nu),UZ=ue([zZ,Cr],zP),FZ=ue([BP,Cr,ru],nu),HZ=ue([FZ,Cr],UP),WZ=ue([$P,Cr,ru],nu),GZ=ue([WZ,Cr],FP),VZ=ue([UZ,GZ,HZ],tg),qZ=ue([Er,d8,f8,DZ,$Z,VZ,pt,Cr],Dw),Bf=ue([Er,pt,ou,Yw,Of,Cr,qZ],Bw),KZ=ue([Bf,Er,Kw],Uw),YZ=ue([Er,Bf,KZ,Cr],Hw),h8=e=>{var t=Cr(e),r=ru(e),n=!1;return Lf(e,t,r,n)},m8=ue([Er,h8],Qg),g8=ue([Er,Kw,YZ,m8],zw),XZ=ue([pt,Yw,Er,Cr],XP),JZ=ue([pt,Yw,Er,Cr],JP),QZ=(e,t,r,n,s,o,c,f)=>{if(t){var{type:d}=t,h=El(e,f);if(n){var m=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/m:0;return p=f==="angleAxis"&&s!=null&&s?.length>=2?Vr(s[0]-s[1])*2*p:p,h&&c?c.map((x,w)=>({coordinate:n(x)+p,value:x,index:w,offset:p})):n.domain().map((x,w)=>({coordinate:n(x)+p,value:o?o[x]:x,index:w,offset:p}))}}},js=ue([pt,Er,Kw,g8,h8,XZ,JZ,Cr],QZ),Xw=ue([ZP,e8,oZ],(e,t,r)=>t8(r.shared,e,t)),p8=e=>e.tooltip.settings.trigger,Jw=e=>e.tooltip.settings.defaultIndex,$f=ue([iu,Xw,p8,Jw],o8),Nl=ue([$f,ou,If,Bf],qw),x8=ue([js,Nl],r8),Qw=ue([$f],e=>{if(e)return e.dataKey}),ZZ=ue([$f],e=>{if(e)return e.graphicalItemId}),v8=ue([iu,Xw,p8,Jw],c8),eee=ue([ps,xs,pt,Sr,js,Jw,v8,Df],l8),tee=ue([$f,eee],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),ree=ue([$f],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),nee=ue([v8,Nl,ys,If,x8,Df,Xw],u8);ue([nee],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function UE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UE(Object(r),!0).forEach(function(n){aee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aee(e,t,r){return(t=iee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iee(e){var t=see(e,"string");return typeof t=="symbol"?t:t+""}function see(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oee=()=>He(Er),lee=()=>{var e=oee(),t=He(js),r=He(g8);return Im(!e||!r?void 0:FE(FE({},e),{},{scale:r}),t)};function HE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(r),!0).forEach(function(n){cee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cee(e,t,r){return(t=uee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uee(e){var t=dee(e,"string");return typeof t=="symbol"?t:t+""}function dee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fee=(e,t,r,n)=>{var s=t.find(o=>o&&o.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},hee=(e,t,r,n)=>{var s=t.find(h=>h&&h.index===r);if(s){if(e==="centric"){var o=s.coordinate,{radius:c}=n;return jc(jc(jc({},n),yr(n.cx,n.cy,c,o)),{},{angle:o,radius:c})}var f=s.coordinate,{angle:d}=n;return jc(jc(jc({},n),yr(n.cx,n.cy,f,d)),{},{angle:d,radius:f})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function mee(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var y8=(e,t,r,n,s)=>{var o,c=(o=t?.length)!==null&&o!==void 0?o:0;if(c<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var f=0;f<c;f++){var d,h,m,p,x,w=f>0?(d=r[f-1])===null||d===void 0?void 0:d.coordinate:(h=r[c-1])===null||h===void 0?void 0:h.coordinate,j=(m=r[f])===null||m===void 0?void 0:m.coordinate,N=f>=c-1?(p=r[0])===null||p===void 0?void 0:p.coordinate:(x=r[f+1])===null||x===void 0?void 0:x.coordinate,S=void 0;if(!(w==null||j==null||N==null))if(Vr(j-w)!==Vr(N-j)){var C=[];if(Vr(N-j)===Vr(s[1]-s[0])){S=N;var A=j+s[1]-s[0];C[0]=Math.min(A,(A+w)/2),C[1]=Math.max(A,(A+w)/2)}else{S=w;var E=N+s[1]-s[0];C[0]=Math.min(j,(E+j)/2),C[1]=Math.max(j,(E+j)/2)}var z=[Math.min(j,(S+j)/2),Math.max(j,(S+j)/2)];if(e>z[0]&&e<=z[1]||e>=C[0]&&e<=C[1]){var P;return(P=r[f])===null||P===void 0?void 0:P.index}}else{var B=Math.min(w,N),T=Math.max(w,N);if(e>(B+j)/2&&e<=(T+j)/2){var R;return(R=r[f])===null||R===void 0?void 0:R.index}}}else if(t)for(var $=0;$<c;$++){var I=t[$];if(I!=null){var O=t[$+1],U=t[$-1];if($===0&&O!=null&&e<=(I.coordinate+O.coordinate)/2||$===c-1&&U!=null&&e>(I.coordinate+U.coordinate)/2||$>0&&$<c-1&&U!=null&&O!=null&&e>(I.coordinate+U.coordinate)/2&&e<=(I.coordinate+O.coordinate)/2)return I.index}}return-1},gee=()=>He(vw),Zw=(e,t)=>t,b8=(e,t,r)=>r,ej=(e,t,r,n)=>n,pee=ue(js,e=>Ng(e,t=>t.coordinate)),tj=ue([iu,Zw,b8,ej],o8),rj=ue([tj,ou,If,Bf],qw),xee=(e,t,r)=>{if(t!=null){var n=iu(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},w8=ue([iu,Zw,b8,ej],c8),rg=ue([ps,xs,pt,Sr,js,ej,w8,Df],l8),vee=ue([tj,rg],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),j8=ue([js,rj],r8),yee=ue([w8,rj,ys,If,j8,Df,Zw],u8),bee=ue([tj,rj],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),wee=(e,t,r,n,s,o,c)=>{if(!(!e||!r||!n||!s)&&mee(e,c)){var f=UV(e,t),d=y8(f,o,s,r,n),h=fee(t,s,d,e);return{activeIndex:String(d),activeCoordinate:h}}},jee=(e,t,r,n,s,o,c)=>{if(!(!e||!n||!s||!o||!r)){var f=iY(e,r);if(f){var d=FV(f,t),h=y8(d,c,o,n,s),m=hee(t,o,h,f);return{activeIndex:String(h),activeCoordinate:m}}}},Nee=(e,t,r,n,s,o,c,f)=>{if(!(!e||!t||!n||!s||!o))return t==="horizontal"||t==="vertical"?wee(e,t,n,s,o,c,f):jee(e,t,r,n,s,o,c)},kee=ue(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),See=ue(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(en)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:lQ}});function WE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function GE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(r),!0).forEach(function(n){_ee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _ee(e,t,r){return(t=Cee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cee(e){var t=Eee(e,"string");return typeof t=="symbol"?t:t+""}function Eee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Aee={},Tee={zIndexMap:Object.values(en).reduce((e,t)=>GE(GE({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),Aee)},Oee=new Set(Object.values(en));function Mee(e){return Oee.has(e)}var N8=kn({name:"zIndex",initialState:Tee,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Wt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!Mee(r)&&delete e.zIndexMap[r])},prepare:Wt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:s?void 0:n,panoramaElement:s?n:void 0}},prepare:Wt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Wt()}}}),{registerZIndexPortal:Pee,unregisterZIndexPortal:Ree,registerZIndexPortalElement:Iee,unregisterZIndexPortalElement:Lee}=N8.actions,Dee=N8.reducer;function ji(e){var{zIndex:t,children:r}=e,n=bq(),s=n&&t!==void 0&&t!==0,o=Fn(),c=Bt();y.useLayoutEffect(()=>s?(c(Pee({zIndex:t})),()=>{c(Ree({zIndex:t}))}):yf,[c,t,s]);var f=He(d=>kee(d,t,o));return s?f?qr.createPortal(r,f):null:r}function A1(){return A1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A1.apply(null,arguments)}function VE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function B0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VE(Object(r),!0).forEach(function(n){Bee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bee(e,t,r){return(t=$ee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ee(e){var t=zee(e,"string");return typeof t=="symbol"?t:t+""}function zee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uee(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return y.isValidElement(t)?y.cloneElement(t,n):y.createElement(r,n)}function Fee(e){var t,{coordinate:r,payload:n,index:s,offset:o,tooltipAxisBandSize:c,layout:f,cursor:d,tooltipEventType:h,chartName:m}=e,p=r,x=n,w=s;if(!d||!p||m!=="ScatterChart"&&h!=="axis")return null;var j,N,S;if(m==="ScatterChart")j=p,N=yK,S=en.cursorLine;else if(m==="BarChart")j=bK(f,p,o,c),N=vM,S=en.cursorRectangle;else if(f==="radial"&&tO(p)){var{cx:C,cy:A,radius:E,startAngle:z,endAngle:P}=bM(p);j={cx:C,cy:A,startAngle:z,endAngle:P,innerRadius:E,outerRadius:E},N=jM,S=en.cursorLine}else j={points:cY(f,p,o)},N=V2,S=en.cursorLine;var B=typeof d=="object"&&"className"in d?d.className:void 0,T=B0(B0(B0(B0({stroke:"#ccc",pointerEvents:"none"},o),j),zd(d)),{},{payload:x,payloadIndex:w,className:_t("recharts-tooltip-cursor",B)});return y.createElement(ji,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},y.createElement(Uee,{cursor:d,cursorComp:N,cursorProps:T}))}function Hee(e){var t=lee(),r=vq(),n=Sf(),s=gee();return t==null||r==null||n==null||s==null?null:y.createElement(Fee,A1({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var k8=y.createContext(null),Wee=()=>y.useContext(k8),Zy={exports:{}},qE;function Gee(){return qE||(qE=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,h,m){this.fn=d,this.context=h,this.once=m||!1}function o(d,h,m,p,x){if(typeof m!="function")throw new TypeError("The listener must be a function");var w=new s(m,p||d,x),j=r?r+h:h;return d._events[j]?d._events[j].fn?d._events[j]=[d._events[j],w]:d._events[j].push(w):(d._events[j]=w,d._eventsCount++),d}function c(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function f(){this._events=new n,this._eventsCount=0}f.prototype.eventNames=function(){var h=[],m,p;if(this._eventsCount===0)return h;for(p in m=this._events)t.call(m,p)&&h.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},f.prototype.listeners=function(h){var m=r?r+h:h,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var x=0,w=p.length,j=new Array(w);x<w;x++)j[x]=p[x].fn;return j},f.prototype.listenerCount=function(h){var m=r?r+h:h,p=this._events[m];return p?p.fn?1:p.length:0},f.prototype.emit=function(h,m,p,x,w,j){var N=r?r+h:h;if(!this._events[N])return!1;var S=this._events[N],C=arguments.length,A,E;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),C){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,m),!0;case 3:return S.fn.call(S.context,m,p),!0;case 4:return S.fn.call(S.context,m,p,x),!0;case 5:return S.fn.call(S.context,m,p,x,w),!0;case 6:return S.fn.call(S.context,m,p,x,w,j),!0}for(E=1,A=new Array(C-1);E<C;E++)A[E-1]=arguments[E];S.fn.apply(S.context,A)}else{var z=S.length,P;for(E=0;E<z;E++)switch(S[E].once&&this.removeListener(h,S[E].fn,void 0,!0),C){case 1:S[E].fn.call(S[E].context);break;case 2:S[E].fn.call(S[E].context,m);break;case 3:S[E].fn.call(S[E].context,m,p);break;case 4:S[E].fn.call(S[E].context,m,p,x);break;default:if(!A)for(P=1,A=new Array(C-1);P<C;P++)A[P-1]=arguments[P];S[E].fn.apply(S[E].context,A)}}return!0},f.prototype.on=function(h,m,p){return o(this,h,m,p,!1)},f.prototype.once=function(h,m,p){return o(this,h,m,p,!0)},f.prototype.removeListener=function(h,m,p,x){var w=r?r+h:h;if(!this._events[w])return this;if(!m)return c(this,w),this;var j=this._events[w];if(j.fn)j.fn===m&&(!x||j.once)&&(!p||j.context===p)&&c(this,w);else{for(var N=0,S=[],C=j.length;N<C;N++)(j[N].fn!==m||x&&!j[N].once||p&&j[N].context!==p)&&S.push(j[N]);S.length?this._events[w]=S.length===1?S[0]:S:c(this,w)}return this},f.prototype.removeAllListeners=function(h){var m;return h?(m=r?r+h:h,this._events[m]&&c(this,m)):(this._events=new n,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=r,f.EventEmitter=f,e.exports=f})(Zy)),Zy.exports}var Vee=Gee();const qee=zn(Vee);var ef=new qee,T1="recharts.syncEvent.tooltip",KE="recharts.syncEvent.brush";function S8(e,t){if(t){var r=Number.parseInt(t,10);if(!gi(r))return e?.[r]}}var Kee={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},_8=kn({name:"options",initialState:Kee,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Yee=_8.reducer,{createEventEmitter:Xee}=_8.actions;function Jee(e){return e.tooltip.syncInteraction}var Qee={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},C8=kn({name:"chartData",initialState:Qee,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:YE,setDataStartEndIndexes:Zee,setComputedData:Gce}=C8.actions,ete=C8.reducer,tte=["x","y"];function XE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XE(Object(r),!0).forEach(function(n){rte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rte(e,t,r){return(t=nte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nte(e){var t=ate(e,"string");return typeof t=="symbol"?t:t+""}function ate(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ite(e,t){if(e==null)return{};var r,n,s=ste(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ste(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ote(){var e=He(yw),t=He(bw),r=Bt(),n=He(jP),s=He(js),o=Sf(),c=Dg(),f=He(d=>d.rootProps.className);y.useEffect(()=>{if(e==null)return yf;var d=(h,m,p)=>{if(t!==p&&e===h){if(n==="index"){var x;if(c&&m!==null&&m!==void 0&&(x=m.payload)!==null&&x!==void 0&&x.coordinate&&m.payload.sourceViewBox){var w=m.payload.coordinate,{x:j,y:N}=w,S=ite(w,tte),{x:C,y:A,width:E,height:z}=m.payload.sourceViewBox,P=Nc(Nc({},S),{},{x:c.x+(E?(j-C)/E:0)*c.width,y:c.y+(z?(N-A)/z:0)*c.height});r(Nc(Nc({},m),{},{payload:Nc(Nc({},m.payload),{},{coordinate:P})}))}else r(m);return}if(s!=null){var B;if(typeof n=="function"){var T={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},R=n(s,T);B=s[R]}else n==="value"&&(B=s.find(V=>String(V.value)===m.payload.label));var{coordinate:$}=m.payload;if(B==null||m.payload.active===!1||$==null||c==null){r(C1({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:I,y:O}=$,U=Math.min(I,c.x+c.width),D=Math.min(O,c.y+c.height),q={x:o==="horizontal"?B.coordinate:U,y:o==="horizontal"?D:B.coordinate},Z=C1({active:m.payload.active,coordinate:q,dataKey:m.payload.dataKey,index:String(B.index),label:m.payload.label,sourceViewBox:m.payload.sourceViewBox,graphicalItemId:m.payload.graphicalItemId});r(Z)}}};return ef.on(T1,d),()=>{ef.off(T1,d)}},[f,r,t,e,n,s,o,c])}function lte(){var e=He(yw),t=He(bw),r=Bt();y.useEffect(()=>{if(e==null)return yf;var n=(s,o,c)=>{t!==c&&e===s&&r(Zee(o))};return ef.on(KE,n),()=>{ef.off(KE,n)}},[r,t,e])}function cte(){var e=Bt();y.useEffect(()=>{e(Xee())},[e]),ote(),lte()}function ute(e,t,r,n,s,o){var c=He(w=>xee(w,e,t)),f=He(bw),d=He(yw),h=He(jP),m=He(Jee),p=m?.active,x=Dg();y.useEffect(()=>{if(!p&&d!=null&&f!=null){var w=C1({active:o,coordinate:r,dataKey:c,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:x,graphicalItemId:void 0});ef.emit(T1,d,w,f)}},[p,r,c,s,n,f,d,h,o,x])}function JE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(r),!0).forEach(function(n){dte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dte(e,t,r){return(t=fte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fte(e){var t=hte(e,"string");return typeof t=="symbol"?t:t+""}function hte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mte(e){return e.dataKey}function gte(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(Qq,t)}var ZE=[],pte={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function e3(e){var t,r,n=Kr(e,pte),{active:s,allowEscapeViewBox:o,animationDuration:c,animationEasing:f,content:d,filterNull:h,isAnimationActive:m,offset:p,payloadUniqBy:x,position:w,reverseDirection:j,useTranslate3d:N,wrapperStyle:S,cursor:C,shared:A,trigger:E,defaultIndex:z,portal:P,axisId:B}=n,T=Bt(),R=typeof z=="number"?String(z):z;y.useEffect(()=>{T(fZ({shared:A,trigger:E,axisId:B,active:s,defaultIndex:R}))},[T,A,E,B,s,R]);var $=Dg(),I=hM(),O=sZ(A),{activeIndex:U,isActive:D}=(t=He(be=>bee(be,O,E,R)))!==null&&t!==void 0?t:{},q=He(be=>yee(be,O,E,R)),Z=He(be=>j8(be,O,E,R)),V=He(be=>vee(be,O,E,R)),X=q,re=Wee(),fe=(r=s??D)!==null&&r!==void 0?r:!1,[Y,H]=pO([X,fe]),G=O==="axis"?Z:void 0;ute(O,E,V,G,U,fe);var ee=P??re;if(ee==null||$==null||O==null)return null;var Q=X??ZE;fe||(Q=ZE),h&&Q.length&&(Q=dO(Q.filter(be=>be.value!=null&&(be.hide!==!0||n.includeHidden)),x,mte));var ae=Q.length>0,_e=y.createElement(iK,{allowEscapeViewBox:o,animationDuration:c,animationEasing:f,isAnimationActive:m,active:fe,coordinate:V,hasPayload:ae,offset:p,position:w,reverseDirection:j,useTranslate3d:N,viewBox:$,wrapperStyle:S,lastBoundingBox:Y,innerRef:H,hasPortalFromProps:!!P},gte(d,QE(QE({},n),{},{payload:Q,label:G,active:fe,activeIndex:U,coordinate:V,accessibilityLayer:I})));return y.createElement(y.Fragment,null,qr.createPortal(_e,ee),fe&&y.createElement(Hee,{cursor:C,tooltipEventType:O,coordinate:V,payload:Q,index:U}))}var Kc=e=>null;Kc.displayName="Cell";function xte(e,t,r){return(t=vte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vte(e){var t=yte(e,"string");return typeof t=="symbol"?t:t+""}function yte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class bte{constructor(t){xte(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function t3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wte(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t3(Object(r),!0).forEach(function(n){jte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jte(e,t,r){return(t=Nte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nte(e){var t=kte(e,"string");return typeof t=="symbol"?t:t+""}function kte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ste={cacheSize:2e3,enableCache:!0},E8=wte({},Ste),r3=new bte(E8.cacheSize),_te={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},n3="recharts_measurement_span";function Cte(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",o=t.fontStyle||"",c=t.letterSpacing||"",f=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(o,"|").concat(c,"|").concat(f)}var a3=(e,t)=>{try{var r=document.getElementById(n3);r||(r=document.createElement("span"),r.setAttribute("id",n3),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,_te,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Od=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Fg.isSsr)return{width:0,height:0};if(!E8.enableCache)return a3(t,r);var n=Cte(t,r),s=r3.get(n);if(s)return s;var o=a3(t,r);return r3.set(n,o),o},A8;function Ete(e,t,r){return(t=Ate(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ate(e){var t=Tte(e,"string");return typeof t=="symbol"?t:t+""}function Tte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,s3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ote=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Mte=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Pte={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Rte=["cm","mm","pt","pc","in","Q","px"];function Ite(e){return Rte.includes(e)}var Tc="NaN";function Lte(e,t){return e*Pte[t]}class Hr{static parse(t){var r,[,n,s]=(r=Mte.exec(t))!==null&&r!==void 0?r:[];return n==null?Hr.NaN:new Hr(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,gi(t)&&(this.unit=""),r!==""&&!Ote.test(r)&&(this.num=NaN,this.unit=""),Ite(r)&&(this.num=Lte(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Hr(NaN,""):new Hr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Hr(NaN,""):new Hr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Hr(NaN,""):new Hr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Hr(NaN,""):new Hr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return gi(this.num)}}A8=Hr;Ete(Hr,"NaN",new A8(NaN,""));function T8(e){if(e==null||e.includes(Tc))return Tc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,o]=(r=i3.exec(t))!==null&&r!==void 0?r:[],c=Hr.parse(n??""),f=Hr.parse(o??""),d=s==="*"?c.multiply(f):c.divide(f);if(d.isNaN())return Tc;t=t.replace(i3,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,m,p,x]=(h=s3.exec(t))!==null&&h!==void 0?h:[],w=Hr.parse(m??""),j=Hr.parse(x??""),N=p==="+"?w.add(j):w.subtract(j);if(N.isNaN())return Tc;t=t.replace(s3,N.toString())}return t}var o3=/\(([^()]*)\)/;function Dte(e){for(var t=e,r;(r=o3.exec(t))!=null;){var[,n]=r;t=t.replace(o3,T8(n))}return t}function Bte(e){var t=e.replace(/\s+/g,"");return t=Dte(t),t=T8(t),t}function $te(e){try{return Bte(e)}catch{return Tc}}function eb(e){var t=$te(e.slice(5,-1));return t===Tc?"":t}var zte=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Ute=["dx","dy","angle","className","breakAll"];function O1(){return O1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O1.apply(null,arguments)}function l3(e,t){if(e==null)return{};var r,n,s=Fte(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Fte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var O8=/[ \f\n\r\t\v\u2028\u2029]+/,M8=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Ir(t)||(r?s=t.toString().split(""):s=t.toString().split(O8));var o=s.map(f=>({word:f,width:Od(f,n).width})),c=r?0:Od("",n).width;return{wordsWithComputedWidth:o,spaceWidth:c}}catch{return null}};function Hte(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var P8=(e,t,r,n)=>e.reduce((s,o)=>{var{word:c,width:f}=o,d=s[s.length-1];if(d&&f!=null&&(t==null||n||d.width+f+r<Number(t)))d.words.push(c),d.width+=f+r;else{var h={words:[c],width:f};s.push(h)}return s},[]),R8=e=>e.reduce((t,r)=>t.width>r.width?t:r),Wte="",c3=(e,t,r,n,s,o,c,f)=>{var d=e.slice(0,t),h=M8({breakAll:r,style:n,children:d+Wte});if(!h)return[!1,[]];var m=P8(h.wordsWithComputedWidth,o,c,f),p=m.length>s||R8(m).width>Number(o);return[p,m]},Gte=(e,t,r,n,s)=>{var{maxLines:o,children:c,style:f,breakAll:d}=e,h=Ge(o),m=String(c),p=P8(t,n,r,s);if(!h||s)return p;var x=p.length>o||R8(p).width>Number(n);if(!x)return p;for(var w=0,j=m.length-1,N=0,S;w<=j&&N<=m.length-1;){var C=Math.floor((w+j)/2),A=C-1,[E,z]=c3(m,A,d,f,o,n,r,s),[P]=c3(m,C,d,f,o,n,r,s);if(!E&&!P&&(w=C+1),E&&P&&(j=C-1),!E&&P){S=z;break}N++}return S||p},u3=e=>{var t=Ir(e)?[]:e.toString().split(O8);return[{words:t,width:void 0}]},Vte=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:o,maxLines:c}=e;if((t||r)&&!Fg.isSsr){var f,d,h=M8({breakAll:o,children:n,style:s});if(h){var{wordsWithComputedWidth:m,spaceWidth:p}=h;f=m,d=p}else return u3(n);return Gte({breakAll:o,children:n,maxLines:c,style:s},f,d,t,!!r)}return u3(n)},I8="#808080",qte={angle:0,breakAll:!1,capHeight:"0.71em",fill:I8,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},lp=y.forwardRef((e,t)=>{var r=Kr(e,qte),{x:n,y:s,lineHeight:o,capHeight:c,fill:f,scaleToFit:d,textAnchor:h,verticalAnchor:m}=r,p=l3(r,zte),x=y.useMemo(()=>Vte({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:w,dy:j,angle:N,className:S,breakAll:C}=p,A=l3(p,Ute);if(!pi(n)||!pi(s)||x.length===0)return null;var E=Number(n)+(Ge(w)?w:0),z=Number(s)+(Ge(j)?j:0);if(!Yt(E)||!Yt(z))return null;var P;switch(m){case"start":P=eb("calc(".concat(c,")"));break;case"middle":P=eb("calc(".concat((x.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:P=eb("calc(".concat(x.length-1," * -").concat(o,")"));break}var B=[];if(d){var T=x[0].width,{width:R}=p;B.push("scale(".concat(Ge(R)&&Ge(T)?R/T:1,")"))}return N&&B.push("rotate(".concat(N,", ").concat(E,", ").concat(z,")")),B.length&&(A.transform=B.join(" ")),y.createElement("text",O1({},oa(A),{ref:t,x:E,y:z,className:_t("recharts-text",S),textAnchor:h,fill:f.includes("url")?I8:f}),x.map(($,I)=>{var O=$.words.join(C?"":" ");return y.createElement("tspan",{x:E,dy:I===0?P:o,key:"".concat(O,"-").concat(I)},O)}))});lp.displayName="Text";var Kte=["labelRef"],Yte=["content"];function d3(e,t){if(e==null)return{};var r,n,s=Xte(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Xte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function f3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f3(Object(r),!0).forEach(function(n){Jte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jte(e,t,r){return(t=Qte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qte(e){var t=Zte(e,"string");return typeof t=="symbol"?t:t+""}function Zte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ki(){return Ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ki.apply(null,arguments)}var L8=y.createContext(null),ere=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:o,height:c,children:f}=e,d=y.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:o,height:c}),[t,r,n,s,o,c]);return y.createElement(L8.Provider,{value:d},f)},D8=()=>{var e=y.useContext(L8),t=Dg();return e||ZO(t)},tre=y.createContext(null),rre=()=>{var e=y.useContext(tre),t=He(CP);return e||t},nre=e=>{var{value:t,formatter:r}=e,n=Ir(e.children)?t:e.children;return typeof r=="function"?r(n):n},nj=e=>e!=null&&typeof e=="function",are=(e,t)=>{var r=Vr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},ire=(e,t,r,n,s)=>{var{offset:o,className:c}=e,{cx:f,cy:d,innerRadius:h,outerRadius:m,startAngle:p,endAngle:x,clockWise:w}=s,j=(h+m)/2,N=are(p,x),S=N>=0?1:-1,C,A;switch(t){case"insideStart":C=p+S*o,A=w;break;case"insideEnd":C=x-S*o,A=!w;break;case"end":C=x+S*o,A=w;break;default:throw new Error("Unsupported position ".concat(t))}A=N<=0?A:!A;var E=yr(f,d,j,C),z=yr(f,d,j,C+(A?1:-1)*359),P="M".concat(E.x,",").concat(E.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(A?0:1,`,
    `).concat(z.x,",").concat(z.y),B=Ir(e.id)?Ud("recharts-radial-line-"):e.id;return y.createElement("text",Ki({},n,{dominantBaseline:"central",className:_t("recharts-radial-bar-label",c)}),y.createElement("defs",null,y.createElement("path",{id:B,d:P})),y.createElement("textPath",{xlinkHref:"#".concat(B)},r))},sre=(e,t,r)=>{var{cx:n,cy:s,innerRadius:o,outerRadius:c,startAngle:f,endAngle:d}=e,h=(f+d)/2;if(r==="outside"){var{x:m,y:p}=yr(n,s,c+t,h);return{x:m,y:p,textAnchor:m>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var x=(o+c)/2,{x:w,y:j}=yr(n,s,x,h);return{x:w,y:j,textAnchor:"middle",verticalAnchor:"middle"}},M1=e=>"cx"in e&&Ge(e.cx),ore=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,o;r!=null&&!M1(r)&&(o=r);var{x:c,y:f,upperWidth:d,lowerWidth:h,height:m}=t,p=c,x=c+(d-h)/2,w=(p+x)/2,j=(d+h)/2,N=p+d/2,S=m>=0?1:-1,C=S*n,A=S>0?"end":"start",E=S>0?"start":"end",z=d>=0?1:-1,P=z*n,B=z>0?"end":"start",T=z>0?"start":"end";if(s==="top"){var R={x:p+d/2,y:f-C,textAnchor:"middle",verticalAnchor:A};return lr(lr({},R),o?{height:Math.max(f-o.y,0),width:d}:{})}if(s==="bottom"){var $={x:x+h/2,y:f+m+C,textAnchor:"middle",verticalAnchor:E};return lr(lr({},$),o?{height:Math.max(o.y+o.height-(f+m),0),width:h}:{})}if(s==="left"){var I={x:w-P,y:f+m/2,textAnchor:B,verticalAnchor:"middle"};return lr(lr({},I),o?{width:Math.max(I.x-o.x,0),height:m}:{})}if(s==="right"){var O={x:w+j+P,y:f+m/2,textAnchor:T,verticalAnchor:"middle"};return lr(lr({},O),o?{width:Math.max(o.x+o.width-O.x,0),height:m}:{})}var U=o?{width:j,height:m}:{};return s==="insideLeft"?lr({x:w+P,y:f+m/2,textAnchor:T,verticalAnchor:"middle"},U):s==="insideRight"?lr({x:w+j-P,y:f+m/2,textAnchor:B,verticalAnchor:"middle"},U):s==="insideTop"?lr({x:p+d/2,y:f+C,textAnchor:"middle",verticalAnchor:E},U):s==="insideBottom"?lr({x:x+h/2,y:f+m-C,textAnchor:"middle",verticalAnchor:A},U):s==="insideTopLeft"?lr({x:p+P,y:f+C,textAnchor:T,verticalAnchor:E},U):s==="insideTopRight"?lr({x:p+d-P,y:f+C,textAnchor:B,verticalAnchor:E},U):s==="insideBottomLeft"?lr({x:x+P,y:f+m-C,textAnchor:T,verticalAnchor:A},U):s==="insideBottomRight"?lr({x:x+h-P,y:f+m-C,textAnchor:B,verticalAnchor:A},U):s&&typeof s=="object"&&(Ge(s.x)||ss(s.x))&&(Ge(s.y)||ss(s.y))?lr({x:c+tn(s.x,j),y:f+tn(s.y,m),textAnchor:"end",verticalAnchor:"end"},U):lr({x:N,y:f+m/2,textAnchor:"middle",verticalAnchor:"middle"},U)},lre={angle:0,offset:5,zIndex:en.label,position:"middle",textBreakAll:!1};function ro(e){var t=Kr(e,lre),{viewBox:r,position:n,value:s,children:o,content:c,className:f="",textBreakAll:d,labelRef:h}=t,m=rre(),p=D8(),x=n==="center"?p:m??p,w,j,N;if(r==null?w=x:M1(r)?w=r:w=ZO(r),!w||Ir(s)&&Ir(o)&&!y.isValidElement(c)&&typeof c!="function")return null;var S=lr(lr({},t),{},{viewBox:w});if(y.isValidElement(c)){var{labelRef:C}=S,A=d3(S,Kte);return y.cloneElement(c,A)}if(typeof c=="function"){var{content:E}=S,z=d3(S,Yte);if(j=y.createElement(c,z),y.isValidElement(j))return j}else j=nre(t);var P=oa(t);if(M1(w)){if(n==="insideStart"||n==="insideEnd"||n==="end")return ire(t,n,j,P,w);N=sre(w,t.offset,t.position)}else N=ore(t,w);return y.createElement(ji,{zIndex:t.zIndex},y.createElement(lp,Ki({ref:h,className:_t("recharts-label",f)},P,N,{textAnchor:Hte(P.textAnchor)?P.textAnchor:N.textAnchor,breakAll:d}),j))}ro.displayName="Label";var cre=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(ro,Ki({key:"label-implicit"},n)):pi(e)?y.createElement(ro,Ki({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===ro?y.cloneElement(e,lr({key:"label-implicit"},n)):y.createElement(ro,Ki({key:"label-implicit",content:e},n)):nj(e)?y.createElement(ro,Ki({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(ro,Ki({},e,{key:"label-implicit"},n)):null};function ure(e){var{label:t,labelRef:r}=e,n=D8();return cre(t,n,r)||null}var tb={},rb={},h3;function dre(){return h3||(h3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(rb)),rb}var nb={},m3;function fre(){return m3||(m3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(nb)),nb}var g3;function hre(){return g3||(g3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dre(),r=fre(),n=M2();function s(o){if(n.isArrayLike(o))return t.last(r.toArray(o))}e.last=s})(tb)),tb}var ab,p3;function mre(){return p3||(p3=1,ab=hre().last),ab}var gre=mre();const pre=zn(gre);var xre=["valueAccessor"],vre=["dataKey","clockWise","id","textBreakAll","zIndex"];function ng(){return ng=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ng.apply(null,arguments)}function x3(e,t){if(e==null)return{};var r,n,s=yre(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bre=e=>Array.isArray(e.value)?pre(e.value):e.value,B8=y.createContext(void 0),wre=B8.Provider,$8=y.createContext(void 0),jre=$8.Provider;function Nre(){return y.useContext(B8)}function kre(){return y.useContext($8)}function sm(e){var{valueAccessor:t=bre}=e,r=x3(e,xre),{dataKey:n,clockWise:s,id:o,textBreakAll:c,zIndex:f}=r,d=x3(r,vre),h=Nre(),m=kre(),p=h||m;return!p||!p.length?null:y.createElement(ji,{zIndex:f??en.label},y.createElement(un,{className:"recharts-label-list"},p.map((x,w)=>{var j,N=Ir(n)?t(x,w):Ft(x&&x.payload,n),S=Ir(o)?{}:{id:"".concat(o,"-").concat(w)};return y.createElement(ro,ng({key:"label-".concat(w)},oa(x),d,S,{fill:(j=r.fill)!==null&&j!==void 0?j:x.fill,parentViewBox:x.parentViewBox,value:N,textBreakAll:c,viewBox:x.viewBox,index:w,zIndex:0}))})))}sm.displayName="LabelList";function z8(e){var{label:t}=e;return t?t===!0?y.createElement(sm,{key:"labelList-implicit"}):y.isValidElement(t)||nj(t)?y.createElement(sm,{key:"labelList-implicit",content:t}):typeof t=="object"?y.createElement(sm,ng({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var U8=e=>e.graphicalItems.polarItems,Sre=ue([Vt,Mf],_w),cp=ue([U8,Xt,Sre],Ew),_re=ue([cp],Aw),up=ue([_re,Jg],Tw),Cre=ue([up,Xt,cp],Mw);ue([up,Xt,cp],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(s=>{var o,c=Ft(n,(o=t.dataKey)!==null&&o!==void 0?o:s.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(n=>({value:Ft(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var v3=()=>{},Ere=ue([up,Xt,cp,ap,Vt],Lw),Are=ue([Xt,Rw,Iw,v3,Ere,v3,pt,Vt],Dw),F8=ue([Xt,pt,up,Cre,Of,Vt,Are],Bw),Tre=ue([F8,Xt,au],Uw);ue([Xt,F8,Tre,Vt],Hw);var Ore={radiusAxis:{},angleAxis:{}},H8=kn({name:"polarAxis",initialState:Ore,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Vce,removeRadiusAxis:qce,addAngleAxis:Kce,removeAngleAxis:Yce}=H8.actions,Mre=H8.reducer;function y3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function b3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y3(Object(r),!0).forEach(function(n){Pre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pre(e,t,r){return(t=Rre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rre(e){var t=Ire(e,"string");return typeof t=="symbol"?t:t+""}function Ire(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lre=(e,t)=>t,aj=ue([U8,Lre],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),Dre=[],ij=(e,t,r)=>r?.length===0?Dre:r,W8=ue([Jg,aj,ij],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var s;if(t?.data!=null&&t.data.length>0?s=t.data:s=n,(!s||!s.length)&&r!=null&&(s=r.map(o=>b3(b3({},t.presentationProps),o.props))),s!=null)return s}}),Bre=ue([W8,aj,ij],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,s)=>{var o,c=Ft(n,t.nameKey,t.name),f;return r!=null&&(o=r[s])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?f=r[s].props.fill:typeof n=="object"&&n!=null&&"fill"in n?f=n.fill:f=t.fill,{value:Mg(c,t.dataKey),color:f,payload:n,type:t.legendType}})}),$re=ue([W8,aj,ij,Sr],(e,t,r,n)=>{if(!(t==null||e==null))return Hne({offset:n,pieSettings:t,displayedData:e,cells:r})}),ib={exports:{}},Tt={};var w3;function zre(){if(w3)return Tt;w3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),w=Symbol.for("react.client.reference");function j(N){if(typeof N=="object"&&N!==null){var S=N.$$typeof;switch(S){case e:switch(N=N.type,N){case r:case s:case n:case d:case h:case x:return N;default:switch(N=N&&N.$$typeof,N){case c:case f:case p:case m:return N;case o:return N;default:return S}}case t:return S}}}return Tt.ContextConsumer=o,Tt.ContextProvider=c,Tt.Element=e,Tt.ForwardRef=f,Tt.Fragment=r,Tt.Lazy=p,Tt.Memo=m,Tt.Portal=t,Tt.Profiler=s,Tt.StrictMode=n,Tt.Suspense=d,Tt.SuspenseList=h,Tt.isContextConsumer=function(N){return j(N)===o},Tt.isContextProvider=function(N){return j(N)===c},Tt.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},Tt.isForwardRef=function(N){return j(N)===f},Tt.isFragment=function(N){return j(N)===r},Tt.isLazy=function(N){return j(N)===p},Tt.isMemo=function(N){return j(N)===m},Tt.isPortal=function(N){return j(N)===t},Tt.isProfiler=function(N){return j(N)===s},Tt.isStrictMode=function(N){return j(N)===n},Tt.isSuspense=function(N){return j(N)===d},Tt.isSuspenseList=function(N){return j(N)===h},Tt.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===r||N===s||N===n||N===d||N===h||typeof N=="object"&&N!==null&&(N.$$typeof===p||N.$$typeof===m||N.$$typeof===c||N.$$typeof===o||N.$$typeof===f||N.$$typeof===w||N.getModuleId!==void 0)},Tt.typeOf=j,Tt}var j3;function Ure(){return j3||(j3=1,ib.exports=zre()),ib.exports}var Fre=Ure(),N3=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",k3=null,sb=null,G8=e=>{if(e===k3&&Array.isArray(sb))return sb;var t=[];return y.Children.forEach(e,r=>{Ir(r)||(Fre.isFragment(r)?t=t.concat(G8(r.props.children)):t.push(r))}),sb=t,k3=e,t};function sj(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>N3(s)):n=[N3(t)],G8(e).forEach(s=>{var o=vl(s,"type.displayName")||vl(s,"type.name");o&&n.indexOf(o)!==-1&&r.push(s)}),r}var ob={},S3;function Hre(){return S3||(S3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(ob)),ob}var lb,_3;function Wre(){return _3||(_3=1,lb=Hre().isPlainObject),lb}var Gre=Wre();const Vre=zn(Gre);var C3,E3,A3,T3,O3;function M3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function P3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M3(Object(r),!0).forEach(function(n){qre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qre(e,t,r){return(t=Kre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kre(e){var t=Yre(e,"string");return typeof t=="symbol"?t:t+""}function Yre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ag(){return ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ag.apply(null,arguments)}function yd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var R3=(e,t,r,n,s)=>{var o=r-n,c;return c=rr(C3||(C3=yd(["M ",",",""])),e,t),c+=rr(E3||(E3=yd(["L ",",",""])),e+r,t),c+=rr(A3||(A3=yd(["L ",",",""])),e+r-o/2,t+s),c+=rr(T3||(T3=yd(["L ",",",""])),e+r-o/2-n,t+s),c+=rr(O3||(O3=yd(["L ",","," Z"])),e,t),c},Xre={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Jre=e=>{var t=Kr(e,Xre),{x:r,y:n,upperWidth:s,lowerWidth:o,height:c,className:f}=t,{animationEasing:d,animationDuration:h,animationBegin:m,isUpdateAnimationActive:p}=t,x=y.useRef(null),[w,j]=y.useState(-1),N=y.useRef(s),S=y.useRef(o),C=y.useRef(c),A=y.useRef(r),E=y.useRef(n),z=Wg(e,"trapezoid-");if(y.useEffect(()=>{if(x.current&&x.current.getTotalLength)try{var q=x.current.getTotalLength();q&&j(q)}catch{}},[]),r!==+r||n!==+n||s!==+s||o!==+o||c!==+c||s===0&&o===0||c===0)return null;var P=_t("recharts-trapezoid",f);if(!p)return y.createElement("g",null,y.createElement("path",ag({},oa(t),{className:P,d:R3(r,n,s,o,c)})));var B=N.current,T=S.current,R=C.current,$=A.current,I=E.current,O="0px ".concat(w===-1?1:w,"px"),U="".concat(w,"px 0px"),D=mM(["strokeDasharray"],h,d);return y.createElement(Hg,{animationId:z,key:z,canBegin:w>0,duration:h,easing:d,isActive:p,begin:m},q=>{var Z=Nr(B,s,q),V=Nr(T,o,q),X=Nr(R,c,q),re=Nr($,r,q),fe=Nr(I,n,q);x.current&&(N.current=Z,S.current=V,C.current=X,A.current=re,E.current=fe);var Y=q>0?{transition:D,strokeDasharray:U}:{strokeDasharray:O};return y.createElement("path",ag({},oa(t),{className:P,d:R3(re,fe,Z,V,X),ref:x,style:P3(P3({},Y),t.style)}))})},Qre=["option","shapeType","activeClassName"];function Zre(e,t){if(e==null)return{};var r,n,s=ene(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ene(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function I3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ig(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I3(Object(r),!0).forEach(function(n){tne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tne(e,t,r){return(t=rne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rne(e){var t=nne(e,"string");return typeof t=="symbol"?t:t+""}function nne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ane(e,t){return ig(ig({},t),e)}function ine(e,t){return e==="symbols"}function L3(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return y.createElement(vM,r);case"trapezoid":return y.createElement(Jre,r);case"sector":return y.createElement(jM,r);case"symbols":if(ine(t))return y.createElement(O2,r);break;case"curve":return y.createElement(V2,r);default:return null}}function sne(e){return y.isValidElement(e)?e.props:e}function V8(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,s=Zre(e,Qre),o;if(y.isValidElement(t))o=y.cloneElement(t,ig(ig({},s),sne(t)));else if(typeof t=="function")o=t(s,s.index);else if(Vre(t)&&typeof t!="boolean"){var c=ane(t,s);o=y.createElement(L3,{shapeType:r,elementProps:c})}else{var f=s;o=y.createElement(L3,{shapeType:r,elementProps:f})}return s.isActive?y.createElement(un,{className:n},o):o}var oj=(e,t,r)=>{var n=Bt();return(s,o)=>c=>{e?.(s,o,c),n(a8({activeIndex:String(o),activeDataKey:t,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:r}))}},lj=e=>{var t=Bt();return(r,n)=>s=>{e?.(r,n,s),t(hZ())}},cj=(e,t,r)=>{var n=Bt();return(s,o)=>c=>{e?.(s,o,c),n(mZ({activeIndex:String(o),activeDataKey:t,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:r}))}};function q8(e){var{tooltipEntrySettings:t}=e,r=Bt(),n=Fn(),s=y.useRef(null);return y.useLayoutEffect(()=>{n||(s.current===null?r(cZ(t)):s.current!==t&&r(uZ({prev:s.current,next:t})),s.current=t)},[t,r,n]),y.useLayoutEffect(()=>()=>{s.current&&(r(dZ(s.current)),s.current=null)},[r]),null}function one(e){var{legendPayload:t}=e,r=Bt(),n=Fn(),s=y.useRef(null);return y.useLayoutEffect(()=>{n||(s.current===null?r(cM(t)):s.current!==t&&r(uM({prev:s.current,next:t})),s.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{s.current&&(r(dM(s.current)),s.current=null)},[r]),null}function lne(e){var{legendPayload:t}=e,r=Bt(),n=He(pt),s=y.useRef(null);return y.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(s.current===null?r(cM(t)):s.current!==t&&r(uM({prev:s.current,next:t})),s.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{s.current&&(r(dM(s.current)),s.current=null)},[r]),null}var cb,cne=()=>{var[e]=y.useState(()=>Ud("uid-"));return e},une=(cb=DL.useId)!==null&&cb!==void 0?cb:cne;function dne(e,t){var r=une();return t||(e?"".concat(e,"-").concat(r):r)}var fne=y.createContext(void 0),K8=e=>{var{id:t,type:r,children:n}=e,s=dne("recharts-".concat(r),t);return y.createElement(fne.Provider,{value:s},n(s))},hne={cartesianItems:[],polarItems:[]},Y8=kn({name:"graphicalItems",initialState:hne,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Wt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Ra(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:Wt()},removeCartesianGraphicalItem:{reducer(e,t){var r=Ra(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Wt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Wt()},removePolarGraphicalItem:{reducer(e,t){var r=Ra(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Wt()}}}),{addCartesianGraphicalItem:mne,replaceCartesianGraphicalItem:gne,removeCartesianGraphicalItem:pne,addPolarGraphicalItem:xne,removePolarGraphicalItem:vne}=Y8.actions,yne=Y8.reducer,bne=e=>{var t=Bt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(mne(e)):r.current!==e&&t(gne({prev:r.current,next:e})),r.current=e},[t,e]),y.useLayoutEffect(()=>()=>{r.current&&(t(pne(r.current)),r.current=null)},[t]),null},wne=y.memo(bne);function jne(e){var t=Bt();return y.useLayoutEffect(()=>(t(xne(e)),()=>{t(vne(e))}),[t,e]),null}var Nne=["key"],kne=["onMouseEnter","onClick","onMouseLeave"],Sne=["id"],_ne=["id"];function D3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D3(Object(r),!0).forEach(function(n){Cne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cne(e,t,r){return(t=Ene(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ene(e){var t=Ane(e,"string");return typeof t=="symbol"?t:t+""}function Ane(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function po(){return po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},po.apply(null,arguments)}function dp(e,t){if(e==null)return{};var r,n,s=Tne(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Tne(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function One(e){var t=y.useMemo(()=>sj(e.children,Kc),[e.children]),r=He(n=>Bre(n,e.id,t));return r==null?null:y.createElement(lne,{legendPayload:r})}var Mne=y.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:s,strokeWidth:o,fill:c,name:f,hide:d,tooltipType:h,id:m}=e,p={dataDefinedOnItem:n.map(x=>x.tooltipPayload),positions:n.map(x=>x.tooltipPosition),settings:{stroke:s,strokeWidth:o,fill:c,dataKey:t,nameKey:r,name:Mg(f,t),hide:d,type:h,color:c,unit:"",graphicalItemId:m}};return y.createElement(q8,{tooltipEntrySettings:p})}),Pne=(e,t)=>e>t?"start":e<t?"end":"middle",Rne=(e,t,r)=>tn(typeof t=="function"?t(e):t,r,r*.8),Ine=(e,t,r)=>{var{top:n,left:s,width:o,height:c}=t,f=yM(o,c),d=s+tn(e.cx,o,o/2),h=n+tn(e.cy,c,c/2),m=tn(e.innerRadius,f,0),p=Rne(r,e.outerRadius,f),x=e.maxRadius||Math.sqrt(o*o+c*c)/2;return{cx:d,cy:h,innerRadius:m,outerRadius:p,maxRadius:x}},Lne=(e,t)=>{var r=Vr(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function Dne(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Bne=(e,t)=>{if(y.isValidElement(e))return y.cloneElement(e,t);if(typeof e=="function")return e(t);var r=_t("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,s=dp(t,Nne);return y.createElement(V2,po({},s,{type:"linear",className:r}))},$ne=(e,t,r)=>{if(y.isValidElement(e))return y.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),y.isValidElement(n)))return n;var s=_t("recharts-pie-label-text",Dne(e));return y.createElement(lp,po({},t,{alignmentBaseline:"middle",className:s}),n)};function zne(e){var{sectors:t,props:r,showLabels:n}=e,{label:s,labelLine:o,dataKey:c}=r;if(!n||!s||!t)return null;var f=mi(r),d=zd(s),h=zd(o),m=typeof s=="object"&&"offsetRadius"in s&&typeof s.offsetRadius=="number"&&s.offsetRadius||20,p=t.map((x,w)=>{var j=(x.startAngle+x.endAngle)/2,N=yr(x.cx,x.cy,x.outerRadius+m,j),S=nr(nr(nr(nr({},f),x),{},{stroke:"none"},d),{},{index:w,textAnchor:Pne(N.x,x.cx)},N),C=nr(nr(nr(nr({},f),x),{},{fill:"none",stroke:x.fill},h),{},{index:w,points:[yr(x.cx,x.cy,x.outerRadius,j),N],key:"line"});return y.createElement(ji,{zIndex:en.label,key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(w)},y.createElement(un,null,o&&Bne(o,C),$ne(s,S,Ft(x,c))))});return y.createElement(un,{className:"recharts-pie-labels"},p)}function Une(e){var{sectors:t,props:r,showLabels:n}=e,{label:s}=r;return typeof s=="object"&&s!=null&&"position"in s?y.createElement(z8,{label:s}):y.createElement(zne,{sectors:t,props:r,showLabels:n})}function Fne(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:s,shape:o,id:c}=e,f=He(Nl),d=He(Qw),h=He(ZZ),{onMouseEnter:m,onClick:p,onMouseLeave:x}=s,w=dp(s,kne),j=oj(m,s.dataKey,c),N=lj(x),S=cj(p,s.dataKey,c);return t==null||t.length===0?null:y.createElement(y.Fragment,null,t.map((C,A)=>{if(C?.startAngle===0&&C?.endAngle===0&&t.length!==1)return null;var E=h==null||h===c,z=String(A)===f&&(d==null||s.dataKey===d)&&E,P=f?n:null,B=r&&z?r:P,T=nr(nr({},C),{},{stroke:C.stroke,tabIndex:-1,[KO]:A,[YO]:c});return y.createElement(un,po({key:"sector-".concat(C?.startAngle,"-").concat(C?.endAngle,"-").concat(C.midAngle,"-").concat(A),tabIndex:-1,className:"recharts-pie-sector"},bf(w,C,A),{onMouseEnter:j(C,A),onMouseLeave:N(C,A),onClick:S(C,A)}),y.createElement(V8,po({option:o??B,index:A,shapeType:"sector",isActive:z},T)))}))}function Hne(e){var t,{pieSettings:r,displayedData:n,cells:s,offset:o}=e,{cornerRadius:c,startAngle:f,endAngle:d,dataKey:h,nameKey:m,tooltipType:p}=r,x=Math.abs(r.minAngle),w=Lne(f,d),j=Math.abs(w),N=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,S=n.filter(B=>Ft(B,h,0)!==0).length,C=(j>=360?S:S-1)*N,A=j-S*x-C,E=n.reduce((B,T)=>{var R=Ft(T,h,0);return B+(Ge(R)?R:0)},0),z;if(E>0){var P;z=n.map((B,T)=>{var R=Ft(B,h,0),$=Ft(B,m,T),I=Ine(r,o,B),O=(Ge(R)?R:0)/E,U,D=nr(nr({},B),s&&s[T]&&s[T].props);T?U=P.endAngle+Vr(w)*N*(R!==0?1:0):U=f;var q=U+Vr(w)*((R!==0?x:0)+O*A),Z=(U+q)/2,V=(I.innerRadius+I.outerRadius)/2,X=[{name:$,value:R,payload:D,dataKey:h,type:p,graphicalItemId:r.id}],re=yr(I.cx,I.cy,V,Z);return P=nr(nr(nr(nr({},r.presentationProps),{},{percent:O,cornerRadius:typeof c=="string"?parseFloat(c):c,name:$,tooltipPayload:X,midAngle:Z,middleRadius:V,tooltipPosition:re},D),I),{},{value:R,dataKey:h,startAngle:U,endAngle:q,payload:D,paddingAngle:Vr(w)*N}),P})}return z}function Wne(e){var{showLabels:t,sectors:r,children:n}=e,s=y.useMemo(()=>!t||!r?[]:r.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[r,t]);return y.createElement(jre,{value:t?s:void 0},n)}function Gne(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:s,isAnimationActive:o,animationBegin:c,animationDuration:f,animationEasing:d,activeShape:h,inactiveShape:m,onAnimationStart:p,onAnimationEnd:x}=t,w=Wg(t,"recharts-pie-"),j=r.current,[N,S]=y.useState(!1),C=y.useCallback(()=>{typeof x=="function"&&x(),S(!1)},[x]),A=y.useCallback(()=>{typeof p=="function"&&p(),S(!0)},[p]);return y.createElement(Wne,{showLabels:!N,sectors:s},y.createElement(Hg,{animationId:w,begin:c,duration:f,isActive:o,easing:d,onAnimationStart:A,onAnimationEnd:C,key:w},E=>{var z=[],P=s&&s[0],B=P?.startAngle;return s?.forEach((T,R)=>{var $=j&&j[R],I=R>0?vl(T,"paddingAngle",0):0;if($){var O=Nr($.endAngle-$.startAngle,T.endAngle-T.startAngle,E),U=nr(nr({},T),{},{startAngle:B+I,endAngle:B+O+I});z.push(U),B=U.endAngle}else{var{endAngle:D,startAngle:q}=T,Z=Nr(0,D-q,E),V=nr(nr({},T),{},{startAngle:B+I,endAngle:B+Z+I});z.push(V),B=V.endAngle}}),r.current=z,y.createElement(un,null,y.createElement(Fne,{sectors:z,activeShape:h,inactiveShape:m,allOtherPieProps:t,shape:t.shape,id:n}))}),y.createElement(Une,{showLabels:!N,sectors:s,props:t}),t.children)}var Vne={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:en.area};function qne(e){var{id:t}=e,r=dp(e,Sne),{hide:n,className:s,rootTabIndex:o}=e,c=y.useMemo(()=>sj(e.children,Kc),[e.children]),f=He(m=>$re(m,t,c)),d=y.useRef(null),h=_t("recharts-pie",s);return n||f==null?(d.current=null,y.createElement(un,{tabIndex:o,className:h})):y.createElement(ji,{zIndex:e.zIndex},y.createElement(Mne,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:f,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),y.createElement(un,{tabIndex:o,className:h},y.createElement(Gne,{props:nr(nr({},r),{},{sectors:f}),previousSectorsRef:d,id:t})))}function X8(e){var t=Kr(e,Vne),{id:r}=t,n=dp(t,_ne),s=mi(n);return y.createElement(K8,{id:r,type:"pie"},o=>y.createElement(y.Fragment,null,y.createElement(jne,{type:"pie",id:o,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:s,maxRadius:t.maxRadius}),y.createElement(One,po({},n,{id:o})),y.createElement(qne,po({},n,{id:o}))))}X8.displayName="Pie";function B3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B3(Object(r),!0).forEach(function(n){Kne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kne(e,t,r){return(t=Yne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yne(e){var t=Xne(e,"string");return typeof t=="symbol"?t:t+""}function Xne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J8=0,Jne={xAxis:{},yAxis:{},zAxis:{}},Q8=kn({name:"cartesianAxis",initialState:Jne,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Wt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Wt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Wt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Wt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Wt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Wt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Wt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Wt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Wt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var o=s.widthHistory||[];if(o.length===3&&o[0]===o[2]&&n===o[1]&&n!==s.width&&Math.abs(n-o[0])<=1)return;var c=[...o,n].slice(-3);e.yAxis[r]=$3($3({},e.yAxis[r]),{},{width:n,widthHistory:c})}}}}),{addXAxis:Qne,replaceXAxis:Zne,removeXAxis:eae,addYAxis:tae,replaceYAxis:rae,removeYAxis:nae,addZAxis:Xce,replaceZAxis:Jce,removeZAxis:Qce,updateYAxisWidth:aae}=Q8.actions,iae=Q8.reducer,sae=ue([Sr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),oae=ue([sae,ps,xs],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Z8=()=>He(oae),z3=(e,t,r)=>{var n=r??e;if(!Ir(n))return tn(n,t,0)},lae=(e,t,r)=>{var n={},s=e.filter(ep),o=e.filter(h=>h.stackId==null),c=s.reduce((h,m)=>(h[m.stackId]||(h[m.stackId]=[]),h[m.stackId].push(m),h),n),f=Object.entries(c).map(h=>{var[m,p]=h,x=p.map(j=>j.dataKey),w=z3(t,r,p[0].barSize);return{stackId:m,dataKeys:x,barSize:w}}),d=o.map(h=>{var m=[h.dataKey].filter(x=>x!=null),p=z3(t,r,h.barSize);return{stackId:void 0,dataKeys:m,barSize:p}});return[...f,...d]};function U3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U3(Object(r),!0).forEach(function(n){cae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cae(e,t,r){return(t=uae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uae(e){var t=dae(e,"string");return typeof t=="symbol"?t:t+""}function dae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fae(e,t,r,n,s){var o=n.length;if(!(o<1)){var c=tn(e,r,0,!0),f,d=[];if(Yt(n[0].barSize)){var h=!1,m=r/o,p=n.reduce((C,A)=>C+(A.barSize||0),0);p+=(o-1)*c,p>=r&&(p-=(o-1)*c,c=0),p>=r&&m>0&&(h=!0,m*=.9,p=o*m);var x=(r-p)/2>>0,w={offset:x-c,size:0};f=n.reduce((C,A)=>{var E,z={stackId:A.stackId,dataKeys:A.dataKeys,position:{offset:w.offset+w.size+c,size:h?m:(E=A.barSize)!==null&&E!==void 0?E:0}},P=[...C,z];return w=P[P.length-1].position,P},d)}else{var j=tn(t,r,0,!0);r-2*j-(o-1)*c<=0&&(c=0);var N=(r-2*j-(o-1)*c)/o;N>1&&(N>>=0);var S=Yt(s)?Math.min(N,s):N;f=n.reduce((C,A,E)=>[...C,{stackId:A.stackId,dataKeys:A.dataKeys,position:{offset:j+(N+c)*E+(N-S)/2,size:S}}],d)}return f}}var hae=(e,t,r,n,s,o,c)=>{var f=Ir(c)?t:c,d=fae(r,n,s!==o?s:o,e,f);return s!==o&&d!=null&&(d=d.map(h=>$0($0({},h),{},{position:$0($0({},h.position),{},{offset:h.position.offset-s/2})}))),d},mae=(e,t)=>{var r=kw(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:o}=s;if(o)return o.find(c=>c.key===r)}}}};function gae(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Yt(e.zIndex)?e.zIndex:t}var eR=e=>{var{chartData:t}=e,r=Bt(),n=Fn();return y.useEffect(()=>n?()=>{}:(r(YE(t)),()=>{r(YE(void 0))}),[t,r,n]),null},F3={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},tR=kn({name:"brush",initialState:F3,reducers:{setBrushSettings(e,t){return t.payload==null?F3:t.payload}}}),{setBrushSettings:Zce}=tR.actions,pae=tR.reducer;function xae(e,t,r){return(t=vae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vae(e){var t=yae(e,"string");return typeof t=="symbol"?t:t+""}function yae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class uj{static create(t){return new uj(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}default:return this.scale(t)}if(r){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+c}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}xae(uj,"EPS",1e-4);function bae(e){return(e%180+180)%180}var wae=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=bae(s),c=o*Math.PI/180,f=Math.atan(n/r),d=c>f&&c<Math.PI-f?n/Math.sin(c):r/Math.cos(c);return Math.abs(d)},jae={dots:[],areas:[],lines:[]},rR=kn({name:"referenceElements",initialState:jae,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Ra(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Ra(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Ra(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:eue,removeDot:tue,addArea:rue,removeArea:nue,addLine:aue,removeLine:iue}=rR.actions,Nae=rR.reducer,kae=y.createContext(void 0),Sae=e=>{var{children:t}=e,[r]=y.useState("".concat(Ud("recharts"),"-clip")),n=Z8();if(n==null)return null;var{x:s,y:o,width:c,height:f}=n;return y.createElement(kae.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:s,y:o,height:f,width:c}))),t)};function nR(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var s=e[n];s!==void 0&&r.push(s)}return r}function _ae(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return wae(n,r)}function Cae(e,t,r){var n=r==="width",{x:s,y:o,width:c,height:f}=e;return t===1?{start:n?s:o,end:n?s+c:o+f}:{start:n?s+c:o+f,end:n?s:o}}function tf(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var o=r();return e*(t-e*o/2-n)>=0&&e*(t+e*o/2-s)<=0}function Eae(e,t){return nR(e,t+1)}function Aae(e,t,r,n,s){for(var o=(n||[]).slice(),{start:c,end:f}=t,d=0,h=1,m=c,p=function(){var j=n?.[d];if(j===void 0)return{v:nR(n,h)};var N=d,S,C=()=>(S===void 0&&(S=r(j,N)),S),A=j.coordinate,E=d===0||tf(e,A,C,m,f);E||(d=0,m=c,h+=1),E&&(m=A+e*(C()/2+s),d+=h)},x;h<=o.length;)if(x=p(),x)return x.v;return[]}function Tae(e,t,r,n,s){var o=(n||[]).slice(),c=o.length;if(c===0)return[];for(var{start:f,end:d}=t,h=1;h<=c;h++){for(var m=(c-1)%h,p=f,x=!0,w=function(){var A=n[j],E=j,z,P=()=>(z===void 0&&(z=r(A,E)),z),B=A.coordinate,T=j===m||tf(e,B,P,p,d);if(!T)return x=!1,1;T&&(p=B+e*(P()/2+s))},j=m;j<c&&!w();j+=h);if(x){for(var N=[],S=m;S<c;S+=h)N.push(n[S]);return N}}return[]}function H3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H3(Object(r),!0).forEach(function(n){Oae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oae(e,t,r){return(t=Mae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mae(e){var t=Pae(e,"string");return typeof t=="symbol"?t:t+""}function Pae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rae(e,t,r,n,s){for(var o=(n||[]).slice(),c=o.length,{start:f}=t,{end:d}=t,h=function(x){var w=o[x],j,N=()=>(j===void 0&&(j=r(w,x)),j);if(x===c-1){var S=e*(w.coordinate+e*N()/2-d);o[x]=w=Zr(Zr({},w),{},{tickCoord:S>0?w.coordinate-S*e:w.coordinate})}else o[x]=w=Zr(Zr({},w),{},{tickCoord:w.coordinate});if(w.tickCoord!=null){var C=tf(e,w.tickCoord,N,f,d);C&&(d=w.tickCoord-e*(N()/2+s),o[x]=Zr(Zr({},w),{},{isShow:!0}))}},m=c-1;m>=0;m--)h(m);return o}function Iae(e,t,r,n,s,o){var c=(n||[]).slice(),f=c.length,{start:d,end:h}=t;if(o){var m=n[f-1],p=r(m,f-1),x=e*(m.coordinate+e*p/2-h);if(c[f-1]=m=Zr(Zr({},m),{},{tickCoord:x>0?m.coordinate-x*e:m.coordinate}),m.tickCoord!=null){var w=tf(e,m.tickCoord,()=>p,d,h);w&&(h=m.tickCoord-e*(p/2+s),c[f-1]=Zr(Zr({},m),{},{isShow:!0}))}}for(var j=o?f-1:f,N=function(A){var E=c[A],z,P=()=>(z===void 0&&(z=r(E,A)),z);if(A===0){var B=e*(E.coordinate-e*P()/2-d);c[A]=E=Zr(Zr({},E),{},{tickCoord:B<0?E.coordinate-B*e:E.coordinate})}else c[A]=E=Zr(Zr({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var T=tf(e,E.tickCoord,P,d,h);T&&(d=E.tickCoord+e*(P()/2+s),c[A]=Zr(Zr({},E),{},{isShow:!0}))}},S=0;S<j;S++)N(S);return c}function Lae(e,t,r){var{tick:n,ticks:s,viewBox:o,minTickGap:c,orientation:f,interval:d,tickFormatter:h,unit:m,angle:p}=e;if(!s||!s.length||!n)return[];if(Ge(d)||Fg.isSsr){var x;return(x=Eae(s,Ge(d)?d:0))!==null&&x!==void 0?x:[]}var w=[],j=f==="top"||f==="bottom"?"width":"height",N=m&&j==="width"?Od(m,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(E,z)=>{var P=typeof h=="function"?h(E.value,z):E.value;return j==="width"?_ae(Od(P,{fontSize:t,letterSpacing:r}),N,p):Od(P,{fontSize:t,letterSpacing:r})[j]},C=s.length>=2?Vr(s[1].coordinate-s[0].coordinate):1,A=Cae(o,C,j);return d==="equidistantPreserveStart"?Aae(C,A,S,s,c):d==="equidistantPreserveEnd"?Tae(C,A,S,s,c):(d==="preserveStart"||d==="preserveStartEnd"?w=Iae(C,A,S,s,c,d==="preserveStartEnd"):w=Rae(C,A,S,s,c),w.filter(E=>E.isShow))}var Dae=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:o=0}=e,c=0;if(t){Array.from(t).forEach(m=>{if(m){var p=m.getBoundingClientRect();p.width>c&&(c=p.width)}});var f=r?r.getBoundingClientRect().width:0,d=s+o,h=c+d+f+(r?n:0);return Math.round(h)}return 0},Bae=["axisLine","width","height","className","hide","ticks","axisType"];function $ae(e,t){if(e==null)return{};var r,n,s=zae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function zae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function kl(){return kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kl.apply(null,arguments)}function W3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W3(Object(r),!0).forEach(function(n){Uae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uae(e,t,r){return(t=Fae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fae(e){var t=Hae(e,"string");return typeof t=="symbol"?t:t+""}function Hae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ul={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:en.axis};function Wae(e){var{x:t,y:r,width:n,height:s,orientation:o,mirror:c,axisLine:f,otherSvgProps:d}=e;if(!f)return null;var h=xr(xr(xr({},d),mi(f)),{},{fill:"none"});if(o==="top"||o==="bottom"){var m=+(o==="top"&&!c||o==="bottom"&&c);h=xr(xr({},h),{},{x1:t,y1:r+m*s,x2:t+n,y2:r+m*s})}else{var p=+(o==="left"&&!c||o==="right"&&c);h=xr(xr({},h),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return y.createElement("line",kl({},h,{className:_t("recharts-cartesian-axis-line",vl(f,"className"))}))}function Gae(e,t,r,n,s,o,c,f,d){var h,m,p,x,w,j,N=f?-1:1,S=e.tickSize||c,C=Ge(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":h=m=e.coordinate,x=r+ +!f*s,p=x-N*S,j=p-N*d,w=C;break;case"left":p=x=e.coordinate,m=t+ +!f*n,h=m-N*S,w=h-N*d,j=C;break;case"right":p=x=e.coordinate,m=t+ +f*n,h=m+N*S,w=h+N*d,j=C;break;default:h=m=e.coordinate,x=r+ +f*s,p=x+N*S,j=p+N*d,w=C;break}return{line:{x1:h,y1:p,x2:m,y2:x},tick:{x:w,y:j}}}function Vae(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function qae(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Kae(e){var{option:t,tickProps:r,value:n}=e,s,o=_t(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))s=y.cloneElement(t,xr(xr({},r),{},{className:o}));else if(typeof t=="function")s=t(xr(xr({},r),{},{className:o}));else{var c="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(c=_t(c,t?.className)),s=y.createElement(lp,kl({},r,{className:c}),n)}return s}var Yae=y.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:o,tickFormatter:c,unit:f,padding:d,tickTextProps:h,orientation:m,mirror:p,x,y:w,width:j,height:N,tickSize:S,tickMargin:C,fontSize:A,letterSpacing:E,getTicksConfig:z,events:P,axisType:B}=e,T=Lae(xr(xr({},z),{},{ticks:r}),A,E),R=Vae(m,p),$=qae(m,p),I=mi(z),O=zd(n),U={};typeof s=="object"&&(U=s);var D=xr(xr({},I),{},{fill:"none"},U),q=T.map(X=>xr({entry:X},Gae(X,x,w,j,N,m,S,p,C))),Z=q.map(X=>{var{entry:re,line:fe}=X;return y.createElement(un,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(re.value,"-").concat(re.coordinate,"-").concat(re.tickCoord)},s&&y.createElement("line",kl({},D,fe,{className:_t("recharts-cartesian-axis-tick-line",vl(s,"className"))})))}),V=q.map((X,re)=>{var{entry:fe,tick:Y}=X,H=xr(xr(xr(xr({textAnchor:R,verticalAnchor:$},I),{},{stroke:"none",fill:o},O),Y),{},{index:re,payload:fe,visibleTicksCount:T.length,tickFormatter:c,padding:d},h);return y.createElement(un,kl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(fe.value,"-").concat(fe.coordinate,"-").concat(fe.tickCoord)},bf(P,fe,re)),n&&y.createElement(Kae,{option:n,tickProps:H,value:"".concat(typeof c=="function"?c(fe.value,re):fe.value).concat(f||"")}))});return y.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(B,"-ticks")},V.length>0&&y.createElement(ji,{zIndex:en.label},y.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(B,"-tick-labels"),ref:t},V)),Z.length>0&&y.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(B,"-tick-lines")},Z))}),Xae=y.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:o,hide:c,ticks:f,axisType:d}=e,h=$ae(e,Bae),[m,p]=y.useState(""),[x,w]=y.useState(""),j=y.useRef(null);y.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return Dae({ticks:j.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=y.useCallback(S=>{if(S){var C=S.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=C;var A=C[0];if(A){var E=window.getComputedStyle(A),z=E.fontSize,P=E.letterSpacing;(z!==m||P!==x)&&(p(z),w(P))}}},[m,x]);return c||n!=null&&n<=0||s!=null&&s<=0?null:y.createElement(ji,{zIndex:e.zIndex},y.createElement(un,{className:_t("recharts-cartesian-axis",o)},y.createElement(Wae,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:mi(e)}),y.createElement(Yae,{ref:N,axisType:d,events:h,fontSize:m,getTicksConfig:e,height:e.height,letterSpacing:x,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:f,unit:e.unit,width:e.width,x:e.x,y:e.y}),y.createElement(ere,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},y.createElement(ure,{label:e.label,labelRef:e.labelRef}),e.children)))}),dj=y.forwardRef((e,t)=>{var r=Kr(e,ul);return y.createElement(Xae,kl({},r,{ref:t}))});dj.displayName="CartesianAxis";var Jae={},aR=kn({name:"errorBars",initialState:Jae,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(o=>o.dataKey===n.dataKey&&o.direction===n.direction?s:o))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:sue,replaceErrorBar:oue,removeErrorBar:lue}=aR.actions,Qae=aR.reducer,Zae=["children"];function eie(e,t){if(e==null)return{};var r,n,s=tie(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rie={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},nie=y.createContext(rie);function aie(e){var{children:t}=e,r=eie(e,Zae);return y.createElement(nie.Provider,{value:r},t)}function iR(e,t){var r,n,s=He(h=>bs(h,e)),o=He(h=>ws(h,t)),c=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:Mr.allowDataOverflow,f=(n=o?.allowDataOverflow)!==null&&n!==void 0?n:Pr.allowDataOverflow,d=c||f;return{needClip:d,needClipX:c,needClipY:f}}function iie(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=Z8(),{needClipX:o,needClipY:c,needClip:f}=iR(t,r);if(!f||!s)return null;var{x:d,y:h,width:m,height:p}=s;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:o?d:d-m/2,y:c?h:h-p/2,width:o?m:m*2,height:c?p:p*2}))}var ub={exports:{}},db={};var G3;function sie(){if(G3)return db;G3=1;var e=xo();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,o=e.useEffect,c=e.useMemo,f=e.useDebugValue;return db.useSyncExternalStoreWithSelector=function(d,h,m,p,x){var w=s(null);if(w.current===null){var j={hasValue:!1,value:null};w.current=j}else j=w.current;w=c(function(){function S(P){if(!C){if(C=!0,A=P,P=p(P),x!==void 0&&j.hasValue){var B=j.value;if(x(B,P))return E=B}return E=P}if(B=E,r(A,P))return B;var T=p(P);return x!==void 0&&x(B,T)?(A=P,B):(A=P,E=T)}var C=!1,A,E,z=m===void 0?null:m;return[function(){return S(h())},z===null?void 0:function(){return S(z())}]},[h,m,p,x]);var N=n(d,w[0],w[1]);return o(function(){j.hasValue=!0,j.value=N},[N]),f(N),N},db}var V3;function oie(){return V3||(V3=1,ub.exports=sie()),ub.exports}oie();function lie(e){e()}function cie(){let e=null,t=null;return{clear(){e=null,t=null},notify(){lie(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var q3={notify(){},get:()=>[]};function uie(e,t){let r,n=q3,s=0,o=!1;function c(N){m();const S=n.subscribe(N);let C=!1;return()=>{C||(C=!0,S(),p())}}function f(){n.notify()}function d(){j.onStateChange&&j.onStateChange()}function h(){return o}function m(){s++,r||(r=e.subscribe(d),n=cie())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=q3)}function x(){o||(o=!0,m())}function w(){o&&(o=!1,p())}const j={addNestedSub:c,notifyNestedSubs:f,handleChangeWrapper:d,isSubscribed:h,trySubscribe:x,tryUnsubscribe:w,getListeners:()=>n};return j}var die=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fie=die(),hie=()=>typeof navigator<"u"&&navigator.product==="ReactNative",mie=hie(),gie=()=>fie||mie?y.useLayoutEffect:y.useEffect,pie=gie();function K3(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function xie(e,t){if(K3(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!K3(e[r[s]],t[r[s]]))return!1;return!0}var vie=Symbol.for("react-redux-context"),yie=typeof globalThis<"u"?globalThis:{};function bie(){if(!y.createContext)return{};const e=yie[vie]??=new Map;let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var wie=bie();function jie(e){const{children:t,context:r,serverState:n,store:s}=e,o=y.useMemo(()=>{const d=uie(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),c=y.useMemo(()=>s.getState(),[s]);pie(()=>{const{subscription:d}=o;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),c!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[o,c]);const f=r||wie;return y.createElement(f.Provider,{value:o},t)}var Nie=jie,kie=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Sie(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function fj(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(kie.has(n)){if(e[n]==null&&t[n]==null)continue;if(!xie(e[n],t[n]))return!1}else if(!Sie(e[n],t[n]))return!1;return!0}function Ol(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(s=>s.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:J8}function Ml(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(s=>s.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:J8}var _ie="Invariant failed";function Cie(e,t){throw new Error(_ie)}function P1(){return P1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P1.apply(null,arguments)}function sg(e){return y.createElement(V8,P1({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Eie=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(Ge(t))return t;var o=Ge(n)||Ir(n);return o?t(n,s):(o||Cie(),r)}},Aie=(e,t,r)=>r,Tie=(e,t)=>t,zf=ue([Cw,Tie],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Oie=ue([zf],e=>e?.maxBarSize),Mie=(e,t,r,n)=>n,Pie=ue([pt,Cw,Ol,Ml,Aie],(e,t,r,n,s)=>t.filter(o=>e==="horizontal"?o.xAxisId===r:o.yAxisId===n).filter(o=>o.isPanorama===s).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),Rie=(e,t,r)=>{var n=pt(e),s=Ol(e,t),o=Ml(e,t);if(!(s==null||o==null))return n==="horizontal"?_1(e,"yAxis",o,r):_1(e,"xAxis",s,r)},Iie=(e,t)=>{var r=pt(e),n=Ol(e,t),s=Ml(e,t);if(!(n==null||s==null))return r==="horizontal"?DE(e,"xAxis",n):DE(e,"yAxis",s)},Lie=ue([Pie,rQ,Iie],lae),Die=(e,t,r)=>{var n,s,o=zf(e,t);if(o!=null){var c=Ol(e,t),f=Ml(e,t);if(!(c==null||f==null)){var d=pt(e),h=yP(e),{maxBarSize:m}=o,p=Ir(m)?h:m,x,w;return d==="horizontal"?(x=qc(e,"xAxis",c,r),w=Vc(e,"xAxis",c,r)):(x=qc(e,"yAxis",f,r),w=Vc(e,"yAxis",f,r)),(n=(s=Im(x,w,!0))!==null&&s!==void 0?s:p)!==null&&n!==void 0?n:0}}},sR=(e,t,r)=>{var n=pt(e),s=Ol(e,t),o=Ml(e,t);if(!(s==null||o==null)){var c,f;return n==="horizontal"?(c=qc(e,"xAxis",s,r),f=Vc(e,"xAxis",s,r)):(c=qc(e,"yAxis",o,r),f=Vc(e,"yAxis",o,r)),Im(c,f)}},Bie=ue([Lie,yP,tQ,bP,Die,sR,Oie],hae),$ie=(e,t,r)=>{var n=Ol(e,t);if(n!=null)return qc(e,"xAxis",n,r)},zie=(e,t,r)=>{var n=Ml(e,t);if(n!=null)return qc(e,"yAxis",n,r)},Uie=(e,t,r)=>{var n=Ol(e,t);if(n!=null)return Vc(e,"xAxis",n,r)},Fie=(e,t,r)=>{var n=Ml(e,t);if(n!=null)return Vc(e,"yAxis",n,r)},Hie=ue([Bie,zf],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),Wie=ue([Rie,zf],mae),Gie=ue([Sr,F2,$ie,zie,Uie,Fie,Hie,pt,HJ,sR,Wie,zf,Mie],(e,t,r,n,s,o,c,f,d,h,m,p,x)=>{var{chartData:w,dataStartIndex:j,dataEndIndex:N}=d;if(!(p==null||c==null||t==null||f!=="horizontal"&&f!=="vertical"||r==null||n==null||s==null||o==null||h==null)){var{data:S}=p,C;if(S!=null&&S.length>0?C=S:C=w?.slice(j,N+1),C!=null)return bse({layout:f,barSettings:p,pos:c,parentViewBox:t,bandSize:h,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:o,stackedData:m,displayedData:C,offset:e,cells:x,dataStartIndex:j})}}),Vie=["index"];function R1(){return R1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R1.apply(null,arguments)}function qie(e,t){if(e==null)return{};var r,n,s=Kie(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Kie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var oR=y.createContext(void 0),Yie=e=>{var t=y.useContext(oR);if(t!=null)return t.stackId;if(e!=null)return LV(e)},Xie=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),Jie=e=>{var t=y.useContext(oR);if(t!=null){var{stackId:r}=t;return"url(#".concat(Xie(r,e),")")}},Qie=e=>{var{index:t}=e,r=qie(e,Vie),n=Jie(t);return y.createElement(un,R1({className:"recharts-bar-stack-layer",clipPath:n},r))},Zie=["onMouseEnter","onMouseLeave","onClick"],ese=["value","background","tooltipPosition"],tse=["id"],rse=["onMouseEnter","onClick","onMouseLeave"];function fs(){return fs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fs.apply(null,arguments)}function Y3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function on(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y3(Object(r),!0).forEach(function(n){nse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nse(e,t,r){return(t=ase(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ase(e){var t=ise(e,"string");return typeof t=="symbol"?t:t+""}function ise(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function og(e,t){if(e==null)return{};var r,n,s=sse(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ose=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:o}=e;return[{inactive:o,dataKey:t,type:s,color:n,value:Mg(r,t),payload:e}]},lse=y.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:o,hide:c,unit:f,tooltipType:d,id:h}=e,m={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:Mg(o,t),hide:c,type:d,color:s,unit:f,graphicalItemId:h}};return y.createElement(q8,{tooltipEntrySettings:m})});function cse(e){var t=He(Nl),{data:r,dataKey:n,background:s,allOtherBarProps:o}=e,{onMouseEnter:c,onMouseLeave:f,onClick:d}=o,h=og(o,Zie),m=oj(c,n,o.id),p=lj(f),x=cj(d,n,o.id);if(!s||r==null)return null;var w=zd(s);return y.createElement(ji,{zIndex:gae(s,en.barBackground)},r.map((j,N)=>{var{value:S,background:C,tooltipPosition:A}=j,E=og(j,ese);if(!C)return null;var z=m(j,N),P=p(j,N),B=x(j,N),T=on(on(on(on(on({option:s,isActive:String(N)===t},E),{},{fill:"#eee"},C),w),bf(h,j,N)),{},{onMouseEnter:z,onMouseLeave:P,onClick:B,dataKey:n,index:N,className:"recharts-bar-background-rectangle"});return y.createElement(sg,fs({key:"background-bar-".concat(N)},T))}))}function use(e){var{showLabels:t,children:r,rects:n}=e,s=n?.map(o=>{var c={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return on(on({},c),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:c,fill:o.fill})});return y.createElement(wre,{value:t?s:void 0},r)}function dse(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:o,dataKey:c}=e,f=He(Nl),d=He(Qw),h=r&&String(o)===f&&(d==null||c===d),m=h?r:t;return h?y.createElement(ji,{zIndex:en.activeBar},y.createElement(sg,fs({},n,{name:String(n.name)},s,{isActive:h,option:m,index:o,dataKey:c}))):y.createElement(sg,fs({},n,{name:String(n.name)},s,{isActive:h,option:m,index:o,dataKey:c}))}function fse(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:o}=e;return y.createElement(sg,fs({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:o}))}function hse(e){var t,{data:r,props:n}=e,s=(t=mi(n))!==null&&t!==void 0?t:{},{id:o}=s,c=og(s,tse),{shape:f,dataKey:d,activeBar:h}=n,{onMouseEnter:m,onClick:p,onMouseLeave:x}=n,w=og(n,rse),j=oj(m,d,o),N=lj(x),S=cj(p,d,o);return r?y.createElement(y.Fragment,null,r.map((C,A)=>y.createElement(Qie,fs({index:A,key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(A),className:"recharts-bar-rectangle"},bf(w,C,A),{onMouseEnter:j(C,A),onMouseLeave:N(C,A),onClick:S(C,A)}),h?y.createElement(dse,{shape:f,activeBar:h,baseProps:c,entry:C,index:A,dataKey:d}):y.createElement(fse,{shape:f,baseProps:c,entry:C,index:A,dataKey:d})))):null}function mse(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:o,animationBegin:c,animationDuration:f,animationEasing:d,onAnimationEnd:h,onAnimationStart:m}=t,p=r.current,x=Wg(t,"recharts-bar-"),[w,j]=y.useState(!1),N=!w,S=y.useCallback(()=>{typeof h=="function"&&h(),j(!1)},[h]),C=y.useCallback(()=>{typeof m=="function"&&m(),j(!0)},[m]);return y.createElement(use,{showLabels:N,rects:n},y.createElement(Hg,{animationId:x,begin:c,duration:f,isActive:o,easing:d,onAnimationEnd:S,onAnimationStart:C,key:x},A=>{var E=A===1?n:n?.map((z,P)=>{var B=p&&p[P];if(B)return on(on({},z),{},{x:Nr(B.x,z.x,A),y:Nr(B.y,z.y,A),width:Nr(B.width,z.width,A),height:Nr(B.height,z.height,A)});if(s==="horizontal"){var T=Nr(0,z.height,A),R=Nr(z.stackedBarStart,z.y,A);return on(on({},z),{},{y:R,height:T})}var $=Nr(0,z.width,A),I=Nr(z.stackedBarStart,z.x,A);return on(on({},z),{},{width:$,x:I})});return A>0&&(r.current=E??null),E==null?null:y.createElement(un,null,y.createElement(hse,{props:t,data:E}))}),y.createElement(z8,{label:t.label}),t.children)}function gse(e){var t=y.useRef(null);return y.createElement(mse,{previousRectanglesRef:t,props:e})}var lR=0,pse=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ft(e,t)}};class xse extends y.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:o,yAxisId:c,needClip:f,background:d,id:h}=this.props;if(t||r==null)return null;var m=_t("recharts-bar",s),p=h;return y.createElement(un,{className:m,id:h},f&&y.createElement("defs",null,y.createElement(iie,{clipPathId:p,xAxisId:o,yAxisId:c})),y.createElement(un,{className:"recharts-bar-rectangles",clipPath:f?"url(#clipPath-".concat(p,")"):void 0},y.createElement(cse,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),y.createElement(gse,this.props)))}}var vse={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:lR,xAxisId:0,yAxisId:0,zIndex:en.bar};function yse(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:o,activeBar:c,animationBegin:f,animationDuration:d,animationEasing:h,isAnimationActive:m}=e,{needClip:p}=iR(t,r),x=Sf(),w=Fn(),j=sj(e.children,Kc),N=He(A=>Gie(A,e.id,w,j));if(x!=="vertical"&&x!=="horizontal")return null;var S,C=N?.[0];return C==null||C.height==null||C.width==null?S=0:S=x==="vertical"?C.height/2:C.width/2,y.createElement(aie,{xAxisId:t,yAxisId:r,data:N,dataPointFormatter:pse,errorBarOffset:S},y.createElement(xse,fs({},e,{layout:x,needClip:p,data:N,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:o,activeBar:c,animationBegin:f,animationDuration:d,animationEasing:h,isAnimationActive:m})))}function bse(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:o,xAxis:c,yAxis:f,xAxisTicks:d,yAxisTicks:h,stackedData:m,displayedData:p,offset:x,cells:w,parentViewBox:j,dataStartIndex:N}=e,S=t==="horizontal"?f:c,C=m?S.scale.domain():null,A=DV({numericAxis:S}),E=S.scale(A);return p.map((z,P)=>{var B,T,R,$,I,O;if(m){var U=m[P+N];if(U==null)return null;B=OV(U,C)}else B=Ft(z,r),Array.isArray(B)||(B=[A,B]);var D=Eie(n,lR)(B[1],P);if(t==="horizontal"){var q,[Z,V]=[f.scale(B[0]),f.scale(B[1])];T=$_({axis:c,ticks:d,bandSize:o,offset:s.offset,entry:z,index:P}),R=(q=V??Z)!==null&&q!==void 0?q:void 0,$=s.size;var X=Z-V;if(I=gi(X)?0:X,O={x:T,y:x.top,width:$,height:x.height},Math.abs(D)>0&&Math.abs(I)<Math.abs(D)){var re=Vr(I||D)*(Math.abs(D)-Math.abs(I));R-=re,I+=re}}else{var[fe,Y]=[c.scale(B[0]),c.scale(B[1])];if(T=fe,R=$_({axis:f,ticks:h,bandSize:o,offset:s.offset,entry:z,index:P}),$=Y-fe,I=s.size,O={x:x.left,y:R,width:x.width,height:I},Math.abs(D)>0&&Math.abs($)<Math.abs(D)){var H=Vr($||D)*(Math.abs(D)-Math.abs($));$+=H}}if(T==null||R==null||$==null||I==null)return null;var G=on(on({},z),{},{stackedBarStart:E,x:T,y:R,width:$,height:I,value:m?B:B[1],payload:z,background:O,tooltipPosition:{x:T+$/2,y:R+I/2},parentViewBox:j},w&&w[P]&&w[P].props);return G}).filter(Boolean)}function wse(e){var t=Kr(e,vse),r=Yie(t.stackId),n=Fn();return y.createElement(K8,{id:t.id,type:"bar"},s=>y.createElement(y.Fragment,null,y.createElement(one,{legendPayload:ose(t)}),y.createElement(lse,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),y.createElement(wne,{type:"bar",id:s,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),y.createElement(ji,{zIndex:t.zIndex},y.createElement(yse,fs({},t,{id:s})))))}var cR=y.memo(wse,fj);cR.displayName="Bar";var jse=["domain","range"],Nse=["domain","range"];function X3(e,t){if(e==null)return{};var r,n,s=kse(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function kse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function J3(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function uR(e,t){if(e===t)return!0;var{domain:r,range:n}=e,s=X3(e,jse),{domain:o,range:c}=t,f=X3(t,Nse);return!J3(r,o)||!J3(n,c)?!1:fj(s,f)}var Sse=["dangerouslySetInnerHTML","ticks","scale"],_se=["id","scale"];function I1(){return I1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I1.apply(null,arguments)}function Q3(e,t){if(e==null)return{};var r,n,s=Cse(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Cse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ese(e){var t=Bt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(Qne(e)):r.current!==e&&t(Zne({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(eae(r.current)),r.current=null)},[t]),null}var Ase=e=>{var{xAxisId:t,className:r}=e,n=He(F2),s=Fn(),o="xAxis",c=He(C=>QP(C,o,t,s)),f=He(C=>KP(C,t)),d=He(C=>ZQ(C,t)),h=He(C=>AP(C,t));if(f==null||d==null||h==null)return null;var{dangerouslySetInnerHTML:m,ticks:p,scale:x}=e,w=Q3(e,Sse),{id:j,scale:N}=h,S=Q3(h,_se);return y.createElement(dj,I1({},w,S,{x:d.x,y:d.y,width:f.width,height:f.height,className:_t("recharts-".concat(o," ").concat(o),r),viewBox:n,ticks:c,axisType:o}))},Tse={allowDataOverflow:Mr.allowDataOverflow,allowDecimals:Mr.allowDecimals,allowDuplicatedCategory:Mr.allowDuplicatedCategory,angle:Mr.angle,axisLine:ul.axisLine,height:Mr.height,hide:!1,includeHidden:Mr.includeHidden,interval:Mr.interval,minTickGap:Mr.minTickGap,mirror:Mr.mirror,orientation:Mr.orientation,padding:Mr.padding,reversed:Mr.reversed,scale:Mr.scale,tick:Mr.tick,tickCount:Mr.tickCount,tickLine:ul.tickLine,tickSize:ul.tickSize,type:Mr.type,xAxisId:0},Ose=e=>{var t=Kr(e,Tse);return y.createElement(y.Fragment,null,y.createElement(Ese,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),y.createElement(Ase,t))},dR=y.memo(Ose,uR);dR.displayName="XAxis";var Mse=["dangerouslySetInnerHTML","ticks","scale"],Pse=["id","scale"];function L1(){return L1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L1.apply(null,arguments)}function Z3(e,t){if(e==null)return{};var r,n,s=Rse(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Rse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ise(e){var t=Bt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(tae(e)):r.current!==e&&t(rae({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(nae(r.current)),r.current=null)},[t]),null}var Lse=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,o=y.useRef(null),c=y.useRef(null),f=He(F2),d=Fn(),h=Bt(),m="yAxis",p=He(B=>YP(B,t)),x=He(B=>tZ(B,t)),w=He(B=>QP(B,m,t,d)),j=He(B=>TP(B,t));if(y.useLayoutEffect(()=>{if(!(n!=="auto"||!p||nj(s)||y.isValidElement(s)||j==null)){var B=o.current;if(B){var T=B.getCalculatedWidth();Math.round(p.width)!==Math.round(T)&&h(aae({id:t,width:T}))}}},[w,p,h,s,t,n,j]),p==null||x==null||j==null)return null;var{dangerouslySetInnerHTML:N,ticks:S,scale:C}=e,A=Z3(e,Mse),{id:E,scale:z}=j,P=Z3(j,Pse);return y.createElement(dj,L1({},A,P,{ref:o,labelRef:c,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:p.width,height:p.height,className:_t("recharts-".concat(m," ").concat(m),r),viewBox:f,ticks:w,axisType:m}))},Dse={allowDataOverflow:Pr.allowDataOverflow,allowDecimals:Pr.allowDecimals,allowDuplicatedCategory:Pr.allowDuplicatedCategory,angle:Pr.angle,axisLine:ul.axisLine,hide:!1,includeHidden:Pr.includeHidden,interval:Pr.interval,minTickGap:Pr.minTickGap,mirror:Pr.mirror,orientation:Pr.orientation,padding:Pr.padding,reversed:Pr.reversed,scale:Pr.scale,tick:Pr.tick,tickCount:Pr.tickCount,tickLine:ul.tickLine,tickSize:ul.tickSize,type:Pr.type,width:Pr.width,yAxisId:0},Bse=e=>{var t=Kr(e,Dse);return y.createElement(y.Fragment,null,y.createElement(Ise,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),y.createElement(Lse,t))},fR=y.memo(Bse,uR);fR.displayName="YAxis";var $se=(e,t)=>t,hj=ue([$se,pt,CP,Cr,m8,js,pee,Sr],Nee),mj=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},hR=la("mouseClick"),mR=Nf();mR.startListening({actionCreator:hR,effect:(e,t)=>{var r=e.payload,n=hj(t.getState(),mj(r));n?.activeIndex!=null&&t.dispatch(gZ({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var D1=la("mouseMove"),gR=Nf(),z0=null;gR.startListening({actionCreator:D1,effect:(e,t)=>{var r=e.payload;z0!==null&&cancelAnimationFrame(z0);var n=mj(r);z0=requestAnimationFrame(()=>{var s=t.getState(),o=Vw(s,s.tooltip.settings.shared);if(o==="axis"){var c=hj(s,n);c?.activeIndex!=null?t.dispatch(s8({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):t.dispatch(i8())}z0=null})}});function zse(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var e6={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},pR=kn({name:"rootProps",initialState:e6,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:e6.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Use=pR.reducer,{updateOptions:Fse}=pR.actions,xR=kn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Hse}=xR.actions,Wse=xR.reducer,vR=la("keyDown"),yR=la("focus"),gj=Nf();gj.startListening({actionCreator:vR,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var c=qw(s,ou(r),If(r),Bf(r)),f=c==null?-1:Number(c);if(!(!Number.isFinite(f)||f<0)){var d=js(r);if(o==="Enter"){var h=rg(r,"axis","hover",String(s.index));t.dispatch(E1({active:!s.active,activeIndex:s.index,activeCoordinate:h}));return}var m=iZ(r),p=m==="left-to-right"?1:-1,x=o==="ArrowRight"?1:-1,w=f+x*p;if(!(d==null||w>=d.length||w<0)){var j=rg(r,"axis","hover",String(w));t.dispatch(E1({active:!0,activeIndex:w.toString(),activeCoordinate:j}))}}}}}});gj.startListening({actionCreator:yR,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var o="0",c=rg(r,"axis","hover",String(o));t.dispatch(E1({active:!0,activeIndex:o,activeCoordinate:c}))}}}});var na=la("externalEvent"),bR=Nf(),fb=new Map;bR.startListening({actionCreator:na,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var s=n.type,o=fb.get(s);o!==void 0&&cancelAnimationFrame(o);var c=requestAnimationFrame(()=>{try{var f=t.getState(),d={activeCoordinate:tee(f),activeDataKey:Qw(f),activeIndex:Nl(f),activeLabel:x8(f),activeTooltipIndex:Nl(f),isTooltipActive:ree(f)};r(d,n)}finally{fb.delete(s)}});fb.set(s,c)}}});var Gse=ue([iu],e=>e.tooltipItemPayloads),Vse=ue([Gse,Df,(e,t)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(f=>f.settings.graphicalItemId===n);if(s!=null){var{positions:o}=s;if(o!=null){var c=t(o,r);return c}}}),wR=la("touchMove"),jR=Nf();jR.startListening({actionCreator:wR,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=Vw(n,n.tooltip.settings.shared);if(s==="axis"){var o=r.touches[0];if(o==null)return;var c=hj(n,mj({clientX:o.clientX,clientY:o.clientY,currentTarget:r.currentTarget}));c?.activeIndex!=null&&t.dispatch(s8({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate}))}else if(s==="item"){var f,d=r.touches[0];if(document.elementFromPoint==null||d==null)return;var h=document.elementFromPoint(d.clientX,d.clientY);if(!h||!h.getAttribute)return;var m=h.getAttribute(KO),p=(f=h.getAttribute(YO))!==null&&f!==void 0?f:void 0,x=su(n).find(N=>N.id===p);if(m==null||x==null||p==null)return;var{dataKey:w}=x,j=Vse(n,m,p);t.dispatch(a8({activeDataKey:w,activeIndex:m,activeCoordinate:j,activeGraphicalItemId:p}))}}}});var qse=vO({brush:pae,cartesianAxis:iae,chartData:ete,errorBars:Qae,graphicalItems:yne,layout:SV,legend:Rq,options:Yee,polarAxis:Mre,polarOptions:Wse,referenceElements:Nae,rootProps:Use,tooltip:pZ,zIndex:Dee}),Kse=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return XG({reducer:qse,preloadedState:t,middleware:n=>{var s;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((s="es6")!==null&&s!==void 0?s:"")}).concat([mR.middleware,gR.middleware,gj.middleware,bR.middleware,jR.middleware])},enhancers:n=>{var s=n;return typeof n=="function"&&(s=n()),s.concat(PO({type:"raf"}))},devTools:{serialize:{replacer:zse},name:"recharts-".concat(r)}})};function NR(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Fn(),o=y.useRef(null);if(s)return r;o.current==null&&(o.current=Kse(t,n));var c=P2;return y.createElement(Nie,{context:c,store:o.current},r)}function Yse(e){var{layout:t,margin:r}=e,n=Bt(),s=Fn();return y.useEffect(()=>{s||(n(jV(t)),n(wV(r)))},[n,s,t,r]),null}var kR=y.memo(Yse,fj);function SR(e){var t=Bt();return y.useEffect(()=>{t(Fse(e))},[t,e]),null}function t6(e){var{zIndex:t,isPanorama:r}=e,n=y.useRef(null),s=Bt();return y.useLayoutEffect(()=>(n.current&&s(Iee({zIndex:t,element:n.current,isPanorama:r})),()=>{s(Lee({zIndex:t,isPanorama:r}))}),[s,t,r]),y.createElement("g",{tabIndex:-1,ref:n})}function r6(e){var{children:t,isPanorama:r}=e,n=He(See);if(!n||n.length===0)return t;var s=n.filter(c=>c<0),o=n.filter(c=>c>0);return y.createElement(y.Fragment,null,s.map(c=>y.createElement(t6,{key:c,zIndex:c,isPanorama:r})),t,o.map(c=>y.createElement(t6,{key:c,zIndex:c,isPanorama:r})))}var Xse=["children"];function Jse(e,t){if(e==null)return{};var r,n,s=Qse(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Qse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function lg(){return lg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lg.apply(null,arguments)}var Zse={width:"100%",height:"100%",display:"block"},eoe=y.forwardRef((e,t)=>{var r=eM(),n=tM(),s=hM();if(!mo(r)||!mo(n))return null;var{children:o,otherAttributes:c,title:f,desc:d}=e,h,m;return c!=null&&(typeof c.tabIndex=="number"?h=c.tabIndex:h=s?0:void 0,typeof c.role=="string"?m=c.role:m=s?"application":void 0),y.createElement(k2,lg({},c,{title:f,desc:d,role:m,tabIndex:h,width:r,height:n,style:Zse,ref:t}),o)}),toe=e=>{var{children:t}=e,r=He(Lg);if(!r)return null;var{width:n,height:s,y:o,x:c}=r;return y.createElement(k2,{width:n,height:s,x:c,y:o},t)},n6=y.forwardRef((e,t)=>{var{children:r}=e,n=Jse(e,Xse),s=Fn();return s?y.createElement(toe,null,y.createElement(r6,{isPanorama:!0},r)):y.createElement(eoe,lg({ref:t},n),y.createElement(r6,{isPanorama:!1},r))});function roe(){var e=Bt(),[t,r]=y.useState(null),n=He(HV);return y.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),o=s.width/t.offsetWidth;Yt(o)&&o!==n&&e(kV(o))}},[t,e,n]),r}function a6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function noe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a6(Object(r),!0).forEach(function(n){aoe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aoe(e,t,r){return(t=ioe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ioe(e){var t=soe(e,"string");return typeof t=="symbol"?t:t+""}function soe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sl.apply(null,arguments)}var ooe=()=>(cte(),null);function cg(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var loe=y.forwardRef((e,t)=>{var r,n,s=y.useRef(null),[o,c]=y.useState({containerWidth:cg((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:cg((n=e.style)===null||n===void 0?void 0:n.height)}),f=y.useCallback((h,m)=>{c(p=>{var x=Math.round(h),w=Math.round(m);return p.containerWidth===x&&p.containerHeight===w?p:{containerWidth:x,containerHeight:w}})},[]),d=y.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:m,height:p}=h.getBoundingClientRect();f(m,p);var x=j=>{var{width:N,height:S}=j[0].contentRect;f(N,S)},w=new ResizeObserver(x);w.observe(h),s.current=w}},[t,f]);return y.useEffect(()=>()=>{var h=s.current;h?.disconnect()},[f]),y.createElement(y.Fragment,null,y.createElement(Bg,{width:o.containerWidth,height:o.containerHeight}),y.createElement("div",Sl({ref:d},e)))}),coe=y.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,o]=y.useState({containerWidth:cg(r),containerHeight:cg(n)}),c=y.useCallback((d,h)=>{o(m=>{var p=Math.round(d),x=Math.round(h);return m.containerWidth===p&&m.containerHeight===x?m:{containerWidth:p,containerHeight:x}})},[]),f=y.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:h,height:m}=d.getBoundingClientRect();c(h,m)}},[t,c]);return y.createElement(y.Fragment,null,y.createElement(Bg,{width:s.containerWidth,height:s.containerHeight}),y.createElement("div",Sl({ref:f},e)))}),uoe=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return y.createElement(y.Fragment,null,y.createElement(Bg,{width:r,height:n}),y.createElement("div",Sl({ref:t},e)))}),doe=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return ss(r)||ss(n)?y.createElement(coe,Sl({},e,{ref:t})):y.createElement(uoe,Sl({},e,{ref:t}))});function foe(e){return e===!0?loe:doe}var hoe=y.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:o,onContextMenu:c,onDoubleClick:f,onMouseDown:d,onMouseEnter:h,onMouseLeave:m,onMouseMove:p,onMouseUp:x,onTouchEnd:w,onTouchMove:j,onTouchStart:N,style:S,width:C,responsive:A,dispatchTouchEvents:E=!0}=e,z=y.useRef(null),P=Bt(),[B,T]=y.useState(null),[R,$]=y.useState(null),I=roe(),O=H2(),U=O?.width>0?O.width:C,D=O?.height>0?O.height:s,q=y.useCallback(se=>{I(se),typeof t=="function"&&t(se),T(se),$(se),se!=null&&(z.current=se)},[I,t,T,$]),Z=y.useCallback(se=>{P(hR(se)),P(na({handler:o,reactEvent:se}))},[P,o]),V=y.useCallback(se=>{P(D1(se)),P(na({handler:h,reactEvent:se}))},[P,h]),X=y.useCallback(se=>{P(i8()),P(na({handler:m,reactEvent:se}))},[P,m]),re=y.useCallback(se=>{P(D1(se)),P(na({handler:p,reactEvent:se}))},[P,p]),fe=y.useCallback(()=>{P(yR())},[P]),Y=y.useCallback(se=>{P(vR(se.key))},[P]),H=y.useCallback(se=>{P(na({handler:c,reactEvent:se}))},[P,c]),G=y.useCallback(se=>{P(na({handler:f,reactEvent:se}))},[P,f]),ee=y.useCallback(se=>{P(na({handler:d,reactEvent:se}))},[P,d]),Q=y.useCallback(se=>{P(na({handler:x,reactEvent:se}))},[P,x]),ae=y.useCallback(se=>{P(na({handler:N,reactEvent:se}))},[P,N]),_e=y.useCallback(se=>{E&&P(wR(se)),P(na({handler:j,reactEvent:se}))},[P,E,j]),be=y.useCallback(se=>{P(na({handler:w,reactEvent:se}))},[P,w]),Pe=foe(A);return y.createElement(k8.Provider,{value:B},y.createElement(IT.Provider,{value:R},y.createElement(Pe,{width:U??S?.width,height:D??S?.height,className:_t("recharts-wrapper",n),style:noe({position:"relative",cursor:"default",width:U,height:D},S),onClick:Z,onContextMenu:H,onDoubleClick:G,onFocus:fe,onKeyDown:Y,onMouseDown:ee,onMouseEnter:V,onMouseLeave:X,onMouseMove:re,onMouseUp:Q,onTouchEnd:be,onTouchMove:_e,onTouchStart:ae,ref:q},y.createElement(ooe,null),r)))}),moe=["width","height","responsive","children","className","style","compact","title","desc"];function goe(e,t){if(e==null)return{};var r,n,s=poe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function poe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _R=y.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:o,className:c,style:f,compact:d,title:h,desc:m}=e,p=goe(e,moe),x=mi(p);return d?y.createElement(y.Fragment,null,y.createElement(Bg,{width:r,height:n}),y.createElement(n6,{otherAttributes:x,title:h,desc:m},o)):y.createElement(hoe,{className:c,style:f,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(n6,{otherAttributes:x,title:h,desc:m,ref:t},y.createElement(Sae,null,o)))});function B1(){return B1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B1.apply(null,arguments)}var xoe={top:5,right:5,bottom:5,left:5},voe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:xoe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},yoe=y.forwardRef(function(t,r){var n,s=Kr(t.categoricalChartProps,voe),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:f,tooltipPayloadSearcher:d,categoricalChartProps:h}=t,m={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:f,tooltipPayloadSearcher:d,eventEmitter:void 0};return y.createElement(NR,{preloadedState:{options:m},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:o},y.createElement(eR,{chartData:h.data}),y.createElement(kR,{layout:s.layout,margin:s.margin}),y.createElement(SR,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),y.createElement(_R,B1({},s,{ref:r})))}),boe=["axis","item"],woe=y.forwardRef((e,t)=>y.createElement(yoe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:boe,tooltipPayloadSearcher:S8,categoricalChartProps:e,ref:t}));function joe(e){var t=Bt();return y.useEffect(()=>{t(Hse(e))},[t,e]),null}var Noe=["layout"];function $1(){return $1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$1.apply(null,arguments)}function koe(e,t){if(e==null)return{};var r,n,s=Soe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Soe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _oe={top:5,right:5,bottom:5,left:5},CR={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:_oe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Coe=y.forwardRef(function(t,r){var n,s=Kr(t.categoricalChartProps,CR),{layout:o}=s,c=koe(s,Noe),{chartName:f,defaultTooltipEventType:d,validateTooltipEventTypes:h,tooltipPayloadSearcher:m}=t,p={chartName:f,defaultTooltipEventType:d,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,eventEmitter:void 0};return y.createElement(NR,{preloadedState:{options:p},reduxStoreName:(n=s.id)!==null&&n!==void 0?n:f},y.createElement(eR,{chartData:s.data}),y.createElement(kR,{layout:o,margin:s.margin}),y.createElement(SR,{baseValue:void 0,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),y.createElement(joe,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),y.createElement(_R,$1({},c,{ref:r})))});function i6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function s6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i6(Object(r),!0).forEach(function(n){Eoe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eoe(e,t,r){return(t=Aoe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aoe(e){var t=Toe(e,"string");return typeof t=="symbol"?t:t+""}function Toe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ooe=["item"],Moe=s6(s6({},CR),{},{layout:"centric",startAngle:0,endAngle:360}),Poe=y.forwardRef((e,t)=>{var r=Kr(e,Moe);return y.createElement(Coe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Ooe,tooltipPayloadSearcher:S8,categoricalChartProps:r,ref:t})});const o6=({cards:e=[],type:t="all"})=>{const r=y.useMemo(()=>{const f={0:0,1:0,2:0,3:0,4:0,5:0,6:0,"7+":0};return e.forEach(d=>{const h=d.data||d,m=(h.type_line||"").toLowerCase();if(m.includes("land")&&!m.includes("creature")&&!m.includes("artifact"))return;const p=h.cmc??h.manavalue??0;p>=7?f["7+"]++:f[Math.floor(p)]++}),Object.entries(f).map(([d,h])=>({label:d,value:h}))},[e]),n=y.useMemo(()=>{const f={};return e.forEach(d=>{const m=(d.data||d).type_line||"";["Creature","Instant","Sorcery","Artifact","Enchantment","Planeswalker","Land","Battle"].forEach(x=>{m.includes(x)&&(f[x]=(f[x]||0)+1)})}),Object.entries(f).map(([d,h])=>({name:d,value:h}))},[e]),s=["#8884d8","#82ca9d","#ffc658","#ff8042","#a4de6c","#d0ed57","#8dd1e1"],o=()=>a.jsxs("div",{className:"h-full w-full min-h-[160px]",children:[t==="all"&&a.jsx("h3",{className:"text-lg font-medium text-white mb-4 text-center",children:"Mana Curve"}),a.jsx(J_,{width:"100%",height:"100%",children:a.jsxs(woe,{data:r,children:[a.jsx(dR,{dataKey:"label",stroke:"#9ca3af",tick:{fontSize:12}}),a.jsx(fR,{stroke:"#9ca3af",allowDecimals:!1,tick:{fontSize:12},width:30}),a.jsx(e3,{contentStyle:{backgroundColor:"#1f2937",borderColor:"#374151",color:"#fff"},itemStyle:{color:"#fff"},cursor:{fill:"rgba(255,255,255,0.1)"}}),a.jsx(cR,{dataKey:"value",fill:"#6366f1",radius:[4,4,0,0],children:r.map((f,d)=>a.jsx(Kc,{fill:s[d%s.length]},`cell-${d}`))})]})})]}),c=()=>a.jsxs("div",{className:"h-full w-full min-h-[160px]",children:[a.jsx("h3",{className:"text-lg font-medium text-white mb-4 text-center",children:"Card Types"}),a.jsx(J_,{width:"100%",height:"100%",children:a.jsxs(Poe,{children:[a.jsx(X8,{data:n,cx:"50%",cy:"50%",labelLine:!1,outerRadius:"80%",fill:"#8884d8",dataKey:"value",label:({cx:f,cy:d,midAngle:h,innerRadius:m,outerRadius:p,percent:x,index:w})=>null,children:n.map((f,d)=>a.jsx(Kc,{fill:s[d%s.length]},`cell-${d}`))}),a.jsx(e3,{contentStyle:{backgroundColor:"#1f2937",borderColor:"#374151",color:"#fff"}}),a.jsx(fM,{iconSize:10,layout:"vertical",verticalAlign:"middle",align:"right",wrapperStyle:{fontSize:"12px"}})]})})]});return t==="mana"?a.jsx("div",{className:"w-full h-full",children:o()}):t==="types"?a.jsx("div",{className:"w-full h-full",children:c()}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-gray-800 rounded-xl border border-gray-700",children:[a.jsx("div",{className:"h-64",children:o()}),a.jsx("div",{className:"h-64",children:c()})]})},U0=[{key:"W",name:"White",color:"bg-yellow-100",text:"text-yellow-600",border:"border-yellow-200/50",bg:"bg-yellow-500/10",pip:""},{key:"U",name:"Blue",color:"bg-blue-400",text:"text-blue-400",border:"border-blue-500/30",bg:"bg-blue-500/10",pip:""},{key:"B",name:"Black",color:"bg-gray-600",text:"text-gray-400",border:"border-gray-500/30",bg:"bg-gray-500/10",pip:""},{key:"R",name:"Red",color:"bg-red-500",text:"text-red-400",border:"border-red-500/30",bg:"bg-red-500/10",pip:""},{key:"G",name:"Green",color:"bg-green-500",text:"text-green-400",border:"border-green-500/30",bg:"bg-green-500/10",pip:""},{key:"C",name:"Colorless",color:"bg-gray-400",text:"text-gray-500",border:"border-gray-600/30",bg:"bg-gray-600/10",pip:""}],Roe=({cards:e=[]})=>{const t=y.useMemo(()=>{const n={pips:{W:0,U:0,B:0,R:0,G:0,C:0},production:{W:0,U:0,B:0,R:0,G:0,C:0},curve:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,"7+":0},colorCurve:{W:[0,0,0,0,0,0,0,0],U:[0,0,0,0,0,0,0,0],B:[0,0,0,0,0,0,0,0],R:[0,0,0,0,0,0,0,0],G:[0,0,0,0,0,0,0,0],C:[0,0,0,0,0,0,0,0]},totalPips:0,totalProduction:0,nonLandCount:0,avgCMC:0};let s=0;return e.forEach(o=>{const c=o.data||o,f=(c.type_line||"").toLowerCase(),d=f.includes("land"),h=c.mana_cost||"",m=(c.oracle_text||"").toLowerCase();if(!d){n.nonLandCount+=o.countInDeck||1;const w=c.cmc??0;s+=w*(o.countInDeck||1),(h.match(/\{([^}]+)\}/g)||[]).forEach(S=>{S.slice(1,-1).split("/").forEach(E=>{if(["W","U","B","R","G","C"].includes(E)){n.pips[E]+=o.countInDeck||1,n.totalPips+=o.countInDeck||1;const z=Math.min(Math.floor(w),7);n.colorCurve[E][z]+=o.countInDeck||1}})});const N=w>=7?"7+":Math.floor(w);n.curve[N]+=o.countInDeck||1}let p=c.produced_mana||[];(m.includes("any color")||m.includes("mana of any color"))&&(p=["W","U","B","R","G"]),p.length===0&&d&&(f.includes("plains")&&p.push("W"),f.includes("island")&&p.push("U"),f.includes("swamp")&&p.push("B"),f.includes("mountain")&&p.push("R"),f.includes("forest")&&p.push("G")),!d&&m.includes("add {")&&["w","u","b","r","g","c"].forEach(w=>{m.includes(`add {${w}}`)&&p.push(w.toUpperCase())}),[...new Set(p)].forEach(w=>{n.production[w]!==void 0&&(n.production[w]+=o.countInDeck||1,n.totalProduction+=o.countInDeck||1)})}),n.avgCMC=n.nonLandCount>0?(s/n.nonLandCount).toFixed(2):0,n},[e]),r=(n,s="bg-indigo-500",o="h-48")=>{const c=Object.entries(n),f=Math.max(...c.map(d=>d[1]),1);return a.jsx("div",{className:`flex items-end gap-1 ${o} w-full px-2`,children:c.map(([d,h])=>a.jsxs("div",{className:"flex-1 flex flex-col items-center group relative",children:[h>0&&a.jsx("div",{className:`w-full ${s} rounded-t transition-all duration-500 group-hover:brightness-125`,style:{height:`${h/f*100}%`},children:a.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 text-[10px] font-bold text-white opacity-0 group-hover:opacity-100 transition-opacity bg-gray-900 px-1 rounded",children:h})}),a.jsx("div",{className:"text-[10px] font-bold text-gray-500 mt-2",children:d})]},d))})};return a.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex justify-between text-[10px] font-black uppercase tracking-widest text-gray-500",children:[a.jsx("span",{children:"Cost (Pips)"}),a.jsxs("span",{children:[t.totalPips," Total"]})]}),a.jsx("div",{className:"h-4 w-full bg-gray-900/50 rounded-full overflow-hidden flex border border-gray-800",children:U0.filter(n=>t.pips[n.key]>0).map(n=>a.jsx("div",{className:`${n.color} h-full transition-all duration-700`,style:{width:`${t.pips[n.key]/t.totalPips*100}%`},title:`${n.name}: ${t.pips[n.key]}`},n.key))})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex justify-between text-[10px] font-black uppercase tracking-widest text-gray-500",children:[a.jsx("span",{children:"Production"}),a.jsxs("span",{children:[t.totalProduction," Sources"]})]}),a.jsx("div",{className:"h-4 w-full bg-gray-900/50 rounded-full overflow-hidden flex border border-gray-800 shadow-inner",children:U0.filter(n=>t.production[n.key]>0).map(n=>a.jsx("div",{className:`${n.color} h-full transition-all duration-700 opacity-80`,style:{width:`${t.production[n.key]/t.totalProduction*100}%`},title:`${n.name}: ${t.production[n.key]}`},n.key))})]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:U0.map(n=>{const s=t.pips[n.key],o=t.production[n.key],c=t.totalPips>0?Math.round(s/t.totalPips*100):0,f=t.totalProduction>0?Math.round(o/t.totalProduction*100):0,d=s>0||o>0;return a.jsxs("div",{className:`p-4 rounded-2xl border transition-all duration-300 ${d?`${n.bg} ${n.border}`:"bg-gray-800/10 border-gray-800/50 opacity-40"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("span",{className:"text-2xl",children:n.pip}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:`text-[10px] font-black uppercase tracking-tighter ${n.text}`,children:n.name})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-[9px] font-bold text-gray-500 uppercase",children:[a.jsx("span",{children:"Cost"}),a.jsxs("span",{className:"text-white",children:[c,"%"]})]}),a.jsx("div",{className:"h-1.5 bg-gray-950 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${n.color} transition-all duration-1000`,style:{width:`${c}%`}})}),a.jsxs("div",{className:"text-[10px] text-gray-600 font-mono",children:[s," pips"]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-[9px] font-bold text-gray-500 uppercase",children:[a.jsx("span",{children:"Prod"}),a.jsxs("span",{className:"text-white",children:[f,"%"]})]}),a.jsx("div",{className:"h-1.5 bg-gray-950 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${n.color} opacity-60 transition-all duration-1000`,style:{width:`${f}%`}})}),a.jsxs("div",{className:"text-[10px] text-gray-600 font-mono",children:[o," mana"]})]})]})]},n.key)})}),a.jsxs("div",{className:"bg-gray-950/40 p-6 rounded-2xl border border-gray-800/50",children:[a.jsx("div",{className:"flex justify-between items-end mb-8",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tighter",children:"Mana Curve"}),a.jsxs("p",{className:"text-xs text-gray-500 font-medium",children:["Average Mana Value (Non-lands): ",a.jsx("span",{className:"text-indigo-400",children:t.avgCMC})]})]})}),r(t.curve,"bg-indigo-500","h-40")]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:U0.filter(n=>t.pips[n.key]>0).map(n=>a.jsxs("div",{className:"bg-gray-900/30 p-4 rounded-xl border border-gray-800/50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("span",{className:"text-lg",children:n.pip}),a.jsxs("span",{className:`text-[10px] font-black uppercase tracking-widest ${n.text}`,children:[n.name," Spells"]})]}),r(Object.fromEntries(t.colorCurve[n.key].map((s,o)=>[o===7?"7+":o,s])),n.color,"h-24")]},n.key))})]})},ER=({isOpen:e,onClose:t,cards:r,deckName:n})=>{const{userProfile:s}=vt(),o=s?.settings?.helper?.name||"The Oracle";return e?J1.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 sm:p-6 bg-black/60 backdrop-blur-md animate-fade-in overscroll-contain",children:[a.jsxs("div",{className:"bg-gray-900/60 backdrop-blur-3xl w-full max-w-6xl max-h-[90vh] mx-auto rounded-[2.5rem] border border-white/10 shadow-[0_0_50px_-12px_rgba(0,0,0,0.5)] flex flex-col overflow-hidden ring-1 ring-white/5 relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-indigo-500/30 to-transparent"}),a.jsx("div",{className:"p-8 border-b border-white/5 flex justify-between items-center bg-white/5 shrink-0",children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[10px] font-black font-mono text-indigo-400 uppercase tracking-widest bg-indigo-500/10 px-2 py-0.5 rounded border border-indigo-500/20",children:"Analytics"}),a.jsx("span",{className:"text-[10px] font-black font-mono text-gray-400 uppercase tracking-widest bg-white/5 px-2 py-0.5 rounded border border-white/5",children:o})]}),a.jsx("h2",{className:"text-3xl font-black text-white italic tracking-tighter uppercase",children:"Deck Performance"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-8 custom-scrollbar",children:a.jsx(Roe,{cards:r})}),a.jsx("div",{className:"p-6 border-t border-white/5 bg-white/5 flex justify-end shrink-0",children:a.jsx("button",{onClick:t,className:"px-8 py-3.5 bg-gray-900/50 hover:bg-gray-800 text-white font-black rounded-2xl transition-all border border-white/10 hover:border-white/20 active:scale-95 text-[11px] uppercase tracking-[0.2em] shadow-lg",children:"Close Analytics"})})]}),a.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .custom-scrollbar::-webkit-scrollbar { width: 8px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.02); border-radius: 10px; }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(99, 102, 241, 0.2); border-radius: 10px; border: 2px solid transparent; background-clip: content-box; transition: background 0.3s; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(99, 102, 241, 0.4); border: 2px solid transparent; background-clip: content-box; }
            `}})]}),document.body):null},Ioe=({isOpen:e,onClose:t,deck:r,cards:n=[]})=>{const{userProfile:s,currentUser:o}=vt(),{addToast:c}=rn(),f=s?.settings?.helper?.name||"The Oracle",[d,h]=Te.useState(!1),[m,p]=Te.useState(0),[x,w]=Te.useState(!1);if(Te.useEffect(()=>(e?(p(0),w(!1),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),!e||!r)return null;const j=r.aiBlueprint||{},N=j.strategy||'<p class="text-gray-400 italic">No strategy generated for this deck yet. Ask the Oracle to analyze it.</p>',S=j.theme||"Uncharted Strategy",C=[r.commander];r.commander_partner&&C.push(r.commander_partner);const A=C[m]||C[0],E=A?.card_faces?.length>1,z=()=>{if(!A)return"https://placehold.co/480x680?text=Commander";if(E){const R=A.card_faces[x?1:0];return R.image_uris?.art_crop||R.image_uris?.large||R.image_uris?.normal}return A.image_uris?.art_crop||A.image_uris?.large||A.image_uris?.normal||A.image_uri},P=j.layout?.functional||j.suggestedCounts||{},B=j.layout?.types||j.typeCounts||{},T=async()=>{if(!s?.settings?.geminiApiKey){c("Gemini API Key missing in settings.","error");return}h(!0);try{const R=await Ln.getDeckStrategy(s.settings.geminiApiKey,r.commander?.name||"Unknown Commander",s.playstyle,n,r.commander_partner?.name);await oi.updateDeck(o.uid,r.id,{aiBlueprint:{...j,theme:R.theme,strategy:R.strategy,layout:R.layout}}),c("Strategy updated based on your current build!","success"),window.location.reload()}catch(R){console.error(R),c("Failed to rerun strategy analysis.","error")}finally{h(!1)}};return J1.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 sm:p-6 bg-black/60 backdrop-blur-md animate-fade-in overscroll-contain",children:[a.jsxs("div",{className:"bg-gray-900/60 backdrop-blur-3xl w-full max-w-5xl max-h-[90vh] mx-auto rounded-[2.5rem] border border-white/10 shadow-[0_0_50px_-12px_rgba(0,0,0,0.5)] flex flex-col overflow-hidden ring-1 ring-white/5 relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-indigo-500/30 to-transparent"}),a.jsx("div",{className:"absolute -top-[20%] -right-[10%] w-[500px] h-[500px] bg-indigo-500/10 rounded-full blur-[100px] pointer-events-none"}),a.jsx("div",{className:"absolute -bottom-[20%] -left-[10%] w-[500px] h-[500px] bg-purple-500/10 rounded-full blur-[100px] pointer-events-none"}),a.jsxs("div",{className:"px-10 py-8 border-b border-white/5 flex justify-between items-center bg-white/5 shrink-0 relative z-10",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:"w-14 h-14 bg-indigo-500/20 rounded-2xl flex items-center justify-center border border-indigo-500/30 shadow-inner backdrop-blur-sm",children:a.jsx("span",{className:"text-3xl",children:""})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-black text-white tracking-tighter uppercase leading-none mb-1",dangerouslySetInnerHTML:{__html:S}}),a.jsxs("p",{className:"text-[10px] font-black text-indigo-400/60 uppercase tracking-[0.3em]",children:[f," Strategic Blueprint"]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:T,disabled:d,className:`flex items-center gap-3 px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] transition-all border ${d?"bg-white/5 text-gray-500 border-white/5 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-500 text-white border-white/20 shadow-[0_0_20px_rgba(79,70,229,0.3)] hover:shadow-[0_0_30px_rgba(79,70,229,0.5)] active:scale-95"}`,children:[d?a.jsx("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"}):a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),d?"Consulting Oracle...":`Have ${f} Recreate Strategy`]}),a.jsx("div",{className:"w-px h-8 bg-white/10 mx-2"}),a.jsx("button",{onClick:t,className:"p-3 bg-white/5 hover:bg-white/10 rounded-2xl transition-all text-gray-400 hover:text-white border border-white/5 hover:border-white/10 group",children:a.jsx("svg",{className:"w-6 h-6 transform group-hover:rotate-90 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-10 py-10 custom-scrollbar space-y-12 relative z-10 overscroll-contain",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-12",children:[a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"sticky top-0 space-y-6",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-xl rounded-[2rem] group-hover:bg-indigo-500/30 transition-all duration-700"}),a.jsxs("div",{className:"relative aspect-[4/5] rounded-[2rem] overflow-hidden shadow-2xl border border-white/10 z-10 bg-black/40",children:[a.jsx("img",{src:z(),className:"w-full h-full object-cover transition-transform duration-700 active:scale-95",alt:A?.name}),E&&a.jsx("button",{onClick:()=>w(!x),className:"absolute top-4 right-4 p-3 bg-black/60 hover:bg-indigo-600 backdrop-blur-md rounded-full text-white border border-white/20 shadow-lg transition-all group/flip z-30",title:"Flip Card",children:a.jsx("svg",{className:`w-5 h-5 transition-transform duration-500 ${x?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),a.jsx("div",{className:"absolute bottom-0 inset-x-0 p-4 bg-gradient-to-t from-black/90 via-black/50 to-transparent",children:a.jsxs("div",{className:"text-white font-bold text-center text-sm leading-tight drop-shadow-md",children:[A.name,E&&a.jsx("span",{className:"block text-[9px] text-gray-400 font-normal mt-0.5 uppercase tracking-widest",children:x?"Back Face":"Front Face"})]})})]}),a.jsx("div",{className:"absolute -bottom-4 left-1/2 -translate-x-1/2 z-20",children:a.jsxs("div",{className:"bg-black/80 text-white px-5 py-2 rounded-full border border-white/10 shadow-xl backdrop-blur-md flex items-center gap-2 whitespace-nowrap",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-400",children:"Cards"}),a.jsx("div",{className:"w-px h-3 bg-white/20"}),a.jsxs("span",{className:"text-sm font-black font-mono",children:[(n||[]).length,"/100"]})]})})]}),a.jsxs("div",{className:"text-center pt-4 space-y-4",children:[a.jsxs("div",{onClick:()=>{p(0),w(!1)},className:`cursor-pointer transition-all duration-300 p-2 rounded-xl border ${m===0?"bg-indigo-500/10 border-indigo-500/30":"border-transparent hover:bg-white/5"}`,children:[a.jsx("h4",{className:`text-[9px] font-black uppercase tracking-[0.3em] mb-1 ${m===0?"text-indigo-400":"text-gray-600"}`,children:"Lead Commander"}),a.jsx("div",{className:`font-bold text-sm leading-tight ${m===0?"text-white":"text-gray-400"}`,children:C[0]?.name})]}),C[1]&&a.jsxs("div",{onClick:()=>{p(1),w(!1)},className:`cursor-pointer transition-all duration-300 p-2 rounded-xl border ${m===1?"bg-purple-500/10 border-purple-500/30":"border-transparent hover:bg-white/5"}`,children:[a.jsx("h4",{className:`text-[9px] font-black uppercase tracking-[0.3em] mb-1 ${m===1?"text-purple-400":"text-gray-600"}`,children:"Partnered With"}),a.jsx("div",{className:`font-bold text-sm leading-tight ${m===1?"text-white":"text-gray-400"}`,children:C[1].name})]})]})]})}),a.jsxs("div",{className:"space-y-10",children:[a.jsxs("div",{className:"bg-white/5 rounded-[2rem] p-8 border border-white/5 relative overflow-hidden group",children:[a.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity",children:a.jsx("span",{className:"text-9xl",children:""})}),a.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] mb-6 flex items-center gap-3",children:[a.jsx("span",{className:"w-8 h-px bg-gray-700"}),"Tactical Overview"]}),a.jsx("div",{className:"text-gray-300 leading-relaxed strategy-content-refined font-medium text-lg/8",dangerouslySetInnerHTML:{__html:N}})]}),a.jsxs("div",{className:"space-y-8",children:[Object.keys(P).length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-[10px] font-black text-indigo-400/60 uppercase tracking-[0.2em] flex items-center gap-3",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),"Target Functional Needs"]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:Object.entries(P).map(([R,$])=>a.jsxs("div",{className:"bg-white/5 p-5 rounded-2xl border border-white/5 text-center group hover:bg-white/10 hover:border-white/10 hover:-translate-y-1 transition-all duration-300 shadow-sm hover:shadow-xl",children:[a.jsx("div",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-2 group-hover:text-indigo-400 transition-colors h-8 flex items-center justify-center",children:R}),a.jsx("div",{className:"text-3xl font-black text-white tracking-tighter group-hover:scale-110 transition-transform",children:$})]},R))})]}),Object.keys(B).length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-[10px] font-black text-purple-400/60 uppercase tracking-[0.2em] flex items-center gap-3",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500"}),"Target Type Distribution"]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:Object.entries(B).map(([R,$])=>a.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/5 text-center group hover:bg-white/10 hover:border-white/10 hover:-translate-y-1 transition-all duration-300 shadow-sm hover:shadow-xl",children:[a.jsx("div",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-2 group-hover:text-purple-400 transition-colors h-8 flex items-center justify-center",children:R}),a.jsx("div",{className:"text-2xl font-black text-white tracking-tighter group-hover:scale-110 transition-transform",children:$})]},R))})]})]})]})]})}),a.jsx("div",{className:"px-10 py-6 border-t border-white/5 bg-white/5 flex justify-end shrink-0 relative z-10",children:a.jsx("button",{onClick:t,className:"px-8 py-3.5 bg-gray-900/50 hover:bg-gray-800 text-white font-black rounded-2xl transition-all border border-white/10 hover:border-white/20 active:scale-95 text-[11px] uppercase tracking-[0.2em] shadow-lg",children:"Close Blueprint"})})]}),a.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .strategy-content-refined h4 {
                    font-size: 1.1rem;
                    font-weight: 800;
                    color: white;
                    margin-top: 1.5rem;
                    margin-bottom: 0.5rem;
                }
                .strategy-content-refined p {
                    margin-bottom: 1rem;
                }
                .strategy-content-refined strong {
                    color: #a5b4fc; /* Indigo 300 */
                }
                .strategy-content-refined ul {
                    list-style-type: disc;
                    padding-left: 1.5rem;
                    margin-bottom: 1rem;
                    color: #9ca3af;
                }
                .custom-scrollbar::-webkit-scrollbar { width: 8px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.02); border-radius: 10px; }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(99, 102, 241, 0.2); border-radius: 10px; border: 2px solid transparent; background-clip: content-box; transition: background 0.3s; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(99, 102, 241, 0.4); border: 2px solid transparent; background-clip: content-box; }
            `}})]}),document.body)};var kc={},hb,l6;function AR(){return l6||(l6=1,hb={L:1,M:0,Q:3,H:2}),hb}var mb,c6;function TR(){return c6||(c6=1,mb={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),mb}var gb,u6;function Loe(){if(u6)return gb;u6=1;var e=TR();function t(r){this.mode=e.MODE_8BIT_BYTE,this.data=r}return t.prototype={getLength:function(r){return this.data.length},write:function(r){for(var n=0;n<this.data.length;n++)r.put(this.data.charCodeAt(n),8)}},gb=t,gb}var pb,d6;function Doe(){if(d6)return pb;d6=1;var e=AR();function t(r,n){this.totalCount=r,this.dataCount=n}return t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t.getRSBlocks=function(r,n){var s=t.getRsBlockTable(r,n);if(s==null)throw new Error("bad rs block @ typeNumber:"+r+"/errorCorrectLevel:"+n);for(var o=s.length/3,c=new Array,f=0;f<o;f++)for(var d=s[f*3+0],h=s[f*3+1],m=s[f*3+2],p=0;p<d;p++)c.push(new t(h,m));return c},t.getRsBlockTable=function(r,n){switch(n){case e.L:return t.RS_BLOCK_TABLE[(r-1)*4+0];case e.M:return t.RS_BLOCK_TABLE[(r-1)*4+1];case e.Q:return t.RS_BLOCK_TABLE[(r-1)*4+2];case e.H:return t.RS_BLOCK_TABLE[(r-1)*4+3];default:return}},pb=t,pb}var xb,f6;function Boe(){if(f6)return xb;f6=1;function e(){this.buffer=new Array,this.length=0}return e.prototype={get:function(t){var r=Math.floor(t/8);return(this.buffer[r]>>>7-t%8&1)==1},put:function(t,r){for(var n=0;n<r;n++)this.putBit((t>>>r-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),t&&(this.buffer[r]|=128>>>this.length%8),this.length++}},xb=e,xb}var vb,h6;function OR(){if(h6)return vb;h6=1;for(var e={glog:function(r){if(r<1)throw new Error("glog("+r+")");return e.LOG_TABLE[r]},gexp:function(r){for(;r<0;)r+=255;for(;r>=256;)r-=255;return e.EXP_TABLE[r]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},t=0;t<8;t++)e.EXP_TABLE[t]=1<<t;for(var t=8;t<256;t++)e.EXP_TABLE[t]=e.EXP_TABLE[t-4]^e.EXP_TABLE[t-5]^e.EXP_TABLE[t-6]^e.EXP_TABLE[t-8];for(var t=0;t<255;t++)e.LOG_TABLE[e.EXP_TABLE[t]]=t;return vb=e,vb}var yb,m6;function MR(){if(m6)return yb;m6=1;var e=OR();function t(r,n){if(r.length==null)throw new Error(r.length+"/"+n);for(var s=0;s<r.length&&r[s]==0;)s++;this.num=new Array(r.length-s+n);for(var o=0;o<r.length-s;o++)this.num[o]=r[o+s]}return t.prototype={get:function(r){return this.num[r]},getLength:function(){return this.num.length},multiply:function(r){for(var n=new Array(this.getLength()+r.getLength()-1),s=0;s<this.getLength();s++)for(var o=0;o<r.getLength();o++)n[s+o]^=e.gexp(e.glog(this.get(s))+e.glog(r.get(o)));return new t(n,0)},mod:function(r){if(this.getLength()-r.getLength()<0)return this;for(var n=e.glog(this.get(0))-e.glog(r.get(0)),s=new Array(this.getLength()),o=0;o<this.getLength();o++)s[o]=this.get(o);for(var o=0;o<r.getLength();o++)s[o]^=e.gexp(e.glog(r.get(o))+n);return new t(s,0).mod(r)}},yb=t,yb}var bb,g6;function $oe(){if(g6)return bb;g6=1;var e=TR(),t=MR(),r=OR(),n={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},s={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(o){for(var c=o<<10;s.getBCHDigit(c)-s.getBCHDigit(s.G15)>=0;)c^=s.G15<<s.getBCHDigit(c)-s.getBCHDigit(s.G15);return(o<<10|c)^s.G15_MASK},getBCHTypeNumber:function(o){for(var c=o<<12;s.getBCHDigit(c)-s.getBCHDigit(s.G18)>=0;)c^=s.G18<<s.getBCHDigit(c)-s.getBCHDigit(s.G18);return o<<12|c},getBCHDigit:function(o){for(var c=0;o!=0;)c++,o>>>=1;return c},getPatternPosition:function(o){return s.PATTERN_POSITION_TABLE[o-1]},getMask:function(o,c,f){switch(o){case n.PATTERN000:return(c+f)%2==0;case n.PATTERN001:return c%2==0;case n.PATTERN010:return f%3==0;case n.PATTERN011:return(c+f)%3==0;case n.PATTERN100:return(Math.floor(c/2)+Math.floor(f/3))%2==0;case n.PATTERN101:return c*f%2+c*f%3==0;case n.PATTERN110:return(c*f%2+c*f%3)%2==0;case n.PATTERN111:return(c*f%3+(c+f)%2)%2==0;default:throw new Error("bad maskPattern:"+o)}},getErrorCorrectPolynomial:function(o){for(var c=new t([1],0),f=0;f<o;f++)c=c.multiply(new t([1,r.gexp(f)],0));return c},getLengthInBits:function(o,c){if(1<=c&&c<10)switch(o){case e.MODE_NUMBER:return 10;case e.MODE_ALPHA_NUM:return 9;case e.MODE_8BIT_BYTE:return 8;case e.MODE_KANJI:return 8;default:throw new Error("mode:"+o)}else if(c<27)switch(o){case e.MODE_NUMBER:return 12;case e.MODE_ALPHA_NUM:return 11;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 10;default:throw new Error("mode:"+o)}else if(c<41)switch(o){case e.MODE_NUMBER:return 14;case e.MODE_ALPHA_NUM:return 13;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 12;default:throw new Error("mode:"+o)}else throw new Error("type:"+c)},getLostPoint:function(o){for(var c=o.getModuleCount(),f=0,d=0;d<c;d++)for(var h=0;h<c;h++){for(var m=0,p=o.isDark(d,h),x=-1;x<=1;x++)if(!(d+x<0||c<=d+x))for(var w=-1;w<=1;w++)h+w<0||c<=h+w||x==0&&w==0||p==o.isDark(d+x,h+w)&&m++;m>5&&(f+=3+m-5)}for(var d=0;d<c-1;d++)for(var h=0;h<c-1;h++){var j=0;o.isDark(d,h)&&j++,o.isDark(d+1,h)&&j++,o.isDark(d,h+1)&&j++,o.isDark(d+1,h+1)&&j++,(j==0||j==4)&&(f+=3)}for(var d=0;d<c;d++)for(var h=0;h<c-6;h++)o.isDark(d,h)&&!o.isDark(d,h+1)&&o.isDark(d,h+2)&&o.isDark(d,h+3)&&o.isDark(d,h+4)&&!o.isDark(d,h+5)&&o.isDark(d,h+6)&&(f+=40);for(var h=0;h<c;h++)for(var d=0;d<c-6;d++)o.isDark(d,h)&&!o.isDark(d+1,h)&&o.isDark(d+2,h)&&o.isDark(d+3,h)&&o.isDark(d+4,h)&&!o.isDark(d+5,h)&&o.isDark(d+6,h)&&(f+=40);for(var N=0,h=0;h<c;h++)for(var d=0;d<c;d++)o.isDark(d,h)&&N++;var S=Math.abs(100*N/c/c-50)/5;return f+=S*10,f}};return bb=s,bb}var wb,p6;function zoe(){if(p6)return wb;p6=1;var e=Loe(),t=Doe(),r=Boe(),n=$oe(),s=MR();function o(f,d){this.typeNumber=f,this.errorCorrectLevel=d,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var c=o.prototype;return c.addData=function(f){var d=new e(f);this.dataList.push(d),this.dataCache=null},c.isDark=function(f,d){if(f<0||this.moduleCount<=f||d<0||this.moduleCount<=d)throw new Error(f+","+d);return this.modules[f][d]},c.getModuleCount=function(){return this.moduleCount},c.make=function(){if(this.typeNumber<1){var f=1;for(f=1;f<40;f++){for(var d=t.getRSBlocks(f,this.errorCorrectLevel),h=new r,m=0,p=0;p<d.length;p++)m+=d[p].dataCount;for(var p=0;p<this.dataList.length;p++){var x=this.dataList[p];h.put(x.mode,4),h.put(x.getLength(),n.getLengthInBits(x.mode,f)),x.write(h)}if(h.getLengthInBits()<=m*8)break}this.typeNumber=f}this.makeImpl(!1,this.getBestMaskPattern())},c.makeImpl=function(f,d){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var h=0;h<this.moduleCount;h++){this.modules[h]=new Array(this.moduleCount);for(var m=0;m<this.moduleCount;m++)this.modules[h][m]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(f,d),this.typeNumber>=7&&this.setupTypeNumber(f),this.dataCache==null&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,d)},c.setupPositionProbePattern=function(f,d){for(var h=-1;h<=7;h++)if(!(f+h<=-1||this.moduleCount<=f+h))for(var m=-1;m<=7;m++)d+m<=-1||this.moduleCount<=d+m||(0<=h&&h<=6&&(m==0||m==6)||0<=m&&m<=6&&(h==0||h==6)||2<=h&&h<=4&&2<=m&&m<=4?this.modules[f+h][d+m]=!0:this.modules[f+h][d+m]=!1)},c.getBestMaskPattern=function(){for(var f=0,d=0,h=0;h<8;h++){this.makeImpl(!0,h);var m=n.getLostPoint(this);(h==0||f>m)&&(f=m,d=h)}return d},c.createMovieClip=function(f,d,h){var m=f.createEmptyMovieClip(d,h),p=1;this.make();for(var x=0;x<this.modules.length;x++)for(var w=x*p,j=0;j<this.modules[x].length;j++){var N=j*p,S=this.modules[x][j];S&&(m.beginFill(0,100),m.moveTo(N,w),m.lineTo(N+p,w),m.lineTo(N+p,w+p),m.lineTo(N,w+p),m.endFill())}return m},c.setupTimingPattern=function(){for(var f=8;f<this.moduleCount-8;f++)this.modules[f][6]==null&&(this.modules[f][6]=f%2==0);for(var d=8;d<this.moduleCount-8;d++)this.modules[6][d]==null&&(this.modules[6][d]=d%2==0)},c.setupPositionAdjustPattern=function(){for(var f=n.getPatternPosition(this.typeNumber),d=0;d<f.length;d++)for(var h=0;h<f.length;h++){var m=f[d],p=f[h];if(this.modules[m][p]==null)for(var x=-2;x<=2;x++)for(var w=-2;w<=2;w++)x==-2||x==2||w==-2||w==2||x==0&&w==0?this.modules[m+x][p+w]=!0:this.modules[m+x][p+w]=!1}},c.setupTypeNumber=function(f){for(var d=n.getBCHTypeNumber(this.typeNumber),h=0;h<18;h++){var m=!f&&(d>>h&1)==1;this.modules[Math.floor(h/3)][h%3+this.moduleCount-8-3]=m}for(var h=0;h<18;h++){var m=!f&&(d>>h&1)==1;this.modules[h%3+this.moduleCount-8-3][Math.floor(h/3)]=m}},c.setupTypeInfo=function(f,d){for(var h=this.errorCorrectLevel<<3|d,m=n.getBCHTypeInfo(h),p=0;p<15;p++){var x=!f&&(m>>p&1)==1;p<6?this.modules[p][8]=x:p<8?this.modules[p+1][8]=x:this.modules[this.moduleCount-15+p][8]=x}for(var p=0;p<15;p++){var x=!f&&(m>>p&1)==1;p<8?this.modules[8][this.moduleCount-p-1]=x:p<9?this.modules[8][15-p-1+1]=x:this.modules[8][15-p-1]=x}this.modules[this.moduleCount-8][8]=!f},c.mapData=function(f,d){for(var h=-1,m=this.moduleCount-1,p=7,x=0,w=this.moduleCount-1;w>0;w-=2)for(w==6&&w--;;){for(var j=0;j<2;j++)if(this.modules[m][w-j]==null){var N=!1;x<f.length&&(N=(f[x]>>>p&1)==1);var S=n.getMask(d,m,w-j);S&&(N=!N),this.modules[m][w-j]=N,p--,p==-1&&(x++,p=7)}if(m+=h,m<0||this.moduleCount<=m){m-=h,h=-h;break}}},o.PAD0=236,o.PAD1=17,o.createData=function(f,d,h){for(var m=t.getRSBlocks(f,d),p=new r,x=0;x<h.length;x++){var w=h[x];p.put(w.mode,4),p.put(w.getLength(),n.getLengthInBits(w.mode,f)),w.write(p)}for(var j=0,x=0;x<m.length;x++)j+=m[x].dataCount;if(p.getLengthInBits()>j*8)throw new Error("code length overflow. ("+p.getLengthInBits()+">"+j*8+")");for(p.getLengthInBits()+4<=j*8&&p.put(0,4);p.getLengthInBits()%8!=0;)p.putBit(!1);for(;!(p.getLengthInBits()>=j*8||(p.put(o.PAD0,8),p.getLengthInBits()>=j*8));)p.put(o.PAD1,8);return o.createBytes(p,m)},o.createBytes=function(f,d){for(var h=0,m=0,p=0,x=new Array(d.length),w=new Array(d.length),j=0;j<d.length;j++){var N=d[j].dataCount,S=d[j].totalCount-N;m=Math.max(m,N),p=Math.max(p,S),x[j]=new Array(N);for(var C=0;C<x[j].length;C++)x[j][C]=255&f.buffer[C+h];h+=N;var A=n.getErrorCorrectPolynomial(S),E=new s(x[j],A.getLength()-1),z=E.mod(A);w[j]=new Array(A.getLength()-1);for(var C=0;C<w[j].length;C++){var P=C+z.getLength()-w[j].length;w[j][C]=P>=0?z.get(P):0}}for(var B=0,C=0;C<d.length;C++)B+=d[C].totalCount;for(var T=new Array(B),R=0,C=0;C<m;C++)for(var j=0;j<d.length;j++)C<x[j].length&&(T[R++]=x[j][C]);for(var C=0;C<p;C++)for(var j=0;j<d.length;j++)C<w[j].length&&(T[R++]=w[j][C]);return T},wb=o,wb}var F0={},x6;function Uoe(){if(x6)return F0;x6=1,Object.defineProperty(F0,"__esModule",{value:!0});var e=Object.assign||function(h){for(var m=1;m<arguments.length;m++){var p=arguments[m];for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(h[x]=p[x])}return h},t=j2(),r=o(t),n=xo(),s=o(n);function o(h){return h&&h.__esModule?h:{default:h}}function c(h,m){var p={};for(var x in h)m.indexOf(x)>=0||Object.prototype.hasOwnProperty.call(h,x)&&(p[x]=h[x]);return p}var f={bgColor:r.default.oneOfType([r.default.object,r.default.string]).isRequired,bgD:r.default.string.isRequired,fgColor:r.default.oneOfType([r.default.object,r.default.string]).isRequired,fgD:r.default.string.isRequired,size:r.default.number.isRequired,title:r.default.string,viewBoxSize:r.default.number.isRequired,xmlns:r.default.string},d=(0,n.forwardRef)(function(h,m){var p=h.bgColor,x=h.bgD,w=h.fgD,j=h.fgColor,N=h.size,S=h.title,C=h.viewBoxSize,A=h.xmlns,E=A===void 0?"http://www.w3.org/2000/svg":A,z=c(h,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return s.default.createElement("svg",e({},z,{height:N,ref:m,viewBox:"0 0 "+C+" "+C,width:N,xmlns:E}),S?s.default.createElement("title",null,S):null,s.default.createElement("path",{d:x,fill:p}),s.default.createElement("path",{d:w,fill:j}))});return d.displayName="QRCodeSvg",d.propTypes=f,F0.default=d,F0}var v6;function Foe(){if(v6)return kc;v6=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.QRCode=void 0;var e=Object.assign||function(N){for(var S=1;S<arguments.length;S++){var C=arguments[S];for(var A in C)Object.prototype.hasOwnProperty.call(C,A)&&(N[A]=C[A])}return N},t=j2(),r=p(t),n=AR(),s=p(n),o=zoe(),c=p(o),f=xo(),d=p(f),h=Uoe(),m=p(h);function p(N){return N&&N.__esModule?N:{default:N}}function x(N,S){var C={};for(var A in N)S.indexOf(A)>=0||Object.prototype.hasOwnProperty.call(N,A)&&(C[A]=N[A]);return C}var w={bgColor:r.default.oneOfType([r.default.object,r.default.string]),fgColor:r.default.oneOfType([r.default.object,r.default.string]),level:r.default.string,size:r.default.number,value:r.default.string.isRequired},j=(0,f.forwardRef)(function(N,S){var C=N.bgColor,A=C===void 0?"#FFFFFF":C,E=N.fgColor,z=E===void 0?"#000000":E,P=N.level,B=P===void 0?"L":P,T=N.size,R=T===void 0?256:T,$=N.value,I=x(N,["bgColor","fgColor","level","size","value"]),O=new c.default(-1,s.default[B]);O.addData($),O.make();var U=O.modules;return d.default.createElement(m.default,e({},I,{bgColor:A,bgD:U.map(function(D,q){return D.map(function(Z,V){return Z?"":"M "+V+" "+q+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:z,fgD:U.map(function(D,q){return D.map(function(Z,V){return Z?"M "+V+" "+q+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:S,size:R,viewBoxSize:U.length}))});return kc.QRCode=j,j.displayName="QRCode",j.propTypes=w,kc.default=j,kc}var Hoe=Foe();const Woe=zn(Hoe),Goe=({isOpen:e,onClose:t,deck:r,onUpdateDeck:n})=>{const{user:s}=vt(),[o,c]=y.useState([]),[f,d]=y.useState([]),[h,m]=y.useState(!0),[p,x]=y.useState(!1),[w,j]=y.useState(""),[N,S]=y.useState(!1),[C,A]=y.useState(""),[E,z]=y.useState("viewer"),[P,B]=y.useState(!1);y.useEffect(()=>{e&&r&&(R(),x(r.is_public||!1),j(r.share_slug||T(r.name)))},[e,r]);const T=D=>D.toLowerCase().replace(/[^a-z0-9]+/g,"-")+"-"+Math.random().toString(36).substring(2,6),R=async()=>{m(!0);try{const D=await Gr.fetchPermissions(r.id);c(D);const Z=(await Gr.fetchRelationships()).filter(V=>V.status==="accepted").map(V=>V.friend);d(Z)}catch(D){console.error("Failed to load share data",D)}finally{m(!1)}},$=async D=>{if(D.preventDefault(),!!C){B(!0);try{await Gr.grantPermission(C,E,r.id),await R(),A("")}catch(q){alert(`Failed to share: ${q.message}`)}finally{B(!1)}}},I=async D=>{try{await Gr.revokePermission(D),await R()}catch{alert("Failed to revoke access.")}},O=async()=>{const D=!p,q=w||T(r.name);try{await Gr.updateDeckPublicStatus(r.id,D,q),x(D),j(q),n({...r,is_public:D,share_slug:q})}catch{alert("Failed to update public status.")}},U=()=>{const D=window.location.origin;navigator.clipboard.writeText(`${D}/share/${w}`),S(!0),setTimeout(()=>S(!1),2e3)};return e?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:t}),a.jsxs("div",{className:"relative bg-gray-900 border border-indigo-500/20 rounded-2xl w-full max-w-lg shadow-2xl p-6 animate-fade-in-up",children:[a.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"Share Deck"}),a.jsx("p",{className:"text-sm text-gray-400 mb-6 truncate",children:r?.name}),a.jsxs("div",{className:"bg-indigo-900/10 border border-indigo-500/20 rounded-xl p-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${p?"bg-green-500":"bg-gray-500"}`}),a.jsx("span",{className:"font-bold text-gray-200",children:"Public Link"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:p,onChange:O}),a.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-500"})]})]}),p&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",readOnly:!0,value:`${window.location.origin}/share/${w}`,className:"flex-1 bg-gray-950 border border-gray-700 rounded-lg px-3 py-2 text-xs text-gray-300 select-all"}),a.jsx("button",{onClick:U,className:"px-3 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-xs font-bold transition-colors",children:N?"Copied!":"Copy"})]}),a.jsx("div",{className:"flex justify-center p-4 bg-white rounded-xl w-fit mx-auto shadow-lg",children:a.jsx(Woe,{value:`${window.location.origin}/share/${w}`,size:128,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 128 128"})}),a.jsx("p",{className:"text-center text-[10px] text-gray-400",children:"Scan to view on mobile"})]}),a.jsx("p",{className:"text-[10px] text-gray-500 mt-2",children:p?"Anyone with this link can view this deck.":"Only people you explicitly add below can access this deck."})]}),a.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Add People"}),a.jsxs("form",{onSubmit:$,className:"flex gap-2 mb-6",children:[a.jsxs("select",{value:C,onChange:D=>A(D.target.value),className:"flex-1 bg-gray-800 border border-gray-700 text-white rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-indigo-500",required:!0,children:[a.jsx("option",{value:"",children:"Select a friend..."}),f.map(D=>a.jsx("option",{value:D.id,children:D.username},D.id))]}),a.jsxs("select",{value:E,onChange:D=>z(D.target.value),className:"bg-gray-800 border border-gray-700 text-white rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-indigo-500",children:[a.jsx("option",{value:"viewer",children:"Viewer"}),a.jsx("option",{value:"contributor",children:"Contributor"}),a.jsx("option",{value:"editor",children:"Editor"})]}),a.jsx("button",{type:"submit",disabled:P||!C,className:"bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-bold text-sm transition-colors",children:"Add"})]}),a.jsx("div",{className:"space-y-4 max-h-[200px] overflow-y-auto",children:o.length===0?a.jsx("p",{className:"text-center text-gray-500 text-xs italic py-4",children:"No specific people have access."}):o.map(D=>a.jsxs("div",{className:"flex justify-between items-center bg-gray-800/50 p-3 rounded-lg border border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-900/50 flex items-center justify-center text-indigo-300 text-xs font-bold",children:D.grantee_username?.[0]?.toUpperCase()}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-bold text-gray-200",children:D.grantee_username}),a.jsx("div",{className:"text-xs text-gray-500 capitalize",children:D.permission_level})]})]}),a.jsx("button",{onClick:()=>I(D.id),className:"text-red-400 hover:text-red-300 text-xs font-bold px-2 py-1 rounded bg-red-500/10 hover:bg-red-500/20 transition-colors",children:"Remove"})]},D.id))})]})]}):null},PR=({isOpen:e,onClose:t,deck:r,cards:n,isOwner:s})=>{const{userProfile:o,currentUser:c}=vt(),{addToast:f}=rn();Un();const[d,h]=y.useState(!1),[m,p]=y.useState(null),[x,w]=y.useState(!1);if(!e)return null;const j=async()=>{h(!0);try{const N=o?.settings?.openAIKey;if(!N){f("Please save your API Key in Settings > AI first.","error"),h(!1);return}const S=await Ln.analyzeDeck(N,n,r.commander?.name||r.name,o?.settings?.helper);p(S)}catch(N){console.error(N),f("Doctor is out. Try again later.","error")}finally{h(!1)}};return J1.createPortal(a.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",children:a.jsxs("div",{className:"bg-gray-900 w-full max-w-2xl rounded-3xl border border-white/10 shadow-2xl p-6 relative flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-black text-white italic uppercase flex items-center gap-2",children:[a.jsx("span",{className:"text-3xl",children:""})," Deck Doctor"]}),a.jsx("p",{className:"text-gray-400 text-sm",children:"AI Analysis & Diagnosis"})]}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-white",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-6",children:[!m&&!d&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-gray-400 mb-6",children:"Ready to examine your deck for synergy, speed, and interaction flaws."}),a.jsx("button",{onClick:j,className:"px-8 py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl shadow-lg transition-all",children:"Run Diagnosis"})]}),d&&a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"}),a.jsx("p",{className:"text-indigo-400 font-mono animate-pulse",children:"Running diagnostics..."})]}),m&&a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center gap-6 bg-gray-800/50 p-6 rounded-2xl border border-white/5",children:[a.jsxs("div",{className:"relative h-24 w-24 flex items-center justify-center",children:[a.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 36 36",children:[a.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#374151",strokeWidth:"4"}),a.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:m.score>80?"#10B981":m.score>60?"#F59E0B":"#EF4444",strokeWidth:"4",strokeDasharray:`${m.score}, 100`})]}),a.jsx("span",{className:"text-3xl font-black text-white",children:m.score})]}),a.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-widest",children:"Synergy"}),a.jsx("div",{className:"text-xl font-bold text-indigo-400",children:m.metrics.synergy})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-widest",children:"Speed"}),a.jsx("div",{className:"text-xl font-bold text-indigo-400",children:m.metrics.speed})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-widest",children:"Interaction"}),a.jsx("div",{className:"text-xl font-bold text-indigo-400",children:m.metrics.interaction})]})]})]}),a.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:[a.jsxs("h4",{className:"text-red-400 font-bold uppercase text-xs tracking-widest mb-2 flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Critical Issues"]}),a.jsx("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-300",children:m.issues.map((N,S)=>a.jsx("li",{children:N},S))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-indigo-400 font-bold uppercase text-xs tracking-widest mb-3",children:"Prescribed Fixes"}),a.jsx("div",{className:"space-y-3",children:m.changes.map((N,S)=>a.jsxs("div",{className:"flex items-center gap-3 bg-gray-800 p-3 rounded-lg border border-gray-700 text-sm",children:[a.jsxs("span",{className:"text-red-400 font-bold line-through px-2 py-0.5 bg-red-500/10 rounded",children:["-",N.remove]}),a.jsx("span",{className:"text-gray-500",children:""}),a.jsxs("span",{className:"text-green-400 font-bold px-2 py-0.5 bg-green-500/10 rounded",children:["+",N.add]}),a.jsx("span",{className:"text-gray-400 text-xs italic border-l border-gray-700 pl-3",children:N.reason})]},S))})]})]})]}),m&&a.jsx("div",{className:"mt-6 pt-4 border-t border-white/5 flex justify-end gap-3",children:a.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-400 hover:text-white font-bold text-sm",children:"Close"})})]})}),document.body)},H0=[{badge:"White",colors:["W"],theme:"Absolute Order",flavor_text:"A single spark of light can banish a world of shadows."},{badge:"Blue",colors:["U"],theme:"Infinite Inquiry",flavor_text:"The mind is the only battlefield where victory is absolute."},{badge:"Black",colors:["B"],theme:"Unrestricted Power",flavor_text:"Power at any cost, for greatness is written in blood."},{badge:"Red",colors:["R"],theme:"Chaotic Passion",flavor_text:"Do not fear the fire; fear the heart that commands it."},{badge:"Green",colors:["G"],theme:"Primal Growth",flavor_text:"The forest does not ask for permission to grow."},{badge:"Azorius",colors:["W","U"],theme:"Bureaucratic Control",flavor_text:"Justice is blind, but she has a very long reach."},{badge:"Dimir",colors:["U","B"],theme:"Subterfuge & Infiltration",flavor_text:"The finest secrets are those that kill the ones who keep them."},{badge:"Rakdos",colors:["B","R"],theme:"Carnival of Carnage",flavor_text:"Entertain us, or become the entertainment."},{badge:"Gruul",colors:["R","G"],theme:"Primal Destruction",flavor_text:"Not for city-dwellers. Not for the weak. Only for the weak."},{badge:"Selesnya",colors:["G","W"],theme:"Collective Harmony",flavor_text:"One voice is a whisper; the Conclave is a roar."},{badge:"Orzhov",colors:["W","B"],theme:"Indentured Eternity",flavor_text:"Even death is no excuse for a breach of contract."},{badge:"Izzet",colors:["U","R"],theme:"Volatile Genius",flavor_text:"If it doesnt explode, you aren't trying hard enough."},{badge:"Golgari",colors:["B","G"],theme:"Cycles of Rot",flavor_text:"Every grave is a garden if you wait long enough."},{badge:"Boros",colors:["R","W"],theme:"Tactical Aggression",flavor_text:"First to the fight, last to the fall."},{badge:"Simic",colors:["G","U"],theme:"Biological Evolution",flavor_text:"Nature is a rough draft; we are the final edit."},{badge:"Esper",colors:["W","U","B"],theme:"Obsidian Logic",flavor_text:"Perfection is not a goal; it is a requirement."},{badge:"Grixis",colors:["U","B","R"],theme:"Ruthless Tyranny",flavor_text:"A wasteland of power where only the cruelest thrive."},{badge:"Jund",colors:["B","R","G"],theme:"Apex Predation",flavor_text:"In this world, you are either the dragon or the meal."},{badge:"Naya",colors:["R","G","W"],theme:"Primal Majesty",flavor_text:"Where the mountains wake and the earth trembles."},{badge:"Bant",colors:["G","W","U"],theme:"Knightly Order",flavor_text:"The sigil of the sun protects those who stand together."},{badge:"Abzan",colors:["W","B","G"],theme:"Eternal Endurance",flavor_text:"We do not break; we simply outlast."},{badge:"Jeskai",colors:["U","R","W"],theme:"Disciplined Spark",flavor_text:"The wind carries the strike; the mind guides the bolt."},{badge:"Sultai",colors:["B","G","U"],theme:"Opulent Decay",flavor_text:"Power is measured in gold and the bones of the fallen."},{badge:"Mardu",colors:["R","W","B"],theme:"Relentless Conquest",flavor_text:"Victory is the only law worth following."},{badge:"Temur",colors:["G","U","R"],theme:"Elemental Instinct",flavor_text:"The wild does not think; it reacts with ice and fire."},{badge:"Glint-Eye",colors:["U","B","R","G"],theme:"Chaotic Adaptation",flavor_text:"Order is a cage; we have chosen to break the locks."},{badge:"Dune-Brood",colors:["W","B","R","G"],theme:"Sandless Conquest",flavor_text:"When the logic of the mind fails, the instinct of the swarm prevails."},{badge:"Ink-Treader",colors:["W","U","R","G"],theme:"Radiant Reflection",flavor_text:"To touch one is to touch the whole of the world."},{badge:"Witch-Maw",colors:["W","U","B","G"],theme:"Eldritch Growth",flavor_text:"There is a hunger beneath the earth that knows no fire."},{badge:"Yore-Tiller",colors:["W","U","B","R"],theme:"Relentless History",flavor_text:"The past is a weapon we sharpen for the future."},{badge:"WUBRG",colors:["W","U","B","R","G"],theme:"The Convergence",flavor_text:"The full spectrum of power, bound in a single hand."},{badge:"Colorless",colors:["C"],theme:"The Great Void",flavor_text:"Existence is a fleeting dream in the eyes of the silent."}],Voe=()=>{const{deckId:e}=of(),t=Un(),{currentUser:r,userProfile:n,updateSettings:s}=vt(),{addToast:o}=rn(),c=n?.settings?.helper?.name||"The Oracle",[f,d]=y.useState(!1),[h,m]=y.useState(!1),[p,x]=y.useState(!1),[w,j]=y.useState(""),[N,S]=y.useState(0),[C,A]=y.useState({}),[E,z]=y.useState(!1),[P,B]=y.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[T,R]=y.useState(!1),[$,I]=y.useState(!1),[O,U]=y.useState(!1),[D,q]=y.useState(!1),[Z,V]=y.useState(!0),[X,re]=y.useState(n?.settings?.deckViewMode||"grid"),fe=he=>{re(he),s({deckViewMode:he})},{deck:Y,cards:H,loading:G,error:ee}=OT(e),{decks:Q}=xf(),{cards:ae}=da(),_e=Y?.permissionLevel||"viewer",be=_e==="owner",Pe=_e==="owner"||_e==="editor",se=y.useMemo(()=>{if(Y?.format?.toLowerCase()==="standard"){const qe=Y.colors||Y.commander?.color_identity||[];return H0.find(Ni=>Ni.colors.length!==qe.length?!1:Ni.colors.every(Hn=>qe.includes(Hn)))||{badge:"Standard",theme:"Constructed",flavor_text:"A format defined by rotation and meta mastery."}}const he=Y?.commander?.color_identity||[],ce=Y?.commander_partner?.color_identity||[],ve=[...new Set([...he,...ce])];return!Y||ve.length===0?H0.find(qe=>qe.badge==="Colorless"):H0.find(qe=>qe.colors.length!==ve.length?!1:qe.colors.every(ar=>ve.includes(ar)))||H0.find(qe=>qe.badge==="Colorless")},[Y]),Ae=y.useMemo(()=>{if(!ae)return new Set;const he=new Set;return ae.forEach(ce=>{ce.finish==="foil"&&!ce.deckId&&he.add(ce.name)}),he},[ae]),Ce=he=>{if(!H)return 0;let ce=H.reduce((ve,Se)=>(Se.data?.type_line||Se.type_line||"").includes(he)?ve+(Se.countInDeck||1):ve,0);return Y?.commander&&!H.some(ve=>ve.scryfall_id===(Y.commander.id||Y.commander.scryfall_id)||ve.oracle_id&&ve.oracle_id===Y.commander.oracle_id)&&(Y.commander.type_line||"").includes(he)&&ce++,Y?.commander_partner&&!H.some(ve=>ve.scryfall_id===(Y.commander_partner.id||Y.commander_partner.scryfall_id)||ve.oracle_id&&ve.oracle_id===Y.commander_partner.oracle_id)&&(Y.commander_partner.type_line||"").includes(he)&&ce++,ce},xe=y.useMemo(()=>{if(!H)return 0;let he=H.reduce((ce,ve)=>ce+(ve.countInDeck||1),0);return Y?.commander&&!H.some(ce=>ce.scryfall_id===(Y.commander.id||Y.commander.scryfall_id)||ce.oracle_id&&ce.oracle_id===Y.commander.oracle_id)&&he++,Y?.commander_partner&&!H.some(ce=>ce.scryfall_id===(Y.commander_partner.id||Y.commander_partner.scryfall_id)||ce.oracle_id&&ce.oracle_id===Y.commander_partner.oracle_id)&&he++,he},[H,Y]),We=y.useMemo(()=>{if(!H)return 0;let he=H.filter(ce=>!ce.is_wishlist).reduce((ce,ve)=>ce+(ve.countInDeck||1),0);return Y?.commander&&!H.some(ce=>ce.scryfall_id===(Y.commander.id||Y.commander.scryfall_id)||ce.oracle_id&&ce.oracle_id===Y.commander.oracle_id)&&he++,Y?.commander_partner&&!H.some(ce=>ce.scryfall_id===(Y.commander_partner.id||Y.commander_partner.scryfall_id)||ce.oracle_id&&ce.oracle_id===Y.commander_partner.oracle_id)&&he++,he},[H,Y]),je=y.useMemo(()=>{if(!H)return 0;let he=H.reduce((ce,ve)=>{const Se=parseFloat(ve.prices?.[ve.finish==="foil"?"usd_foil":"usd"])||parseFloat(ve.data?.prices?.[ve.finish==="foil"?"usd_foil":"usd"])||0;return ce+Se*(ve.countInDeck||1)},0);if(Y?.commander&&!H.some(ce=>ce.scryfall_id===(Y.commander.id||Y.commander.scryfall_id)||ce.oracle_id&&ce.oracle_id===Y.commander.oracle_id)){const ce=Y.commander,ve=parseFloat(ce.prices?.[ce.finish==="foil"?"usd_foil":"usd"])||0;he+=ve}if(Y?.commander_partner&&!H.some(ce=>ce.scryfall_id===(Y.commander_partner.id||Y.commander_partner.scryfall_id)||ce.oracle_id&&ce.oracle_id===Y.commander_partner.oracle_id)){const ce=Y.commander_partner,ve=parseFloat(ce.prices?.[ce.finish==="foil"?"usd_foil":"usd"])||0;he+=ve}return he},[H,Y]),ke=y.useMemo(()=>{const he=Y?.aiBlueprint||{},ce=he.layout?.types||he.suggestedCounts||{};return[{label:"Total",current:xe,target:Y?.format?.toLowerCase()==="standard"||Y?.format?.toLowerCase()==="modern"?60:100},{label:"Creatures",current:Ce("Creature"),target:ce.Creatures||ce.Creature||30},{label:"Lands",current:Ce("Land"),target:ce.Lands||ce.Land||36},{label:"Instants",current:Ce("Instant"),target:ce.Instants||ce.Instant||10},{label:"Sorceries",current:Ce("Sorcery"),target:ce.Sorceries||ce.Sorcery||10},{label:"Enchantments",current:Ce("Enchantment"),target:ce.Enchantments||ce.Enchantment||5},{label:"Artifacts",current:Ce("Artifact"),target:ce.Artifacts||ce.Artifact||10},{label:"Planeswalkers",current:Ce("Planeswalker"),target:ce.Planeswalkers||ce.Planeswalker||0}].filter(Se=>Se.target>0)},[Y,xe,H]),Oe=y.useMemo(()=>{if(!H)return{};const he={Commander:[],Creature:[],Planeswalker:[],Instant:[],Sorcery:[],Artifact:[],Enchantment:[],Land:[],Other:[]};return H.forEach(ce=>{const ve=ce,Se=(ve.data?.type_line||ve.type_line||"").toLowerCase(),qe=Y?.commander&&(ve.scryfall_id===(Y.commander.id||Y.commander.scryfall_id)||ve.oracle_id&&ve.oracle_id===Y.commander.oracle_id),ar=Y?.commander_partner&&(ve.scryfall_id===(Y.commander_partner.id||Y.commander_partner.scryfall_id)||ve.oracle_id&&ve.oracle_id===Y.commander_partner.oracle_id);if(qe||ar){he.Commander.push(ve);return}Se.includes("creature")?he.Creature.push(ve):Se.includes("planeswalker")?he.Planeswalker.push(ve):Se.includes("instant")?he.Instant.push(ve):Se.includes("sorcery")?he.Sorcery.push(ve):Se.includes("artifact")?he.Artifact.push(ve):Se.includes("enchantment")?he.Enchantment.push(ve):Se.includes("land")?he.Land.push(ve):he.Other.push(ve)}),Object.fromEntries(Object.entries(he).filter(([ce,ve])=>ve.length>0))},[H,Y]),Me=()=>{if(!Y||!H)return;const he={deck:{name:Y.name,commander:Y.commander},cards:H,exported_at:new Date},ce=JSON.stringify(he,null,2),ve=new Blob([ce],{type:"application/json"}),Se=URL.createObjectURL(ve),qe=document.createElement("a");qe.href=Se,qe.download=`${Y.name.replace(/[^a-z0-9]/yi,"_")}_backup.json`,document.body.appendChild(qe),qe.click(),document.body.removeChild(qe)},$e=he=>{let ce=he.split(/[\r\n~]/);ce.forEach((Se,qe)=>{Se=Se.split("(")[0],Se=Se.replace(/ *\[[^\]]*\] */g," "),Se=Se.replace(/ *<[^>]*> */g," "),Se=Se.trim(),ce[qe]=Se});const ve=ce.join("~");return encodeURIComponent(ve).replace(/%20/g,"+")+"~Z~"},ze=()=>{if(!Y||!H)return;const he=[];Y.commander&&he.push(`1 ${Y.commander.name}`),Y.commander_partner&&he.push(`1 ${Y.commander_partner.name}`),H.forEach(Se=>{const qe=Se.countInDeck||1,ar=Se.name||Se.data?.name||"";ar&&he.push(`${qe} ${ar}`)});const ce=he.join(`
`),ve=$e(ce);window.open(`https://edhpowerlevel.com?d=${ve}`,"_blank")},Be=()=>{if(!Y||!H)return;const he=[];Y.commander&&he.push(`1 ${Y.commander.name}`),Y.commander_partner&&he.push(`1 ${Y.commander_partner.name}`),H.forEach(Se=>{const qe=Se.countInDeck||1,ar=Se.name||Se.data?.name||"";ar&&he.push(`${qe} ${ar}`)});const ce=he.join(`
`),ve=encodeURIComponent(ce);window.open(`https://www.tcgplayer.com/massentry?c=${ve}`,"_blank")},qt=async he=>{try{await oi.addCardToDeck(r.uid,e,he),o(`Added ${he.name} to deck`,"success")}catch(ce){console.error(ce),o("Failed to add card to deck","error")}},wr=async(he,ce)=>{B({isOpen:!0,title:"Remove Card",message:`Are you sure you want to remove ${ce} from this deck?`,onConfirm:async()=>{try{await oi.removeCardFromDeck(r.uid,e,he),o(`Removed ${ce} from deck`,"success")}catch(ve){console.error(ve),o("Failed to remove card","error")}}})},rt=he=>{if(!he)return"https://placehold.co/250x350?text=No+Image";const ce=he.data||he;return C[ce.id]&&ce.card_faces&&ce.card_faces[1]&&ce.card_faces[1].image_uris?.normal?ce.card_faces[1].image_uris.normal:ce.image_uris?.normal?ce.image_uris.normal:ce.card_faces?.[0]?.image_uris?.normal?ce.card_faces[0].image_uris.normal:he.image_uri?he.image_uri:"https://placehold.co/250x350?text=No+Image"},lt=async(he,ce,ve)=>{if(he.stopPropagation(),Y.commander_partner&&N!==ve){S(ve);return}const Se=ce.data||ce;if(!(!Se.card_faces||Se.card_faces.length<2)){if(!C[Se.id]&&!Se.card_faces[1].image_uris){z(!0);try{o("Fetching back face data...","info");const qe=await fetch(`https://api.scryfall.com/cards/${Se.id}`);if(!qe.ok)throw new Error("Fetch failed");const ar=await qe.json(),Ni=ve===0?{commander:ar}:{commanderPartner:ar};await oi.updateDeck(r.uid,e,Ni),ve===0?Y.commander=ar:Y.commander_partner=ar,o("Commander data updated.","success")}catch(qe){console.error("Flip fix failed",qe),o("Could not load card back.","error")}finally{z(!1)}}A(qe=>({...qe,[Se.id]:!qe[Se.id]}))}},Ot=()=>{j(Y.name),x(!0)},ne=async()=>{try{await oi.updateDeck(r.uid,e,{name:w}),o("Deck renamed successfully","success"),x(!1),window.location.reload()}catch(he){console.error(he),o("Failed to rename deck","error")}},Le=async()=>{try{await oi.updateDeck(r.uid,e,{is_mockup:!Y.is_mockup}),o(`Deck set to ${Y.is_mockup?"Collection":"Mockup"} mode`,"info"),window.location.reload()}catch(he){console.error(he),o("Failed to update deck mode","error")}},Ke=()=>{B({isOpen:!0,title:"Delete Deck",message:"Are you sure you want to delete this deck? Cards inside will be returned to your collection binder.",onConfirm:async()=>{try{await oi.deleteDeck(r.uid,e),o("Deck deleted successfully","success"),t("/decks")}catch(he){console.error(he),o("Failed to delete deck","error")}}})},Lt=he=>{if(!he)return"";const ce=he.data||he;return C[ce.id]&&ce.card_faces&&ce.card_faces[1]&&ce.card_faces[1].image_uris?.art_crop?ce.card_faces[1].image_uris.art_crop:ce.image_uris?.art_crop?ce.image_uris.art_crop:ce.card_faces?.[0]?.image_uris?.art_crop?ce.card_faces[0].image_uris.art_crop:ce.image_uris?.normal?ce.image_uris.normal:he.image_uri?he.image_uri:""};if(G)return a.jsx("div",{className:"flex justify-center p-20",children:a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-500"})});if(ee)return a.jsxs("div",{className:"p-20 text-center text-red-500 text-xl font-bold",children:["Error loading deck: ",ee.message]});if(!Y)return null;const pe=N===0?Y.commander:Y.commander_partner||Y.commander,Re=Lt(pe),Xe={W:"https://svgs.scryfall.io/card-symbols/W.svg",U:"https://svgs.scryfall.io/card-symbols/U.svg",B:"https://svgs.scryfall.io/card-symbols/B.svg",R:"https://svgs.scryfall.io/card-symbols/R.svg",G:"https://svgs.scryfall.io/card-symbols/G.svg"};return a.jsxs("div",{className:"relative min-h-screen",children:[a.jsx("div",{className:"fixed inset-0 z-0 transition-all duration-1000 ease-in-out",style:{backgroundImage:`url(${Re})`,backgroundSize:"cover",backgroundPosition:"center"},children:a.jsx("div",{className:"absolute inset-0 bg-gray-950/60 backdrop-blur-[2px]"})}),a.jsxs("div",{className:"max-w-[1600px] mx-auto p-4 md:p-6 space-y-6 animate-fade-in pb-24 relative z-10",children:[a.jsx("div",{className:"sticky top-16 z-40 px-4 md:px-8 py-3 bg-gray-950/40 backdrop-blur-3xl border-b border-white/5 shadow-2xl transition-all duration-300 rounded-b-3xl mx-2",children:a.jsxs("div",{className:"max-w-[1600px] mx-auto flex flex-col lg:flex-row justify-between items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-6 w-full lg:w-auto",children:[a.jsx("button",{onClick:()=>t("/decks"),className:"p-2.5 bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white rounded-xl border border-white/5 transition-all shrink-0 group",title:"Back to Decks",children:a.jsx("svg",{className:"w-5 h-5 transform group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[p?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:w,onChange:he=>j(he.target.value),className:"bg-black/50 text-2xl font-black text-white border-b-2 border-indigo-500 outline-none px-2 py-1 w-full max-w-md backdrop-blur-sm rounded",autoFocus:!0}),a.jsx("button",{onClick:ne,className:"p-2 bg-green-600 rounded-lg hover:bg-green-500 text-white shadow-lg",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}):a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsxs("div",{className:"flex items-center gap-2 group",children:[a.jsx("h2",{className:"text-2xl md:text-4xl font-black text-white tracking-tighter uppercase truncate leading-tight",children:Y.name}),Pe&&a.jsx("button",{onClick:Ot,className:"p-1 opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity text-gray-500 hover:text-white",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),a.jsxs("div",{className:"flex items-center gap-3 pl-0.5",children:[a.jsxs("div",{className:"text-[11px] text-indigo-300 font-black uppercase tracking-[0.2em] opacity-80",children:[se.badge,"  ",se.theme]}),!be&&a.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border ${Pe?"bg-green-900/40 text-green-400 border-green-500/30":"bg-gray-800 text-gray-400 border-gray-700"}`,children:[_e," Access"]}),a.jsx("div",{className:"flex items-center gap-1",children:(()=>{const he=Y?.commander?.color_identity||[],ce=Y?.commander_partner?.color_identity||[];return[...new Set([...he,...ce])].map(Se=>a.jsx("img",{src:Xe[Se],alt:Se,className:"w-4 h-4 shadow-sm"},Se))})()})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-black/40 px-3 py-1.5 rounded-xl border border-white/5 backdrop-blur-md shadow-2xl",children:[a.jsx("span",{className:"bg-orange-600/20 text-orange-400 px-2.5 py-0.5 rounded-full text-[10px] font-black uppercase tracking-widest border border-orange-500/30",children:Y.format||"Commander"}),Y.is_mockup&&a.jsx("span",{className:"bg-red-600/20 text-red-400 px-2.5 py-0.5 rounded-full text-[10px] font-black uppercase tracking-widest border border-red-500/30",children:"Mockup"}),a.jsx("div",{className:"h-4 w-px bg-white/10 mx-1"}),a.jsxs("span",{className:"text-gray-400 text-xs font-bold font-mono",children:["$",je.toFixed(2)]})]}),a.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-2 text-indigo-300 hover:text-white transition-all text-[10px] md:text-xs font-black uppercase tracking-widest bg-indigo-500/20 hover:bg-indigo-500/30 px-4 md:px-5 py-2 rounded-2xl border border-indigo-500/30 shadow-xl shadow-indigo-500/10 active:scale-95",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"View Strategy"]}),a.jsxs("div",{className:"hidden sm:block text-[13px] text-white/30 italic font-medium tracking-tight border-l border-white/5 pl-4 ml-2 max-w-[200px] truncate",title:se.flavor_text,children:['"',se.flavor_text,'"']})]})]})]}),a.jsxs("div",{className:"hidden lg:flex items-center gap-2 bg-gray-950/50 p-1.5 rounded-2xl border border-gray-800 backdrop-blur shadow-inner",children:[Pe&&a.jsxs("button",{onClick:()=>m(!0),className:"bg-green-600 hover:bg-green-500 text-white font-black py-2.5 px-6 rounded-xl shadow-lg shadow-green-900/40 transition-all flex items-center gap-2 uppercase tracking-widest text-xs",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Collection"]}),a.jsx("button",{onClick:()=>d(!0),className:"p-2.5 bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white rounded-xl border border-gray-700 transition-all shadow-md",title:"Quick Search",disabled:!Pe,children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("div",{className:"w-px h-6 bg-gray-800 mx-1"}),a.jsxs("button",{onClick:()=>q(!0),className:"p-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl border border-indigo-500 transition-all shadow-md flex items-center gap-2",title:"Share Deck",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider hidden xl:block",children:"Share"})]}),a.jsxs("button",{onClick:()=>U(!0),className:"p-2.5 bg-indigo-500/20 hover:bg-indigo-500/40 text-indigo-300 hover:text-white rounded-xl border border-indigo-500/30 transition-all shadow-md flex items-center gap-2",title:"Run Deck Doctor Diagnosis",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider hidden xl:block",children:"Doctor"})]}),a.jsx("button",{onClick:Me,className:"p-2.5 bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white rounded-xl border border-gray-700 transition-all shadow-md",title:"Export JSON",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),Pe&&a.jsxs("div",{className:"relative group",children:[a.jsx("button",{className:"p-2.5 bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white rounded-xl border border-gray-700 transition-all shadow-md",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-gray-900 rounded-xl shadow-2xl border border-gray-800 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto transition-all z-50 overflow-hidden",children:[a.jsxs("button",{onClick:Le,className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-800 flex items-center gap-2 transition-colors border-b border-gray-800 text-gray-300",children:[a.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Y.is_mockup?"Switch to Collection":"Switch to Mockup"]}),a.jsxs("button",{onClick:Ke,className:"w-full text-left px-4 py-3 text-sm hover:bg-red-900/30 text-red-400 flex items-center gap-2 transition-colors",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Deck"]})]})]})]})]})}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 mb-6",children:ke.map((he,ce)=>{const ve=he.target>0?Math.min(he.current/he.target*100,100):0,Se=he.target>0&&he.current===he.target,qe=he.target>0&&he.current>he.target;return a.jsxs("div",{className:"bg-gray-950/30 p-3 rounded-xl border border-white/5 backdrop-blur-md shadow-lg group hover:border-indigo-500/30 transition-all hover:bg-gray-950/50",children:[a.jsxs("div",{className:"flex justify-between items-end mb-1",children:[a.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:he.label}),a.jsxs("span",{className:`text-xs font-mono font-bold ${Se?"text-green-400":qe?"text-orange-400":"text-indigo-300"}`,children:[he.current,a.jsx("span",{className:"text-gray-600 mx-0.5",children:"/"}),he.target||"?"]})]}),a.jsx("div",{className:"h-1.5 w-full bg-gray-900 rounded-full overflow-hidden border border-gray-700/30",children:a.jsx("div",{className:`h-full transition-all duration-700 ${Se?"bg-green-500":qe?"bg-orange-500":"bg-indigo-500"}`,style:{width:`${ve||0}%`}})})]},ce)})}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[a.jsxs("div",{className:"flex-1 min-w-0 bg-gray-950/40 backdrop-blur-3xl rounded-3xl shadow-2xl border border-white/10 order-2 lg:order-1 flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/5 bg-white/5 rounded-t-xl backdrop-blur-sm",children:[a.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Decklist"]}),xe>0&&a.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/50 px-3 py-1 rounded-full border border-gray-700",children:[a.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Acquired"}),a.jsxs("span",{className:`text-sm font-mono font-bold ${We===xe?"text-green-400":"text-orange-400"}`,children:[We,"/",xe]}),a.jsx("div",{className:"w-20 h-1.5 bg-gray-700 rounded-full overflow-hidden ml-1",children:a.jsx("div",{className:"h-full bg-green-500 transition-all duration-500",style:{width:`${We/xe*100}%`}})})]})]}),a.jsxs("div",{className:"flex bg-gray-900/50 rounded-lg p-1 gap-1 border border-gray-700",children:[a.jsx("button",{onClick:()=>fe("grid"),className:`p-1.5 rounded-md transition-all ${X==="grid"?"text-white bg-gray-700 shadow-sm":"text-gray-400 hover:text-white"}`,title:"Grid View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),a.jsx("button",{onClick:()=>fe("table"),className:`p-1.5 rounded-md transition-all ${X==="table"?"text-white bg-gray-700 shadow-sm":"text-gray-400 hover:text-white"}`,title:"Table View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]}),a.jsxs("div",{className:"p-4 space-y-8 min-h-[500px]",children:[Object.entries(Oe).length===0&&a.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:'Use the "Collection" button to start building your deck.'}),Object.entries(Oe).map(([he,ce])=>a.jsxs("div",{className:"animate-fade-in text-left",children:[a.jsxs("h4",{className:"text-sm font-bold text-indigo-300 border-b border-white/5 mb-4 pb-2 sticky top-0 bg-gray-950/60 backdrop-blur-md z-10 flex justify-between uppercase tracking-wider pl-1",children:[a.jsx("span",{children:he}),a.jsx("span",{className:"text-gray-500 text-xs bg-gray-900 px-2 py-0.5 rounded-full border border-gray-700",children:ce.reduce((ve,Se)=>ve+(Se.countInDeck||1),0)})]}),X==="grid"?a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 md:gap-4 px-1",children:ce.map(ve=>a.jsx($d,{card:ve,availableFoils:Ae,onRemove:wr,decks:Q,currentUser:n,showOwnerTag:!0,hideDeckTag:!0,hideOwnerTag:!0},ve.firestoreId||ve.id))}):a.jsx("div",{className:"space-y-1",children:ce.map((ve,Se)=>a.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-700/50 rounded-lg transition-colors text-sm group border border-transparent hover:border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"font-mono text-gray-500 w-6 text-center bg-gray-900 rounded py-0.5 text-xs",children:ve.countInDeck}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`font-medium ${ve.finish==="foil"?"text-yellow-200":"text-gray-200"}`,children:ve.name}),ve.finish!=="foil"&&Ae.has(ve.name)&&a.jsx("span",{className:"text-yellow-500 text-xs cursor-help",title:"Foil copy available in collection",children:""})]}),ve.finish==="foil"&&a.jsx("span",{className:"text-[10px] bg-yellow-900/40 text-yellow-500 px-1 rounded uppercase tracking-wider border border-yellow-800",children:"Foil"})]}),a.jsxs("div",{className:"flex items-center gap-4 text-gray-400",children:[a.jsx("span",{className:"hidden md:inline-block text-xs text-gray-500",children:ve.data?.type_line||ve.type_line||""}),a.jsx("span",{className:"font-mono w-16 text-right text-xs",children:ve.mana_cost||""}),a.jsxs("span",{className:"font-mono w-16 text-right text-green-400/80 text-xs",children:["$",(parseFloat(ve.prices?.[ve.finish==="foil"?"usd_foil":"usd"])||0).toFixed(2)]}),Pe&&a.jsx("button",{onClick:()=>wr(ve.firestoreId||ve.id,ve.name),className:"text-gray-600 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]},ve.id+Se))})]},he))]})]}),a.jsxs("div",{className:"w-full lg:w-80 space-y-6 shrink-0 order-1 lg:order-2",children:[Y.commander&&a.jsxs("div",{className:"bg-gray-950/40 backdrop-blur-3xl rounded-3xl shadow-2xl overflow-hidden border border-white/10 relative group",children:[a.jsxs("div",{className:"p-4 bg-white/5 border-b border-white/5 flex justify-between items-center",children:[a.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:Y.format?.toLowerCase()==="standard"?"Spotlight Card":Y.commander_partner?"Partners":"Commander"}),Y.commander_partner&&a.jsx("button",{onClick:()=>S(he=>he===0?1:0),className:"text-indigo-400 hover:text-indigo-300 text-xs font-bold uppercase tracking-wider transition-colors",children:"Swap View "})]}),a.jsxs("div",{className:"p-4 flex justify-center relative min-h-[350px]",children:[Y.commander_partner&&a.jsx("div",{className:`transition-all duration-500 ease-out transform absolute top-4 
                                            ${N===0?"scale-90 opacity-60 translate-x-4 -rotate-3 z-0 blur-[1px] hover:blur-0":"scale-100 opacity-100 z-10 translate-x-0 rotate-0"}
                                            cursor-pointer`,onClick:he=>lt(he,Y.commander_partner,1),children:a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:rt(Y.commander_partner),className:"w-full max-w-[250px] rounded-lg shadow-2xl skew-y-1",alt:Y.commander_partner.name}),(Y.commander_partner.card_faces||Y.commander_partner.data?.card_faces)&&N===1&&a.jsx("div",{className:"absolute top-2 right-2 bg-black/60 text-white p-1.5 rounded-full hover:bg-black/80 transition-colors backdrop-blur-sm",children:a.jsx("svg",{className:`w-4 h-4 ${E?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})}),a.jsx("div",{className:`transition-all duration-500 ease-out transform relative 
                                        ${Y.commander_partner&&N===1?"scale-90 opacity-60 -translate-x-4 rotate-3 z-0 blur-[1px] hover:blur-0 cursor-pointer":"scale-100 opacity-100 z-10"}
                                        `,onClick:he=>lt(he,Y.commander,0),children:a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:rt(Y.commander),className:"w-full max-w-[250px] rounded-lg shadow-2xl hover:shadow-indigo-500/30 transition-shadow duration-300",alt:Y.commander.name}),(Y.commander.card_faces||Y.commander.data?.card_faces)&&N===0&&a.jsx("div",{className:"absolute top-2 right-2 bg-black/60 text-white p-1.5 rounded-full hover:bg-black/80 transition-colors backdrop-blur-sm",children:a.jsx("svg",{className:`w-4 h-4 ${E?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})})]})]}),a.jsxs("div",{className:"bg-gray-950/40 backdrop-blur-3xl rounded-3xl shadow-2xl p-6 border border-white/10 relative overflow-hidden group",children:[a.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 group-hover:opacity-10 transition-opacity",children:a.jsx("span",{className:"text-8xl",children:""})}),a.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 animate-pulse"}),c," Tools"]}),a.jsxs("div",{className:"space-y-3 relative z-10",children:[a.jsxs("button",{onClick:()=>{Y.format?.toLowerCase()==="standard"?o("Standard AI Deck Tech coming soon! Please verify on Discord to prioritize.","info",0):t(`/decks/${e}/build`)},className:"w-full py-4 bg-indigo-600/10 hover:bg-indigo-600/20 text-indigo-300 rounded-xl border border-indigo-500/20 hover:border-indigo-500/40 transition-all font-black uppercase text-[10px] tracking-widest flex items-center justify-center gap-3 group/btn",children:[a.jsx("span",{className:"text-lg group-hover/btn:scale-110 transition-transform",children:""}),c,"'s Deck Builder"]}),a.jsxs("button",{onClick:()=>I(!0),className:"w-full py-4 bg-indigo-900/10 hover:bg-indigo-900/20 text-indigo-400 rounded-xl border border-indigo-500/10 hover:border-indigo-500/30 transition-all font-black uppercase text-[10px] tracking-widest flex items-center justify-center gap-3",children:[a.jsx("span",{className:"text-lg",children:""}),"Full Deck Stats"]})]})]}),a.jsxs("div",{className:"bg-gray-950/40 backdrop-blur-3xl rounded-3xl shadow-2xl overflow-hidden border border-white/10 relative group",children:[a.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 group-hover:opacity-10 transition-opacity",children:a.jsx("span",{className:"text-8xl",children:""})}),a.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4 p-4 pb-0 flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500 animate-pulse"}),"External Sites"]}),a.jsxs("div",{className:"space-y-3 relative z-10 p-4 pt-3",children:[a.jsxs("button",{onClick:ze,className:"w-full py-4 bg-purple-600/10 hover:bg-purple-600/20 text-purple-300 rounded-xl border border-purple-500/20 hover:border-purple-500/40 transition-all font-black uppercase text-[10px] tracking-widest flex items-center justify-center gap-3 group/btn",children:[a.jsx("span",{className:"text-lg group-hover/btn:scale-110 transition-transform",children:""}),"EDH Power Level"]}),a.jsxs("button",{onClick:Be,className:"w-full py-4 bg-green-900/10 hover:bg-green-900/20 text-green-400 rounded-xl border border-green-500/10 hover:border-green-500/30 transition-all font-black uppercase text-[10px] tracking-widest flex items-center justify-center gap-3",children:[a.jsx("span",{className:"text-lg",children:""}),"Buy on TCGPlayer"]})]})]})]})]}),a.jsx(b2,{isOpen:f,onClose:()=>d(!1),onAddCard:qt}),a.jsx(lH,{isOpen:P.isOpen,onClose:()=>B({...P,isOpen:!1}),onConfirm:P.onConfirm,title:P.title,message:P.message,isDanger:!0,confirmText:"Remove"}),a.jsx(Ioe,{isOpen:T,onClose:()=>R(!1),deck:Y,cards:H}),a.jsx(uH,{isOpen:h,onClose:()=>m(!1),deck:Y,deckCards:H}),a.jsx(ER,{isOpen:$,onClose:()=>I(!1),cards:H,deckName:Y.name}),a.jsx("div",{className:"lg:hidden fixed bottom-24 left-1/2 -translate-x-1/2 z-[60] w-[90%] max-w-sm",children:a.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-2xl px-4 py-3 rounded-2xl border border-white/10 shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex items-center justify-between gap-3 animate-slide-up",children:[a.jsxs("button",{onClick:()=>m(!0),className:"flex-1 bg-green-600 hover:bg-green-500 text-white font-black py-3 px-4 rounded-xl shadow-lg shadow-green-900/40 transition-all flex items-center justify-center gap-2 uppercase tracking-widest text-[10px]",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Collection"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>d(!0),className:"p-3 bg-gray-800 hover:bg-gray-700 text-gray-300 rounded-xl border border-gray-700 transition-all shadow-md active:scale-95",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("div",{className:"w-px h-8 bg-gray-800 mx-1"}),a.jsxs("div",{className:"relative group",children:[a.jsx("button",{className:"p-3 bg-gray-800 hover:bg-gray-700 text-gray-300 rounded-xl border border-gray-700 transition-all shadow-md active:scale-95",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),a.jsxs("div",{className:"absolute right-0 bottom-full mb-3 w-48 bg-gray-900 rounded-xl shadow-2xl border border-gray-800 opacity-0 pointer-events-none group-focus-within:opacity-100 group-focus-within:pointer-events-auto transition-all z-[70] overflow-hidden",children:[a.jsxs("button",{onClick:Me,className:"w-full text-left px-4 py-3 text-xs hover:bg-gray-800 text-gray-300 flex items-center gap-2 border-b border-gray-800",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export JSON"]}),a.jsxs("button",{onClick:Le,className:"w-full text-left px-4 py-3 text-xs hover:bg-gray-800 text-gray-300 flex items-center gap-2 border-b border-gray-800",children:[a.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Y.is_mockup?"To Collection":"To Mockup"]}),a.jsxs("button",{onClick:Ke,className:"w-full text-left px-4 py-3 text-xs hover:bg-red-900/30 text-red-400 flex items-center gap-2 transition-colors",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Deck"]})]})]})]})]})})]}),a.jsx(Goe,{isOpen:D,onClose:()=>q(!1),deck:Y,onUpdateDeck:he=>Object.assign(Y,he)}),a.jsx(PR,{isOpen:O,onClose:()=>U(!1),deck:Y,cards:H,isOwner:Pe})]})};function qoe(){const[e,t]=y.useState([]),[r,n]=y.useState(!0),[s,o]=y.useState(null);return y.useEffect(()=>{(async()=>{try{const d=(await Fe.get("/sets")).data||[];t(d),n(!1)}catch(f){console.error("Error fetching sets:",f),o(f),n(!1)}})()},[]),{sets:e,loading:r,error:s}}const RR=({value:e,onChange:t,onSelect:r,placeholder:n="Find card in sets..."})=>{const[s,o]=y.useState([]),[c,f]=y.useState(!1),[d,h]=y.useState(!1),m=y.useRef(null);y.useEffect(()=>{const x=w=>{m.current&&!m.current.contains(w.target)&&f(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),y.useEffect(()=>{const w=setTimeout(async()=>{if(e.length<2){o([]);return}h(!0);try{const j=await Fe.get("/cards/autocomplete",{q:e});o(j.data||[]),f(!0)}catch(j){console.error("Autocomplete failed",j)}finally{h(!1)}},300);return()=>clearTimeout(w)},[e]);const p=x=>{t(x),f(!1),r&&r(x)};return a.jsxs("div",{ref:m,className:"relative w-full",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d?a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-indigo-400"}):a.jsx("svg",{className:"h-4 w-4 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-4 py-2 bg-gray-900/50 border border-indigo-500/20 rounded-xl text-gray-300 placeholder-gray-600 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none text-sm",placeholder:n,value:e,onChange:x=>t(x.target.value),onFocus:()=>e.length>=2&&f(!0)}),c&&s.length>0&&a.jsx("div",{className:"absolute z-50 w-full mt-2 bg-gray-900 border border-white/10 rounded-xl shadow-2xl overflow-hidden animate-fade-in",children:s.map((x,w)=>a.jsx("button",{onClick:()=>p(x),className:"w-full text-left px-4 py-2.5 text-sm text-gray-300 hover:bg-indigo-600 hover:text-white transition-colors border-b border-white/5 last:border-0",children:x},w))})]})},Koe=()=>{const{sets:e,loading:t,error:r}=qoe(),{cards:n}=da(),[s,o]=y.useState(""),[c,f]=y.useState(sessionStorage.getItem("mtg_card_search")||""),[d,h]=y.useState(null),[m,p]=y.useState(!1),[x,w]=y.useState(!1),j=Un();y.useEffect(()=>{const z=setTimeout(async()=>{const P=c.trim();if(!P){h(null),sessionStorage.removeItem("mtg_card_search");return}sessionStorage.setItem("mtg_card_search",P),p(!0);try{const B=await Fe.get("/cards/sets-for-card",{name:P});h(new Set(B.data||[]))}catch(B){console.error("Local card search failed",B),h(new Set)}finally{p(!1)}},500);return()=>clearTimeout(z)},[c]);const N=y.useMemo(()=>{const E=new Map;n&&n.forEach(P=>{if(P.is_wishlist||P.deck_id)return;const B=(P.set||P.set_code)?.toLowerCase(),T=P.name;E.has(B)||E.set(B,new Set),T&&E.get(B).add(T)});const z={};return E.forEach((P,B)=>{z[B]=P.size}),z},[n]),S=y.useMemo(()=>{if(!e)return{};const E={Expansion:[],Core:[],Commander:[],Masters:[],"Draft Innovation":[],Other:[]},z={expansion:"Expansion",core:"Core",commander:"Commander",masters:"Masters",draft_innovation:"Draft Innovation"};return e.forEach(P=>{const B=N[P.code.toLowerCase()]||0,T=B>0,R=!s||P.name.toLowerCase().includes(s.toLowerCase())||P.code.toLowerCase().includes(s.toLowerCase()),$=!d||d.has(P.code.toLowerCase());if(!R||!(!x||T)||!$)return;const O=z[P.set_type]||"Other";E[O]?E[O].push({...P,ownedCount:B}):E.Other.push({...P,ownedCount:B})}),Object.keys(E).forEach(P=>{E[P].sort((B,T)=>new Date(T.released_at)-new Date(B.released_at))}),E},[e,s,x,N,d]),C=E=>{j(`/sets/${E}`)};if(t)return a.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-900",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})});if(r)return a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-red-500 bg-red-500/10 p-8 rounded-2xl border border-red-500/20 max-w-md",children:[a.jsx("p",{className:"font-bold text-xl mb-2",children:"Error loading sets"}),a.jsx("p",{className:"text-sm opacity-80",children:r.message})]})});const A=["Expansion","Core","Commander","Masters","Draft Innovation","Other"];return a.jsxs("div",{className:"min-h-screen bg-gray-900 pb-20",children:[a.jsx("div",{className:"bg-gray-950/80 backdrop-blur-xl border-b border-white/10 sticky top-16 z-30 py-3 md:py-4",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center gap-4",children:[a.jsx("div",{className:"flex items-center gap-4 w-full lg:w-auto",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("h1",{className:"text-xl md:text-2xl font-black text-white uppercase tracking-tighter leading-none",children:["Set ",a.jsx("span",{className:"text-indigo-500",children:"Library"})]}),a.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mt-1 opacity-70",children:"Browse Collections"})]})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full lg:w-auto lg:flex-1 lg:justify-end",children:[a.jsxs("div",{className:"relative flex-grow max-w-xs group",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-3.5 w-3.5 text-gray-500 group-focus-within:text-indigo-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("input",{type:"text",className:"block w-full pl-9 pr-4 py-2 bg-gray-900/50 border border-white/5 rounded-lg text-xs text-gray-300 placeholder-gray-600 focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all outline-none",placeholder:"Search sets...",value:s,onChange:E=>o(E.target.value)})]}),a.jsx("div",{className:"relative flex-grow max-w-sm",children:a.jsx(RR,{value:c,onChange:f,placeholder:"Find card in sets..."})}),a.jsx("button",{onClick:()=>w(!x),className:`px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${x?"bg-indigo-600 text-white shadow-lg":"bg-gray-800/80 text-gray-400 border border-white/5 hover:bg-gray-700"}`,children:x?"Owned":"Show All"})]})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-16",children:A.map(E=>S[E]&&S[E].length>0&&a.jsxs("div",{className:"animate-fade-in",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[a.jsxs("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter flex items-center gap-3",children:[E,a.jsx("div",{className:"h-[2px] w-12 bg-indigo-500/50"})]}),a.jsxs("span",{className:"text-[10px] font-black text-gray-500 bg-gray-800/50 border border-white/5 px-3 py-1 rounded-full uppercase tracking-widest",children:[S[E].length," Sets"]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6",children:S[E].map(z=>{const P=Math.min(100,Math.round(z.ownedCount/z.card_count*100)),B=P>=100;return a.jsxs("div",{onClick:()=>C(z.code),className:"relative bg-gray-800/40 backdrop-blur-md rounded-2xl border border-white/5 p-5 group cursor-pointer transition-all duration-300 hover:scale-[1.02] hover:border-indigo-500/30 overflow-hidden min-h-[160px] flex flex-col justify-between",children:[a.jsx("div",{className:"absolute bottom-0 left-0 right-0 transition-all duration-1000 ease-out z-0",style:{height:`${P}%`,background:B?"linear-gradient(to top, rgba(34, 197, 94, 0.15) 0%, transparent 100%)":"linear-gradient(to top, rgba(79, 70, 229, 0.15) 0%, transparent 100%)"}}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-900/80 rounded-xl flex items-center justify-center border border-white/5 shadow-inner",children:z.icon_svg_uri?a.jsx("img",{src:z.icon_svg_uri,alt:z.name,className:"w-6 h-6 filter invert opacity-60 group-hover:opacity-100 transition-opacity"}):a.jsx("span",{className:"text-xs font-black text-gray-500",children:z.code.toUpperCase()})}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-[10px] font-black text-gray-500 block uppercase tracking-widest leading-none mb-1",children:"Code"}),a.jsx("span",{className:"text-xs font-bold text-indigo-400 mb-2",children:z.code.toUpperCase()}),a.jsx("span",{className:"text-[10px] font-black text-gray-500 block uppercase tracking-widest leading-none mb-1",children:"Release"}),a.jsx("span",{className:"text-xs font-bold text-gray-400",children:z.released_at?.split("-")[0]})]})})]}),a.jsx("h3",{className:"text-sm font-black text-white leading-snug group-hover:text-indigo-400 transition-colors",children:z.name})]}),a.jsxs("div",{className:"relative z-10 pt-4 mt-4 border-t border-white/5 flex items-end justify-between",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1",children:"Collected"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:`text-lg font-black tabular-nums ${B?"text-green-400":"text-indigo-400"}`,children:z.ownedCount}),a.jsxs("span",{className:"text-gray-600 text-[10px] font-bold",children:["/ ",z.card_count]})]})]}),a.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-[10px] font-black ${B?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-gray-950/80 text-gray-400 border border-white/5"}`,children:[P,"%"]})]})]},z.id)})})]},E))})]})},Yoe=()=>{const{setCode:e}=of(),[t,r]=y.useState([]),[n,s]=y.useState(!0),[o,c]=y.useState(null),[f,d]=y.useState("all"),[h,m]=y.useState(sessionStorage.getItem("mtg_card_search")||""),{currentUser:p,userProfile:x}=vt(),{addToast:w}=rn(),{cards:j,refresh:N}=da();y.useEffect(()=>{h?sessionStorage.setItem("mtg_card_search",h):sessionStorage.removeItem("mtg_card_search")},[h]);const S=y.useMemo(()=>{const P=new Map;return j&&j.forEach(B=>{const T=B.scryfall_id||B.data&&(B.data.scryfall_id||B.data.id)||B.id;P.has(T)||P.set(T,[]),P.get(T).push(B)}),P},[j]),C=y.useMemo(()=>{const P=new Set(t.map(R=>R.name)),B=new Set;let T=0;return t.forEach(R=>{const $=S.get(R.scryfall_id||R.id)||[],I=$.filter(U=>U.finish==="nonfoil"&&!U.is_wishlist).reduce((U,D)=>U+(D.count||1),0),O=$.filter(U=>U.finish==="foil"&&!U.is_wishlist).reduce((U,D)=>U+(D.count||1),0);if(I>0||O>0){B.add(R.name);const U=parseFloat(R.prices?.usd||0)*I,D=parseFloat(R.prices?.usd_foil||0)*O;T+=U+D}}),{collected:B.size,total:P.size,value:T.toFixed(2)}},[t,S]),A=y.useMemo(()=>{let P=t;if(f!=="all"&&(P=P.filter(B=>{const R=(S.get(B.scryfall_id||B.id)||[]).some($=>!$.is_wishlist&&($.count||0)>0);return f==="owned"?R:!R})),h){const B=h.toLowerCase();P=P.filter(T=>T.name.toLowerCase().includes(B)||(T.data?.name_en||"").toLowerCase().includes(B))}return P},[t,S,f,h]);y.useEffect(()=>{(async()=>{if(e){s(!0);try{const B=await Fe.get(`/sets/${e}/cards`);r(B.data||[]),c(null)}catch(B){console.error("Failed to load set cards",B),c(B.message)}finally{s(!1)}}})()},[e]);const E=async(P,B,T)=>{if(!p)return w("Please log in","error");try{const R=P.id,$=S.get(R)||[],I=B==="foil"?"foil":"nonfoil",O=$.find(U=>U.finish===I&&!U.deck_id&&!U.is_wishlist);T>0?O?(await Wr.updateCard(O.id,{count:(O.count||1)+1}),w(`Added ${I} ${P.name}`,"success")):(await Wr.addCardToCollection(p.uid,P,1,I),w(`Added new ${I} ${P.name}`,"success")):O&&((O.count||1)>1?(await Wr.updateCard(O.id,{count:O.count-1}),w(`Removed ${I} ${P.name}`,"info")):(await Wr.removeCard(O.id),w(`Removed last ${I} ${P.name}`,"info"))),await N()}catch(R){console.error("Update failed",R),w("Failed to update collection","error")}},z=async(P,B)=>{if(!p)return w("Please log in","error");try{const T=P.id,$=(S.get(T)||[]).find(I=>I.is_wishlist&&!I.deck_id);B>0?$?(await Wr.updateCard($.id,{count:($.count||1)+1}),w(`Increased wishlist for ${P.name}`,"success")):(await Wr.addCardToCollection(p.uid,P,1,"nonfoil",!0),w(`Added ${P.name} to wishlist`,"success")):$&&(($.count||1)>1?(await Wr.updateCard($.id,{count:$.count-1}),w(`Decreased wishlist for ${P.name}`,"info")):(await Wr.removeCard($.id),w(`Removed ${P.name} from wishlist`,"info"))),await N()}catch(T){console.error("Wishlist update failed",T),w("Failed to update wishlist","error")}};return a.jsxs("div",{className:"min-h-screen bg-gray-900 pb-20",children:[a.jsx("div",{className:"sticky top-16 z-30 bg-gray-950/80 backdrop-blur-xl border-b border-white/10 shadow-2xl",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-3",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(kt,{to:"/sets",className:"p-1.5 bg-gray-800/50 hover:bg-gray-700 rounded-lg text-gray-400 hover:text-white transition-all group",title:"Back to Sets",children:a.jsx("svg",{className:"w-5 h-5 transform group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl md:text-2xl font-black text-white uppercase tracking-tighter leading-none",children:[e," ",a.jsx("span",{className:"text-gray-500 font-bold ml-1",children:"Library"})]}),a.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mt-1 opacity-70",children:"Expansion Collection"})]})]}),a.jsxs("div",{className:"flex items-center gap-6 bg-gray-900/50 border border-white/5 px-4 py-2 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[9px] font-black uppercase text-gray-500 tracking-wider",children:"Collected"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-sm font-black text-indigo-400",children:C.collected}),a.jsxs("span",{className:"text-gray-600 font-bold text-[10px]",children:["/ ",C.total]})]})]}),a.jsx("div",{className:"w-[1px] h-4 bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[9px] font-black uppercase text-gray-500 tracking-wider",children:"Estimate Value"}),a.jsxs("span",{className:"text-sm font-black text-emerald-400 tabular-nums",children:["$",C.value]})]})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 pt-3 border-t border-white/5",children:[a.jsx("div",{className:"flex bg-gray-900/80 rounded-lg p-0.5 border border-white/5 w-full md:w-auto overflow-hidden",children:["all","owned","missing"].map(P=>a.jsx("button",{onClick:()=>d(P),className:`flex-1 md:flex-none px-4 py-1.5 rounded-md text-[10px] font-black uppercase tracking-widest transition-all duration-300 ${f===P?"bg-indigo-600 text-white shadow-lg":"text-gray-500 hover:text-white hover:bg-white/5"}`,children:P},P))}),a.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto md:flex-1 justify-end",children:[a.jsx("div",{className:"relative w-full max-w-sm",children:a.jsx(RR,{value:h,onChange:m,placeholder:"Filter cards..."})}),h&&a.jsx("button",{onClick:()=>{m(""),sessionStorage.removeItem("mtg_card_search")},className:"p-2 bg-indigo-500/10 border border-indigo-500/30 text-indigo-400 hover:bg-indigo-500/20 hover:text-white rounded-lg transition-all",title:"Clear filter",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:n?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6",children:Array.from({length:12}).map((P,B)=>a.jsx(ET,{},B))}):o?a.jsxs("div",{className:"text-center text-red-500 py-12 bg-red-500/10 rounded-2xl border border-red-500/20",children:["Error loading set: ",o]}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:A.map((P,B)=>{const T=S.get(P.scryfall_id||P.id)||[],R=T.filter(O=>O.finish==="nonfoil"&&!O.is_wishlist).reduce((O,U)=>O+(U.count||1),0),$=T.filter(O=>O.finish==="foil"&&!O.is_wishlist).reduce((O,U)=>O+(U.count||1),0),I=T.filter(O=>O.is_wishlist).reduce((O,U)=>O+(U.count||1),0);return a.jsx(eT,{card:P,normalCount:R,foilCount:$,wishlistCount:I,onUpdateCount:E,onUpdateWishlistCount:z,currentUser:x,showOwnerTag:!0},P.id||B)})})})]})},Xoe=({isOpen:e,onClose:t,mode:r="global"})=>{const{currentUser:n}=vt(),{addToast:s}=rn(),o=y.useRef(null),[c,f]=y.useState(null),[d,h]=y.useState(!1),[m,p]=y.useState("cards"),[x,w]=y.useState("merge"),[j,N]=y.useState({checkCollection:!0,addToCollection:!0}),S=A=>{const E=A.target.files[0];if(!E)return;const z=new FileReader;z.onload=P=>{try{const B=JSON.parse(P.target.result);if(B.deck&&B.cards)p("deck"),f(B);else if(B.collection&&typeof B.collection=="object"&&!Array.isArray(B.collection)){const T=Object.values(B.collection);p("cards"),f({cards:T})}else if(Array.isArray(B))p("cards"),f({cards:B});else if(B.cards&&Array.isArray(B.cards))p("cards"),f(B);else if(typeof B=="object"){const T=Object.values(B).find(R=>Array.isArray(R)&&R.length>0&&(R[0].name||R[0].id));T?(p("cards"),f({cards:T})):(console.error("Invalid JSON structure",B),s("Invalid JSON: Could not find card data","error"))}else s("Invalid JSON format","error")}catch(B){console.error(B),s("Failed to parse JSON","error")}},z.readAsText(E)},C=async()=>{if(c){h(!0);try{if(m==="cards")await Wr.importBatch(n.uid,c.cards,x),s(`Successfully imported ${c.cards.length} cards`,"success"),t();else if(m==="deck"){const A=await oi.importDeck(n.uid,c.deck,c.cards,j);A.missingCards?.length>0?s(`Imported deck with ${A.missingCards.length} missing cards`,"warning"):s("Deck imported successfully","success"),t()}}catch(A){console.error(A),s("Import failed","error")}finally{h(!1)}}};return e?qr.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl border border-gray-700 overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-700 bg-gray-900/50 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx("svg",{className:"w-6 h-6 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import Data"]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"p-6 space-y-6",children:c?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Detected Content"}),a.jsx("p",{className:"text-white font-bold text-lg",children:m==="cards"?`Collection (${c.cards?.length||0} cards)`:`Deck: ${c.deck?.name} (${c.cards?.length||0} cards)`})]}),a.jsx("button",{onClick:()=>f(null),className:"text-sm text-red-400 hover:text-red-300 underline",children:"Change File"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider border-b border-gray-700 pb-2",children:"Import Options"}),m==="cards"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border border-gray-700 hover:bg-gray-700/50 cursor-pointer transition-colors",children:[a.jsx("input",{type:"radio",name:"replaceMode",checked:x==="merge",onChange:()=>w("merge"),className:"mt-1 bg-gray-900 border-gray-600 text-indigo-600 focus:ring-indigo-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"block text-white font-medium",children:"Merge (Recommended)"}),a.jsx("span",{className:"block text-gray-400 text-sm",children:"Add records to your existing collection. Updates if exists."})]})]}),a.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border border-red-900/30 hover:bg-red-900/10 cursor-pointer transition-colors",children:[a.jsx("input",{type:"radio",name:"replaceMode",checked:x==="replace",onChange:()=>w("replace"),className:"mt-1 bg-gray-900 border-gray-600 text-red-600 focus:ring-red-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"block text-white font-medium",children:"Replace (Use with Caution)"}),a.jsx("span",{className:"block text-red-300 text-sm",children:"Delete your ENTIRE current collection and replace it with this file."})]})]})]}),m==="deck"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",checked:j.checkCollection,onChange:A=>N(E=>({...E,checkCollection:A.target.checked})),className:"rounded bg-gray-700 border-gray-600 text-indigo-600 focus:ring-indigo-500"}),a.jsx("span",{className:"text-gray-300",children:"Use existing unassigned copies from collection"})]}),a.jsxs("label",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",checked:j.addToCollection,onChange:A=>N(E=>({...E,addToCollection:A.target.checked})),className:"rounded bg-gray-700 border-gray-600 text-indigo-600 focus:ring-indigo-500"}),a.jsx("span",{className:"text-gray-300",children:"Add missing cards to collection automatically"})]})]})]})]}):a.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-xl p-8 flex flex-col items-center justify-center cursor-pointer hover:border-indigo-500 hover:bg-gray-700/30 transition-all group",onClick:()=>o.current?.click(),children:[a.jsx("svg",{className:"w-12 h-12 text-gray-500 group-hover:text-indigo-400 mb-4 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a.jsx("p",{className:"text-gray-300 font-medium",children:"Click to select backup JSON"}),a.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Supports Collection exports and Deck exports"}),a.jsx("input",{type:"file",ref:o,onChange:S,accept:".json",className:"hidden"})]})}),a.jsxs("div",{className:"p-6 border-t border-gray-700 bg-gray-900/50 flex justify-end gap-3",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",disabled:d,children:"Cancel"}),a.jsx("button",{onClick:C,disabled:!c||d,className:`px-6 py-2 rounded-lg font-bold text-white transition-all shadow-lg ${d?"bg-indigo-800 cursor-wait":x==="replace"&&m==="cards"?"bg-red-600 hover:bg-red-500 shadow-red-500/20":"bg-indigo-600 hover:bg-indigo-500 shadow-indigo-500/20"}`,children:d?"Importing...":"Start Import"})]})]})}),document.body):null},Joe=({isOpen:e,onClose:t})=>{const{userProfile:r,refreshUserProfile:n}=vt(),[s,o]=y.useState(!1),[c,f]=y.useState(r?.settings?.helper?.name||""),[d,h]=y.useState(r?.settings?.helper?.type||""),[m,p]=y.useState(r?.settings?.helper?.personality||""),[x,w]=y.useState(!1),[j,N]=y.useState([]),[S,C]=y.useState(""),[A,E]=y.useState(!1),[z,P]=y.useState({});Te.useEffect(()=>{if(e){const I=r?.settings?.helper||{};f(I.name||""),h(I.type||""),p(I.personality||""),o(!1),N([]),P({})}},[e,r]);const B=async()=>{w(!0);try{const O={...r?.settings||{},helper:{name:c,type:d,personality:m}};await Fe.updateUser(r.id,{settings:O}),await n(),t()}catch(I){console.error(I),alert("Failed to save helper.")}finally{w(!1)}},T=async()=>{o(!0),E(!0),P({}),N([]);try{const I=r?.settings?.geminiApiKey;if(!I)throw new Error("API Key missing");const O=await Ln.forgeHelperChat(I,[],{});N([{role:"model",content:O.aiResponse}])}catch(I){console.error(I),N([{role:"model",content:"Error connecting to the Forge. Please try again."}])}finally{E(!1)}},R=async()=>{if(!S.trim())return;const I=S;C(""),N(O=>[...O,{role:"user",content:I}]),E(!0);try{const O=r?.settings?.geminiApiKey,U=j.map(q=>({role:q.role,content:q.content}));U.push({role:"user",content:I});const D=await Ln.forgeHelperChat(O,U,z);P(D.updatedDraft||{}),N(q=>[...q,{role:"model",content:D.aiResponse}])}catch(O){console.error(O),N(U=>[...U,{role:"model",content:"Reviewing the blueprints... (Error, try again)"}])}finally{E(!1)}},$=()=>{z.name&&f(z.name),z.type&&h(z.type),z.personality&&p(z.personality),o(!1)};return e?a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-2xl overflow-hidden shadow-2xl flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-900",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-emerald-500",children:"Helper Settings"}),a.jsx("span",{className:"text-xs bg-gray-800 text-gray-500 px-2 py-1 rounded border border-gray-700",children:"Beta"})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"p-6 flex-1 overflow-y-auto",children:s?a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"bg-gray-800/30 p-4 rounded-lg mb-4 text-sm text-gray-400 flex justify-between items-center",children:[a.jsx("span",{children:"Forging new identity..."}),a.jsx("button",{onClick:()=>o(!1),className:"text-white hover:underline",children:"Cancel"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4 p-2 bg-gray-950/30 rounded-lg border border-gray-800",children:[j.map((I,O)=>a.jsx("div",{className:`flex ${I.role==="user"?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`max-w-[85%] p-3 rounded-xl text-sm ${I.role==="user"?"bg-emerald-600 text-white":"bg-gray-800 text-gray-200"}`,children:I.content})},O)),A&&a.jsx("div",{className:"flex justify-start",children:a.jsx("span",{className:"animate-pulse text-emerald-500",children:"..."})})]}),(z.name||z.type)&&a.jsxs("div",{className:"bg-black/40 p-3 rounded border border-emerald-500/30 mb-4 flex gap-4 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Name:"})," ",a.jsx("span",{className:"text-white",children:z.name||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Type:"})," ",a.jsx("span",{className:"text-white",children:z.type||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Personality:"})," ",a.jsx("span",{className:"text-white",children:z.personality||"-"})]}),a.jsx("button",{onClick:$,className:"ml-auto bg-emerald-600 text-white px-3 py-1 rounded hover:bg-emerald-500",children:"Apply This"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:S,onChange:I=>C(I.target.value),onKeyDown:I=>I.key==="Enter"&&R(),placeholder:"Describe your helper...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-emerald-500 outline-none"}),a.jsx("button",{onClick:R,disabled:A,className:"bg-emerald-600 p-2 rounded-lg text-white",children:""})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700 flex gap-4 items-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-500 to-emerald-700 rounded-full flex items-center justify-center text-2xl shadow-lg",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:c||"Unknown Helper"}),a.jsx("p",{className:"text-emerald-400 text-sm font-medium",children:d||"Generic Construct"}),a.jsxs("p",{className:"text-gray-400 text-sm italic mt-1",children:['"',m||"Standard protocol.",'"']})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Name"}),a.jsx("input",{type:"text",value:c,onChange:I=>f(I.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-emerald-500 outline-none"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Type"}),a.jsx("input",{type:"text",value:d,onChange:I=>h(I.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-emerald-500 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Personality"}),a.jsx("input",{type:"text",value:m,onChange:I=>p(I.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-emerald-500 outline-none"})]})]})]}),a.jsxs("div",{className:"flex justify-between pt-4 border-t border-gray-800",children:[a.jsxs("button",{onClick:T,className:"text-emerald-400 hover:text-emerald-300 font-bold flex items-center gap-2 px-4 py-2 hover:bg-emerald-900/20 rounded-lg transition-colors",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Re-Forge Persona"]}),a.jsx("button",{onClick:B,disabled:x,className:"bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-2 px-6 rounded-lg transition-all shadow-lg shadow-emerald-500/20 disabled:opacity-50",children:x?"Saving...":"Save Changes"})]})]})})]})}):null},Qoe=typeof document<"u"?Te.useLayoutEffect:()=>{},bo=e=>{var t;return(t=e?.ownerDocument)!==null&&t!==void 0?t:document},al=e=>e&&"window"in e&&e.window===e?e:bo(e).defaultView||window;function Zoe(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function ele(e){return Zoe(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let tle=!1;function pj(){return tle}function IR(e,t){if(!pj())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let r=t;for(;r!==null;){if(r===e)return!0;r.tagName==="SLOT"&&r.assignedSlot?r=r.assignedSlot.parentNode:ele(r)?r=r.host:r=r.parentNode}return!1}const z1=(e=document)=>{var t;if(!pj())return e.activeElement;let r=e.activeElement;for(;r&&"shadowRoot"in r&&(!((t=r.shadowRoot)===null||t===void 0)&&t.activeElement);)r=r.shadowRoot.activeElement;return r};function LR(e){return pj()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function rle(e){if(nle())e.focus({preventScroll:!0});else{let t=ale(e);e.focus(),ile(t)}}let W0=null;function nle(){if(W0==null){W0=!1;try{document.createElement("div").focus({get preventScroll(){return W0=!0,!0}})}catch{}}return W0}function ale(e){let t=e.parentNode,r=[],n=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==n;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&r.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return n instanceof HTMLElement&&r.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),r}function ile(e){for(let{element:t,scrollTop:r,scrollLeft:n}of e)t.scrollTop=r,t.scrollLeft=n}function fp(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let r=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(r)&&r.some(n=>e.test(n.brand))||e.test(window.navigator.userAgent)}function DR(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function lu(e){let t=null;return()=>(t==null&&(t=e()),t)}const ug=lu(function(){return DR(/^Mac/i)}),sle=lu(function(){return DR(/^iPad/i)||ug()&&navigator.maxTouchPoints>1}),ole=lu(function(){return fp(/AppleWebKit/i)&&!lle()}),lle=lu(function(){return fp(/Chrome/i)}),cle=lu(function(){return fp(/Android/i)}),ule=lu(function(){return fp(/Firefox/i)});function rf(e,t,r=!0){var n,s;let{metaKey:o,ctrlKey:c,altKey:f,shiftKey:d}=t;ule()&&(!((s=window.event)===null||s===void 0||(n=s.type)===null||n===void 0)&&n.startsWith("key"))&&e.target==="_blank"&&(ug()?o=!0:c=!0);let h=ole()&&ug()&&!sle()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:o,ctrlKey:c,altKey:f,shiftKey:d}):new MouseEvent("click",{metaKey:o,ctrlKey:c,altKey:f,shiftKey:d,detail:1,bubbles:!0,cancelable:!0});rf.isOpening=r,rle(e),e.dispatchEvent(h),rf.isOpening=!1}rf.isOpening=!1;function BR(){let e=y.useRef(new Map),t=y.useCallback((s,o,c,f)=>{let d=f?.once?(...h)=>{e.current.delete(c),c(...h)}:c;e.current.set(c,{type:o,eventTarget:s,fn:d,options:f}),s.addEventListener(o,d,f)},[]),r=y.useCallback((s,o,c,f)=>{var d;let h=((d=e.current.get(c))===null||d===void 0?void 0:d.fn)||c;s.removeEventListener(o,h,f),e.current.delete(c)},[]),n=y.useCallback(()=>{e.current.forEach((s,o)=>{r(s.eventTarget,s.type,o,s.options)})},[r]);return y.useEffect(()=>n,[n]),{addGlobalListener:t,removeGlobalListener:r,removeAllGlobalListeners:n}}function dle(e){return e.pointerType===""&&e.isTrusted?!0:cle()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function $R(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function fle(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function zR(e){let t=y.useRef({isFocused:!1,observer:null});return Qoe(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]),y.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let n=r.target,s=o=>{if(t.current.isFocused=!1,n.disabled){let c=$R(o);e?.(c)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};n.addEventListener("focusout",s,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&n.disabled){var o;(o=t.current.observer)===null||o===void 0||o.disconnect();let c=n===document.activeElement?null:document.activeElement;n.dispatchEvent(new FocusEvent("blur",{relatedTarget:c})),n.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:c}))}}),t.current.observer.observe(n,{attributes:!0,attributeFilter:["disabled"]})}},[e])}let hle=!1,Uf=null,U1=new Set,Md=new Map,_l=!1,F1=!1;const mle={Tab:!0,Escape:!0};function xj(e,t){for(let r of U1)r(e,t)}function gle(e){return!(e.metaKey||!ug()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function dg(e){_l=!0,!rf.isOpening&&gle(e)&&(Uf="keyboard",xj("keyboard",e))}function Dc(e){Uf="pointer","pointerType"in e&&e.pointerType,(e.type==="mousedown"||e.type==="pointerdown")&&(_l=!0,xj("pointer",e))}function UR(e){!rf.isOpening&&dle(e)&&(_l=!0,Uf="virtual")}function FR(e){e.target===window||e.target===document||hle||!e.isTrusted||(!_l&&!F1&&(Uf="virtual",xj("virtual",e)),_l=!1,F1=!1)}function HR(){_l=!1,F1=!0}function H1(e){if(typeof window>"u"||typeof document>"u"||Md.get(al(e)))return;const t=al(e),r=bo(e);let n=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){_l=!0,n.apply(this,arguments)},r.addEventListener("keydown",dg,!0),r.addEventListener("keyup",dg,!0),r.addEventListener("click",UR,!0),t.addEventListener("focus",FR,!0),t.addEventListener("blur",HR,!1),typeof PointerEvent<"u"&&(r.addEventListener("pointerdown",Dc,!0),r.addEventListener("pointermove",Dc,!0),r.addEventListener("pointerup",Dc,!0)),t.addEventListener("beforeunload",()=>{WR(e)},{once:!0}),Md.set(t,{focus:n})}const WR=(e,t)=>{const r=al(e),n=bo(e);t&&n.removeEventListener("DOMContentLoaded",t),Md.has(r)&&(r.HTMLElement.prototype.focus=Md.get(r).focus,n.removeEventListener("keydown",dg,!0),n.removeEventListener("keyup",dg,!0),n.removeEventListener("click",UR,!0),r.removeEventListener("focus",FR,!0),r.removeEventListener("blur",HR,!1),typeof PointerEvent<"u"&&(n.removeEventListener("pointerdown",Dc,!0),n.removeEventListener("pointermove",Dc,!0),n.removeEventListener("pointerup",Dc,!0)),Md.delete(r))};function ple(e){const t=bo(e);let r;return t.readyState!=="loading"?H1(e):(r=()=>{H1(e)},t.addEventListener("DOMContentLoaded",r)),()=>WR(e,r)}typeof document<"u"&&ple();function GR(){return Uf!=="pointer"}const xle=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function vle(e,t,r){let n=bo(r?.target);const s=typeof window<"u"?al(r?.target).HTMLInputElement:HTMLInputElement,o=typeof window<"u"?al(r?.target).HTMLTextAreaElement:HTMLTextAreaElement,c=typeof window<"u"?al(r?.target).HTMLElement:HTMLElement,f=typeof window<"u"?al(r?.target).KeyboardEvent:KeyboardEvent;return e=e||n.activeElement instanceof s&&!xle.has(n.activeElement.type)||n.activeElement instanceof o||n.activeElement instanceof c&&n.activeElement.isContentEditable,!(e&&t==="keyboard"&&r instanceof f&&!mle[r.key])}function yle(e,t,r){H1(),y.useEffect(()=>{let n=(s,o)=>{vle(!!r?.isTextInput,s,o)&&e(GR())};return U1.add(n),()=>{U1.delete(n)}},t)}function ble(e){let{isDisabled:t,onFocus:r,onBlur:n,onFocusChange:s}=e;const o=y.useCallback(d=>{if(d.target===d.currentTarget)return n&&n(d),s&&s(!1),!0},[n,s]),c=zR(o),f=y.useCallback(d=>{const h=bo(d.target),m=h?z1(h):z1();d.target===d.currentTarget&&m===LR(d.nativeEvent)&&(r&&r(d),s&&s(!0),c(d))},[s,r,c]);return{focusProps:{onFocus:!t&&(r||s||n)?f:void 0,onBlur:!t&&(n||s)?o:void 0}}}function wle(e){let{isDisabled:t,onBlurWithin:r,onFocusWithin:n,onFocusWithinChange:s}=e,o=y.useRef({isFocusWithin:!1}),{addGlobalListener:c,removeAllGlobalListeners:f}=BR(),d=y.useCallback(p=>{p.currentTarget.contains(p.target)&&o.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(o.current.isFocusWithin=!1,f(),r&&r(p),s&&s(!1))},[r,s,o,f]),h=zR(d),m=y.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const x=bo(p.target),w=z1(x);if(!o.current.isFocusWithin&&w===LR(p.nativeEvent)){n&&n(p),s&&s(!0),o.current.isFocusWithin=!0,h(p);let j=p.currentTarget;c(x,"focus",N=>{if(o.current.isFocusWithin&&!IR(j,N.target)){let S=new x.defaultView.FocusEvent("blur",{relatedTarget:N.target});fle(S,j);let C=$R(S);d(C)}},{capture:!0})}},[n,s,h,c,d]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:m,onBlur:d}}}let W1=!1,G0=0;function jle(){W1=!0,setTimeout(()=>{W1=!1},50)}function y6(e){e.pointerType==="touch"&&jle()}function Nle(){if(!(typeof document>"u"))return G0===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",y6),G0++,()=>{G0--,!(G0>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",y6)}}function kle(e){let{onHoverStart:t,onHoverChange:r,onHoverEnd:n,isDisabled:s}=e,[o,c]=y.useState(!1),f=y.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;y.useEffect(Nle,[]);let{addGlobalListener:d,removeAllGlobalListeners:h}=BR(),{hoverProps:m,triggerHoverEnd:p}=y.useMemo(()=>{let x=(N,S)=>{if(f.pointerType=S,s||S==="touch"||f.isHovered||!N.currentTarget.contains(N.target))return;f.isHovered=!0;let C=N.currentTarget;f.target=C,d(bo(N.target),"pointerover",A=>{f.isHovered&&f.target&&!IR(f.target,A.target)&&w(A,A.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:C,pointerType:S}),r&&r(!0),c(!0)},w=(N,S)=>{let C=f.target;f.pointerType="",f.target=null,!(S==="touch"||!f.isHovered||!C)&&(f.isHovered=!1,h(),n&&n({type:"hoverend",target:C,pointerType:S}),r&&r(!1),c(!1))},j={};return typeof PointerEvent<"u"&&(j.onPointerEnter=N=>{W1&&N.pointerType==="mouse"||x(N,N.pointerType)},j.onPointerLeave=N=>{!s&&N.currentTarget.contains(N.target)&&w(N,N.pointerType)}),{hoverProps:j,triggerHoverEnd:w}},[t,r,n,s,f,d,h]);return y.useEffect(()=>{s&&p({currentTarget:f.target},f.pointerType)},[s]),{hoverProps:m,isHovered:o}}function Sle(e={}){let{autoFocus:t=!1,isTextInput:r,within:n}=e,s=y.useRef({isFocused:!1,isFocusVisible:t||GR()}),[o,c]=y.useState(!1),[f,d]=y.useState(()=>s.current.isFocused&&s.current.isFocusVisible),h=y.useCallback(()=>d(s.current.isFocused&&s.current.isFocusVisible),[]),m=y.useCallback(w=>{s.current.isFocused=w,c(w),h()},[h]);yle(w=>{s.current.isFocusVisible=w,h()},[],{isTextInput:r});let{focusProps:p}=ble({isDisabled:n,onFocusChange:m}),{focusWithinProps:x}=wle({isDisabled:!n,onFocusWithinChange:m});return{isFocused:o,isFocusVisible:f,focusProps:n?x:p}}var _le=Object.defineProperty,Cle=(e,t,r)=>t in e?_le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jb=(e,t,r)=>(Cle(e,typeof t!="symbol"?t+"":t,r),r);let Ele=class{constructor(){jb(this,"current",this.detect()),jb(this,"handoffState","pending"),jb(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},VR=new Ele;function qR(e){var t;return VR.isServer?null:e==null?document:(t=e?.ownerDocument)!=null?t:document}function Ale(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function hp(){let e=[],t={addEventListener(r,n,s,o){return r.addEventListener(n,s,o),t.add(()=>r.removeEventListener(n,s,o))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return t.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return t.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return Ale(()=>{n.current&&r[0]()}),t.add(()=>{n.current=!1})},style(r,n,s){let o=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:s}),this.add(()=>{Object.assign(r.style,{[n]:o})})},group(r){let n=hp();return r(n),this.add(()=>n.dispose())},add(r){return e.includes(r)||e.push(r),()=>{let n=e.indexOf(r);if(n>=0)for(let s of e.splice(n,1))s()}},dispose(){for(let r of e.splice(0))r()}};return t}function KR(){let[e]=y.useState(hp);return y.useEffect(()=>()=>e.dispose(),[e]),e}let YR=(e,t)=>{VR.isServer?y.useEffect(e,t):y.useLayoutEffect(e,t)};function Tle(e){let t=y.useRef(e);return YR(()=>{t.current=e},[e]),t}let Zi=function(e){let t=Tle(e);return Te.useCallback((...r)=>t.current(...r),[t])};function Ole(e){let t=e.width/2,r=e.height/2;return{top:e.clientY-r,right:e.clientX+t,bottom:e.clientY+r,left:e.clientX-t}}function Mle(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function Ple({disabled:e=!1}={}){let t=y.useRef(null),[r,n]=y.useState(!1),s=KR(),o=Zi(()=>{t.current=null,n(!1),s.dispose()}),c=Zi(f=>{if(s.dispose(),t.current===null){t.current=f.currentTarget,n(!0);{let d=qR(f.currentTarget);s.addEventListener(d,"pointerup",o,!1),s.addEventListener(d,"pointermove",h=>{if(t.current){let m=Ole(h);n(Mle(m,t.current.getBoundingClientRect()))}},!1),s.addEventListener(d,"pointercancel",o,!1)}}});return{pressed:r,pressProps:e?{}:{onPointerDown:c,onPointerUp:o,onClick:o}}}function vj(e){return y.useMemo(()=>e,Object.values(e))}function b6(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Ff(e,t,...r){if(e in t){let s=t[e];return typeof s=="function"?s(...r):s}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Ff),n}var G1=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(G1||{}),Rle=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Rle||{});function yj(){let e=Lle();return y.useCallback(t=>Ile({mergeRefs:e,...t}),[e])}function Ile({ourProps:e,theirProps:t,slot:r,defaultTag:n,features:s,visible:o=!0,name:c,mergeRefs:f}){f=f??Dle;let d=XR(t,e);if(o)return V0(d,r,n,c,f);let h=s??0;if(h&2){let{static:m=!1,...p}=d;if(m)return V0(p,r,n,c,f)}if(h&1){let{unmount:m=!0,...p}=d;return Ff(m?0:1,{0(){return null},1(){return V0({...p,hidden:!0,style:{display:"none"}},r,n,c,f)}})}return V0(d,r,n,c,f)}function V0(e,t={},r,n,s){let{as:o=r,children:c,refName:f="ref",...d}=Nb(e,["unmount","static"]),h=e.ref!==void 0?{[f]:e.ref}:{},m=typeof c=="function"?c(t):c;"className"in d&&d.className&&typeof d.className=="function"&&(d.className=d.className(t)),d["aria-labelledby"]&&d["aria-labelledby"]===d.id&&(d["aria-labelledby"]=void 0);let p={};if(t){let x=!1,w=[];for(let[j,N]of Object.entries(t))typeof N=="boolean"&&(x=!0),N===!0&&w.push(j.replace(/([A-Z])/g,S=>`-${S.toLowerCase()}`));if(x){p["data-headlessui-state"]=w.join(" ");for(let j of w)p[`data-${j}`]=""}}if(Pd(o)&&(Object.keys(Sc(d)).length>0||Object.keys(Sc(p)).length>0))if(!y.isValidElement(m)||Array.isArray(m)&&m.length>1||$le(m)){if(Object.keys(Sc(d)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Sc(d)).concat(Object.keys(Sc(p))).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`))}else{let x=m.props,w=x?.className,j=typeof w=="function"?(...C)=>b6(w(...C),d.className):b6(w,d.className),N=j?{className:j}:{},S=XR(m.props,Sc(Nb(d,["ref"])));for(let C in p)C in S&&delete p[C];return y.cloneElement(m,Object.assign({},S,p,h,{ref:s(Ble(m),h.ref)},N))}return y.createElement(o,Object.assign({},Nb(d,["ref"]),!Pd(o)&&h,!Pd(o)&&p),m)}function Lle(){let e=y.useRef([]),t=y.useCallback(r=>{for(let n of e.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return e.current=r,t}}function Dle(...e){return e.every(t=>t==null)?void 0:t=>{for(let r of e)r!=null&&(typeof r=="function"?r(t):r.current=t)}}function XR(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},r={};for(let n of e)for(let s in n)s.startsWith("on")&&typeof n[s]=="function"?(r[s]!=null||(r[s]=[]),r[s].push(n[s])):t[s]=n[s];if(t.disabled||t["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[s=>{var o;return(o=s?.preventDefault)==null?void 0:o.call(s)}]);for(let n in r)Object.assign(t,{[n](s,...o){let c=r[n];for(let f of c){if((s instanceof Event||s?.nativeEvent instanceof Event)&&s.defaultPrevented)return;f(s,...o)}}});return t}function w6(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},r={};for(let n of e)for(let s in n)s.startsWith("on")&&typeof n[s]=="function"?(r[s]!=null||(r[s]=[]),r[s].push(n[s])):t[s]=n[s];for(let n in r)Object.assign(t,{[n](...s){let o=r[n];for(let c of o)c?.(...s)}});return t}function bj(e){var t;return Object.assign(y.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Sc(e){let t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}function Nb(e,t=[]){let r=Object.assign({},e);for(let n of t)n in r&&delete r[n];return r}function Ble(e){return Te.version.split(".")[0]>="19"?e.props.ref:e.ref}function Pd(e){return e===y.Fragment||e===Symbol.for("react.fragment")}function $le(e){return Pd(e.type)}function zle(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function JR(e){return zle(e)&&"tagName"in e}function QR(e){return JR(e)&&"accessKey"in e}function j6(e){return JR(e)&&"tabIndex"in e}function Ule(e){return QR(e)&&e.nodeName==="FIELDSET"}function ZR(e){return QR(e)&&e.nodeName==="LEGEND"}function Fle(e){let t=e.parentElement,r=null;for(;t&&!Ule(t);)ZR(t)&&(r=t),t=t.parentElement;let n=t?.getAttribute("disabled")==="";return n&&Hle(r)?!1:n}function Hle(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(ZR(t))return!1;t=t.previousElementSibling}return!0}let eI=Symbol();function Wle(e,t=!0){return Object.assign(e,{[eI]:t})}function wj(...e){let t=y.useRef(e);y.useEffect(()=>{t.current=e},[e]);let r=Zi(n=>{for(let s of t.current)s!=null&&(typeof s=="function"?s(n):s.current=n)});return e.every(n=>n==null||n?.[eI])?void 0:r}var Cc=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Cc||{});let Gle=y.createContext(()=>{});function Vle({value:e,children:t}){return Te.createElement(Gle.Provider,{value:e},t)}function qle(e,t){return y.useMemo(()=>{var r;if(e.type)return e.type;let n=(r=e.as)!=null?r:"button";if(typeof n=="string"&&n.toLowerCase()==="button"||t?.tagName==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}function Kle(e=0){let[t,r]=y.useState(e),n=y.useCallback(d=>r(d),[]),s=y.useCallback(d=>r(h=>h|d),[]),o=y.useCallback(d=>(t&d)===d,[t]),c=y.useCallback(d=>r(h=>h&~d),[]),f=y.useCallback(d=>r(h=>h^d),[]);return{flags:t,setFlag:n,addFlag:s,hasFlag:o,removeFlag:c,toggleFlag:f}}var Yle={},N6,k6;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((N6=process==null?void 0:Yle)==null?void 0:N6.NODE_ENV)==="test"&&typeof((k6=Element?.prototype)==null?void 0:k6.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Xle=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(Xle||{});function Jle(e){let t={};for(let r in e)e[r]===!0&&(t[`data-${r}`]="");return t}function Qle(e,t,r,n){let[s,o]=y.useState(r),{hasFlag:c,addFlag:f,removeFlag:d}=Kle(e&&s?3:0),h=y.useRef(!1),m=y.useRef(!1),p=KR();return YR(()=>{var x;if(e){if(r&&o(!0),!t){r&&f(3);return}return(x=void 0)==null||x.call(n,r),Zle(t,{inFlight:h,prepare(){m.current?m.current=!1:m.current=h.current,h.current=!0,!m.current&&(r?(f(3),d(4)):(f(4),d(2)))},run(){m.current?r?(d(3),f(4)):(d(4),f(3)):r?d(1):f(1)},done(){var w;m.current&&rce(t)||(h.current=!1,d(7),r||o(!1),(w=void 0)==null||w.call(n,r))}})}},[e,r,t,p]),e?[s,{closed:c(1),enter:c(2),leave:c(4),transition:c(2)||c(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Zle(e,{prepare:t,run:r,done:n,inFlight:s}){let o=hp();return tce(e,{prepare:t,inFlight:s}),o.nextFrame(()=>{r(),o.requestAnimationFrame(()=>{o.add(ece(e,n))})}),o.dispose}function ece(e,t){var r,n;let s=hp();if(!e)return s.dispose;let o=!1;s.add(()=>{o=!0});let c=(n=(r=e.getAnimations)==null?void 0:r.call(e).filter(f=>f instanceof CSSTransition))!=null?n:[];return c.length===0?(t(),s.dispose):(Promise.allSettled(c.map(f=>f.finished)).then(()=>{o||t()}),s.dispose)}function tce(e,{inFlight:t,prepare:r}){if(t!=null&&t.current){r();return}let n=e.style.transition;e.style.transition="none",r(),e.offsetHeight,e.style.transition=n}function rce(e){var t,r;return((r=(t=e.getAnimations)==null?void 0:t.call(e))!=null?r:[]).some(n=>n instanceof CSSTransition&&n.playState!=="finished")}let mp=y.createContext(null);mp.displayName="OpenClosedContext";var nf=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(nf||{});function nce(){return y.useContext(mp)}function ace({value:e,children:t}){return Te.createElement(mp.Provider,{value:e},t)}function ice({children:e}){return Te.createElement(mp.Provider,{value:null},e)}var S6;let sce=(S6=Te.startTransition)!=null?S6:function(e){e()};var oce=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(oce||{}),lce=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.SetButtonElement=4]="SetButtonElement",e[e.SetPanelElement=5]="SetPanelElement",e))(lce||{});let cce={0:e=>({...e,disclosureState:Ff(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},2(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},3(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}},4(e,t){return e.buttonElement===t.element?e:{...e,buttonElement:t.element}},5(e,t){return e.panelElement===t.element?e:{...e,panelElement:t.element}}},jj=y.createContext(null);jj.displayName="DisclosureContext";function Nj(e){let t=y.useContext(jj);if(t===null){let r=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Nj),r}return t}let kj=y.createContext(null);kj.displayName="DisclosureAPIContext";function tI(e){let t=y.useContext(kj);if(t===null){let r=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,tI),r}return t}let Sj=y.createContext(null);Sj.displayName="DisclosurePanelContext";function uce(){return y.useContext(Sj)}function dce(e,t){return Ff(t.type,cce,e,t)}let fce=y.Fragment;function hce(e,t){let{defaultOpen:r=!1,...n}=e,s=y.useRef(null),o=wj(t,Wle(N=>{s.current=N},e.as===void 0||Pd(e.as))),c=y.useReducer(dce,{disclosureState:r?0:1,buttonElement:null,panelElement:null,buttonId:null,panelId:null}),[{disclosureState:f,buttonId:d},h]=c,m=Zi(N=>{h({type:1});let S=qR(s.current);if(!S||!d)return;let C=N?j6(N)?N:"current"in N&&j6(N.current)?N.current:S.getElementById(d):S.getElementById(d);C?.focus()}),p=y.useMemo(()=>({close:m}),[m]),x=vj({open:f===0,close:m}),w={ref:o},j=yj();return Te.createElement(jj.Provider,{value:c},Te.createElement(kj.Provider,{value:p},Te.createElement(Vle,{value:m},Te.createElement(ace,{value:Ff(f,{0:nf.Open,1:nf.Closed})},j({ourProps:w,theirProps:n,slot:x,defaultTag:fce,name:"Disclosure"})))))}let mce="button";function gce(e,t){let r=y.useId(),{id:n=`headlessui-disclosure-button-${r}`,disabled:s=!1,autoFocus:o=!1,...c}=e,[f,d]=Nj("Disclosure.Button"),h=uce(),m=h===null?!1:h===f.panelId,p=y.useRef(null),x=wj(p,t,Zi($=>{if(!m)return d({type:4,element:$})}));y.useEffect(()=>{if(!m)return d({type:2,buttonId:n}),()=>{d({type:2,buttonId:null})}},[n,d,m]);let w=Zi($=>{var I;if(m){if(f.disclosureState===1)return;switch($.key){case Cc.Space:case Cc.Enter:$.preventDefault(),$.stopPropagation(),d({type:0}),(I=f.buttonElement)==null||I.focus();break}}else switch($.key){case Cc.Space:case Cc.Enter:$.preventDefault(),$.stopPropagation(),d({type:0});break}}),j=Zi($=>{$.key===Cc.Space&&$.preventDefault()}),N=Zi($=>{var I;Fle($.currentTarget)||s||(m?(d({type:0}),(I=f.buttonElement)==null||I.focus()):d({type:0}))}),{isFocusVisible:S,focusProps:C}=Sle({autoFocus:o}),{isHovered:A,hoverProps:E}=kle({isDisabled:s}),{pressed:z,pressProps:P}=Ple({disabled:s}),B=vj({open:f.disclosureState===0,hover:A,active:z,disabled:s,focus:S,autofocus:o}),T=qle(e,f.buttonElement),R=w6(m?{ref:x,type:T,disabled:s||void 0,autoFocus:o,onKeyDown:w,onClick:N}:{ref:x,id:n,type:T,"aria-expanded":f.disclosureState===0,"aria-controls":f.panelElement?f.panelId:void 0,disabled:s||void 0,autoFocus:o,onKeyDown:w,onKeyUp:j,onClick:N},C,E,P);return yj()({ourProps:R,theirProps:c,slot:B,defaultTag:mce,name:"Disclosure.Button"})}let pce="div",xce=G1.RenderStrategy|G1.Static;function vce(e,t){let r=y.useId(),{id:n=`headlessui-disclosure-panel-${r}`,transition:s=!1,...o}=e,[c,f]=Nj("Disclosure.Panel"),{close:d}=tI("Disclosure.Panel"),[h,m]=y.useState(null),p=wj(t,Zi(A=>{sce(()=>f({type:5,element:A}))}),m);y.useEffect(()=>(f({type:3,panelId:n}),()=>{f({type:3,panelId:null})}),[n,f]);let x=nce(),[w,j]=Qle(s,h,x!==null?(x&nf.Open)===nf.Open:c.disclosureState===0),N=vj({open:c.disclosureState===0,close:d}),S={ref:p,id:n,...Jle(j)},C=yj();return Te.createElement(ice,null,Te.createElement(Sj.Provider,{value:c.panelId},C({ourProps:S,theirProps:o,slot:N,defaultTag:pce,features:xce,visible:w,name:"Disclosure.Panel"})))}let yce=bj(hce),bce=bj(gce),wce=bj(vce),kb=Object.assign(yce,{Button:bce,Panel:wce});const rI=({isOpen:e,onClose:t})=>e?qr.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md transition-opacity",onClick:t}),a.jsxs("div",{className:"bg-gray-900 border border-white/10 rounded-2xl w-full max-w-3xl relative z-10 shadow-2xl overflow-hidden animate-fade-in-up flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-6 border-b border-white/5 bg-gradient-to-r from-indigo-900 to-gray-900 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-lg text-indigo-400",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:"Access Control Guide"}),a.jsx("p",{className:"text-gray-400 text-xs",children:"Everything you need to know about Pods & Permissions."})]})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-8",children:[a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center text-xs",children:"1"}),'What is a "Pod"?']}),a.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed mb-4",children:['In Magic: The Gathering, a "Pod" is your local playgroup. On Forge, it represents your list of ',a.jsx("strong",{children:"Trusted Connections"}),". Linking accounts with someone in your Pod allows you to share digital resources instantly."]}),a.jsx("div",{className:"bg-blue-900/10 border border-blue-500/20 p-4 rounded-xl",children:a.jsx("p",{className:"text-blue-200 text-sm font-medium",children:" Pro Tip: Only add people you actually know and trust to your Pod."})})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500/20 text-purple-400 flex items-center justify-center text-xs",children:"2"}),"Permission Levels"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700",children:[a.jsx("span",{className:"text-indigo-400 font-black uppercase text-xs tracking-wider",children:"Default"}),a.jsx("h4",{className:"text-white font-bold text-lg mb-2",children:"Viewer"}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-green-400",children:""})," View Private Decks"]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-green-400",children:""})," View Collection"]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-green-400",children:""})," Download/Clone Decks"]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-red-400",children:""})," Edit Decks"]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-red-400",children:""})," Change Settings"]})]})]}),a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700",children:[a.jsx("span",{className:"text-purple-400 font-black uppercase text-xs tracking-wider",children:"Advanced"}),a.jsx("h4",{className:"text-white font-bold text-lg mb-2",children:"Editor"}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-green-400",children:""})," Everything in Viewer"]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-green-400",children:""})," ",a.jsx("strong",{children:"Add/Remove Cards"})," from Decks"]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-green-400",children:""})," Add Cards to Collection"]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-red-400",children:""})," Delete Decks"]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-red-400",children:""})," Manage Account"]})]})]})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-green-500/20 text-green-400 flex items-center justify-center text-xs",children:"3"}),"Shared Collections"]}),a.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-4",children:`When building a deck, you can choose to see cards from your friends' collections. This is perfect for brewing "Team Decks" or borrowing cards you don't own.`}),a.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg text-sm text-gray-400 border border-gray-700",children:[a.jsx("strong",{children:"How to use:"}),` In the Deck Builder, open the "Sources" dropdown and select a friend's collection to see their cards alongside yours.`]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-red-500/20 text-red-400 flex items-center justify-center text-xs",children:"4"}),"Safety & Revoking"]}),a.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:["You are always in control. You can revoke access at any time from this menu or the Settings page. Revoking access is ",a.jsx("strong",{children:"immediate"}),". The other user will be disconnected from your session instantly."]}),a.jsx("div",{className:"mt-4 flex gap-4",children:a.jsxs("div",{className:"flex-1 p-3 bg-red-900/10 border border-red-500/10 rounded-lg",children:[a.jsx("h5",{className:"font-bold text-red-400 text-xs uppercase mb-1",children:"They Cannot"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Delete your account, change your password, or permanently delete your cards/decks."})]})})]})]}),a.jsx("div",{className:"p-6 bg-gray-950 border-t border-white/5 flex justify-end",children:a.jsx("button",{onClick:t,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors font-bold text-sm shadow-lg",children:"Got it, thanks!"})})]})]}),document.body):null,jce=({isOpen:e,onClose:t,connection:r})=>{const{addToast:n}=rn(),[s,o]=y.useState([]),[c,f]=y.useState(!0),[d,h]=y.useState(!1),[m,p]=y.useState(!1);y.useEffect(()=>{e&&r&&(async()=>{f(!0);try{const S=await Gr.fetchPermissions(),C=(Array.isArray(S)?S:[]).filter(A=>A.grantee_id===r.friend.id);o(C)}catch(S){console.error(S),n("Failed to load permissions","error")}finally{f(!1)}})()},[e,r]);const x=async N=>{h(!0);try{await Gr.grantPermission(r.friend.id,N,null),n(`Global ${N} access granted`,"success");const S=await Gr.fetchPermissions(),C=(Array.isArray(S)?S:[]).filter(A=>A.grantee_id===r.friend.id);o(C)}catch(S){console.error(S),n("Failed to update permission","error")}finally{h(!1)}},w=async N=>{try{await Gr.revokePermission(N),n("Permission revoked","info"),o(S=>S.filter(C=>C.id!==N))}catch(S){console.error(S),n("Failed to revoke permission","error")}};if(!e||!r)return null;const j=s.find(N=>N.target_deck_id===null);return qr.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md transition-opacity",onClick:t}),a.jsxs("div",{className:"bg-gray-900 border border-white/10 rounded-2xl w-full max-w-2xl relative z-10 shadow-2xl overflow-hidden animate-fade-in-up flex flex-col max-h-[90vh]",children:[a.jsx("div",{className:"p-8 border-b border-white/5 bg-gradient-to-r from-gray-900 to-gray-950 flex justify-between items-start",children:a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-black text-3xl shadow-lg ring-4 ring-gray-900",children:r.friend.username?.[0]?.toUpperCase()}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-black text-white tracking-tight",children:r.friend.username}),a.jsx("p",{className:"text-indigo-400 font-bold uppercase tracking-widest text-xs mt-1",children:"Manage Permissions"})]})]})}),a.jsxs("div",{className:"p-8 space-y-8 overflow-y-auto custom-scrollbar",children:[a.jsx("div",{className:"bg-indigo-900/10 border border-indigo-500/20 rounded-xl overflow-hidden",children:a.jsx(kb,{children:({open:N})=>a.jsxs(a.Fragment,{children:[a.jsxs(kb.Button,{className:"flex justify-between w-full px-4 py-3 text-sm font-bold text-indigo-300 hover:text-indigo-200 transition-colors uppercase tracking-wider text-left",children:[a.jsx("span",{children:"What does Linking Accounts do?"}),a.jsx(BU,{className:`${N?"transform rotate-180":""} w-5 h-5 text-indigo-400`})]}),a.jsxs(kb.Panel,{className:"px-4 pb-4 text-sm text-indigo-200/80 leading-relaxed space-y-2",children:[a.jsx("p",{children:"Linking accounts allows you to share your Magic: The Gathering experience with trusted friends."}),a.jsxs("ul",{className:"list-disc pl-5 space-y-1 mt-2",children:[a.jsxs("li",{children:[a.jsx("strong",{className:"text-white",children:"Sharing Decks:"})," Friends can view your private decks to offer advice or clone them."]}),a.jsxs("li",{children:[a.jsx("strong",{className:"text-white",children:"Shared Collection:"})," Combine your card pools visually to build decks together."]}),a.jsxs("li",{children:[a.jsx("strong",{className:"text-white",children:"Deck Editing:"})," If granted ",a.jsx("strong",{children:"Editor"})," access, friends can actively tweak your deck lists (add/remove cards)."]})]}),a.jsx("p",{className:"mt-2 text-xs italic opacity-70",children:"Note: Friends can NEVER delete your decks or account, regardless of permission level."}),a.jsx("div",{className:"pt-2 mt-2 border-t border-indigo-500/20",children:a.jsxs("a",{href:"#",className:"flex items-center gap-2 text-indigo-400 hover:text-white font-bold transition-colors",onClick:S=>{S.preventDefault(),p(!0)},children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Read the Full Setup Guide"]})})]})]})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-black text-gray-500 uppercase tracking-widest mb-4",children:"Global Access Level"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:()=>x("viewer"),disabled:d,className:`relative group p-5 rounded-2xl border-2 text-left transition-all duration-300 hover:shadow-xl ${j?.permission_level==="viewer"?"bg-indigo-600/10 border-indigo-500 shadow-indigo-900/20":"bg-gray-800/50 border-gray-700 hover:border-gray-500 hover:bg-gray-800"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-lg font-black ${j?.permission_level==="viewer"?"text-indigo-400":"text-white"}`,children:"Viewer"}),j?.permission_level==="viewer"&&a.jsx("span",{className:"bg-indigo-500 text-white text-[10px] font-bold px-2 py-0.5 rounded uppercase",children:"Active"})]}),a.jsxs("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors leading-relaxed",children:["Read-only access. Can view your ",a.jsx("strong",{children:"private decks"}),", ",a.jsx("strong",{children:"binders"}),", and ",a.jsx("strong",{children:"collection"}),". Cannot make changes."]})]}),a.jsxs("button",{onClick:()=>x("editor"),disabled:d,className:`relative group p-5 rounded-2xl border-2 text-left transition-all duration-300 hover:shadow-xl ${j?.permission_level==="editor"?"bg-purple-600/10 border-purple-500 shadow-purple-900/20":"bg-gray-800/50 border-gray-700 hover:border-gray-500 hover:bg-gray-800"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-lg font-black ${j?.permission_level==="editor"?"text-purple-400":"text-white"}`,children:"Editor"}),j?.permission_level==="editor"&&a.jsx("span",{className:"bg-purple-500 text-white text-[10px] font-bold px-2 py-0.5 rounded uppercase",children:"Active"})]}),a.jsxs("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors leading-relaxed",children:["Full collaboration. Can ",a.jsx("strong",{children:"edit your decks"}),", add cards to your ",a.jsx("strong",{children:"collection"}),", and view everything."]})]})]}),j&&a.jsx("div",{className:"mt-6 flex justify-center",children:a.jsxs("button",{onClick:()=>w(j.id),className:"text-red-400 hover:text-red-300 hover:bg-red-500/10 px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-widest transition-colors flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Revoke All Access"]})})]}),a.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-700 to-transparent"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-black text-gray-500 uppercase tracking-widest mb-4",children:"Specific Deck Overrides"}),a.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar bg-gray-950/30 rounded-xl border border-white/5 p-2",children:s.filter(N=>N.target_deck_id).length>0?s.filter(N=>N.target_deck_id).map(N=>a.jsxs("div",{className:"flex justify-between items-center bg-gray-800/50 p-3 rounded-lg border border-gray-700 hover:border-gray-600 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded bg-gray-900 flex items-center justify-center text-gray-500",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),a.jsxs("div",{children:[a.jsxs("span",{className:"text-sm font-bold text-gray-200 block",children:["Deck #",N.target_deck_id.slice(0,8),"..."]}),a.jsxs("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:[N.permission_level," Access"]})]})]}),a.jsx("button",{onClick:()=>w(N.id),className:"text-gray-500 hover:text-red-400 p-2 hover:bg-white/5 rounded-lg transition-colors",title:"Revoke Permission",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},N.id)):a.jsx("div",{className:"text-center py-6 text-gray-500",children:a.jsx("p",{className:"text-xs italic",children:"No specific deck permissions granted."})})})]})]}),a.jsx("div",{className:"p-6 bg-gray-950 border-t border-white/5 flex justify-end",children:a.jsx("button",{onClick:t,className:"px-6 py-3 bg-white text-gray-900 hover:bg-gray-200 rounded-xl transition-colors font-bold text-sm shadow-xl",children:"Done"})})]}),a.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .custom-scrollbar::-webkit-scrollbar { width: 6px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: rgba(0,0,0,0.2); }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.2); }
            `}}),a.jsx(rI,{isOpen:m,onClose:()=>p(!1)})]}),document.body)},Nce=({isOpen:e,onClose:t,onSuccess:r})=>{const{updateProfileFields:n}=vt(),[s,o]=y.useState(""),[c,f]=y.useState(!1),[d,h]=y.useState(null),m=async p=>{if(p.preventDefault(),h(null),!s.trim()){h("Username is required.");return}f(!0);try{await n({username:s.trim()}),r(),t()}catch(x){console.error(x),h("Failed to update username. It might be taken.")}finally{f(!1)}};return e?qr.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm"}),a.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-md relative z-10 shadow-2xl p-8 animate-fade-in-up",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Identify Yourself"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"To connect with friends and share decks, you need to set a unique username so others can find you."}),a.jsxs("form",{onSubmit:m,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 block",children:"Username"}),a.jsx("input",{type:"text",value:s,onChange:p=>o(p.target.value),placeholder:"e.g. Planeswalker99",className:"w-full bg-gray-950 border border-gray-800 text-white px-4 py-3 rounded-xl focus:ring-2 focus:ring-indigo-600 focus:border-transparent outline-none transition-all",autoFocus:!0})]}),d&&a.jsx("div",{className:"text-red-400 text-sm bg-red-500/10 p-3 rounded-lg border border-red-500/20",children:d}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:c,className:"bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-6 rounded-xl shadow-lg shadow-indigo-600/20 transition-all disabled:opacity-50 flex items-center gap-2",children:c?"Saving...":"Save & Continue"})]})]})]})]}),document.body):null},kce=()=>{const{user:e,userProfile:t}=vt(),[r,n]=y.useState([]),[s,o]=y.useState(!0),[c,f]=y.useState(null),[d,h]=y.useState(""),[m,p]=y.useState(!1),[x,w]=y.useState(null),[j,N]=y.useState(null),[S,C]=y.useState(!1),[A,E]=y.useState(!1),[z,P]=y.useState(!1),B=async()=>{o(!0);try{const D=await Gr.fetchRelationships();n(D)}catch(D){console.error(D),f("Failed to load connections.")}finally{o(!1)}};y.useEffect(()=>{B()},[]);const T=async D=>{if(D.preventDefault(),!t?.username){P(!0);return}p(!0),w(null);try{await Gr.sendRequest(d),w({type:"success",text:"Request sent!"}),h(""),B()}catch(q){w({type:"error",text:q.response?.data?.error||"Failed to send request."})}finally{p(!1)}},R=async(D,q)=>{if(!t?.username){P(!0);return}try{await Gr.respondToRequest(D,q),B()}catch(Z){console.error(Z),f("Failed to update request.")}},$=r.filter(D=>D.status==="pending"),I=$.filter(D=>D.direction==="incoming"),O=$.filter(D=>D.direction==="outgoing"),U=r.filter(D=>D.status==="accepted");return a.jsxs("div",{className:"space-y-8 animate-fade-in relative z-0",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 border-b border-gray-800 pb-6 relative",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 mb-2",children:"My Pod"}),a.jsx("p",{className:"text-gray-400 text-sm max-w-xl leading-relaxed",children:"Connect with trusted friends to view their decks, share collections, and collaborate on brews."})]}),a.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 text-indigo-400 hover:text-white transition-colors text-sm font-bold bg-indigo-900/20 hover:bg-indigo-900/40 px-4 py-2 rounded-lg border border-indigo-500/30",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"How it Works"]})]}),s?a.jsx("div",{className:"flex justify-center py-20",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):U.length===0&&I.length===0&&O.length===0?a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-950 rounded-3xl border border-gray-800 p-8 md:p-12 text-center animate-fade-in-up shadow-2xl relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),a.jsxs("div",{className:"max-w-md mx-auto relative z-10",children:[a.jsx("div",{className:"w-20 h-20 bg-indigo-500/10 text-indigo-400 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-xl ring-1 ring-inset ring-indigo-500/20",children:a.jsx("svg",{className:"w-10 h-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),a.jsx("h2",{className:"text-2xl font-black text-white mb-3",children:"Start Your Pod"}),a.jsx("p",{className:"text-gray-400 mb-8 leading-relaxed",children:"Magic is better with friends. Invite someone to your Pod to start sharing decks and combining collections."}),a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsx("input",{type:"email",required:!0,placeholder:"Enter friend's email address...",value:d,onChange:D=>h(D.target.value),className:"w-full bg-black/40 border border-gray-700 text-white px-5 py-4 rounded-xl focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all text-center placeholder-gray-600 shadow-inner"}),a.jsx("button",{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg shadow-indigo-900/20 transform hover:-translate-y-1",children:m?"Sending Invite...":"Send Invite"}),x&&a.jsx("div",{className:`text-sm font-medium mt-2 ${x.type==="success"?"text-green-400":"text-red-400"}`,children:x.text})]})]})]}):a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-2 space-y-6",children:a.jsxs("div",{className:"bg-gray-900/30 rounded-3xl border border-gray-800 p-8 shadow-xl",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center gap-3",children:[a.jsx("span",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 text-white p-2 rounded-lg shadow-lg",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),"Active Connections"]}),U.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:U.map(D=>a.jsxs("div",{className:"relative group bg-gray-800/40 p-5 rounded-2xl border border-gray-700/50 hover:border-indigo-500/50 transition-all duration-300 hover:bg-gray-800/60 hover:shadow-xl hover:shadow-indigo-900/10",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center text-white font-black text-2xl shadow-lg ring-2 ring-gray-900",children:D.friend.username?.[0]?.toUpperCase()||"?"}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-bold text-white text-lg truncate group-hover:text-indigo-300 transition-colors",children:D.friend.username}),a.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-widest font-bold",children:"Viewer Access"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{N(D),C(!0)},className:"flex-1 bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white py-2 rounded-lg text-xs font-bold transition-colors uppercase tracking-wider border border-white/5",children:"Manage"}),a.jsx("button",{onClick:async()=>{if(window.confirm(`Are you sure you want to remove ${D.friend.username} from your Pod?`))try{await Gr.deleteRelationship(D.id),n(q=>q.filter(Z=>Z.id!==D.id))}catch(q){console.error(q),alert("Failed to remove")}},className:"px-3 bg-red-500/10 hover:bg-red-500/20 text-red-400 hover:text-red-300 rounded-lg transition-colors border border-red-500/10",title:"Remove Connection",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},D.id))}):a.jsx("div",{className:"text-center py-12 text-gray-500 italic opacity-50",children:"No active connections. Check your pending requests!"})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-900/30 rounded-2xl border border-gray-800 p-6",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Add to Pod"}),a.jsxs("form",{onSubmit:T,className:"space-y-3",children:[a.jsx("input",{type:"email",required:!0,placeholder:"friend@example.com",value:d,onChange:D=>h(D.target.value),className:"w-full bg-black/40 border border-gray-700 text-white px-4 py-3 rounded-xl focus:outline-none focus:border-indigo-500 text-sm transition-all"}),a.jsxs("button",{type:"submit",disabled:m,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-4 rounded-xl transition-all shadow-lg text-sm flex items-center justify-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),m?"Sending...":"Invite Friend"]}),x&&a.jsx("div",{className:`text-xs text-center ${x.type==="success"?"text-green-400":"text-red-400"}`,children:x.text})]})]}),I.length>0&&a.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/30 to-purple-900/30 rounded-2xl border border-indigo-500/30 p-6 animate-pulse-border",children:[a.jsxs("h3",{className:"text-sm font-bold text-indigo-300 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsxs("span",{className:"relative flex h-3 w-3",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-indigo-500"})]}),"Pending Requests"]}),a.jsx("div",{className:"space-y-3",children:I.map(D=>a.jsxs("div",{className:"bg-gray-900/80 p-3 rounded-xl border border-indigo-500/20 shadow-lg",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white text-xs font-bold",children:D.friend.username?.[0]?.toUpperCase()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-bold text-white text-sm truncate",children:D.friend.username}),a.jsx("div",{className:"text-xs text-indigo-300 truncate",children:"wants to join your Pod"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>R(D.id,"accepted"),className:"flex-1 bg-indigo-500 hover:bg-indigo-400 text-white text-xs font-bold py-2 rounded-lg transition-colors shadow-md",children:"Accept"}),a.jsx("button",{onClick:()=>R(D.id,"blocked"),className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-400 text-xs font-bold py-2 rounded-lg transition-colors border border-gray-700",children:"Decline"})]})]},D.id))})]}),O.length>0&&a.jsxs("div",{className:"bg-gray-900/30 rounded-2xl border border-gray-800 p-6 opacity-60 hover:opacity-100 transition-opacity",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Pending Invites"}),a.jsx("div",{className:"space-y-3",children:O.map(D=>a.jsxs("div",{className:"flex items-center gap-3 text-sm bg-gray-900 p-3 rounded-lg border border-gray-800",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500/50 animate-pulse"}),a.jsx("span",{className:"text-gray-300 truncate flex-1",children:D.friend.email})]},D.id))})]})]})]}),a.jsx(jce,{isOpen:S,onClose:()=>C(!1),connection:j,currentUser:e}),a.jsx(Nce,{isOpen:z,onClose:()=>P(!1),onSuccess:()=>{}}),a.jsx(rI,{isOpen:A,onClose:()=>E(!1)})]})},Sce=()=>{const{user:e,userProfile:t,refreshUserProfile:r,resetPassword:n,sendVerification:s,updateProfileFields:o}=vt(),{tab:c}=of(),f=Un(),d=c||"account",[h,m]=y.useState(!1),[p,x]=y.useState(!1),[w,j]=y.useState(!1),[N,S]=y.useState(!1),[C,A]=y.useState(""),[E,z]=y.useState("grid"),[P,B]=y.useState("md"),[T,R]=y.useState(""),[$,I]=y.useState(""),[O,U]=y.useState(""),[D,q]=y.useState(!1),[Z,V]=y.useState(!1);y.useEffect(()=>{t?.settings&&(t.settings.geminiApiKey&&A(t.settings.geminiApiKey),t.settings.viewMode&&z(t.settings.viewMode),t.settings.gridSize&&B(t.settings.gridSize)),t&&(R(t.username||""),I(t.first_name||""),U(t.last_name||""))},[t]);const X=async()=>{if(!t?.id){alert("User profile not ready. Please try again.");return}x(!0);try{const ee={...t?.settings||{},geminiApiKey:C,viewMode:E,gridSize:P};await Fe.updateUser(t.id,{settings:ee}),await r(),alert("Settings saved!")}catch(G){console.error("Failed to save settings:",G),alert("Error saving settings: "+(G.message||"Unknown error"))}finally{x(!1)}},re=async()=>{x(!0);try{await o({username:T,first_name:$,last_name:O}),alert("Profile updated successfully!")}catch(G){console.error("Failed to update profile:",G),alert("Error updating profile: "+(G.message||"Unknown error"))}finally{x(!1)}},fe=async()=>{if(e?.email){q(!0);try{await n(e.email),alert("Password reset email sent!")}catch(G){alert("Error: "+G.message)}finally{q(!1)}}},Y=async()=>{V(!0);try{await s(),alert("Verification email sent!")}catch(G){alert("Error: "+G.message)}finally{V(!1)}},H=async()=>{try{const G=await Fe.get("/collection/export");if(!G||G.length===0){alert("No cards to export.");return}const ee=JSON.stringify({cards:G,exported_at:new Date},null,2),Q=new Blob([ee],{type:"application/json"}),ae=URL.createObjectURL(Q),_e=document.createElement("a");_e.href=ae,_e.download=`mtg_collection_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(_e),_e.click(),document.body.removeChild(_e)}catch(G){console.error("Export failed:",G),alert("Failed to export collection.")}};return e?a.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600",children:"Settings"}),a.jsx("div",{className:"flex border-b border-gray-700 overflow-x-auto",children:["account","general","community","ai","display","data",...e?.uid==="Kyrlwz6G6NWICCEPYbXtFfyLzWI3"?["admin"]:[]].map(G=>a.jsx("button",{onClick:()=>f(`/settings/${G}`),className:`px-6 py-3 font-medium transition-colors border-b-2 whitespace-nowrap ${d===G?"border-indigo-500 text-indigo-400":"border-transparent text-gray-400 hover:text-gray-200"}`,children:G.charAt(0).toUpperCase()+G.slice(1)},G))}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700 shadow-lg min-h-[400px]",children:[d==="account"&&a.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Profile Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm text-gray-400 block",children:"First Name"}),a.jsx("input",{type:"text",value:$,onChange:G=>I(G.target.value),className:"w-full bg-gray-900 border border-gray-700 p-2.5 rounded-lg text-gray-200 focus:ring-2 focus:ring-indigo-500 outline-none"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm text-gray-400 block",children:"Last Name"}),a.jsx("input",{type:"text",value:O,onChange:G=>U(G.target.value),className:"w-full bg-gray-900 border border-gray-700 p-2.5 rounded-lg text-gray-200 focus:ring-2 focus:ring-indigo-500 outline-none"})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm text-gray-400 block",children:"Username"}),a.jsx("input",{type:"text",value:T,onChange:G=>R(G.target.value),placeholder:"Enter username...",className:"w-full bg-gray-900 border border-gray-700 p-2.5 rounded-lg text-gray-200 focus:ring-2 focus:ring-indigo-500 outline-none"})]}),a.jsx("div",{className:"flex justify-start",children:a.jsx("button",{onClick:re,disabled:p,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors text-sm font-medium disabled:opacity-50",children:"Update Profile"})})]}),a.jsxs("section",{className:"pt-6 border-t border-gray-700 space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Security & Account"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-900/50 rounded-lg border border-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-200",children:"Email Address"}),a.jsx("p",{className:"text-sm text-gray-400",children:e.email}),!e.emailVerified&&a.jsx("span",{className:"text-[10px] bg-yellow-500/20 text-yellow-500 px-1.5 py-0.5 rounded-full border border-yellow-500/30 mt-1 inline-block",children:"Unverified"}),e.emailVerified&&a.jsx("span",{className:"text-[10px] bg-green-500/20 text-green-500 px-1.5 py-0.5 rounded-full border border-green-500/30 mt-1 inline-block",children:"Verified"})]}),!e.emailVerified&&a.jsx("button",{onClick:Y,disabled:Z,className:"text-xs text-indigo-400 hover:text-indigo-300 transition-colors font-medium",children:Z?"Sending...":"Send Verification"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-900/50 rounded-lg border border-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-200",children:"Password"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Change your account password"})]}),a.jsx("button",{onClick:fe,disabled:D,className:"text-xs text-indigo-400 hover:text-indigo-300 transition-colors font-medium disabled:opacity-50",children:D?"Sending...":"Reset Password"})]})]})]})]}),d==="general"&&a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"App Preferences"}),a.jsxs("div",{className:"pt-2",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Guided Experience"}),a.jsx("button",{onClick:async()=>{window.confirm("This will restart the welcome tour. Continue?")&&(await Fe.updateUser(t.id,{settings:{...t.settings,onboarding_complete:!1,onboarding_step:0}}),await r(),f("/onboarding"))},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-200 rounded-lg border border-gray-600 transition-colors text-sm font-medium",children:"Reset Onboarding Tour"})]})]}),d==="ai"&&a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"AI Integrations"}),a.jsx("span",{className:"bg-indigo-900/50 text-indigo-300 text-xs px-2 py-1 rounded border border-indigo-700/50",children:"Gemini"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"To enable the AI Assistant and Deck Suggestions, you need a Google Gemini API Key. Keys are stored securely in your user profile."}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Gemini API Key"}),a.jsx("input",{type:"password",value:C,onChange:G=>A(G.target.value),placeholder:"Enter AI Key...",className:"w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),a.jsxs("div",{className:"text-xs text-gray-500 flex justify-between",children:[a.jsx("span",{children:"Never share your API key."}),a.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-indigo-400 hover:text-indigo-300 hover:underline",children:"Get a key from Google AI Studio "})]})]})]}),a.jsxs("div",{className:"pt-6 border-t border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Personalization"}),a.jsx("div",{className:"flex flex-wrap gap-4",children:a.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-3 bg-gray-700 hover:bg-gray-600 border border-gray-600 text-white px-5 py-3 rounded-xl transition-all hover:shadow-lg hover:border-emerald-500 group",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-lg flex items-center justify-center text-xl group-hover:scale-110 transition-transform",children:""}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-bold text-sm",children:"Helper Settings"}),a.jsx("div",{className:"text-xs text-gray-400",children:"Customize your AI companion"})]})]})})]})]}),d==="display"&&a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Display Preferences"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Default View "}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${E==="grid"?"bg-indigo-600/20 border-indigo-500":"bg-gray-900 border-gray-700 hover:border-gray-600"}`,children:[a.jsx("input",{type:"radio",name:"viewMode",value:"grid",checked:E==="grid",onChange:()=>z("grid"),className:"text-indigo-500 focus:ring-indigo-500"}),a.jsx("span",{className:"text-gray-200",children:"Grid View"})]}),a.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${E==="table"?"bg-indigo-600/20 border-indigo-500":"bg-gray-900 border-gray-700 hover:border-gray-600"}`,children:[a.jsx("input",{type:"radio",name:"viewMode",value:"table",checked:E==="table",onChange:()=>z("table"),className:"text-indigo-500 focus:ring-indigo-500"}),a.jsx("span",{className:"text-gray-200",children:"Table View"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Grid Size"}),a.jsxs("select",{value:P,onChange:G=>B(G.target.value),className:"bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-indigo-500 w-full sm:w-48",children:[a.jsx("option",{value:"sm",children:"Small"}),a.jsx("option",{value:"md",children:"Medium"}),a.jsx("option",{value:"lg",children:"Large"})]})]})]})]}),d==="community"&&a.jsx(kce,{}),d==="data"&&a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Data Management"}),a.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-800/50 rounded-lg p-4 mb-6",children:[a.jsxs("h3",{className:"text-yellow-500 font-bold mb-1 flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Important Note"]}),a.jsx("p",{className:"text-yellow-200/80 text-sm",children:"Backups include your collection data. Deck exports can be done from individual deck pages."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 flex items-center justify-between hover:bg-gray-700/30 transition-colors",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:"Export Collection"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Download a JSON backup of your entire card collection."})]}),a.jsx("button",{onClick:H,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Export JSON"})]}),a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 flex items-center justify-between hover:bg-gray-700/30 transition-colors",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:"Import Data"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Restore from a backup or import cards. Supports Merge and Replace."})]}),a.jsx("button",{onClick:()=>j(!0),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-colors border border-gray-600",children:"Import..."})]})]})]}),d==="admin"&&e?.uid==="Kyrlwz6G6NWICCEPYbXtFfyLzWI3"&&a.jsx(_ce,{})]}),a.jsx(Xoe,{isOpen:w,onClose:()=>j(!1),mode:"global"}),a.jsx(Joe,{isOpen:N,onClose:()=>S(!1)}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx("button",{onClick:X,disabled:p,className:`bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-8 rounded-lg shadow-lg shadow-indigo-500/20 transition-all transform hover:-translate-y-0.5 ${p?"opacity-50 cursor-not-allowed":""}`,children:p?"Saving...":"Save Settings"})})]}):a.jsx("div",{className:"p-8 text-center text-gray-500",children:"Please log in to view settings."})},_ce=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(""),[s,o]=y.useState([]),[c,f]=y.useState(!1),d=Te.useRef(!1),[h,m]=y.useState({current:0,total:0}),[p,x]=y.useState({totalCards:0,types:{creature:0,instant:0,sorcery:0,enchantment:0,artifact:0,land:0,planeswalker:0,other:0}}),[w,j]=y.useState({updatePrices:!0,updateInfo:!0}),[N,S]=y.useState(null);y.useEffect(()=>{C();const $=localStorage.getItem("admin_last_sync");if($)try{S(JSON.parse($))}catch(I){console.error("Failed to parse last sync",I)}},[]);const C=async()=>{try{const $=await Fe.get("/admin/sets");t($.data||[])}catch($){console.error("Failed to fetch sets",$)}},A=$=>o(I=>[...I,`${new Date().toLocaleTimeString()} - ${$}`]),E=($,I)=>{x(O=>{const U={...O};return U.totalCards+=$,I&&Object.keys(I).forEach(D=>{U.types[D]=(U.types[D]||0)+(I[D]||0)}),U})},z=$=>{const I={date:new Date().toISOString(),stats:$};S(I),localStorage.setItem("admin_last_sync",JSON.stringify(I))},P=async($,I=!1)=>{if($)try{A(`Starting sync for ${$}...`);const U=await(await fetch("http://localhost:3000/admin/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({setCode:$,...w})})).json();U.success?(A(`Success: ${$}. Processed ${U.count} cards.`),E(U.count,U.typeStats),I&&m(D=>({...D,current:D.current+1}))):A(`Error: ${U.error}`)}catch(O){A(`Request Failed: ${O.message}`)}},B=()=>{window.confirm("Are you sure you want to cancel the sync?")&&(d.current=!0,A("Cancelling operation..."))},T=async()=>{if(!window.confirm("This will sync ALL sets. It may take a long time. Continue?"))return;f(!0),d.current=!1,A("Starting Mass Sync..."),x({totalCards:0,types:{creature:0,instant:0,sorcery:0,enchantment:0,artifact:0,land:0,planeswalker:0,other:0}}),m({current:0,total:e.length});for(const I of e){if(d.current){A("Mass Sync Cancelled by User.");break}await P(I.code,!0)}d.current||A("Mass Sync Complete!")};y.useEffect(()=>{!c&&p.totalCards>0&&z(p)},[c]);const R=async()=>{r&&(f(!0),x({totalCards:0,types:{creature:0,instant:0,sorcery:0,enchantment:0,artifact:0,land:0,planeswalker:0,other:0}}),await P(r),f(!1))};return a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Admin Scryfall Sync"}),N&&a.jsxs("div",{className:"text-right text-xs text-gray-400",children:[a.jsxs("p",{children:["Last Sync: ",new Date(N.date).toLocaleString()]}),a.jsxs("p",{children:[N.stats.totalCards," cards processed"]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-indigo-900/40 p-4 rounded-lg border border-indigo-700/50",children:[a.jsx("p",{className:"text-xs text-indigo-300 uppercase font-bold",children:"Total Cards"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:p.totalCards})]}),a.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-700",children:[a.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold",children:"Progress"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:h.total>0?`${h.current} / ${h.total}`:"-"}),h.total>0&&a.jsx("div",{className:"w-full bg-gray-700 h-1.5 mt-2 rounded-full overflow-hidden",children:a.jsx("div",{className:"bg-green-500 h-full transition-all duration-300",style:{width:`${h.current/h.total*100}%`}})})]})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Object.entries(p.types).map(([$,I])=>a.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700/50 flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-400 capitalize",children:$}),a.jsx("span",{className:"text-sm font-bold text-gray-200",children:I})]},$))}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-800/40 p-4 rounded-lg border border-gray-700/50 flex flex-wrap gap-6 items-center",children:[a.jsx("span",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest",children:"Configuration"}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-900 px-3 py-1.5 rounded-lg border border-gray-700 hover:border-indigo-500 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:w.updatePrices,onChange:$=>j(I=>({...I,updatePrices:$.target.checked})),className:"form-checkbox text-indigo-500 rounded bg-gray-800 border-gray-600 focus:ring-0 focus:ring-offset-0"}),a.jsx("span",{className:"text-gray-200 text-sm font-medium",children:"Update Prices"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-900 px-3 py-1.5 rounded-lg border border-gray-700 hover:border-indigo-500 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:w.updateInfo,onChange:$=>j(I=>({...I,updateInfo:$.target.checked})),className:"form-checkbox text-indigo-500 rounded bg-gray-800 border-gray-600 focus:ring-0 focus:ring-offset-0"}),a.jsx("span",{className:"text-gray-200 text-sm font-medium",children:"Update Card Info"})]}),a.jsx("span",{className:"text-xs text-gray-500 italic ml-auto hidden sm:block",children:"Propagates price updates to all user collections."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gray-700/30 p-4 rounded-lg border border-gray-600",children:[a.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Single Set Sync"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("select",{className:"bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 text-white flex-1 min-w-0",value:r,onChange:$=>n($.target.value),children:[a.jsx("option",{value:"",children:"Select a Set..."}),e.map($=>a.jsxs("option",{value:$.code,children:[$.name," (",$.code.toUpperCase(),")"]},$.code))]}),a.jsx("button",{onClick:R,disabled:c||!r,className:"bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white px-4 py-2 rounded-lg whitespace-nowrap",children:c?"Syncing...":"Sync Set"})]})]}),a.jsxs("div",{className:"bg-gray-700/30 p-4 rounded-lg border border-gray-600 flex flex-col justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Mass Operations"}),c?a.jsx("button",{onClick:B,className:"bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg w-full font-bold animate-pulse",children:"CANCEL OPERATION"}):a.jsx("button",{onClick:T,className:"bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg w-full font-bold",children:"SYNC ALL SETS"}),a.jsxs("p",{className:"text-gray-400 text-xs mt-2 text-center",children:["Iterates ",e.length," sets."]})]})]}),a.jsx("div",{className:"bg-black/50 p-4 rounded-lg font-mono text-xs text-green-400 h-64 overflow-y-auto border border-white/10",children:s.length===0?a.jsx("span",{className:"text-gray-600",children:"Ready to sync..."}):s.map(($,I)=>a.jsx("div",{children:$},I))})]})]})},Cce=()=>{const{cards:e,loading:t,error:r}=da({wishlist:!0}),[n,s]=y.useState(""),[o,c]=y.useState(!1),[f,d]=y.useState({colors:[],rarity:[],types:[],sets:[]}),h=y.useMemo(()=>{const x=new Set;return e.forEach(w=>{w.set&&w.set_name&&x.add(JSON.stringify({value:w.set,label:w.set_name}))}),Array.from(x).map(w=>JSON.parse(w)).sort((w,j)=>w.label.localeCompare(j.label))},[e]),m=y.useMemo(()=>e.filter(x=>{const w=x.name||"";if(n&&!w.toLowerCase().includes(n.toLowerCase()))return!1;if(f.colors.length>0){const j=x.color_identity||[],N=j.length>1,S=j.length===0;if(!f.colors.some(A=>A==="C"?S:A==="M"?N:j.includes(A)))return!1}if(f.rarity.length>0&&!f.rarity.includes(x.rarity))return!1;if(f.types.length>0){const j=(x.type_line||"").toLowerCase();if(!f.types.some(S=>j.includes(S.toLowerCase())))return!1}return!(f.sets.length>0&&!f.sets.includes(x.set))}),[e,n,f]),p=(x,w)=>{d(j=>{const N=j[x],S=N.includes(w)?N.filter(C=>C!==w):[...N,w];return{...j,[x]:S}})};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[a.jsx("span",{className:"p-2 bg-orange-500/10 rounded-xl",children:a.jsx("svg",{className:"w-8 h-8 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),"Wishlist"]}),a.jsx("p",{className:"text-gray-400 mt-1 text-sm",children:"Manage cards you want to acquire"})]}),a.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[a.jsxs("div",{className:"relative w-full md:w-80",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-700 rounded-md leading-5 bg-gray-800 text-gray-300 placeholder-gray-500 focus:outline-none focus:bg-gray-700 focus:border-orange-500 transition duration-150 ease-in-out sm:text-sm",placeholder:"Search wishlist...",value:n,onChange:x=>s(x.target.value)})]}),a.jsxs("button",{onClick:()=>c(!o),className:`px-3 py-2 rounded-md border transition-colors flex items-center gap-2 ${o?"bg-orange-600 border-orange-500 text-white":"bg-gray-800 border-gray-700 text-gray-400 hover:text-white"}`,children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters"]})]})]}),o&&a.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8 border border-gray-700 gap-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 animate-fade-in-down",children:[a.jsxs("div",{className:"col-span-1",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-2",children:"Colors"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["W","U","B","R","G","C","M"].map(x=>a.jsx("button",{onClick:()=>p("colors",x),className:`
                                        w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm border shadow-sm transition-transform hover:scale-105
                                        ${f.colors.includes(x)?"ring-2 ring-orange-500 ring-offset-2 ring-offset-gray-800":"opacity-70 hover:opacity-100"}
                                        ${x==="W"?"bg-[#F9FAFB] text-gray-900 border-gray-300":""}
                                        ${x==="U"?"bg-[#3B82F6] text-white border-blue-600":""}
                                        ${x==="B"?"bg-[#1F2937] text-white border-gray-900":""}
                                        ${x==="R"?"bg-[#EF4444] text-white border-red-600":""}
                                        ${x==="G"?"bg-[#10B981] text-white border-green-600":""}
                                        ${x==="C"?"bg-gray-400 text-gray-900 border-gray-500":""}
                                        ${x==="M"?"bg-gradient-to-br from-yellow-400 via-red-500 to-purple-600 text-white border-purple-500":""}
                                    `,children:x},x))})]}),a.jsxs("div",{className:"col-span-1",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-2",children:"Rarity"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["common","uncommon","rare","mythic"].map(x=>a.jsx("button",{onClick:()=>p("rarity",x),className:`
                                        px-3 py-1 rounded text-xs font-bold uppercase border transition-colors
                                        ${f.rarity.includes(x)?"bg-orange-600 border-orange-500 text-white":"bg-gray-900 border-gray-700 text-gray-400 hover:border-gray-500"}
                                    `,children:x},x))})]}),a.jsxs("div",{className:"col-span-1",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-2",children:"Types"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["Creature","Instant","Sorcery","Enchantment","Artifact","Planeswalker","Land"].map(x=>a.jsx("button",{onClick:()=>p("types",x),className:`
                                         px-2 py-1 rounded text-xs border transition-colors
                                         ${f.types.includes(x)?"bg-orange-600 border-orange-500 text-white":"bg-gray-900 border-gray-700 text-gray-400 hover:border-gray-500"}
                                     `,children:x},x))})]}),a.jsx("div",{className:"col-span-1",children:a.jsx(tm,{label:"Filter by Set",options:h,selected:f.sets,onChange:x=>d(w=>({...w,sets:x})),placeholder:"All Sets"})})]}),t?a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:Array.from({length:12}).map((x,w)=>a.jsx(ET,{},w))}):r?a.jsxs("div",{className:"bg-red-900/50 border border-red-500 text-red-200 p-4 rounded-lg",children:["Error loading wishlist: ",r.message]}):a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[m.map(x=>a.jsx("div",{className:"h-full",children:a.jsx($d,{card:x})},x.id)),m.length===0&&a.jsxs("div",{className:"col-span-full text-center text-gray-500 py-12 flex flex-col items-center",children:[a.jsx("svg",{className:"w-16 h-16 text-gray-700 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),a.jsx("p",{className:"text-xl",children:"Your wishlist is empty"}),a.jsx("p",{className:"text-sm mt-2 font-medium",children:"Add cards to your wishlist from the search modal!"})]})]})]})},Hi={ANALYSIS:1,ARCHITECT:2,DEPLOY:3},Ece=()=>{const{deckId:e}=of(),t=Un(),{userProfile:r,currentUser:n}=vt(),{addToast:s}=rn(),{deck:o,cards:c,loading:f}=OT(e),{cards:d}=da(),[h,m]=y.useState(Hi.ANALYSIS),[p,x]=y.useState(`Initializing ${r?.settings?.helper?.name||"Oracle"}...`),[w,j]=y.useState([]),[N,S]=y.useState(!1),[C,A]=y.useState({}),[E,z]=y.useState(new Set),[P,B]=y.useState("All"),[T,R]=y.useState("grid"),$=y.useRef(null);y.useEffect(()=>{$.current?.scrollIntoView({behavior:"smooth"})},[w]);const I=ee=>{j(Q=>[...Q,`[${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}] ${ee}`])},O=r?.settings?.helper?.name||"The Oracle",U=ee=>{if(!ee)return null;const Q=ee.data||ee;return Q.image_uris?.art_crop?Q.image_uris.art_crop:Q.card_faces?.[0]?.image_uris?.art_crop?Q.card_faces[0].image_uris.art_crop:Q.image_uris?.normal?Q.image_uris.normal:null},D=(ee,Q)=>{const ae={W:0,U:0,B:0,R:0,G:0,total:0},_e=be=>{be&&(ae.W+=(be.match(/\{W\}/g)||[]).length,ae.U+=(be.match(/\{U\}/g)||[]).length,ae.B+=(be.match(/\{B\}/g)||[]).length,ae.R+=(be.match(/\{R\}/g)||[]).length,ae.G+=(be.match(/\{G\}/g)||[]).length)};return ee.forEach(be=>_e(be.mana_cost||be.data?.mana_cost)),Object.values(Q).forEach(be=>_e(be.data?.mana_cost||be.type_line)),ae.total=ae.W+ae.U+ae.B+ae.R+ae.G,ae},q=(ee,Q,ae)=>{if(ee<=0)return{};if(Q.total===0)return{};const _e={W:{name:"Plains",type:"Basic Land  Plains"},U:{name:"Island",type:"Basic Land  Island"},B:{name:"Swamp",type:"Basic Land  Swamp"},R:{name:"Mountain",type:"Basic Land  Mountain"},G:{name:"Forest",type:"Basic Land  Forest"}},be={};let Pe=0;const se={};if(["W","U","B","R","G"].forEach(Ae=>{if(Q[Ae]>0){const Ce=Q[Ae]/Q.total,xe=Math.round(ee*Ce);se[Ae]=xe,Pe+=xe}}),Pe>0){const Ae=Object.keys(se).filter(Ce=>se[Ce]>0);Ae.sort((Ce,xe)=>se[xe]-se[Ce]),Pe<ee?se[Ae[0]]+=ee-Pe:Pe>ee&&(se[Ae[0]]-=Pe-ee)}return Object.entries(se).forEach(([Ae,Ce])=>{if(Ce>0){const xe=_e[Ae],We=ae.find(je=>je.name===xe.name)||{name:xe.name,type_line:xe.type,image_uris:{normal:`https://api.scryfall.com/cards/named?exact=${xe.name}&format=image`}};for(let je=0;je<Ce;je++){const ke=`basic-${Ae}-${je}-${Date.now()}`;be[ke]={firestoreId:ke,name:xe.name,type_line:xe.type,rating:10,reason:`Auto-filled to match ${Math.round(Q[Ae]/Q.total*100)}% ${Ae} pip density.`,suggestedType:"Land",data:We.data||We,isVirtual:!0}}}}),be},Z=(ee,Q)=>{if(!ee||ee.length===0)return!0;if(!Q||Q.length===0)return ee.length===0;const ae=new Set(Q);return ee.every(_e=>ae.has(_e))},V=async()=>{if(!r?.settings?.geminiApiKey){s("Gemini API Key missing in settings.","error"),t("/settings");return}S(!0),x("Scanning Collection..."),I("Starting deck architecture analysis...");try{const ee=[...new Set([...o.commander?.color_identity||[],...o.commander_partner?.color_identity||[]])],Q=o.aiBlueprint||{},ae=["Synergy / Strategy","Mana Ramp","Card Draw","Targeted Removal","Board Wipes","Land"],_e=new Set(c.map(ke=>ke.name));o.commander?.name&&_e.add(o.commander.name),o.commander_partner?.name&&_e.add(o.commander_partner.name);const be={Land:36,"Mana Ramp":10,"Card Draw":10,"Targeted Removal":10,"Board Wipes":3,"Synergy / Strategy":30,...Q.suggestedCounts||{}},Pe={},se=new Set;for(const ke of ae){const Oe=c.filter(rt=>(rt.data?.type_line||rt.type_line||"").includes(ke)).reduce((rt,lt)=>rt+(lt.countInDeck||1),0),Me=be[ke]||0;let $e=Math.max(0,Me-Oe);if($e<=0){I(`${ke}: Current count (${Oe}) meets target (${Me}). Skipping.`);continue}I(`Identifying potential ${ke} candidates...`);const ze=[],Be=new Set;for(const rt of d){if(Be.has(rt.name))continue;const lt=rt.data?.color_identity||rt.data?.colors||[];Z(lt,ee)&&(_e.has(rt.name)||(ze.push({firestoreId:rt.id,name:rt.name,type_line:rt.data?.type_line||rt.type_line}),Be.add(rt.name)))}if(ze.length===0)continue;const qt={blueprint:Q,instructions:`Select EXACTLY ${$e} best "${ke}" cards for a ${o.format||"Commander"} deck. Commander: ${o.commander?.name}${o.commander_partner?" & "+o.commander_partner.name:""}. Prioritize theme synergy.`,candidates:ze.slice(0,150),playstyle:r?.playstyle,targetRole:ke};let wr=0;for(;wr<2;)try{I(`Consulting ${O} for ${ke}s (Need ${$e})${wr>0?" [Retry]":""}...`);const rt=await Ln.generateDeckSuggestions(r.settings.geminiApiKey,qt);rt?.suggestions&&(rt.suggestions.forEach(lt=>{const Ot=ze.find(ne=>ne.firestoreId===lt.firestoreId);if(Ot){const ne=d.find(Ke=>Ke.id===lt.firestoreId),Le=lt.firestoreId;Pe[Le]={...lt,firestoreId:Le,name:ne?.name||Ot.name,type_line:ne?.data?.type_line||Ot.type_line,data:ne?.data||ne,rating:lt.rating,reason:lt.reason,suggestedType:ke},se.add(Le)}}),I(`${O} provided ${rt.suggestions.length} suggestions for ${ke}.`));break}catch(rt){wr++,wr>=2?(console.error(`[Wizard] Oracle failed for ${ke} after 2 tries:`,rt),I(`Notice: ${O} failed for ${ke}: ${rt.message}. Continuing...`)):(I(`Notice: ${O} encountered an issue with ${ke}. Retrying in 2s...`),await new Promise(lt=>setTimeout(lt,2e3)))}}const Ae=c.filter(ke=>(ke.data?.type_line||ke.type_line||"").includes("Land")).length,Ce=Object.values(Pe).filter(ke=>ke.suggestedType==="Land").length,xe=Ae+Ce,We=be.Land||36,je=Math.max(0,We-xe);if(je>0){I(`Calculating mana base for ${je} remaining land slots...`);const ke=D(c,Pe),Oe=q(je,ke,d);Object.assign(Pe,Oe),Object.keys(Oe).forEach(Me=>se.add(Me)),I(`Added ${Object.keys(Oe).length} Basic Lands to balance mana curve.`)}A(Pe),z(se),I("Architecture complete. Proceeding to Architect view."),m(Hi.ARCHITECT)}catch(ee){console.error(ee),s("Architecture failed. Please check your AI key.","error")}finally{S(!1),x("Ready.")}},X=()=>{if(!(n?.uid==="Kyrlwz6G6NWICCEPYbXtFfyLzWI3"||r?.firestore_id==="Kyrlwz6G6NWICCEPYbXtFfyLzWI3"))return;I("Dev Mode: Skipping Analysis...");const Q=[...new Set([...o.commander?.color_identity||[],...o.commander_partner?.color_identity||[]])],ae=o.aiBlueprint||{},_e=["Land","Mana Ramp","Card Draw","Targeted Removal","Board Wipes","Synergy / Strategy"],be={Land:36,"Mana Ramp":10,"Card Draw":10,"Targeted Removal":10,"Board Wipes":3,"Synergy / Strategy":30,...ae.suggestedCounts||{}},Pe={},se=new Set,Ae=new Set;let Ce=0;for(const xe of _e){const We=c.filter($e=>($e.data?.type_line||$e.type_line||"").includes(xe)).reduce(($e,ze)=>$e+(ze.countInDeck||1),0),je=be[xe]||0,ke=Math.max(0,je-We);if(ke<=0)continue;d.filter($e=>{if(!$e.id||Ae.has($e.id)||c.some(qt=>qt.name===$e.name))return!1;const ze=$e.color_identity||$e.data?.color_identity||[];if(!Z(ze,Q))return!1;const Be=($e.type_line||"").includes("Land");return xe==="Land"?Be:!Be}).sort(()=>.5-Math.random()).slice(0,ke).forEach($e=>{const ze=$e.id;Pe[ze]={firestoreId:ze,name:$e.name,type_line:$e.type_line,rating:Math.floor(Math.random()*5)+5,reason:`[Dev-Skipped] Auto-filled to satisfy ${xe} quota.`,suggestedType:xe,data:$e},se.add(ze),Ae.add(ze),Ce++})}if(Ce===0){s("Dev Skip: No valid cards found to fill any buckets.","warning");return}A(Pe),z(se),I(`Dev Mode: Populated ${Ce} cards across categories. Proceeding.`),m(Hi.ARCHITECT)},re=ee=>{const Q=new Set(E);Q.has(ee)?Q.delete(ee):Q.add(ee),z(Q)},fe=()=>a.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 py-12",children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"inline-block p-4 rounded-3xl bg-indigo-500/10 border border-indigo-500/20 mb-4 animate-bounce",children:a.jsx("span",{className:"text-4xl",children:""})}),a.jsxs("h1",{className:"text-5xl font-black text-white tracking-tighter uppercase italic",children:[O," Deck Architect"]}),a.jsxs("p",{className:"text-gray-400 text-lg max-w-2xl mx-auto",children:[O," will analyze your collection and current deck composition to architect the perfect additions for ",a.jsx("span",{className:"text-indigo-400 font-bold",children:o?.name}),"."]})]}),a.jsxs("div",{className:"bg-gray-950/40 backdrop-blur-3xl rounded-[2.5rem] border border-white/10 overflow-hidden shadow-2xl",children:[a.jsxs("div",{className:"p-8 border-b border-white/5 bg-white/5 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${N?"bg-yellow-500 animate-pulse":"bg-green-500"}`}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-gray-500",children:p})]}),a.jsxs("div",{className:"flex gap-4",children:[(n?.uid==="Kyrlwz6G6NWICCEPYbXtFfyLzWI3"||r?.firestore_id==="Kyrlwz6G6NWICCEPYbXtFfyLzWI3")&&a.jsx("button",{onClick:X,className:"bg-amber-600/20 hover:bg-amber-600/40 text-amber-500 font-black px-6 py-3 rounded-2xl transition-all uppercase tracking-widest text-[10px] border border-amber-500/20",children:"Quick Skip (Dev)"}),!N&&a.jsx("button",{onClick:V,className:"bg-indigo-600 hover:bg-indigo-500 text-white font-black px-8 py-3 rounded-2xl transition-all shadow-lg shadow-indigo-500/20 uppercase tracking-widest text-xs border border-white/10",children:"Start Architecture"})]})]}),a.jsxs("div",{className:"p-8 h-[400px] overflow-y-auto font-mono text-xs space-y-3 custom-scrollbar bg-black/40 backdrop-blur-inner shadow-inner box-shadow-inner border-t border-white/5 font-medium leading-relaxed",children:[w.length===0?a.jsx("div",{className:"text-gray-600 italic animate-pulse",children:"Waiting for architecture to start..."}):w.map((ee,Q)=>a.jsx("div",{className:"text-gray-300 animate-fade-in pl-4 border-l-2 border-indigo-500/40 py-1 hover:bg-white/5 transition-colors rounded-r",children:ee},Q)),a.jsx("div",{ref:$})]})]})]}),Y=()=>{const ee=Object.values(C).filter(ae=>P==="All"||ae.suggestedType===P),Q=["All","Land","Mana Ramp","Card Draw","Targeted Removal","Board Wipes","Synergy / Strategy"];return a.jsxs("div",{className:"h-full flex flex-col gap-6 py-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6 px-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-3xl font-black text-white italic tracking-tighter uppercase",children:"Selection Phase"}),a.jsxs("p",{className:"text-gray-500 text-sm font-medium",children:["Review ",O,"'s suggestions and select the ones you want to draft into your deck."]})]}),a.jsx("div",{className:"flex items-center gap-3 bg-gray-950/50 p-1.5 rounded-2xl border border-white/5 backdrop-blur-md",children:[{mode:"grid",icon:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},{mode:"table",icon:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})},{mode:"list",icon:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}].map(({mode:ae,icon:_e})=>a.jsx("button",{onClick:()=>R(ae),className:`p-2 rounded-xl transition-all ${T===ae?"bg-indigo-600 text-white shadow-lg":"text-gray-500 hover:text-white"}`,title:`${ae.charAt(0).toUpperCase()+ae.slice(1)} View`,children:_e},ae))})]}),a.jsx("div",{className:"flex bg-gray-950/50 p-1.5 rounded-2xl border border-white/5 backdrop-blur-md overflow-x-auto no-scrollbar mx-4",children:Q.map(ae=>{const _e=Object.values(C).filter(be=>ae==="All"||be.suggestedType===ae).length;return ae!=="All"&&_e===0?null:a.jsxs("button",{onClick:()=>B(ae),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${P===ae?"bg-indigo-600 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:[ae," ",a.jsx("span",{className:"ml-1 opacity-40 font-mono",children:_e})]},ae)})}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-4 custom-scrollbar",children:[T==="list"&&a.jsx("div",{className:"space-y-4",children:ee.map(ae=>a.jsxs("div",{onClick:()=>re(ae.firestoreId),className:`grid grid-cols-[auto_1fr_auto_auto] gap-8 items-center p-6 rounded-[2rem] border transition-all cursor-pointer group ${E.has(ae.firestoreId)?"bg-indigo-500/10 border-indigo-500/40 shadow-2xl":"bg-gray-950/30 border-white/5 hover:border-white/20"}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-xl border-2 flex items-center justify-center transition-all ${E.has(ae.firestoreId)?"bg-indigo-500 border-indigo-400 text-white":"border-white/10 group-hover:border-white/30"}`,children:E.has(ae.firestoreId)&&a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("span",{className:"block text-xl font-black text-white uppercase italic tracking-tight group-hover:text-indigo-300 transition-colors",children:ae.name}),a.jsx("span",{className:"text-[10px] font-black text-indigo-400 tracking-[0.2em] uppercase",children:ae.type_line})]}),a.jsxs("div",{className:"text-center font-mono text-indigo-400 font-bold bg-white/5 px-4 py-2 rounded-2xl border border-white/5",children:[ae.rating,"/10"]}),a.jsxs("div",{className:"max-w-md bg-black/30 p-4 rounded-2xl border border-white/5 text-sm text-gray-400 font-medium italic leading-relaxed",children:['"',ae.reason,'"']})]},ae.firestoreId))}),T==="grid"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-6",children:ee.map(ae=>a.jsxs("div",{onClick:()=>re(ae.firestoreId),className:`flex flex-col rounded-[2rem] border transition-all cursor-pointer group overflow-hidden ${E.has(ae.firestoreId)?"bg-indigo-500/10 border-indigo-500/40 shadow-2xl":"bg-gray-950/30 border-white/5 hover:border-white/20"}`,children:[a.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden",children:[a.jsx("img",{src:ae.data?.image_uris?.normal||`https://api.scryfall.com/cards/named?exact=${encodeURIComponent(ae.name)}&format=image`,alt:ae.name,className:"w-full h-full object-cover transition-transform group-hover:scale-110",loading:"lazy"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-transparent opacity-60"}),a.jsx("div",{className:`absolute top-4 right-4 w-8 h-8 rounded-xl border-2 flex items-center justify-center transition-all ${E.has(ae.firestoreId)?"bg-indigo-500 border-indigo-400 text-white":"bg-black/40 border-white/20 group-hover:border-white/40"}`,children:E.has(ae.firestoreId)&&a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),a.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[a.jsx("span",{className:"block text-lg font-black text-white uppercase italic tracking-tight line-clamp-1",children:ae.name}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsx("span",{className:"text-[10px] font-black text-indigo-300 tracking-[0.2em] uppercase truncate max-w-[70%]",children:ae.type_line}),a.jsxs("span",{className:"text-xs font-mono text-indigo-400 font-bold bg-black/60 px-2 py-0.5 rounded-lg border border-white/10",children:[ae.rating,"/10"]})]})]})]}),a.jsx("div",{className:"p-4 flex-1 flex flex-col justify-between",children:a.jsxs("div",{className:"text-xs text-gray-400 font-medium italic leading-relaxed line-clamp-3",children:['"',ae.reason,'"']})})]},ae.firestoreId))}),T==="table"&&a.jsx("div",{className:"bg-gray-950/30 rounded-[2rem] border border-white/5 overflow-hidden",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-white/5 font-black text-[10px] uppercase tracking-[0.2em] text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 w-16",children:"Select"}),a.jsx("th",{className:"px-6 py-4",children:"Card Name"}),a.jsx("th",{className:"px-6 py-4",children:"Type"}),a.jsx("th",{className:"px-6 py-4 text-center",children:"Rating"}),a.jsx("th",{className:"px-6 py-4",children:"Reasoning"})]})}),a.jsx("tbody",{className:"divide-y divide-white/5",children:ee.map(ae=>a.jsxs("tr",{onClick:()=>re(ae.firestoreId),className:`hover:bg-white/5 cursor-pointer transition-colors ${E.has(ae.firestoreId)?"bg-indigo-500/5":""}`,children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${E.has(ae.firestoreId)?"bg-indigo-500 border-indigo-400 text-white":"border-white/10"}`,children:E.has(ae.firestoreId)&&a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"font-bold text-white uppercase italic tracking-tight",children:ae.name})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-[10px] font-black text-indigo-400 tracking-[0.1em] uppercase",children:ae.type_line})}),a.jsx("td",{className:"px-6 py-4 text-center",children:a.jsx("span",{className:"font-mono text-indigo-400 font-bold bg-white/5 px-3 py-1 rounded-lg border border-white/5",children:ae.rating})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:"text-xs text-gray-400 italic line-clamp-1",children:['"',ae.reason,'"']})})]},ae.firestoreId))})]})})]}),a.jsxs("div",{className:"p-8 bg-gray-950/40 backdrop-blur-3xl rounded-3xl border border-white/10 flex justify-between items-center shadow-2xl mx-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-black text-indigo-400/60 uppercase tracking-[0.4em]",children:"Draft Progress"}),a.jsxs("span",{className:"text-3xl font-black text-white italic tracking-tighter uppercase",children:[E.size," Cards Selected"]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>m(Hi.ANALYSIS),className:"px-8 py-3.5 bg-white/5 hover:bg-white/10 text-white font-black rounded-2xl border border-white/5 uppercase tracking-widest text-[11px] transition-all",children:"Re-Analyze"}),a.jsx("button",{onClick:()=>m(Hi.DEPLOY),className:"px-10 py-3.5 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-2xl shadow-xl shadow-indigo-500/20 uppercase tracking-widest text-[11px] border border-white/10 transition-all",children:"Review & Deploy"})]})]})]})},H=()=>{const ee=Array.from(E).map(ae=>C[ae]),Q=async()=>{if(!N){S(!0);try{const ae=[],_e=new Map;d.forEach(be=>{const Pe=be.scryfall_id||be.data?.scryfall_id;Pe&&!be.deck_id&&_e.set(Pe,(_e.get(Pe)||0)+1)});for(const be of ee){const Pe=be.data||be,se=Pe.scryfall_id||Pe.id||(be.isVirtual?null:be.firestoreId);let Ae=!1;if(se&&_e.has(se)){const Ce=_e.get(se);Ce>0&&(Ae=!0,_e.set(se,Ce-1))}if(Ae)ae.push({scryfall_id:se,finish:"nonfoil"});else{const Ce=be.type_line&&be.type_line.includes("Basic Land");if(o.is_mockup===!1&&!Ce)throw new Error(`Cannot add unowned card "${be.name}" to a Collection Deck.`);ae.push({scryfall_id:se,name:be.name,finish:"nonfoil",data:Pe,count:1,is_wishlist:!Ce})}}await Fe.post(`/decks/${e}/cards/batch`,{cards:ae}),s(`Successfully added ${ae.length} cards to ${o.name}!`,"success"),t(`/decks/${e}`)}catch(ae){console.error("Deployment failed:",ae),s("Failed to deploy cards. Please try again.","error")}finally{S(!1)}}};return a.jsxs("div",{className:"max-w-5xl mx-auto space-y-12 py-12",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("h2",{className:"text-4xl font-black text-white italic tracking-tighter uppercase",children:"Final Deployment"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Review your selected additions before applying them to your deck."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ee.map(ae=>a.jsxs("div",{className:"bg-gray-950/30 p-6 rounded-[2rem] border border-white/10 space-y-4",children:[a.jsx("span",{className:"font-black text-white uppercase italic text-lg truncate block",children:ae.name}),a.jsxs("div",{className:"text-xs text-gray-400 leading-relaxed italic",children:['"',ae.reason,'"']})]},ae.firestoreId))}),a.jsxs("div",{className:"flex gap-6 justify-center",children:[a.jsx("button",{onClick:()=>m(Hi.ARCHITECT),className:"px-12 py-4 bg-gray-900 hover:bg-gray-800 text-white font-black rounded-2xl border border-white/5 uppercase tracking-widest text-xs transition-all",children:"Back to Architect"}),a.jsxs("button",{onClick:Q,disabled:N,className:"px-16 py-4 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-2xl shadow-2xl shadow-indigo-500/40 uppercase tracking-widest text-xs border border-white/10 transition-all",children:['Apply to "',o?.name,'"']})]})]})};if(f)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin h-12 w-12 border-4 border-indigo-500 border-t-transparent rounded-full"})});const G=U(o?.commander)||U(o?.commander_partner);return a.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-200 font-sans relative flex flex-col pt-16",children:[a.jsxs("div",{className:"fixed inset-0 z-0 transition-all duration-1000 ease-in-out",style:{backgroundImage:`url(${G})`,backgroundSize:"cover",backgroundPosition:"center"},children:[a.jsx("div",{className:"absolute inset-0 bg-gray-950/60 backdrop-blur-[2px]"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-950/80 to-gray-950/40"})]}),a.jsxs("div",{className:"sticky top-0 z-50 px-6 py-4 flex justify-between items-center bg-gray-950 border-b border-white/5",children:[a.jsxs("button",{onClick:()=>t(`/decks/${e}`),className:"text-gray-500 hover:text-white flex items-center gap-2 group transition-all",children:[a.jsx("svg",{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),a.jsx("span",{className:"text-[11px] font-black uppercase tracking-widest",children:"Exit Wizard"})]}),a.jsx("div",{className:"flex gap-12",children:[1,2,3].map(ee=>a.jsxs("div",{className:`flex items-center gap-3 transition-all ${h===ee?"scale-110":"opacity-40"}`,children:[a.jsx("div",{className:`w-6 h-6 rounded-lg flex items-center justify-center text-[10px] font-black ${h>=ee?"bg-indigo-500 text-white":"bg-gray-800 text-gray-600"}`,children:ee}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:ee===1?"Analysis":ee===2?"Architect":"Deploy"})]},ee))}),a.jsx("div",{className:"w-32"})," "]}),a.jsxs("main",{className:"flex-1 relative z-10 px-4 max-w-7xl mx-auto w-full",children:[h===Hi.ANALYSIS&&fe(),h===Hi.ARCHITECT&&Y(),h===Hi.DEPLOY&&H()]}),a.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .animate-pulse-slow { animation: pulse 8s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
                @keyframes pulse { 0%, 100% { opacity: 0.2; transform: scale(1.05); } 50% { opacity: 0.4; transform: scale(1); } }
                .custom-scrollbar::-webkit-scrollbar { width: 6px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(99, 102, 241, 0.2); border-radius: 10px; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(99, 102, 241, 0.4); }
            `}})]})},Ace=({onNext:e})=>a.jsxs("div",{className:"max-w-2xl w-full text-center space-y-8 animate-fade-in-up",children:[a.jsx("div",{className:"w-24 h-24 mx-auto bg-indigo-500/20 rounded-full flex items-center justify-center ring-1 ring-indigo-500/50 shadow-[0_0_30px_rgba(99,102,241,0.3)]",children:a.jsx("svg",{className:"w-12 h-12 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-4xl font-extrabold text-white mb-4",children:"Welcome to MTG-Forge"}),a.jsxs("p",{className:"text-xl text-gray-300 leading-relaxed",children:["Your ultimate companion for deck building, collection management, and magical optimization.",a.jsx("br",{}),"Let's get everything set up in just a few clicks."]})]}),a.jsx("button",{onClick:e,className:"px-8 py-4 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold text-lg shadow-lg hover:shadow-indigo-500/25 transition-all transform hover:-translate-y-1",children:"Let's Go"})]}),Tce=({onNext:e,onBack:t})=>a.jsxs("div",{className:"max-w-4xl w-full space-y-8 animate-fade-in-up",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-pink-500/20 rounded-full flex items-center justify-center mb-6 ring-1 ring-pink-500/50 shadow-[0_0_30px_rgba(236,72,153,0.3)]",children:a.jsx("svg",{className:"w-10 h-10 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),a.jsx("h2",{className:"text-4xl font-black text-white mb-3",children:"Support the Forge"}),a.jsx("p",{className:"text-gray-400 max-w-lg mx-auto text-lg",children:"MTG-Forge is free for everyone during Alpha. If you love what we're building, consider a small donation to help us keep the servers running."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-stretch",children:[a.jsxs("div",{className:"bg-gray-800/40 border border-gray-700 rounded-3xl p-8 flex flex-col justify-between hover:border-pink-500/50 transition-colors group",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""})," Community Power"]}),a.jsx("p",{className:"text-gray-400 text-sm leading-relaxed mb-6",children:"Every donation goes directly towards API costs (Scryfall, Gemini) and server maintenance. You help us stay independent and ad-free."})]}),a.jsx("button",{onClick:()=>e("donate"),className:"w-full py-4 bg-gradient-to-r from-pink-600 to-rose-600 hover:from-pink-500 hover:to-rose-500 text-white rounded-xl font-bold shadow-lg shadow-pink-500/20 transition-all transform hover:-translate-y-1",children:"Donate to Project"})]}),a.jsxs("div",{className:"bg-gray-800/20 border border-gray-800 rounded-3xl p-8 flex flex-col justify-between opacity-80 hover:opacity-100 transition-opacity",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-300 mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-500",children:""})," Free Access"]}),a.jsx("p",{className:"text-gray-400 text-sm leading-relaxed mb-6",children:"You can still access all features for free. We value your feedback as an Alpha tester just as much as financial support."})]}),a.jsx("button",{onClick:()=>e("skip"),className:"w-full py-4 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-xl font-bold transition-all border border-gray-600",children:"Skip for Now"})]})]}),a.jsx("div",{className:"flex justify-center pt-8",children:t&&a.jsxs("button",{onClick:t,className:"text-gray-500 hover:text-white transition-colors flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})})]}),Oce=({onNext:e,onBack:t})=>{const[r,n]=y.useState("");return a.jsxs("div",{className:"max-w-3xl w-full space-y-8 animate-fade-in-up",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-purple-500/20 rounded-full flex items-center justify-center mb-6 ring-1 ring-purple-500/50",children:a.jsx("svg",{className:"w-10 h-10 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),a.jsx("h2",{className:"text-3xl font-bold text-white mb-3",children:"Enable AI Architect"}),a.jsx("p",{className:"text-gray-400 max-w-lg mx-auto",children:"Our AI analyzes your cards to suggest synergies, optimal mana curves, and complete deck strategies."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700",children:[a.jsxs("h3",{className:"font-bold text-lg text-white mb-2 flex items-center gap-2",children:[a.jsx("span",{className:"text-green-400",children:""})," Automated Building"]}),a.jsx("p",{className:"text-sm text-gray-400",children:"Generate entire commander decks from a single prompt or theme using your own collection."})]}),a.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700",children:[a.jsxs("h3",{className:"font-bold text-lg text-white mb-2 flex items-center gap-2",children:[a.jsx("span",{className:"text-green-400",children:""})," Synergy Scouting"]}),a.jsx("p",{className:"text-sm text-gray-400",children:"Find hidden gems in your binder that perfectly match your commander's strategy."})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 p-4 rounded-xl text-left",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-blue-200 mb-1",children:"Why do I need my own API Key?"}),a.jsx("p",{className:"text-sm text-blue-100/80 leading-relaxed",children:"MTG-Forge connects directly to Google's Gemini AI to power its deck architect features. To ensure usage, privacy, and zero rampingsubscription fees, we ask users to provide their own free API key. Your key is stored locally on your device and is never shared with us."}),a.jsxs("div",{className:"mt-4 p-3 bg-indigo-900/40 border border-indigo-500/30 rounded-lg",children:[a.jsxs("h4",{className:"font-bold text-indigo-200 mb-1 flex items-center gap-2",children:[a.jsx("span",{className:"text-amber-400",children:""})," AI is Experimental"]}),a.jsxs("p",{className:"text-sm text-gray-300",children:["Our AI Architect is a powerful assistant, but ",a.jsx("strong",{children:"YOU"})," are the true deck builder. AI can suggest amazing synergies, but it can also make mistakes or suggest suboptimal cards. Always review and refine the suggestions to match your personal playstyle and meta."]})]})]})]})}),a.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700 space-y-4 text-left",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Enter your Gemini API Key"}),a.jsx("input",{type:"password",value:r,onChange:s=>n(s.target.value),placeholder:"AIzaSy...",className:"w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors"}),a.jsxs("div",{className:"text-sm text-gray-400",children:["Don't have a key? ",a.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-purple-400 hover:text-purple-300 underline",children:"Get a free key from Google AI Studio "})]})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 pt-4",children:[t&&a.jsx("button",{onClick:t,className:"nav-button px-10 py-3 rounded-lg font-bold transition-all border border-gray-600 text-gray-300 hover:text-white hover:bg-gray-800/50",children:"Back"}),a.jsx("button",{onClick:()=>e(r),disabled:!r,className:`nav-button px-10 py-3 rounded-lg font-bold transition-all shadow-lg transform hover:-translate-y-0.5 ${r?"bg-purple-600 hover:bg-purple-500 text-white hover:shadow-purple-500/25":"bg-gray-700 text-gray-400 cursor-not-allowed shadow-none"}`,children:"Save & Enable AI"}),a.jsx("button",{onClick:()=>e(null),className:"text-gray-500 text-sm hover:text-gray-300 underline transition-colors",children:"Skip (Features Disabled)"})]})]})},Mce=({onNext:e,onBack:t})=>{const[r,n]=Te.useState(0),[s,o]=Te.useState(!1),c=[{title:"Manage Your Collection",desc:"Import cards, track values, and organize your entire library in one place.",details:["Navigate to the 'Collection' page via the top navigation bar.","Click the 'Add Cards' button to bulk add cards from CSV, text, or card scanner.","Use the 'Binder' view to visually organize your cards by Set, Color, or Rarity.","More organizational features coming soon, as in folders and custom groupings."],icon:a.jsx("svg",{className:"w-16 h-16 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})},{title:"Build & Analyze Decks",desc:"Use the Architect Wizard to construct powerful decks with real-time stats and mana analysis.",details:["Go to 'Decks' and click 'Create New Deck'.","Choose your format: 'Commander' or 'Standard'.","Select a Commander or Spotlight Card to anchor your strategy.","Use the 'AI Architect' to generate suggested cards based on your themes.","Review mana curves, color distribution, and type breakdowns in the 'Stats' tab."],icon:a.jsx("svg",{className:"w-16 h-16 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{title:"Wishlist & Tracking",desc:"Keep track of cards you need and plan your next purchases directly from deck builds.",details:["Search for any card in the database, even ones you don't own.","Click the 'Heart' icon to add it to your Wishlist.","When building decks, enable 'Theorycraft Mode' to include wishlist cards.","View your shopping list in the 'Wishlist' tab of your Collection."],icon:a.jsx("svg",{className:"w-16 h-16 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}],f=c[r],d=()=>{r<c.length-1?(n(r+1),o(!1)):e()};return a.jsxs("div",{className:"max-w-2xl w-full text-center space-y-10 animate-fade-in relative",children:[a.jsxs("div",{className:"h-80 flex flex-col items-center justify-center bg-gray-800/30 rounded-2xl border border-gray-700/50 p-8 relative overflow-hidden group",children:[a.jsxs("div",{className:`absolute inset-0 bg-gray-900/95 backdrop-blur-md z-20 flex flex-col items-center justify-center p-8 transition-all duration-300 ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-full pointer-events-none"}`,children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[a.jsx("span",{children:""})," How it Works"]}),a.jsx("ul",{className:"space-y-4 text-left w-full max-w-md",children:f.details.map((h,m)=>a.jsxs("li",{className:"flex gap-3 text-gray-300 text-sm",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-indigo-500/20 text-indigo-400 flex items-center justify-center font-bold text-xs border border-indigo-500/30",children:m+1}),a.jsx("span",{className:"leading-relaxed",children:h})]},m))}),a.jsx("button",{onClick:()=>o(!1),className:"mt-8 text-sm text-gray-500 hover:text-white underline",children:"Close Details"})]}),a.jsxs("div",{className:"animate-fade-in-up flex flex-col items-center",children:[a.jsx("div",{className:"mb-6 opacity-90 transform group-hover:scale-110 transition-transform duration-500",children:f.icon}),a.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:f.title}),a.jsx("p",{className:"text-lg text-gray-400 max-w-md mb-6",children:f.desc}),a.jsxs("button",{onClick:()=>o(!0),className:"text-sm font-bold text-indigo-400 hover:text-indigo-300 flex items-center gap-1 transition-colors px-4 py-2 rounded-lg hover:bg-indigo-500/10",children:[a.jsx("span",{children:"View Walkthrough"}),a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})]},r)]}),a.jsxs("div",{className:"flex flex-col items-center gap-6",children:[a.jsx("div",{className:"flex gap-2",children:c.map((h,m)=>a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${m===r?"w-8 bg-indigo-500":"w-2 bg-gray-700"}`},m))}),a.jsxs("div",{className:"flex gap-4 w-full sm:w-auto",children:[t&&a.jsx("button",{onClick:()=>{r>0?(n(r-1),o(!1)):t()},className:"px-6 py-3 bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg font-bold transition-colors w-full sm:w-auto",children:"Back"}),a.jsx("button",{onClick:d,className:"px-10 py-3 bg-white text-gray-900 hover:bg-gray-100 rounded-lg font-bold transition-colors w-full sm:w-auto",children:r===c.length-1?"Finish Setup":"Next Feature"})]})]})]})},Pce=({onNext:e,onBack:t})=>{const{userProfile:r}=vt(),[n,s]=y.useState("selection"),[o,c]=y.useState({name:"",type:"",personality:""}),[f,d]=y.useState([]),[h,m]=y.useState(""),[p,x]=y.useState(!1),w=y.useRef(null),j={name:"Oracle",type:"Mystic Construct",personality:"Wise, Efficient, Slightly Mystical"};y.useEffect(()=>{w.current?.scrollIntoView({behavior:"smooth"})},[f]);const N=()=>{e(j)},S=async()=>{s("forge"),x(!0),d([{role:"model",content:"Booting Forge System... I am the construct builder. Let's create your companion. First, does your helper have a name, or shall we define their personality first?"}]),x(!1)},C=async()=>{if(!h.trim())return;const z={role:"user",content:h},P=[...f,z];d(P),m(""),x(!0);try{const B=r?.settings?.geminiApiKey;if(!B)throw new Error("API Key missing.");const T=await Ln.forgeHelperChat(B,P,o);c(R=>({...R,...T.updatedDraft})),d(R=>[...R,{role:"model",content:T.aiResponse}])}catch(B){console.error("Forge Error:",B),d(T=>[...T,{role:"model",content:"System Glitch. Please repeat."}])}finally{x(!1)}},A=()=>{const z={name:o.name||"Companion",type:o.type||"Construct",personality:o.personality||"Helpful"};e(z)},E=z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),C())};return a.jsxs("div",{className:"w-full max-w-5xl animate-fade-in mx-auto",children:[n==="selection"&&a.jsxs("div",{className:"text-center space-y-8",children:[a.jsx("div",{className:"w-24 h-24 mx-auto bg-amber-500/20 rounded-full flex items-center justify-center ring-1 ring-amber-500/50 shadow-[0_0_30px_rgba(245,158,11,0.3)]",children:a.jsx("svg",{className:"w-12 h-12 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Forge Your Helper"}),a.jsx("p",{className:"text-gray-300 max-w-2xl mx-auto",children:'Who will guide you through the multiverse? You can use our standard "Oracle" construct, or forge a completely custom AI companion with its own name and personality.'})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-3xl mx-auto",children:[t&&a.jsx("button",{onClick:t,className:"col-span-1 md:col-span-2 mx-auto text-gray-500 hover:text-white mb-2 underline",children:" Go Back"}),a.jsxs("button",{onClick:N,className:"p-6 bg-gray-800 hover:bg-gray-750 border border-gray-700 hover:border-gray-500 rounded-xl transition-all group text-left",children:[a.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-amber-400",children:"Default: The Oracle"}),a.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"A wise, mystical construct focused on efficient and accurate advice."}),a.jsx("span",{className:"text-xs font-bold uppercase text-gray-500 group-hover:text-white tracking-wider",children:"Select Oracle "})]}),a.jsxs("button",{onClick:S,className:"p-6 bg-amber-900/20 hover:bg-amber-900/30 border border-amber-500/30 hover:border-amber-500 rounded-xl transition-all group text-left relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-50",children:a.jsx("svg",{className:"w-16 h-16 text-amber-500",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-amber-400",children:"Forge Custom Helper"}),a.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Create a unique companion. Define their name, species, and personality via chat."}),a.jsx("span",{className:"text-xs font-bold uppercase text-amber-500 group-hover:text-white tracking-wider",children:"Start Forging "})]})]})]})]}),n==="forge"&&a.jsxs("div",{className:"flex flex-col md:flex-row h-[600px] border border-gray-700 rounded-2xl overflow-hidden bg-gray-900",children:[a.jsxs("div",{className:"flex-1 flex flex-col border-r border-gray-800",children:[a.jsx("div",{className:"p-4 border-b border-gray-800 bg-gray-800/50 flex justify-between items-center",children:a.jsx("span",{className:"font-mono text-amber-400 text-sm",children:"SYSTEM: FORGE PROTOCOL ENGAGED"})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[f.map((z,P)=>a.jsx("div",{className:`flex ${z.role==="user"?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`max-w-[80%] p-3 rounded-lg text-sm ${z.role==="user"?"bg-amber-600 text-white":"bg-gray-800 text-gray-300"}`,children:z.content})},P)),p&&a.jsx("div",{className:"text-gray-500 text-xs animate-pulse ml-2",children:" Processing..."}),a.jsx("div",{ref:w})]}),a.jsx("div",{className:"p-4 border-t border-gray-800 bg-gray-900",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:h,onChange:z=>m(z.target.value),onKeyDown:E,placeholder:"Ex: Name him 'Gobbo', make him a goblin...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-amber-500 focus:outline-none",disabled:p}),a.jsx("button",{onClick:C,disabled:p||!h.trim(),className:"bg-amber-600 hover:bg-amber-500 text-white px-4 py-2 rounded-lg font-bold",children:"Send"})]})})]}),a.jsxs("div",{className:"w-full md:w-80 bg-gray-950 p-6 flex flex-col",children:[a.jsx("h3",{className:"text-gray-400 font-bold uppercase tracking-wider text-xs mb-6",children:"Blueprint Status"}),a.jsxs("div",{className:"space-y-6 flex-1",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"DESIGNATION (NAME)"}),a.jsx("div",{className:`text-lg font-bold ${o.name?"text-amber-400":"text-gray-700 italic"}`,children:o.name||"Undefined"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"CLASSIFICATION (TYPE)"}),a.jsx("div",{className:`text-sm font-medium ${o.type?"text-white":"text-gray-700 italic"}`,children:o.type||"Undefined"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"PARAMETERS (PERSONALITY)"}),a.jsx("div",{className:`text-sm font-medium ${o.personality?"text-white":"text-gray-700 italic"}`,children:o.personality||"Undefined"})]})]}),a.jsx("button",{onClick:A,className:"w-full py-4 bg-green-600 hover:bg-green-500 text-white font-bold rounded-lg shadow-lg hover:shadow-green-500/20 transition-all mt-4",children:"Complete Forge Protocol"})]})]})]})},Rce=()=>{const e=Un(),{userProfile:t,updateSettings:r,refreshUserProfile:n}=vt(),[s,o]=y.useState(t?.settings?.onboarding_step||0),[c,f]=y.useState(!1),[d,h]=y.useState(!1),m=async()=>{const E=s+1;o(E),await r({onboarding_step:E})},p=async()=>{const E=Math.max(0,s-1);o(E),await r({onboarding_step:E})},x=async E=>{const z=s+1;o(z),await r({helper:E,onboarding_step:z})},w=async E=>{if(E==="donate"){h(!0);return}const z=s+1;o(z),await r({subscription_tier:"alpha_tester",onboarding_step:z})},j=async E=>{const z=s+1;o(z),await r({ai_enabled:!!E,geminiApiKey:E||void 0,onboarding_step:z})},N=()=>{f(!0)},S=async E=>{const z=s+1;o(z),await r({playstyle:E,onboarding_step:z}),await n(),f(!1)},C=async()=>{const E=s+1;o(E),await r({onboarding_step:E})},A=async()=>{await r({onboarding_complete:!0,onboarding_step:6}),e("/dashboard")};return a.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 z-0",children:[a.jsx("img",{src:"/MTG-Forge_Logo_Background_80.png",alt:"Background",className:"w-full h-full object-cover opacity-30"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900 via-gray-900/90 to-black/80"})]}),a.jsxs("div",{className:"relative z-10 flex-grow flex items-center justify-center p-4",children:[s===0&&a.jsx(Ace,{onNext:m}),s===1&&a.jsx(Tce,{onNext:w,onBack:p}),s===2&&a.jsx(Oce,{onNext:j,onBack:p}),s===3&&a.jsx(Pce,{onNext:x,onBack:p}),s===4&&a.jsxs("div",{className:"text-center max-w-2xl animate-fade-in-up space-y-8",children:[a.jsx("div",{className:"w-24 h-24 mx-auto bg-green-500/20 rounded-full flex items-center justify-center ring-1 ring-green-500/50 shadow-[0_0_30px_rgba(34,197,94,0.3)]",children:a.jsx("svg",{className:"w-12 h-12 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Define Your Playstyle"}),a.jsxs("p",{className:"text-gray-300",children:["Let us get to know what kind of mage you are.",a.jsx("br",{}),"We'll tailor card suggestions and deck strategies to your personal taste."]})]}),a.jsxs("div",{className:"flex gap-4 justify-center",children:[a.jsx("button",{onClick:p,className:"px-8 py-3 bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white rounded-xl font-medium transition-colors border border-gray-700",children:"Back"}),a.jsx("button",{onClick:N,className:"px-8 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold transition-all shadow-lg hover:shadow-indigo-500/25",children:"Start Quiz"}),a.jsx("button",{onClick:C,className:"px-8 py-3 bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white rounded-xl font-medium transition-colors border border-gray-700",children:"Skip for Now"})]})]}),s===5&&a.jsx(Mce,{onNext:A,onBack:p})]}),a.jsx("div",{className:"relative z-10 py-8 flex justify-center gap-3",children:[0,1,2,3,4,5].map(E=>a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${E===s?"w-8 bg-indigo-500":"w-2 bg-gray-700"}`},E))}),a.jsx(rT,{isOpen:c,onClose:()=>f(!1),onComplete:S}),a.jsx(CT,{isOpen:d,onClose:()=>{h(!1),w("skip")}})]})},Ice=()=>a.jsxs("div",{className:"min-h-screen bg-gray-900 pb-20",children:[a.jsxs("div",{className:"relative py-20 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-indigo-900/10"}),a.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto px-6 text-center",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white mb-6 tracking-tight",children:"About The Forge"}),a.jsx("p",{className:"text-xl text-gray-400 leading-relaxed",children:"Built by players, for players. The Forge is designed to be the ultimate companion for Magic: The Gathering deck building and collection management."})]})]}),a.jsxs("div",{className:"max-w-4xl mx-auto px-6 space-y-16",children:[a.jsxs("section",{className:"space-y-6 animate-fade-in-up",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("span",{className:"w-8 h-1 bg-amber-500 rounded-full"}),"The Human Factor"]}),a.jsxs("div",{className:"bg-gray-800/50 p-8 rounded-3xl border border-amber-500/10 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 pointer-events-none",children:a.jsx("svg",{className:"w-64 h-64 text-amber-500",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),a.jsxs("div",{className:"relative z-10 space-y-4",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"AI is a Tool, Not a Replacement"}),a.jsxs("div",{className:"space-y-4 text-gray-300 leading-relaxed",children:[a.jsx("p",{children:"At The Forge, we believe AI can be an incredible creative partner. It can scan thousands of cards in seconds, find obscure combos, and suggest perfectly curved land bases."}),a.jsxs("p",{children:[a.jsx("strong",{className:"text-amber-400",children:"However, AI is still a work in progress."}),' It can hallucinate interactions, suggest banned cards, or miss the subtle "fun factor" that makes a Commander deck truly special.']}),a.jsx("p",{children:"We built these tools to get you 80% of the way there. The final 20%the soul of the deckcomes from you. Use our suggestions as a starting point, but trust your intuition and knowledge to build something truly unique."})]})]})]})]}),a.jsxs("section",{className:"space-y-8 animate-fade-in-up",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("span",{className:"w-8 h-1 bg-indigo-500 rounded-full"}),"Powered By"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("a",{href:"https://scryfall.com",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-800/50 p-6 rounded-2xl border border-gray-700 hover:border-indigo-500 hover:bg-gray-800 transition-all group",children:[a.jsx("div",{className:"text-indigo-400 mb-4 group-hover:scale-110 transition-transform origin-left",children:a.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),a.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Scryfall"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"The best MTG card database in the world. All card data and imagery is provided by their incredible API."})]}),a.jsxs("a",{href:"https://tcgplayer.com",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-800/50 p-6 rounded-2xl border border-gray-700 hover:border-green-500 hover:bg-gray-800 transition-all group",children:[a.jsx("div",{className:"text-green-400 mb-4 group-hover:scale-110 transition-transform origin-left",children:a.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"TCGPlayer"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Real-time pricing data for card values. Keeping your collection valuation accurate and up to date."})]}),a.jsxs("a",{href:"https://magic.wizards.com",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-800/50 p-6 rounded-2xl border border-gray-700 hover:border-orange-500 hover:bg-gray-800 transition-all group",children:[a.jsx("div",{className:"text-orange-400 mb-4 group-hover:scale-110 transition-transform origin-left",children:a.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),a.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Wizards of the Coast"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Creators of Magic: The Gathering. All mana symbols, card names, and art are copyright WotC."})]})]})]}),a.jsxs("section",{className:"space-y-8 animate-fade-in-up delay-100",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("span",{className:"w-8 h-1 bg-purple-500 rounded-full"}),"Get in Touch"]}),a.jsx("div",{className:"bg-gradient-to-br from-indigo-900/20 to-purple-900/20 p-8 rounded-3xl border border-white/5 relative overflow-hidden",children:a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-8",children:[a.jsxs("div",{className:"space-y-4 text-center md:text-left",children:[a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Join the Community"}),a.jsx("p",{className:"text-gray-400 max-w-md",children:"Have a feature request? Found a bug? Or just want to show off your latest brew? Come chat with us on Discord."})]}),a.jsxs("a",{href:"https://discord.gg/your-discord-link",target:"_blank",rel:"noopener noreferrer",className:"px-8 py-4 bg-[#5865F2] hover:bg-[#4752C4] text-white font-bold rounded-xl transition-all shadow-lg hover:shadow-indigo-500/25 flex items-center gap-3 transform hover:-translate-y-1",children:[a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.211.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.419 0 1.334-.956 2.419-2.157 2.419zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.419 0 1.334-.946 2.419-2.157 2.419z"})}),"Join Discord"]})]})})]}),a.jsx("div",{className:"text-center text-gray-600 text-xs pt-20",children:a.jsx("p",{children:"The Forge is unofficial Fan Content permitted under the Fan Content Policy. Not approved/endorsed by Wizards. Portions of the materials used are property of Wizards of the Coast. Wizards of the Coast LLC."})})]})]}),bd=[{badge:"White",colors:["W"],theme:"Absolute Order",flavor_text:"A single spark of light can banish a world of shadows."},{badge:"Blue",colors:["U"],theme:"Infinite Inquiry",flavor_text:"The mind is the only battlefield where victory is absolute."},{badge:"Black",colors:["B"],theme:"Unrestricted Power",flavor_text:"Power at any cost, for greatness is written in blood."},{badge:"Red",colors:["R"],theme:"Chaotic Passion",flavor_text:"Do not fear the fire; fear the heart that commands it."},{badge:"Green",colors:["G"],theme:"Primal Growth",flavor_text:"The forest does not ask for permission to grow."},{badge:"Azorius",colors:["W","U"],theme:"Bureaucratic Control",flavor_text:"Justice is blind, but she has a very long reach."},{badge:"Dimir",colors:["U","B"],theme:"Subterfuge & Infiltration",flavor_text:"The finest secrets are those that kill the ones who keep them."},{badge:"Rakdos",colors:["B","R"],theme:"Carnival of Carnage",flavor_text:"Entertain us, or become the entertainment."},{badge:"Gruul",colors:["R","G"],theme:"Primal Destruction",flavor_text:"Not for city-dwellers. Not for the weak. Only for the weak."},{badge:"Selesnya",colors:["G","W"],theme:"Collective Harmony",flavor_text:"One voice is a whisper; the Conclave is a roar."},{badge:"Orzhov",colors:["W","B"],theme:"Indentured Eternity",flavor_text:"Even death is no excuse for a breach of contract."},{badge:"Izzet",colors:["U","R"],theme:"Volatile Genius",flavor_text:"If it doesnt explode, you aren't trying hard enough."},{badge:"Golgari",colors:["B","G"],theme:"Cycles of Rot",flavor_text:"Every grave is a garden if you wait long enough."},{badge:"Boros",colors:["R","W"],theme:"Tactical Aggression",flavor_text:"First to the fight, last to the fall."},{badge:"Simic",colors:["G","U"],theme:"Biological Evolution",flavor_text:"Nature is a rough draft; we are the final edit."},{badge:"Esper",colors:["W","U","B"],theme:"Obsidian Logic",flavor_text:"Perfection is not a goal; it is a requirement."},{badge:"Grixis",colors:["U","B","R"],theme:"Ruthless Tyranny",flavor_text:"A wasteland of power where only the cruelest thrive."},{badge:"Jund",colors:["B","R","G"],theme:"Apex Predation",flavor_text:"In this world, you are either the dragon or the meal."},{badge:"Naya",colors:["R","G","W"],theme:"Primal Majesty",flavor_text:"Where the mountains wake and the earth trembles."},{badge:"Bant",colors:["G","W","U"],theme:"Knightly Order",flavor_text:"The sigil of the sun protects those who stand together."},{badge:"Abzan",colors:["W","B","G"],theme:"Eternal Endurance",flavor_text:"We do not break; we simply outlast."},{badge:"Jeskai",colors:["U","R","W"],theme:"Disciplined Spark",flavor_text:"The wind carries the strike; the mind guides the bolt."},{badge:"Sultai",colors:["B","G","U"],theme:"Opulent Decay",flavor_text:"Power is measured in gold and the bones of the fallen."},{badge:"Mardu",colors:["R","W","B"],theme:"Relentless Conquest",flavor_text:"Victory is the only law worth following."},{badge:"Temur",colors:["G","U","R"],theme:"Elemental Instinct",flavor_text:"The wild does not think; it reacts with ice and fire."},{badge:"Glint-Eye",colors:["U","B","R","G"],theme:"Chaotic Adaptation",flavor_text:"Order is a cage; we have chosen to break the locks."},{badge:"Dune-Brood",colors:["W","B","R","G"],theme:"Sandless Conquest",flavor_text:"When the logic of the mind fails, the instinct of the swarm prevails."},{badge:"Ink-Treader",colors:["W","U","R","G"],theme:"Radiant Reflection",flavor_text:"To touch one is to touch the whole of the world."},{badge:"Witch-Maw",colors:["W","U","B","G"],theme:"Eldritch Growth",flavor_text:"There is a hunger beneath the earth that knows no fire."},{badge:"Yore-Tiller",colors:["W","U","B","R"],theme:"Relentless History",flavor_text:"The past is a weapon we sharpen for the future."},{badge:"WUBRG",colors:["W","U","B","R","G"],theme:"The Convergence",flavor_text:"The full spectrum of power, bound in a single hand."},{badge:"Colorless",colors:["C"],theme:"The Great Void",flavor_text:"Existence is a fleeting dream in the eyes of the silent."}],Lce=()=>{const{slug:e}=of(),t=Un(),{currentUser:r}=vt(),{addToast:n}=rn(),[s,o]=y.useState(null),[c,f]=y.useState(!0),[d,h]=y.useState(null),[m,p]=y.useState("grid"),[x,w]=y.useState(!1),[j,N]=y.useState(!1),[S,C]=y.useState(0);y.useEffect(()=>{(async()=>{try{const Z=await Fe.get(`/decks/public/${e}`);o(Z)}catch(Z){console.error("Public deck load failed",Z),h("Deck not found or private.")}finally{f(!1)}})()},[e]);const{deck:A,items:E}=s||{},z=y.useMemo(()=>{if(!A)return bd.find(re=>re.badge==="Colorless");if(A?.format?.toLowerCase()==="standard"){const re=A.colors||A.commander?.color_identity||[];return bd.find(Y=>Y.colors.length!==re.length?!1:Y.colors.every(H=>re.includes(H)))||{badge:"Standard",theme:"Constructed",flavor_text:"A format defined by rotation and meta mastery."}}const q=A?.commander?.color_identity||[],Z=A?.commander_partner?.color_identity||[],V=[...new Set([...q,...Z])];return V.length===0?bd.find(re=>re.badge==="Colorless"):bd.find(re=>re.colors.length!==V.length?!1:re.colors.every(fe=>V.includes(fe)))||bd.find(re=>re.badge==="Colorless")},[A]),P=y.useMemo(()=>{if(!E)return 0;let q=E.reduce((X,re)=>X+(re.countInDeck||re.count||1),0);const Z=A?.commander?.id||A?.commander?.scryfall_id,V=A?.commander_partner?.id||A?.commander_partner?.scryfall_id;return A?.commander&&!E.some(X=>(X.scryfall_id||X.id)===Z)&&q++,A?.commander_partner&&!E.some(X=>(X.scryfall_id||X.id)===V)&&q++,q},[E,A]),B=y.useMemo(()=>{if(!E)return 0;let q=E.reduce((X,re)=>{const fe=parseFloat(re.prices?.[re.finish==="foil"?"usd_foil":"usd"]||re.data?.prices?.[re.finish==="foil"?"usd_foil":"usd"]||0);return X+fe*(re.countInDeck||re.count||1)},0);const Z=A?.commander?.id||A?.commander?.scryfall_id,V=A?.commander_partner?.id||A?.commander_partner?.scryfall_id;if(A?.commander&&!E.some(X=>(X.scryfall_id||X.id)===Z)){const X=A.commander;q+=parseFloat(X.prices?.usd||0)}if(A?.commander_partner&&!E.some(X=>(X.scryfall_id||X.id)===V)){const X=A.commander_partner;q+=parseFloat(X.prices?.usd||0)}return q},[E,A]),T=q=>{if(!E)return 0;let Z=E.reduce((re,fe)=>((fe.data||fe).type_line||"").includes(q)?re+(fe.countInDeck||1):re,0);const V=A?.commander?.id||A?.commander?.scryfall_id,X=A?.commander_partner?.id||A?.commander_partner?.scryfall_id;return A?.commander&&!E.some(re=>(re.scryfall_id||re.id)===V)&&(A.commander.type_line||"").includes(q)&&Z++,A?.commander_partner&&!E.some(re=>(re.scryfall_id||re.id)===X)&&(A.commander_partner.type_line||"").includes(q)&&Z++,Z},R=y.useMemo(()=>{const q=A?.ai_blueprint||A?.aiBlueprint||{},Z=q.layout?.types||q.suggestedCounts||{};return[{label:"Total",current:P,target:A?.format?.toLowerCase()==="standard"||A?.format?.toLowerCase()==="modern"?60:100},{label:"Creatures",current:T("Creature"),target:Z.Creatures||Z.Creature||30},{label:"Lands",current:T("Land"),target:Z.Lands||Z.Land||36},{label:"Instants",current:T("Instant"),target:Z.Instants||Z.Instant||10},{label:"Sorceries",current:T("Sorcery"),target:Z.Sorceries||Z.Sorcery||10},{label:"Enchantments",current:T("Enchantment"),target:Z.Enchantments||Z.Enchantment||5},{label:"Artifacts",current:T("Artifact"),target:Z.Artifacts||Z.Artifact||10},{label:"Planeswalkers",current:T("Planeswalker"),target:Z.Planeswalkers||Z.Planeswalker||0}].filter(X=>X.target>0)},[A,P,E]),$=y.useMemo(()=>{if(!E)return{};const q={Commander:[],Creature:[],Planeswalker:[],Instant:[],Sorcery:[],Artifact:[],Enchantment:[],Land:[],Other:[]};return E.forEach(Z=>{const X=((Z.data||Z).type_line||"").toLowerCase(),re=Z.scryfall_id||Z.id,fe=A?.commander&&re===(A.commander.id||A.commander.scryfall_id),Y=A?.commander_partner&&re===(A.commander_partner.id||A.commander_partner.scryfall_id);if(fe||Y){q.Commander.push(Z);return}X.includes("creature")?q.Creature.push(Z):X.includes("planeswalker")?q.Planeswalker.push(Z):X.includes("instant")?q.Instant.push(Z):X.includes("sorcery")?q.Sorcery.push(Z):X.includes("artifact")?q.Artifact.push(Z):X.includes("enchantment")?q.Enchantment.push(Z):X.includes("land")?q.Land.push(Z):q.Other.push(Z)}),Object.fromEntries(Object.entries(q).filter(([Z,V])=>V.length>0))},[E,A]);if(c)return a.jsx("div",{className:"min-h-screen bg-gray-950 flex justify-center items-center",children:a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-500"})});if(d||!A)return a.jsx("div",{className:"min-h-screen bg-gray-950 flex justify-center items-center text-red-500 font-bold text-xl",children:d||"Deck inaccessible"});const I=S===0?A.commander:A.commander_partner||A.commander,O=I?.image_uris?.art_crop||I?.card_faces?.[0]?.image_uris?.art_crop||"",U={W:"https://svgs.scryfall.io/card-symbols/W.svg",U:"https://svgs.scryfall.io/card-symbols/U.svg",B:"https://svgs.scryfall.io/card-symbols/B.svg",R:"https://svgs.scryfall.io/card-symbols/R.svg",G:"https://svgs.scryfall.io/card-symbols/G.svg"},D=async()=>{if(r)try{n("Cloning deck...","info");const q=await oi.createDeck(r.uid,{name:`Copy of ${A.name}`,commander:A.commander,commanderPartner:A.commander_partner,format:A.format,isMockup:!0}),Z=E.map(V=>({scryfall_id:V.scryfall_id||V.id,name:V.name,set_code:V.set_code,collector_number:V.collector_number,finish:V.finish,image_uri:V.image_uri,data:V.data}));await Fe.post(`/decks/${q.id}/cards/batch`,{cards:Z}),n("Deck cloned successfully!","success"),t(`/decks/${q.id}`)}catch(q){console.error(q),n("Failed to clone deck","error")}};return a.jsxs("div",{className:"relative min-h-screen bg-gray-950 text-white font-sans",children:[a.jsx("div",{className:"fixed inset-0 z-0 bg-cover bg-center",style:{backgroundImage:`url(${O})`},children:a.jsx("div",{className:"absolute inset-0 bg-gray-950/70 backdrop-blur-sm"})}),a.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 py-8 pb-24",children:[a.jsx("div",{className:"bg-gray-900/40 backdrop-blur-xl border border-white/10 rounded-3xl p-6 md:p-8 mb-8 shadow-2xl",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-6 items-start md:items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"px-2 py-0.5 bg-indigo-500/20 text-indigo-300 text-[10px] font-black uppercase tracking-widest rounded border border-indigo-500/30",children:A.format||"Commander"}),a.jsxs("span",{className:"text-gray-500 text-xs font-bold uppercase tracking-wide",children:["Shared by ",A.user_id?"a User":"Unknown"]})]}),a.jsx("h1",{className:"text-3xl md:text-5xl font-black text-white tracking-tighter leading-tight mb-2",children:A.name}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex items-center gap-1",children:(()=>{const q=A?.commander?.color_identity||[],Z=A?.commander_partner?.color_identity||[];return[...new Set([...q,...Z])].map(X=>a.jsx("img",{src:U[X],alt:X,className:"w-4 h-4"},X))})()}),a.jsx("div",{className:"h-4 w-px bg-white/10"}),a.jsx("div",{className:"text-sm font-bold text-gray-400",children:z.theme})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("div",{className:"text-2xl font-mono font-bold text-green-400",children:["$",B.toFixed(2)]}),a.jsxs("div",{className:"text-xs text-gray-500 uppercase tracking-widest font-bold",children:[P," Cards"]}),r?a.jsx("button",{onClick:D,className:"mt-2 bg-white text-gray-900 px-6 py-2 rounded-xl font-bold hover:bg-gray-200 transition-colors shadow-lg shadow-white/10 text-sm",children:"Clone to Collection"}):a.jsx(kt,{to:"/login",className:"mt-2 bg-white text-gray-900 px-6 py-2 rounded-xl font-bold hover:bg-gray-200 transition-colors shadow-lg shadow-white/10 text-sm",children:"Login to Clone"})]})]})}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 mb-8",children:R.map((q,Z)=>{const V=q.target>0?Math.min(q.current/q.target*100,100):0,X=q.target>0&&q.current===q.target,re=q.target>0&&q.current>q.target;return a.jsxs("div",{className:"bg-gray-900/40 p-3 rounded-xl border border-white/5 backdrop-blur-md shadow-lg",children:[a.jsxs("div",{className:"flex justify-between items-end mb-1",children:[a.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:q.label}),a.jsxs("span",{className:`text-xs font-mono font-bold ${X?"text-green-400":re?"text-orange-400":"text-indigo-300"}`,children:[q.current,a.jsx("span",{className:"text-gray-600 mx-0.5",children:"/"}),q.target||"?"]})]}),a.jsx("div",{className:"h-1.5 w-full bg-gray-900 rounded-full overflow-hidden border border-gray-700/30",children:a.jsx("div",{className:`h-full transition-all duration-700 ${X?"bg-green-500":re?"bg-orange-500":"bg-indigo-500"}`,style:{width:`${V||0}%`}})})]},Z)})}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[a.jsx("div",{className:"flex-1 order-3 lg:order-1 space-y-8",children:a.jsxs("div",{className:"bg-gray-900/30 backdrop-blur-xl rounded-3xl border border-white/5 overflow-hidden",children:[a.jsxs("div",{className:"p-4 bg-white/5 border-b border-white/5 flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Decklist"]}),a.jsxs("div",{className:"flex bg-gray-900/50 rounded-lg p-1 gap-1 border border-gray-700",children:[a.jsx("button",{onClick:()=>p("grid"),className:`p-1.5 rounded ${m==="grid"?"bg-gray-700 text-white":"text-gray-400"}`,children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),a.jsx("button",{onClick:()=>p("table"),className:`p-1.5 rounded ${m==="table"?"bg-gray-700 text-white":"text-gray-400"}`,children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]}),a.jsx("div",{className:"p-4 space-y-8",children:Object.entries($).map(([q,Z])=>a.jsxs("div",{children:[a.jsxs("h4",{className:"text-xs font-black text-indigo-300 uppercase tracking-widest border-b border-indigo-500/20 mb-3 pb-1 flex justify-between",children:[a.jsx("span",{children:q}),a.jsx("span",{className:"text-gray-500",children:Z.length})]}),m==="grid"?a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:Z.map((V,X)=>a.jsx($d,{card:V,readOnly:!0},X))}):a.jsx("div",{className:"space-y-1",children:Z.map((V,X)=>a.jsxs("div",{className:"flex justify-between p-2 hover:bg-white/5 rounded text-sm text-gray-300",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:"font-mono text-gray-500",children:V.countInDeck||1}),a.jsx("span",{className:V.finish==="foil"?"text-yellow-200":"",children:V.name})]}),a.jsx("div",{className:"font-mono text-xs opacity-50",children:V.mana_cost})]},X))})]},q))})]})}),a.jsxs("div",{className:"w-full lg:w-80 shrink-0 order-1 lg:order-2 space-y-6",children:[A.commander&&a.jsxs("div",{className:"bg-gray-900/30 backdrop-blur-xl rounded-3xl border border-white/5 overflow-hidden p-6 relative",children:[a.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4 border-b border-white/5 pb-2",children:"Commander"}),a.jsx("img",{src:I?.image_uris?.normal||I?.card_faces?.[0]?.image_uris?.normal||"https://placehold.co/400x600",className:"w-full rounded-xl shadow-2xl hover:scale-105 transition-transform duration-500",alt:"Commander"}),A.commander_partner&&a.jsx("button",{onClick:()=>C(q=>q===0?1:0),className:"mt-4 w-full py-2 bg-indigo-600/20 hover:bg-indigo-600/40 text-indigo-300 text-xs font-bold uppercase rounded-lg border border-indigo-500/20 transition-colors",children:"View Partner"})]}),a.jsxs("div",{className:"bg-gray-900/30 backdrop-blur-xl rounded-3xl border border-white/5 overflow-hidden p-6 order-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-white/5 pb-2",children:[a.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Analytics"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>N(!0),className:"text-[10px] font-bold text-white uppercase tracking-wider bg-indigo-600 px-2 py-1 rounded hover:bg-indigo-500 transition-colors shadow-lg shadow-indigo-500/20 flex items-center gap-1",children:[a.jsx("span",{children:""})," Doctor"]}),a.jsx("button",{onClick:()=>w(!0),className:"text-[10px] font-bold text-indigo-400 hover:text-white uppercase tracking-wider bg-indigo-500/10 px-2 py-1 rounded hover:bg-indigo-500/20 transition-colors",children:"Details "})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"h-[120px]",children:[a.jsx("h4",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-2 text-center",children:"Mana Curve"}),a.jsx(o6,{cards:E,type:"mana"})]}),a.jsxs("div",{className:"h-[160px]",children:[a.jsx("h4",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-2 text-center",children:"Type Dist"}),a.jsx(o6,{cards:E,type:"types"})]})]})]}),!r&&a.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/40 to-purple-900/40 backdrop-blur-xl rounded-3xl border border-white/10 p-6 text-center",children:[a.jsx("h3",{className:"font-bold text-white mb-2",children:"Build Your Own Decks"}),a.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Join MTG Forge to manage your collection, build decks with AI, and track prices."}),a.jsx(kt,{to:"/login",className:"block w-full py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold shadow-lg shadow-indigo-900/20 transition-all text-sm",children:"Get Started Free"})]})]})]})]}),a.jsx(ER,{isOpen:x,onClose:()=>w(!1),cards:E,deckName:A.name}),a.jsx(PR,{isOpen:j,onClose:()=>N(!1),deck:A,cards:E,isOwner:!1})]})},Dce=()=>{const{userProfile:e}=vt(),[t,r]=y.useState(!1),[n,s]=y.useState(!1),o=e?.settings?.helper,c=o?.name||"MTG Forge",[f,d]=y.useState([]),[h,m]=y.useState(""),[p,x]=y.useState(!1),[w,j]=y.useState(!1),N=y.useRef(null),S=()=>{N.current?.scrollIntoView({behavior:"smooth"})};y.useEffect(()=>{S()},[f]),y.useEffect(()=>{if(!t)return;(async()=>{const B=e?.settings?.geminiApiKey;if(!B||w){!B&&f.length===0&&d([{role:"model",content:'<p class="text-gray-300">Please add your Gemini API Key in Settings to enable the chat.</p>'}]);return}if(j(!0),!(f.length>0))try{const T=`
                    You are about to have a conversation with a user.
                    your name is ${c}.
                    Your personality is: ${o?.personality||"Knowledgeable and friendly"}.
                    It is not their first time working with you, interact with them appropriately.
                    Use emojis. 
                `,R=await Ln.sendMessage(B,[],T,"",o);d([{role:"model",content:R}])}catch(T){console.error("Intro fetch failed",T),d([{role:"model",content:`<p>Greetings. I am ${c}. How may I assist?</p>`}])}})()},[t,e?.settings?.geminiApiKey,c,w]);const C=e?.settings?.playstyle,A=C?`
User's Playstyle Profile:
- Archetypes: ${C.archetypes?.join(", ")||"Unknown"}
- Summary: ${C.summary||"Unknown"}
- Combat Preference: ${C.scores?.aggression>50?"Aggressive":"Defensive"}
- Interaction Level: ${C.scores?.interaction>50?"High":"Low"}
    `.trim():"",E=async P=>{if(P.preventDefault(),!h.trim()||p)return;const B=h.trim();m(""),d(T=>[...T,{role:"user",content:B}]),x(!0);try{const T=e?.settings?.geminiApiKey;if(!T){d(I=>[...I,{role:"model",content:'<div class="p-3 bg-red-900/30 border border-red-700 rounded text-red-200">Please add your Gemini API Key in <a href="/settings" class="underline font-bold">Settings</a> to use the chat.</div>'}]);return}const R=f.map(I=>({role:I.role,content:I.content})),$=await Ln.sendMessage(T,R,B,A,o);d(I=>[...I,{role:"model",content:$}])}catch(T){console.error(T),d(R=>[...R,{role:"model",content:`<div class="p-3 bg-red-900/30 border border-red-700 rounded text-red-200">Error: ${T.message}</div>`}])}finally{x(!1)}},z=n?"fixed inset-0 top-16 z-40":`fixed bottom-0 right-0 z-50 transition-all duration-300 ${t?"":"w-16 h-16 mb-20 mr-4 md:mb-6 md:mr-6"}`;return a.jsxs("div",{className:`${z} ${!n&&t?"w-full md:w-96 h-[600px] mb-16 md:mb-0 mr-0":""}`,children:[!t&&a.jsx("button",{onClick:()=>r(!0),className:"w-16 h-16 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-full shadow-lg shadow-purple-500/30 flex items-center justify-center hover:scale-110 transition-transform animate-bounce-slow",children:a.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),t&&a.jsxs("div",{className:`flex flex-col h-full bg-gray-800 border-t border-l border-gray-700 shadow-2xl overflow-hidden ${n?"w-full h-full":"rounded-tl-2xl md:rounded-tr-2xl md:border-r"}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-900 border-b border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),a.jsx("span",{className:"font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600",children:c})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>s(!n),className:"text-gray-400 hover:text-white p-1 hover:bg-gray-800 rounded transition-colors",title:n?"Collapse":"Expand",children:n?a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 14h6m-6 0v6M20 10h-6m6 0V4"})}):a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M20 8V4m0 0h-4M4 16v4m0 0h4M20 16v4m0 0h-4"})})}),a.jsx("button",{onClick:()=>{r(!1),s(!1)},className:"text-gray-400 hover:text-white",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-800/95 backdrop-blur",children:[f.length===0&&!p?a.jsxs("div",{className:"flex justify-center items-center h-full text-gray-500 italic",children:["Summoning ",c,"..."]}):f.map((P,B)=>a.jsx("div",{className:`flex ${P.role==="user"?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl ${P.role==="user"?"bg-indigo-600 text-white rounded-br-none":"bg-gray-700 text-gray-200 rounded-bl-none"} shadow-md`,children:P.role==="user"?P.content:a.jsx("div",{dangerouslySetInnerHTML:{__html:P.content}})})},B)),p&&a.jsx("div",{className:"flex justify-start",children:a.jsxs("div",{className:"bg-gray-700 rounded-2xl rounded-bl-none p-3 flex gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-75"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-150"})]})}),a.jsx("div",{ref:N})]}),a.jsx("form",{onSubmit:E,className:"p-4 bg-gray-900 border-t border-gray-700",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:h,onChange:P=>m(P.target.value),placeholder:`Ask ${c}...`,className:"flex-1 bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none"}),a.jsx("button",{type:"submit",disabled:p,className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-2 rounded-lg font-bold hover:shadow-lg hover:shadow-indigo-500/20 transition-all disabled:opacity-50",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]})},Bce=()=>{const{isOpen:e,selectedCard:t,closeCardModal:r}=vg(),{cards:n,removeCard:s,updateCard:o}=da(),{addToast:c}=rn(),[f,d]=y.useState(!1),[h,m]=y.useState(!1),[p,x]=y.useState({quantity:1,finish:"nonfoil",deckId:"",price_bought:"",tags:[],currentTag:""}),[w,j]=y.useState([]);if(y.useEffect(()=>{e&&t&&(d(!1),m(!1),x({quantity:t.count||t.quantity||1,finish:t.finish||"nonfoil",deckId:t.deckId||t.deck_id||"",price_bought:t.price_bought||"",tags:typeof t.tags=="string"?JSON.parse(t.tags):t.tags||[],currentTag:""}),Fe.get("/decks").then(j).catch(fe=>console.error("Failed to load decks",fe)))},[e,t]),!e||!t)return null;const N=t.data||t,S=N.card_faces,C=S&&S.length>1&&!!S[1].image_uris,z=(fe=>C?N.card_faces[fe]:N)(f?1:0),P=fe=>fe.image_uris?.normal||fe.image_uris?.large||null,B=fe=>fe.image_uris?.art_crop||fe.image_uris?.large||fe.image_uris?.normal||null,T=C?P(N.card_faces[0]):N.image_uris?.normal||N.image_uris?.large||t.image_uri,R=C?P(N.card_faces[1]):null,$=C?B(N.card_faces[0]):N.image_uris?.art_crop||N.image_uris?.large||t.image_uri,I=C?B(N.card_faces[1]):null,O=f?R:T,U=(f?I:$)||"https://placehold.co/1000x800?text=No+Art",D=fe=>fe?fe.replace(/\{/g,"").replace(/\}/g," "):"",q=(fe,Y)=>{const H={legal:"bg-green-600 text-white border-green-700",not_legal:"bg-gray-700 text-gray-400 border-gray-600",banned:"bg-red-600 text-white border-red-700",restricted:"bg-yellow-600 text-white border-yellow-700"},G=H[Y]||H.not_legal;return a.jsx("div",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase border ${G} flex justify-center items-center shadow-sm`,children:a.jsx("span",{children:fe})},fe)},Z=async()=>{if(window.confirm(`Are you sure you want to delete ${t.name} from your collection?`))try{await s(t.id||t.firestoreId),c("Card deleted","success"),r()}catch(fe){console.error(fe),c("Failed to delete card","error")}},V=async()=>{try{const fe={count:parseInt(p.quantity),finish:p.finish,deck_id:p.deckId?parseInt(p.deckId):null,price_bought:p.price_bought?parseFloat(p.price_bought):null,tags:p.tags};await o(t.id||t.firestoreId,fe),c("Card details updated","success"),m(!1)}catch(fe){console.error(fe),c("Failed to update details","error")}},X=fe=>{fe.key==="Enter"&&p.currentTag.trim()&&(fe.preventDefault(),p.tags.includes(p.currentTag.trim())||x(Y=>({...Y,tags:[...Y.tags,Y.currentTag.trim()],currentTag:""})))},re=fe=>{x(Y=>({...Y,tags:Y.tags.filter(H=>H!==fe)}))};return a.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center overflow-hidden animate-fade-in",role:"dialog",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity",onClick:r}),a.jsxs("div",{className:"relative z-10 w-full max-w-6xl h-full md:h-[90vh] max-h-[90vh] rounded-2xl shadow-2xl flex flex-col md:flex-row overflow-y-auto md:overflow-hidden bg-gray-900/50 border border-gray-700",children:[a.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden rounded-2xl",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-700 ease-in-out transform scale-110 opacity-100",style:{backgroundImage:`url('${U}')`}}),a.jsx("div",{className:"absolute inset-0 bg-black/40"})]}),a.jsx("button",{onClick:r,className:"absolute top-4 right-4 z-50 p-2 bg-black/30 hover:bg-black/60 rounded-full text-white/70 hover:text-white transition-colors backdrop-blur-md",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsxs("div",{className:"w-full md:w-1/2 lg:w-5/12 p-8 flex flex-col items-center justify-center relative shrink-0 z-10",children:[a.jsxs("div",{className:"relative w-full max-w-xs md:max-w-md aspect-[2.5/3.5] perspective-1000 transition-transform duration-500",children:[a.jsx("img",{src:O||"https://placehold.co/250x350?text=No+Image",alt:t.name,className:"w-full h-full object-contain drop-shadow-2xl rounded-xl shadow-black/50"}),C&&a.jsx("button",{onClick:()=>d(!f),className:"absolute top-4 right-4 bg-black/60 hover:bg-indigo-600 text-white p-3 rounded-full shadow-lg border border-white/20 hover:border-indigo-400 transition-all group backdrop-blur-md",title:"Flip Card",children:a.jsx("svg",{className:`w-6 h-6 transform transition-transform duration-500 ${f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),N.artist&&a.jsxs("div",{className:"mt-4 text-white/80 text-xs flex items-center gap-1 bg-black/30 px-3 py-1 rounded-full backdrop-blur-sm border border-white/10",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Illustrated by ",a.jsx("span",{className:"font-medium",children:N.artist})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col md:h-full bg-gray-900/60 backdrop-blur-xl min-h-0 z-10 border-l border-white/10",children:[a.jsxs("div",{className:"p-6 border-b border-gray-700 bg-gray-900/50 shrink-0 relative group",children:[a.jsx("button",{onClick:()=>m(!h),className:`absolute top-6 right-16 p-2 rounded-full transition-all ${h?"text-indigo-400 bg-indigo-500/20":"text-gray-500 hover:text-white hover:bg-gray-700"}`,title:h?"Cancel Editing":"Edit Card Details",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),a.jsx("h2",{className:"text-3xl font-bold text-white mb-1 pr-10",children:N.name}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-gray-400 text-sm mt-2",children:[a.jsx("span",{className:"font-medium text-gray-300",children:z.type_line}),z.mana_cost&&a.jsx("span",{className:"bg-gray-800 px-2 py-0.5 rounded border border-gray-700 text-gray-200 font-mono tracking-wider",children:D(z.mana_cost)}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-indigo-400 font-bold",children:N.set_name||N.set?.toUpperCase()}),a.jsx("span",{className:"text-gray-600",children:""}),a.jsx("span",{className:"capitalize",children:N.rarity}),a.jsx("span",{className:"text-gray-600",children:""}),a.jsxs("span",{children:["#",N.collector_number]})]})]})]}),a.jsxs("div",{className:"flex-1 overflow-visible md:overflow-y-auto p-6 space-y-8 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-transparent",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Gameplay & Rules"]}),a.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-5 border border-gray-700/50 shadow-inner",children:[z.oracle_text?a.jsx("div",{className:"text-gray-200 whitespace-pre-wrap font-serif leading-relaxed text-lg",children:z.oracle_text.split(`
`).map((fe,Y)=>a.jsx("p",{className:"mb-2 last:mb-0",children:fe},Y))}):a.jsx("span",{className:"text-gray-500 italic",children:"No rules text."}),z.flavor_text&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700/50 text-gray-400 italic font-serif text-sm",children:['"',z.flavor_text,'"']})]}),(z.power||z.loyalty)&&a.jsx("div",{className:"flex justify-end",children:a.jsx("div",{className:"bg-gray-800 border border-gray-600 px-4 py-2 rounded-lg text-xl font-bold text-white shadow-lg",children:z.power?`${z.power} / ${z.toughness}`:`Loyalty: ${z.loyalty}`})})]}),N.legalities&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"Legalities"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[q("Commander",N.legalities.commander),q("Standard",N.legalities.standard),q("Modern",N.legalities.modern),q("Pauper",N.legalities.pauper),q("Legacy",N.legalities.legacy),q("Vintage",N.legalities.vintage)]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-700/50",children:[a.jsxs("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Status & Ownership ",h&&a.jsx("span",{className:"text-indigo-400 text-[10px] ml-2 font-normal animate-pulse",children:"(Editing)"})]}),t.is_wishlist&&!h&&a.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/30 rounded-lg p-3 flex items-center gap-3 animate-pulse",children:[a.jsx("div",{className:"p-2 bg-orange-500 rounded-full text-white",children:a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-orange-400 font-black text-xs uppercase tracking-wider",children:"In Wishlist"}),a.jsx("div",{className:"text-gray-400 text-[10px]",children:"This card is on your want list."})]})]}),(()=>{const fe=N.id,Y=n.filter(Q=>Q.scryfall_id===fe||Q.scryfallId===fe||Q.id===fe),H=Y.filter(Q=>!Q.is_wishlist&&Q.finish==="nonfoil").reduce((Q,ae)=>Q+(ae.count||1),0),G=Y.filter(Q=>!Q.is_wishlist&&Q.finish==="foil").reduce((Q,ae)=>Q+(ae.count||1),0),ee=Y.filter(Q=>Q.is_wishlist).reduce((Q,ae)=>Q+(ae.count||1),0);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:`p-2.5 rounded-xl border transition-all ${H>0?"bg-indigo-500/10 border-indigo-500/30":"bg-gray-800/20 border-gray-700/30 opacity-40"}`,children:[a.jsx("div",{className:"text-[10px] font-black uppercase tracking-tighter text-gray-400 mb-0.5",children:"Normal"}),a.jsx("div",{className:"text-xl font-black text-white",children:H}),a.jsx("div",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Owned"})]}),a.jsxs("div",{className:`p-2.5 rounded-xl border transition-all ${G>0?"bg-purple-500/10 border-purple-500/30":"bg-gray-800/20 border-gray-700/30 opacity-40"}`,children:[a.jsx("div",{className:"text-[10px] font-black uppercase tracking-tighter text-gray-400 mb-0.5",children:"Foil"}),a.jsx("div",{className:"text-xl font-black text-indigo-400",children:G}),a.jsx("div",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Owned"})]}),a.jsxs("div",{className:`p-2.5 rounded-xl border transition-all ${ee>0?"bg-orange-500/10 border-orange-500/30":"bg-gray-800/20 border-gray-700/30 opacity-40"}`,children:[a.jsx("div",{className:"text-[10px] font-black uppercase tracking-tighter text-gray-400 mb-0.5",children:"Wishlist"}),a.jsx("div",{className:"text-xl font-black text-orange-400",children:ee}),a.jsx("div",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Wanted"})]})]}),(h||t.firestoreId||t.firestore_id)&&a.jsxs("div",{className:"bg-gray-950/40 rounded-xl overflow-hidden border border-gray-700/50",children:[a.jsxs("div",{className:"px-3 py-2 bg-gray-800/40 border-b border-gray-700/50 flex justify-between items-center text-[10px] uppercase font-black tracking-widest text-gray-400",children:[a.jsx("span",{children:"Selected Item Details"}),t.is_wishlist&&a.jsx("span",{className:"text-orange-500",children:"Wishlist Copy"})]}),a.jsxs("table",{className:"w-full text-xs text-left",children:[a.jsx("thead",{className:"bg-gray-900/50 text-[10px] text-gray-500 font-bold uppercase tracking-wider",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2",children:"Location"}),a.jsx("th",{className:"px-3 py-2 text-center",children:"Foil"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Qty"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Added"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700/30 text-gray-300",children:a.jsxs("tr",{children:[a.jsx("td",{className:"px-3 py-2",children:h?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("select",{value:p.deckId,onChange:Q=>x({...p,deckId:Q.target.value}),className:"bg-gray-800 border border-gray-600 rounded px-2 py-0.5 text-[10px] text-white w-full",children:[a.jsx("option",{value:"",children:"Binder"}),w.map(Q=>a.jsxs("option",{value:Q.id,children:["Deck: ",Q.name]},Q.id))]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-500 text-[9px]",children:"PAID $"}),a.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:p.price_bought,onChange:Q=>x({...p,price_bought:Q.target.value}),className:"bg-gray-800 border-none rounded px-2 py-0.5 text-[10px] text-white w-20 focus:ring-1 focus:ring-indigo-500"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"flex flex-wrap gap-1",children:p.tags&&p.tags.map(Q=>a.jsxs("span",{className:"bg-indigo-600/50 text-white px-1.5 rounded text-[9px] flex items-center gap-1 border border-indigo-500/30",children:[Q,a.jsx("button",{onClick:()=>re(Q),className:"hover:text-red-300",children:""})]},Q))}),a.jsx("input",{type:"text",placeholder:"+ Tag...",value:p.currentTag,onChange:Q=>x({...p,currentTag:Q.target.value}),onKeyDown:X,className:"bg-gray-800 border border-gray-600 rounded px-2 py-0.5 text-[10px] text-white w-full focus:ring-1 focus:ring-indigo-500"})]})]}):a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{children:t.deckId?`Deck #${t.deckId}`:"Binder"}),t.tags&&(typeof t.tags=="string"?JSON.parse(t.tags):t.tags).length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(typeof t.tags=="string"?JSON.parse(t.tags):t.tags).map(Q=>a.jsx("span",{className:"text-[9px] bg-gray-700 px-1 rounded text-gray-300",children:Q},Q))})]})}),a.jsx("td",{className:"px-3 py-2 text-center align-top",children:h?a.jsx("input",{type:"checkbox",checked:p.finish==="foil",onChange:Q=>x({...p,finish:Q.target.checked?"foil":"nonfoil"}),className:"rounded bg-gray-700 border-gray-600 text-indigo-600",title:"Is Foil?"}):t.finish==="foil"?"Yes":"-"}),a.jsx("td",{className:"px-3 py-2 text-right font-black align-top",children:h?a.jsx("input",{type:"number",min:"1",value:p.quantity,onChange:Q=>x({...p,quantity:Q.target.value}),className:"bg-gray-800 border border-gray-600 rounded px-1 py-0.5 text-[10px] text-white w-12 text-center"}):t.count||t.quantity||1}),a.jsxs("td",{className:"px-3 py-2 text-right text-gray-500 font-mono text-[10px] align-top",children:[a.jsx("div",{children:t.added_at?new Date(t.added_at).toLocaleDateString():"N/A"}),t.price_bought&&a.jsxs("div",{className:"text-green-500/70 mt-1",title:"Price Paid",children:["$",parseFloat(t.price_bought).toFixed(2)]})]})]})})]})]}),t.is_wishlist&&!h&&a.jsxs("button",{onClick:async()=>{try{await o(t.id||t.firestoreId,{is_wishlist:!1}),c("Card moved to collection!","success")}catch{c("Failed to move card","error")}},className:"w-full py-2.5 bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-500 hover:to-orange-400 text-white text-[10px] font-black uppercase tracking-[0.2em] rounded-lg shadow-lg shadow-orange-900/30 transition-all flex items-center justify-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 13l4 4L19 7"})}),"I Got This Copy!"]})]})})()]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-700/50",children:[a.jsxs("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Art & Aesthetics"]}),a.jsxs("div",{className:"bg-gray-900/30 rounded-xl p-4 border border-gray-700/50 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between border-b border-gray-800 py-1",children:[a.jsx("span",{className:"text-gray-500",children:"Artist"}),a.jsx("span",{className:"text-white font-medium",children:N.artist||"Unknown"})]}),a.jsxs("div",{className:"flex justify-between border-b border-gray-800 py-1",children:[a.jsx("span",{className:"text-gray-500",children:"Frame"}),a.jsx("span",{className:"text-white",children:N.frame||"2015"})]}),a.jsxs("div",{className:"flex justify-between border-b border-gray-800 py-1",children:[a.jsx("span",{className:"text-gray-500",children:"Border Color"}),a.jsx("span",{className:"text-white capitalize",children:N.border_color||"Black"})]}),a.jsxs("div",{className:"flex justify-between border-b border-gray-800 py-1",children:[a.jsx("span",{className:"text-gray-500",children:"Finishes"}),a.jsx("span",{className:"text-white capitalize",children:N.finishes?.join(", ")})]}),N.watermark&&a.jsxs("div",{className:"flex justify-between border-b border-gray-800 py-1",children:[a.jsx("span",{className:"text-gray-500",children:"Watermark"}),a.jsx("span",{className:"text-white capitalize",children:N.watermark})]}),a.jsxs("div",{className:"flex justify-between border-b border-gray-800 py-1",children:[a.jsx("span",{className:"text-gray-500",children:"Illustration ID"}),a.jsxs("span",{className:"text-gray-400 font-mono text-xs",children:[N.illustration_id?.slice(0,8),"..."]})]})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-700/50",children:[a.jsxs("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),"Developer / Metadata"]}),a.jsxs("div",{className:"bg-gray-900/30 rounded-xl p-4 border border-gray-700/50 space-y-2 text-sm font-mono",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"External Links"}),a.jsx("a",{href:N.scryfall_uri,target:"_blank",rel:"noreferrer",className:"text-indigo-400 hover:text-indigo-300 underline",children:"View on Scryfall"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Scryfall ID"}),a.jsx("span",{className:"text-gray-400",children:N.id})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Oracle ID"}),a.jsx("span",{className:"text-gray-400",children:N.oracle_id})]}),t.firestoreId&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Database ID"}),a.jsx("span",{className:"text-gray-400",children:t.firestoreId})]}),a.jsxs("div",{className:"border-t border-gray-800 pt-2 mt-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Released At"}),a.jsx("span",{className:"text-gray-300",children:N.released_at})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Reserved List"}),a.jsx("span",{className:N.reserved?"text-red-400":"text-gray-400",children:N.reserved?"true":"false"})]})]})]})]}),h&&a.jsxs("div",{className:"pt-6 mt-6 border-t border-gray-700 flex gap-4 animate-fade-in-up",children:[a.jsx("button",{onClick:()=>m(!1),className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white py-3 rounded-lg border border-gray-500 transition-all font-bold tracking-wide uppercase text-sm",children:"Cancel"}),a.jsx("button",{onClick:Z,className:"flex-1 bg-red-600/80 hover:bg-red-600 text-white py-3 rounded-lg shadow-md transition-all font-bold tracking-wide uppercase text-sm",children:"Delete Card"}),a.jsx("button",{onClick:V,className:"flex-1 bg-green-600 hover:bg-green-500 text-white py-3 rounded-lg shadow-lg shadow-green-900/20 transition-all font-bold tracking-wide uppercase text-sm",children:"Save Changes"})]})]})]})]})]})},$ce=({children:e})=>{const{currentUser:t,userProfile:r,loading:n}=vt(),s=yi(),o=Un(),[c,f]=y.useState(!1);return y.useEffect(()=>{if(!t&&!n){f(!1);return}if(!(n||c)&&t&&r){const h=["/","/login","/about"].includes(s.pathname)||s.pathname.startsWith("/share/"),m=s.pathname==="/onboarding";!r.settings?.onboarding_complete&&!m&&!h&&o("/onboarding"),f(!0)}},[t,r,n,s,o,c]),n?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center text-indigo-500",children:"Loading..."}):e};function zce(){return a.jsx(RU,{children:a.jsx(MU,{children:a.jsx(LU,{children:a.jsxs("div",{className:"bg-gray-900 text-gray-200 font-sans min-h-screen flex flex-col",children:[a.jsx(GU,{}),a.jsx($ce,{children:a.jsx("div",{className:"flex-grow pb-24 md:pb-0",children:a.jsxs(U7,{children:[a.jsx(Qr,{path:"/",element:a.jsx(nF,{})}),a.jsx(Qr,{path:"/about",element:a.jsx(Ice,{})}),a.jsx(Qr,{path:"/dashboard",element:a.jsx(HF,{})}),a.jsx(Qr,{path:"/login",element:a.jsx(WF,{})}),a.jsx(Qr,{path:"/onboarding",element:a.jsx(Rce,{})}),a.jsx(Qr,{path:"/collection",element:a.jsx(eH,{})}),a.jsx(Qr,{path:"/decks",element:a.jsx(iH,{})}),a.jsx(Qr,{path:"/decks/new",element:a.jsx(oH,{})}),a.jsx(Qr,{path:"/decks/:deckId",element:a.jsx(Voe,{})}),a.jsx(Qr,{path:"/share/:slug",element:a.jsx(Lce,{})}),a.jsx(Qr,{path:"/decks/:deckId/build",element:a.jsx(Ece,{})}),a.jsx(Qr,{path:"/sets",element:a.jsx(Koe,{})}),a.jsx(Qr,{path:"/sets/:setCode",element:a.jsx(Yoe,{})}),a.jsx(Qr,{path:"/wishlist",element:a.jsx(Cce,{})}),a.jsx(Qr,{path:"/settings/:tab?",element:a.jsx(Sce,{})})]})})}),a.jsx(Dce,{}),a.jsx(Bce,{})]})})})})}WL.createRoot(document.getElementById("root")).render(a.jsx(Te.StrictMode,{children:a.jsx(dD,{children:a.jsx(zce,{})})}));
